(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2011
//
// bam.js: indexed binary alignments
//

"use strict";

if (typeof require !== 'undefined') {
    var spans = require('./spans');
    var Range = spans.Range;
    var union = spans.union;
    var intersection = spans.intersection;

    var bin = require('./bin');
    var readInt = bin.readInt;
    var readShort = bin.readShort;
    var readByte = bin.readByte;
    var readInt64 = bin.readInt64;
    var readFloat = bin.readFloat;

    var lh3utils = require('./lh3utils');
    var readVob = lh3utils.readVob;
    var unbgzf = lh3utils.unbgzf;
    var reg2bins = lh3utils.reg2bins;
    var Chunk = lh3utils.Chunk;
}

var BAM_MAGIC = 0x14d4142;
var BAI_MAGIC = 0x1494142;

var BamFlags = {
    MULTIPLE_SEGMENTS: 0x1,
    ALL_SEGMENTS_ALIGN: 0x2,
    SEGMENT_UNMAPPED: 0x4,
    NEXT_SEGMENT_UNMAPPED: 0x8,
    REVERSE_COMPLEMENT: 0x10,
    NEXT_REVERSE_COMPLEMENT: 0x20,
    FIRST_SEGMENT: 0x40,
    LAST_SEGMENT: 0x80,
    SECONDARY_ALIGNMENT: 0x100,
    QC_FAIL: 0x200,
    DUPLICATE: 0x400,
    SUPPLEMENTARY: 0x800
};

function BamFile() {}

// Calculate the length (in bytes) of the BAI ref starting at offset.
// Returns {nbin, length, minBlockIndex}
function _getBaiRefLength(uncba, offset) {
    var p = offset;
    var nbin = readInt(uncba, p);p += 4;
    for (var b = 0; b < nbin; ++b) {
        var bin = readInt(uncba, p);
        var nchnk = readInt(uncba, p + 4);
        p += 8 + nchnk * 16;
    }
    var nintv = readInt(uncba, p);p += 4;

    var minBlockIndex = 1000000000;
    var q = p;
    for (var i = 0; i < nintv; ++i) {
        var v = readVob(uncba, q);q += 8;
        if (v) {
            var bi = v.block;
            if (v.offset > 0) bi += 65536;

            if (bi < minBlockIndex) minBlockIndex = bi;
            break;
        }
    }
    p += nintv * 8;

    return {
        minBlockIndex: minBlockIndex,
        nbin: nbin,
        length: p - offset
    };
}

function makeBam(data, bai, indexChunks, callback, attempted) {
    // Do an initial probe on the BAM file to catch any mixed-content errors.
    data.slice(0, 10).fetch(function (header) {
        if (header) {
            return makeBam2(data, bai, indexChunks, callback, attempted);
        } else {
            return callback(null, "Couldn't access BAM.");
        }
    }, { timeout: 5000 });
}

function makeBam2(data, bai, indexChunks, callback, attempted) {
    var bam = new BamFile();
    bam.data = data;
    bam.bai = bai;
    bam.indexChunks = indexChunks;

    var minBlockIndex = bam.indexChunks ? bam.indexChunks.minBlockIndex : 1000000000;

    // Fills out bam.chrToIndex and bam.indexToChr based on the first few bytes of the BAM.
    function parseBamHeader(r) {
        if (!r) {
            return callback(null, "Couldn't access BAM");
        }

        var unc = unbgzf(r, r.byteLength);
        var uncba = new Uint8Array(unc);

        var magic = readInt(uncba, 0);
        if (magic != BAM_MAGIC) {
            return callback(null, "Not a BAM file, magic=0x" + magic.toString(16));
        }
        var headLen = readInt(uncba, 4);
        var header = '';
        for (var i = 0; i < headLen; ++i) {
            header += String.fromCharCode(uncba[i + 8]);
        }

        var nRef = readInt(uncba, headLen + 8);
        var p = headLen + 12;

        bam.chrToIndex = {};
        bam.indexToChr = [];
        for (var i = 0; i < nRef; ++i) {
            var lName = readInt(uncba, p);
            var name = '';
            for (var j = 0; j < lName - 1; ++j) {
                name += String.fromCharCode(uncba[p + 4 + j]);
            }
            var lRef = readInt(uncba, p + lName + 4);
            bam.chrToIndex[name] = i;
            if (name.indexOf('chr') == 0) {
                bam.chrToIndex[name.substring(3)] = i;
            } else {
                bam.chrToIndex['chr' + name] = i;
            }
            bam.indexToChr.push(name);

            p = p + 8 + lName;
        }

        if (bam.indices) {
            return callback(bam);
        }
    }

    function parseBai(header) {
        if (!header) {
            return "Couldn't access BAI";
        }

        var uncba = new Uint8Array(header);
        var baiMagic = readInt(uncba, 0);
        if (baiMagic != BAI_MAGIC) {
            return callback(null, 'Not a BAI file, magic=0x' + baiMagic.toString(16));
        }

        var nref = readInt(uncba, 4);

        bam.indices = [];

        var p = 8;
        for (var ref = 0; ref < nref; ++ref) {
            var blockStart = p;
            var o = _getBaiRefLength(uncba, blockStart);
            p += o.length;

            minBlockIndex = Math.min(o.minBlockIndex, minBlockIndex);

            var nbin = o.nbin;

            if (nbin > 0) {
                bam.indices[ref] = new Uint8Array(header, blockStart, p - blockStart);
            }
        }

        return true;
    }

    if (!bam.indexChunks) {
        bam.bai.fetch(function (header) {
            // Do we really need to fetch the whole thing? :-(
            var result = parseBai(header);
            if (result !== true) {
                if (bam.bai.url && typeof attempted === "undefined") {
                    // Already attempted x.bam.bai not there so now trying x.bai
                    bam.bai.url = bam.data.url.replace(new RegExp('.bam$'), '.bai');

                    // True lets us know we are making a second attempt
                    makeBam2(data, bam.bai, indexChunks, callback, true);
                } else {
                    // We've attempted x.bam.bai & x.bai and nothing worked
                    callback(null, result);
                }
            } else {
                bam.data.slice(0, minBlockIndex).fetch(parseBamHeader);
            }
        }); // Timeout on first request to catch Chrome mixed-content error.
    } else {
        var chunks = bam.indexChunks.chunks;
        bam.indices = [];
        for (var i = 0; i < chunks.length; i++) {
            bam.indices[i] = null; // To be filled out lazily as needed
        }
        bam.data.slice(0, minBlockIndex).fetch(parseBamHeader);
    }
}

BamFile.prototype.blocksForRange = function (refId, min, max) {
    var index = this.indices[refId];
    if (!index) {
        return [];
    }

    var intBinsL = reg2bins(min, max);
    var intBins = [];
    for (var i = 0; i < intBinsL.length; ++i) {
        intBins[intBinsL[i]] = true;
    }
    var leafChunks = [],
        otherChunks = [];

    var nbin = readInt(index, 0);
    var p = 4;
    for (var b = 0; b < nbin; ++b) {
        var bin = readInt(index, p);
        var nchnk = readInt(index, p + 4);
        //        dlog('bin=' + bin + '; nchnk=' + nchnk);
        p += 8;
        if (intBins[bin]) {
            for (var c = 0; c < nchnk; ++c) {
                var cs = readVob(index, p);
                var ce = readVob(index, p + 8);
                (bin < 4681 ? otherChunks : leafChunks).push(new Chunk(cs, ce));
                p += 16;
            }
        } else {
            p += nchnk * 16;
        }
    }
    // console.log('leafChunks = ' + JSON.stringify(leafChunks));
    // console.log('otherChunks = ' + JSON.stringify(otherChunks));

    var nintv = readInt(index, p);
    // console.log('nintv=' + nintv);
    var lowest = null;
    var minLin = Math.min(min >> 14, nintv - 1),
        maxLin = Math.min(max >> 14, nintv - 1);
    for (var i = minLin; i <= maxLin; ++i) {
        var lb = readVob(index, p + 4 + i * 8);
        if (!lb) {
            continue;
        }
        if (!lowest || lb.block < lowest.block || lb.block == lowest.block && lb.offset < lowest.offset) {
            lowest = lb;
        }
    }
    // console.log('Lowest LB = ' + lowest);

    var prunedOtherChunks = [];
    if (lowest != null) {
        for (var i = 0; i < otherChunks.length; ++i) {
            var chnk = otherChunks[i];
            if (chnk.maxv.block > lowest.block || chnk.maxv.block == lowest.block && chnk.maxv.offset >= lowest.offset) {
                prunedOtherChunks.push(chnk);
            }
        }
    }
    // console.log('prunedOtherChunks = ' + JSON.stringify(prunedOtherChunks));
    otherChunks = prunedOtherChunks;

    var intChunks = [];
    for (var i = 0; i < otherChunks.length; ++i) {
        intChunks.push(otherChunks[i]);
    }
    for (var i = 0; i < leafChunks.length; ++i) {
        intChunks.push(leafChunks[i]);
    }

    intChunks.sort(function (c0, c1) {
        var dif = c0.minv.block - c1.minv.block;
        if (dif != 0) {
            return dif;
        } else {
            return c0.minv.offset - c1.minv.offset;
        }
    });
    var mergedChunks = [];
    if (intChunks.length > 0) {
        var cur = intChunks[0];
        for (var i = 1; i < intChunks.length; ++i) {
            var nc = intChunks[i];
            if (nc.minv.block == cur.maxv.block /* && nc.minv.offset == cur.maxv.offset */) {
                    // no point splitting mid-block
                    cur = new Chunk(cur.minv, nc.maxv);
                } else {
                mergedChunks.push(cur);
                cur = nc;
            }
        }
        mergedChunks.push(cur);
    }
    // console.log('mergedChunks = ' + JSON.stringify(mergedChunks));

    return mergedChunks;
};

BamFile.prototype.fetch = function (chr, min, max, callback, opts) {
    var thisB = this;
    opts = opts || {};

    var chrId = this.chrToIndex[chr];
    var chunks;
    if (chrId === undefined) {
        chunks = [];
    } else {
        // Fetch this portion of the BAI if it hasn't been loaded yet.
        if (this.indices[chrId] === null && this.indexChunks.chunks[chrId]) {
            var start_stop = this.indexChunks.chunks[chrId];
            return this.bai.slice(start_stop[0], start_stop[1]).fetch(function (data) {
                var buffer = new Uint8Array(data);
                this.indices[chrId] = buffer;
                return this.fetch(chr, min, max, callback, opts);
            }.bind(this));
        }

        chunks = this.blocksForRange(chrId, min, max);
        if (!chunks) {
            callback(null, 'Error in index fetch');
        }
    }

    var records = [];
    var index = 0;
    var data;

    function tramp() {
        if (index >= chunks.length) {
            return callback(records);
        } else if (!data) {
            var c = chunks[index];
            var fetchMin = c.minv.block;
            var fetchMax = c.maxv.block + (1 << 16); // *sigh*
            // console.log('fetching ' + fetchMin + ':' + fetchMax);
            thisB.data.slice(fetchMin, fetchMax - fetchMin).fetch(function (r) {
                data = unbgzf(r, c.maxv.block - c.minv.block + 1);
                return tramp();
            });
        } else {
            var ba = new Uint8Array(data);
            var finished = thisB.readBamRecords(ba, chunks[index].minv.offset, records, min, max, chrId, opts);
            data = null;
            ++index;
            if (finished) return callback(records);else return tramp();
        }
    }
    tramp();
};

var SEQRET_DECODER = ['=', 'A', 'C', 'x', 'G', 'x', 'x', 'x', 'T', 'x', 'x', 'x', 'x', 'x', 'x', 'N'];
var CIGAR_DECODER = ['M', 'I', 'D', 'N', 'S', 'H', 'P', '=', 'X', '?', '?', '?', '?', '?', '?', '?'];

function BamRecord() {}

BamFile.prototype.readBamRecords = function (ba, offset, sink, min, max, chrId, opts) {
    while (true) {
        var blockSize = readInt(ba, offset);
        var blockEnd = offset + blockSize + 4;
        if (blockEnd > ba.length) {
            return false;
        }

        var record = new BamRecord();

        var refID = readInt(ba, offset + 4);
        var pos = readInt(ba, offset + 8);

        var bmn = readInt(ba, offset + 12);
        var bin = (bmn & 0xffff0000) >> 16;
        var mq = (bmn & 0xff00) >> 8;
        var nl = bmn & 0xff;

        var flag_nc = readInt(ba, offset + 16);
        var flag = (flag_nc & 0xffff0000) >> 16;
        var nc = flag_nc & 0xffff;

        var lseq = readInt(ba, offset + 20);

        var nextRef = readInt(ba, offset + 24);
        var nextPos = readInt(ba, offset + 28);

        var tlen = readInt(ba, offset + 32);

        record.segment = this.indexToChr[refID];
        record.flag = flag;
        record.pos = pos;
        record.mq = mq;
        if (opts.light) record.seqLength = lseq;

        if (!opts.light || opts.includeName) {
            var readName = '';
            for (var j = 0; j < nl - 1; ++j) {
                readName += String.fromCharCode(ba[offset + 36 + j]);
            }
            record.readName = readName;
        }

        if (!opts.light) {
            if (nextRef >= 0) {
                record.nextSegment = this.indexToChr[nextRef];
                record.nextPos = nextPos;
            }

            var p = offset + 36 + nl;

            var cigar = '';
            for (var c = 0; c < nc; ++c) {
                var cigop = readInt(ba, p);
                cigar = cigar + (cigop >> 4) + CIGAR_DECODER[cigop & 0xf];
                p += 4;
            }
            record.cigar = cigar;

            var seq = '';
            var seqBytes = lseq + 1 >> 1;
            for (var j = 0; j < seqBytes; ++j) {
                var sb = ba[p + j];
                seq += SEQRET_DECODER[(sb & 0xf0) >> 4];
                if (seq.length < lseq) seq += SEQRET_DECODER[sb & 0x0f];
            }
            p += seqBytes;
            record.seq = seq;

            var qseq = '';
            for (var j = 0; j < lseq; ++j) {
                qseq += String.fromCharCode(ba[p + j] + 33);
            }
            p += lseq;
            record.quals = qseq;

            while (p < blockEnd) {
                var tag = String.fromCharCode(ba[p], ba[p + 1]);
                var type = String.fromCharCode(ba[p + 2]);
                var value;

                if (type == 'A') {
                    value = String.fromCharCode(ba[p + 3]);
                    p += 4;
                } else if (type == 'i' || type == 'I') {
                    value = readInt(ba, p + 3);
                    p += 7;
                } else if (type == 'c' || type == 'C') {
                    value = ba[p + 3];
                    p += 4;
                } else if (type == 's' || type == 'S') {
                    value = readShort(ba, p + 3);
                    p += 5;
                } else if (type == 'f') {
                    value = readFloat(ba, p + 3);
                    p += 7;
                } else if (type == 'Z' || type == 'H') {
                    p += 3;
                    value = '';
                    for (;;) {
                        var cc = ba[p++];
                        if (cc == 0) {
                            break;
                        } else {
                            value += String.fromCharCode(cc);
                        }
                    }
                } else if (type == 'B') {
                    var atype = String.fromCharCode(ba[p + 3]);
                    var alen = readInt(ba, p + 4);
                    var elen;
                    var reader;
                    if (atype == 'i' || atype == 'I' || atype == 'f') {
                        elen = 4;
                        if (atype == 'f') reader = readFloat;else reader = readInt;
                    } else if (atype == 's' || atype == 'S') {
                        elen = 2;
                        reader = readShort;
                    } else if (atype == 'c' || atype == 'C') {
                        elen = 1;
                        reader = readByte;
                    } else {
                        throw 'Unknown array type ' + atype;
                    }

                    p += 8;
                    value = [];
                    for (var i = 0; i < alen; ++i) {
                        value.push(reader(ba, p));
                        p += elen;
                    }
                } else {
                    throw 'Unknown type ' + type;
                }
                record[tag] = value;
            }
        }

        if (!min || record.pos <= max && record.pos + lseq >= min) {
            if (chrId === undefined || refID == chrId) {
                sink.push(record);
            }
        }
        if (record.pos > max) {
            return true;
        }
        offset = blockEnd;
    }

    // Exits via top of loop.
};

if (typeof module !== 'undefined') {
    module.exports = {
        makeBam: makeBam,
        BAM_MAGIC: BAM_MAGIC,
        BAI_MAGIC: BAI_MAGIC,
        BamFlags: BamFlags
    };
}

},{"./bin":4,"./lh3utils":26,"./spans":40}],2:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2014
//
// bedwig.js
//

"use strict";

if (typeof require !== 'undefined') {
    var spans = require('./spans');
    var Range = spans.Range;
    var union = spans.union;
    var intersection = spans.intersection;

    var sa = require('./sourceadapters');
    var dalliance_registerParserFactory = sa.registerParserFactory;

    var das = require('./das');
    var DASStylesheet = das.DASStylesheet;
    var DASStyle = das.DASStyle;
    var DASFeature = das.DASFeature;
    var DASGroup = das.DASGroup;

    var utils = require('./utils');
    var shallowCopy = utils.shallowCopy;
}

function BedWigParser(type) {
    this.type = type;
}

BedWigParser.prototype.createSession = function (sink) {
    if (this.type == 'wig') return new WigParseSession(this, sink);else return new BedParseSession(this, sink);
};

var __KV_REGEXP = /([^=]+)=(.+)/;
var __SPACE_REGEXP = /\s/;
var BED_COLOR_REGEXP = new RegExp("^[0-9]+,[0-9]+,[0-9]+");

function BedParseSession(parser, sink) {
    this.parser = parser;
    this.sink = sink;
}

BedParseSession.prototype.parse = function (line) {
    var toks = line.split(__SPACE_REGEXP);
    if (toks.length < 3) return;

    var start = parseInt(toks[1]) + 1;
    var end = parseInt(toks[2]);

    var f = { segment: toks[0],
        min: start,
        max: end };

    if (toks.length > 3 && toks[3] !== '.') {
        f.label = toks[3];
    }

    if (toks.length > 4) {
        f.score = parseFloat(toks[4]);
    }

    if (toks.length > 5) {
        f.orientation = toks[5];
    }

    if (toks.length > 8) {
        var color = toks[8];
        if (BED_COLOR_REGEXP.test(color)) {
            f.itemRgb = 'rgb(' + color + ')';
        }
    }

    if (toks.length >= 12) {
        var thickStart = parseInt(toks[6]);
        var thickEnd = parseInt(toks[7]);
        var blockCount = parseInt(toks[9]);
        var blockSizes = toks[10].split(',').map(function (x) {
            return parseInt(x);
        });
        var blockStarts = toks[11].split(',').map(function (x) {
            return parseInt(x);
        });

        f.type = 'transcript';
        var grp = new DASGroup();
        grp.id = toks[3];
        grp.type = 'transcript';
        grp.notes = [];
        f.groups = [grp];

        if (toks.length > 12) {
            var geneId = toks[12];
            var geneName = geneId;
            if (toks.length > 13) {
                geneName = toks[13];
            }
            var gg = new DASGroup();
            gg.id = geneId;
            gg.label = geneName;
            gg.type = 'gene';
            f.groups.push(gg);
        }

        var spans = null;
        for (var b = 0; b < blockCount; ++b) {
            var bmin = blockStarts[b] + start;
            var bmax = bmin + blockSizes[b];
            var span = new Range(bmin, bmax);
            if (spans) {
                spans = union(spans, span);
            } else {
                spans = span;
            }
        }

        var tsList = spans.ranges();
        for (var s = 0; s < tsList.length; ++s) {
            var ts = tsList[s];
            var bf = shallowCopy(f);
            bf.min = ts.min();
            bf.max = ts.max();
            this.sink(bf);
        }

        if (thickEnd > thickStart) {
            var codingRegion = f.orientation == '+' ? new Range(thickStart, thickEnd + 3) : new Range(thickStart - 3, thickEnd);
            // +/- 3 to account for stop codon

            var tl = intersection(spans, codingRegion);
            if (tl) {
                f.type = 'translation';
                var tlList = tl.ranges();
                var readingFrame = 0;
                for (var s = 0; s < tlList.length; ++s) {
                    // Record reading frame for every exon
                    var index = s;
                    if (f.orientation == '-') index = tlList.length - s - 1;
                    var ts = tlList[index];
                    var bf = shallowCopy(f);
                    bf.min = ts.min();
                    bf.max = ts.max();
                    f.readframe = readingFrame;
                    var length = ts.max() - ts.min();
                    readingFrame = (readingFrame + length) % 3;
                    this.sink(bf);
                }
            }
        }
    } else {
        this.sink(f);
    }
};

BedParseSession.prototype.flush = function () {};

function WigParseSession(parser, sink) {
    this.parser = parser;
    this.sink = sink;
    this.wigState = null;
}

WigParseSession.prototype.parse = function (line) {
    var toks = line.split(__SPACE_REGEXP);

    if (toks[0] == 'fixedStep') {
        this.wigState = 'fixedStep';
        this.chr = this.pos = this.step = null;
        this.span = 1;

        for (var ti = 1; ti < toks.length; ++ti) {
            var m = __KV_REGEXP.exec(toks[ti]);
            if (m) {
                if (m[1] == 'chrom') {
                    this.chr = m[2];
                } else if (m[1] == 'start') {
                    this.pos = parseInt(m[2]);
                } else if (m[1] == 'step') {
                    this.step = parseInt(m[2]);
                } else if (m[1] == 'span') {
                    this.span = parseInt(m[2]);
                }
            }
        }
    } else if (toks[0] == 'variableStep') {
        this.wigState = 'variableStep';
        this.chr = null;
        this.span = 1;

        for (var ti = 1; ti < toks.length; ++ti) {
            var m = __KV_REGEXP.exec(toks[ti]);
            if (m[1] == 'chrom') {
                this.chr = m[2];
            } else if (m[1] == 'span') {
                this.span = parseInt(m[2]);
            }
        }
    } else {
        if (!this.wigState) {
            if (toks.length < 4) return;

            var f = { segment: toks[0],
                min: parseInt(toks[1]) + 1,
                max: parseInt(toks[2]),
                score: parseFloat(toks[3]) };

            this.sink(f);
        } else if (this.wigState == 'fixedStep') {
            if (toks.length != 1) return;
            var score = parseFloat(toks[0]);
            var f = { segment: this.chr, min: this.pos, max: this.pos + this.span - 1, score: score };
            this.pos += this.step;
            this.sink(f);
        } else if (this.wigState == 'variableStep') {
            if (toks.length != 2) return;
            var pos = parseInt(toks[0]);
            var score = parseFloat(toks[1]);
            var f = { segment: this.chr, min: pos, max: pos + this.span - 1, score: score };
            this.sink(f);
        }
    }
};

WigParseSession.prototype.flush = function () {};

BedWigParser.prototype.getStyleSheet = function (callback) {
    var thisB = this;
    var stylesheet = new DASStylesheet();

    if (this.type == 'wig') {
        var wigStyle = new DASStyle();
        wigStyle.glyph = 'HISTOGRAM';
        wigStyle.BGCOLOR = 'blue';
        wigStyle.HEIGHT = 30;
        stylesheet.pushStyle({ type: 'default' }, null, wigStyle);
    } else {
        var wigStyle = new DASStyle();
        wigStyle.glyph = 'BOX';
        wigStyle.FGCOLOR = 'black';
        wigStyle.BGCOLOR = 'blue';
        wigStyle.HEIGHT = 8;
        wigStyle.BUMP = true;
        wigStyle.LABEL = true;
        wigStyle.ZINDEX = 20;
        stylesheet.pushStyle({ type: 'default' }, null, wigStyle);

        var wigStyle = new DASStyle();
        wigStyle.glyph = 'BOX';
        wigStyle.FGCOLOR = 'black';
        wigStyle.BGCOLOR = 'red';
        wigStyle.HEIGHT = 10;
        wigStyle.BUMP = true;
        wigStyle.ZINDEX = 20;
        stylesheet.pushStyle({ type: 'translation' }, null, wigStyle);

        var tsStyle = new DASStyle();
        tsStyle.glyph = 'BOX';
        tsStyle.FGCOLOR = 'black';
        tsStyle.BGCOLOR = 'white';
        tsStyle.HEIGHT = 10;
        tsStyle.ZINDEX = 10;
        tsStyle.BUMP = true;
        tsStyle.LABEL = true;
        stylesheet.pushStyle({ type: 'transcript' }, null, tsStyle);

        var densStyle = new DASStyle();
        densStyle.glyph = 'HISTOGRAM';
        densStyle.COLOR1 = 'white';
        densStyle.COLOR2 = 'black';
        densStyle.HEIGHT = 30;
        stylesheet.pushStyle({ type: 'density' }, null, densStyle);
    }

    return callback(stylesheet);
};

dalliance_registerParserFactory('bed', function (t) {
    return new BedWigParser(t);
});
dalliance_registerParserFactory('wig', function (t) {
    return new BedWigParser(t);
});

},{"./das":10,"./sourceadapters":38,"./spans":40,"./utils":55}],3:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2010
//
// bigwig.js: indexed binary WIG (and BED) files
//

"use strict";

if (typeof require !== 'undefined') {
    var spans = require('./spans');
    var Range = spans.Range;
    var union = spans.union;
    var intersection = spans.intersection;

    var das = require('./das');
    var DASFeature = das.DASFeature;
    var DASGroup = das.DASGroup;

    var utils = require('./utils');
    var shallowCopy = utils.shallowCopy;

    var bin = require('./bin');
    var readInt = bin.readInt;

    var jszlib = require('jszlib');
    var jszlib_inflate_buffer = jszlib.inflateBuffer;
    var arrayCopy = jszlib.arrayCopy;
}

var BIG_WIG_MAGIC = 0x888FFC26;
var BIG_WIG_MAGIC_BE = 0x26FC8F88;
var BIG_BED_MAGIC = 0x8789F2EB;
var BIG_BED_MAGIC_BE = 0xEBF28987;

var BIG_WIG_TYPE_GRAPH = 1;
var BIG_WIG_TYPE_VSTEP = 2;
var BIG_WIG_TYPE_FSTEP = 3;

var M1 = 256;
var M2 = 256 * 256;
var M3 = 256 * 256 * 256;
var M4 = 256 * 256 * 256 * 256;

var BED_COLOR_REGEXP = new RegExp("^[0-9]+,[0-9]+,[0-9]+");

function bwg_readOffset(ba, o) {
    var offset = ba[o] + ba[o + 1] * M1 + ba[o + 2] * M2 + ba[o + 3] * M3 + ba[o + 4] * M4;
    return offset;
}

function BigWig() {}

BigWig.prototype.readChromTree = function (callback) {
    var thisB = this;
    this.chromsToIDs = {};
    this.idsToChroms = {};
    this.maxID = 0;

    var udo = this.unzoomedDataOffset;
    var eb = udo - this.chromTreeOffset & 3;
    udo = udo + 4 - eb;

    this.data.slice(this.chromTreeOffset, udo - this.chromTreeOffset).fetch(function (bpt) {
        var ba = new Uint8Array(bpt);
        var sa = new Int16Array(bpt);
        var la = new Int32Array(bpt);
        var bptMagic = la[0];
        var blockSize = la[1];
        var keySize = la[2];
        var valSize = la[3];
        var itemCount = bwg_readOffset(ba, 16);
        var rootNodeOffset = 32;

        var bptReadNode = function bptReadNode(offset) {
            var nodeType = ba[offset];
            var cnt = sa[offset / 2 + 1];
            offset += 4;
            for (var n = 0; n < cnt; ++n) {
                if (nodeType == 0) {
                    offset += keySize;
                    var childOffset = bwg_readOffset(ba, offset);
                    offset += 8;
                    childOffset -= thisB.chromTreeOffset;
                    bptReadNode(childOffset);
                } else {
                    var key = '';
                    for (var ki = 0; ki < keySize; ++ki) {
                        var charCode = ba[offset++];
                        if (charCode != 0) {
                            key += String.fromCharCode(charCode);
                        }
                    }
                    var chromId = ba[offset + 3] << 24 | ba[offset + 2] << 16 | ba[offset + 1] << 8 | ba[offset + 0];
                    var chromSize = ba[offset + 7] << 24 | ba[offset + 6] << 16 | ba[offset + 5] << 8 | ba[offset + 4];
                    offset += 8;

                    thisB.chromsToIDs[key] = chromId;
                    if (key.indexOf('chr') == 0) {
                        thisB.chromsToIDs[key.substr(3)] = chromId;
                    }
                    thisB.idsToChroms[chromId] = key;
                    thisB.maxID = Math.max(thisB.maxID, chromId);
                }
            }
        };
        bptReadNode(rootNodeOffset);

        callback(thisB);
    });
};

function BigWigView(bwg, cirTreeOffset, cirTreeLength, isSummary) {
    this.bwg = bwg;
    this.cirTreeOffset = cirTreeOffset;
    this.cirTreeLength = cirTreeLength;
    this.isSummary = isSummary;
}

BigWigView.prototype.readWigData = function (chrName, min, max, callback) {
    var chr = this.bwg.chromsToIDs[chrName];
    if (chr === undefined) {
        // Not an error because some .bwgs won't have data for all chromosomes.
        return callback([]);
    } else {
        this.readWigDataById(chr, min, max, callback);
    }
};

BigWigView.prototype.readWigDataById = function (chr, min, max, callback) {
    var thisB = this;
    if (!this.cirHeader) {
        this.bwg.data.slice(this.cirTreeOffset, 48).fetch(function (result) {
            thisB.cirHeader = result;
            var la = new Int32Array(thisB.cirHeader);
            thisB.cirBlockSize = la[1];
            thisB.readWigDataById(chr, min, max, callback);
        });
        return;
    }

    var blocksToFetch = [];
    var outstanding = 0;

    var beforeBWG = Date.now();

    var filter = function filter(chromId, fmin, fmax, toks) {
        return (chr < 0 || chromId == chr) && fmin <= max && fmax >= min;
    };

    var cirFobRecur = function cirFobRecur(offset, level) {
        if (thisB.bwg.instrument) console.log('level=' + level + '; offset=' + offset + '; time=' + (Date.now() | 0));

        outstanding += offset.length;

        if (offset.length == 1 && offset[0] - thisB.cirTreeOffset == 48 && thisB.cachedCirRoot) {
            cirFobRecur2(thisB.cachedCirRoot, 0, level);
            --outstanding;
            if (outstanding == 0) {
                thisB.fetchFeatures(filter, blocksToFetch, callback);
            }
            return;
        }

        var maxCirBlockSpan = 4 + thisB.cirBlockSize * 32; // Upper bound on size, based on a completely full leaf node.
        var spans;
        for (var i = 0; i < offset.length; ++i) {
            var blockSpan = new Range(offset[i], offset[i] + maxCirBlockSpan);
            spans = spans ? union(spans, blockSpan) : blockSpan;
        }

        var fetchRanges = spans.ranges();
        for (var r = 0; r < fetchRanges.length; ++r) {
            var fr = fetchRanges[r];
            cirFobStartFetch(offset, fr, level);
        }
    };

    var cirFobStartFetch = function cirFobStartFetch(offset, fr, level, attempts) {
        var length = fr.max() - fr.min();
        thisB.bwg.data.slice(fr.min(), fr.max() - fr.min()).fetch(function (resultBuffer) {
            for (var i = 0; i < offset.length; ++i) {
                if (fr.contains(offset[i])) {
                    cirFobRecur2(resultBuffer, offset[i] - fr.min(), level);

                    if (offset[i] - thisB.cirTreeOffset == 48 && offset[i] - fr.min() == 0) thisB.cachedCirRoot = resultBuffer;

                    --outstanding;
                    if (outstanding == 0) {
                        thisB.fetchFeatures(filter, blocksToFetch, callback);
                    }
                }
            }
        });
    };

    var cirFobRecur2 = function cirFobRecur2(cirBlockData, offset, level) {
        var ba = new Uint8Array(cirBlockData);
        var sa = new Int16Array(cirBlockData);
        var la = new Int32Array(cirBlockData);

        var isLeaf = ba[offset];
        var cnt = sa[offset / 2 + 1];
        offset += 4;

        if (isLeaf != 0) {
            for (var i = 0; i < cnt; ++i) {
                var lo = offset / 4;
                var startChrom = la[lo];
                var startBase = la[lo + 1];
                var endChrom = la[lo + 2];
                var endBase = la[lo + 3];
                var blockOffset = bwg_readOffset(ba, offset + 16);
                var blockSize = bwg_readOffset(ba, offset + 24);
                if ((chr < 0 || startChrom < chr || startChrom == chr && startBase <= max) && (chr < 0 || endChrom > chr || endChrom == chr && endBase >= min)) {
                    blocksToFetch.push({ offset: blockOffset, size: blockSize });
                }
                offset += 32;
            }
        } else {
            var recurOffsets = [];
            for (var i = 0; i < cnt; ++i) {
                var lo = offset / 4;
                var startChrom = la[lo];
                var startBase = la[lo + 1];
                var endChrom = la[lo + 2];
                var endBase = la[lo + 3];
                var blockOffset = bwg_readOffset(ba, offset + 16);
                if ((chr < 0 || startChrom < chr || startChrom == chr && startBase <= max) && (chr < 0 || endChrom > chr || endChrom == chr && endBase >= min)) {
                    recurOffsets.push(blockOffset);
                }
                offset += 24;
            }
            if (recurOffsets.length > 0) {
                cirFobRecur(recurOffsets, level + 1);
            }
        }
    };

    cirFobRecur([thisB.cirTreeOffset + 48], 1);
};

BigWigView.prototype.fetchFeatures = function (filter, blocksToFetch, callback) {
    var thisB = this;

    blocksToFetch.sort(function (b0, b1) {
        return (b0.offset | 0) - (b1.offset | 0);
    });

    if (blocksToFetch.length == 0) {
        callback([]);
    } else {
        var features = [];
        var createFeature = function createFeature(chr, fmin, fmax, opts) {
            if (!opts) {
                opts = {};
            }

            var f = new DASFeature();
            f._chromId = chr;
            f.segment = thisB.bwg.idsToChroms[chr];
            f.min = fmin;
            f.max = fmax;
            f.type = thisB.bwg.type;

            for (var k in opts) {
                f[k] = opts[k];
            }

            features.push(f);
        };

        var tramp = function tramp() {
            if (blocksToFetch.length == 0) {
                var afterBWG = Date.now();
                // dlog('BWG fetch took ' + (afterBWG - beforeBWG) + 'ms');
                callback(features);
                return; // just in case...
            } else {
                var block = blocksToFetch[0];
                if (block.data) {
                    thisB.parseFeatures(block.data, createFeature, filter);
                    blocksToFetch.splice(0, 1);
                    tramp();
                } else {
                    var fetchStart = block.offset;
                    var fetchSize = block.size;
                    var bi = 1;
                    while (bi < blocksToFetch.length && blocksToFetch[bi].offset == fetchStart + fetchSize) {
                        fetchSize += blocksToFetch[bi].size;
                        ++bi;
                    }

                    thisB.bwg.data.slice(fetchStart, fetchSize).fetch(function (result) {
                        var offset = 0;
                        var bi = 0;
                        while (offset < fetchSize) {
                            var fb = blocksToFetch[bi];

                            var data;
                            if (thisB.bwg.uncompressBufSize > 0) {
                                data = jszlib_inflate_buffer(result, offset + 2, fb.size - 2);
                            } else {
                                var tmp = new Uint8Array(fb.size); // FIXME is this really the best we can do?
                                arrayCopy(new Uint8Array(result, offset, fb.size), 0, tmp, 0, fb.size);
                                data = tmp.buffer;
                            }
                            fb.data = data;

                            offset += fb.size;
                            ++bi;
                        }
                        tramp();
                    });
                }
            }
        };
        tramp();
    }
};

BigWigView.prototype.parseFeatures = function (data, createFeature, filter) {
    var ba = new Uint8Array(data);

    if (this.isSummary) {
        var sa = new Int16Array(data);
        var la = new Int32Array(data);
        var fa = new Float32Array(data);

        var itemCount = data.byteLength / 32;
        for (var i = 0; i < itemCount; ++i) {
            var chromId = la[i * 8];
            var start = la[i * 8 + 1];
            var end = la[i * 8 + 2];
            var validCnt = la[i * 8 + 3];
            var minVal = fa[i * 8 + 4];
            var maxVal = fa[i * 8 + 5];
            var sumData = fa[i * 8 + 6];
            var sumSqData = fa[i * 8 + 7];

            if (filter(chromId, start + 1, end)) {
                var summaryOpts = { type: 'bigwig', score: sumData / validCnt, maxScore: maxVal };
                if (this.bwg.type == 'bigbed') {
                    summaryOpts.type = 'density';
                }
                createFeature(chromId, start + 1, end, summaryOpts);
            }
        }
    } else if (this.bwg.type == 'bigwig') {
        var sa = new Int16Array(data);
        var la = new Int32Array(data);
        var fa = new Float32Array(data);

        var chromId = la[0];
        var blockStart = la[1];
        var blockEnd = la[2];
        var itemStep = la[3];
        var itemSpan = la[4];
        var blockType = ba[20];
        var itemCount = sa[11];

        if (blockType == BIG_WIG_TYPE_FSTEP) {
            for (var i = 0; i < itemCount; ++i) {
                var score = fa[i + 6];
                var fmin = blockStart + i * itemStep + 1,
                    fmax = blockStart + i * itemStep + itemSpan;
                if (filter(chromId, fmin, fmax)) createFeature(chromId, fmin, fmax, { score: score });
            }
        } else if (blockType == BIG_WIG_TYPE_VSTEP) {
            for (var i = 0; i < itemCount; ++i) {
                var start = la[i * 2 + 6] + 1;
                var end = start + itemSpan - 1;
                var score = fa[i * 2 + 7];
                if (filter(chromId, start, end)) createFeature(chromId, start, end, { score: score });
            }
        } else if (blockType == BIG_WIG_TYPE_GRAPH) {
            for (var i = 0; i < itemCount; ++i) {
                var start = la[i * 3 + 6] + 1;
                var end = la[i * 3 + 7];
                var score = fa[i * 3 + 8];
                if (start > end) {
                    start = end;
                }
                if (filter(chromId, start, end)) createFeature(chromId, start, end, { score: score });
            }
        } else {
            console.log('Currently not handling bwgType=' + blockType);
        }
    } else if (this.bwg.type == 'bigbed') {
        var offset = 0;
        var dfc = this.bwg.definedFieldCount;
        var schema = this.bwg.schema;

        while (offset < ba.length) {
            var chromId = ba[offset + 3] << 24 | ba[offset + 2] << 16 | ba[offset + 1] << 8 | ba[offset + 0];
            var start = ba[offset + 7] << 24 | ba[offset + 6] << 16 | ba[offset + 5] << 8 | ba[offset + 4];
            var end = ba[offset + 11] << 24 | ba[offset + 10] << 16 | ba[offset + 9] << 8 | ba[offset + 8];
            offset += 12;
            var rest = '';
            while (true) {
                var ch = ba[offset++];
                if (ch != 0) {
                    rest += String.fromCharCode(ch);
                } else {
                    break;
                }
            }

            var featureOpts = {};

            var bedColumns;
            if (rest.length > 0) {
                bedColumns = rest.split('\t');
            } else {
                bedColumns = [];
            }
            if (bedColumns.length > 0 && dfc > 3) {
                featureOpts.label = bedColumns[0];
            }
            if (bedColumns.length > 1 && dfc > 4) {
                var score = parseInt(bedColumns[1]);
                if (!isNaN(score)) featureOpts.score = score;
            }
            if (bedColumns.length > 2 && dfc > 5) {
                featureOpts.orientation = bedColumns[2];
            }
            if (bedColumns.length > 5 && dfc > 8) {
                var color = bedColumns[5];
                if (BED_COLOR_REGEXP.test(color)) {
                    featureOpts.itemRgb = 'rgb(' + color + ')';
                }
            }

            if (bedColumns.length > dfc - 3 && schema) {
                for (var col = dfc - 3; col < bedColumns.length; ++col) {
                    featureOpts[schema.fields[col + 3].name] = bedColumns[col];
                }
            }

            if (filter(chromId, start + 1, end, bedColumns)) {
                if (dfc < 12) {
                    createFeature(chromId, start + 1, end, featureOpts);
                } else {
                    var thickStart = bedColumns[3] | 0;
                    var thickEnd = bedColumns[4] | 0;
                    var blockCount = bedColumns[6] | 0;
                    var blockSizes = bedColumns[7].split(',');
                    var blockStarts = bedColumns[8].split(',');

                    if (featureOpts.exonFrames) {
                        var exonFrames = featureOpts.exonFrames.split(',');
                        featureOpts.exonFrames = undefined;
                    }

                    featureOpts.type = 'transcript';
                    var grp = new DASGroup();
                    for (var k in featureOpts) {
                        grp[k] = featureOpts[k];
                    }
                    grp.id = bedColumns[0];
                    grp.segment = this.bwg.idsToChroms[chromId];
                    grp.min = start + 1;
                    grp.max = end;
                    grp.notes = [];
                    featureOpts.groups = [grp];

                    // Moving towards using bigGenePred model, but will
                    // still support old Dalliance-style BED12+gene-name for the
                    // foreseeable future.
                    if (bedColumns.length > 9) {
                        var geneId = featureOpts.geneName || bedColumns[9];
                        var geneName = geneId;
                        if (bedColumns.length > 10) {
                            geneName = bedColumns[10];
                        }
                        if (featureOpts.geneName2) geneName = featureOpts.geneName2;

                        var gg = shallowCopy(grp);
                        gg.id = geneId;
                        gg.label = geneName;
                        gg.type = 'gene';
                        featureOpts.groups.push(gg);
                    }

                    var spanList = [];
                    for (var b = 0; b < blockCount; ++b) {
                        var bmin = (blockStarts[b] | 0) + start;
                        var bmax = bmin + (blockSizes[b] | 0);
                        var span = new Range(bmin, bmax);
                        spanList.push(span);
                    }
                    var spans = union(spanList);

                    var tsList = spans.ranges();
                    for (var s = 0; s < tsList.length; ++s) {
                        var ts = tsList[s];
                        createFeature(chromId, ts.min() + 1, ts.max(), featureOpts);
                    }

                    if (thickEnd > thickStart) {
                        var codingRegion = featureOpts.orientation == '+' ? new Range(thickStart, thickEnd + 3) : new Range(thickStart - 3, thickEnd);
                        // +/- 3 to account for stop codon

                        var tl = intersection(spans, codingRegion);
                        if (tl) {
                            featureOpts.type = 'translation';
                            var tlList = tl.ranges();
                            var readingFrame = 0;

                            var tlOffset = 0;
                            while (tlList[0].min() > tsList[tlOffset].max()) {
                                tlOffset++;
                            }for (var s = 0; s < tlList.length; ++s) {
                                // Record reading frame for every exon
                                var index = s;
                                if (featureOpts.orientation == '-') index = tlList.length - s - 1;
                                var ts = tlList[index];
                                featureOpts.readframe = readingFrame;
                                if (exonFrames) {
                                    var brf = parseInt(exonFrames[index + tlOffset]);
                                    if (typeof brf === 'number' && brf >= 0 && brf <= 2) {
                                        featureOpts.readframe = brf;
                                        featureOpts.readframeExplicit = true;
                                    }
                                }
                                var length = ts.max() - ts.min();
                                readingFrame = (readingFrame + length) % 3;
                                createFeature(chromId, ts.min() + 1, ts.max(), featureOpts);
                            }
                        }
                    }
                }
            }
        }
    } else {
        throw Error("Don't know what to do with " + this.bwg.type);
    }
};

//
// nasty cut/paste, should roll back in!
//

BigWigView.prototype.getFirstAdjacent = function (chrName, pos, dir, callback) {
    var chr = this.bwg.chromsToIDs[chrName];
    if (chr === undefined) {
        // Not an error because some .bwgs won't have data for all chromosomes.
        return callback([]);
    } else {
        this.getFirstAdjacentById(chr, pos, dir, callback);
    }
};

BigWigView.prototype.getFirstAdjacentById = function (chr, pos, dir, callback) {
    var thisB = this;
    if (!this.cirHeader) {
        this.bwg.data.slice(this.cirTreeOffset, 48).fetch(function (result) {
            thisB.cirHeader = result;
            var la = new Int32Array(thisB.cirHeader);
            thisB.cirBlockSize = la[1];
            thisB.getFirstAdjacentById(chr, pos, dir, callback);
        });
        return;
    }

    var blockToFetch = null;
    var bestBlockChr = -1;
    var bestBlockOffset = -1;

    var outstanding = 0;

    var beforeBWG = Date.now();

    var cirFobRecur = function cirFobRecur(offset, level) {
        outstanding += offset.length;

        var maxCirBlockSpan = 4 + thisB.cirBlockSize * 32; // Upper bound on size, based on a completely full leaf node.
        var spans;
        for (var i = 0; i < offset.length; ++i) {
            var blockSpan = new Range(offset[i], offset[i] + maxCirBlockSpan);
            spans = spans ? union(spans, blockSpan) : blockSpan;
        }

        var fetchRanges = spans.ranges();
        for (var r = 0; r < fetchRanges.length; ++r) {
            var fr = fetchRanges[r];
            cirFobStartFetch(offset, fr, level);
        }
    };

    var cirFobStartFetch = function cirFobStartFetch(offset, fr, level, attempts) {
        var length = fr.max() - fr.min();
        thisB.bwg.data.slice(fr.min(), fr.max() - fr.min()).fetch(function (resultBuffer) {
            for (var i = 0; i < offset.length; ++i) {
                if (fr.contains(offset[i])) {
                    cirFobRecur2(resultBuffer, offset[i] - fr.min(), level);
                    --outstanding;
                    if (outstanding == 0) {
                        if (!blockToFetch) {
                            if (dir > 0 && (chr != 0 || pos > 0)) {
                                return thisB.getFirstAdjacentById(0, 0, dir, callback);
                            } else if (dir < 0 && (chr != thisB.bwg.maxID || pos < 1000000000)) {
                                return thisB.getFirstAdjacentById(thisB.bwg.maxID, 1000000000, dir, callback);
                            }
                            return callback([]);
                        }

                        thisB.fetchFeatures(function (chrx, fmin, fmax, toks) {
                            return dir < 0 && (chrx < chr || fmax < pos) || dir > 0 && (chrx > chr || fmin > pos);
                        }, [blockToFetch], function (features) {
                            var bestFeature = null;
                            var bestChr = -1;
                            var bestPos = -1;
                            for (var fi = 0; fi < features.length; ++fi) {
                                var f = features[fi];
                                var chrx = f._chromId,
                                    fmin = f.min,
                                    fmax = f.max;
                                if (bestFeature == null || dir < 0 && (chrx > bestChr || fmax > bestPos) || dir > 0 && (chrx < bestChr || fmin < bestPos)) {
                                    bestFeature = f;
                                    bestPos = dir < 0 ? fmax : fmin;
                                    bestChr = chrx;
                                }
                            }

                            if (bestFeature != null) return callback([bestFeature]);else return callback([]);
                        });
                    }
                }
            }
        });
    };

    var cirFobRecur2 = function cirFobRecur2(cirBlockData, offset, level) {
        var ba = new Uint8Array(cirBlockData);
        var sa = new Int16Array(cirBlockData);
        var la = new Int32Array(cirBlockData);

        var isLeaf = ba[offset];
        var cnt = sa[offset / 2 + 1];
        offset += 4;

        if (isLeaf != 0) {
            for (var i = 0; i < cnt; ++i) {
                var lo = offset / 4;
                var startChrom = la[lo];
                var startBase = la[lo + 1];
                var endChrom = la[lo + 2];
                var endBase = la[lo + 3];
                var blockOffset = bwg_readOffset(ba, offset + 16);
                var blockSize = bwg_readOffset(ba, offset + 24);
                if (dir < 0 && (startChrom < chr || startChrom == chr && startBase <= pos) || dir > 0 && (endChrom > chr || endChrom == chr && endBase >= pos)) {
                    // console.log('Got an interesting block: startBase=' + startChrom + ':' + startBase + '; endBase=' + endChrom + ':' + endBase + '; offset=' + blockOffset + '; size=' + blockSize);
                    if (/_random/.exec(thisB.bwg.idsToChroms[startChrom])) {
                        // dlog('skipping random: ' + thisB.bwg.idsToChroms[startChrom]);
                    } else if (blockToFetch == null || dir < 0 && (endChrom > bestBlockChr || endChrom == bestBlockChr && endBase > bestBlockOffset) || dir > 0 && (startChrom < bestBlockChr || startChrom == bestBlockChr && startBase < bestBlockOffset)) {
                        //                        dlog('best is: startBase=' + startChrom + ':' + startBase + '; endBase=' + endChrom + ':' + endBase + '; offset=' + blockOffset + '; size=' + blockSize);
                        blockToFetch = { offset: blockOffset, size: blockSize };
                        bestBlockOffset = dir < 0 ? endBase : startBase;
                        bestBlockChr = dir < 0 ? endChrom : startChrom;
                    }
                }
                offset += 32;
            }
        } else {
            var bestRecur = -1;
            var bestPos = -1;
            var bestChr = -1;
            for (var i = 0; i < cnt; ++i) {
                var lo = offset / 4;
                var startChrom = la[lo];
                var startBase = la[lo + 1];
                var endChrom = la[lo + 2];
                var endBase = la[lo + 3];
                var blockOffset = la[lo + 4] << 32 | la[lo + 5];
                if (dir < 0 && (startChrom < chr || startChrom == chr && startBase <= pos) && endChrom >= chr || dir > 0 && (endChrom > chr || endChrom == chr && endBase >= pos) && startChrom <= chr) {
                    if (bestRecur < 0 || endBase > bestPos) {
                        bestRecur = blockOffset;
                        bestPos = dir < 0 ? endBase : startBase;
                        bestChr = dir < 0 ? endChrom : startChrom;
                    }
                }
                offset += 24;
            }
            if (bestRecur >= 0) {
                cirFobRecur([bestRecur], level + 1);
            }
        }
    };

    cirFobRecur([thisB.cirTreeOffset + 48], 1);
};

BigWig.prototype.readWigData = function (chrName, min, max, callback) {
    this.getUnzoomedView().readWigData(chrName, min, max, callback);
};

BigWig.prototype.getUnzoomedView = function () {
    if (!this.unzoomedView) {
        var cirLen = 4000;
        var nzl = this.zoomLevels[0];
        if (nzl) {
            cirLen = this.zoomLevels[0].dataOffset - this.unzoomedIndexOffset;
        }
        this.unzoomedView = new BigWigView(this, this.unzoomedIndexOffset, cirLen, false);
    }
    return this.unzoomedView;
};

BigWig.prototype.getZoomedView = function (z) {
    var zh = this.zoomLevels[z];
    if (!zh.view) {
        zh.view = new BigWigView(this, zh.indexOffset, /* this.zoomLevels[z + 1].dataOffset - zh.indexOffset */4000, true);
    }
    return zh.view;
};

function makeBwg(data, callback, name) {
    var bwg = new BigWig();
    bwg.data = data;
    bwg.name = name;
    bwg.data.slice(0, 512).salted().fetch(function (result) {
        if (!result) {
            return callback(null, "Couldn't fetch file");
        }

        var header = result;
        var ba = new Uint8Array(header);
        var sa = new Int16Array(header);
        var la = new Int32Array(header);
        var magic = ba[0] + M1 * ba[1] + M2 * ba[2] + M3 * ba[3];
        if (magic == BIG_WIG_MAGIC) {
            bwg.type = 'bigwig';
        } else if (magic == BIG_BED_MAGIC) {
            bwg.type = 'bigbed';
        } else if (magic == BIG_WIG_MAGIC_BE || magic == BIG_BED_MAGIC_BE) {
            return callback(null, "Currently don't support big-endian BBI files");
        } else {
            return callback(null, "Not a supported format, magic=0x" + magic.toString(16));
        }

        bwg.version = sa[2]; // 4
        bwg.numZoomLevels = sa[3]; // 6
        bwg.chromTreeOffset = bwg_readOffset(ba, 8);
        bwg.unzoomedDataOffset = bwg_readOffset(ba, 16);
        bwg.unzoomedIndexOffset = bwg_readOffset(ba, 24);
        bwg.fieldCount = sa[16]; // 32
        bwg.definedFieldCount = sa[17]; // 34
        bwg.asOffset = bwg_readOffset(ba, 36);
        bwg.totalSummaryOffset = bwg_readOffset(ba, 44);
        bwg.uncompressBufSize = la[13]; // 52
        bwg.extHeaderOffset = bwg_readOffset(ba, 56);

        bwg.zoomLevels = [];
        for (var zl = 0; zl < bwg.numZoomLevels; ++zl) {
            var zlReduction = la[zl * 6 + 16];
            var zlData = bwg_readOffset(ba, zl * 24 + 72);
            var zlIndex = bwg_readOffset(ba, zl * 24 + 80);
            bwg.zoomLevels.push({ reduction: zlReduction, dataOffset: zlData, indexOffset: zlIndex });
        }

        bwg.readChromTree(function () {
            bwg.getAutoSQL(function (as) {
                bwg.schema = as;
                return callback(bwg);
            });
        });
    }, { timeout: 5000 }); // Potential timeout on first request to catch mixed-content errors on
    // Chromium.
}

BigWig.prototype._tsFetch = function (zoom, chr, min, max, callback) {
    var bwg = this;
    if (zoom >= this.zoomLevels.length - 1) {
        if (!this.topLevelReductionCache) {
            this.getZoomedView(this.zoomLevels.length - 1).readWigDataById(-1, 0, 300000000, function (feats) {
                bwg.topLevelReductionCache = feats;
                return bwg._tsFetch(zoom, chr, min, max, callback);
            });
        } else {
            var f = [];
            var c = this.topLevelReductionCache;
            for (var fi = 0; fi < c.length; ++fi) {
                if (c[fi]._chromId == chr) {
                    f.push(c[fi]);
                }
            }
            return callback(f);
        }
    } else {
        var view;
        if (zoom < 0) {
            view = this.getUnzoomedView();
        } else {
            view = this.getZoomedView(zoom);
        }
        return view.readWigDataById(chr, min, max, callback);
    }
};

BigWig.prototype.thresholdSearch = function (chrName, referencePoint, dir, threshold, callback) {
    dir = dir < 0 ? -1 : 1;
    var bwg = this;
    var initialChr = this.chromsToIDs[chrName];
    var candidates = [{ chrOrd: 0, chr: initialChr, zoom: bwg.zoomLevels.length - 4, min: 0, max: 300000000, fromRef: true }];
    for (var i = 1; i <= this.maxID + 1; ++i) {
        var chrId = (initialChr + dir * i) % (this.maxID + 1);
        if (chrId < 0) chrId += this.maxID + 1;
        candidates.push({ chrOrd: i, chr: chrId, zoom: bwg.zoomLevels.length - 1, min: 0, max: 300000000 });
    }

    function fbThresholdSearchRecur() {
        if (candidates.length == 0) {
            return callback(null);
        }
        candidates.sort(function (c1, c2) {
            var d = c1.zoom - c2.zoom;
            if (d != 0) return d;

            d = c1.chrOrd - c2.chrOrd;
            if (d != 0) return d;else return c1.min - c2.min * dir;
        });

        var candidate = candidates.splice(0, 1)[0];
        bwg._tsFetch(candidate.zoom, candidate.chr, candidate.min, candidate.max, function (feats) {
            var rp = dir > 0 ? 0 : 300000000;
            if (candidate.fromRef) rp = referencePoint;

            for (var fi = 0; fi < feats.length; ++fi) {
                var f = feats[fi];
                var score;
                if (f.maxScore != undefined) score = f.maxScore;else score = f.score;

                if (dir > 0) {
                    if (score > threshold) {
                        if (candidate.zoom < 0) {
                            if (f.min > rp) return callback(f);
                        } else if (f.max > rp) {
                            candidates.push({ chr: candidate.chr, chrOrd: candidate.chrOrd, zoom: candidate.zoom - 2, min: f.min, max: f.max, fromRef: candidate.fromRef });
                        }
                    }
                } else {
                    if (score > threshold) {
                        if (candidate.zoom < 0) {
                            if (f.max < rp) return callback(f);
                        } else if (f.min < rp) {
                            candidates.push({ chr: candidate.chr, chrOrd: candidate.chrOrd, zoom: candidate.zoom - 2, min: f.min, max: f.max, fromRef: candidate.fromRef });
                        }
                    }
                }
            }
            fbThresholdSearchRecur();
        });
    }

    fbThresholdSearchRecur();
};

BigWig.prototype.getAutoSQL = function (callback) {
    var thisB = this;
    if (!this.asOffset) return callback(null);

    this.data.slice(this.asOffset, 2048).fetch(function (result) {
        var ba = new Uint8Array(result);
        var s = '';
        for (var i = 0; i < ba.length; ++i) {
            if (ba[i] == 0) break;
            s += String.fromCharCode(ba[i]);
        }

        /* 
         * Quick'n'dirty attempt to parse autoSql format.
         * See: http://www.linuxjournal.com/files/linuxjournal.com/linuxjournal/articles/059/5949/5949l2.html
         */

        var header_re = /(\w+)\s+(\w+)\s+("([^"]+)")?\s+\(\s*/;
        var field_re = /([\w\[\]]+)\s+(\w+)\s*;\s*("([^"]+)")?\s*/g;

        var headerMatch = header_re.exec(s);
        if (headerMatch) {
            var as = {
                declType: headerMatch[1],
                name: headerMatch[2],
                comment: headerMatch[4],

                fields: []
            };

            s = s.substring(headerMatch[0]);
            for (var m = field_re.exec(s); m != null; m = field_re.exec(s)) {
                as.fields.push({ type: m[1],
                    name: m[2],
                    comment: m[4] });
            }

            return callback(as);
        }
    });
};

BigWig.prototype.getExtraIndices = function (callback) {
    var thisB = this;
    if (this.version < 4 || this.extHeaderOffset == 0 || this.type != 'bigbed') {
        return callback(null);
    } else {
        this.data.slice(this.extHeaderOffset, 64).fetch(function (result) {
            if (!result) {
                return callback(null, "Couldn't fetch extension header");
            }

            var ba = new Uint8Array(result);
            var sa = new Int16Array(result);
            var la = new Int32Array(result);

            var extHeaderSize = sa[0];
            var extraIndexCount = sa[1];
            var extraIndexListOffset = bwg_readOffset(ba, 4);

            if (extraIndexCount == 0) {
                return callback(null);
            }

            // FIXME 20byte records only make sense for single-field indices.
            // Right now, these seem to be the only things around, but the format
            // is actually more general.
            thisB.data.slice(extraIndexListOffset, extraIndexCount * 20).fetch(function (eil) {
                if (!eil) {
                    return callback(null, "Couldn't fetch index info");
                }

                var ba = new Uint8Array(eil);
                var sa = new Int16Array(eil);
                var la = new Int32Array(eil);

                var indices = [];
                for (var ii = 0; ii < extraIndexCount; ++ii) {
                    var eiType = sa[ii * 10];
                    var eiFieldCount = sa[ii * 10 + 1];
                    var eiOffset = bwg_readOffset(ba, ii * 20 + 4);
                    var eiField = sa[ii * 10 + 8];
                    var index = new BBIExtraIndex(thisB, eiType, eiFieldCount, eiOffset, eiField);
                    indices.push(index);
                }
                callback(indices);
            });
        });
    }
};

function BBIExtraIndex(bbi, type, fieldCount, offset, field) {
    this.bbi = bbi;
    this.type = type;
    this.fieldCount = fieldCount;
    this.offset = offset;
    this.field = field;
}

BBIExtraIndex.prototype.lookup = function (name, callback) {
    var thisB = this;

    this.bbi.data.slice(this.offset, 32).fetch(function (bpt) {
        var ba = new Uint8Array(bpt);
        var sa = new Int16Array(bpt);
        var la = new Int32Array(bpt);
        var bptMagic = la[0];
        var blockSize = la[1];
        var keySize = la[2];
        var valSize = la[3];
        var itemCount = bwg_readOffset(ba, 16);
        var rootNodeOffset = 32;

        function bptReadNode(nodeOffset) {
            thisB.bbi.data.slice(nodeOffset, 4 + blockSize * (keySize + valSize)).fetch(function (node) {
                var ba = new Uint8Array(node);
                var sa = new Uint16Array(node);
                var la = new Uint32Array(node);

                var nodeType = ba[0];
                var cnt = sa[1];

                var offset = 4;
                if (nodeType == 0) {
                    var lastChildOffset = null;
                    for (var n = 0; n < cnt; ++n) {
                        var key = '';
                        for (var ki = 0; ki < keySize; ++ki) {
                            var charCode = ba[offset++];
                            if (charCode != 0) {
                                key += String.fromCharCode(charCode);
                            }
                        }

                        var childOffset = bwg_readOffset(ba, offset);
                        offset += 8;

                        if (name.localeCompare(key) < 0 && lastChildOffset) {
                            bptReadNode(lastChildOffset);
                            return;
                        }
                        lastChildOffset = childOffset;
                    }
                    bptReadNode(lastChildOffset);
                } else {
                    for (var n = 0; n < cnt; ++n) {
                        var key = '';
                        for (var ki = 0; ki < keySize; ++ki) {
                            var charCode = ba[offset++];
                            if (charCode != 0) {
                                key += String.fromCharCode(charCode);
                            }
                        }

                        // Specific for EI case.
                        if (key == name) {
                            var start = bwg_readOffset(ba, offset);
                            var length = readInt(ba, offset + 8);

                            return thisB.bbi.getUnzoomedView().fetchFeatures(function (chr, min, max, toks) {
                                if (toks && toks.length > thisB.field - 3) return toks[thisB.field - 3] == name;
                            }, [{ offset: start, size: length }], callback);
                        }
                        offset += valSize;
                    }
                    return callback([]);
                }
            });
        }

        bptReadNode(thisB.offset + rootNodeOffset);
    });
};

if (typeof module !== 'undefined') {
    module.exports = {
        makeBwg: makeBwg,
        BIG_BED_MAGIC: BIG_BED_MAGIC,
        BIG_WIG_MAGIC: BIG_WIG_MAGIC
    };
}

},{"./bin":4,"./das":10,"./spans":40,"./utils":55,"jszlib":60}],4:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2011
//
// bin.js general binary data support
//

"use strict";

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

if (typeof require !== 'undefined') {
    var utils = require('./utils');
    var shallowCopy = utils.shallowCopy;

    var sha1 = require('./sha1');
    var b64_sha1 = sha1.b64_sha1;

    var Promise = require('es6-promise').Promise;
}

function BlobFetchable(b) {
    this.blob = b;
}

BlobFetchable.prototype.slice = function (start, length) {
    var b;

    if (this.blob.slice) {
        if (length) {
            b = this.blob.slice(start, start + length);
        } else {
            b = this.blob.slice(start);
        }
    } else {
        if (length) {
            b = this.blob.webkitSlice(start, start + length);
        } else {
            b = this.blob.webkitSlice(start);
        }
    }
    return new BlobFetchable(b);
};

BlobFetchable.prototype.salted = function () {
    return this;
};

if (typeof FileReader !== 'undefined') {
    // console.log('defining async BlobFetchable.fetch');

    BlobFetchable.prototype.fetch = function (callback) {
        var reader = new FileReader();
        reader.onloadend = function (ev) {
            callback(bstringToBuffer(reader.result));
        };
        reader.readAsBinaryString(this.blob);
    };
} else {
    // if (console && console.log)
    //    console.log('defining sync BlobFetchable.fetch');

    BlobFetchable.prototype.fetch = function (callback) {
        var reader = new FileReaderSync();
        try {
            var res = reader.readAsArrayBuffer(this.blob);
            callback(res);
        } catch (e) {
            callback(null, e);
        }
    };
}

function URLFetchable(url, start, end, opts) {
    if (!opts) {
        if ((typeof start === 'undefined' ? 'undefined' : _typeof(start)) === 'object') {
            opts = start;
            start = undefined;
        } else {
            opts = {};
        }
    }

    this.url = url;
    this.start = start || 0;
    if (end) {
        this.end = end;
    }
    this.opts = opts;
}

URLFetchable.prototype.slice = function (s, l) {
    if (s < 0) {
        throw 'Bad slice ' + s;
    }

    var ns = this.start,
        ne = this.end;
    if (ns && s) {
        ns = ns + s;
    } else {
        ns = s || ns;
    }
    if (l && ns) {
        ne = ns + l - 1;
    } else {
        ne = ne || l - 1;
    }
    return new URLFetchable(this.url, ns, ne, this.opts);
};

var seed = 0;
var isSafari = typeof navigator !== 'undefined' && navigator.userAgent.indexOf('Safari') >= 0 && navigator.userAgent.indexOf('Chrome') < 0;

URLFetchable.prototype.fetchAsText = function (callback) {
    var thisB = this;

    this.getURL().then(function (url) {
        try {
            var req = new XMLHttpRequest();
            var length;
            if ((isSafari || thisB.opts.salt) && url.indexOf('?') < 0) {
                url = url + '?salt=' + b64_sha1('' + Date.now() + ',' + ++seed);
            }
            req.open('GET', url, true);

            if (thisB.end) {
                if (thisB.end - thisB.start > 100000000) {
                    throw 'Monster fetch!';
                }
                req.setRequestHeader('Range', 'bytes=' + thisB.start + '-' + thisB.end);
                length = thisB.end - thisB.start + 1;
            }

            req.onreadystatechange = function () {
                if (req.readyState == 4) {
                    if (req.status == 200 || req.status == 206) {
                        return callback(req.responseText);
                    } else {
                        return callback(null);
                    }
                }
            };
            if (thisB.opts.credentials) {
                req.withCredentials = true;
            }
            req.send();
        } catch (e) {
            return callback(null);
        }
    }).catch(function (err) {
        console.log(err);
        return callback(null, err);
    });
};

URLFetchable.prototype.salted = function () {
    var o = shallowCopy(this.opts);
    o.salt = true;
    return new URLFetchable(this.url, this.start, this.end, o);
};

URLFetchable.prototype.getURL = function () {
    if (this.opts.resolver) {
        return this.opts.resolver(this.url).then(function (urlOrObj) {
            if (typeof urlOrObj === 'string') {
                return urlOrObj;
            } else {
                return urlOrObj.url;
            }
        });
    } else {
        return Promise.resolve(this.url);
    }
};

URLFetchable.prototype.fetch = function (callback, opts) {
    var thisB = this;

    opts = opts || {};
    var attempt = opts.attempt || 1;
    var truncatedLength = opts.truncatedLength;
    if (attempt > 3) {
        return callback(null);
    }

    this.getURL().then(function (url) {
        try {
            var timeout;
            if (opts.timeout && !thisB.opts.credentials) {
                timeout = setTimeout(function () {
                    console.log('timing out ' + url);
                    req.abort();
                    return callback(null, 'Timeout');
                }, opts.timeout);
            }

            var req = new XMLHttpRequest();
            var length;
            if ((isSafari || thisB.opts.salt) && url.indexOf('?') < 0) {
                url = url + '?salt=' + b64_sha1('' + Date.now() + ',' + ++seed);
            }
            req.open('GET', url, true);
            req.overrideMimeType('text/plain; charset=x-user-defined');
            if (thisB.end) {
                if (thisB.end - thisB.start > 100000000) {
                    throw 'Monster fetch!';
                }
                req.setRequestHeader('Range', 'bytes=' + thisB.start + '-' + thisB.end);
                length = thisB.end - thisB.start + 1;
            }
            req.responseType = 'arraybuffer';
            req.onreadystatechange = function () {
                if (req.readyState == 4) {
                    if (timeout) clearTimeout(timeout);
                    if (req.status == 200 || req.status == 206) {
                        if (req.response) {
                            var bl = req.response.byteLength;
                            if (length && length != bl && (!truncatedLength || bl != truncatedLength)) {
                                return thisB.fetch(callback, { attempt: attempt + 1, truncatedLength: bl });
                            } else {
                                return callback(req.response);
                            }
                        } else if (req.mozResponseArrayBuffer) {
                            return callback(req.mozResponseArrayBuffer);
                        } else {
                            var r = req.responseText;
                            if (length && length != r.length && (!truncatedLength || r.length != truncatedLength)) {
                                return thisB.fetch(callback, { attempt: attempt + 1, truncatedLength: r.length });
                            } else {
                                return callback(bstringToBuffer(req.responseText));
                            }
                        }
                    } else {
                        return thisB.fetch(callback, { attempt: attempt + 1 });
                    }
                }
            };
            if (thisB.opts.credentials) {
                req.withCredentials = true;
            }
            req.send();
        } catch (e) {
            return callback(null);
        }
    }).catch(function (err) {
        console.log(err);
        return callback(null, err);
    });
};

function bstringToBuffer(result) {
    if (!result) {
        return null;
    }

    var ba = new Uint8Array(result.length);
    for (var i = 0; i < ba.length; ++i) {
        ba[i] = result.charCodeAt(i);
    }
    return ba.buffer;
}

// Read from Uint8Array

var convertBuffer = new ArrayBuffer(8);
var ba = new Uint8Array(convertBuffer);
var fa = new Float32Array(convertBuffer);

function readFloat(buf, offset) {
    ba[0] = buf[offset];
    ba[1] = buf[offset + 1];
    ba[2] = buf[offset + 2];
    ba[3] = buf[offset + 3];
    return fa[0];
}

function readInt64(ba, offset) {
    return ba[offset + 7] << 24 | ba[offset + 6] << 16 | ba[offset + 5] << 8 | ba[offset + 4];
}

function readInt(ba, offset) {
    return ba[offset + 3] << 24 | ba[offset + 2] << 16 | ba[offset + 1] << 8 | ba[offset];
}

function readShort(ba, offset) {
    return ba[offset + 1] << 8 | ba[offset];
}

function readByte(ba, offset) {
    return ba[offset];
}

function readIntBE(ba, offset) {
    return ba[offset] << 24 | ba[offset + 1] << 16 | ba[offset + 2] << 8 | ba[offset + 3];
}

// Exports if we are being used as a module

if (typeof module !== 'undefined') {
    module.exports = {
        BlobFetchable: BlobFetchable,
        URLFetchable: URLFetchable,

        readInt: readInt,
        readIntBE: readIntBE,
        readInt64: readInt64,
        readShort: readShort,
        readByte: readByte,
        readFloat: readFloat
    };
}

},{"./sha1":37,"./utils":55,"es6-promise":59}],5:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

//
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2013
//
// browser-us.js: standard UI wiring
//

"use strict";

if (typeof require !== 'undefined') {
    var browser = require('./cbrowser');
    var Browser = browser.Browser;

    var utils = require('./utils');
    var makeElement = utils.makeElement;
    var removeChildren = utils.removeChildren;

    var nf = require('./numformats');
    var formatLongInt = nf.formatLongInt;

    var makeZoomSlider = require('./zoomslider');

    // For side effects

    require('./tier-edit');
    require('./export-config');
    require('./export-ui');
    require('./export-image');
    require('./svg-export');
    require('./session');
}

/*
 * Quite a bit of this ought to be done using a templating system, but
 * since web-components isn't quite ready for prime time yet we'll stick
 * with constructing it all in Javascript for now...
 */

Browser.prototype.initUI = function (holder, genomePanel) {
    if (!this.noSourceCSS) {
        ['bootstrap-scoped.css', 'dalliance-scoped.css', 'font-awesome.min.css'].forEach(function (path) {
            document.head.appendChild(makeElement('link', '', {
                rel: 'stylesheet',
                href: this.resolveURL('$$css/' + path)
            }));
        }.bind(this));
    }

    var b = this;

    if (!b.disableDefaultFeaturePopup) {
        this.addFeatureListener(function (ev, feature, hit, tier) {
            b.featurePopup(ev, feature, hit, tier);
        });
    }

    holder.classList.add('dalliance');
    var toolbar = b.toolbar = makeElement('div', null, { className: 'btn-toolbar toolbar' });

    var title = b.coordSystem.speciesName + ' ' + b.nameForCoordSystem(b.coordSystem);
    if (this.setDocumentTitle) {
        document.title = title + ' :: dalliance';
    }

    var locField = makeElement('input', '', { className: 'loc-field' });
    b.makeTooltip(locField, 'Enter a genomic location or gene name');
    var locStatusField = makeElement('p', '', { className: 'loc-status' });

    var zoomInBtn = makeElement('a', [makeElement('i', null, { className: 'fa fa-search-plus' })], { className: 'btn' });
    var zoomSlider = new makeZoomSlider({ width: b.zoomSliderWidth });
    b.makeTooltip(zoomSlider, "Highlighted button shows current zoom level, gray button shows inactive zoom level (click or tap SPACE to toggle).");

    var zoomOutBtn = makeElement('a', [makeElement('i', null, { className: 'fa fa-search-minus' })], { className: 'btn' });

    var clearHighlightsButton = makeElement('a', [makeElement('i', null, { className: 'fa fa-eraser' })], { className: 'btn' });

    var addTrackBtn = makeElement('a', [makeElement('i', null, { className: 'fa fa-plus' })], { className: 'btn' });
    var favBtn = makeElement('a', [makeElement('i', null, { className: 'fa fa-bookmark' })], { className: 'btn' });
    var svgBtn = makeElement('a', [makeElement('i', null, { className: 'fa fa-print' })], { className: 'btn' });
    var resetBtn = makeElement('a', [makeElement('i', null, { className: 'fa fa-refresh' })], { className: 'btn' });
    var optsButton = makeElement('a', [makeElement('i', null, { className: 'fa fa-cogs' })], { className: 'btn' });
    var helpButton = makeElement('a', [makeElement('i', null, { className: 'fa fa-question' })], { className: 'btn' });

    var tierEditButton = makeElement('a', [makeElement('i', null, { className: 'fa fa-road' })], { className: 'btn' });
    b.makeTooltip(tierEditButton, 'Configure currently selected track(s) (E)');

    var leapLeftButton = makeElement('a', [makeElement('i', null, { className: 'fa fa-angle-left' })], { className: 'btn' }, { width: '5px' });
    var leapRightButton = makeElement('a', [makeElement('i', null, { className: 'fa fa-angle-right' })], { className: 'btn pull-right' }, { width: '5px' });

    var modeButtons = makeElement('div', null, { className: 'btn-group pull-right' });
    if (!this.noTrackAdder) modeButtons.appendChild(addTrackBtn);
    if (!this.noTrackEditor) modeButtons.appendChild(tierEditButton);
    if (!this.noExport) modeButtons.appendChild(svgBtn);
    if (!this.noOptions) modeButtons.appendChild(optsButton);
    if (!this.noHelp) modeButtons.appendChild(helpButton);

    this.setUiMode = function (m) {
        this.uiMode = m;
        var mb = { help: helpButton, add: addTrackBtn, opts: optsButton, 'export': svgBtn, tier: tierEditButton };
        for (var x in mb) {
            if (x == m) mb[x].classList.add('active');else mb[x].classList.remove('active');
        }
    };

    if (!this.noLeapButtons) toolbar.appendChild(leapRightButton);

    if (modeButtons.firstChild) toolbar.appendChild(modeButtons);

    if (!this.noLeapButtons) toolbar.appendChild(leapLeftButton);
    if (!this.noTitle) {
        toolbar.appendChild(makeElement('div', makeElement('h4', title, {}, { margin: '0px' }), { className: 'btn-group title' }));
    }
    if (!this.noLocationField) toolbar.appendChild(makeElement('div', [locField, locStatusField], { className: 'btn-group loc-group' }));
    if (!this.noClearHighlightsButton) toolbar.appendChild(clearHighlightsButton);

    if (!this.noZoomSlider) {
        toolbar.appendChild(makeElement('div', [zoomInBtn, makeElement('span', zoomSlider, { className: 'btn' }), zoomOutBtn], { className: 'btn-group' }));
    }

    if (this.toolbarBelow) {
        holder.appendChild(genomePanel);
        holder.appendChild(toolbar);
    } else {
        holder.appendChild(toolbar);
        holder.appendChild(genomePanel);
    }

    var lt2 = Math.log(2) / Math.log(10);
    var lt5 = Math.log(5) / Math.log(10);
    var roundSliderValue = function roundSliderValue(x) {
        var ltx = (x / b.zoomExpt + Math.log(b.zoomBase)) / Math.log(10);

        var whole = ltx | 0;
        var frac = ltx - whole;
        var rounded;

        if (frac < 0.01) rounded = whole;else if (frac <= lt2 + 0.01) rounded = whole + lt2;else if (frac <= lt5 + 0.01) rounded = whole + lt5;else {
            rounded = whole + 1;
        }

        return (rounded * Math.log(10) - Math.log(b.zoomBase)) * b.zoomExpt;
    };

    var markSlider = function markSlider(x) {
        zoomSlider.addLabel(x, humanReadableScale(Math.exp(x / b.zoomExpt) * b.zoomBase));
    };

    this.addViewListener(function (chr, min, max, _oldZoom, zoom) {
        locField.value = chr + ':' + formatLongInt(min) + '..' + formatLongInt(max);
        zoomSlider.min = zoom.min | 0;
        zoomSlider.max = zoom.max | 0;
        if (zoom.isSnapZooming) {
            zoomSlider.value = zoom.alternate;
            zoomSlider.value2 = zoom.current;
            zoomSlider.active = 2;
        } else {
            zoomSlider.value = zoom.current;
            zoomSlider.value2 = zoom.alternate;
            zoomSlider.active = 1;
        }

        if (zoom.current == zoom.min) zoomInBtn.classList.add('disabled');else zoomInBtn.classList.remove('disabled');

        if (zoom.current == zoom.max) zoomOutBtn.classList.add('disabled');else zoomOutBtn.classList.remove('disabled');

        zoomSlider.removeLabels();
        var zmin = zoom.min;
        var zmax = zoom.max;
        var zrange = zmax - zmin;

        var numSliderTicks = 4;
        if (b.zoomSliderWidth && b.zoomSliderWidth < 150) numSliderTicks = 3;
        markSlider(roundSliderValue(zmin));
        for (var sti = 1; sti < numSliderTicks - 1; ++sti) {
            markSlider(roundSliderValue(zmin + 1.0 * sti * zrange / (numSliderTicks - 1)));
        }
        markSlider(roundSliderValue(zmax));

        if (b.storeStatus) {
            b.storeViewStatus();
        }

        if (b.highlights.length > 0) {
            clearHighlightsButton.style.display = 'inline-block';
        } else {
            clearHighlightsButton.style.display = 'none';
        }
    });

    this.addTierListener(function () {
        if (b.storeStatus) {
            b.storeTierStatus();
        }
    });

    locField.addEventListener('keydown', function (ev) {
        if (ev.keyCode == 40) {
            ev.preventDefault();ev.stopPropagation();
            b.setSelectedTier(0);
        }if (ev.keyCode == 10 || ev.keyCode == 13) {
            ev.preventDefault();

            var g = locField.value;
            b.search(g, function (err) {
                if (err) {
                    locStatusField.textContent = '' + err;
                } else {
                    locStatusField.textContent = '';
                }
            });
        }
    }, false);

    var trackAddPopup;
    addTrackBtn.addEventListener('click', function (ev) {
        if (trackAddPopup && trackAddPopup.displayed) {
            b.removeAllPopups();
        } else {
            trackAddPopup = b.showTrackAdder(ev);
        }
    }, false);
    b.makeTooltip(addTrackBtn, 'Add a new track from the registry or an indexed file. (A)');

    zoomInBtn.addEventListener('click', function (ev) {
        ev.stopPropagation();ev.preventDefault();

        b.zoomStep(-10);
    }, false);
    b.makeTooltip(zoomInBtn, 'Zoom in (+)');

    zoomOutBtn.addEventListener('click', function (ev) {
        ev.stopPropagation();ev.preventDefault();

        b.zoomStep(10);
    }, false);
    b.makeTooltip(zoomOutBtn, 'Zoom out (-)');

    zoomSlider.addEventListener('change', function (ev) {
        var wantSnap = zoomSlider.active == 2;
        if (wantSnap != b.isSnapZooming) {
            b.savedZoom = b.zoomSliderValue - b.zoomMin;
            b.isSnapZooming = wantSnap;
        }
        var activeZSV = zoomSlider.active == 1 ? zoomSlider.value : zoomSlider.value2;

        b.zoomSliderValue = 1.0 * activeZSV;
        b.zoom(Math.exp(1.0 * activeZSV / b.zoomExpt));
    }, false);

    favBtn.addEventListener('click', function (ev) {
        ev.stopPropagation();ev.preventDefault();
    }, false);
    b.makeTooltip(favBtn, 'Favourite regions');

    svgBtn.addEventListener('click', function (ev) {
        ev.stopPropagation();ev.preventDefault();
        b.openExportPanel();
    }, false);
    b.makeTooltip(svgBtn, 'Export publication-quality SVG. (X)');

    var optsPopup;
    optsButton.addEventListener('click', function (ev) {
        ev.stopPropagation();ev.preventDefault();

        b.toggleOptsPopup(ev);
    }, false);
    b.makeTooltip(optsButton, 'Configure options.');

    helpButton.addEventListener('click', function (ev) {
        ev.stopPropagation();ev.preventDefault();
        b.toggleHelpPopup(ev);
    });
    b.makeTooltip(helpButton, 'Help; Keyboard shortcuts. (H)');

    tierEditButton.addEventListener('click', function (ev) {
        ev.stopPropagation();ev.preventDefault();
        if (b.selectedTiers.length == 1) {
            b.openTierPanel(b.tiers[b.selectedTiers[0]]);
        }
    }, false);

    leapLeftButton.addEventListener('click', function (ev) {
        b.leap(b.reverseKeyScrolling ? -1 : 1, false);
    }, false);
    b.makeTooltip(leapLeftButton, function (ev) {
        var st = b.getSelectedTier();
        var tier;
        if (st >= 0) tier = b.tiers[st];

        if (tier && tier.featureSource && b.sourceAdapterIsCapable(tier.featureSource, 'quantLeap') && typeof tier.quantLeapThreshold == 'number') {
            return 'Jump to the next region with a score above the threshold in the selected track "' + (tier.config.name || tier.dasSource.name) + '"" (ctrl+LEFT)';
        } else if (tier && tier.featureSource && b.sourceAdapterIsCapable(tier.featureSource, 'leap')) {
            return 'Jump to the next feature in the selected track "' + (tier.config.name || tier.dasSource.name) + '" (ctrl+LEFT)';
        } else {
            return 'Jump left (shift+LEFT)';
        }
    });

    leapRightButton.addEventListener('click', function (ev) {
        b.leap(b.reverseKeyScrolling ? 1 : -1, false);
    }, false);
    b.makeTooltip(leapRightButton, function (ev) {
        var st = b.getSelectedTier();
        var tier;
        if (st >= 0) tier = b.tiers[st];

        if (tier && tier.featureSource && b.sourceAdapterIsCapable(tier.featureSource, 'quantLeap') && typeof tier.quantLeapThreshold == 'number') {
            return 'Jump to the next region with a score above the threshold in the selected track "' + (tier.config.name || tier.dasSource.name) + '"" (ctrl+RIGHT)';
        } else if (tier && tier.featureSource && b.sourceAdapterIsCapable(tier.featureSource, 'leap')) {
            return 'Jump to the next feature in the selected track "' + (tier.config.name || tier.dasSource.name) + '" (ctrl+RIGHT)';
        } else {
            return 'Jump right (shift+RIGHT)';
        }
    });
    b.addTierSelectionListener(function () {
        var st = b.getSelectedTier();
        var tier;
        if (st >= 0) tier = b.tiers[st];

        var canLeap = false;
        if (tier && tier.featureSource) {
            if (b.sourceAdapterIsCapable(tier.featureSource, 'quantLeap') && typeof tier.quantLeapThreshold == 'number') canLeap = true;else if (b.sourceAdapterIsCapable(tier.featureSource, 'leap')) canLeap = true;
        }

        leapLeftButton.firstChild.className = canLeap ? 'fa fa-angle-double-left' : 'fa fa-angle-left';
        leapRightButton.firstChild.className = canLeap ? 'fa fa-angle-double-right' : 'fa fa-angle-right';
    });

    clearHighlightsButton.addEventListener('click', function (ev) {
        b.clearHighlights();
    }, false);
    b.makeTooltip(clearHighlightsButton, 'Clear highlights (C)');

    b.addTierSelectionWrapListener(function (dir) {
        if (dir < 0) {
            b.setSelectedTier(null);
            locField.focus();
        }
    });

    b.addTierSelectionListener(function (sel) {
        if (b.uiMode === 'tier') {
            if (sel.length == 0) {
                b.hideToolPanel();
                b.manipulatingTier = null;
                b.uiMode = 'none';
            } else {
                var ft = b.tiers[sel[0]];
                if (ft != b.manipulatingTier) {
                    b.openTierPanel(ft);
                }
            }
        }
    });

    var uiKeyHandler = function uiKeyHandler(ev) {
        // console.log('bukh: ' + ev.keyCode);
        if (ev.keyCode == 65 || ev.keyCode == 97) {
            // a
            ev.preventDefault();ev.stopPropagation();
            b.showTrackAdder();
        } else if (ev.keyCode == 72 || ev.keyCode == 104) {
            // h
            ev.stopPropagation();ev.preventDefault();
            b.toggleHelpPopup(ev);
        } else if (ev.keyCode == 69 || ev.keyCode == 101) {
            //e
            ev.stopPropagation();ev.preventDefault();
            if (b.selectedTiers.length == 1) {
                b.openTierPanel(b.tiers[b.selectedTiers[0]]);
            }
        } else if (ev.keyCode == 88 || ev.keyCode == 120) {
            // x
            ev.stopPropagation();ev.preventDefault();
            b.openExportPanel();
        } else if (ev.keyCode == 67 || ev.keyCode == 99) {
            // c
            ev.stopPropagation();ev.preventDefault();
            b.clearHighlights();
        }
    };

    holder.addEventListener('focus', function (ev) {
        holder.addEventListener('keydown', uiKeyHandler, false);
    }, false);
    holder.addEventListener('blur', function (ev) {
        holder.removeEventListener('keydown', uiKeyHandler, false);
    }, false);

    holder.addEventListener('keydown', function (ev) {
        if (ev.keyCode === 27) {
            if (b.uiMode !== 'none') {
                // Only consume event if tool panel is open.
                ev.preventDefault();
                ev.stopPropagation();
                b.setUiMode('none');
                b.hideToolPanel();

                if (b.selectedTiers && b.selectedTiers.length > 0) {
                    b.browserHolder.focus();
                }
            }
        }
    }, false);
};

Browser.prototype.showToolPanel = function (panel, nowrap) {
    var thisB = this;

    if (this.activeToolPanel) {
        this.activeToolPanel.parentElement.removeChild(this.activeToolPanel);
    }

    var content;
    if (nowrap) content = panel;else content = makeElement('div', panel, {}, { overflowY: 'auto', width: '100%' });

    var divider = makeElement('div', makeElement('i', null, { className: 'fa fa-caret-right' }), { className: 'tool-divider' });
    divider.addEventListener('click', function (ev) {
        thisB.hideToolPanel();
        thisB.setUiMode('none');
    }, false);
    this.makeTooltip(divider, 'Close tool panel (ESC)');
    this.activeToolPanel = makeElement('div', [divider, content], { className: 'tool-holder' });
    this.svgHolder.appendChild(this.activeToolPanel);
    this.resizeViewer();

    var thisB = this;
};

Browser.prototype.hideToolPanel = function () {
    if (this.activeToolPanel) {
        this.activeToolPanel.parentElement.removeChild(this.activeToolPanel);
    }
    this.svgHolder.style.width = '100%';
    this.activeToolPanel = null;
    this.resizeViewer();
};

Browser.prototype.toggleHelpPopup = function (ev) {
    if (this.uiMode === 'help') {
        this.hideToolPanel();
        this.setUiMode('none');
    } else {
        var helpFrame = makeElement('iframe', null, { scrolling: 'yes', seamless: 'seamless', src: this.resolveURL('$$help/index.html'), className: 'help-panel' });
        this.showToolPanel(helpFrame, false);
        this.setUiMode('help');
    }
};

Browser.prototype.toggleOptsPopup = function (ev) {
    var b = this;

    if (this.uiMode === 'opts') {
        this.hideToolPanel();
        this.setUiMode('none');
    } else {
        var optsForm = makeElement('div', null, { className: 'form-horizontal' }, { boxSizing: 'border-box', MozBoxSizing: 'border-box', display: 'inline-block', verticalAlign: 'top' });
        var optsTable = makeElement('table');
        optsTable.cellPadding = 5;

        var scrollModeButton = makeElement('input', '', { type: 'checkbox', checked: b.reverseScrolling });
        scrollModeButton.addEventListener('change', function (ev) {
            b.reverseScrolling = scrollModeButton.checked;
            b.storeStatus();
        }, false);
        optsTable.appendChild(makeElement('tr', [makeElement('td', 'Reverse trackpad scrolling', { align: 'right' }), makeElement('td', scrollModeButton)]));

        var scrollKeyButton = makeElement('input', '', { type: 'checkbox', checked: b.reverseKeyScrolling });
        scrollKeyButton.addEventListener('change', function (ev) {
            b.reverseKeyScrolling = scrollKeyButton.checked;
            b.storeStatus();
        }, false);
        optsTable.appendChild(makeElement('tr', [makeElement('td', 'Reverse scrolling buttons and keys', { align: 'right' }), makeElement('td', scrollKeyButton)]));

        var rulerSelect = makeElement('select');
        rulerSelect.appendChild(makeElement('option', 'Left', { value: 'left' }));
        rulerSelect.appendChild(makeElement('option', 'Center', { value: 'center' }));
        rulerSelect.appendChild(makeElement('option', 'Right', { value: 'right' }));
        rulerSelect.appendChild(makeElement('option', 'None', { value: 'none' }));
        rulerSelect.value = b.rulerLocation;
        rulerSelect.addEventListener('change', function (ev) {
            b.rulerLocation = rulerSelect.value;
            b.positionRuler();
            for (var ti = 0; ti < b.tiers.length; ++ti) {
                b.tiers[ti].paintQuant();
            }
            b.storeStatus();
        }, false);
        optsTable.appendChild(makeElement('tr', [makeElement('td', 'Vertical guideline', { align: 'right' }), makeElement('td', rulerSelect)]));

        var singleBaseHighlightButton = makeElement('input', '', { type: 'checkbox', checked: b.singleBaseHighlight });
        singleBaseHighlightButton.addEventListener('change', function (ev) {
            b.singleBaseHighlight = singleBaseHighlightButton.checked;
            b.positionRuler();
            b.storeStatus();
        }, false);
        singleBaseHighlightButton.setAttribute('id', 'singleBaseHightlightButton'); // making this because access is required when the key 'u' is pressed and the options are visible
        optsTable.appendChild(makeElement('tr', [makeElement('td', 'Display and highlight current genome location', { align: 'right' }), makeElement('td', singleBaseHighlightButton)]));

        optsForm.appendChild(optsTable);

        var resetButton = makeElement('button', 'Reset browser', { className: 'btn' }, { marginLeft: 'auto', marginRight: 'auto', display: 'block' });
        resetButton.addEventListener('click', function (ev) {
            b.reset();
        }, false);
        optsForm.appendChild(resetButton);

        this.showToolPanel(optsForm);
        this.setUiMode('opts');
    }
};

function humanReadableScale(x) {
    var suffix = 'bp';
    if (x > 1000000000) {
        x /= 1000000000;
        suffix = 'Gb';
    } else if (x > 1000000) {
        x /= 1000000;
        suffix = 'Mb';
    } else if (x > 1000) {
        x /= 1000;
        suffix = 'kb';
    }
    return '' + Math.round(x) + suffix;
}

},{"./cbrowser":6,"./export-config":16,"./export-image":17,"./export-ui":18,"./numformats":29,"./session":36,"./svg-export":43,"./tier-edit":50,"./utils":55,"./zoomslider":58}],6:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

//
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2011
//
// cbrowser.js: canvas browser container
//

"use strict";

if (typeof require !== 'undefined') {
    var utils = require('./utils');
    var Observed = utils.Observed;
    var Awaited = utils.Awaited;
    var makeElement = utils.makeElement;
    var removeChildren = utils.removeChildren;
    var miniJSONify = utils.miniJSONify;
    var shallowCopy = utils.shallowCopy;
    var textXHR = utils.textXHR;

    var tier = require('./tier');
    var DasTier = tier.DasTier;

    var sha1 = require('./sha1');
    var hex_sha1 = sha1.hex_sha1;

    var thub = require('./thub');
    var connectTrackHub = thub.connectTrackHub;

    var VERSION = require('./version');

    var nf = require('./numformats');
    var formatQuantLabel = nf.formatQuantLabel;
    var formatLongInt = nf.formatLongInt;

    var Chainset = require('./chainset').Chainset;

    var Promise = require('es6-promise').Promise;

    var sourcecompare = require('./sourcecompare');
    var sourcesAreEqual = sourcecompare.sourcesAreEqual;
    var sourcesAreEqualModuloStyle = sourcecompare.sourcesAreEqualModuloStyle;
    var sourceDataURI = sourcecompare.sourceDataURI;
    var sourceStyleURI = sourcecompare.sourceStyleURI;

    var DefaultRenderer = require('./default-renderer');

    var MultiRenderer = require('./multi-renderer');
    var SubRenderer = require('./sub-renderer');

    var DummyRenderer = require('./dummy-renderer');
}

function Region(chr, min, max) {
    this.min = min;
    this.max = max;
    this.chr = chr;
}

function Browser(opts) {
    if (!opts) {
        opts = {};
    }

    this.renderers = { 'default': DefaultRenderer,
        'dummy': DummyRenderer,
        'multi': MultiRenderer,
        'sub': SubRenderer
    };

    this.defaultRenderer = opts.renderer || DefaultRenderer;

    this.prefix = '//www.biodalliance.org/release-0.14/';

    this.sources = [];
    this.tiers = [];
    this.tierGroups = {};

    this.searchOnlySources = [];
    this.searchOnlySourceHolders = [];

    this.featureListeners = [];
    this.featureHoverListeners = [];
    this.viewListeners = [];
    this.regionSelectListeners = [];
    this.tierListeners = [];
    this.tierSelectionListeners = [];
    this.tierSelectionWrapListeners = [];

    this.cookieKey = 'browser';

    this.chains = {};

    this.pageName = 'svgHolder';
    this.zoomFactor = 1.0;
    this.maxPixelsPerBase = 10;
    this.origin = 0;
    this.targetQuantRes = 1.0;
    this.featurePanelWidth = 750;
    this.zoomBase = 100;
    this.zoomExpt = 30.0; // Back to being fixed....
    this.zoomSliderValue = 100;
    this.entryPoints = null;
    this.currentSeqMax = -1; // init once EPs are fetched.

    this.highlights = [];
    this.selectedTiers = [1];

    this.maxViewWidth = 500000;
    this.defaultSubtierMax = 100;

    this.highZoomThreshold = 0.2;
    this.mediumZoomThreshold = 0.01;

    this.minExtraWidth = 100.0;
    this.maxExtraWidth = 1000.0;

    // Options.

    this.reverseScrolling = false;
    this.rulerLocation = 'center';
    this.defaultHighlightFill = 'red';
    this.defaultHighlightAlpha = 0.3;
    this.exportHighlights = true;
    this.exportRuler = true;
    this.exportBanner = true;
    this.exportRegion = true;
    this.singleBaseHighlight = true;

    // Visual config.

    // this.tierBackgroundColors = ["rgb(245,245,245)", "rgb(230,230,250)" /* 'white' */];
    this.tierBackgroundColors = ["rgb(245,245,245)", 'white'];
    this.minTierHeight = 20;
    this.noDefaultLabels = false;

    // Registry

    this.availableSources = new Observed();
    this.defaultSources = [];
    this.mappableSources = {};

    // Central DAS Registry no longer available 2015-05

    this.registry = null; // '//www.dasregistry.org/das/sources';
    this.noRegistryTabs = true;

    this.defaultTrackAdderTab = null;

    this.hubs = [];
    this.hubObjects = [];

    this.sourceCache = new SourceCache();

    this.retina = true;

    this.useFetchWorkers = true;
    this.maxWorkers = 2;
    this.workerPath = '$$worker-all.js';
    this.resolvers = {};
    this.resolverSeed = 1;

    this.assemblyNamePrimary = true;
    this.assemblyNameUcsc = true;

    this.defaultSearchRegionPadding = 10000;

    // HTTP warning support

    this.httpCanaryURL = 'http://www.biodalliance.org/http-canary.txt';
    this.httpWarningURL = '//www.biodalliance.org/https.html';

    this.initListeners = [];

    if (opts.baseColors) {
        this.baseColors = opts.baseColors;
    } else {
        this.baseColors = {
            A: 'green',
            C: 'blue',
            G: 'orange',
            T: 'red',
            '-': 'hotpink', // deletion
            'I': 'red' // insertion
        };
    }

    if (opts.viewStart !== undefined && typeof opts.viewStart !== 'number') {
        throw Error('viewStart must be an integer');
    }
    if (opts.viewEnd !== undefined && typeof opts.viewEnd !== 'number') {
        throw Error('viewEnd must be an integer');
    }
    if (opts.offscreenInitWidth !== undefined && typeof opts.offscreenInitWidth !== 'number') {
        throw Error('offscreenInitWidth must be an integer');
    }

    for (var k in opts) {
        this[k] = opts[k];
    }

    if (typeof opts.uiPrefix === 'string' && typeof opts.prefix !== 'string') {
        this.prefix = opts.uiPrefix;
    }
    // If the prefix only starts with a single '/' this is relative to the current
    // site, so we need to prefix the prefix with //{hostname}
    if (this.prefix.indexOf('//') < 0 && this.prefix.indexOf('/') === 0) {
        var location = window.location.hostname;
        if (window.location.port) {
            location += ':' + window.location.port;
        };
        this.prefix = '//' + location + this.prefix;
    }
    if (this.prefix.indexOf('//') === 0) {
        var proto = window.location.protocol;
        if (proto == 'http:' || proto == 'https:') {
            // Protocol-relative URLs okay.
        } else {
            console.log(window.location.protocol);
            console.log('WARNING: prefix is set to a protocol-relative URL (' + this.prefix + ' when loading from a non-HTTP source');
            this.prefix = 'http:' + this.prefix;
        }
    }

    if (!this.coordSystem) {
        throw Error('Coordinate system must be configured');
    }

    if (this.chr === undefined || this.viewStart === undefined || this.viewEnd === undefined) {
        throw Error('Viewed region (chr:start..end) must be defined');
    }

    var thisB = this;

    if (document.readyState === 'complete') {
        thisB.realInit();
    } else {
        var loadListener = function loadListener(ev) {
            window.removeEventListener('load', loadListener, false);
            thisB.realInit();
        };
        window.addEventListener('load', loadListener, false);
    }
}

Browser.prototype.resolveURL = function (url) {
    return url.replace('$$', this.prefix);
};

Browser.prototype.destroy = function () {
    window.removeEventListener('resize', this.resizeListener, false);
    if (this.fetchWorkers) {
        var _iteratorNormalCompletion = true;
        var _didIteratorError = false;
        var _iteratorError = undefined;

        try {
            for (var _iterator = this.fetchWorkers[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                var worker = _step.value;

                worker.terminate();
            }
        } catch (err) {
            _didIteratorError = true;
            _iteratorError = err;
        } finally {
            try {
                if (!_iteratorNormalCompletion && _iterator.return) {
                    _iterator.return();
                }
            } finally {
                if (_didIteratorError) {
                    throw _iteratorError;
                }
            }
        }
    }
};

Browser.prototype.realInit = function () {
    var self = this;
    var thisB = this;

    if (this.wasInitialized) {
        console.log('Attemping to call realInit on an already-initialized Dalliance instance');
        return;
    }

    this.wasInitialized = true;

    if (typeof navigator !== 'undefined') {
        var ua = navigator.userAgent || 'dummy';
        if (ua.indexOf('Trident') >= 0 && ua.indexOf('rv:11') >= 0) {
            // console.log('Detected IE11, disabling tier pinning.');
            this.disablePinning = true;
        }
    }

    this.defaultChr = this.chr;
    this.defaultStart = this.viewStart;
    this.defaultEnd = this.viewEnd;
    this.defaultSources = [];
    for (var i = 0; i < this.sources.length; ++i) {
        var s = this.sources[i];
        if (s) this.defaultSources.push(s);
    }

    if (this.restoreStatus) {
        this.statusRestored = this.restoreStatus();
    }

    if (this.injectionPoint && this.injectionPoint instanceof Element) {
        this.browserHolderHolder = this.injectionPoint;
    } else if (this.injectionPoint) {
        this.browserHolderHolder = document.getElementById(this.injectionPoint);
        if (!this.browserHolderHolder) {
            throw Error('injectionPoint must point to a valid DOM element of element ID');
        }
    } else {
        this.browserHolderHolder = document.getElementById(this.pageName);
        if (!this.browserHolderHolder) {
            throw Error('pageName must be a valid element ID (or use the injectionPoint option instead)');
        }
    }

    this.browserHolderHolder.classList.add('dalliance-injection-point');
    this.browserHolder = makeElement('div', null, { className: 'dalliance dalliance-root', tabIndex: -1 });
    if (this.maxHeight) {
        this.browserHolder.style.maxHeight = this.maxHeight + 'px';
    } else if (this.maxHeight != undefined) {
        this.browserHolder.style.maxHeight = null;
    }
    removeChildren(this.browserHolderHolder);
    this.browserHolderHolder.appendChild(this.browserHolder);
    this.svgHolder = makeElement('div', null, { className: 'main-holder' });

    this.initUI(this.browserHolder, this.svgHolder);

    this.pinnedTierHolder = makeElement('div', null, { className: 'tier-holder tier-holder-pinned' });
    this.tierHolder = makeElement('div', this.makeLoader(24), { className: 'tier-holder tier-holder-rest' });

    this.locSingleBase = makeElement('span', '', { className: 'loc-single-base' });
    var locSingleBaseHolder = makeElement('div', this.locSingleBase, { className: 'loc-single-base-holder' });
    // Add listener to update single base location
    this.addViewListener(function (chr, minFloor, maxFloor, zoomSliderValue, zoomSliderDict, min, max) {
        // Just setting textContent causes layout flickering in Blink.
        // This approach means that the element is never empty.
        var loc = Math.round((max + min) / 2);
        self.locSingleBase.appendChild(document.createTextNode(chr + ':' + formatLongInt(loc)));
        self.locSingleBase.removeChild(self.locSingleBase.firstChild);
    });

    if (this.disablePinning) {
        this.tierHolderHolder = this.tierHolder;
    } else {
        this.tierHolderHolder = makeElement('div', [locSingleBaseHolder, this.pinnedTierHolder, this.tierHolder], { className: 'tier-holder-holder' });
        this.svgHolder.appendChild(this.tierHolderHolder);
    }
    this.svgHolder.appendChild(this.tierHolderHolder);

    this.bhtmlRoot = makeElement('div');
    if (!this.disablePoweredBy) {
        this.bhtmlRoot.appendChild(makeElement('span', ['Powered by ', makeElement('a', 'Biodalliance', { href: 'http://www.biodalliance.org/' }), ' ' + VERSION], { className: 'powered-by' }));
    }
    this.browserHolder.appendChild(this.bhtmlRoot);

    this.resizeListener = function (ev) {
        thisB.resizeViewer();
    };

    this.ruler = makeElement('div', null, { className: 'guideline' });
    this.ruler2 = makeElement('div', null, { className: 'single-base-guideline' });
    this.tierHolderHolder.appendChild(this.ruler);
    this.tierHolderHolder.appendChild(this.ruler2);
    this.chainConfigs = this.chains || {};
    this.chains = {};
    for (var k in this.chainConfigs) {
        var cc = this.chainConfigs[k];
        if (cc instanceof Chainset) {
            console.log('WARNING: Should no longer use "new Chainset" in Biodalliance configurations.');
        }
        this.chains[k] = new Chainset(cc);
    }

    var promisedWorkers;
    if (this.maxWorkers > 0) {
        var pw = [];
        for (var fi = 0; fi < this.maxWorkers; ++fi) {
            pw.push(makeFetchWorker(this));
        }promisedWorkers = Promise.all(pw);
    } else {
        promisedWorkers = Promise.resolve([]);
    }

    this.fetchWorkers = null;
    this.nextWorker = 0;
    promisedWorkers.then(function (v) {
        console.log('Booted ' + v.length + ' workers');
        thisB.fetchWorkers = v;
    }, function (v) {
        console.log('Failed to boot workers', v);
    }).then(function () {
        if (self.offscreenInitWidth || window.getComputedStyle(thisB.browserHolderHolder).display != 'none' && thisB.tierHolder.getBoundingClientRect().width > 0) {
            setTimeout(function () {
                thisB.realInit2();
            }, 1);
        } else {
            var pollInterval = setInterval(function () {
                if (window.getComputedStyle(thisB.browserHolderHolder).display != 'none' && thisB.tierHolder.getBoundingClientRect().width > 0) {
                    clearInterval(pollInterval);
                    thisB.realInit2();
                }
            }, 300);
        }
    });
};

Browser.prototype.realInit2 = function () {
    var _this = this;

    var thisB = this;

    // Remove the loader icon, if needed
    removeChildren(this.tierHolder);
    removeChildren(this.pinnedTierHolder);

    this.featurePanelWidth = this.tierHolder.getBoundingClientRect().width | thisB.offscreenInitWidth | 0;
    window.addEventListener('resize', this.resizeListener, false);

    this.scale = this.featurePanelWidth / (this.viewEnd - this.viewStart);
    if (!this.zoomMax) {
        this.zoomMax = this.zoomExpt * Math.log(this.maxViewWidth / this.zoomBase);
        this.zoomMin = this.zoomExpt * Math.log(this.featurePanelWidth / this.maxPixelsPerBase / this.zoomBase);
    }
    this.zoomSliderValue = this.zoomExpt * Math.log((this.viewEnd - this.viewStart + 1) / this.zoomBase);

    // Event handlers

    this.tierHolderHolder.addEventListener('mousewheel', function (ev) {
        ev.stopPropagation();ev.preventDefault();

        if (ev.wheelDeltaX) {
            var delta = ev.wheelDeltaX / 5;
            if (!thisB.reverseScrolling) {
                delta = -delta;
            }
            thisB.move(delta);
        }

        if (ev.wheelDeltaY) {
            var delta = ev.wheelDeltaY;
            if (thisB.reverseScrolling) {
                delta = -delta;
            }
            thisB.tierHolder.scrollTop += delta;
        }
    }, false);

    this.tierHolderHolder.addEventListener('MozMousePixelScroll', function (ev) {
        ev.stopPropagation();ev.preventDefault();
        if (ev.axis == 1) {
            if (ev.detail != 0) {
                var delta = ev.detail / 4;
                if (thisB.reverseScrolling) {
                    delta = -delta;
                }
                thisB.move(delta);
            }
        } else {
            var delta = ev.detail;
            if (!thisB.reverseScrolling) {
                delta = -delta;
            }

            thisB.tierHolder.scrollTop += delta;
        }
    }, false);

    this.tierHolderHolder.addEventListener('touchstart', function (ev) {
        return thisB.touchStartHandler(ev);
    }, false);
    this.tierHolderHolder.addEventListener('touchmove', function (ev) {
        return thisB.touchMoveHandler(ev);
    }, false);
    this.tierHolderHolder.addEventListener('touchend', function (ev) {
        return thisB.touchEndHandler(ev);
    }, false);
    this.tierHolderHolder.addEventListener('touchcancel', function (ev) {
        return thisB.touchCancelHandler(ev);
    }, false);

    var keyHandler = function keyHandler(ev) {
        // console.log('cbkh: ' + ev.keyCode);
        if (ev.keyCode == 13) {
            // enter
            var layoutsChanged = false;
            for (var ti = 0; ti < thisB.tiers.length; ++ti) {
                var t = thisB.tiers[ti];
                if (t.wantedLayoutHeight && t.wantedLayoutHeight != t.layoutHeight) {
                    t.layoutHeight = t.wantedLayoutHeight;
                    t.clipTier();
                    layoutsChanged = true;
                }
            }
            if (layoutsChanged) {
                thisB.arrangeTiers();
            }
        } else if (ev.keyCode == 32 || ev.charCode == 32) {
            // space
            if (!thisB.isSnapZooming) {
                thisB.isSnapZooming = true;
                var newZoom = (thisB.savedZoom || 0.0) + thisB.zoomMin;
                thisB.savedZoom = thisB.zoomSliderValue - thisB.zoomMin;
                thisB.zoomSliderValue = newZoom;
                thisB.zoom(Math.exp(1.0 * newZoom / thisB.zoomExpt));
            } else {
                thisB.isSnapZooming = false;
                var newZoom = (thisB.savedZoom || 20.0) + thisB.zoomMin;
                thisB.savedZoom = thisB.zoomSliderValue - thisB.zoomMin;
                thisB.zoomSliderValue = newZoom;
                thisB.zoom(Math.exp(1.0 * newZoom / thisB.zoomExpt));
            }
            ev.stopPropagation();ev.preventDefault();
        } else if (ev.keyCode == 85) {
            // u
            if (thisB.uiMode === 'opts') {
                // if the options are visible, toggle the checkbox too
                var check = document.getElementById("singleBaseHightlightButton").checked;
                document.getElementById("singleBaseHightlightButton").checked = !check;
            }
            thisB.singleBaseHighlight = !thisB.singleBaseHighlight;
            thisB.positionRuler();
            ev.stopPropagation();ev.preventDefault();
        } else if (ev.keyCode == 39) {
            // right arrow
            ev.stopPropagation();ev.preventDefault();
            thisB.scrollArrowKey(ev, -1);
        } else if (ev.keyCode == 37) {
            // left arrow
            ev.stopPropagation();ev.preventDefault();
            thisB.scrollArrowKey(ev, 1);
        } else if (ev.keyCode == 38 || ev.keyCode == 87) {
            // up arrow | w
            ev.stopPropagation();ev.preventDefault();

            if (ev.shiftKey) {
                var st = thisB.getSelectedTier();
                if (st < 0) return;
                var tt = thisB.tiers[st];
                var ch = tt.forceHeight || tt.subtiers[0].height;
                if (ch >= 40) {
                    tt.mergeConfig({ height: ch - 10 });
                }
            } else if (ev.ctrlKey || ev.metaKey) {
                var st = thisB.getSelectedTier();
                if (st < 0) return;
                var tt = thisB.tiers[st];

                if (tt.quantLeapThreshold) {
                    var th = tt.subtiers[0].height;
                    var tq = tt.subtiers[0].quant;
                    if (!tq) return;

                    var qmin = 1.0 * tq.min;
                    var qmax = 1.0 * tq.max;

                    var qscale = (qmax - qmin) / th;
                    tt.mergeConfig({ quantLeapThreshold: qmin + ((Math.round((tt.quantLeapThreshold - qmin) / qscale) | 0) + 1) * qscale });

                    tt.notify('Threshold: ' + formatQuantLabel(tt.quantLeapThreshold));
                }
            } else if (ev.altKey) {
                var cnt = thisB.selectedTiers.length;
                if (cnt == 0) return;

                var st = thisB.selectedTiers[0];
                var contiguous = true;
                var mt = [];
                for (var si = 0; si < thisB.selectedTiers.length; ++si) {
                    mt.push(thisB.tiers[thisB.selectedTiers[si]]);
                    if (si > 0 && thisB.selectedTiers[si] - thisB.selectedTiers[si - 1] != 1) contiguous = false;
                }

                if (contiguous && st <= 0) return;

                for (var si = thisB.selectedTiers.length - 1; si >= 0; --si) {
                    thisB.tiers.splice(thisB.selectedTiers[si], 1);
                }thisB.selectedTiers.splice(0, cnt);

                var ip = contiguous ? st - 1 : st;
                for (var si = 0; si < mt.length; ++si) {
                    thisB.tiers.splice(ip + si, 0, mt[si]);
                    thisB.selectedTiers.push(ip + si);
                }

                thisB.withPreservedSelection(thisB._ensureTiersGrouped);
                thisB.markSelectedTiers();
                thisB.notifyTierSelection();
                thisB.reorderTiers();
                thisB.notifyTier("selected", st);
            } else {
                var st = thisB.getSelectedTier();
                if (st > 0) {
                    thisB.setSelectedTier(st - 1);
                    var nst = thisB.tiers[thisB.getSelectedTier()];
                    var top = nst.row.offsetTop,
                        bottom = top + nst.row.offsetHeight;
                    if (top < thisB.tierHolder.scrollTop || bottom > thisB.tierHolder.scrollTop + thisB.tierHolder.offsetHeight) {
                        thisB.tierHolder.scrollTop = top;
                    }
                } else {
                    thisB.notifyTierSelectionWrap(-1);
                }
            }
        } else if (ev.keyCode == 40 || ev.keyCode == 83) {
            // down arrow | s
            ev.stopPropagation();ev.preventDefault();

            if (ev.shiftKey) {
                var st = thisB.getSelectedTier();
                if (st < 0) return;
                var tt = thisB.tiers[st];
                var ch = tt.forceHeight || tt.subtiers[0].height;
                tt.mergeConfig({ height: ch + 10 });
            } else if (ev.ctrlKey || ev.metaKey) {
                var st = thisB.getSelectedTier();
                if (st < 0) return;
                var tt = thisB.tiers[st];

                if (tt.quantLeapThreshold) {
                    var th = tt.subtiers[0].height;
                    var tq = tt.subtiers[0].quant;
                    if (!tq) return;

                    var qmin = 1.0 * tq.min;
                    var qmax = 1.0 * tq.max;
                    var qscale = (qmax - qmin) / th;

                    var it = Math.round((tt.quantLeapThreshold - qmin) / qscale) | 0;
                    if (it > 1) {
                        tt.mergeConfig({ quantLeapThreshold: qmin + (it - 1) * qscale });
                        tt.notify('Threshold: ' + formatQuantLabel(tt.quantLeapThreshold));
                    }
                }
            } else if (ev.altKey) {
                var cnt = thisB.selectedTiers.length;
                if (cnt == 0) return;

                var st = thisB.selectedTiers[0];
                var discontig = 0;
                var mt = [];
                for (var si = 0; si < thisB.selectedTiers.length; ++si) {
                    mt.push(thisB.tiers[thisB.selectedTiers[si]]);
                    if (si > 0) discontig += thisB.selectedTiers[si] - thisB.selectedTiers[si - 1] - 1;
                }
                var contiguous = discontig == 0;

                if (contiguous && st + cnt >= thisB.tiers.length) return;

                for (var si = thisB.selectedTiers.length - 1; si >= 0; --si) {
                    thisB.tiers.splice(thisB.selectedTiers[si], 1);
                }thisB.selectedTiers.splice(0, cnt);

                var ip = contiguous ? st + 1 : st + discontig;
                for (var si = 0; si < mt.length; ++si) {
                    thisB.tiers.splice(ip + si, 0, mt[si]);
                    thisB.selectedTiers.push(ip + si);
                }

                thisB.withPreservedSelection(function () {
                    thisB._ensureTiersGrouped(true);
                });
                thisB.markSelectedTiers();
                thisB.notifyTierSelection();
                thisB.reorderTiers();
                thisB.notifyTier("selected", st);
            } else {
                var st = thisB.getSelectedTier();
                if (st < thisB.tiers.length - 1) {
                    thisB.setSelectedTier(st + 1);
                    var nst = thisB.tiers[thisB.getSelectedTier()];
                    var top = nst.row.offsetTop,
                        bottom = top + nst.row.offsetHeight;
                    if (top < thisB.tierHolder.scrollTop || bottom > thisB.tierHolder.scrollTop + thisB.tierHolder.offsetHeight) {
                        thisB.tierHolder.scrollTop = Math.min(top, bottom - thisB.tierHolder.offsetHeight);
                    }
                }
            }
        } else if (ev.keyCode == 187 || ev.keyCode == 61) {
            // +
            ev.stopPropagation();ev.preventDefault();
            thisB.zoomStep(-10);
        } else if (ev.keyCode == 189 || ev.keyCode == 173) {
            // -
            ev.stopPropagation();ev.preventDefault();
            thisB.zoomStep(10);
        } else if (ev.keyCode == 73 || ev.keyCode == 105) {
            // i
            ev.stopPropagation();ev.preventDefault();
            var st = thisB.getSelectedTier();
            if (st < 0) return;
            var t = thisB.tiers[st];
            if (!t.infoVisible) {
                t.infoElement.style.display = 'block';
                t.updateHeight();
                t.infoVisible = true;
            } else {
                t.infoElement.style.display = 'none';
                t.updateHeight();
                t.infoVisible = false;
            }
        } else if (ev.keyCode == 84 || ev.keyCode == 116) {
            // t
            var bumpStatus;
            if (ev.shiftKey) {
                ev.stopPropagation();ev.preventDefault();
                for (var ti = 0; ti < thisB.tiers.length; ++ti) {
                    var t = thisB.tiers[ti];
                    if (t.dasSource.collapseSuperGroups) {
                        if (bumpStatus === undefined) {
                            bumpStatus = !t.bumped;
                        }
                        t.mergeConfig({ bumped: bumpStatus });
                    }
                }
            } else if (!ev.ctrlKey && !ev.metaKey) {
                ev.stopPropagation();ev.preventDefault();
                var st = thisB.getSelectedTier();
                if (st < 0) return;
                var t = thisB.tiers[st];

                if (t.dasSource.collapseSuperGroups) {
                    if (bumpStatus === undefined) {
                        bumpStatus = !t.bumped;
                    }
                    t.mergeConfig({ bumped: bumpStatus });
                }
            }
        } else if (ev.keyCode == 77 || ev.keyCode == 109) {
            // m
            ev.stopPropagation();ev.preventDefault();
            if ((ev.ctrlKey || ev.metaKey) && thisB.selectedTiers.length > 1) {
                thisB.mergeSelectedTiers();
            }
        } else if (ev.keyCode == 68 || ev.keyCode == 100) {
            // d
            ev.stopPropagation();ev.preventDefault();
            if (ev.ctrlKey || ev.metaKey) {
                var st = thisB.getSelectedTier();
                if (st < 0) return;
                thisB.addTier(thisB.tiers[st].dasSource);
            }
        } else if (ev.keyCode == 80 || ev.keyCode == 112) {
            // p
            if (ev.ctrlKey || ev.metaKey) {
                // Need to be careful because order of tiers could change
                // once we start updating pinning.
                var tt = [];
                for (var st = 0; st < thisB.selectedTiers.length; ++st) {
                    tt.push(thisB.tiers[thisB.selectedTiers[st]]);
                }
                for (var ti = 0; ti < tt.length; ++ti) {
                    tt[ti].mergeConfig({ pinned: !tt[ti].pinned });
                }
            }
        } else {
            // console.log('key: ' + ev.keyCode + '; char: ' + ev.charCode);
        }
    };

    this.browserHolder.addEventListener('focus', function (ev) {
        thisB.browserHolder.addEventListener('keydown', keyHandler, false);
    }, false);
    this.browserHolder.addEventListener('blur', function (ev) {
        thisB.browserHolder.removeEventListener('keydown', keyHandler, false);
    }, false);

    // Popup support (does this really belong here? FIXME)
    this.hPopupHolder = makeElement('div');
    this.hPopupHolder.style['font-family'] = 'helvetica';
    this.hPopupHolder.style['font-size'] = '12pt';
    this.hPopupHolder.classList.add('dalliance');
    document.body.appendChild(this.hPopupHolder);

    for (var t = 0; t < this.sources.length; ++t) {
        var source = this.sources[t];
        if (!source) continue;

        var config = {};
        if (this.restoredConfigs) {
            config = this.restoredConfigs[t];
        }

        if (!source.disabled) {
            this.makeTier(source, config).then(function (tier) {
                thisB.refreshTier(tier);
            });
        }
    }

    var _iteratorNormalCompletion2 = true;
    var _didIteratorError2 = false;
    var _iteratorError2 = undefined;

    try {
        for (var _iterator2 = this.searchOnlySources[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {
            var _source = _step2.value;

            if (!_source.disabled) {
                var _createSources = this.createSources(_source),
                    features = _createSources.features;

                if (features) {
                    this.searchOnlySourceHolders.push({
                        dasSource: _source,
                        featureSource: features
                    });
                }
            }
        }
    } catch (err) {
        _didIteratorError2 = true;
        _iteratorError2 = err;
    } finally {
        try {
            if (!_iteratorNormalCompletion2 && _iterator2.return) {
                _iterator2.return();
            }
        } finally {
            if (_didIteratorError2) {
                throw _iteratorError2;
            }
        }
    }

    if (this.onFirstRender) {
        Promise.all(this.tiers.map(function (t) {
            return t.firstRenderPromise;
        })).then(function () {
            return _this.onFirstRender();
        }).catch(function (err) {
            return console.log(err);
        });
    }

    thisB._ensureTiersGrouped();
    thisB.arrangeTiers();
    thisB.reorderTiers();

    var ss = this.getSequenceSource();
    if (ss) {
        ss.getSeqInfo(this.chr, function (si) {
            if (si) thisB.currentSeqMax = si.length;else thisB.currentSeqMax = -1;
        });
    }

    this.queryRegistry();
    for (var m in this.chains) {
        this.queryRegistry(m, true);
    }

    if (this.hubs) {
        for (var hi = 0; hi < this.hubs.length; ++hi) {
            var hc = this.hubs[hi];
            if (typeof hc == 'string') {
                hc = { url: hc };
            };

            (function (hc) {
                connectTrackHub(hc.url, function (hub, err) {
                    if (err) {
                        console.log(err);
                    } else {
                        var tdb;
                        if (hc.genome) tdb = hub.genomes[hc.genome];else tdb = hub.genomes[thisB.coordSystem.ucscName];

                        if (tdb) {
                            if (hc.mapping) tdb.mapping = hc.mapping;
                            if (hc.label) tdb.hub.altLabel = hc.label;
                            thisB.hubObjects.push(tdb);
                        }
                    }
                }, hc);
            })(hc);
        }
    }

    if (this.fullScreen) {
        this.setFullScreenHeight();
    }

    if (!this.statusRestored && this.storeStatus) {
        this.storeStatus();
    }

    thisB.setLocation(this.chr, this.viewStart, this.viewEnd, function () {
        thisB.setSelectedTier(1);
        // Ping any init listeners.
        for (var ii = 0; ii < thisB.initListeners.length; ++ii) {
            try {
                thisB.initListeners[ii].call(thisB);
            } catch (e) {
                console.log(e);
            }
        }
    });
};

//
// Touch event support
//

Browser.prototype.touchStartHandler = function (ev) {
    // Events not consumed so they can be interpretted as clicks as well.

    this.touchOriginX = ev.touches[0].pageX;
    this.touchOriginY = ev.touches[0].pageY;
    if (ev.touches.length == 2) {
        var sep = Math.abs(ev.touches[0].pageX - ev.touches[1].pageX);
        this.zooming = true;
        this.zoomLastSep = this.zoomInitialSep = sep;
        this.zoomInitialScale = this.scale;
    }
};

Browser.prototype.touchMoveHandler = function (ev) {
    // These events *are* consumed to ensure we never get any dragging that
    // we don't manage ourselves.

    ev.stopPropagation();ev.preventDefault();

    if (ev.touches.length == 1) {
        var touchX = ev.touches[0].pageX;
        var touchY = ev.touches[0].pageY;
        if (this.touchOriginX && touchX != this.touchOriginX) {
            this.move(touchX - this.touchOriginX);
        }
        if (this.touchOriginY && touchY != this.touchOriginY) {
            this.tierHolder.scrollTop -= touchY - this.touchOriginY;
        }
        this.touchOriginX = touchX;
        this.touchOriginY = touchY;
    } else if (this.zooming && ev.touches.length == 2) {
        var sep = Math.abs(ev.touches[0].pageX - ev.touches[1].pageX);
        if (sep != this.zoomLastSep) {
            var cp = (ev.touches[0].pageX + ev.touches[1].pageX) / 2;
            var scp = this.viewStart + cp / this.scale | 0;
            this.scale = this.zoomInitialScale * (sep / this.zoomInitialSep);
            this.viewStart = scp - cp / this.scale | 0;
            for (var i = 0; i < this.tiers.length; ++i) {
                tiers[i].getRenderer().drawTier(tiers[i]);
            }
        }
        this.zoomLastSep = sep;
    }
};

Browser.prototype.touchEndHandler = function (ev) {};

Browser.prototype.touchCancelHandler = function (ev) {};

Browser.prototype.makeTier = function (source, config) {
    try {
        return this.realMakeTier(source, config);
    } catch (e) {
        console.log('Error initializing', source);
        console.log(e.stack || e);
    }
};

Browser.prototype.realMakeTier = function (source, config) {
    var thisB = this;
    var background = null;
    if (this.tierBackgroundColors) {
        background = this.tierBackgroundColors[this.tiers.length % this.tierBackgroundColors.length];
    }

    var tier = new DasTier(this, source, config, background);
    tier.oorigin = this.viewStart;

    var isDragging = false;
    var dragOrigin, dragMoveOrigin;
    var hoverTimeout;

    var featureLookup = function featureLookup(rx, ry) {
        var st = tier.subtiers;
        if (!st) {
            return;
        }

        var sti = 0;
        ry -= tier.padding;;
        while (sti < st.length && ry > st[sti].height && sti < st.length - 1) {
            ry = ry - st[sti].height - tier.padding;
            ++sti;
        }
        if (sti >= st.length) {
            return;
        }

        var glyphs = st[sti].glyphs;
        var viewCenter = (thisB.viewStart + thisB.viewEnd) / 2;
        var offset = (tier.glyphCacheOrigin - thisB.viewStart) * thisB.scale;
        rx -= offset;

        return glyphLookup(glyphs, rx, ry);
    };

    var dragMoveHandler = function dragMoveHandler(ev) {
        ev.preventDefault();ev.stopPropagation();
        var rx = ev.clientX;
        if (rx != dragMoveOrigin) {
            thisB.move(rx - dragMoveOrigin, true);
            dragMoveOrigin = rx;
        }
        thisB.isDragging = true;
    };

    var dragUpHandler = function dragUpHandler(ev) {
        window.removeEventListener('mousemove', dragMoveHandler, true);
        window.removeEventListener('mouseup', dragUpHandler, true);
        thisB.move(ev.clientX - dragMoveOrigin); // Snap back (FIXME: consider animation)
    };

    tier.viewport.addEventListener('mousedown', function (ev) {
        thisB.browserHolder.focus();
        ev.preventDefault();
        var br = tier.row.getBoundingClientRect();
        var rx = ev.clientX,
            ry = ev.clientY;

        window.addEventListener('mousemove', dragMoveHandler, true);
        window.addEventListener('mouseup', dragUpHandler, true);
        dragOrigin = dragMoveOrigin = rx;
        thisB.isDragging = false; // Not dragging until a movement event arrives.
    }, false);

    tier.viewport.addEventListener('mousemove', function (ev) {
        var br = tier.row.getBoundingClientRect();
        var rx = ev.clientX - br.left,
            ry = ev.clientY - br.top;

        var hit = featureLookup(rx, ry);
        if (hit && hit.length > 0) {
            tier.row.style.cursor = 'pointer';
        } else {
            tier.row.style.cursor = 'default';
        }

        if (hoverTimeout) {
            clearTimeout(hoverTimeout);
        }

        if (isDragging) {
            // if (tier.dasSource.tier_type !== 'sequence' && rx != dragMoveOrigin) {
            //    thisB.move((rx - dragMoveOrigin));
            //    dragMoveOrigin = rx;
            // }
        } else {
            hoverTimeout = setTimeout(function () {
                var hit = featureLookup(rx, ry);
                if (hit && hit.length > 0) {
                    thisB.notifyFeatureHover(ev, hit[hit.length - 1], hit, tier);
                }
            }, 1000);
        }
    });

    var doubleClickTimeout = null;
    tier.viewport.addEventListener('mouseup', function (ev) {
        var br = tier.row.getBoundingClientRect();
        var rx = ev.clientX - br.left,
            ry = ev.clientY - br.top;

        var hit = featureLookup(rx, ry);
        if (hit && hit.length > 0 && !thisB.isDragging) {
            if (doubleClickTimeout) {
                clearTimeout(doubleClickTimeout);
                doubleClickTimeout = null;
                thisB.featureDoubleClick(hit, rx, ry);
            } else {
                doubleClickTimeout = setTimeout(function () {
                    doubleClickTimeout = null;
                    thisB.notifyFeature(ev, hit[hit.length - 1], hit, tier);
                }, 500);
            }
        }

        if (thisB.isDragging && rx != dragOrigin && tier.sequenceSource) {
            var a = thisB.viewStart + rx / thisB.scale;
            var b = thisB.viewStart + dragOrigin / thisB.scale;

            var min, max;
            if (a < b) {
                min = a | 0;max = b | 0;
            } else {
                min = b | 0;max = a | 0;
            }

            thisB.notifyRegionSelect(thisB.chr, min, max);
        }
        thisB.isDragging = false;
    }, false);

    tier.viewport.addEventListener('mouseout', function (ev) {
        isDragging = false;
    });

    tier.removeButton.addEventListener('click', function (ev) {
        ev.stopPropagation();ev.preventDefault();
        for (var ti = 0; ti < thisB.tiers.length; ++ti) {
            if (thisB.tiers[ti] === tier) {
                thisB.removeTier({ index: ti });
                break;
            }
        }
    }, false);
    tier.nameButton.addEventListener('click', function (ev) {
        ev.stopPropagation();ev.preventDefault();

        if (ev.shiftKey) {
            var hitTier = -1;
            for (var ti = 0; ti < thisB.tiers.length; ++ti) {
                if (thisB.tiers[ti] === tier) {
                    hitTier = ti;
                    break;
                }
            }
            if (hitTier >= 0) {
                var i = thisB.selectedTiers.indexOf(hitTier);
                if (i >= 0) {
                    thisB.selectedTiers.splice(i, 1);
                } else {
                    thisB.selectedTiers.push(hitTier);
                    thisB.selectedTiers.sort();
                }
                thisB.markSelectedTiers();
                thisB.notifyTierSelection();

                if (thisB.selectedTiers.length > 0) {
                    thisB.browserHolder.focus();
                } else {
                    thisB.notifyTierSelectionWrap(-1);
                }
            }
        } else {
            for (var ti = 0; ti < thisB.tiers.length; ++ti) {
                if (thisB.tiers[ti] === tier) {
                    thisB.browserHolder.focus();
                    if (thisB.selectedTiers.length != 1 || thisB.selectedTiers[0] != ti) {
                        thisB.setSelectedTier(ti);
                        return;
                    }
                }
            }

            if (!tier.infoVisible) {
                tier.infoElement.style.display = 'block';
                tier.updateHeight();
                tier.infoVisible = true;
            } else {
                tier.infoElement.style.display = 'none';
                tier.updateHeight();
                tier.infoVisible = false;
            }
        }
    }, false);
    tier.bumpButton.addEventListener('click', function (ev) {
        ev.stopPropagation();ev.preventDefault();
        var bumpStatus;
        var t = tier;
        if (t.dasSource.collapseSuperGroups) {
            if (bumpStatus === undefined) {
                bumpStatus = !t.bumped;
            }
            t.mergeConfig({ bumped: bumpStatus });
        }
    }, false);

    var dragLabel;
    var dragTierHolder;
    var dragTierHolderScrollLimit;
    var tierOrdinal;
    var yAtLastReorder;
    var tiersWereReordered = false;

    var labelDragHandler = function labelDragHandler(ev) {
        var label = tier.label;

        ev.stopPropagation();ev.preventDefault();
        if (!dragLabel) {
            if (tier.pinned) {
                dragTierHolder = thisB.pinnedTierHolder;
            } else {
                dragTierHolder = thisB.tierHolder;
            }
            dragTierHolderScrollLimit = dragTierHolder.scrollHeight - dragTierHolder.offsetHeight;

            dragLabel = label.cloneNode(true);
            dragLabel.style.cursor = 'pointer';
            dragTierHolder.appendChild(dragLabel);
            label.style.visibility = 'hidden';

            for (var ti = 0; ti < thisB.tiers.length; ++ti) {
                if (thisB.tiers[ti] === tier) {
                    tierOrdinal = ti;
                    break;
                }
            }

            yAtLastReorder = ev.clientY;
        }

        var holderBCR = dragTierHolder.getBoundingClientRect();
        dragLabel.style.left = label.getBoundingClientRect().left - holderBCR.left + 'px';
        dragLabel.style.top = ev.clientY - holderBCR.top + dragTierHolder.scrollTop - 10 + 'px';

        var pty = ev.clientY - holderBCR.top + dragTierHolder.scrollTop;
        for (var ti = 0; ti < thisB.tiers.length; ++ti) {
            var tt = thisB.tiers[ti];
            if (tt.pinned ^ tier.pinned) continue;

            var ttr = tt.row.getBoundingClientRect();
            pty -= ttr.bottom - ttr.top;
            if (pty < 0) {
                if (ti < tierOrdinal && ev.clientY < yAtLastReorder || ti > tierOrdinal && ev.clientY > yAtLastReorder) {
                    thisB.withPreservedSelection(function () {
                        thisB.tiers.splice(tierOrdinal, 1);
                        thisB.tiers.splice(ti, 0, tier);
                        thisB._ensureTiersGrouped(ti > tierOrdinal);
                    });

                    for (var tix = 0; tix < thisB.tiers.length; ++tix) {
                        if (thisB.tiers[tix] == tier) tierOrdinal = tix;
                    }yAtLastReorder = ev.clientY;
                    thisB.reorderTiers();
                    dragTierHolder.appendChild(dragLabel); // Because reorderTiers removes all children.
                    tiersWereReordered = true;
                }
                break;
            }
        }

        if (dragLabel.offsetTop < dragTierHolder.scrollTop) {
            dragTierHolder.scrollTop -= dragTierHolder.scrollTop - dragLabel.offsetTop;
        } else if (dragLabel.offsetTop + dragLabel.offsetHeight > dragTierHolder.scrollTop + dragTierHolder.offsetHeight) {
            dragTierHolder.scrollTop = Math.min(dragTierHolder.scrollTop + (dragLabel.offsetTop + dragLabel.offsetHeight) - (dragTierHolder.scrollTop + dragTierHolder.offsetHeight), dragTierHolderScrollLimit);
        }
    };

    var labelReleaseHandler = function labelReleaseHandler(ev) {
        var label = tier.label;

        ev.stopPropagation();ev.preventDefault();
        if (dragLabel) {
            dragLabel.style.cursor = 'auto';
            dragTierHolder.removeChild(dragLabel);
            dragLabel = null;
            label.style.visibility = 'visible';
        }
        document.removeEventListener('mousemove', labelDragHandler, false);
        document.removeEventListener('mouseup', labelReleaseHandler, false);

        if (tiersWereReordered) {
            for (var ti = 0; ti < thisB.tiers.length; ++ti) {
                if (thisB.tiers[ti] == tier) {
                    thisB.setSelectedTier(ti);
                    break;
                }
            }
            thisB.notifyTier("reordered", tier);
        }
    };

    tier.label.addEventListener('mousedown', function (ev) {
        ev.stopPropagation();ev.preventDefault();
        tiersWereReordered = false;
        document.addEventListener('mousemove', labelDragHandler, false);
        document.addEventListener('mouseup', labelReleaseHandler, false);
    }, false);

    this.tiers.push(tier); // NB this currently tells any extant knownSpace about the new tier.

    // fetches stylesheet
    return tier.init().then(function (updatedTier) {
        updatedTier.currentlyHeight = 50;
        thisB.updateHeight();
        updatedTier.updateLabel();

        thisB.withPreservedSelection(thisB._ensureTiersGrouped);
        updatedTier._updateFromConfig();
        thisB.reorderTiers();

        return updatedTier;
    });
};

Browser.prototype.reorderTiers = function () {
    removeChildren(this.tierHolder);
    removeChildren(this.pinnedTierHolder);
    if (this.disablePinning) {
        this.tierHolder.appendChild(this.ruler);
        this.tierHolder.appendChild(this.ruler2);
    }
    var hasPinned = false;
    var pinnedTiers = [],
        unpinnedTiers = [];
    for (var i = 0; i < this.tiers.length; ++i) {
        var t = this.tiers[i];
        var visible = ['sub', 'dummy'].indexOf(this.tiers[i].dasSource.renderer) === -1;
        if (t.pinned && !this.disablePinning) {
            pinnedTiers.push(t);
            if (visible) this.pinnedTierHolder.appendChild(this.tiers[i].row);
            hasPinned = true;
        } else {
            unpinnedTiers.push(t);
            if (visible) this.tierHolder.appendChild(this.tiers[i].row);
        }
    }

    this.withPreservedSelection(function () {
        this.tiers.splice(0, this.tiers.length);
        for (var i = 0; i < pinnedTiers.length; ++i) {
            this.tiers.push(pinnedTiers[i]);
        }for (var i = 0; i < unpinnedTiers.length; ++i) {
            this.tiers.push(unpinnedTiers[i]);
        }
    });

    if (hasPinned) this.pinnedTierHolder.classList.add('tier-holder-pinned-full');else this.pinnedTierHolder.classList.remove('tier-holder-pinned-full');

    this.arrangeTiers();
};

Browser.prototype.withPreservedSelection = function (f) {
    var st = [];
    for (var xi = 0; xi < this.selectedTiers.length; ++xi) {
        st.push(this.tiers[this.selectedTiers[xi]]);
    }

    f.call(this);

    this.selectedTiers = [];
    for (var sti = 0; sti < this.tiers.length; ++sti) {
        if (st.indexOf(this.tiers[sti]) >= 0) this.selectedTiers.push(sti);
    }
};

Browser.prototype.refreshTier = function (tier, tierCallback) {
    var renderer = this.getTierRenderer(tier);
    if (tier.dasSource.renderer === 'multi') {
        renderer.drawTier(tier);
    } else {
        var renderCallback = tierCallback || renderer.renderTier;
        if (this.knownSpace) {
            this.knownSpace.invalidate(tier, renderCallback);
        }
    }
};

Browser.prototype.getTierRenderer = function (tier) {
    var renderer = tier.dasSource.renderer || this.defaultRenderer;
    if (typeof renderer === 'string') {
        return this.renderers[renderer];
    } else if (typeof renderer.renderTier === 'function' && typeof renderer.drawTier === 'function') {
        return renderer;
    } else {
        console.log("Tier doesn't have a renderer");
    }
};

/* Internal use only, assumes selection is being managed elsewhere... */

Browser.prototype._ensureTiersGrouped = function (down) {
    var groupedTiers = {};
    for (var ti = 0; ti < this.tiers.length; ++ti) {
        var t = this.tiers[ti];
        if (t.dasSource.tierGroup) {
            pusho(groupedTiers, t.dasSource.tierGroup, t);
        }
    }

    var newTiers = [];
    if (down) this.tiers.reverse();
    for (var ti = 0; ti < this.tiers.length; ++ti) {
        var t = this.tiers[ti];
        if (t.dasSource.tierGroup) {
            var nt = groupedTiers[t.dasSource.tierGroup];
            if (nt) {
                if (down) nt.reverse();
                for (var nti = 0; nti < nt.length; ++nti) {
                    newTiers.push(nt[nti]);
                }groupedTiers[t.dasSource.tierGroup] = null;
            }
        } else {
            newTiers.push(t);
        }
    }
    if (down) newTiers.reverse();
    this.tiers.splice(0, this.tiers.length);
    for (var nti = 0; nti < newTiers.length; ++nti) {
        this.tiers.push(newTiers[nti]);
    }
};

Browser.prototype.arrangeTiers = function () {
    var arrangedTiers = [];
    var groupedTiers = {};

    for (var ti = 0; ti < this.tiers.length; ++ti) {
        var t = this.tiers[ti];
        if (t.pinned) {
            arrangedTiers.push(t);
            if (t.dasSource.tierGroup) {
                pusho(groupedTiers, t.dasSource.tierGroup, t);
            }
        }
    }
    for (var ti = 0; ti < this.tiers.length; ++ti) {
        var t = this.tiers[ti];
        if (!t.pinned) {
            arrangedTiers.push(t);
            if (t.dasSource.tierGroup) {
                pusho(groupedTiers, t.dasSource.tierGroup, t);
            }
        }
    }

    for (var g in groupedTiers) {
        var tiers = groupedTiers[g];
        var tierGroup = this.tierGroups[g];
        if (!tierGroup) {
            tierGroup = {
                element: makeElement('div', makeElement('span', g, { className: 'tier-group-label' }), { className: "tier-group" })
            };
            this.tierGroups[g] = tierGroup;
        }

        if (tierGroup.element.parentNode) tierGroup.element.parentNode.removeChild(tierGroup.element);

        var holder = tiers[0].pinned ? this.pinnedTierHolder : this.tierHolder;
        var min = 10000000,
            max = 0;
        for (var ti = 0; ti < tiers.length; ++ti) {
            var row = tiers[ti].row;
            min = Math.min(min, row.offsetTop);
            max = Math.max(max, row.offsetTop + row.offsetHeight);
        }
        tierGroup.element.style.top = min + 'px';
        tierGroup.element.style.left = '0px';
        tierGroup.element.style.height = max - min + 'px';
        holder.appendChild(tierGroup.element);
    }

    if (this.tierBackgroundColors) {
        for (var ti = 0; ti < arrangedTiers.length; ++ti) {
            var t = arrangedTiers[ti];
            t.setBackground(this.tierBackgroundColors[ti % this.tierBackgroundColors.length]);
            if (t.dasSource.tierGroup) t.label.style.left = '18px';else t.label.style.left = '2px';
            t.background = this.tierBackgroundColors[ti % this.tierBackgroundColors.length];
        }
    }
};

Browser.prototype.refresh = function () {
    this.retrieveTierData(this.tiers);
    this.drawOverlays();
    this.positionRuler();
};

var defaultTierRenderer = function defaultTierRenderer(status, tier) {
    console.log("DEPRECATED!");
};

Browser.prototype.retrieveTierData = function (tiers) {
    this.notifyLocation();
    var width = this.viewEnd - this.viewStart + 1;
    var minExtraW = this.minExtraWidth / this.scale | 0;
    var maxExtraW = this.maxExtraWidth / this.scale | 0;

    var newOrigin = (this.viewStart + this.viewEnd) / 2;
    var oh = newOrigin - this.origin;
    this.origin = newOrigin;
    this.scaleAtLastRedraw = this.scale;
    for (var t = 0; t < tiers.length; ++t) {
        var od = oh;
        if (tiers[t].originHaxx) {
            od += tiers[t].originHaxx;
        }
        tiers[t].originHaxx = od;
    }

    var scaledQuantRes = this.targetQuantRes / this.scale;

    var innerDrawnStart = Math.max(1, (this.viewStart | 0) - minExtraW);
    var innerDrawnEnd = Math.min((this.viewEnd | 0) + minExtraW, (this.currentSeqMax | 0) > 0 ? this.currentSeqMax | 0 : 1000000000);
    var outerDrawnStart = Math.max(1, (this.viewStart | 0) - maxExtraW);
    var outerDrawnEnd = Math.min((this.viewEnd | 0) + maxExtraW, (this.currentSeqMax | 0) > 0 ? this.currentSeqMax | 0 : 1000000000);

    if (!this.knownSpace || this.knownSpace.chr !== this.chr) {
        var ss = this.getSequenceSource();
        if (this.knownSpace) this.knownSpace.cancel();
        // known space is created based on the entire tier list, for future caching purposes, even if only a subset of the tiers are needed to be rendered now.
        this.knownSpace = new KnownSpace(this.tiers, this.chr, outerDrawnStart, outerDrawnEnd, scaledQuantRes, ss);
    }

    var seg = this.knownSpace.bestCacheOverlapping(this.chr, innerDrawnStart, innerDrawnEnd);
    if (seg && seg.min <= innerDrawnStart && seg.max >= innerDrawnEnd) {
        this.drawnStart = Math.max(seg.min, outerDrawnStart);
        this.drawnEnd = Math.min(seg.max, outerDrawnEnd);
    } else {
        this.drawnStart = outerDrawnStart;
        this.drawnEnd = outerDrawnEnd;
    }
    // send in the subset of tiers to retrieve.
    this.knownSpace.retrieveFeatures(tiers, this.chr, this.drawnStart, this.drawnEnd, scaledQuantRes);
};

function setSources(msh, availableSources, maybeMapping) {
    if (maybeMapping) {
        for (var s = 0; s < availableSources.length; ++s) {
            availableSources[s].mapping = maybeMapping;
        }
    }
    msh.set(availableSources);
}

Browser.prototype.queryRegistry = function (maybeMapping, tryCache) {
    if (!this.registry) return;

    var thisB = this;
    var coords, msh;
    if (maybeMapping) {
        coords = this.chains[maybeMapping].coords;
        if (!thisB.mappableSources[maybeMapping]) {
            thisB.mappableSources[maybeMapping] = new Observed();
        }
        msh = thisB.mappableSources[maybeMapping];
    } else {
        coords = this.coordSystem;
        msh = this.availableSources;
    }
    var cacheHash = hex_sha1(miniJSONify(coords));
    if (tryCache) {
        var cacheTime = localStorage['dalliance.registry.' + cacheHash + '.last_queried'];
        if (cacheTime) {
            try {
                setSources(msh, JSON.parse(localStorage['dalliance.registry.' + cacheHash + '.sources']), maybeMapping);
                var cacheAge = (Date.now() | 0) - (cacheTime | 0);
                if (cacheAge < 12 * 60 * 60 * 1000) {
                    return;
                }
            } catch (rex) {
                console.log('Bad registry cache: ' + rex);
            }
        }
    }

    var rurl = this.registry;
    if (rurl.indexOf('//') == 0) {
        var proto = window.location.protocol;
        if (proto != 'https:' && proto != 'http:') rurl = 'http:' + rurl;
    }
    new DASRegistry(rurl).sources(function (sources) {
        var availableSources = [];
        for (var s = 0; s < sources.length; ++s) {
            var source = sources[s];
            if (!source.coords || source.coords.length == 0) {
                continue;
            }
            var scoords = source.coords[0];
            if (scoords.taxon != coords.taxon || scoords.auth != coords.auth || scoords.version != coords.version) {
                continue;
            }
            availableSources.push(source);
        }

        localStorage['dalliance.registry.' + cacheHash + '.sources'] = JSON.stringify(availableSources);
        localStorage['dalliance.registry.' + cacheHash + '.last_queried'] = '' + Date.now();

        setSources(msh, availableSources, maybeMapping);
    }, function (error) {
        // msh.set(null);
    }, coords);
};

//
// Navigation
//

Browser.prototype.move = function (pos, soft) {
    var wid = this.viewEnd - this.viewStart;
    var nStart = this.viewStart - 1.0 * pos / this.scale;
    var nEnd = nStart + wid;

    if (!soft) {
        if (this.currentSeqMax > 0 && nEnd > this.currentSeqMax) {
            nEnd = this.currentSeqMax;
            nStart = this.viewEnd - wid;
        }
        if (nStart < 1) {
            nStart = 1;
            nEnd = nStart + wid;
        }
    }

    this.setLocation(null, nStart, nEnd, null, soft);
};

Browser.prototype.zoomStep = function (delta) {
    var oz = 1.0 * this.zoomSliderValue;
    var nz = oz + delta;
    if (nz < this.zoomMin) {
        nz = this.zoomMin;
    }
    if (nz > this.zoomMax) {
        nz = this.zoomMax;
    }

    if (nz != oz) {
        this.zoomSliderValue = nz; // FIXME maybe ought to set inside zoom!
        this.zoom(Math.exp(1.0 * nz / this.zoomExpt));
    }
};

Browser.prototype.zoom = function (factor) {
    this.zoomFactor = factor;
    var viewCenter = Math.round((this.viewStart + this.viewEnd) / 2.0) | 0;
    this.viewStart = viewCenter - this.zoomBase * this.zoomFactor / 2;
    this.viewEnd = viewCenter + this.zoomBase * this.zoomFactor / 2;
    if (this.currentSeqMax > 0 && this.viewEnd > this.currentSeqMax + 5) {
        var len = this.viewEnd - this.viewStart + 1;
        this.viewEnd = this.currentSeqMax;
        this.viewStart = this.viewEnd - len + 1;
    }
    if (this.viewStart < 1) {
        var len = this.viewEnd - this.viewStart + 1;
        this.viewStart = 1;
        this.viewEnd = this.viewStart + len - 1;
    }
    this.scale = this.featurePanelWidth / (this.viewEnd - this.viewStart);
    var width = this.viewEnd - this.viewStart + 1;

    var scaleRat = this.scale / this.scaleAtLastRedraw;

    this.notifyLocation();
    this.refresh();
};

Browser.prototype.spaceCheck = function (dontRefresh) {
    if (!this.knownSpace || this.knownSpace.chr !== this.chr) {
        this.refresh();
        return;
    }

    var width = (this.viewEnd - this.viewStart | 0) + 1;
    var minExtraW = this.minExtraWidth / this.scale | 0;
    var maxExtraW = this.maxExtraWidth / this.scale | 0;

    if ((this.drawnStart | 0) > Math.max(1, (this.viewStart | 0) - minExtraW | 0) || (this.drawnEnd | 0) < Math.min((this.viewEnd | 0) + minExtraW, (this.currentSeqMax | 0) > 0 ? this.currentSeqMax | 0 : 1000000000)) {
        this.refresh();
    }
};

Browser.prototype.resizeViewer = function (skipRefresh) {
    var width = this.tierHolder.getBoundingClientRect().width | 0;
    if (width == 0) return;

    var oldFPW = Math.max(this.featurePanelWidth, 300); // Can get silly values stored
    // when the browser is hidden.
    this.featurePanelWidth = width | 0;

    if (oldFPW != this.featurePanelWidth) {
        this.zoomMax = this.zoomExpt * Math.log(this.maxViewWidth / this.zoomBase);
        this.zoomMin = this.zoomExpt * Math.log(this.featurePanelWidth / this.maxPixelsPerBase / this.zoomBase); // FIXME hard-coded minimum.
        this.zoomSliderValue = this.zoomExpt * Math.log((this.viewEnd - this.viewStart + 1) / this.zoomBase);

        var viewWidth = this.viewEnd - this.viewStart;
        var nve = this.viewStart + viewWidth * this.featurePanelWidth / oldFPW;

        this.viewEnd = nve;

        var wid = this.viewEnd - this.viewStart + 1;
        if (this.currentSeqMax > 0 && this.viewEnd > this.currentSeqMax) {
            this.viewEnd = this.currentSeqMax;
            this.viewStart = this.viewEnd - wid + 1;
        }
        if (this.viewStart < 1) {
            this.viewStart = 1;
            this.viewEnd = this.viewStart + wid - 1;
        }

        this.positionRuler();

        if (!skipRefresh) {
            this.spaceCheck();
        }
        this.notifyLocation();
    }

    if (this.fullScreen) {
        this.setFullScreenHeight();
    }
};

Browser.prototype.setFullScreenHeight = function () {
    var rest = document.body.offsetHeight - this.browserHolder.offsetHeight;
    this.browserHolder.style.maxHeight = Math.max(300, window.innerHeight - rest - 20) + 'px';
};

Browser.prototype.addTier = function (conf) {
    var thisB = this;
    conf = shallowCopy(conf);
    conf.disabled = false;

    return this.makeTier(conf).then(function (tier) {
        thisB.refreshTier(tier);
        thisB.markSelectedTiers();
        thisB.positionRuler();
        thisB.notifyTier("added", tier);
        return tier;
    });
};

Browser.prototype.removeTier = function (conf, force) {
    var target = -1;

    if (typeof conf.index !== 'undefined' && conf.index >= 0 && conf.index < this.tiers.length) {
        target = conf.index;
    } else {
        for (var ti = 0; ti < this.tiers.length; ++ti) {
            var ts = this.tiers[ti].dasSource;

            if (sourcesAreEqual(conf, ts)) {
                target = ti;break;
            }
        }
    }

    if (target < 0) {
        throw "Couldn't find requested tier";
    }

    var targetTier = this.tiers[target];
    this.tiers.splice(target, 1);

    var nst = [];
    for (var sti = 0; sti < this.selectedTiers.length; ++sti) {
        var st = this.selectedTiers[sti];
        if (st < target) {
            nst.push(st);
        } else if (st > target) {
            nst.push(st - 1);
        }
    }
    this.selectedTiers = nst;
    this.markSelectedTiers();

    targetTier.destroy();
    if (this.knownSpace) {
        this.knownSpace.featureCache[targetTier] = null;
    }

    this.reorderTiers();
    this.notifyTier("removed", targetTier);
};

Browser.prototype.removeAllTiers = function () {
    var thisB = this;
    this.selectedTiers = [];
    this.markSelectedTiers();
    this.tiers.forEach(function (targetTier) {
        targetTier.destroy();
        if (thisB.knownSpace) {
            thisB.knownSpace.featureCache[targetTier] = null;
        }
    });
    this.tiers.length = 0;
    this.reorderTiers();
    this.notifyTier("removedAll", null);
};

Browser.prototype.getSequenceSource = function () {
    if (this._sequenceSource === undefined) this._sequenceSource = this._getSequenceSource();
    return this._sequenceSource;
};

Browser.prototype._getSequenceSource = function () {
    for (var ti = 0; ti < this.tiers.length; ++ti) {
        if (this.tiers[ti].sequenceSource) {
            return this.tiers[ti].sequenceSource;
        }
    }

    for (var si = 0; si < this.defaultSources.length; ++si) {
        var s = this.defaultSources[si];
        if (s.provides_entrypoints || s.tier_type == 'sequence' || s.twoBitURI || s.twoBitBlob) {
            if (s.twoBitURI || s.twoBitBlob) {
                return new TwoBitSequenceSource(s);
            } else if (s.ensemblURI) {
                return new EnsemblSequenceSource(s);
            } else {
                return new DASSequenceSource(s);
            }
        }
    }
};

Browser.prototype.setLocation = function (newChr, newMin, newMax, callback, soft) {
    if (typeof newMin !== 'number') {
        throw Error('minimum must be a number (got ' + JSON.stringify(newMin) + ')');
    }
    if (typeof newMax !== 'number') {
        throw Error('maximum must be a number (got ' + JSON.stringify(newMax) + ')');
    }

    if (newMin > newMax) {
        var oldNewMin = newMin;
        newMin = newMax;
        newMax = oldNewMin;
    } else if (newMin === newMax) {
        newMax += 1;
    }

    if (!callback) {
        callback = function callback(err) {
            if (err) {
                throw err;
            }
        };
    }
    var thisB = this;

    if ((!newChr || newChr == this.chr) && this.currentSeqMax > 0) {
        return this._setLocation(null, newMin, newMax, null, callback, soft);
    } else {
        var ss = this.getSequenceSource();
        if (!ss) {
            return callback('Need a sequence source');
        }

        var findChr = newChr || this.chr;
        ss.getSeqInfo(findChr, function (si) {
            if (!si) {
                var altChr;
                if (findChr.indexOf('chr') == 0) {
                    altChr = findChr.substr(3);
                } else {
                    altChr = 'chr' + findChr;
                }
                ss.getSeqInfo(altChr, function (si2) {
                    if (!si2 && newChr) {
                        return callback("Couldn't find sequence '" + newChr + "'");
                    } else if (!si2) {
                        return thisB._setLocation(null, newMin, newMax, null, callback, soft);
                    } else {
                        return thisB._setLocation(altChr, newMin, newMax, si2, callback, soft);
                    }
                });
            } else {
                return thisB._setLocation(newChr, newMin, newMax, si, callback, soft);
            }
        });
    }
};

Browser.prototype._setLocation = function (newChr, newMin, newMax, newChrInfo, callback, soft) {
    var chrChanged = false;
    if (newChr) {
        if (newChr.indexOf('chr') == 0) newChr = newChr.substring(3);

        if (this.chr != newChr) chrChanged = true;
        this.chr = newChr;
        this.currentSeqMax = newChrInfo.length;
    }

    newMin = parseFloat(newMin);newMax = parseFloat(newMax);

    var newWidth = Math.max(10, newMax - newMin + 1);

    if (!soft) {
        var csm = this.currentSeqMax;
        if (csm <= 0) csm = 1000000000000;
        if (newMin < 1) {
            newMin = 1;newMax = newMin + newWidth - 1;
        }
        if (newMax > csm) {
            newMax = csm;
            newMin = Math.max(1, newMax - newWidth + 1);
        }
    }

    this.viewStart = newMin;
    this.viewEnd = newMax;
    var newScale = Math.max(this.featurePanelWidth || this.offscreenInitWidth, 50) / (this.viewEnd - this.viewStart);
    var oldScale = this.scale;
    var scaleChanged = Math.abs(newScale - oldScale) > 0.000001;
    this.scale = newScale;

    var newZS, oldZS;
    oldZS = this.zoomSliderValue;
    this.zoomSliderValue = newZS = this.zoomExpt * Math.log((this.viewEnd - this.viewStart + 1) / this.zoomBase);

    if (scaleChanged || chrChanged) {
        for (var i = 0; i < this.tiers.length; ++i) {
            this.tiers[i].viewportHolder.style.left = '5000px';
            this.tiers[i].overlay.style.left = '5000px';
        }

        this.refresh();
        // var self = this;
        // this.tiers.forEach(function(tier) {self.refreshTier(tier);});
        // this.refreshTier

        if (this.savedZoom) {
            newZS -= this.zoomMin;
            oldZS -= this.zoomMin;
            var difToActive = newZS - oldZS;
            var difToSaved = newZS - this.savedZoom;
            if (Math.abs(difToActive) > Math.abs(difToSaved)) {
                this.isSnapZooming = !this.isSnapZooming;
                this.savedZoom = oldZS;
            }
        } else {
            this.isSnapZooming = false;
            this.savedZoom = null;
        }
    } else {
        var viewCenter = (this.viewStart + this.viewEnd) / 2;

        for (var i = 0; i < this.tiers.length; ++i) {
            var offset = (this.viewStart - this.tiers[i].norigin) * this.scale;
            this.tiers[i].viewportHolder.style.left = '' + ((-offset | 0) - 1000) + 'px';
            this.tiers[i].drawOverlay();
        }
    }

    this.notifyLocation();

    this.spaceCheck();
    if (this.instrumentActivity) this.activityStartTime = Date.now() | 0;
    return callback();
};

Browser.prototype.setCenterLocation = function (newChr, newCenterLoc) {
    var halfWidth = (this.viewEnd - this.viewStart) / 2,
        newMin = newCenterLoc - halfWidth,
        newMax = newCenterLoc + halfWidth;
    this.setLocation(newChr, newMin, newMax);
};

Browser.prototype.pingActivity = function () {
    if (!this.instrumentActivity || !this.activityStartTime) return;

    var activity = 0;
    for (var ti = 0; ti < this.tiers.length; ++ti) {
        if (this.tiers[ti].loaderButton.style.display !== 'none') ++activity;
    }

    if (activity == 0) {
        var now = Date.now() | 0;
        console.log('Loading took ' + (now - this.activityStartTime) + 'ms');
        this.activityStartTime = null;
    }
};

Browser.prototype.addInitListener = function (handler) {
    this.initListeners.push(handler);
};

Browser.prototype.addFeatureListener = function (handler, opts) {
    opts = opts || {};
    this.featureListeners.push(handler);
};

Browser.prototype.removeFeatureListener = function (handler, opts) {
    var idx = arrayIndexOf(this.featureListeners, handler);
    if (idx >= 0) {
        this.featureListeners.splice(idx, 1);
    }
};

Browser.prototype.notifyFeature = function (ev, feature, hit, tier) {
    for (var fli = 0; fli < this.featureListeners.length; ++fli) {
        try {
            if (this.featureListeners[fli](ev, feature, hit, tier)) return;
        } catch (ex) {
            console.log(ex.stack);
        }
    }
};

Browser.prototype.addFeatureHoverListener = function (handler, opts) {
    opts = opts || {};
    this.featureHoverListeners.push(handler);
};

Browser.prototype.removeFeatureHoverListener = function (handler, opts) {
    var idx = arrayIndexOf(this.featureHoverListeners, handler);
    if (idx >= 0) {
        this.featureHoverListeners.splice(idx, 1);
    }
};

Browser.prototype.notifyFeatureHover = function (ev, feature, hit, tier) {
    for (var fli = 0; fli < this.featureHoverListeners.length; ++fli) {
        try {
            this.featureHoverListeners[fli](ev, feature, hit, tier);
        } catch (ex) {
            console.log(ex.stack);
        }
    }
};

Browser.prototype.addViewListener = function (handler, opts) {
    opts = opts || {};
    this.viewListeners.push(handler);
};

Browser.prototype.removeViewListener = function (handler, opts) {
    var idx = arrayIndexOf(this.viewListeners, handler);
    if (idx >= 0) {
        this.viewListeners.splice(idx, 1);
    }
};

Browser.prototype.notifyLocation = function () {
    var nvs = Math.max(1, this.viewStart | 0);
    var nve = this.viewEnd | 0;
    if (this.currentSeqMax > 0 && nve > this.currentSeqMax) nve = this.currentSeqMax;

    for (var lli = 0; lli < this.viewListeners.length; ++lli) {
        try {
            this.viewListeners[lli](this.chr, nvs, nve, this.zoomSliderValue, { current: this.zoomSliderValue,
                alternate: this.savedZoom + this.zoomMin || this.zoomMin,
                isSnapZooming: this.isSnapZooming,
                min: this.zoomMin,
                max: this.zoomMax }, this.viewStart, this.viewEnd);
        } catch (ex) {
            console.log(ex.stack);
        }
    }
};

Browser.prototype.addTierListener = function (handler) {
    this.tierListeners.push(handler);
};

Browser.prototype.removeTierListener = function (handler) {
    var idx = arrayIndexOf(this.tierListeners, handler);
    if (idx >= 0) {
        this.tierListeners.splice(idx, 1);
    }
};

Browser.prototype.notifyTier = function (status, tier) {
    for (var tli = 0; tli < this.tierListeners.length; ++tli) {
        try {
            this.tierListeners[tli](status, tier);
        } catch (ex) {
            console.log(ex.stack);
        }
    }
};

Browser.prototype.addRegionSelectListener = function (handler) {
    this.regionSelectListeners.push(handler);
};

Browser.prototype.removeRegionSelectListener = function (handler) {
    var idx = arrayIndexOf(this.regionSelectListeners, handler);
    if (idx >= 0) {
        this.regionSelectListeners.splice(idx, 1);
    }
};

Browser.prototype.notifyRegionSelect = function (chr, min, max) {
    for (var rli = 0; rli < this.regionSelectListeners.length; ++rli) {
        try {
            this.regionSelectListeners[rli](chr, min, max);
        } catch (ex) {
            console.log(ex.stack);
        }
    }
};

Browser.prototype.highlightRegion = function (chr, min, max) {
    var thisB = this;

    if (chr == this.chr) {
        return this._highlightRegion(chr, min, max);
    }

    var ss = this.getSequenceSource();
    if (!ss) {
        throw 'Need a sequence source';
    }

    ss.getSeqInfo(chr, function (si) {
        if (!si) {
            var altChr;
            if (chr.indexOf('chr') == 0) {
                altChr = chr.substr(3);
            } else {
                altChr = 'chr' + chr;
            }
            ss.getSeqInfo(altChr, function (si2) {
                if (!si2) {
                    // Fail silently.
                } else {
                    return thisB._highlightRegion(altChr, min, max);
                }
            });
        } else {
            return thisB._highlightRegion(chr, min, max);
        }
    });
};

Browser.prototype._highlightRegion = function (chr, min, max) {
    for (var hi = 0; hi < this.highlights.length; ++hi) {
        var h = this.highlights[hi];
        if (h.chr == chr && h.min == min && h.max == max) return;
    }

    this.highlights.push(new Region(chr, min, max));
    var visStart = this.viewStart - 1000 / this.scale;
    var visEnd = this.viewEnd + 1000 / this.scale;
    if ((chr == this.chr || chr == 'chr' + this.chr) && min < visEnd && max > visStart) {
        this.drawOverlays();
    }

    this.notifyLocation();
};

Browser.prototype.clearHighlights = function () {
    this.highlights = [];
    this.drawOverlays();
    this.notifyLocation();
};

Browser.prototype.drawOverlays = function () {
    for (var ti = 0; ti < this.tiers.length; ++ti) {
        this.tiers[ti].drawOverlay();
    }
};

Browser.prototype.featuresInRegion = function (chr, min, max) {
    var features = [];
    if (chr !== this.chr) {
        return [];
    }

    for (var ti = 0; ti < this.tiers.length; ++ti) {
        var fl = this.tiers[ti].currentFeatures || [];
        for (var fi = 0; fi < fl.length; ++fi) {
            var f = fl[fi];
            if (f.min <= max && f.max >= min) {
                features.push(f);
            }
        }
    }
    return features;
};

Browser.prototype.getSelectedTier = function () {
    if (this.selectedTiers.length > 0) return this.selectedTiers[0];else return -1;
};

Browser.prototype.setSelectedTier = function (t) {
    if (t == null) {
        this.selectedTiers = [];
    } else {
        this.selectedTiers = [t];
    }
    this.markSelectedTiers();
    this.notifyTierSelection();
};

Browser.prototype.markSelectedTiers = function () {
    for (var ti = 0; ti < this.tiers.length; ++ti) {
        var button = this.tiers[ti].nameButton;

        if (this.selectedTiers.indexOf(ti) >= 0) {
            button.classList.add('active');
        } else {
            button.classList.remove('active');
        }
    }
    if (this.selectedTiers.length > 0) {
        var browserMid = this.browserHolder.offsetTop + this.browserHolder.offsetHeight / 2;
        if (browserMid > document.body.scrollTop && browserMid + 100 < document.body.scrollTop + window.innerHeight) this.browserHolder.focus();
    }
};

Browser.prototype.addTierSelectionListener = function (handler) {
    this.tierSelectionListeners.push(handler);
};

Browser.prototype.removeTierSelectionListener = function (handler) {
    var idx = arrayIndexOf(this.tierSelectionListeners, handler);
    if (idx >= 0) {
        this.tierSelectionListeners.splice(idx, 1);
    }
};

Browser.prototype.notifyTierSelection = function () {
    for (var fli = 0; fli < this.tierSelectionListeners.length; ++fli) {
        try {
            this.tierSelectionListeners[fli](this.selectedTiers);
        } catch (ex) {
            console.log(ex.stack);
        }
    }
};

Browser.prototype.addTierSelectionWrapListener = function (f) {
    this.tierSelectionWrapListeners.push(f);
};

Browser.prototype.removeTierSelectionWrapListener = function (handler) {
    var idx = arrayIndexOf(this.tierSelectionWrapListeners, handler);
    if (idx >= 0) {
        this.tierSelectionWrapListeners.splice(idx, 1);
    }
};

Browser.prototype.notifyTierSelectionWrap = function (i) {
    for (var fli = 0; fli < this.tierSelectionWrapListeners.length; ++fli) {
        try {
            this.tierSelectionWrapListeners[fli](i);
        } catch (ex) {
            console.log(ex.stack);
        }
    }
};

Browser.prototype.positionRuler = function () {
    var display = 'none';
    var left = '';
    var right = '';

    if (this.rulerLocation == 'center') {
        display = 'block';
        left = '' + (this.featurePanelWidth / 2 | 0) + 'px';
    } else if (this.rulerLocation == 'left') {
        display = 'block';
        left = '0px';
    } else if (this.rulerLocation == 'right') {
        display = 'block';
        right = '0px';
    } else {
        display = 'none';
    }

    this.ruler.style.display = display;
    this.ruler.style.left = left;
    this.ruler.style.right = right;

    if (this.singleBaseHighlight) {
        this.ruler2.style.display = 'block';
        this.ruler2.style.borderWidth = '1px';
        if (this.scale < 1) {
            this.ruler2.style.width = '0px';
            this.ruler2.style.borderRightWidth = '0px';
        } else {
            this.ruler2.style.width = this.scale + 'px';
            this.ruler2.style.borderRightWidth = '1px';
        }
        // Position accompanying single base location text
        this.locSingleBase.style.visibility = 'visible';
        var centreOffset = this.featurePanelWidth / 2 - this.locSingleBase.offsetWidth / 2 + this.ruler2.offsetWidth / 2;
        this.locSingleBase.style.left = '' + (centreOffset | 0) + 'px';
    } else {
        this.locSingleBase.style.visibility = 'hidden';
        this.ruler2.style.width = '1px';
        this.ruler2.style.borderWidth = '0px';
        this.ruler2.style.display = this.rulerLocation == 'center' ? 'none' : 'block';
    }

    this.ruler2.style.left = '' + (this.featurePanelWidth / 2 | 0) + 'px';

    for (var ti = 0; ti < this.tiers.length; ++ti) {
        var tier = this.tiers[ti];
        var q = tier.quantOverlay;

        var quant;
        if (tier.subtiers && tier.subtiers.length > 0) quant = tier.subtiers[0].quant;

        if (q) {
            q.style.display = quant ? display : 'none';
            q.style.left = left;
            q.style.right = right;
        }
    }
};

Browser.prototype.featureDoubleClick = function (hit, rx, ry) {
    if (!hit || hit.length == 0) return;

    var f = hit[hit.length - 1];

    if (!f.min || !f.max) {
        return;
    }

    var fstart = ((f.min | 0) - (this.viewStart | 0)) * this.scale;
    var fwidth = (f.max - f.min + 1) * this.scale;

    var newMid = ((f.min | 0) + (f.max | 0)) / 2;
    if (fwidth > 10) {
        var frac = 1.0 * (rx - fstart) / fwidth;
        if (frac < 0.3) {
            newMid = f.min | 0;
        } else if (frac > 0.7) {
            newMid = (f.max | 0) + 1;
        }
    }

    var width = this.viewEnd - this.viewStart;
    this.setLocation(null, newMid - width / 2, newMid + width / 2);
};

Browser.prototype.zoomForScale = function (scale) {
    var ssScale;
    if (scale > this.highZoomThreshold) {
        ssScale = 'high';
    } else if (scale > this.mediumZoomThreshold) {
        ssScale = 'medium';
    } else {
        ssScale = 'low';
    }
    return ssScale;
};

Browser.prototype.zoomForCurrentScale = function () {
    return this.zoomForScale(this.scale);
};

Browser.prototype.updateHeight = function () {
    var tierTotal = 0;
    for (var ti = 0; ti < this.tiers.length; ++ti) {
        tierTotal += this.tiers[ti].currentHeight || 30;
    }this.ruler.style.height = '' + tierTotal + 'px';
    this.ruler2.style.height = '' + tierTotal + 'px';
    this.browserHolder.style.display = 'block';
    this.browserHolder.style.display = '-webkit-flex';
    this.browserHolder.style.display = 'flex';
    // this.svgHolder.style.maxHeight = '' + Math.max(tierTotal, 500) + 'px';
};

Browser.prototype.scrollArrowKey = function (ev, dir) {
    if (this.reverseKeyScrolling) dir = -dir;

    if (ev.ctrlKey || ev.metaKey) {
        var fedge = false;
        if (ev.shiftKey) {
            fedge = true;
        }

        this.leap(dir, fedge);
    } else if (this.scale > 1) {
        // per-base scrolling mode, tries to perfectly center.
        var mid = (this.viewStart + this.viewEnd) / 2;
        var err = mid - Math.round(mid);
        var n = 1;
        if (ev.shiftKey) n *= 10;
        if (dir > 0) {
            n = -n;
            n -= err;
            if (err > 0) n += 1;
        } else {
            n -= err;
            if (err < 0) n -= 1;
        }
        this.setLocation(null, this.viewStart + n, this.viewEnd + n);
    } else {
        this.move(ev.shiftKey ? 100 * dir : 25 * dir);
    }
};

Browser.prototype.leap = function (dir, fedge) {
    var thisB = this;
    var pos = (thisB.viewStart + thisB.viewEnd + 1) / 2 | 0;
    if (dir > 0 && thisB.viewStart <= 1) {
        pos -= 100000000;
    } else if (dir < 0 && thisB.viewEnd >= thisB.currentSeqMax) {
        pos += 100000000;
    }

    var st = thisB.getSelectedTier();
    if (st < 0) return;
    var tier = thisB.tiers[st];

    if (tier && (tier.featureSource && this.sourceAdapterIsCapable(tier.featureSource, 'quantLeap') && typeof tier.quantLeapThreshold == 'number' || tier.featureSource && this.sourceAdapterIsCapable(tier.featureSource, 'leap'))) {
        tier.findNextFeature(thisB.chr, pos, -dir, fedge, function (nxt) {
            if (nxt) {
                var nmin = nxt.min;
                var nmax = nxt.max;
                if (fedge) {
                    if (dir > 0) {
                        if (nmin > pos + 1) {
                            nmax = nmin;
                        } else {
                            nmax++;
                            nmin = nmax;
                        }
                    } else {
                        if (nmax < pos - 1) {
                            nmax++;
                            nmin = nmax;
                        } else {
                            nmax = nmin;
                        }
                    }
                }
                var wid = thisB.viewEnd - thisB.viewStart + 1;
                if (parseFloat(wid / 2) == parseInt(wid / 2)) {
                    wid--;
                }
                var newStart = (nmin + nmax - wid) / 2 + 1;
                var newEnd = newStart + wid - 1;
                var pos2 = pos;
                thisB.setLocation(nxt.segment, newStart, newEnd);
            } else {
                alert('no next feature'); // FIXME better reporting would be nice!
            }
        });
    } else {
        this.move(100 * dir);
    }
};

function glyphLookup(glyphs, rx, ry, matches) {
    matches = matches || [];

    for (var gi = glyphs.length - 1; gi >= 0; --gi) {
        var g = glyphs[gi];
        if (!g.notSelectable && g.min() <= rx && g.max() >= rx) {
            if (g.minY) {
                if (ry < g.minY() || ry > g.maxY()) continue;
            }

            if (g.feature) {
                matches.push(g.feature);
            } else if (g.group) {
                matches.push(g.group);
            }

            if (g.glyphs) {
                return glyphLookup(g.glyphs, rx, ry, matches);
            } else if (g.glyph) {
                return glyphLookup([g.glyph], rx, ry, matches);
            } else {
                return matches;
            }
        }
    }
    return matches;
}

Browser.prototype.nameForCoordSystem = function (cs) {
    var primary = null,
        ucsc = null;
    if (this.assemblyNamePrimary) {
        primary = '' + cs.auth;
        if (typeof cs.version !== 'undefined') primary += cs.version;
    }
    if (this.assemblyNameUcsc) {
        ucsc = cs.ucscName;
    }
    if (primary != null && ucsc != null) return primary + '/' + ucsc;else return primary || ucsc || 'unknown';
};

Browser.prototype.makeLoader = function (size) {
    size = size || 16;
    var retina = window.devicePixelRatio > 1;
    if (size < 20) {
        return makeElement('img', null, { src: this.resolveURL('$$img/spinner_' + (retina ? 16 : 32) + '.gif'), width: '16', height: '16' });
    } else {
        return makeElement('img', null, { src: this.resolveURL('$$img/spinner_' + (retina ? 24 : 48) + '.gif'), width: '24', height: '24' });
    }
};

Browser.prototype.canFetchPlainHTTP = function () {
    var self = this;
    if (!this._plainHTTPPromise) {
        var worker = this.getWorker();
        if (worker) {
            this._plainHTTPPromise = new Promise(function (resolve, reject) {
                worker.postCommand({ command: 'textxhr',
                    uri: self.httpCanaryURL }, function (result, err) {
                    if (result) {
                        resolve(true);
                    } else {
                        resolve(false);
                    }
                });
            });
        } else {
            this._plainHTTPPromise = new Promise(function (resolve, reject) {
                textXHR(self.httpCanaryURL, function (result, err) {
                    if (result) {
                        resolve(true);
                    } else {
                        resolve(false);
                    }
                }, { timeout: 2000 });
            });
        }
    }
    return this._plainHTTPPromise;
};

Browser.prototype.getWorker = function () {
    if (!this.useFetchWorkers || !this.fetchWorkers || this.fetchWorkers.length == 0) return null;

    if (this.nextWorker >= this.fetchWorkers.length) this.nextWorker = 0;
    return this.fetchWorkers[this.nextWorker++];
};

Browser.prototype.registerResolver = function (resolver) {
    var id = 'res' + ++this.resolverSeed;
    this.resolvers[id] = resolver;
    return id;
};

function FetchWorker(browser, worker) {
    var thisB = this;
    this.tagSeed = 0;
    this.callbacks = {};
    this.browser = browser;
    this.worker = worker;

    this.worker.onmessage = function (ev) {
        var data = ev.data;

        if (!data.cmd) {
            var cb = thisB.callbacks[data.tag];
            if (cb) {
                cb(data.result, data.error);
                delete thisB.callbacks[data.tag];
            }
        } else if (data.cmd == 'resolve') {
            var resolver = thisB.browser.resolvers[data.resolver];
            if (resolver) {
                resolver(data.url).then(function (url) {
                    thisB.worker.postMessage({
                        tag: data.tag,
                        url: url
                    });
                }).catch(function (err) {
                    console.log(err);
                    thisB.worker.postMessage({
                        tag: data.tag,
                        err: err.toString()
                    });
                });
            } else {
                console.log('No resolver ' + data.resolver);
            }
        } else {
            console.log('Bad worker callback ' + data.cmd);
        }
    };
}

function makeFetchWorker(browser) {
    var wurl = browser.resolveURL(browser.workerPath);
    if (wurl.indexOf('//') == 0) {
        var proto = window.location.protocol;
        if (proto == 'https:') wurl = 'https:' + wurl;else wurl = 'http:' + wurl;
    }

    var wscript = 'importScripts("' + wurl + '?version=' + VERSION + '");';
    var wblob = new Blob([wscript], { type: 'application/javascript' });

    return new Promise(function (resolve, reject) {
        var worker = new Worker(URL.createObjectURL(wblob));

        worker.onmessage = function (ev) {
            if (ev.data.tag === 'init') {
                console.log('Worker initialized');
                resolve(new FetchWorker(browser, worker));
            }
        };

        worker.onerror = function (ev) {
            reject(ev.message);
        };
    });
}

FetchWorker.prototype.postCommand = function (cmd, callback, transfer) {
    var tag = 'x' + ++this.tagSeed;
    cmd.tag = tag;
    this.callbacks[tag] = callback;
    this.worker.postMessage(cmd, transfer);
};

FetchWorker.prototype.terminate = function () {
    this.worker.terminate();
};

if (typeof module !== 'undefined') {
    module.exports = {
        Browser: Browser
    };

    // Required because they add stuff to Browser.prototype
    require('./browser-ui');
    require('./track-adder');
    require('./feature-popup');
    require('./tier-actions');
    require('./domui');
    require('./search');

    var sa = require('./sourceadapters');
    var TwoBitSequenceSource = sa.TwoBitSequenceSource;
    var EnsemblSequenceSource = sa.EnsemblSequenceSource;
    var DASSequenceSource = sa.DASSequenceSource;

    var KnownSpace = require('./kspace').KnownSpace;

    var DASRegistry = require('./das').DASRegistry;
}

function SourceCache() {
    this.sourcesByURI = {};
}

SourceCache.prototype.get = function (conf) {
    var scb = this.sourcesByURI[sourceDataURI(conf)];
    if (scb) {
        for (var si = 0; si < scb.configs.length; ++si) {
            if (sourcesAreEqualModuloStyle(scb.configs[si], conf)) {
                return scb.sources[si];
            }
        }
    }
};

SourceCache.prototype.put = function (conf, source) {
    var uri = sourceDataURI(conf);
    var scb = this.sourcesByURI[uri];
    if (!scb) {
        scb = { configs: [], sources: [] };
        this.sourcesByURI[uri] = scb;
    }
    scb.configs.push(conf);
    scb.sources.push(source);
};

},{"./browser-ui":5,"./chainset":7,"./das":10,"./default-renderer":11,"./domui":12,"./dummy-renderer":13,"./feature-popup":21,"./kspace":25,"./multi-renderer":28,"./numformats":29,"./search":34,"./sha1":37,"./sourceadapters":38,"./sourcecompare":39,"./sub-renderer":42,"./thub":48,"./tier":51,"./tier-actions":49,"./track-adder":52,"./utils":55,"./version":57,"es6-promise":59}],7:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2010
//
// chainset.js: liftover support
//

"use strict";

if (typeof require !== 'undefined') {
    var das = require('./das');
    var DASSource = das.DASSource;
    var DASSegment = das.DASSegment;

    var utils = require('./utils');
    var pusho = utils.pusho;
    var shallowCopy = utils.shallowCopy;

    var parseCigar = require('./cigar').parseCigar;

    var bin = require('./bin');
    var URLFetchable = bin.URLFetchable;

    var bbi = require('./bigwig');
    var makeBwg = bbi.makeBwg;

    var Promise = require('es6-promise').Promise;
}

function Chainset(conf, srcTag, destTag, coords) {
    if (typeof conf == 'string') {
        this.uri = conf;
        this.srcTag = srcTag;
        this.destTag = destTag;
        this.coords = coords;
    } else {
        this.uri = conf.uri;
        this.srcTag = conf.srcTag;
        this.destTag = conf.destTag;
        this.coords = shallowCopy(conf.coords);
        this.type = conf.type;
        this.credentials = conf.credentials;
    }

    this.chainsBySrc = {};
    this.chainsByDest = {};
    this.postFetchQueues = {};
    this.fetchedTiles = {};
    this.granularity = 1000000; // size in bases of tile to fetch

    if (this.type == 'bigbed') {
        this.chainFetcher = new BBIChainFetcher(this.uri, this.credentials);
    } else if (this.type == 'alias') {
        this.chainFetcher = new AliasChainFetcher(conf);
    } else {
        this.chainFetcher = new DASChainFetcher(this.uri, this.srcTag, this.destTag);
    }
};

Chainset.prototype.exportConfig = function () {
    return {
        uri: this.uri,
        srcTag: this.srcTag,
        destTag: this.destTag,
        coords: this.coords,
        type: this.type,
        credentials: this.credentials
    };
};

Chainset.prototype.mapPoint = function (chr, pos) {
    var chains = this.chainsBySrc[chr] || [];
    for (var ci = 0; ci < chains.length; ++ci) {
        var c = chains[ci];
        if (pos >= c.srcMin && pos <= c.srcMax) {
            var cpos;
            if (c.srcOri == '-') {
                cpos = c.srcMax - pos;
            } else {
                cpos = pos - c.srcMin;
            }
            var blocks = c.blocks;
            for (var bi = 0; bi < blocks.length; ++bi) {
                var b = blocks[bi];
                var bSrc = b[0];
                var bDest = b[1];
                var bSize = b[2];
                if (cpos >= bSrc && cpos <= bSrc + bSize) {
                    var apos = cpos - bSrc;

                    var dpos;
                    if (c.destOri == '-') {
                        dpos = c.destMax - bDest - apos;
                    } else {
                        dpos = apos + bDest + c.destMin;
                    }
                    return { seq: c.destChr, pos: dpos, flipped: c.srcOri != c.destOri };
                }
            }
        }
    }
    return null;
};

Chainset.prototype.mapSegment = function (chr, min, max) {
    var chains = this.chainsBySrc[chr] || [];
    var mappings = [];
    for (var ci = 0; ci < chains.length; ++ci) {
        var c = chains[ci];
        if (max >= c.srcMin && min <= c.srcMax) {
            var cmin, cmax;
            if (c.srcOri == '-') {
                cmin = c.srcMax - max;
                cmax = c.srcMax - min;
            } else {
                cmin = min - c.srcMin;
                cmax = max - c.srcMin;
            }
            var blocks = c.blocks;
            for (var bi = 0; bi < blocks.length; ++bi) {
                var b = blocks[bi];
                var bSrc = b[0];
                var bDest = b[1];
                var bSize = b[2];
                if (cmax >= bSrc && cmin <= bSrc + bSize) {
                    var m = {
                        segment: c.destChr,
                        flipped: c.srcOri == '-' ^ c.destOri == '-' };

                    if (c.destOri == '-') {
                        if (cmin >= bSrc) {
                            m.max = c.destMax - bDest - cmin + bSrc;
                        } else {
                            m.max = c.destMax - bDest;
                            m.partialMax = bSrc - cmin;
                        }
                        if (cmax <= bSrc + bSize) {
                            m.min = c.destMax - bDest - cmax + bSrc;
                        } else {
                            m.min = c.destMax - bDest - bSize;
                            m.partialMin = cmax - bSrc - bSize;
                        }
                    } else {
                        if (cmin >= bSrc) {
                            m.min = c.destMin + bDest + cmin - bSrc;
                        } else {
                            m.min = c.destMin + bDest;
                            m.partialMin = bSrc - cmin;
                        }
                        if (cmax <= bSrc + bSize) {
                            m.max = c.destMin + bDest + cmax - bSrc;
                        } else {
                            m.max = c.destMin + bDest + bSize;
                            m.partialMax = cmax - bSrc - bSize;
                        }
                    }
                    mappings.push(m);
                }
            }
        }
    }
    return mappings;
};

Chainset.prototype.unmapPoint = function (chr, pos) {
    var chains = this.chainsByDest[chr] || [];
    for (var ci = 0; ci < chains.length; ++ci) {
        var c = chains[ci];
        if (pos >= c.destMin && pos <= c.destMax) {
            var cpos;
            if (c.srcOri == '-') {
                cpos = c.destMax - pos;
            } else {
                cpos = pos - c.destMin;
            }

            var blocks = c.blocks;
            for (var bi = 0; bi < blocks.length; ++bi) {
                var b = blocks[bi];
                var bSrc = b[0];
                var bDest = b[1];
                var bSize = b[2];

                if (cpos >= bDest && cpos <= bDest + bSize) {
                    var apos = cpos - bDest;

                    var dpos = apos + bSrc + c.srcMin;
                    var dpos;
                    if (c.destOri == '-') {
                        dpos = c.srcMax - bSrc - apos;
                    } else {
                        dpos = apos + bSrc + c.srcMin;
                    }
                    return { seq: c.srcChr, pos: dpos, flipped: c.srcOri != c.destOri };
                }
            }
            // return null;
        }
    }
    return null;
};

Chainset.prototype.sourceBlocksForRange = function (chr, min, max, callback) {
    var STATE_PENDING = 1;
    var STATE_FETCHED = 2;

    var thisCS = this;
    var minTile = min / this.granularity | 0;
    var maxTile = max / this.granularity | 0;

    var needsNewOrPending = false;
    var needsNewFetch = false;
    for (var t = minTile; t <= maxTile; ++t) {
        var tn = chr + '_' + t;
        if (this.fetchedTiles[tn] != STATE_FETCHED) {
            needsNewOrPending = true;
            if (this.fetchedTiles[tn] != STATE_PENDING) {
                this.fetchedTiles[tn] = STATE_PENDING;
                needsNewFetch = true;
            }
        }
    }

    if (needsNewOrPending) {
        if (!this.postFetchQueues[chr]) {
            this.chainFetcher.fetchChains(chr, minTile * this.granularity, (maxTile + 1) * this.granularity - 1).then(function (chains) {
                if (!thisCS.chainsByDest) thisCS.chainsByDest[chr] = [];
                for (var ci = 0; ci < chains.length; ++ci) {
                    var chain = chains[ci];

                    {
                        var cbs = thisCS.chainsBySrc[chain.srcChr];
                        if (!cbs) {
                            thisCS.chainsBySrc[chain.srcChr] = [chain];
                        } else {
                            var present = false;
                            for (var oci = 0; oci < cbs.length; ++oci) {
                                var oc = cbs[oci];
                                if (oc.srcMin == chain.srcMin && oc.srcMax == chain.srcMax) {
                                    present = true;
                                    break;
                                }
                            }
                            if (!present) cbs.push(chain);
                        }
                    }

                    {
                        var cbd = thisCS.chainsByDest[chain.destChr];
                        if (!cbd) {
                            thisCS.chainsByDest[chain.destChr] = [chain];
                        } else {
                            var present = false;
                            for (var oci = 0; oci < cbd.length; ++oci) {
                                var oc = cbd[oci];
                                if (oc.destMin == chain.destMin && oc.destMax == chain.destMax) {
                                    present = true;
                                    break;
                                }
                            }
                            if (!present) cbd.push(chain);
                        }
                    }
                }
                for (var t = minTile; t <= maxTile; ++t) {
                    var tn = chr + '_' + t;
                    thisCS.fetchedTiles[tn] = STATE_FETCHED;
                }
                if (thisCS.postFetchQueues[chr]) {
                    var pfq = thisCS.postFetchQueues[chr];
                    for (var i = 0; i < pfq.length; ++i) {
                        pfq[i]();
                    }
                    thisCS.postFetchQueues[chr] = null;
                }
            }).catch(function (err) {
                console.log(err);
            });
        }

        pusho(this.postFetchQueues, chr, function () {
            // Will either succeed if the tiles that are needed have already been fetched,
            // or queue up a new fetch.

            thisCS.sourceBlocksForRange(chr, min, max, callback);
        });
    } else {
        var srcBlocks = [];
        var chains = this.chainsByDest[chr] || [];
        for (var ci = 0; ci < chains.length; ++ci) {
            var c = chains[ci];
            if (min <= c.destMax && max >= c.destMin) {
                var cmin, cmax;
                if (c.srcOri == '-') {
                    cmin = c.destMax - max;
                    cmax = c.destMax - min;
                } else {
                    cmin = min - c.destMin;
                    cmax = max - c.destMin;
                }

                var blocks = c.blocks;
                for (var bi = 0; bi < blocks.length; ++bi) {
                    var b = blocks[bi];
                    var bSrc = b[0];
                    var bDest = b[1];
                    var bSize = b[2];

                    if (cmax >= bDest && cmin <= bDest + bSize) {
                        var amin = Math.max(cmin, bDest) - bDest;
                        var amax = Math.min(cmax, bDest + bSize) - bDest;

                        if (c.destOri == '-') {
                            srcBlocks.push(new DASSegment(c.srcChr, c.srcMax - bSrc - amax, c.srcMax - bSrc - amin));
                        } else {
                            srcBlocks.push(new DASSegment(c.srcChr, c.srcMin + amin + bSrc, c.srcMin + amax + bSrc));
                        }
                    }
                }
            }
        }
        callback(srcBlocks);
    }
};

function DASChainFetcher(uri, srcTag, destTag) {
    this.source = new DASSource(uri);
    this.srcTag = srcTag;
    this.destTag = destTag;
}

DASChainFetcher.prototype.fetchChains = function (chr, _min, _max) {
    var thisCS = this;

    return new Promise(function (resolve, reject) {
        thisCS.source.alignments(chr, {}, function (aligns) {
            var chains = [];

            for (var ai = 0; ai < aligns.length; ++ai) {
                var aln = aligns[ai];
                for (var bi = 0; bi < aln.blocks.length; ++bi) {
                    var block = aln.blocks[bi];
                    var srcSeg, destSeg;
                    for (var si = 0; si < block.segments.length; ++si) {
                        var seg = block.segments[si];
                        var obj = aln.objects[seg.object];
                        if (obj.dbSource === thisCS.srcTag) {
                            srcSeg = seg;
                        } else if (obj.dbSource === thisCS.destTag) {
                            destSeg = seg;
                        }
                    }
                    if (srcSeg && destSeg) {
                        var chain = {
                            srcChr: aln.objects[srcSeg.object].accession,
                            srcMin: srcSeg.min | 0,
                            srcMax: srcSeg.max | 0,
                            srcOri: srcSeg.strand,
                            destChr: aln.objects[destSeg.object].accession,
                            destMin: destSeg.min | 0,
                            destMax: destSeg.max | 0,
                            destOri: destSeg.strand,
                            blocks: []
                        };

                        var srcops = parseCigar(srcSeg.cigar),
                            destops = parseCigar(destSeg.cigar);

                        var srcOffset = 0,
                            destOffset = 0;
                        var srci = 0,
                            desti = 0;
                        while (srci < srcops.length && desti < destops.length) {
                            if (srcops[srci].op == 'M' && destops[desti].op == 'M') {
                                var blockLen = Math.min(srcops[srci].cnt, destops[desti].cnt);
                                chain.blocks.push([srcOffset, destOffset, blockLen]);
                                if (srcops[srci].cnt == blockLen) {
                                    ++srci;
                                } else {
                                    srcops[srci].cnt -= blockLen;
                                }
                                if (destops[desti].cnt == blockLen) {
                                    ++desti;
                                } else {
                                    destops[desti] -= blockLen;
                                }
                                srcOffset += blockLen;
                                destOffset += blockLen;
                            } else if (srcops[srci].op == 'I') {
                                destOffset += srcops[srci++].cnt;
                            } else if (destops[desti].op == 'I') {
                                srcOffset += destops[desti++].cnt;
                            }
                        }

                        chains.push(chain);
                    }
                }
            }
            resolve(chains);
        });
    });
};

function BBIChainFetcher(uri, credentials) {
    var self = this;
    this.uri = uri;
    this.credentials = credentials;

    this.bwg = new Promise(function (resolve, reject) {
        makeBwg(new URLFetchable(self.uri, { credentials: self.credentials,
            resolver: self.resolver }), function (bwg, err) {
            if (bwg) {
                resolve(bwg);
            } else {
                reject(err);
            }
        });
    });

    this.bwg.then(function (bwg, err) {
        if (err) console.log(err);
    });
}

function pi(x) {
    return parseInt(x);
}

function cleanChr(c) {
    if (c.indexOf('chr') == 0) return c.substr(3);else return c;
}

function bbiFeatureToChain(feature) {
    var chain = {
        srcChr: cleanChr(feature.srcChrom),
        srcMin: parseInt(feature.srcStart),
        srcMax: parseInt(feature.srcEnd),
        srcOri: feature.srcOri,
        destChr: cleanChr(feature.segment),
        destMin: feature.min - 1, // Convert back from bigbed parser
        destMax: feature.max,
        destOri: feature.ori,
        blocks: []
    };
    var srcStarts = feature.srcStarts.split(',').map(pi);
    var destStarts = feature.destStarts.split(',').map(pi);
    var blockLengths = feature.blockLens.split(',').map(pi);
    for (var bi = 0; bi < srcStarts.length; ++bi) {
        chain.blocks.push([srcStarts[bi], destStarts[bi], blockLengths[bi]]);
    }

    return chain;
}

BBIChainFetcher.prototype.fetchChains = function (chr, min, max) {
    return this.bwg.then(function (bwg, err) {
        if (!bwg) throw Error("No BWG");

        return new Promise(function (resolve, reject) {
            bwg.getUnzoomedView().readWigData(chr, min, max, function (feats) {
                resolve(feats.map(bbiFeatureToChain));
            });
        });
    });
};

function AliasChainFetcher(conf) {
    this.conf = conf;
    this.forwardAliases = {};
    var sa = conf.sequenceAliases || [];
    for (var ai = 0; ai < sa.length; ++ai) {
        var al = sa[ai];
        if (al.length < 2) continue;

        var fa = [];
        for (var i = 0; i < al.length - 1; ++i) {
            fa.push(al[i]);
        }this.forwardAliases[al[al.length - 1]] = fa;
    }
}

AliasChainFetcher.prototype.fetchChains = function (chr, min, max) {
    var resp = [];
    var fa = this.forwardAliases[chr] || [];
    for (var i = 0; i < fa.length; ++i) {
        resp.push({
            srcChr: fa[i],
            srcMin: 1,
            srcMax: 1000000000,
            srcOri: '+',
            destChr: chr,
            destMin: 1,
            destMax: 1000000000,
            destOri: '+',
            blocks: [[1, 1, 1000000000]]
        });
    }

    return Promise.resolve(resp);
};

if (typeof module !== 'undefined') {
    module.exports = {
        Chainset: Chainset
    };
}

},{"./bigwig":3,"./bin":4,"./cigar":8,"./das":10,"./utils":55,"es6-promise":59}],8:[function(require,module,exports){
'use strict';

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2010
//
// chainset.js: liftover support
//

var CIGAR_REGEXP = new RegExp('([0-9]*)([MIDS])', 'g');

function parseCigar(cigar) {
    var cigops = [];
    var match;
    while ((match = CIGAR_REGEXP.exec(cigar)) != null) {
        var count = match[1];
        if (count.length == 0) {
            count = 1;
        }
        cigops.push({ cnt: count | 0, op: match[2] });
    }
    return cigops;
}

if (typeof module !== 'undefined') {
    module.exports = {
        parseCigar: parseCigar
    };
}

},{}],9:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2010
//
// color.js
//

"use strict";

function DColour(red, green, blue, name) {
    this.red = red | 0;
    this.green = green | 0;
    this.blue = blue | 0;
    if (name) {
        this.name = name;
    }
}

DColour.prototype.toSvgString = function () {
    if (!this.name) {
        this.name = "rgb(" + this.red + "," + this.green + "," + this.blue + ")";
    }

    return this.name;
};

function hex2(x) {
    var y = '00' + x.toString(16);
    return y.substring(y.length - 2);
}

DColour.prototype.toHexString = function () {
    return '#' + hex2(this.red) + hex2(this.green) + hex2(this.blue);
};

var palette = {
    red: new DColour(255, 0, 0, 'red'),
    green: new DColour(0, 255, 0, 'green'),
    blue: new DColour(0, 0, 255, 'blue'),
    yellow: new DColour(255, 255, 0, 'yellow'),
    white: new DColour(255, 255, 255, 'white'),
    black: new DColour(0, 0, 0, 'black'),
    gray: new DColour(180, 180, 180, 'gray'),
    grey: new DColour(180, 180, 180, 'grey'),
    lightskyblue: new DColour(135, 206, 250, 'lightskyblue'),
    lightsalmon: new DColour(255, 160, 122, 'lightsalmon'),
    hotpink: new DColour(255, 105, 180, 'hotpink')
};

var COLOR_RE = new RegExp('^#([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$');
var CSS_COLOR_RE = /rgb\(([0-9]+),([0-9]+),([0-9]+)\)/;

function dasColourForName(name) {
    var c = palette[name];
    if (!c) {
        var match = COLOR_RE.exec(name);
        if (match) {
            c = new DColour('0x' + match[1] | 0, '0x' + match[2] | 0, '0x' + match[3] | 0, name);
            palette[name] = c;
        } else {
            match = CSS_COLOR_RE.exec(name);
            if (match) {
                c = new DColour(match[1] | 0, match[2] | 0, match[3] | 0, name);
                palette[name] = c;
            } else {
                console.log("couldn't handle color: " + name);
                c = palette.black;
                palette[name] = c;
            }
        }
    }
    return c;
}

function makeColourSteps(steps, stops, colours) {
    var dcolours = [];
    for (var ci = 0; ci < colours.length; ++ci) {
        dcolours.push(dasColourForName(colours[ci]));
    }

    var grad = [];
    STEP_LOOP: for (var si = 0; si < steps; ++si) {
        var rs = 1.0 * si / (steps - 1);
        var score = stops[0] + (stops[stops.length - 1] - stops[0]) * rs;
        for (var i = 0; i < stops.length - 1; ++i) {
            if (score >= stops[i] && score <= stops[i + 1]) {
                var frac = (score - stops[i]) / (stops[i + 1] - stops[i]);
                var ca = dcolours[i];
                var cb = dcolours[i + 1];

                var fill = new DColour(ca.red * (1.0 - frac) + cb.red * frac | 0, ca.green * (1.0 - frac) + cb.green * frac | 0, ca.blue * (1.0 - frac) + cb.blue * frac | 0).toSvgString();
                grad.push(fill);

                continue STEP_LOOP;
            }
        }
        throw 'Bad step';
    }

    return grad;
}

function makeGradient(steps, color1, color2, color3) {
    if (color3) {
        return makeColourSteps(steps, [0, 0.5, 1], [color1, color2, color3]);
    } else {
        return makeColourSteps(steps, [0, 1], [color1, color2]);
    }
}

if (typeof module !== 'undefined') {
    module.exports = {
        makeColourSteps: makeColourSteps,
        makeGradient: makeGradient,
        dasColourForName: dasColourForName
    };
}

},{}],10:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2010
//
// das.js: queries and low-level data model.
//

"use strict";

if (typeof require !== 'undefined') {
    var utils = require('./utils');
    var shallowCopy = utils.shallowCopy;
    var pusho = utils.pusho;

    var color = require('./color');
    var makeColourSteps = color.makeColourSteps;
}

var dasLibErrorHandler = function dasLibErrorHandler(errMsg) {
    alert(errMsg);
};
var dasLibRequestQueue = new Array();

function DASSegment(name, start, end, description) {
    this.name = name;
    this.start = start;
    this.end = end;
    this.description = description;
}
DASSegment.prototype.toString = function () {
    return this.name + ':' + this.start + '..' + this.end;
};
DASSegment.prototype.isBounded = function () {
    return this.start && this.end;
};
DASSegment.prototype.toDASQuery = function () {
    var q = 'segment=' + this.name;
    if (this.start && this.end) {
        q += ':' + this.start + ',' + this.end;
    }
    return q;
};

function DASSource(a1, a2) {
    var options;
    if (typeof a1 == 'string') {
        this.uri = a1;
        options = a2 || {};
    } else {
        options = a1 || {};
    }
    for (var k in options) {
        this[k] = options[k];
    }

    if (!this.coords) {
        this.coords = [];
    }
    if (!this.props) {
        this.props = {};
    }

    this.dasBaseURI = this.uri;
    if (this.dasBaseURI && this.dasBaseURI.substr(this.uri.length - 1) != '/') {
        this.dasBaseURI = this.dasBaseURI + '/';
    }
}

DASSource.prototype.getURI = function (uri) {
    if (this.resolver) {
        return this.resolver(uri).then(function (urlOrObj) {
            if (typeof urlOrObj === 'string') {
                return urlOrObj;
            } else {
                return urlOrObj.url;
            }
        });
    } else {
        return Promise.resolve(uri);
    }
};

function DASCoords() {}

function coordsMatch(c1, c2) {
    return c1.taxon == c2.taxon && c1.auth == c2.auth && c1.version == c2.version;
}

//
// DAS 1.6 entry_points command
//

DASSource.prototype.entryPoints = function (callback) {
    var dasURI = this.dasBaseURI + 'entry_points';
    this.doCrossDomainRequest(dasURI, function (responseXML) {
        if (!responseXML) {
            return callback([]);
        }

        var entryPoints = new Array();

        var segs = responseXML.getElementsByTagName('SEGMENT');
        for (var i = 0; i < segs.length; ++i) {
            var seg = segs[i];
            var segId = seg.getAttribute('id');

            var segSize = seg.getAttribute('size');
            var segMin, segMax;
            if (segSize) {
                segMin = 1;segMax = segSize | 0;
            } else {
                segMin = seg.getAttribute('start');
                if (segMin) {
                    segMin |= 0;
                }
                segMax = seg.getAttribute('stop');
                if (segMax) {
                    segMax |= 0;
                }
            }
            var segDesc = null;
            if (seg.firstChild) {
                segDesc = seg.firstChild.nodeValue;
            }
            entryPoints.push(new DASSegment(segId, segMin, segMax, segDesc));
        }
        callback(entryPoints);
    });
};

//
// DAS 1.6 sequence command
// Do we need an option to fall back to the dna command?
//

function DASSequence(name, start, end, alpha, seq) {
    this.name = name;
    this.start = start;
    this.end = end;
    this.alphabet = alpha;
    this.seq = seq;
}

DASSource.prototype.sequence = function (segment, callback) {
    var dasURI = this.dasBaseURI + 'sequence?' + segment.toDASQuery();
    this.doCrossDomainRequest(dasURI, function (responseXML) {
        if (!responseXML) {
            callback([]);
            return;
        } else {
            var seqs = new Array();

            var segs = responseXML.getElementsByTagName('SEQUENCE');
            for (var i = 0; i < segs.length; ++i) {
                var seg = segs[i];
                var segId = seg.getAttribute('id');
                var segMin = seg.getAttribute('start');
                var segMax = seg.getAttribute('stop');
                var segAlpha = 'DNA';
                var segSeq = null;
                if (seg.firstChild) {
                    var rawSeq = seg.firstChild.nodeValue;
                    segSeq = '';
                    var idx = 0;
                    while (true) {
                        var space = rawSeq.indexOf('\n', idx);
                        if (space >= 0) {
                            segSeq += rawSeq.substring(idx, space).toUpperCase();
                            idx = space + 1;
                        } else {
                            segSeq += rawSeq.substring(idx).toUpperCase();
                            break;
                        }
                    }
                }
                seqs.push(new DASSequence(segId, segMin, segMax, segAlpha, segSeq));
            }

            callback(seqs);
        }
    });
};

//
// DAS 1.6 features command
//

function DASFeature() {}

function DASGroup(id) {
    if (id) this.id = id;
}

function DASLink(desc, uri) {
    this.desc = desc;
    this.uri = uri;
}

DASSource.prototype.features = function (segment, options, callback) {
    options = options || {};
    var thisB = this;

    var dasURI;
    if (this.features_uri) {
        dasURI = this.features_uri;
    } else {
        var filters = [];

        if (segment) {
            filters.push(segment.toDASQuery());
        } else if (options.group) {
            var g = options.group;
            if (typeof g == 'string') {
                filters.push('group_id=' + g);
            } else {
                for (var gi = 0; gi < g.length; ++gi) {
                    filters.push('group_id=' + g[gi]);
                }
            }
        }

        if (options.adjacent) {
            var adj = options.adjacent;
            if (typeof adj == 'string') {
                adj = [adj];
            }
            for (var ai = 0; ai < adj.length; ++ai) {
                filters.push('adjacent=' + adj[ai]);
            }
        }

        if (options.type) {
            if (typeof options.type == 'string') {
                filters.push('type=' + options.type);
            } else {
                for (var ti = 0; ti < options.type.length; ++ti) {
                    filters.push('type=' + options.type[ti]);
                }
            }
        }

        if (options.maxbins) {
            filters.push('maxbins=' + options.maxbins);
        }

        if (filters.length > 0) {
            dasURI = this.dasBaseURI + 'features?' + filters.join(';');
        } else {
            callback([], 'No filters specified');
        }
    }

    this.doCrossDomainRequest(dasURI, function (responseXML, req) {
        if (!responseXML) {
            var msg;
            if (req.status == 0) {
                msg = 'server may not support CORS';
            } else {
                msg = 'status=' + req.status;
            }
            callback([], 'Failed request: ' + msg);
            return;
        }
        /*      if (req) {
                    var caps = req.getResponseHeader('X-DAS-Capabilties');
                    if (caps) {
                        alert(caps);
                    }
                } */

        var features = new Array();
        var segmentMap = {};

        var segs = responseXML.getElementsByTagName('SEGMENT');
        for (var si = 0; si < segs.length; ++si) {
            var segmentXML = segs[si];
            var segmentID = segmentXML.getAttribute('id');
            segmentMap[segmentID] = {
                min: segmentXML.getAttribute('start'),
                max: segmentXML.getAttribute('stop')
            };

            var featureXMLs = segmentXML.getElementsByTagName('FEATURE');
            for (var i = 0; i < featureXMLs.length; ++i) {
                var feature = featureXMLs[i];
                var dasFeature = new DASFeature();

                dasFeature.segment = segmentID;
                dasFeature.id = feature.getAttribute('id');
                dasFeature.label = feature.getAttribute('label');

                /*
                                var childNodes = feature.childNodes;
                                for (var c = 0; c < childNodes.length; ++c) {
                                    var cn = childNodes[c];
                                    if (cn.nodeType == Node.ELEMENT_NODE) {
                                        var key = cn.tagName;
                                        //var val = null;
                                        //if (cn.firstChild) {
                                        //   val = cn.firstChild.nodeValue;
                                        //}
                                        dasFeature[key] = 'x';
                                    }
                                } */

                var spos = elementValue(feature, "START");
                var epos = elementValue(feature, "END");
                if ((spos | 0) > (epos | 0)) {
                    dasFeature.min = epos | 0;
                    dasFeature.max = spos | 0;
                } else {
                    dasFeature.min = spos | 0;
                    dasFeature.max = epos | 0;
                }
                {
                    var tec = feature.getElementsByTagName('TYPE');
                    if (tec.length > 0) {
                        var te = tec[0];
                        if (te.firstChild) {
                            dasFeature.type = te.firstChild.nodeValue;
                        }
                        dasFeature.typeId = te.getAttribute('id');
                        dasFeature.typeCv = te.getAttribute('cvId');
                    }
                }
                dasFeature.type = elementValue(feature, "TYPE");
                if (!dasFeature.type && dasFeature.typeId) {
                    dasFeature.type = dasFeature.typeId; // FIXME?
                }

                dasFeature.method = elementValue(feature, "METHOD");
                {
                    var ori = elementValue(feature, "ORIENTATION");
                    if (!ori) {
                        ori = '0';
                    }
                    dasFeature.orientation = ori;
                }
                dasFeature.score = elementValue(feature, "SCORE");
                dasFeature.links = dasLinksOf(feature);
                dasFeature.notes = dasNotesOf(feature);

                var groups = feature.getElementsByTagName("GROUP");
                for (var gi = 0; gi < groups.length; ++gi) {
                    var groupXML = groups[gi];
                    var dasGroup = new DASGroup();
                    dasGroup.type = groupXML.getAttribute('type');
                    dasGroup.id = groupXML.getAttribute('id');
                    dasGroup.links = dasLinksOf(groupXML);
                    dasGroup.notes = dasNotesOf(groupXML);
                    if (!dasFeature.groups) {
                        dasFeature.groups = new Array(dasGroup);
                    } else {
                        dasFeature.groups.push(dasGroup);
                    }
                }

                // Magic notes.  Check with TAD before changing this.
                if (dasFeature.notes) {
                    for (var ni = 0; ni < dasFeature.notes.length; ++ni) {
                        var n = dasFeature.notes[ni];
                        if (n.indexOf('Genename=') == 0) {
                            var gg = new DASGroup();
                            gg.type = 'gene';
                            gg.id = n.substring(9);
                            if (!dasFeature.groups) {
                                dasFeature.groups = new Array(gg);
                            } else {
                                dasFeature.groups.push(gg);
                            }
                        }
                    }
                }

                {
                    var pec = feature.getElementsByTagName('PART');
                    if (pec.length > 0) {
                        var parts = [];
                        for (var pi = 0; pi < pec.length; ++pi) {
                            parts.push(pec[pi].getAttribute('id'));
                        }
                        dasFeature.parts = parts;
                    }
                }
                {
                    var pec = feature.getElementsByTagName('PARENT');
                    if (pec.length > 0) {
                        var parents = [];
                        for (var pi = 0; pi < pec.length; ++pi) {
                            parents.push(pec[pi].getAttribute('id'));
                        }
                        dasFeature.parents = parents;
                    }
                }

                features.push(dasFeature);
            }
        }

        callback(features, undefined, segmentMap);
    }, function (err) {
        callback([], err);
    });
};

function DASAlignment(type) {
    this.type = type;
    this.objects = {};
    this.blocks = [];
}

DASSource.prototype.alignments = function (segment, options, callback) {
    var dasURI = this.dasBaseURI + 'alignment?query=' + segment;
    this.doCrossDomainRequest(dasURI, function (responseXML) {
        if (!responseXML) {
            callback([], 'Failed request ' + dasURI);
            return;
        }

        var alignments = [];
        var aliXMLs = responseXML.getElementsByTagName('alignment');
        for (var ai = 0; ai < aliXMLs.length; ++ai) {
            var aliXML = aliXMLs[ai];
            var ali = new DASAlignment(aliXML.getAttribute('alignType'));
            var objXMLs = aliXML.getElementsByTagName('alignObject');
            for (var oi = 0; oi < objXMLs.length; ++oi) {
                var objXML = objXMLs[oi];
                var obj = {
                    id: objXML.getAttribute('intObjectId'),
                    accession: objXML.getAttribute('dbAccessionId'),
                    version: objXML.getAttribute('objectVersion'),
                    dbSource: objXML.getAttribute('dbSource'),
                    dbVersion: objXML.getAttribute('dbVersion')
                };
                ali.objects[obj.id] = obj;
            }

            var blockXMLs = aliXML.getElementsByTagName('block');
            for (var bi = 0; bi < blockXMLs.length; ++bi) {
                var blockXML = blockXMLs[bi];
                var block = {
                    order: blockXML.getAttribute('blockOrder'),
                    segments: []
                };
                var segXMLs = blockXML.getElementsByTagName('segment');
                for (var si = 0; si < segXMLs.length; ++si) {
                    var segXML = segXMLs[si];
                    var seg = {
                        object: segXML.getAttribute('intObjectId'),
                        min: segXML.getAttribute('start'),
                        max: segXML.getAttribute('end'),
                        strand: segXML.getAttribute('strand'),
                        cigar: elementValue(segXML, 'cigar')
                    };
                    block.segments.push(seg);
                }
                ali.blocks.push(block);
            }

            alignments.push(ali);
        }
        callback(alignments);
    });
};

function DASStylesheet() {
    this.styles = [];
}

DASStylesheet.prototype.pushStyle = function (filters, zoom, style) {
    if (!filters) {
        filters = { type: 'default' };
    }
    var styleHolder = shallowCopy(filters);
    if (zoom) {
        styleHolder.zoom = zoom;
    }
    styleHolder.style = style;
    this.styles.push(styleHolder);
};

function DASStyle() {}

function parseGradient(grad) {
    var steps = grad.getAttribute('steps');
    if (steps) {
        steps = steps | 0;
    } else {
        steps = 50;
    }

    var stops = [];
    var colors = [];
    var se = grad.getElementsByTagName('STOP');
    for (var si = 0; si < se.length; ++si) {
        var stop = se[si];
        stops.push(1.0 * stop.getAttribute('score'));
        colors.push(stop.firstChild.nodeValue);
    }

    return makeColourSteps(steps, stops, colors);
}

DASSource.prototype.stylesheet = function (successCB, failureCB) {
    var dasURI,
        creds = this.credentials;
    if (this.stylesheet_uri) {
        dasURI = this.stylesheet_uri;
        creds = false;
    } else {
        dasURI = this.dasBaseURI + 'stylesheet';
    }

    this.getURI(dasURI).then(function (dasURI) {
        doCrossDomainRequest(dasURI, function (responseXML) {
            if (!responseXML) {
                if (failureCB) {
                    failureCB();
                }
                return;
            }
            var stylesheet = new DASStylesheet();
            var typeXMLs = responseXML.getElementsByTagName('TYPE');
            for (var i = 0; i < typeXMLs.length; ++i) {
                var typeStyle = typeXMLs[i];

                var filter = {};
                filter.type = typeStyle.getAttribute('id'); // Am I right in thinking that this makes DASSTYLE XML invalid?  Ugh.
                filter.label = typeStyle.getAttribute('label');
                filter.method = typeStyle.getAttribute('method');
                var glyphXMLs = typeStyle.getElementsByTagName('GLYPH');
                for (var gi = 0; gi < glyphXMLs.length; ++gi) {
                    var glyphXML = glyphXMLs[gi];
                    var zoom = glyphXML.getAttribute('zoom');
                    var glyph = childElementOf(glyphXML);
                    var style = new DASStyle();
                    style.glyph = glyph.localName;
                    var child = glyph.firstChild;

                    while (child) {
                        if (child.nodeType == Node.ELEMENT_NODE) {
                            if (child.localName == 'BGGRAD') {
                                style[child.localName] = parseGradient(child);
                            } else {
                                style[child.localName] = child.firstChild.nodeValue;
                            }
                        }
                        child = child.nextSibling;
                    }
                    stylesheet.pushStyle(filter, zoom, style);
                }
            }
            successCB(stylesheet);
        }, creds);
    }).catch(function (err) {
        console.log(err);
        failureCB();
    });
};

//
// sources command
// 

function DASRegistry(uri, opts) {
    opts = opts || {};
    this.uri = uri;
    this.opts = opts;
}

DASRegistry.prototype.sources = function (callback, failure, opts) {
    if (!opts) {
        opts = {};
    }

    var filters = [];
    if (opts.taxon) {
        filters.push('organism=' + opts.taxon);
    }
    if (opts.auth) {
        filters.push('authority=' + opts.auth);
    }
    if (opts.version) {
        filters.push('version=' + opts.version);
    }
    var quri = this.uri;
    if (filters.length > 0) {
        quri = quri + '?' + filters.join('&'); // '&' as a separator to hack around dasregistry.org bug.
    }

    doCrossDomainRequest(quri, function (responseXML) {
        if (!responseXML && failure) {
            failure();
            return;
        }

        var sources = [];
        var sourceXMLs = responseXML.getElementsByTagName('SOURCE');
        for (var si = 0; si < sourceXMLs.length; ++si) {
            var sourceXML = sourceXMLs[si];
            var versionXMLs = sourceXML.getElementsByTagName('VERSION');
            if (versionXMLs.length < 1) {
                continue;
            }
            var versionXML = versionXMLs[0];

            var coordXMLs = versionXML.getElementsByTagName('COORDINATES');
            var coords = [];
            for (var ci = 0; ci < coordXMLs.length; ++ci) {
                var coordXML = coordXMLs[ci];
                var coord = new DASCoords();
                coord.auth = coordXML.getAttribute('authority');
                coord.taxon = coordXML.getAttribute('taxid');
                coord.version = coordXML.getAttribute('version');
                coords.push(coord);
            }

            var caps = [];
            var capXMLs = versionXML.getElementsByTagName('CAPABILITY');
            var uri;
            for (var ci = 0; ci < capXMLs.length; ++ci) {
                var capXML = capXMLs[ci];

                caps.push(capXML.getAttribute('type'));

                if (capXML.getAttribute('type') == 'das1:features') {
                    var fep = capXML.getAttribute('query_uri');
                    uri = fep.substring(0, fep.length - 'features'.length);
                }
            }

            var props = {};
            var propXMLs = versionXML.getElementsByTagName('PROP');
            for (var pi = 0; pi < propXMLs.length; ++pi) {
                pusho(props, propXMLs[pi].getAttribute('name'), propXMLs[pi].getAttribute('value'));
            }

            if (uri) {
                var source = new DASSource(uri, {
                    source_uri: sourceXML.getAttribute('uri'),
                    name: sourceXML.getAttribute('title'),
                    desc: sourceXML.getAttribute('description'),
                    coords: coords,
                    props: props,
                    capabilities: caps
                });
                sources.push(source);
            }
        }

        callback(sources);
    });
};

//
// Utility functions
//

function elementValue(element, tag) {
    var children = element.getElementsByTagName(tag);
    if (children.length > 0 && children[0].firstChild) {
        var c = children[0];
        if (c.childNodes.length == 1) {
            return c.firstChild.nodeValue;
        } else {
            var s = '';
            for (var ni = 0; ni < c.childNodes.length; ++ni) {
                s += c.childNodes[ni].nodeValue;
            }
            return s;
        }
    } else {
        return null;
    }
}

function childElementOf(element) {
    if (element.hasChildNodes()) {
        var child = element.firstChild;
        do {
            if (child.nodeType == Node.ELEMENT_NODE) {
                return child;
            }
            child = child.nextSibling;
        } while (child != null);
    }
    return null;
}

function dasLinksOf(element) {
    var links = new Array();
    var maybeLinkChilden = element.getElementsByTagName('LINK');
    for (var ci = 0; ci < maybeLinkChilden.length; ++ci) {
        var linkXML = maybeLinkChilden[ci];
        if (linkXML.parentNode == element) {
            links.push(new DASLink(linkXML.firstChild ? linkXML.firstChild.nodeValue : 'Unknown', linkXML.getAttribute('href')));
        }
    }

    return links;
}

function dasNotesOf(element) {
    var notes = [];
    var maybeNotes = element.getElementsByTagName('NOTE');
    for (var ni = 0; ni < maybeNotes.length; ++ni) {
        if (maybeNotes[ni].firstChild) {
            notes.push(maybeNotes[ni].firstChild.nodeValue);
        }
    }
    return notes;
}

function doCrossDomainRequest(url, handler, credentials, custAuth) {
    // TODO: explicit error handlers?

    if (window.XDomainRequest) {
        var req = new XDomainRequest();
        req.onload = function () {
            var dom = new ActiveXObject("Microsoft.XMLDOM");
            dom.async = false;
            dom.loadXML(req.responseText);
            handler(dom);
        };
        req.open("get", url);
        req.send();
    } else {
        try {
            var req = new XMLHttpRequest();
            var timeout = setTimeout(function () {
                console.log('timing out ' + url);
                req.abort();
                handler(null, req);
            }, 5000);

            req.ontimeout = function () {
                console.log('timeout on ' + url);
            };

            req.onreadystatechange = function () {
                if (req.readyState == 4) {
                    clearTimeout(timeout);
                    if (req.status >= 200 || req.status == 0) {
                        handler(req.responseXML, req);
                    }
                }
            };
            req.open("get", url, true);
            // IE10/11 fix: The timeout property may be set only in the time interval between a call to the open method
            //              and the first call to the send method.
            req.timeout = 5000;
            if (credentials) {
                req.withCredentials = true;
            }
            if (custAuth) {
                req.setRequestHeader('X-DAS-Authorisation', custAuth);
            }
            req.overrideMimeType('text/xml');
            req.setRequestHeader('Accept', 'application/xml,*/*');
            req.send();
        } catch (e) {
            handler(null, req, e);
        }
    }
}

DASSource.prototype.doCrossDomainRequest = function (url, handler, errHandler) {
    var custAuth;
    if (this.xUser) {
        custAuth = 'Basic ' + btoa(this.xUser + ':' + this.xPass);
    }

    try {
        return doCrossDomainRequest(url, handler, this.credentials, custAuth);
    } catch (err) {
        if (errHandler) {
            errHandler(err);
        } else {
            throw err;
        }
    }
};

function isDasBooleanTrue(s) {
    s = ('' + s).toLowerCase();
    return s === 'yes' || s === 'true';
}

function isDasBooleanNotFalse(s) {
    if (!s) return false;

    s = ('' + s).toLowerCase();
    return s !== 'no' || s !== 'false';
}

function copyStylesheet(ss) {
    var nss = shallowCopy(ss);
    nss.styles = [];
    for (var si = 0; si < ss.styles.length; ++si) {
        var sh = nss.styles[si] = shallowCopy(ss.styles[si]);
        sh._methodRE = sh._labelRE = sh._typeRE = undefined;
        sh.style = shallowCopy(sh.style);
        sh.style.id = undefined;
        sh.style._gradient = undefined;
    }
    return nss;
}

if (typeof module !== 'undefined') {
    module.exports = {
        DASGroup: DASGroup,
        DASFeature: DASFeature,
        DASStylesheet: DASStylesheet,
        DASStyle: DASStyle,
        DASSource: DASSource,
        DASSegment: DASSegment,
        DASRegistry: DASRegistry,
        DASSequence: DASSequence,
        DASLink: DASLink,

        isDasBooleanTrue: isDasBooleanTrue,
        isDasBooleanNotFalse: isDasBooleanNotFalse,
        copyStylesheet: copyStylesheet,
        coordsMatch: coordsMatch
    };
}

},{"./color":9,"./utils":55}],11:[function(require,module,exports){
/* jshint esversion: 6 */
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.paintQuant = exports.createQuantOverlay = exports.clearViewport = exports.drawUnmapped = exports.paint = exports.prepareViewport = exports.prepareSubtiers = exports.drawTier = exports.renderTier = undefined;

var _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"]) _i["return"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError("Invalid attempt to destructure non-iterable instance"); } }; }();

var _featureDraw = require("./feature-draw.js");

var _sequenceDraw = require("./sequence-draw.js");

var _spans = require("./spans.js");

var _utils = require("./utils.js");

var _glyphs = require("./glyphs.js");

var Glyphs = _interopRequireWildcard(_glyphs);

var _das = require("./das.js");

var _color = require("./color.js");

var _cigar = require("./cigar.js");

var _numformats = require("./numformats");

var _ramda = require("ramda");

var R = _interopRequireWildcard(_ramda);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

// The only functions that must be exported by a renderer are renderTier
// and drawTier, the rest are exported for use in other renderers.
exports.renderTier = renderTier;
exports.drawTier = drawTier;
exports.prepareSubtiers = prepareSubtiers;
exports.prepareViewport = prepareViewport;
exports.paint = paint;
exports.drawUnmapped = drawUnmapped;
exports.clearViewport = clearViewport;
exports.createQuantOverlay = createQuantOverlay;
exports.paintQuant = paintQuant;


function renderTier(status, tier) {
    drawTier(tier);
    tier.updateStatus(status);
}

function drawTier(tier) {
    var canvas = tier.viewport.getContext("2d");
    var retina = tier.browser.retina && window.devicePixelRatio > 1;

    if (tier.sequenceSource) {
        var sequence = tier.currentSequence;
        (0, _sequenceDraw.drawSeqTier)(tier, sequence);
    } else if (tier.currentFeatures) {
        prepareSubtiers(tier, canvas);
    } else {
        console.log("No sequence or features in tier!");
    }

    if (tier.subtiers) {
        var vOffset = R.defaultTo(0, tier.dasSource.vOffset);

        prepareViewport(tier, canvas, retina, true, vOffset); // NB calls canvas.save
        paint(tier, canvas, vOffset);
        canvas.restore();
    }

    tier.drawOverlay();
    tier.paintQuant();

    if (typeof tier.dasSource.drawCallback === "function") {
        tier.dasSource.drawCallback(canvas, tier);
    }

    tier.originHaxx = 0;
    tier.browser.arrangeTiers();
}

function glyphsForGroup(canvas, features, y, groupElement, tier) {
    var gstyle = tier.styleForFeature(groupElement);
    var label = void 0;
    var labelWanted = false;

    var glyphs = [];
    var strand = null;

    features.forEach(function (f) {
        if (f.orientation && strand === null) {
            strand = f.orientation;
        }

        if (!label && f.label) {
            label = f.label;
        }

        var style = tier.styleForFeature(f);
        if (style && !f.parts) {
            if ((0, _das.isDasBooleanTrue)(style.LABEL)) labelWanted = true;

            var glyph = glyphForFeature(canvas, f, y, style, tier, null, true);
            if (glyph) glyphs.push(glyph);
        }
    });

    if (glyphs.length === 0) return null;

    var connector = 'flat';
    if (gstyle && gstyle.glyph === 'LINE') {
        // Stick with flat...
    } else {
        if (tier.dasSource.collapseSuperGroups && !tier.bumped) {
            if (strand === '+' || strand === '-') {
                connector = 'collapsed' + strand;
            }
        } else {
            if (strand === '+' || strand === '-') {
                connector = 'hat' + strand;
            }
        }
    }

    var labelText = null;
    if (label && labelWanted || gstyle && ((0, _das.isDasBooleanTrue)(gstyle.LABEL) || (0, _das.isDasBooleanTrue)(gstyle.LABELS))) {
        // HACK, LABELS should work.
        labelText = groupElement.label || label;
    }

    glyphs.sort(function (g1, g2) {
        return (g1.zindex || 0) - (g2.zindex || 0);
    });

    var groupGlyph = new Glyphs.GroupGlyph(glyphs, connector);
    if (labelText) {
        if (strand === '+') {
            labelText = '>' + labelText;
        } else if (strand === '-') {
            labelText = '<' + labelText;
        }
        groupGlyph = new Glyphs.LabelledGlyph(canvas, groupGlyph, labelText, false);
    }
    groupGlyph.bump = true;
    return groupGlyph;
}

function glyphForFeature(canvas, feature, y, style, tier, forceHeight, noLabel) {
    var scale = tier.browser.scale;
    var origin = tier.browser.viewStart;
    var glyphType = style.glyph || 'BOX';

    var min = feature.min;
    var max = feature.max;
    var strand = feature.orientation;
    var score = feature.score;
    var label = feature.label || feature.id;

    // Hide glyphs that are smaller than a pixel in width.
    if (tier.dasSource.hideSubpixelGlyphs && (max - min) * scale < 1) return null;

    var minPos = (min - origin) * scale;
    var rawMaxPos = (max - origin + 1) * scale;
    var maxPos = Math.max(rawMaxPos, minPos + 1);

    forceHeight = forceHeight * 1.0;
    var height = (tier.forceHeight || style.HEIGHT || forceHeight || 12) * 1.0;
    height = height * 1.0;
    var bump = style.BUMP && (0, _das.isDasBooleanTrue)(style.BUMP);

    var glyph = void 0;
    var quant = void 0;

    // Create the glyph
    if (glyphType === 'CROSS' || glyphType === 'EX' || glyphType === 'TRIANGLE' || glyphType === 'DOT' || glyphType === 'SQUARE' || glyphType === 'STAR' || glyphType === 'PLIMSOLL') {
        var glyphHolder = featureToCrossLikeGlyph(canvas, tier, feature, y, glyphType, style, forceHeight, noLabel);
        if (glyphHolder) {
            var _glyphHolder = _slicedToArray(glyphHolder, 2);

            glyph = _glyphHolder[0];
            quant = _glyphHolder[1];
        }
    } else if (glyphType === 'HISTOGRAM' || glyphType === 'GRADIENT' && score !== 'undefined') {
        var _featureToGradientLik = featureToGradientLikeGlyph(canvas, tier, feature, y, glyphType, style, forceHeight);

        var _featureToGradientLik2 = _slicedToArray(_featureToGradientLik, 2);

        glyph = _featureToGradientLik2[0];
        quant = _featureToGradientLik2[1];
    } else if (glyphType === 'HIDDEN') {
        glyph = new Glyphs.PaddedGlyph(null, minPos, maxPos);
        noLabel = true;
    } else if (glyphType === 'ARROW') {
        var color = style.FGCOLOR || 'purple';
        var parallel = (0, _das.isDasBooleanTrue)(style.PARALLEL);
        var sw = (0, _das.isDasBooleanTrue)(style.SOUTHWEST);
        var ne = (0, _das.isDasBooleanTrue)(style.NORTHEAST);
        glyph = new Glyphs.ArrowGlyph(minPos, maxPos, height, color, parallel, sw, ne);
    } else if (glyphType === 'ANCHORED_ARROW') {
        var stroke = style.FGCOLOR || 'none';
        var fill = style.BGCOLOR || 'green';
        glyph = new Glyphs.AArrowGlyph(minPos, maxPos, height, fill, stroke, strand);
        glyph.bump = true;
    } else if (glyphType === 'SPAN') {
        var _stroke = style.FGCOLOR || 'black';
        glyph = new Glyphs.SpanGlyph(minPos, maxPos, height, _stroke);
    } else if (glyphType === 'LINE') {
        var _stroke2 = style.FGCOLOR || 'black';
        var lineStyle = style.STYLE || 'solid';
        glyph = new Glyphs.LineGlyph(minPos, maxPos, height, lineStyle, strand, _stroke2);
    } else if (glyphType === 'PRIMERS') {
        var _stroke3 = style.FGCOLOR || 'black';
        var _fill = style.BGCOLOR || 'red';
        glyph = new Glyphs.PrimersGlyph(minPos, maxPos, height, _fill, _stroke3);
    } else if (glyphType === 'TEXT') {
        var string = style.STRING || 'text';
        var _fill2 = style.FGCOLOR || 'black';
        glyph = new Glyphs.TextGlyph(canvas, minPos, maxPos, height, _fill2, string);
    } else if (glyphType === 'TOOMANY') {
        var _stroke4 = style.FGCOLOR || 'gray';
        var _fill3 = style.BGCOLOR || 'orange';
        glyph = new Glyphs.TooManyGlyph(minPos, maxPos, height, _fill3, _stroke4);
    } else if (glyphType === 'POINT') {
        var _featureToPointGlyph = featureToPointGlyph(tier, feature, style);

        var _featureToPointGlyph2 = _slicedToArray(_featureToPointGlyph, 2);

        glyph = _featureToPointGlyph2[0];
        quant = _featureToPointGlyph2[1];
    } else if (glyphType === '__SEQUENCE') {
        glyph = sequenceGlyph(canvas, tier, feature, style, forceHeight);
    } else if (glyphType === '__INSERTION') {
        var insertionLabels = true;
        if (style.__INSERTIONS !== undefined) insertionLabels = (0, _das.isDasBooleanNotFalse)(style.__INSERTIONS);
        glyph = new Glyphs.TriangleGlyph(minPos, 5, 'S', 5, tier.browser.baseColors['I']);
        if (insertionLabels) glyph = new Glyphs.LabelledGlyph(canvas, glyph, feature.insertion || feature.altAlleles[0], false, 'center', 'above', '7px sans-serif');

        if (maxPos - minPos > 1) {
            var _stroke5 = style.FGCOLOR || 'red';
            var _fill4 = style.BGCOLOR || style.COLOR1 || 'green';
            var bg = new Glyphs.BoxGlyph(minPos, 5, maxPos - minPos, height, _fill4, _stroke5);
            glyph = new Glyphs.GroupGlyph([bg, glyph]);
        }
    } else if (glyphType === '__NONE') {
        return null;
    } else if (glyphType === 'BOX') {
        var _stroke6 = style.FGCOLOR || null;
        var _fill5 = style.BGCOLOR || style.COLOR1 || 'green';
        if (style.BGITEM && feature.itemRgb) _fill5 = feature.itemRgb;
        var _scale = (maxPos - minPos) / (max - min);
        if (feature.type == 'translation' && (feature.method == 'protein_coding' || feature.readframeExplicit) && (!feature.tags || feature.tags.indexOf('cds_start_NF') < 0 || feature.readframeExplicit) && (!tier.dasSource.collapseSuperGroups || tier.bumped) && _scale >= 0.5) {
            var refSeq = getRefSeq(tier, min, max);
            glyph = new Glyphs.AminoAcidGlyph(minPos, maxPos, height, _fill5, refSeq, feature.orientation, feature.readframe);
        } else {
            glyph = new Glyphs.BoxGlyph(minPos, 0, maxPos - minPos, height, _fill5, _stroke6);
        }
    }

    if (!glyph) return;

    if (((0, _das.isDasBooleanTrue)(style.LABEL) || feature.forceLabel) && label && !noLabel) {
        glyph = new Glyphs.LabelledGlyph(canvas, glyph, label, false);
    }

    if (bump) {
        glyph.bump = true;
    }

    glyph.feature = feature;

    if ((0, _das.isDasBooleanTrue)(style["HIDEAXISLABEL"])) quant = null;

    if (quant) {
        glyph.quant = quant;
    }

    if (style.ZINDEX) {
        glyph.zindex = style.ZINDEX | 0;
    }

    return glyph;
}

function groupFeatures(tier, canvas, y) {
    var glyphs = [];
    var gbsFeatures = {};
    var gbsStyles = {};
    var stackedFeatures = [];

    R.map(function (features) {
        features.forEach(function (feature) {
            var style = tier.styleForFeature(feature);

            if (feature.parts || !style) return;

            if (style.glyph === 'LINEPLOT') {
                (0, _utils.pusho)(gbsFeatures, style.id, feature);
                gbsStyles[style.id] = style;
            } else if (style.glyph === 'STACKED') {
                stackedFeatures.push(feature);
            } else {
                var glyph = glyphForFeature(canvas, feature, y, style, tier);
                if (glyph) glyphs.push(glyph);
            }
        });
    }, tier.ungroupedFeatures);

    if (stackedFeatures.length > 0) {
        glyphs = glyphs.concat(makeStackedBars(stackedFeatures, tier));
    }

    for (var gbs in gbsFeatures) {
        var gf = gbsFeatures[gbs];
        var style = gbsStyles[gbs];
        if (style.glyph === 'LINEPLOT') {
            var lineGraphGlyphs = makeLinePlot(gf, style, tier, y);
            lineGraphGlyphs.forEach(function (g) {
                return glyphs.push(g);
            });
        }
    }

    return glyphs;
}

function glyphifyGroups(tier, canvas, glyphs, y) {
    var groupIds = Object.keys(tier.groupedFeatures);
    var groupGlyphs = {};

    groupIds.sort(function (g1, g2) {
        return tier.groupedFeatures[g2][0].score - tier.groupedFeatures[g1][0].score;
    });

    groupIds.forEach(function (gId) {
        var glyphs = glyphsForGroup(canvas, tier.groupedFeatures[gId], y, tier.groups[gId], tier, tier.dasSource.collapseSuperGroups && !tier.bumped ? 'collapsed_gene' : 'tent');

        if (glyphs) {
            glyphs.group = tier.groups[gId];
            groupGlyphs[gId] = glyphs;
        }
    });

    return groupGlyphs;
}

function bumpSubtiers(tier, glyphs, grid, gridOffset, gridSpacing) {
    var subtierMax = tier.subtierMax || tier.dasSource.subtierMax || tier.browser.defaultSubtierMax;

    var subtiersExceeded = false;

    var unbumpedST = new _featureDraw.SubTier();
    var bumpedSTs = [];

    // We want to add each glyph to either the subtier
    // containing unbumped subtiers, or to the first bumped subtier.
    glyphs.forEach(function (glyph) {
        // if the glyph is to be bumped...
        if (glyph.bump && (tier.bumped || tier.dasSource.collapseSuperGroups)) {

            var glyphTier = bumpedSTs.find(function (st) {
                return st.hasSpaceFor(glyph);
            });

            if (glyphTier) {
                glyphTier.add(glyph);
            } else if (bumpedSTs.length >= subtierMax) {
                subtiersExceeded = true;
            } else {
                var subtier = new _featureDraw.SubTier();
                subtier.add(glyph);
                bumpedSTs.push(subtier);
            }
        } else {
            unbumpedST.add(glyph);
        }
    });

    if (unbumpedST.glyphs.length > 0) {
        bumpedSTs = [unbumpedST].concat(bumpedSTs);
    }

    // Simple hack to make the horizontal grid in bumped subtiers (e.g. lineplots)
    // optional and configurable.
    if (grid) {
        bumpedSTs.forEach(function (subtier) {
            if (subtier.quant) {
                subtier.glyphs.unshift(new Glyphs.GridGlyph(subtier.height, gridOffset, gridSpacing));
            }
        });
    }

    bumpedSTs.forEach(function (subtier) {
        subtier.glyphs.sort(function (g1, g2) {
            return (g1.zindex || 0) - (g2.zindex || 0);
        });
    });

    return [bumpedSTs, subtiersExceeded];
}

// The whole tier is translated downward on its canvas by y pixels
function prepareSubtiers(tier, canvas) {
    var y = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;
    var grid = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;


    var MIN_PADDING = 3;
    tier.padding = typeof tier.dasSource.padding === 'number' ? tier.dasSource.padding : MIN_PADDING;

    tier.scaleVertical = typeof tier.dasSource.scaleVertical === 'boolean' ? tier.dasSource.scaleVertical : false;

    var glyphs = groupFeatures(tier, canvas, y);

    // Merge supergroups
    if (tier.dasSource.collapseSuperGroups && !tier.bumped) {
        var _loop = function _loop(sgId) {
            var sgGroup = tier.superGroups[sgId];
            tier.groups[sgId] = (0, _utils.shallowCopy)(tier.groups[sgId]);
            var group = tier.groups[sgId];
            group.isSuperGroup = true;
            var featuresByType = {};

            var sgMin = 10000000000,
                sgMax = -10000000000;
            var sgSeg = null;

            sgGroup.forEach(function (g, i) {
                var groupedFeature = tier.groupedFeatures[sgGroup[i]];
                if (!groupedFeature) return;

                groupedFeature.forEach(function (feature) {
                    (0, _utils.pusho)(featuresByType, feature.type, feature);
                    sgMin = Math.min(feature.min, sgMin);
                    sgMax = Math.max(feature.max, sgMax);
                    if (feature.segment && !sgSeg) sgSeg = feature.segment;
                });

                if (group && !group.links || group.links.length === 0) {
                    group.links = tier.groups[sgGroup[0]].links;
                }

                delete tier.groupedFeatures[sgGroup[i]];
            });

            tier.groups[sgId].max = sgMax;
            tier.groups[sgId].min = sgMin;
            tier.groups[sgId].segment = sgSeg;

            R.map(function (features) {

                var template = features[0];
                var loc = null;

                features.forEach(function (feature) {
                    var fl = new _spans.Range(feature.min, feature.max);
                    loc = loc ? (0, _spans.union)(loc, fl) : fl;
                });

                var mergedRanges = loc.ranges();

                mergedRanges.forEach(function (range) {
                    var posCoverage = ((range.max() | 0) - (range.min() | 0) + 1) * sgGroup.length;
                    var actCoverage = 0;

                    features.forEach(function (feature) {
                        var fmin = feature.min || 0;
                        var fmax = feature.max || 0;
                        if (fmin <= range.max() && fmax >= range.min()) {

                            actCoverage += Math.min(fmax, range.max()) - Math.max(fmin, range.min()) + 1;
                        }
                    });

                    var newFeature = new _das.DASFeature();
                    for (var key in template) {
                        newFeature[key] = template[key];
                    }

                    newFeature.min = range.min();
                    newFeature.max = range.max();
                    if (newFeature.label && sgGroup.length > 1) {
                        newFeature.label += ' (' + sgGroup.length + ' vars)';
                    }

                    newFeature.visualWeight = 1.0 * actCoverage / posCoverage;

                    (0, _utils.pusho)(tier.groupedFeatures, sgId, newFeature);
                });
            }, featuresByType);

            delete tier.superGroups[sgId]; // Do we want this?
        };

        for (var sgId in tier.superGroups) {
            _loop(sgId);
        }
    }

    // Glyphify groups.
    var groupGlyphs = glyphifyGroups(tier, canvas, glyphs, y);

    R.map(function (superGroup) {
        var sgGlyphs = [];
        var sgMin = 10000000000;
        var sgMax = -10000000000;

        superGroup.forEach(function (glyphs) {
            var gGlyphs = groupGlyphs[glyphs];
            if (gGlyphs) {
                sgGlyphs.push(gGlyphs);
                sgMin = Math.min(sgMin, gGlyphs.min());
                sgMax = Math.max(sgMax, gGlyphs.max());
            }
        });

        sgGlyphs.forEach(function (glyph) {
            glyphs.push(new Glyphs.PaddedGlyph(glyph, sgMin, sgMax));
        });
    }, tier.superGroups);

    R.map(function (glyph) {
        return glyphs.push(glyph);
    }, groupGlyphs);

    var _bumpSubtiers = bumpSubtiers(tier, glyphs, grid, y),
        _bumpSubtiers2 = _slicedToArray(_bumpSubtiers, 2),
        subtiers = _bumpSubtiers2[0],
        subtiersExceeded = _bumpSubtiers2[1];

    tier.glyphCacheOrigin = tier.browser.viewStart;

    if (subtiersExceeded) tier.updateStatus('Bumping limit exceeded, use the track editor to see more features');else tier.updateStatus();

    tier.subtiers = subtiers;
}

// Fills out areas that haven't been fetched as gray blocks
function drawUnmapped(tier, canvas, padding) {
    var drawStart = tier.browser.viewStart - 1000.0 / tier.browser.scale;
    var drawEnd = tier.browser.viewEnd + 1000.0 / tier.browser.scale;
    var unmappedBlocks = [];
    if (tier.knownCoverage) {
        var knownRanges = tier.knownCoverage.ranges();
        knownRanges.forEach(function (range, index) {
            if (index === 0) {
                if (range.min() > drawStart) unmappedBlocks.push({ min: drawStart, max: range.min() - 1 });
            } else {
                unmappedBlocks.push({ min: knownRanges[index - 1].max() + 1, max: range.min() - 1 });
            }

            if (index == knownRanges.length - 1 && range.max() < drawEnd) {
                unmappedBlocks.push({ min: range.max() + 1, max: drawEnd });
            }
        });
    }
    if (unmappedBlocks.length > 0) {
        canvas.fillStyle = 'gray';
        unmappedBlocks.forEach(function (block) {
            var min = (block.min - tier.browser.viewStart) * tier.browser.scale + 1000;
            var max = (block.max - tier.browser.viewStart) * tier.browser.scale + 1000;
            canvas.fillRect(min, 0, max - min, padding);
        });
    }
}

function clearViewport(canvas, width, height) {
    canvas.clearRect(0, 0, width, height);
}

// Make the viewport & canvas the correct size for the tier
function prepareViewport(tier, canvas, retina) {
    var clear = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;
    var vOffset = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 0;

    var desiredWidth = tier.browser.featurePanelWidth + 2000;
    if (retina) {
        desiredWidth *= 2;
    }

    var fpw = tier.viewport.width | 0;
    if (fpw < desiredWidth - 50) {
        tier.viewport.width = fpw = desiredWidth;
    }

    var lh = tier.padding + vOffset;

    tier.subtiers.forEach(function (s) {
        return lh += s.height + tier.padding;
    });

    lh += 6;
    lh = Math.max(lh, tier.browser.minTierHeight);

    var canvasHeight = lh;
    if (retina) {
        canvasHeight *= 2;
    }

    if (canvasHeight != tier.viewport.height) {
        tier.viewport.height = canvasHeight;
    }

    tier.viewportHolder.style.left = '-1000px';
    tier.viewport.style.width = retina ? '' + fpw / 2 + 'px' : '' + fpw + 'px';
    tier.viewport.style.height = '' + lh + 'px';
    tier.layoutHeight = Math.max(lh, tier.browser.minTierHeight);

    tier.updateHeight();
    tier.norigin = tier.browser.viewStart;

    canvas.save();
    if (retina) {
        canvas.scale(2, 2);
    }

    if (clear) {
        clearViewport(canvas, fpw, canvasHeight);
    }

    drawUnmapped(tier, canvas, lh);
}

function paint(tier, canvas) {
    var vOffset = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;

    var overlayLabelCanvas = new Glyphs.OverlayLabelCanvas();
    var offset = (tier.glyphCacheOrigin - tier.browser.viewStart) * tier.browser.scale + 1000;
    canvas.translate(offset, vOffset + tier.padding);
    overlayLabelCanvas.translate(0, tier.padding);

    tier.paintToContext(canvas, overlayLabelCanvas, offset);

    if (overlayLabelCanvas.glyphs.length > 0) tier.overlayLabelCanvas = overlayLabelCanvas;else tier.overlayLabelCanvas = null;

    canvas.restore();
}

function getScoreMinMax(tier, style) {
    var smin = tier.quantMin(style);
    var smax = tier.quantMax(style);

    if (!smax) {
        if (smin < 0) {
            smax = 0;
        } else {
            smax = 10;
        }
    }
    if (!smin) {
        smin = 0;
    }
    return [smin, smax];
}

function relScoreOrigin(score, smin, smax) {
    var relScore = (1.0 * score - smin) / (smax - smin);
    var relOrigin = -1.0 * smin / (smax - smin);

    return [relScore, relOrigin];
}

function getRefSeq(tier, min, max) {
    var refSeq = null;
    if (tier.currentSequence) {
        var csStart = tier.currentSequence.start | 0;
        var csEnd = tier.currentSequence.end | 0;
        if (csStart <= max && csEnd >= min) {
            var sfMin = Math.max(min, csStart);
            var sfMax = Math.min(max, csEnd);

            refSeq = tier.currentSequence.seq.substr(sfMin - csStart, sfMax - sfMin + 1);
            while (min < sfMin) {
                refSeq = 'N' + refSeq;
                sfMin--;
            }
            while (max > sfMax) {
                refSeq = refSeq + 'N';
                sfMax++;
            }
        }
    }
    return refSeq;
}

function featureToCrossLikeGlyph(canvas, tier, feature, y, glyphType, style, forceHeight, noLabel) {
    var scale = tier.browser.scale;
    var origin = tier.browser.viewStart;

    var score = feature.score;
    var label = feature.label || feature.id;

    var minPos = (feature.min - origin) * scale;
    var maxPos = Math.max((feature.max - origin + 1) * scale, minPos + 1);

    var height = (tier.forceHeight || style.HEIGHT || forceHeight || 12) * 1.0;
    var requiredHeight = height;

    var glyph = null;
    var quant = null;

    var stroke = style.FGCOLOR || 'black';
    var fill = style.BGCOLOR || 'none';
    var outline = style.STROKECOLOR;

    if (style.BGITEM && feature.itemRgb) {
        stroke = feature.itemRgb;
    } else if ((0, _das.isDasBooleanTrue)(style.COLOR_BY_SCORE2)) {
        var grad = style.BGGRAD || style._gradient;
        if (!grad) {
            grad = (0, _color.makeGradient)(50, style.COLOR1, style.COLOR2, style.COLOR3);
            style._gradient = grad;
        }

        var score2 = feature.score2;
        if (score2 !== undefined || !stroke) {
            score2 = score2 || 0;

            var smin2 = style.MIN2 ? 1.0 * style.MIN2 : 0.0;
            var smax2 = style.MAX2 ? 1.0 * style.MAX2 : 1.0;
            var relScore2 = (1.0 * score2 - smin2) / (smax2 - smin2);

            var step = relScore2 * grad.length | 0;
            R.clamp(0, step, grad.length - 1);
            stroke = grad[step];
        }
    }

    var size = style.SIZE || height;
    if (style.RSIZE) {
        size = 1.0 * style.RSIZE * height;
    }

    if (style.STROKETHRESHOLD) {
        if (size < 1.0 * style.STROKETHRESHOLD) outline = null;
    }

    var mid = (minPos + maxPos) / 2;

    if (glyphType === 'EX') {
        glyph = new Glyphs.ExGlyph(mid, size, stroke);
    } else if (glyphType === 'TRIANGLE') {
        var dir = style.DIRECTION || 'N';
        var width = style.LINEWIDTH || size;
        glyph = new Glyphs.TriangleGlyph(mid, size, dir, width, stroke, outline);
    } else if (glyphType === 'DOT') {
        glyph = new Glyphs.DotGlyph(mid, size, stroke, outline);
    } else if (glyphType === 'PLIMSOLL') {
        glyph = new Glyphs.PlimsollGlyph(mid, size, 0.2 * size, stroke, outline);
    } else if (glyphType === 'SQUARE') {
        glyph = new Glyphs.BoxGlyph(mid - size / 2, 0, size, size, stroke, outline);
    } else if (glyphType === 'STAR') {
        var points = style.POINTS || 5;
        glyph = new Glyphs.StarGlyph(mid, size / 2, points, stroke, outline);
    } else {
        glyph = new Glyphs.CrossGlyph(mid, size, stroke);
    }

    if (fill && fill !== 'none' && maxPos - minPos > 5) {
        var boxGlyph = new Glyphs.BoxGlyph(minPos, 0, maxPos - minPos, size, fill);
        glyph = new Glyphs.GroupGlyph([boxGlyph, glyph]);
    }

    if ((0, _das.isDasBooleanTrue)(style.SCATTER)) {
        var _getScoreMinMax = getScoreMinMax(tier, style),
            _getScoreMinMax2 = _slicedToArray(_getScoreMinMax, 2),
            smin = _getScoreMinMax2[0],
            smax = _getScoreMinMax2[1];

        var _relScoreOrigin = relScoreOrigin(score, smin, smax),
            _relScoreOrigin2 = _slicedToArray(_relScoreOrigin, 2),
            relScore = _relScoreOrigin2[0],
            relOrigin = _relScoreOrigin2[1];

        if (relScore < 0.0 || relScore > 1.0) {
            // Glyph is out of bounds.
            // Should we allow for "partially showing" glyphs?

            return null;
        } else {
            var originShift = function originShift(x) {
                return (x - relOrigin) * requiredHeight;
            };
            height = Math.max(1, originShift(relScore));
            y = y + originShift(1);

            if (relScore >= relOrigin) y = y - height;

            quant = { min: smin, max: smax };

            var heightFudge = 0;
            var featureLabel = R.defaultTo(style.LABEL, feature.forceLabel);

            if ((0, _das.isDasBooleanNotFalse)(featureLabel) && label && !noLabel) {
                glyph = new Glyphs.LabelledGlyph(canvas, glyph, label, true, null, featureLabel == 'above' ? 'above' : 'below');
                if (featureLabel === 'above') {
                    heightFudge = glyph.textHeight + 2;
                }
                noLabel = true;
            }
            glyph = new Glyphs.TranslatedGlyph(glyph, 0, y - size / 2 - heightFudge, requiredHeight);
        }
    }

    return [glyph, quant];
}

function featureToGradientLikeGlyph(canvas, tier, feature, y, glyphType, style, forceHeight) {
    var scale = tier.browser.scale;
    var origin = tier.browser.viewStart;

    var score = feature.score;

    var minPos = (feature.min - origin) * scale;
    var maxPos = Math.max((feature.max - origin + 1) * scale, minPos + 1);

    var height = (tier.forceHeight || style.HEIGHT || forceHeight || 12) * 1.0;
    var requiredHeight = height * 1.0;

    var glyph = null;
    var quant = null;

    var centerOnAxis = (0, _das.isDasBooleanTrue)(style["AXISCENTER"]);

    var _getScoreMinMax3 = getScoreMinMax(tier, style),
        _getScoreMinMax4 = _slicedToArray(_getScoreMinMax3, 2),
        smin = _getScoreMinMax4[0],
        smax = _getScoreMinMax4[1];

    // AUTOMIN & AUTOMAX respectively set the lower and upper bounds


    if ((0, _das.isDasBooleanTrue)(style.AUTOMIN)) {
        smin = tier.currentFeaturesMinScore * 0.95;
        console.log("smin:\t" + smin);
    }
    if ((0, _das.isDasBooleanTrue)(style.AUTOMAX)) {
        smax = tier.currentFeaturesMaxScore * 1.05;
        console.log("smax:\t" + smax);
    }

    if (1.0 * score < 1.0 * smin) {
        score = smin;
    }
    if (1.0 * score > 1.0 * smax) {
        score = smax;
    }

    // Shift smin/smax in case we want to center the histogram
    // on the horizontal axis
    if (centerOnAxis) {
        var tmin = tier.quantMin(style);
        var tmax = tier.quantMax(style);

        if ((0, _das.isDasBooleanTrue)(style.AUTOMIN)) {
            tmin = tier.currentFeaturesMinScore * 0.95;
        }
        if ((0, _das.isDasBooleanTrue)(style.AUTOMAX)) {
            tmax = tier.currentFeaturesMaxScore * 1.05;
        }

        smin = tmin - (tmax - tmin) / 2;
        smax = tmax - (tmax - tmin) / 2;
    }

    var _relScoreOrigin3 = relScoreOrigin(score, smin, smax),
        _relScoreOrigin4 = _slicedToArray(_relScoreOrigin3, 2),
        relScore = _relScoreOrigin4[0],
        relOrigin = _relScoreOrigin4[1];

    if (glyphType === 'HISTOGRAM') {
        var originShift = function originShift(x) {
            return x - Math.max(0, relOrigin);
        };
        height = Math.abs(originShift(relScore)) * requiredHeight;
        y = y + originShift(1.0) * requiredHeight;

        if (relScore >= relOrigin) y -= height;

        if (centerOnAxis) y += height / 2;

        if ((0, _das.isDasBooleanTrue)(style["HIDEAXISLABEL"])) quant = null;else quant = { min: smin, max: smax };
    }

    var stroke = style.FGCOLOR || null;
    var fill = style.BGCOLOR || style.COLOR1 || 'green';
    if (style.BGITEM && feature.itemRgb) fill = feature.itemRgb;
    var alpha = style.ALPHA ? 1.0 * style.ALPHA : null;

    if (style.BGGRAD) {
        var grad = style.BGGRAD;
        var step = relScore * grad.length | 0;
        step = R.clamp(0, step, grad.length - 1);
        fill = grad[step];
    }

    if (style.COLOR2) {
        var _grad = style._gradient;
        if (!_grad) {
            _grad = (0, _color.makeGradient)(50, style.COLOR1, style.COLOR2, style.COLOR3);
            style._gradient = _grad;
        }

        var _step = relScore * _grad.length | 0;
        _step = R.clamp(0, _step, _grad.length - 1);
        fill = _grad[_step];
    }

    var tempGlyph = new Glyphs.BoxGlyph(minPos, y, maxPos - minPos, height, fill, stroke, alpha);
    glyph = new Glyphs.TranslatedGlyph(tempGlyph, 0, 0, requiredHeight);

    return [glyph, quant];
}

function featureToPointGlyph(tier, feature, style) {
    var scale = tier.browser.scale;
    var origin = tier.browser.viewStart;

    var score = feature.score;

    var minPos = (feature.min - origin) * scale;
    var maxPos = Math.max((feature.max - origin + 1) * scale, minPos + 1);

    var height = tier.forceHeight || style.HEIGHT || 30;

    var glyph = null;
    var quant = null;

    var _getScoreMinMax5 = getScoreMinMax(tier, style),
        _getScoreMinMax6 = _slicedToArray(_getScoreMinMax5, 2),
        smin = _getScoreMinMax6[0],
        smax = _getScoreMinMax6[1];

    var yscale = 1.0 * height / (smax - smin);
    var relScore = (1.0 * score - smin) / (smax - smin);
    var sc = (score - 1.0 * smin) * yscale | 0;
    quant = { min: smin, max: smax };

    var fill = style.FGCOLOR || style.COLOR1 || 'black';
    if (style.COLOR2) {
        var grad = style._gradient;
        if (!grad) {
            grad = (0, _color.makeGradient)(50, style.COLOR1, style.COLOR2, style.COLOR3);
            style._gradient = grad;
        }

        var step = relScore * grad.length | 0;
        step = R.clamp(0, step, grad.length - 1);
        fill = grad[step];
    }

    glyph = new Glyphs.PointGlyph((minPos + maxPos) / 2, height - sc, height, fill);

    return [glyph, quant];
}

function sequenceGlyph(canvas, tier, feature, style, forceHeight) {
    var scale = tier.browser.scale;
    var origin = tier.browser.viewStart;

    var min = feature.min;
    var max = feature.max;
    var minPos = (feature.min - origin) * scale;
    var maxPos = Math.max((feature.max - origin + 1) * scale, minPos + 1);

    var height = (tier.forceHeight || style.HEIGHT || forceHeight || 12) * 1.0;

    var glyph = null;

    var rawseq = feature.seq;
    var seq = rawseq;
    var rawquals = feature.quals;
    var quals = rawquals;
    var insertionLabels = (0, _das.isDasBooleanTrue)(style.__INSERTIONS);

    var indels = [];
    if (feature.cigar) {
        var ops = (0, _cigar.parseCigar)(feature.cigar);
        seq = '';
        quals = '';
        var cursor = 0;

        ops.forEach(function (co) {
            if (co.op === 'M') {
                seq += rawseq.substr(cursor, co.cnt);
                quals += rawquals.substr(cursor, co.cnt);
                cursor += co.cnt;
            } else if (co.op === 'D') {
                seq += "-".repeat(co.cnt);
                quals += "Z".repeat(co.cnt);
            } else if (co.op === 'I') {
                var inseq = rawseq.substr(cursor, co.cnt);
                var ig = new Glyphs.TranslatedGlyph(new Glyphs.TriangleGlyph(minPos + seq.length * scale, 6, 'S', 5, tier.browser.baseColors['I']), 0, -2, 0);
                if (insertionLabels) ig = new Glyphs.LabelledGlyph(canvas, ig, inseq, false, 'center', 'above', '7px sans-serif');
                ig.feature = { label: 'Insertion: ' + inseq, type: 'insertion', method: 'insertion' };
                indels.push(ig);

                cursor += co.cnt;
            } else if (co.op === 'S') {
                cursor += co.cnt;
            } else {
                console.log('unknown cigop' + co.op);
            }
        });
    }

    var refSeq = getRefSeq(tier, min, max);
    if (seq && refSeq && (style.__SEQCOLOR === 'mismatch' || style.__SEQCOLOR === 'mismatch-all')) {
        var mismatchSeq = [];
        var match = feature.orientation === '-' ? ',' : '.';
        for (var i = 0; i < seq.length; ++i) {
            mismatchSeq.push(seq[i] == refSeq[i] ? match : seq[i]);
        }
        seq = mismatchSeq.join('');
    }

    var strandColor = feature.orientation === '-' ? style._minusColor || 'lightskyblue' : style._plusColor || 'lightsalmon';

    if (style.__disableQuals) quals = false;

    glyph = new Glyphs.SequenceGlyph(tier.browser.baseColors, strandColor, minPos, maxPos, height, seq, refSeq, style.__SEQCOLOR, quals, !(0, _das.isDasBooleanTrue)(style.__CLEARBG), tier.scaleVertical);

    if (insertionLabels) glyph = new Glyphs.TranslatedGlyph(glyph, 0, 7);

    if (indels.length > 0) {
        indels.splice(0, 0, glyph);
        glyph = new Glyphs.GroupGlyph(indels);
    }

    return glyph;
}

function makeLinePlot(features, style, tier, yshift) {
    yshift = yshift || 0;

    var origin = tier.browser.viewStart,
        scale = tier.browser.scale;
    var height = tier.forceHeight || style.HEIGHT || 30;
    var min = tier.quantMin(style);
    var max = tier.quantMax(style);

    // AUTOMIN & AUTOMAX respectively set the lower and upper bounds
    if ((0, _das.isDasBooleanTrue)(style.AUTOMIN)) {
        // add some basically arbitrary padding
        min = tier.currentFeaturesMinScore * 0.95;
    }
    if ((0, _das.isDasBooleanTrue)(style.AUTOMAX)) {
        max = tier.currentFeaturesMaxScore * 1.05;
    }

    var yscale = 1.0 * height / (max - min);
    var color = style.FGCOLOR || style.COLOR1 || 'black';

    var prevSign = 1;
    var curSign = null;

    var curGlyphPoints = [];
    var glyphSequences = [];

    var prevPoint = null;

    features.forEach(function (f) {
        var px = (((f.min | 0) + (f.max | 0)) / 2 - origin) * scale;
        var sc = (f.score - 1.0 * min) * yscale | 0;

        // Additive tracks are always above the x-axis, and are colored
        // depending on whether the score is positive or negative.
        if ((0, _das.isDasBooleanTrue)(style.ADDITIVE)) {
            curSign = f.score < 0 ? -1 : 1;

            if (curSign !== prevSign) {
                glyphSequences.push({
                    points: curGlyphPoints,
                    color: prevSign === 1 ? style.POSCOLOR : style.NEGCOLOR
                });
                curGlyphPoints = [];
                // Need to add the previous point to this sequence,
                // otherwise there is a gap in the resulting plot
                curGlyphPoints.push(prevPoint);
            }
            prevSign = curSign;
        } else {
            curSign = 1;
        }

        var py = height - sc * curSign + yshift;
        prevPoint = { x: px, y: py };
        curGlyphPoints.push(prevPoint);
    });

    // Need to add the final sequence of points as well.
    if ((0, _das.isDasBooleanTrue)(style.ADDITIVE)) {
        color = curSign === 1 ? style.POSCOLOR : style.NEGCOLOR;
    }
    glyphSequences.push({
        points: curGlyphPoints,
        color: color
    });

    var lggs = glyphSequences.map(function (gs) {
        var lgg = new Glyphs.LineGraphGlyph(gs.points, gs.color, height);
        lgg.quant = { min: min, max: max };

        if (style.ZINDEX) lgg.zindex = style.ZINDEX | 0;

        return lgg;
    });

    return lggs;
}

function makeStackedBars(features, tier) {
    var glyphs = [];

    var posStacks = [],
        negStacks = [];

    var scale = tier.browser.scale,
        origin = tier.browser.viewStart;
    for (var fi = 0; fi < features.length; ++fi) {
        var feature = features[fi];
        var style = tier.styleForFeature(feature);
        var score = feature.score * 1.0;

        var height = tier.forceHeight || style.HEIGHT || 12;
        var requiredHeight = height = 1.0 * height;

        var min = feature.min;
        var max = feature.max;

        var minPos = (min - origin) * scale;
        var rawMaxPos = (max - origin + 1) * scale;
        var maxPos = Math.max(rawMaxPos, minPos + 1);

        // This should somewhat match the 'HISTOGRAM' path.

        var smin = tier.quantMin(style);
        var smax = tier.quantMax(style);

        if (!smax) {
            if (smin < 0) {
                smax = 0;
            } else {
                smax = 10;
            }
        } else {
            smax = smax * 1.0;
        }

        if (!smin) {
            smin = 0;
        } else {
            smin = smin * 1.0;
        }

        var stackOrigin;
        if (score >= 0) {
            stackOrigin = posStacks[min] || 0;
            posStacks[min] = stackOrigin + score;
        } else {
            stackOrigin = negStacks[min] || 0;
            negStacks[min] = stackOrigin + score;
        }

        if (stackOrigin > smax || stackOrigin < smin) {
            // Stack has extended outside of range.
            continue;
        }

        if (stackOrigin + score < smin) {
            score = smin - stackOrigin;
        }
        if (stackOrigin + score > smax) {
            score = smax - stackOrigin;
        }

        var relScoreEnd = (score + stackOrigin - smin) / (smax - smin);
        var relScoreStart = (stackOrigin - smin) / (smax - smin);
        var relScoreMax = Math.max(relScoreStart, relScoreEnd);
        var relScoreMin = Math.min(relScoreStart, relScoreEnd);

        height = (relScoreMax - relScoreMin) * requiredHeight;
        var y = (1.0 - relScoreMax) * requiredHeight;

        var stroke = style.FGCOLOR || null;
        var fill = style.BGCOLOR || style.COLOR1 || 'green';
        if (style.BGITEM && feature.itemRgb) fill = feature.itemRgb;
        var alpha = style.ALPHA ? 1.0 * style.ALPHA : null;

        var gg = new Glyphs.BoxGlyph(minPos, y, maxPos - minPos, height, fill, stroke, alpha);
        gg = new Glyphs.TranslatedGlyph(gg, 0, 0, requiredHeight);
        gg.feature = feature;
        gg.quant = {
            min: smin, max: smax
        };
        if (style.ZINDEX) {
            gg.zindex = style.ZINDEX | 0;
        }
        glyphs.push(gg);
    }
    return glyphs;
}

// height is subtier height
function createQuantOverlay(tier, height) {
    var retina = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;

    var width = 50;

    tier.quantOverlay.height = height;
    tier.quantOverlay.width = retina ? width * 2 : width;
    tier.quantOverlay.style.height = '' + (retina ? height / 2 : height) + 'px';
    tier.quantOverlay.style.width = '' + width + 'px';
    tier.quantOverlay.style.display = 'block';

    var canvas = tier.quantOverlay.getContext('2d');

    if (retina) {
        canvas.scale(2, 2);
    }

    return canvas;
}

function paintQuant(canvas, tier, quant, tics) {
    canvas.save();

    var h = tier.quantOverlay.height;
    var w = 100;

    var ticSpacing = (h + tier.padding * 2) / tics;
    var ticInterval = (quant.max - quant.min) / tics;

    canvas.fillStyle = 'white';
    canvas.globalAlpha = 0.6;
    if (tier.browser.rulerLocation == 'right') {
        canvas.fillRect(w - 30, 0, 30, h + tier.padding * 2);
    } else {
        canvas.fillRect(0, 0, 30, h + tier.padding * 2);
    }
    canvas.globalAlpha = 1.0;

    canvas.strokeStyle = 'black';
    canvas.lineWidth = 1;
    canvas.beginPath();
    if (tier.browser.rulerLocation == 'right') {
        canvas.moveTo(w - 8, tier.padding);
        canvas.lineTo(w, tier.padding);
        canvas.lineTo(w, h + tier.padding);
        canvas.lineTo(w - 8, h + tier.padding);

        for (var t = 1; t < tics - 1; t++) {
            var ty = t * ticSpacing;
            canvas.moveTo(w, ty);
            canvas.lineTo(w - 5, ty);
        }
    } else {
        canvas.moveTo(8, tier.padding);
        canvas.lineTo(0, tier.padding);
        canvas.lineTo(0, h + tier.padding);
        canvas.lineTo(8, h + tier.padding);

        for (var _t = 1; _t < tics - 1; _t++) {
            var _ty = _t * ticSpacing;
            canvas.moveTo(0, _ty);
            canvas.lineTo(5, _ty);
        }
    }
    canvas.stroke();

    canvas.fillStyle = 'black';

    if (tier.browser.rulerLocation == 'right') {
        canvas.textAlign = 'right';
        canvas.fillText((0, _numformats.formatQuantLabel)(quant.max), w - 9, 8);
        canvas.fillText((0, _numformats.formatQuantLabel)(quant.min), w - 9, h + tier.padding);

        for (var _t2 = 1; _t2 < tics - 1; _t2++) {
            var _ty2 = _t2 * ticSpacing;
            canvas.fillText((0, _numformats.formatQuantLabel)(1.0 * quant.max - _t2 * ticInterval), w - 9, _ty2 + 3);
        }
    } else {
        canvas.textAlign = 'left';
        canvas.fillText((0, _numformats.formatQuantLabel)(quant.max), 9, 8);
        canvas.fillText((0, _numformats.formatQuantLabel)(quant.min), 9, h + tier.padding);

        for (var _t3 = 1; _t3 < tics - 1; _t3++) {
            var _ty3 = _t3 * ticSpacing;
            canvas.fillText((0, _numformats.formatQuantLabel)(1.0 * quant.max - _t3 * ticInterval), 9, _ty3 + 3);
        }
    }

    canvas.restore();
}

},{"./cigar.js":8,"./color.js":9,"./das.js":10,"./feature-draw.js":20,"./glyphs.js":23,"./numformats":29,"./sequence-draw.js":35,"./spans.js":40,"./utils.js":55,"ramda":62}],12:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2010
//
// domui.js: SVG UI components
//

"use strict";

if (typeof require !== 'undefined') {
    var browser = require('./cbrowser');
    var Browser = browser.Browser;

    var utils = require('./utils');
    var makeElement = utils.makeElement;
    var removeChildren = utils.removeChildren;
}

Browser.prototype.removeAllPopups = function () {
    removeChildren(this.hPopupHolder);
    removeChildren(this.popupHolder);
};

Browser.prototype.makeTooltip = function (ele, text) {
    var isin = false;
    var thisB = this;
    var timer = null;
    var _outlistener;
    _outlistener = function outlistener(ev) {
        isin = false;
        if (timer) {
            clearTimeout(timer);
            timer = null;
        }
        ele.removeEventListener('mouseout', _outlistener, false);
    };

    var setup = function setup(ev) {
        var mx = ev.clientX + window.scrollX,
            my = ev.clientY + window.scrollY;
        if (!timer) {
            timer = setTimeout(function () {
                var ttt;
                if (typeof text === 'function') {
                    ttt = text();
                } else {
                    ttt = text;
                }

                var popup = makeElement('div', [makeElement('div', null, { className: 'tooltip-arrow' }), makeElement('div', ttt, { className: 'tooltip-inner' })], { className: 'tooltip bottom in' }, {
                    display: 'block',
                    top: '' + (my + 20) + 'px',
                    left: '' + Math.max(mx - 30, 20) + 'px'
                });
                thisB.hPopupHolder.appendChild(popup);
                var _moveHandler;
                _moveHandler = function moveHandler(ev) {
                    try {
                        thisB.hPopupHolder.removeChild(popup);
                    } catch (e) {
                        // May have been removed by other code which clears the popup layer.
                    }
                    window.removeEventListener('mousemove', _moveHandler, false);
                    if (isin) {
                        if (ele.offsetParent == null) {} else {
                            setup(ev);
                        }
                    }
                };
                window.addEventListener('mousemove', _moveHandler, false);
                timer = null;
            }, 1000);
        }
    };

    ele.addEventListener('mouseover', function (ev) {
        isin = true;
        ele.addEventListener('mouseout', _outlistener, false);
        setup(ev);
    }, false);
    ele.addEventListener('DOMNodeRemovedFromDocument', function (ev) {
        isin = false;
        if (timer) {
            clearTimeout(timer);
            timer = null;
        }
    }, false);
};

Browser.prototype.popit = function (ev, name, ele, opts) {
    var thisB = this;
    if (!opts) opts = {};
    if (!ev) ev = {};

    var width = opts.width || 200;

    var mx, my;

    if (ev.clientX) {
        var mx = ev.clientX,
            my = ev.clientY;
    } else {
        mx = 500;my = 50;
    }
    mx += document.documentElement.scrollLeft || document.body.scrollLeft;
    my += document.documentElement.scrollTop || document.body.scrollTop;
    var winWidth = window.innerWidth;

    var top = my;
    var left = Math.min(mx - width / 2 - 4, winWidth - width - 30);

    var popup = makeElement('div');
    popup.className = 'popover fade ' + (ev.clientX ? 'bottom ' : '') + 'in';
    popup.style.display = 'block';
    popup.style.position = 'absolute';
    popup.style.top = '' + top + 'px';
    popup.style.left = '' + left + 'px';
    popup.style.width = width + 'px';
    if (width > 276) {
        // HACK Bootstrappification...
        popup.style.maxWidth = width + 'px';
    }

    popup.appendChild(makeElement('div', null, { className: 'arrow' }));

    if (name) {
        var closeButton = makeElement('button', '', { className: 'close' });
        closeButton.innerHTML = '&times;';

        closeButton.addEventListener('mouseover', function (ev) {
            closeButton.style.color = 'red';
        }, false);
        closeButton.addEventListener('mouseout', function (ev) {
            closeButton.style.color = 'black';
        }, false);
        closeButton.addEventListener('click', function (ev) {
            ev.preventDefault();ev.stopPropagation();
            thisB.removeAllPopups();
        }, false);
        var tbar = makeElement('h4', [makeElement('span', name, null, { maxWidth: '200px' }), closeButton], {/*className: 'popover-title' */}, { paddingLeft: '10px', paddingRight: '10px' });

        var dragOX, dragOY;
        var moveHandler, _upHandler;
        moveHandler = function moveHandler(ev) {
            ev.stopPropagation();ev.preventDefault();
            left = left + (ev.clientX - dragOX);
            if (left < 8) {
                left = 8;
            }if (left > winWidth - width - 32) {
                left = winWidth - width - 26;
            }
            top = top + (ev.clientY - dragOY);
            top = Math.max(10, top);
            popup.style.top = '' + top + 'px';
            popup.style.left = '' + Math.min(left, winWidth - width - 10) + 'px';
            dragOX = ev.clientX;dragOY = ev.clientY;
        };
        _upHandler = function upHandler(ev) {
            ev.stopPropagation();ev.preventDefault();
            window.removeEventListener('mousemove', moveHandler, false);
            window.removeEventListener('mouseup', _upHandler, false);
        };
        tbar.addEventListener('mousedown', function (ev) {
            ev.preventDefault();ev.stopPropagation();
            dragOX = ev.clientX;dragOY = ev.clientY;
            window.addEventListener('mousemove', moveHandler, false);
            window.addEventListener('mouseup', _upHandler, false);
        }, false);

        popup.appendChild(tbar);
    }

    popup.appendChild(makeElement('div', ele, { className: 'popover-content' }, {
        padding: '0px'
    }));
    this.hPopupHolder.appendChild(popup);

    var popupHandle = {
        node: popup,
        displayed: true
    };
    popup.addEventListener('DOMNodeRemoved', function (ev) {
        if (ev.target == popup) {
            popupHandle.displayed = false;
        }
    }, false);
    return popupHandle;
};

function makeTreeTableSection(title, content, visible) {
    var ttButton = makeElement('i');
    function update() {
        if (visible) {
            ttButton.className = 'fa fa-caret-down';
            content.style.display = 'table';
        } else {
            ttButton.className = 'fa fa-caret-right';
            content.style.display = 'none';
        }
    }
    update();

    ttButton.addEventListener('click', function (ev) {
        ev.preventDefault();ev.stopPropagation();
        visible = !visible;
        update();
    }, false);

    var heading = makeElement('h6', [ttButton, ' ', title], {}, { display: 'block', background: 'gray', color: 'white', width: '100%', padding: '5px 2px', margin: '0px' });
    return makeElement('div', [heading, content], {});
}

if (typeof module !== 'undefined') {
    module.exports = {
        makeTreeTableSection: makeTreeTableSection
    };
}

},{"./cbrowser":6,"./utils":55}],13:[function(require,module,exports){
/* jshint esversion: 6 */
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.drawTier = exports.renderTier = undefined;

var _defaultRenderer = require("./default-renderer");

var DefaultRenderer = _interopRequireWildcard(_defaultRenderer);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

exports.renderTier = renderTier;
exports.drawTier = drawTier;


function renderTier(status, tier) {
    drawTier(tier);
    tier.updateStatus(status);
}

function drawTier(tier) {
    var canvas = tier.viewport.getContext("2d");
    var retina = tier.browser.retina && window.devicePixelRatio > 1;
    if (retina) {
        canvas.scale(2, 2);
    }

    var features = tier.currentFeatures;
    var sequence = tier.currentSequence;
    if (tier.sequenceSource) {
        DefaultRenderer.drawSeqTier(tier, sequence);
    } else if (features) {
        DefaultRenderer.prepareSubtiers(tier, canvas);
    } else {
        console.log("No sequence or features in tier!");
    }

    if (tier.subtiers) {
        DefaultRenderer.prepareViewport(tier, canvas, retina, true);
    }

    tier.drawOverlay();
    tier.paintQuant();

    if (typeof tier.dasSource.drawCallback === "function") {
        tier.dasSource.drawCallback(canvas, tier);
    }

    tier.originHaxx = 0;
    tier.browser.arrangeTiers();
}

},{"./default-renderer":11}],14:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2014
//
// encode.js: interface for ENCODE DCC services
//

"use strict";

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

if (typeof require !== 'undefined') {
    var Promise = require('es6-promise').Promise;
}

function lookupEncodeURI(uri, json) {
    if (uri.indexOf('?') < 0) uri = uri + '?soft=true';

    return new Promise(function (accept, reject) {
        var req = new XMLHttpRequest();
        req.onreadystatechange = function () {
            if (req.readyState == 4) {
                if (req.status >= 300) {
                    reject('Error code ' + req.status);
                } else {
                    var resp = JSON.parse(req.response);
                    accept(json ? resp : resp.location);
                }
            }
        };

        req.open('GET', uri, true);
        req.setRequestHeader('Accept', 'application/json');
        req.responseType = 'text';
        req.send();
    });
}

function EncodeURLHolder(url) {
    this.rawurl = url;
}

EncodeURLHolder.prototype.getURLPromise = function () {
    if (this.urlPromise && this.urlPromiseValidity > Date.now()) {
        return this.urlPromise;
    } else {
        this.urlPromise = lookupEncodeURI(this.rawurl, true).then(function (resp) {
            return resp.location;
        });
        this.urlPromiseValidity = Date.now() + 12 * 3600 * 1000;
        return this.urlPromise;
    }
};

function EncodeFetchable(url, start, end, opts) {
    if (!opts) {
        if ((typeof start === 'undefined' ? 'undefined' : _typeof(start)) === 'object') {
            opts = start;
            start = undefined;
        } else {
            opts = {};
        }
    }

    this.url = typeof url === 'string' ? new EncodeURLHolder(url) : url;
    this.start = start || 0;
    if (end) {
        this.end = end;
    }
    this.opts = opts;
}

EncodeFetchable.prototype.slice = function (s, l) {
    if (s < 0) {
        throw 'Bad slice ' + s;
    }

    var ns = this.start,
        ne = this.end;
    if (ns && s) {
        ns = ns + s;
    } else {
        ns = s || ns;
    }
    if (l && ns) {
        ne = ns + l - 1;
    } else {
        ne = ne || l - 1;
    }
    return new EncodeFetchable(this.url, ns, ne, this.opts);
};

EncodeFetchable.prototype.fetchAsText = function (callback) {
    var self = this;
    var req = new XMLHttpRequest();
    var length;
    self.url.getURLPromise().then(function (url) {
        req.open('GET', url, true);

        if (self.end) {
            if (self.end - self.start > 100000000) {
                throw 'Monster fetch!';
            }
            req.setRequestHeader('Range', 'bytes=' + self.start + '-' + self.end);
            length = self.end - self.start + 1;
        }

        req.onreadystatechange = function () {
            if (req.readyState == 4) {
                if (req.status == 200 || req.status == 206) {
                    return callback(req.responseText);
                } else {
                    return callback(null);
                }
            }
        };
        if (self.opts.credentials) {
            req.withCredentials = true;
        }
        req.send();
    }).catch(function (err) {
        console.log(err);
        return callback(null);
    });
};

EncodeFetchable.prototype.salted = function () {
    return this;
};

EncodeFetchable.prototype.fetch = function (callback, attempt, truncatedLength) {
    var self = this;

    attempt = attempt || 1;
    if (attempt > 3) {
        return callback(null);
    }

    self.url.getURLPromise().then(function (url) {
        var req = new XMLHttpRequest();
        var length;
        req.open('GET', url, true);
        req.overrideMimeType('text/plain; charset=x-user-defined');
        if (self.end) {
            if (self.end - self.start > 100000000) {
                throw 'Monster fetch!';
            }
            req.setRequestHeader('Range', 'bytes=' + self.start + '-' + self.end);
            length = self.end - self.start + 1;
        }
        req.responseType = 'arraybuffer';
        req.onreadystatechange = function () {
            if (req.readyState == 4) {
                if (req.status == 200 || req.status == 206) {
                    if (req.response) {
                        var bl = req.response.byteLength;
                        if (length && length != bl && (!truncatedLength || bl != truncatedLength)) {
                            return self.fetch(callback, attempt + 1, bl);
                        } else {
                            return callback(req.response);
                        }
                    } else if (req.mozResponseArrayBuffer) {
                        return callback(req.mozResponseArrayBuffer);
                    } else {
                        var r = req.responseText;
                        if (length && length != r.length && (!truncatedLength || r.length != truncatedLength)) {
                            return self.fetch(callback, attempt + 1, r.length);
                        } else {
                            return callback(bstringToBuffer(req.responseText));
                        }
                    }
                } else {
                    return self.fetch(callback, attempt + 1);
                }
            }
        };
        if (self.opts.credentials) {
            req.withCredentials = true;
        }
        req.send();
    }).catch(function (err) {
        console.log(err);
    });
};

function bstringToBuffer(result) {
    if (!result) {
        return null;
    }

    var ba = new Uint8Array(result.length);
    for (var i = 0; i < ba.length; ++i) {
        ba[i] = result.charCodeAt(i);
    }
    return ba.buffer;
}

if (typeof module !== 'undefined') {
    module.exports = {
        lookupEncodeURI: lookupEncodeURI,
        EncodeFetchable: EncodeFetchable
    };
}

},{"es6-promise":59}],15:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2013
//
// ensembljson.js -- query the Ensembl REST API.
//

"use strict";

if (typeof require !== 'undefined') {
    var sa = require('./sourceadapters');
    var dalliance_registerSourceAdapterFactory = sa.registerSourceAdapterFactory;
    var FeatureSourceBase = sa.FeatureSourceBase;

    var das = require('./das');
    var DASStylesheet = das.DASStylesheet;
    var DASStyle = das.DASStyle;
    var DASFeature = das.DASFeature;
    var DASGroup = das.DASGroup;
}

function EnsemblFeatureSource(source) {
    FeatureSourceBase.call(this);
    this.source = source;
    this.base = source.uri || '//rest.ensembl.org';
    if (this.base.indexOf('//') === 0) {
        var proto = window.location.protocol;
        if (proto == 'http:' || proto == 'https:') {
            // Protocol-relative URLs okay.
        } else {
            this.base = 'http:' + this.base;
        }
    }
    this.species = source.species || 'human';

    if (typeof source.type === 'string') {
        this.type = [source.type];
    } else {
        this.type = source.type || ['regulatory'];
    }
}

EnsemblFeatureSource.prototype = Object.create(FeatureSourceBase.prototype);
EnsemblFeatureSource.prototype.constructor = EnsemblFeatureSource;

EnsemblFeatureSource.prototype.getStyleSheet = function (callback) {
    var stylesheet = new DASStylesheet();

    var tsStyle = new DASStyle();
    tsStyle.glyph = '__NONE';
    if (this.type.indexOf('exon') >= 0) stylesheet.pushStyle({ type: 'transcript' }, null, tsStyle);
    if (this.type.indexOf('exon') >= 0 || this.type.indexOf('transcript') >= 0) stylesheet.pushStyle({ type: 'gene' }, null, tsStyle);

    var cdsStyle = new DASStyle();
    cdsStyle.glyph = 'BOX';
    cdsStyle.FGCOLOR = 'black';
    cdsStyle.BGCOLOR = 'red';
    cdsStyle.HEIGHT = 8;
    cdsStyle.BUMP = true;
    cdsStyle.LABEL = true;
    cdsStyle.ZINDEX = 10;
    stylesheet.pushStyle({ type: 'cds' }, null, cdsStyle);

    {
        var varStyle = new DASStyle();
        varStyle.glyph = 'SQUARE';
        varStyle.BUMP = 'yes';
        varStyle.LABEL = 'no';
        // varStyle.BGCOLOR = '#888888';
        varStyle.FGCOLOR = 'blue';
        stylesheet.pushStyle({ type: 'variation', method: '.+_UTR_variant' }, null, varStyle);
    }
    {
        var varStyle = new DASStyle();
        varStyle.glyph = 'TRIANGLE';
        varStyle.DIRECTION = 'S';
        varStyle.BUMP = 'yes';
        varStyle.LABEL = 'no';
        // varStyle.BGCOLOR = '#888888';
        varStyle.FGCOLOR = 'blue';
        stylesheet.pushStyle({ type: 'variation', method: 'missense_variant' }, null, varStyle);
    }
    {
        var varStyle = new DASStyle();
        varStyle.glyph = 'TRIANGLE';
        varStyle.DIRECTION = 'N';
        varStyle.BUMP = 'yes';
        varStyle.LABEL = 'no';
        // varStyle.BGCOLOR = '#888888';
        varStyle.FGCOLOR = 'blue';
        stylesheet.pushStyle({ type: 'variation', method: 'splice_.+_variant' }, null, varStyle);
    }
    {
        var varStyle = new DASStyle();
        varStyle.glyph = 'STAR';
        varStyle.POINTS = 6;
        varStyle.BUMP = 'yes';
        varStyle.LABEL = 'no';
        // varStyle.BGCOLOR = '#888888';
        varStyle.FGCOLOR = 'blue';
        stylesheet.pushStyle({ type: 'variation', method: 'regulatory_region_variant' }, null, varStyle);
    }
    {
        var varStyle = new DASStyle();
        varStyle.glyph = 'PLIMSOLL';
        varStyle.BUMP = 'yes';
        varStyle.LABEL = 'no';
        // varStyle.BGCOLOR = '#888888';
        varStyle.FGCOLOR = 'rgb(50,80,255)';
        varStyle.STROKECOLOR = 'black';
        stylesheet.pushStyle({ type: 'variation' }, null, varStyle);
    }
    {
        var varStyle = new DASStyle();
        varStyle.glyph = 'SQUARE';
        varStyle.BUMP = 'yes';
        varStyle.LABEL = 'no';
        varStyle.BGCOLOR = '#888888';
        varStyle.FGCOLOR = 'red';
        stylesheet.pushStyle({ type: 'indel', method: '.+_UTR_variant' }, null, varStyle);
    }
    {
        var varStyle = new DASStyle();
        varStyle.glyph = 'TRIANGLE';
        varStyle.DIRECTION = 'S';
        varStyle.BUMP = 'yes';
        varStyle.LABEL = 'no';
        varStyle.BGCOLOR = '#888888';
        varStyle.FGCOLOR = 'red';
        stylesheet.pushStyle({ type: 'indel', method: 'missense_variant' }, null, varStyle);
    }
    {
        var varStyle = new DASStyle();
        varStyle.glyph = 'TRIANGLE';
        varStyle.DIRECTION = 'N';
        varStyle.BUMP = 'yes';
        varStyle.LABEL = 'no';
        varStyle.BGCOLOR = '#888888';
        varStyle.FGCOLOR = 'red';
        stylesheet.pushStyle({ type: 'indel', method: 'splice_.+_variant' }, null, varStyle);
    }
    {
        var varStyle = new DASStyle();
        varStyle.glyph = 'STAR';
        varStyle.POINTS = 6;
        varStyle.BUMP = 'yes';
        varStyle.LABEL = 'no';
        varStyle.BGCOLOR = '#888888';
        varStyle.FGCOLOR = 'red';
        stylesheet.pushStyle({ type: 'indel', method: 'regulatory_region_variant' }, null, varStyle);
    }
    {
        var varStyle = new DASStyle();
        varStyle.glyph = 'PLIMSOLL';
        varStyle.BUMP = 'yes';
        varStyle.LABEL = 'no';
        varStyle.BGCOLOR = '#888888';
        varStyle.FGCOLOR = 'red';
        varStyle.STROKECOLOR = 'black';
        stylesheet.pushStyle({ type: 'indel' }, null, varStyle);
    }

    var wigStyle = new DASStyle();
    wigStyle.glyph = 'BOX';
    wigStyle.FGCOLOR = 'black';
    wigStyle.BGCOLOR = 'orange';
    wigStyle.HEIGHT = 8;
    wigStyle.BUMP = true;
    wigStyle.LABEL = true;
    wigStyle.ZINDEX = 20;
    stylesheet.pushStyle({ type: 'default' }, null, wigStyle);
    return callback(stylesheet);
};

EnsemblFeatureSource.prototype.getScales = function () {
    return [];
};

EnsemblFeatureSource.prototype.fetch = function (chr, min, max, scale, types, pool, callback) {
    var thisB = this;
    var url = this.base + '/overlap/region/' + this.species + '/' + chr + ':' + min + '-' + max;

    var filters = [];
    for (var ti = 0; ti < this.type.length; ++ti) {
        filters.push('feature=' + this.type[ti]);
    }
    filters.push('content-type=application/json');
    url = url + '?' + filters.join(';');

    var req = new XMLHttpRequest();
    req.onreadystatechange = function () {
        if (req.readyState == 4) {
            thisB.busy--;
            thisB.notifyActivity();

            if (req.status >= 300) {
                var err = 'Error code ' + req.status;
                try {
                    var jr = JSON.parse(req.response);
                    if (jr.error) {
                        err = jr.error;
                    }
                } catch (ex) {};

                callback(err, null);
            } else {
                var jf = JSON.parse(req.response);
                var features = [];
                for (var fi = 0; fi < jf.length; ++fi) {
                    var j = jf[fi];

                    var notes = [];
                    var f = new DASFeature();
                    f.segment = chr;
                    f.min = j['start'] | 0;
                    f.max = j['end'] | 0;
                    f.type = j.feature_type || 'unknown';
                    f.id = j.ID;

                    if (j.Parent) {
                        var grp = new DASGroup();
                        grp.id = j.Parent;
                        f.groups = [grp];
                    }

                    if (j.strand) {
                        if (j.strand < 0) f.orientation = '-';else if (j.strand > 0) f.orientation = '+';
                    }

                    if (j.consequence_type) f.method = j.consequence_type;

                    if (j.alt_alleles) {
                        notes.push('Alleles=' + j.alt_alleles.join('/'));
                        if (j.alt_alleles.length > 1) {
                            if (j.alt_alleles[1].length != j.alt_alleles[0].length || j.alt_alleles[1] == '-') {
                                f.type = 'indel';
                            }
                        }
                    }

                    if (notes.length > 0) {
                        f.notes = notes;
                    }
                    features.push(f);
                }
                callback(null, features);
            }
        }
    };

    thisB.busy++;
    thisB.notifyActivity();

    req.open('GET', url, true);
    req.responseType = 'text';
    req.send();
};

EnsemblFeatureSource.prototype.capabilities = function () {
    var caps = {};
    if (this.type && this.type.indexOf('transcript') >= 0) {
        caps.search = ['gene'];
    }
    return caps;
};

EnsemblFeatureSource.prototype.search = function (query, callback) {
    var url = this.base + '/lookup/symbol/' + this.species + '/' + query + '?content-type=application/json';
    var req = new XMLHttpRequest();
    req.onreadystatechange = function () {
        if (req.readyState == 4) if (req.status >= 300 || req.status < 200) {
            var err = 'Error code ' + req.status;
            try {
                var jr = JSON.parse(req.response);
                if (jr.error) {
                    err = jr.error;
                }
            } catch (ex) {};

            if (req.status == 400) // E! returns an error if the lookup fails.  Who knows?
                return callback([]);else return callback(null, err);
        } else {
            var resp = JSON.parse(req.response);
            var result = [];

            if (resp && resp.seq_region_name) {
                result.push({
                    segment: resp.seq_region_name,
                    min: resp.start,
                    max: resp.end
                });
            }

            return callback(result);
        }
    };

    req.open('GET', url, true);
    req.responseType = 'text';
    req.send();
};

dalliance_registerSourceAdapterFactory('ensembl', function (source) {
    return { features: new EnsemblFeatureSource(source) };
});

},{"./das":10,"./sourceadapters":38}],16:[function(require,module,exports){
'use strict';

/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2014
//
// export-config.js
//

if (typeof require !== 'undefined') {
    var browser = require('./cbrowser');
    var Browser = browser.Browser;

    var utils = require('./utils');
    var shallowCopy = utils.shallowCopy;

    var sha1 = require('./sha1');
    var hex_sha1 = sha1.hex_sha1;

    var das = require('./das');
    var copyStylesheet = das.copyStylesheet;
}

Browser.prototype.exportFullConfig = function (opts) {
    opts = opts || {};

    var config = {
        chr: this.chr,
        viewStart: this.viewStart | 0,
        viewEnd: this.viewEnd | 0,
        cookieKey: 'dalliance_' + hex_sha1(Date.now()),

        coordSystem: this.coordSystem,

        sources: this.exportSourceConfig(),

        chains: this.exportChains()
    };

    if (this.prefix) config.prefix = this.prefix;

    return config;
};

Browser.prototype.exportChains = function () {
    var cc = {};
    var cs = this.chains || {};
    for (var k in cs) {
        cc[k] = cs[k].exportConfig();
    }
    return cc;
};

Browser.prototype.exportSourceConfig = function (opts) {
    opts = opts || {};

    var sourceConfig = [];
    for (var ti = 0; ti < this.tiers.length; ++ti) {
        var tier = this.tiers[ti];
        var source = shallowCopy(tier.dasSource);

        if (source.noPersist) continue;

        source.coords = undefined;
        source.props = undefined;
        if (!source.disabled) source.disabled = undefined;

        if (tier.config.stylesheet) {
            source.style = copyStylesheet(tier.config.stylesheet).styles;
            source.stylesheet_uri = undefined;
        } else if (source.style) {
            source.style = copyStylesheet({ styles: source.style }).styles;
        }

        if (typeof tier.config.name === 'string') {
            source.name = tier.config.name;
        }

        if (tier.config.height !== undefined) {
            source.forceHeight = tier.config.height;
        }
        if (tier.config.forceMin !== undefined) {
            source.forceMin = tier.config.forceMin;
        }
        if (tier.config.forceMinDynamic) source.forceMinDynamic = tier.config.forceMinDynamic;
        if (tier.config.forceMax !== undefined) {
            source.forceMax = tier.config.forceMax;
        }
        if (tier.config.bumped !== undefined) {
            source.bumped = tier.config.bumped;
        }
        if (tier.config.forceMaxDynamic) source.forceMaxDynamic = tier.config.forceMaxDynamic;

        sourceConfig.push(source);
    }

    return sourceConfig;
};

Browser.prototype.exportPageTemplate = function (opts) {
    opts = opts || {};
    var template = '<html>\n' + '  <head>\n' + '    <script language="javascript" src="' + this.resolveURL('$$dalliance-compiled.js') + '"></script>\n' + '    <script language="javascript">\n' + '      var dalliance_browser = new Browser(' + JSON.stringify(this.exportFullConfig(opts), null, 2) + ');\n' + '    </script>\n' + '  </head>\n' + '  <body>\n' + '    <div id="svgHolder">Dalliance goes here</div>\n' + '  </body>\n' + '<html>\n';

    return template;
};

},{"./cbrowser":6,"./das":10,"./sha1":37,"./utils":55}],17:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2014
//
// export-image.js
//

"use strict";

if (typeof require !== 'undefined') {
    var browser = require('./cbrowser');
    var Browser = browser.Browser;

    var g = require('./glyphs');
    var OverlayLabelCanvas = g.OverlayLabelCanvas;

    var nf = require('./numformats');
    var formatQuantLabel = nf.formatQuantLabel;
    var formatLongInt = nf.formatLongInt;

    var VERSION = require('./version');

    var drawSeqTierGC = require('./sequence-draw').drawSeqTierGC;
}

function fillTextRightJustified(g, text, x, y) {
    g.fillText(text, x - g.measureText(text).width, y);
}

Browser.prototype.exportImage = function (opts) {
    opts = opts || {};

    var fpw = opts.width || this.featurePanelWidth;
    var padding = 3;
    var ypos = 0;
    if (opts.banner || opts.region) {
        ypos = 40;
    }

    var backupFPW = this.featurePanelWidth;
    var backupScale = this.scale;
    this.featurePanelWidth = fpw;
    this.scale = this.featurePanelWidth / (this.viewEnd - this.viewStart);

    var totHeight = ypos;
    for (var ti = 0; ti < this.tiers.length; ++ti) {
        if (ti > 0) totHeight += padding;
        var tier = this.tiers[ti];

        tier.backupSubtiers = tier.subtiers;
        tier.backupOriginHaxx = tier.originHaxx;
        tier.backupLayoutHeight = tier.layoutHeight;

        if (tier.subtiers) {
            var renderer = this.getTierRenderer(tier);
            if (renderer && renderer.prepareSubtiers) {
                renderer.prepareSubtiers(tier, tier.viewport.getContext('2d'));
            }

            if (tier.subtiers) {
                var lh = tier.padding;
                for (var s = 0; s < tier.subtiers.length; ++s) {
                    lh = lh + tier.subtiers[s].height + tier.padding;
                }
                lh += 6;
                tier.layoutHeight = Math.max(lh, this.minTierHeight);
            }
        }

        if (tier.layoutHeight !== undefined) totHeight += tier.layoutHeight;
    }
    var mult = opts.resolutionMultiplier || 1.0;
    var margin = 200;

    var cw = (fpw + margin) * mult | 0;
    var ch = totHeight * mult | 0;
    var c = makeElement('canvas', null, { width: cw, height: ch });
    var g = c.getContext('2d');
    g.fillStyle = 'white';
    g.fillRect(0, 0, cw, ch);

    g.scale(mult, mult);

    if (opts.region) {
        g.save();
        g.fillStyle = 'black';
        g.font = '12pt sans-serif';
        g.fillText(this.chr + ':' + formatLongInt(this.viewStart) + '..' + formatLongInt(this.viewEnd), margin + 100, 28);
        g.restore();
    }

    if (opts.banner) {
        g.save();
        g.fillStyle = 'black';
        g.font = '12pt sans-serif';
        fillTextRightJustified(g, 'Graphics from Biodalliance ' + VERSION, margin + fpw - 100, 28);
        g.restore();
    }

    g.font = '10px sans-serif';

    for (var ti = 0; ti < this.tiers.length; ++ti) {
        var tier = this.tiers[ti];
        var offset = (tier.glyphCacheOrigin - this.viewStart) * this.scale;

        var oc = new OverlayLabelCanvas();
        g.save(); // 1
        g.translate(0, ypos);

        g.save(); // 2
        g.beginPath();
        g.moveTo(margin, 0);
        g.lineTo(margin + fpw, 0);
        g.lineTo(margin + fpw, tier.layoutHeight);
        g.lineTo(margin, tier.layoutHeight);
        g.closePath();
        g.clip();
        g.translate(margin, 0);

        g.save(); // 3
        g.translate(offset, 0);
        if (tier.subtiers) {
            tier.paintToContext(g, oc, offset + 1000);
        } else {
            drawSeqTierGC(tier, tier.currentSequence, g);
        }
        g.restore(); // 2

        g.save(); // 3
        g.translate(offset, 0);
        oc.draw(g, -offset, fpw - offset);
        g.restore(); // 2
        g.restore(); // 1

        var hasQuant = false;
        var pos = 0;
        var subtiers = tier.subtiers || [];
        for (var sti = 0; sti < subtiers.length; ++sti) {
            var subtier = subtiers[sti];

            if (subtier.quant) {
                hasQuant = true;
                var q = subtier.quant;
                var h = subtier.height;

                var numTics = 2;
                if (h > 40) {
                    numTics = 1 + (h / 20 | 0);
                }
                var ticSpacing = h / (numTics - 1);
                var ticInterval = (q.max - q.min) / (numTics - 1);

                g.beginPath();
                g.moveTo(margin + 5, pos);
                g.lineTo(margin, pos);
                g.lineTo(margin, pos + subtier.height);
                g.lineTo(margin + 5, pos + subtier.height);
                for (var t = 1; t < numTics - 1; ++t) {
                    var ty = t * ticSpacing;
                    g.moveTo(margin, pos + ty);
                    g.lineTo(margin + 3, pos + ty);
                }
                g.strokeStyle = 'black';
                g.strokeWidth = 2;
                g.stroke();

                g.fillStyle = 'black';
                fillTextRightJustified(g, formatQuantLabel(q.max), margin - 3, pos + 7);
                fillTextRightJustified(g, formatQuantLabel(q.min), margin - 3, pos + subtier.height);
                for (var t = 1; t < numTics - 1; ++t) {
                    var ty = t * ticSpacing;
                    fillTextRightJustified(g, formatQuantLabel(1.0 * q.max - t * ticInterval), margin - 3, pos + ty + 3);
                }
            }

            pos += subtier.height + padding;
        }

        var labelName;
        if (typeof tier.config.name === 'string') labelName = tier.config.name;else labelName = tier.dasSource.name;
        var labelWidth = g.measureText(labelName).width;
        g.fillStyle = 'black';
        g.fillText(labelName, margin - (hasQuant ? 28 : 12) - labelWidth, (tier.layoutHeight + 3) / 2);

        g.restore(); // 0

        ypos += tier.layoutHeight + padding;

        tier.subtiers = tier.backupSubtiers;
        tier.originHaxx = tier.backupOriginHaxx;
        tier.layoutHeight = tier.backupLayoutHeight;
    }

    if (opts.highlights) {
        g.save();

        g.beginPath();
        g.moveTo(margin, 0);
        g.lineTo(margin + fpw, 0);
        g.lineTo(margin + fpw, ypos);
        g.lineTo(margin, ypos);
        g.closePath();
        g.clip();

        g.translate(margin + offset, 0);
        var origin = this.viewStart;
        var visStart = this.viewStart;
        var visEnd = this.viewEnd;

        for (var hi = 0; hi < this.highlights.length; ++hi) {
            var h = this.highlights[hi];
            if ((h.chr === this.chr || h.chr === 'chr' + this.chr) && h.min < visEnd && h.max > visStart) {
                g.globalAlpha = this.defaultHighlightAlpha;
                g.fillStyle = this.defaultHighlightFill;
                g.fillRect((h.min - origin) * this.scale, 0, (h.max - h.min) * this.scale, ypos);
            }
        }
        g.restore();
    }

    var rulerPos = -1;
    if (opts.ruler == 'center') {
        rulerPos = margin + (this.viewEnd - this.viewStart + 1) * this.scale / 2;
    } else if (opts.ruler == 'left') {
        rulerPos = margin;
    } else if (opts.ruler == 'right') {
        rulerPos = margin + (this.viewEnd - this.viewStart + 1) * this.scale;
    }
    if (rulerPos >= 0) {
        g.strokeStyle = 'blue';
        g.beginPath();
        g.moveTo(rulerPos, 0);
        g.lineTo(rulerPos, ypos);
        g.stroke();
    }

    this.featurePanelWidth = backupFPW;
    this.scale = backupScale;

    return c.toDataURL('image/png');
};

},{"./cbrowser":6,"./glyphs":23,"./numformats":29,"./sequence-draw":35,"./version":57}],18:[function(require,module,exports){
'use strict';

/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2014
//
// export-ui.js
//

if (typeof require !== 'undefined') {
    var browser = require('./cbrowser');
    var Browser = browser.Browser;

    var utils = require('./utils');
    var makeElement = utils.makeElement;
    var removeChildren = utils.removeChildren;
}

Browser.prototype.openExportPanel = function () {
    var b = this;
    if (this.uiMode === 'export') {
        this.hideToolPanel();
        this.setUiMode('none');
    } else {
        var exportForm = makeElement('div', null, { className: 'export-form' });
        var exportSelect = makeElement('select');
        exportSelect.appendChild(makeElement('option', 'SVG', { value: 'svg' }));
        exportSelect.appendChild(makeElement('option', 'Image', { value: 'png' }));
        exportSelect.appendChild(makeElement('option', 'Dalliance config', { value: 'config' }));
        exportSelect.appendChild(makeElement('option', 'Dalliance sources', { value: 'sources' }));
        exportSelect.appendChild(makeElement('option', 'Dalliance page', { value: 'page' }));
        exportSelect.value = 'svg';

        exportSelect.addEventListener('change', function (ev) {
            removeChildren(exportContent);
            setupEOT();
        }, false);
        exportForm.appendChild(makeElement('p', ['Export as: ', exportSelect]));

        var exportHighlightsToggle = makeElement('input', null, { type: 'checkbox', checked: this.exportHighlights });
        exportHighlightsToggle.addEventListener('change', function (ev) {
            b.exportHighlights = exportHighlightsToggle.checked;
            b.storeStatus();
        }, false);
        var exportRulerToggle = makeElement('input', null, { type: 'checkbox', checked: this.exportRuler });
        exportRulerToggle.addEventListener('change', function (ev) {
            b.exportRuler = exportRulerToggle.checked;
            b.storeStatus();
        }, false);
        var exportRegionToggle = makeElement('input', null, { type: 'checkbox', checked: this.exportRegion });
        exportRegionToggle.addEventListener('change', function (ev) {
            b.exportRegion = exportRegionToggle.checked;
            b.storeStatus();
        }, false);
        var exportBannerToggle = makeElement('input', null, { type: 'checkbox', checked: this.exportBanner });
        exportBannerToggle.addEventListener('change', function (ev) {
            b.exportBanner = exportBannerToggle.checked;
            b.storeStatus();
        }, false);
        var exportScale = makeElement('input', null, { type: 'text', value: '1.0' });
        var exportWidth = makeElement('input', null, { type: 'text', value: '800' });

        var exportButton = makeElement('button', 'Export', { className: 'btn btn-primary' });
        exportButton.addEventListener('click', function (ev) {
            removeChildren(exportContent);

            var blobURL;
            var note, type, name;
            if (exportSelect.value === 'svg') {
                blobURL = URL.createObjectURL(b.makeSVG({ highlights: exportHighlightsToggle.checked,
                    banner: b.exportBanner,
                    region: b.exportRegion,
                    ruler: exportRulerToggle.checked ? b.rulerLocation : 'none',
                    width: parseInt(exportWidth.value) || 800 }));
                note = 'SVG';
                type = 'image/svg';
                name = 'dalliance-view.svg';
            } else if (exportSelect.value === 'png') {
                var mult = parseFloat(exportScale.value);
                if (mult < 0.1 || mult > 10) {
                    alert('bad scale ' + mult);
                    return;
                }

                blobURL = b.exportImage({ highlights: exportHighlightsToggle.checked,
                    banner: b.exportBanner,
                    region: b.exportRegion,
                    ruler: exportRulerToggle.checked ? b.rulerLocation : 'none',
                    resolutionMultiplier: mult,
                    width: parseInt(exportWidth.value) || 800 });
                note = 'Image';
                type = 'image/png';
                name = 'dalliance-view.png';
            } else if (exportSelect.value === 'config') {
                var config = JSON.stringify(b.exportFullConfig(), null, 2);
                var blob = new Blob([config], { type: 'text/plain' });
                blobURL = URL.createObjectURL(blob);
                note = 'Configuration';
                type = 'text/plain';
                name = 'dalliance-config.json';
            } else if (exportSelect.value === 'sources') {
                var config = JSON.stringify(b.exportSourceConfig(), null, 2);
                var blob = new Blob([config], { type: 'text/plain' });
                blobURL = URL.createObjectURL(blob);
                note = 'Source array';
                type = 'text/plain';
                name = 'dalliance-sources.json';
            } else if (exportSelect.value === 'page') {
                var page = b.exportPageTemplate();
                var type = 'text/html';
                var blob = new Blob([page], { type: type });
                blobURL = URL.createObjectURL(blob);
                note = 'Page template';
                name = 'dalliance-view.html';
            }

            if (blobURL) {
                var downloadLink = makeElement('a', '[Download]', {
                    href: blobURL,
                    download: name,
                    type: type
                });

                var previewLink = makeElement('a', '[Preview in browser]', {
                    href: blobURL,
                    type: type,
                    target: '_new'
                });

                exportContent.appendChild(makeElement('p', ['' + note + ' created: ', downloadLink, previewLink]));
            }
        }, false);

        b.addViewListener(function () {
            removeChildren(exportContent);
        });
        b.addTierListener(function () {
            removeChildren(exportContent);
        });

        var exportContent = makeElement('p', '');

        var eotHighlights = makeElement('tr', [makeElement('th', 'Include highlights', {}, { width: '400px', textAlign: 'right' }), makeElement('td', exportHighlightsToggle)]);
        var eotGuideline = makeElement('tr', [makeElement('th', 'Include vertical guideline', {}, { textAlign: 'right' }), makeElement('td', exportRulerToggle)]);
        var eotScale = makeElement('tr', [makeElement('th', 'Scale multiplier', {}, { textAlign: 'right' }), makeElement('td', exportScale)]);
        var eotWidth = makeElement('tr', [makeElement('th', 'Width (logical px)', {}, { textAlign: 'right' }), makeElement('td', exportWidth)]);
        var eotRegion = makeElement('tr', [makeElement('th', 'Label with genomic coordinates', {}, { textAlign: 'right' }), makeElement('td', exportRegionToggle)]);
        var eotBanner = makeElement('tr', [makeElement('th', 'Include banner', {}, { textAlign: 'right' }), makeElement('td', exportBannerToggle)]);

        var exportOptsTable = makeElement('table', [eotHighlights, eotGuideline, eotWidth, eotScale, eotRegion], null, { width: '500px' });
        var setupEOT = function setupEOT() {
            var es = exportSelect.value;
            eotHighlights.style.display = es == 'svg' || es == 'png' ? 'table-row' : 'none';
            eotGuideline.style.display = es == 'svg' || es == 'png' ? 'table-row' : 'none';
            eotScale.style.display = es == 'png' ? 'table-row' : 'none';
            eotWidth.style.display = es == 'svg' || es == 'png' ? 'table-row' : 'none';
            eotRegion.style.display = es == 'svg' || es == 'png' ? 'table-row' : 'none';
            eotBanner.style.display = es == 'svg' || es == 'png' ? 'table-row' : 'none';
        };
        setupEOT();

        exportForm.appendChild(exportOptsTable);
        exportForm.appendChild(exportButton);
        exportForm.appendChild(exportContent);

        if (this.uiMode !== 'none') this.hideToolPanel();
        this.browserHolder.insertBefore(exportForm, this.svgHolder);
        this.activeToolPanel = exportForm;

        this.setUiMode('export');
    }
};

},{"./cbrowser":6,"./utils":55}],19:[function(require,module,exports){
'use strict';

/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2014
//
// exports.js: shim to export symbols into global namespace for ease of embedding
//

var browser = require('./cbrowser');
var chainset = require('./chainset');
var sa = require('./sourceadapters');
var utils = require('./utils');
var das = require('./das');
var sc = require('./sourcecompare');

window.Browser = browser.Browser;
window.sourcesAreEqual = sc.sourcesAreEqual;
window.Chainset = chainset.Chainset; // Pre-0.12 configurations need this.

// Useful for info plugins.  Should be reconsidered in the future.
window.makeElement = utils.makeElement;

// Allow source plugins to be loaded separately.
window.dalliance_registerSourceAdapterFactory = sa.registerSourceAdapterFactory;
window.dalliance_registerParserFactory = sa.registerParserFactory;
window.dalliance_makeParser = sa.makeParser;

// DAS* objects for some plugins -- remove when plugin API changes...

window.DASSequence = das.DASSequence;
window.DASFeature = das.DASFeature;
window.DASGroup = das.DASGroup;
window.DASStylesheet = das.DASStylesheet;
window.DASStyle = das.DASStyle;
window.DASSource = das.DASSource; // Pre-0.8 configurations used this.  Still some around...

var ruler = require("./rulers");
window.Ruler = ruler.Ruler;
window.rulerDrawCallback = ruler.rulerDrawCallback;

},{"./cbrowser":6,"./chainset":7,"./das":10,"./rulers":32,"./sourceadapters":38,"./sourcecompare":39,"./utils":55}],20:[function(require,module,exports){
//
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2010
//
// feature-draw.js: new feature-tier renderer
//

"use strict";

if (typeof require !== 'undefined') {
    var tier = require('./tier');
    var DasTier = tier.DasTier;

    var nf = require('./numformats');
    var formatQuantLabel = nf.formatQuantLabel;
}

function SubTier() {
    this.glyphs = [];
    this.height = 0;
    this.quant = null;
}

SubTier.prototype.indexFor = function (glyph) {
    var gmin = glyph.min();
    var lb = 0,
        ub = this.glyphs.length;
    while (ub > lb) {
        var mid = (lb + ub) / 2 | 0;
        if (mid >= this.glyphs.length) return this.glyphs.length;
        var mg = this.glyphs[mid];
        if (gmin < mg.min()) {
            ub = mid;
        } else {
            lb = mid + 1;
        }
    }
    return ub;
};

SubTier.prototype.add = function (glyph) {
    var ind = this.indexFor(glyph);
    this.glyphs.splice(ind, 0, glyph);
    this.height = Math.max(this.height, glyph.height());
    if (glyph.quant && this.quant == null) {
        this.quant = glyph.quant;
    }
};

SubTier.prototype.hasSpaceFor = function (glyph) {
    var ind = this.indexFor(glyph);
    if (ind > 0 && this.glyphs[ind - 1].max() >= glyph.min()) return false;
    if (ind < this.glyphs.length && this.glyphs[ind].min() <= glyph.max()) return false;

    return true;
};

DasTier.prototype.paintToContext = function (gc, oc, offset) {
    var subtiers = this.subtiers;
    var fpw = this.viewport.width | 0;

    gc.save();
    for (var s = 0; s < subtiers.length; ++s) {
        var quant = null;
        var glyphs = subtiers[s].glyphs;
        for (var i = 0; i < glyphs.length; ++i) {
            var glyph = glyphs[i];
            if (glyph.min() < fpw - offset && glyph.max() > -offset) {
                var glyph = glyphs[i];
                glyph.draw(gc, oc);
                if (glyph.quant) {
                    quant = glyph.quant;
                }
            }
        }

        if (quant && quant.min < 0 && quant.max > 0 && this.dasSource.zeroLine) {
            var ry = subtiers[0].height * (quant.max / (quant.max - quant.min));
            gc.save();
            gc.strokeStyle = this.dasSource.zeroLine;
            gc.lineWidth = 0.5;
            gc.beginPath();
            gc.moveTo(-1000, ry);
            gc.lineTo(fpw + 1000, ry);
            gc.stroke();
            gc.restore();
        }

        if (this.scaleVertical) {
            var scale = this.browser.scale;
            gc.translate(0, scale + this.padding);
            oc.translate(0, scale + this.padding);
        } else {
            gc.translate(0, subtiers[s].height + this.padding);
            oc.translate(0, subtiers[s].height + this.padding);
        }
    }
    gc.restore();

    if (quant && this.quantLeapThreshold && this.featureSource && this.browser.sourceAdapterIsCapable(this.featureSource, 'quantLeap')) {
        var ry = subtiers[0].height * (1.0 - (this.quantLeapThreshold - quant.min) / (quant.max - quant.min));

        gc.save();
        gc.strokeStyle = 'red';
        gc.lineWidth = 0.3;
        gc.beginPath();
        gc.moveTo(-1000, ry);
        gc.lineTo(fpw + 1000, ry);
        gc.stroke();
        gc.restore();
    }
};

DasTier.prototype.paintQuant = function () {
    if (!this.quantOverlay) return;

    var retina = this.browser.retina && window.devicePixelRatio > 1;

    var quant;
    if (this.subtiers && this.subtiers.length > 0) quant = this.subtiers[0].quant;

    if (quant) {
        var h = this.subtiers[0].height;
        var w = 50;
        this.quantOverlay.height = this.viewport.height;
        this.quantOverlay.width = retina ? w * 2 : w;
        this.quantOverlay.style.height = '' + (retina ? this.quantOverlay.height / 2 : this.quantOverlay.height) + 'px';
        this.quantOverlay.style.width = '' + w + 'px';
        this.quantOverlay.style.display = 'block';
        var ctx = this.quantOverlay.getContext('2d');
        if (retina) ctx.scale(2, 2);

        var numTics = 2;
        if (h > 40) {
            numTics = 1 + (h / 20 | 0);
        }
        var ticSpacing = (h + this.padding * 2) / (numTics - 1);
        var ticInterval = (quant.max - quant.min) / (numTics - 1);

        ctx.fillStyle = 'white';
        ctx.globalAlpha = 0.6;
        if (this.browser.rulerLocation == 'right') {
            ctx.fillRect(w - 30, 0, 30, h + this.padding * 2);
        } else {
            ctx.fillRect(0, 0, 30, h + this.padding * 2);
        }
        ctx.globalAlpha = 1.0;

        ctx.strokeStyle = 'black';
        ctx.lineWidth = 1;
        ctx.beginPath();

        if (this.browser.rulerLocation == 'right') {
            ctx.moveTo(w - 8, this.padding);
            ctx.lineTo(w, this.padding);
            ctx.lineTo(w, h + this.padding);
            ctx.lineTo(w - 8, h + this.padding);
            for (var t = 1; t < numTics - 1; ++t) {
                var ty = t * ticSpacing;
                ctx.moveTo(w, ty);
                ctx.lineTo(w - 5, ty);
            }
        } else {
            ctx.moveTo(8, this.padding);
            ctx.lineTo(0, this.padding);
            ctx.lineTo(0, h + this.padding);
            ctx.lineTo(8, h + this.padding);
            for (var t = 1; t < numTics - 1; ++t) {
                var ty = t * ticSpacing;
                ctx.moveTo(0, ty);
                ctx.lineTo(5, ty);
            }
        }
        ctx.stroke();

        ctx.fillStyle = 'black';

        if (this.browser.rulerLocation == 'right') {
            ctx.textAlign = 'right';
            ctx.fillText(formatQuantLabel(quant.max), w - 9, 8);
            ctx.fillText(formatQuantLabel(quant.min), w - 9, h + this.padding);
            for (var t = 1; t < numTics - 1; ++t) {
                var ty = t * ticSpacing;
                ctx.fillText(formatQuantLabel(1.0 * quant.max - t * ticInterval), w - 9, ty + 3);
            }
        } else {
            ctx.textAlign = 'left';
            ctx.fillText(formatQuantLabel(quant.max), 9, 8);
            ctx.fillText(formatQuantLabel(quant.min), 9, h + this.padding);
            for (var t = 1; t < numTics - 1; ++t) {
                var ty = t * ticSpacing;
                ctx.fillText(formatQuantLabel(1.0 * quant.max - t * ticInterval), 9, ty + 3);
            }
        }
    } else {
        this.quantOverlay.style.display = 'none';
    }
};

DasTier.prototype.styleForFeature = function (f) {
    var ssScale = this.browser.zoomForCurrentScale();

    if (!this.stylesheet) {
        return null;
    }

    var maybe = null;
    var ss = this.stylesheet.styles;
    for (var si = 0; si < ss.length; ++si) {
        var sh = ss[si];
        if (sh.zoom && sh.zoom != ssScale) {
            continue;
        }

        if (sh.orientation) {
            if (sh.orientation != f.orientation) {
                continue;
            }
        }

        var labelRE = sh._labelRE;
        if (!labelRE || !labelRE.test) {
            labelRE = new RegExp('^' + sh.label + '$');
            sh._labelRE = labelRE;
        }
        if (sh.label && !labelRE.test(f.label)) {
            continue;
        }
        var methodRE = sh._methodRE;
        if (!methodRE || !methodRE.test) {
            methodRE = new RegExp('^' + sh.method + '$');
            sh._methodRE = methodRE;
        }
        if (sh.method && !methodRE.test(f.method)) {
            continue;
        }
        if (sh.type) {
            if (sh.type == 'default') {
                if (!maybe) {
                    maybe = sh.style;
                }
                continue;
            } else {
                var typeRE = sh._typeRE;
                if (!typeRE || !typeRE.test) {
                    typeRE = new RegExp('^' + sh.type + '$');
                    sh._typeRE = typeRE;
                }
                if (!typeRE.test(f.type)) continue;
            }
        }
        return sh.style;
    }
    return maybe;
};

DasTier.prototype.quantMin = function (style) {
    if (this.forceMinDynamic) {
        return this.currentFeaturesMinScore || 0;
    } else if (typeof this.forceMin === 'number') {
        return this.forceMin;
    } else {
        var softMin = typeof style.SOFTMIN !== 'undefined' ? style.SOFTMIN : Number.MAX_VALUE;
        return style.MIN || Math.min(softMin, this.currentFeaturesMinScore || 0);
    }
};

DasTier.prototype.quantMax = function (style) {
    if (this.forceMaxDynamic) {
        return this.currentFeaturesMaxScore || 0;
    } else if (typeof this.forceMax === 'number') {
        return this.forceMax;
    } else {
        var softMax = typeof style.SOFTMAX !== 'undefined' ? style.SOFTMAX : Number.MIN_VALUE;
        return style.MAX || Math.max(softMax, this.currentFeaturesMaxScore || 0);
    }
};

if (typeof module !== 'undefined') {
    module.exports = {
        SubTier: SubTier
    };
}

},{"./numformats":29,"./tier":51}],21:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2011
//
// feature-popup.js
//

"use strict";

if (typeof require !== 'undefined') {
    var browser = require('./cbrowser');
    var Browser = browser.Browser;

    var utils = require('./utils');
    var pick = utils.pick;
    var pushnew = utils.pushnew;
    var makeElement = utils.makeElement;
}

var TAGVAL_NOTE_RE = new RegExp('^([A-Za-z_-]+)=(.+)');

Browser.prototype.addFeatureInfoPlugin = function (handler) {
    if (!this.featureInfoPlugins) {
        this.featureInfoPlugins = [];
    }
    this.featureInfoPlugins.push(handler);
};

function FeatureInfo(hit, feature, group) {
    var name = pick(group.type, feature.type);
    var fid = pick(group.label, feature.label, group.id, feature.id);
    if (fid && fid.indexOf('__dazzle') != 0) {
        name = name + ': ' + fid;
    }

    this.hit = hit;
    this.feature = feature;
    this.group = group;
    this.title = name;
    this.sections = [];
}

FeatureInfo.prototype.setTitle = function (t) {
    this.title = t;
};

FeatureInfo.prototype.add = function (label, info) {
    if (typeof info === 'string') {
        info = makeElement('span', info);
    }
    this.sections.push({ label: label, info: info });
};

Browser.prototype.featurePopup = function (ev, __ignored_feature, hit, tier) {
    var hi = hit.length;
    var feature = --hi >= 0 ? hit[hi] : {};
    var group = --hi >= 0 ? hit[hi] : {};

    var featureInfo = new FeatureInfo(hit, feature, group);
    featureInfo.tier = tier;
    var fips = this.featureInfoPlugins || [];
    for (var fipi = 0; fipi < fips.length; ++fipi) {
        try {
            fips[fipi](feature, featureInfo);
        } catch (e) {
            console.log(e.stack || e);
        }
    }
    fips = tier.featureInfoPlugins || [];
    for (fipi = 0; fipi < fips.length; ++fipi) {
        try {
            fips[fipi](feature, featureInfo);
        } catch (e) {
            console.log(e.stack || e);
        }
    }

    this.removeAllPopups();

    var table = makeElement('table', null, { className: 'table table-striped table-condensed' });
    table.style.width = '100%';
    table.style.margin = '0px';

    var idx = 0;
    if (feature.method && !tier.dasSource.suppressMethod) {
        var row = makeElement('tr', [makeElement('th', 'Method'), makeElement('td', feature.method)]);
        table.appendChild(row);
        ++idx;
    }
    {
        var loc;
        if (group.segment) {
            loc = group;
        } else {
            loc = feature;
        }
        var row = makeElement('tr', [makeElement('th', 'Location'), makeElement('td', loc.segment + ':' + loc.min + '-' + loc.max, {}, { minWidth: '200px' })]);
        table.appendChild(row);
        ++idx;
    }
    if (feature.score !== undefined && feature.score !== null && feature.score != '-' && !feature.suppressScore && !tier.dasSource.suppressScore) {
        var row = makeElement('tr', [makeElement('th', 'Score'), makeElement('td', '' + feature.score)]);
        table.appendChild(row);
        ++idx;
    }
    {
        var links = maybeConcat(group.links, feature.links);
        if (links && links.length > 0) {
            var row = makeElement('tr', [makeElement('th', 'Links'), makeElement('td', links.map(function (l) {
                return makeElement('div', makeElement('a', l.desc, { href: l.uri, target: '_new' }));
            }))]);
            table.appendChild(row);
            ++idx;
        }
    }
    {
        var notes = maybeConcat(group.notes, feature.notes);
        for (var ni = 0; ni < notes.length; ++ni) {
            var k = 'Note';
            var v = notes[ni];
            var m = v.match(TAGVAL_NOTE_RE);
            if (m) {
                k = m[1];
                v = m[2];
            }

            var row = makeElement('tr', [makeElement('th', k), makeElement('td', v)]);
            table.appendChild(row);
            ++idx;
        }
    }

    for (var fisi = 0; fisi < featureInfo.sections.length; ++fisi) {
        var section = featureInfo.sections[fisi];
        table.appendChild(makeElement('tr', [makeElement('th', section.label), makeElement('td', section.info)]));
    }

    this.popit(ev, featureInfo.title || 'Feature', table, { width: 450 });
};

function maybeConcat(a, b) {
    var l = [];
    if (a) {
        for (var i = 0; i < a.length; ++i) {
            pushnew(l, a[i]);
        }
    }
    if (b) {
        for (var i = 0; i < b.length; ++i) {
            pushnew(l, b[i]);
        }
    }
    return l;
}

},{"./cbrowser":6,"./utils":55}],22:[function(require,module,exports){
"use strict";

if (typeof require !== 'undefined') {
    var utils = require('./utils');
    var pusho = utils.pusho;
    var pushnewo = utils.pushnewo;
}

function sortFeatures(tier) {
    var dmin = tier.browser.drawnStart,
        dmax = tier.browser.drawnEnd;
    var ungroupedFeatures = {};
    var groupedFeatures = {};
    var drawnGroupedFeatures = {};
    var groupMins = {},
        groupMaxes = {};
    var groups = {};
    var superGroups = {};
    var groupsToSupers = {};
    var nonPositional = [];
    var minScore, maxScore;
    var fbid;

    var init_fbid = function init_fbid() {
        fbid = {};
        for (var fi = 0; fi < tier.currentFeatures.length; ++fi) {
            var f = tier.currentFeatures[fi];
            if (f.id) {
                fbid[f.id] = f;
            }
        }
    };

    var superParentsOf = function superParentsOf(f) {
        // FIXME: should recur.
        var spids = [];
        if (f.parents) {
            for (var pi = 0; pi < f.parents.length; ++pi) {
                var pid = f.parents[pi];
                var p = fbid[pid];
                if (!p) {
                    continue;
                }
                // alert(p.type + ':' + p.typeCv);
                if (p.typeCv == 'SO:0000704') {
                    pushnew(spids, pid);
                }
            }
        }
        return spids;
    };

    for (var fi = 0; fi < tier.currentFeatures.length; ++fi) {
        var f = tier.currentFeatures[fi];
        if (f.parts) {
            continue;
        }

        var drawn = f.min <= dmax && f.max >= dmin;

        if (!f.min || !f.max) {
            nonPositional.push(f);
            continue;
        }

        if (f.score && f.score != '.' && f.score != '-') {
            var sc = 1.0 * f.score;
            if (!minScore || sc < minScore) {
                minScore = sc;
            }
            if (!maxScore || sc > maxScore) {
                maxScore = sc;
            }
        }

        var fGroups = [];
        var fSuperGroup = null;
        if (f.groups) {
            for (var gi = 0; gi < f.groups.length; ++gi) {
                var g = f.groups[gi];
                var gid = g.id;
                if (g.type == 'gene') {
                    // Like a super-grouper...
                    fSuperGroup = gid;
                    groups[gid] = g;
                } else if (g.type == 'translation') {
                    // have to ignore this to get sensible results from bj-e :-(.
                } else {
                    pusho(groupedFeatures, gid, f);
                    groups[gid] = g;
                    fGroups.push(gid);

                    var ogm = groupMins[gid];
                    if (!ogm || f.min < ogm) groupMins[gid] = f.min;

                    ogm = groupMaxes[gid];
                    if (!ogm || f.max > ogm) groupMaxes[gid] = f.max;
                }
            }
        }

        if (f.parents) {
            if (!fbid) {
                init_fbid();
            }
            for (var pi = 0; pi < f.parents.length; ++pi) {
                var pid = f.parents[pi];
                var p = fbid[pid];
                if (!p) {
                    // alert("couldn't find " + pid);
                    continue;
                }
                if (!p.parts) {
                    p.parts = [f];
                }
                pushnewo(groupedFeatures, pid, p);
                pusho(groupedFeatures, pid, f);

                if (!groups[pid]) {
                    groups[pid] = {
                        type: p.type,
                        id: p.id,
                        label: p.label || p.id
                    };
                }
                fGroups.push(pid);

                var ogm = groupMins[pid];
                if (!ogm || f.min < ogm) groupMins[pid] = f.min;

                ogm = groupMaxes[pid];
                if (!ogm || f.max > ogm) groupMaxes[pid] = f.max;

                var sgs = superParentsOf(p);
                if (sgs.length > 0) {
                    fSuperGroup = sgs[0];
                    var sp = fbid[sgs[0]];
                    groups[sgs[0]] = {
                        type: sp.type,
                        id: sp.id,
                        label: sp.label || sp.id
                    };
                    if (!tier.dasSource.collapseSuperGroups) {
                        tier.dasSource.collapseSuperGroups = true;
                    }
                }
            }
        }

        if (fGroups.length == 0) {
            if (drawn) pusho(ungroupedFeatures, f.type, f);
        } else if (fSuperGroup) {
            for (var g = 0; g < fGroups.length; ++g) {
                var gid = fGroups[g];
                pushnewo(superGroups, fSuperGroup, gid);
                groupsToSupers[gid] = fSuperGroup;
            }
        }
    }

    for (var gid in groupedFeatures) {
        var group = groups[gid];
        if (typeof group.min !== 'number') group.min = groupMins[gid];
        if (typeof group.max !== 'number') group.max = groupMaxes[gid];

        if (groupMaxes[gid] >= dmin && groupMins[gid] <= dmax) drawnGroupedFeatures[gid] = groupedFeatures[gid];
    }

    tier.ungroupedFeatures = ungroupedFeatures;
    tier.groupedFeatures = drawnGroupedFeatures;
    tier.groups = groups;
    tier.superGroups = superGroups;
    tier.groupsToSupers = groupsToSupers;

    if (minScore) {
        if (minScore > 0) {
            minScore = 0;
        } else if (maxScore < 0) {
            maxScore = 0;
        }
        tier.currentFeaturesMinScore = minScore;
        tier.currentFeaturesMaxScore = maxScore;
    }
}

if (typeof module !== 'undefined') {
    module.exports = {
        sortFeatures: sortFeatures
    };
}

},{"./utils":55}],23:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2010
//
// glyphs.js: components which know how to draw themselves
//

"use strict";

if (typeof require !== 'undefined') {
    var spans = require('./spans');
    var union = spans.union;
    var Range = spans.Range;

    var utils = require('./utils');
    var makeElementNS = utils.makeElementNS;
    var AMINO_ACID_TRANSLATION = utils.AMINO_ACID_TRANSLATION;

    var svgu = require('./svg-utils');
    var NS_SVG = svgu.NS_SVG;
    var NS_XLINK = svgu.NS_XLINK;
    var SVGPath = svgu.SVGPath;
}

function PathGlyphBase(stroke, fill) {
    this._stroke = stroke;
    this._fill = fill;
}

PathGlyphBase.prototype.draw = function (g) {
    g.beginPath();
    this.drawPath(g);

    if (this._fill) {
        g.fillStyle = this._fill;
        g.fill();
    }
    if (this._stroke) {
        g.strokeStyle = this._stroke;
        g.stroke();
    }
};

PathGlyphBase.prototype.toSVG = function () {
    var g = new SVGPath();
    this.drawPath(g);

    return makeElementNS(NS_SVG, 'path', null, { d: g.toPathData(),
        fill: this._fill || 'none',
        stroke: this._stroke || 'none' });
};

PathGlyphBase.prototype.drawPath = function (g) {
    throw 'drawPath method on PathGlyphBase must be overridden';
};

function BoxGlyph(x, y, width, height, fill, stroke, alpha, radius) {
    this.x = x;
    this.y = y;
    this._width = width;
    this._height = height;
    this.fill = fill;
    this.stroke = stroke;
    this._alpha = alpha;
    this._radius = radius || 0;
}

BoxGlyph.prototype.draw = function (g) {
    var r = this._radius;

    if (r > 0) {
        g.beginPath();
        g.moveTo(this.x + r, this.y);
        g.lineTo(this.x + this._width - r, this.y);
        g.arcTo(this.x + this._width, this.y, this.x + this._width, this.y + r, r);
        g.lineTo(this.x + this._width, this.y + this._height - r);
        g.arcTo(this.x + this._width, this.y + this._height, this.x + this._width - r, this.y + this._height, r);
        g.lineTo(this.x + r, this.y + this._height);
        g.arcTo(this.x, this.y + this._height, this.x, this.y + this._height - r, r);
        g.lineTo(this.x, this.y + r);
        g.arcTo(this.x, this.y, this.x + r, this.y, r);
        g.closePath();

        if (this._alpha != null) {
            g.save();
            g.globalAlpha = this._alpha;
        }

        if (this.fill) {
            g.fillStyle = this.fill;
            g.fill();
        }
        if (this.stroke) {
            g.strokeStyle = this.stroke;
            g.lineWidth = 0.5;
            g.stroke();
        }

        if (this._alpha != null) {
            g.restore();
        }
    } else {
        if (this._alpha != null) {
            g.save();
            g.globalAlpha = this._alpha;
        }

        if (this.fill) {
            g.fillStyle = this.fill;
            g.fillRect(this.x, this.y, this._width, this._height);
        }

        if (this.stroke) {
            g.strokeStyle = this.stroke;
            g.lineWidth = 0.5;
            g.strokeRect(this.x, this.y, this._width, this._height);
        }

        if (this._alpha != null) {
            g.restore();
        }
    }
};

BoxGlyph.prototype.toSVG = function () {
    var s = makeElementNS(NS_SVG, 'rect', null, { x: this.x,
        y: this.y,
        width: this._width,
        height: this._height,
        stroke: this.stroke || 'none',
        strokeWidth: 0.5,
        fill: this.fill || 'none' });
    if (this._alpha != null) {
        s.setAttribute('opacity', this._alpha);
    }

    return s;
};

BoxGlyph.prototype.min = function () {
    return this.x;
};

BoxGlyph.prototype.max = function () {
    return this.x + this._width;
};

BoxGlyph.prototype.height = function () {
    return this.y + this._height;
};

function GroupGlyph(glyphs, connector) {
    this.glyphs = glyphs;
    this.connector = connector;
    this.h = glyphs[0].height();

    var covList = [];
    for (var g = 0; g < glyphs.length; ++g) {
        var gg = glyphs[g];
        covList.push(new Range(gg.min(), gg.max()));
        this.h = Math.max(this.h, gg.height());
    }
    this.coverage = union(covList);
}

GroupGlyph.prototype.drawConnectors = function (g) {
    var ranges = this.coverage.ranges();
    for (var r = 1; r < ranges.length; ++r) {
        var gl = ranges[r];
        var last = ranges[r - 1];
        if (last && gl.min() > last.max()) {
            var start = last.max();
            var end = gl.min();
            var mid = (start + end) / 2;

            if (this.connector === 'hat+') {
                g.moveTo(start, this.h / 2);
                g.lineTo(mid, 0);
                g.lineTo(end, this.h / 2);
            } else if (this.connector === 'hat-') {
                g.moveTo(start, this.h / 2);
                g.lineTo(mid, this.h);
                g.lineTo(end, this.h / 2);
            } else if (this.connector === 'collapsed+') {
                g.moveTo(start, this.h / 2);
                g.lineTo(end, this.h / 2);
                if (end - start > 4) {
                    g.moveTo(mid - 2, this.h / 2 - 3);
                    g.lineTo(mid + 2, this.h / 2);
                    g.lineTo(mid - 2, this.h / 2 + 3);
                }
            } else if (this.connector === 'collapsed-') {
                g.moveTo(start, this.h / 2);
                g.lineTo(end, this.h / 2);
                if (end - start > 4) {
                    g.moveTo(mid + 2, this.h / 2 - 3);
                    g.lineTo(mid - 2, this.h / 2);
                    g.lineTo(mid + 2, this.h / 2 + 3);
                }
            } else {
                g.moveTo(start, this.h / 2);
                g.lineTo(end, this.h / 2);
            }
        }
        last = gl;
    }
};

GroupGlyph.prototype.draw = function (g, oc) {
    for (var i = 0; i < this.glyphs.length; ++i) {
        var gl = this.glyphs[i];
        gl.draw(g, oc);
    }

    g.strokeStyle = 'black';
    g.beginPath();
    this.drawConnectors(g);
    g.stroke();
};

GroupGlyph.prototype.toSVG = function () {
    var g = makeElementNS(NS_SVG, 'g');
    for (var i = 0; i < this.glyphs.length; ++i) {
        g.appendChild(this.glyphs[i].toSVG());
    }

    var p = new SVGPath();
    this.drawConnectors(p);

    var pathData = p.toPathData();
    if (pathData.length > 0) {
        var path = makeElementNS(NS_SVG, 'path', null, { d: p.toPathData(),
            fill: 'none',
            stroke: 'black',
            strokeWidth: 0.5 });
        g.appendChild(path);
    }

    return g;
};

GroupGlyph.prototype.min = function () {
    return this.coverage.min();
};

GroupGlyph.prototype.max = function () {
    return this.coverage.max();
};

GroupGlyph.prototype.height = function () {
    return this.h;
};

function LineGraphGlyph(points, color, height) {
    this.points = points;
    this.color = color;
    this._height = height || 50;
}

LineGraphGlyph.prototype.min = function () {
    return this.points[0].x;
    // return this.points[0];
};

LineGraphGlyph.prototype.max = function () {
    return this.points[this.points.length - 1].x;
    // return this.points[this.points.length - 2];
};

LineGraphGlyph.prototype.height = function () {
    return this._height;
};

LineGraphGlyph.prototype.draw = function (g) {
    g.save();
    g.strokeStyle = this.color;
    g.lineWidth = 2;
    g.beginPath();
    this.points.forEach(function (p, i) {
        if (i === 0) g.moveTo(p.x, p.y);else g.lineTo(p.x, p.y);
    });
    g.stroke();
    g.restore();
};

LineGraphGlyph.prototype.toSVG = function () {
    var p = new SVGPath();
    for (var i = 0; i < this.points.length; ++i) {
        var x = this.points[i].x;
        var y = this.points[i].y;
        if (i == 0) {
            p.moveTo(x, y);
        } else {
            p.lineTo(x, y);
        }
    }

    return makeElementNS(NS_SVG, 'path', null, { d: p.toPathData(),
        fill: 'none',
        stroke: this.color,
        strokeWidth: '2px' });
};

function LabelledGlyph(GLOBAL_GC, glyph, text, unmeasured, anchor, align, font) {
    this.glyph = glyph;
    this.text = text;
    this.anchor = anchor || 'left';
    this.align = align || 'below';
    if (font) {
        this.font = font;
    }
    if (this.font) {
        GLOBAL_GC.save();
        GLOBAL_GC.font = this.font;
    }
    var metrics = GLOBAL_GC.measureText(text);
    if (this.font) {
        GLOBAL_GC.restore();
    }
    this.textLen = metrics.width;
    this.textHeight = 5;
    this.bump = glyph.bump;
    this.measured = !unmeasured;
}

LabelledGlyph.prototype.toSVG = function () {
    var child = this.glyph.toSVG();
    var opts = {};

    if (this.align == 'above') {
        child = makeElementNS(NS_SVG, 'g', child, { transform: "translate(0, " + (this.textHeight | 0 + 2) + ")" });
        opts.y = this.textHeight;
    } else {
        opts.y = this.glyph.height() + 15;
    }

    if (this.font) {
        opts.fontSize = 7;
    }

    if ('center' == this.anchor) {
        opts.x = (this.glyph.min() + this.glyph.max() - this.textLen) / 2;
    } else {
        opts.x = this.glyph.min();
    }

    return makeElementNS(NS_SVG, 'g', [child, makeElementNS(NS_SVG, 'text', this.text, opts)]);
};

LabelledGlyph.prototype.min = function () {
    return this.glyph.min();
};

LabelledGlyph.prototype.max = function () {
    if (this.measured) return Math.max(this.glyph.max(), 1.0 * this.glyph.min() + this.textLen + 10);else return this.glyph.max();
};

LabelledGlyph.prototype.height = function () {
    var h = this.glyph.height();
    if (this.measured) {
        if (this.align == 'above') {
            h += this.textHeight + 2;
        } else {
            h += 20;
        }
    }
    return h;
};

LabelledGlyph.prototype.draw = function (g, oc) {
    if (this.align == 'above') {
        g.save();
        g.translate(0, this.textHeight + 2);
    }
    this.glyph.draw(g);
    if (this.align == 'above') {
        g.restore();
    }

    oc.registerGlyph(this);
};

LabelledGlyph.prototype.drawOverlay = function (g, minVisible, maxVisible) {
    g.fillStyle = 'black';
    if (this.font) {
        g.save();
        g.font = this.font;
    }
    var p;
    if ('center' == this.anchor) {
        p = (this.glyph.min() + this.glyph.max() - this.textLen) / 2;
    } else {
        p = this.glyph.min();
        if (p < minVisible) {
            p = Math.min(minVisible, this.glyph.max() - this.textLen);
        }
    }
    g.fillText(this.text, p, this.align == 'above' ? this.textHeight : this.glyph.height() + 15);
    if (this.font) {
        g.restore();
    }
};

function CrossGlyph(x, height, stroke) {
    this._x = x;
    this._height = height;
    this._stroke = stroke;
}

CrossGlyph.prototype.draw = function (g) {
    var hh = this._height / 2;

    g.beginPath();
    g.moveTo(this._x, 0);
    g.lineTo(this._x, this._height);
    g.moveTo(this._x - hh, hh);
    g.lineTo(this._x + hh, hh);

    g.strokeStyle = this._stroke;
    g.lineWidth = 1;

    g.stroke();
};

CrossGlyph.prototype.toSVG = function () {
    var hh = this._height / 2;

    var g = new SVGPath();
    g.moveTo(this._x, 0);
    g.lineTo(this._x, this._height);
    g.moveTo(this._x - hh, hh);
    g.lineTo(this._x + hh, hh);

    return makeElementNS(NS_SVG, 'path', null, { d: g.toPathData(),
        fill: 'none',
        stroke: this._stroke,
        strokeWidth: '1px' });
};

CrossGlyph.prototype.min = function () {
    return this._x - this._height / 2;
};

CrossGlyph.prototype.max = function () {
    return this._x + this._height / 2;
};

CrossGlyph.prototype.height = function () {
    return this._height;
};

function ExGlyph(x, height, stroke) {
    this._x = x;
    this._height = height;
    this._stroke = stroke;
}

ExGlyph.prototype.draw = function (g) {
    var hh = this._height / 2;

    g.beginPath();
    g.moveTo(this._x - hh, 0);
    g.lineTo(this._x + hh, this._height);
    g.moveTo(this._x - hh, this._height);
    g.lineTo(this._x + hh, 0);

    g.strokeStyle = this._stroke;
    g.lineWidth = 1;

    g.stroke();
};

ExGlyph.prototype.toSVG = function () {
    var hh = this._height / 2;

    var g = new SVGPath();
    g.moveTo(this._x - hh, 0);
    g.lineTo(this._x + hh, this._height);
    g.moveTo(this._x - hh, this._height);
    g.lineTo(this._x + hh, 0);

    return makeElementNS(NS_SVG, 'path', null, { d: g.toPathData(),
        fill: 'none',
        stroke: this._stroke,
        strokeWidth: '1px' });
};

ExGlyph.prototype.min = function () {
    return this._x - this._height / 2;
};

ExGlyph.prototype.max = function () {
    return this._x + this._height / 2;
};

ExGlyph.prototype.height = function () {
    return this._height;
};

function TriangleGlyph(x, height, dir, width, fill, stroke) {
    PathGlyphBase.call(this, stroke, fill);

    this._x = x;
    this._height = height;
    this._dir = dir;
    this._width = width;
}

TriangleGlyph.prototype = Object.create(PathGlyphBase.prototype);

TriangleGlyph.prototype.drawPath = function (g) {
    var hh = this._height / 2;
    var hw = this._width / 2;

    if (this._dir === 'S') {
        g.moveTo(this._x, this._height);
        g.lineTo(this._x - hw, 0);
        g.lineTo(this._x + hw, 0);
    } else if (this._dir === 'W') {
        g.moveTo(this._x + hw, hh);
        g.lineTo(this._x - hw, 0);
        g.lineTo(this._x - hw, this._height);
    } else if (this._dir === 'E') {
        g.moveTo(this._x - hw, hh);
        g.lineTo(this._x + hw, 0);
        g.lineTo(this._x + hw, this._height);
    } else {
        g.moveTo(this._x, 0);
        g.lineTo(this._x + hw, this._height);
        g.lineTo(this._x - hw, this._height);
    }

    g.closePath();
};

TriangleGlyph.prototype.min = function () {
    return this._x - this._height / 2;
};

TriangleGlyph.prototype.max = function () {
    return this._x + this._height / 2;
};

TriangleGlyph.prototype.height = function () {
    return this._height;
};

function DotGlyph(x, height, fill, stroke) {
    this._x = x;
    this._height = height;
    this._fill = fill;
    this._stroke = stroke;
}

DotGlyph.prototype.draw = function (g) {
    var hh = this._height / 2;
    g.fillStyle = this._stroke;
    g.beginPath();
    g.arc(this._x, hh, hh, 0, 6.29);

    if (this._fill) {
        g.fillStyle = this._fill;
        g.fill();
    }

    if (this._stroke) {
        g.strokeStyle = this._stroke;
        g.stroke();
    }
};

DotGlyph.prototype.toSVG = function () {
    var hh = this._height / 2;
    return makeElementNS(NS_SVG, 'circle', null, { cx: this._x, cy: hh, r: hh,
        fill: this._fill || 'none',
        stroke: this._stroke || 'none',
        strokeWidth: '1px' });
};

DotGlyph.prototype.min = function () {
    return this._x - this._height / 2;
};

DotGlyph.prototype.max = function () {
    return this._x + this._height / 2;
};

DotGlyph.prototype.height = function () {
    return this._height;
};

function PaddedGlyph(glyph, minp, maxp) {
    this.glyph = glyph;
    this._min = minp;
    this._max = maxp;
    if (glyph) {
        this.bump = glyph.bump;
    }
}

PaddedGlyph.prototype.draw = function (g, oc) {
    if (this.glyph) this.glyph.draw(g, oc);
};

PaddedGlyph.prototype.toSVG = function () {
    if (this.glyph) {
        return this.glyph.toSVG();
    } else {
        return makeElementNS(NS_SVG, 'g');
    }
};

PaddedGlyph.prototype.min = function () {
    return this._min;
};

PaddedGlyph.prototype.max = function () {
    return this._max;
};

PaddedGlyph.prototype.height = function () {
    if (this.glyph) {
        return this.glyph.height();
    } else {
        return 1;
    }
};

function AArrowGlyph(min, max, height, fill, stroke, ori) {
    PathGlyphBase.call(this, stroke, fill);
    this._min = min;
    this._max = max;
    this._height = height;
    this._ori = ori;
}

AArrowGlyph.prototype = Object.create(PathGlyphBase.prototype);

AArrowGlyph.prototype.min = function () {
    return this._min;
};

AArrowGlyph.prototype.max = function () {
    return this._max;
};

AArrowGlyph.prototype.height = function () {
    return this._height;
};

AArrowGlyph.prototype.drawPath = function (g) {
    var maxPos = this._max;
    var minPos = this._min;
    var height = this._height;
    var lInset = 0;
    var rInset = 0;
    var minLength = this._height + 2;
    var instep = 0.333333 * this._height;
    var y = 0;

    if (this._ori) {
        if (this._ori === '+') {
            rInset = 0.5 * this._height;
        } else if (this._ori === '-') {
            lInset = 0.5 * this._height;
        }
    }

    if (maxPos - minPos < minLength) {
        minPos = (maxPos + minPos - minLength) / 2;
        maxPos = minPos + minLength;
    }

    g.moveTo(minPos + lInset, y + instep);
    g.lineTo(maxPos - rInset, y + instep);
    g.lineTo(maxPos - rInset, y);
    g.lineTo(maxPos, y + this._height / 2);
    g.lineTo(maxPos - rInset, y + height);
    g.lineTo(maxPos - rInset, y + instep + instep);
    g.lineTo(minPos + lInset, y + instep + instep);
    g.lineTo(minPos + lInset, y + height);
    g.lineTo(minPos, y + height / 2);
    g.lineTo(minPos + lInset, y);
    g.lineTo(minPos + lInset, y + instep);
};

function SpanGlyph(min, max, height, stroke) {
    PathGlyphBase.call(this, stroke, null);
    this._min = min;
    this._max = max;
    this._height = height;
}

SpanGlyph.prototype = Object.create(PathGlyphBase.prototype);

SpanGlyph.prototype.min = function () {
    return this._min;
};
SpanGlyph.prototype.max = function () {
    return this._max;
};
SpanGlyph.prototype.height = function () {
    return this._height;
};

SpanGlyph.prototype.drawPath = function (g) {
    var minPos = this._min,
        maxPos = this._max;
    var height = this._height,
        hh = height / 2;
    g.moveTo(minPos, hh);
    g.lineTo(maxPos, hh);
    g.moveTo(minPos, 0);
    g.lineTo(minPos, height);
    g.moveTo(maxPos, 0);
    g.lineTo(maxPos, height);
};

function LineGlyph(min, max, height, style, strand, stroke) {
    this._min = min;
    this._max = max;
    this._height = height;
    this._style = style;
    this._strand = strand;
    this._stroke = stroke;
}

LineGlyph.prototype.min = function () {
    return this._min;
};
LineGlyph.prototype.max = function () {
    return this._max;
};
LineGlyph.prototype.height = function () {
    return this._height;
};

LineGlyph.prototype.drawPath = function (g) {
    var minPos = this._min,
        maxPos = this._max;
    var height = this._height,
        hh = height / 2;

    if (this._style === 'hat') {
        g.moveTo(minPos, hh);
        g.lineTo((minPos + maxPos) / 2, this._strand === '-' ? height : 0);
        g.lineTo(maxPos, hh);
    } else {
        g.moveTo(minPos, hh);
        g.lineTo(maxPos, hh);
    }
};

LineGlyph.prototype.draw = function (g) {
    g.beginPath();
    this.drawPath(g);
    g.strokeStyle = this._stroke;
    if (this._style === 'dashed' && g.setLineDash) {
        g.save();
        g.setLineDash([3]);
        g.stroke();
        g.restore();
    } else {
        g.stroke();
    }
};

LineGlyph.prototype.toSVG = function () {
    var g = new SVGPath();
    this.drawPath(g);

    var opts = { d: g.toPathData(),
        stroke: this._stroke || 'none' };
    if (this._style === 'dashed') {
        opts['strokeDasharray'] = '3';
    }

    return makeElementNS(NS_SVG, 'path', null, opts);
};

function PrimersGlyph(min, max, height, fill, stroke) {
    this._min = min;
    this._max = max;
    this._height = height;
    this._fill = fill;
    this._stroke = stroke;
}

PrimersGlyph.prototype.min = function () {
    return this._min;
};
PrimersGlyph.prototype.max = function () {
    return this._max;
};
PrimersGlyph.prototype.height = function () {
    return this._height;
};

PrimersGlyph.prototype.drawStemPath = function (g) {
    var minPos = this._min,
        maxPos = this._max;
    var height = this._height,
        hh = height / 2;
    g.moveTo(minPos, hh);
    g.lineTo(maxPos, hh);
};

PrimersGlyph.prototype.drawTrigsPath = function (g) {
    var minPos = this._min,
        maxPos = this._max;
    var height = this._height,
        hh = height / 2;
    g.moveTo(minPos, 0);
    g.lineTo(minPos + height, hh);
    g.lineTo(minPos, height);
    g.lineTo(minPos, 0);
    g.moveTo(maxPos, 0);
    g.lineTo(maxPos - height, hh);
    g.lineTo(maxPos, height);
    g.lineTo(maxPos, 0);
};

PrimersGlyph.prototype.draw = function (g) {
    g.beginPath();
    this.drawStemPath(g);
    g.strokeStyle = this._stroke;
    g.stroke();
    g.beginPath();
    this.drawTrigsPath(g);
    g.fillStyle = this._fill;
    g.fill();
};

PrimersGlyph.prototype.toSVG = function () {
    var s = new SVGPath();
    this.drawStemPath(s);
    var t = new SVGPath();
    this.drawTrigsPath(t);

    return makeElementNS(NS_SVG, 'g', [makeElementNS(NS_SVG, 'path', null, { d: s.toPathData(),
        stroke: this._stroke || 'none' }), makeElementNS(NS_SVG, 'path', null, { d: t.toPathData(),
        fill: this._fill || 'none' })]);
};

function ArrowGlyph(min, max, height, color, parallel, sw, ne) {
    PathGlyphBase.call(this, null, color);
    this._min = min;
    this._max = max;
    this._height = height;
    this._color = color;
    this._parallel = parallel;
    this._sw = sw;
    this._ne = ne;
}

ArrowGlyph.prototype = Object.create(PathGlyphBase.prototype);

ArrowGlyph.prototype.min = function () {
    return this._min;
};
ArrowGlyph.prototype.max = function () {
    return this._max;
};
ArrowGlyph.prototype.height = function () {
    return this._height;
};

ArrowGlyph.prototype.drawPath = function (g) {
    var min = this._min,
        max = this._max,
        height = this._height;

    if (this._parallel) {
        var hh = height / 2;
        var instep = 0.4 * height;
        if (this._sw) {
            g.moveTo(min + hh, height - instep);
            g.lineTo(min + hh, height);
            g.lineTo(min, hh);
            g.lineTo(min + hh, 0);
            g.lineTo(min + hh, instep);
        } else {
            g.moveTo(min, height - instep);
            g.lineTo(min, instep);
        }
        if (this._ne) {
            g.lineTo(max - hh, instep);
            g.lineTo(max - hh, 0);
            g.lineTo(max, hh);
            g.lineTo(max - hh, height);
            g.lineTo(max - hh, height - instep);
        } else {
            g.lineTo(max, instep);
            g.lineTo(max, height - instep);
        }
        g.closePath();
    } else {
        var mid = (min + max) / 2;
        var instep = 0.4 * (max - min);
        var th = height / 3;

        if (this._ne) {
            g.moveTo(min + instep, th);
            g.lineTo(min, th);
            g.lineTo(mid, 0);
            g.lineTo(max, th);
            g.lineTo(max - instep, th);
        } else {
            g.moveTo(min + instep, 0);
            g.lineTo(max - instep, 0);
        }
        if (this._sw) {
            g.lineTo(max - instep, height - th);
            g.lineTo(max, height - th);
            g.lineTo(mid, height);
            g.lineTo(min, height - th);
            g.lineTo(min + instep, height - th);
        } else {
            g.lineTo(max - instep, height);
            g.lineTo(min + instep, height);
        }
        g.closePath();
    }
};

function TooManyGlyph(min, max, height, fill, stroke) {
    this._min = min;
    this._max = max;
    this._height = height;
    this._fill = fill;
    this._stroke = stroke;
}

TooManyGlyph.prototype.min = function () {
    return this._min;
};
TooManyGlyph.prototype.max = function () {
    return this._max;
};
TooManyGlyph.prototype.height = function () {
    return this._height;
};

TooManyGlyph.prototype.toSVG = function () {
    return makeElementNS(NS_SVG, 'rect', null, { x: this._min,
        y: 0,
        width: this._max - this._min,
        height: this._height,
        stroke: this._stroke || 'none',
        fill: this._fill || 'none' });
};

TooManyGlyph.prototype.draw = function (g) {
    if (this._fill) {
        g.fillStyle = this._fill;
        g.fillRect(this._min, 0, this._max - this._min, this._height);
    }
    if (this._stroke) {
        g.strokeStyle = this._stroke;
        g.strokeRect(this._min, 0, this._max - this._min, this._height);
        g.beginPath();
        for (var n = 2; n < this._height; n += 3) {
            g.moveTo(this._min, n);
            g.lineTo(this._max, n);
        }
        g.stroke();
    }
};

function TextGlyph(GLOBAL_GC, min, max, height, fill, string) {
    this._min = min;
    this._max = max;
    this._height = height;
    this._fill = fill;
    this._string = string;
    this._textLen = GLOBAL_GC.measureText(string).width;
}

TextGlyph.prototype.min = function () {
    return this._min;
};
TextGlyph.prototype.max = function () {
    return Math.max(this._max, this._min + this._textLen);
};
TextGlyph.prototype.height = function () {
    return this._height;
};

TextGlyph.prototype.draw = function (g) {
    g.fillStyle = this._fill;
    g.fillText(this._string, this._min, this._height - 4);
};

TextGlyph.prototype.toSVG = function () {
    return makeElementNS(NS_SVG, 'text', this._string, { x: this._min, y: this._height - 4 });
};

function aminoTileColor(aa, start, color) {
    var ALTERNATE_COLOR = {
        'red': 'darkred',
        'purple': 'mediumpurple',
        'blue': 'darkblue',
        'green': 'darkgreen'
    };
    var color2 = ALTERNATE_COLOR[color.toLowerCase()];
    var tileColors;
    if (!color2) tileColors = ['rgb(73, 68, 149)', 'rgb(9, 0, 103)'];
    // default to UCSC colors
    else tileColors = [color, color2];

    if (aa == '?') return 'black';else if (aa == 'M') return 'greenyellow';else if (aa == '*') return 'crimson';else return tileColors[start % 2];
}

function reverseComplement(sequence) {
    var seq_dict = { 'A': 'T', 'T': 'A', 'G': 'C', 'C': 'G' };
    var rev_seq = sequence.split('').reverse().join('');
    var rev_compl_seq = [];
    for (var b = 0; b < rev_seq.length; ++b) {
        var base = rev_seq.substr(b, 1).toUpperCase();
        rev_compl_seq.push(base in seq_dict ? seq_dict[base] : 'N');
    }
    return rev_compl_seq.join('');
}

function AminoAcidGlyph(min, max, height, fill, seq, orientation, readframe) {
    this._min = min;
    this._max = max;
    this._height = height;
    this._fill = fill;
    this._seq = seq;
    this._orientation = orientation;
    this._readframe = readframe;
}

AminoAcidGlyph.prototype.min = function () {
    return this._min;
};
AminoAcidGlyph.prototype.max = function () {
    return this._max;
};
AminoAcidGlyph.prototype.height = function () {
    return this._height;
};

AminoAcidGlyph.prototype.draw = function (gc) {
    var seq = this._seq;
    var color = this._fill;

    if (!seq) return;

    var scale = (this._max - this._min + 1) / seq.length;

    var prevOverhang = (3 - this._readframe) % 3;
    var nextOverhang = (seq.length - prevOverhang) % 3;
    var leftOverhang = this._orientation == '+' ? prevOverhang : nextOverhang;

    if (leftOverhang > 0) {
        gc.fillStyle = color;
        gc.fillRect(this._min, 0, scale * leftOverhang, this._height);
    }

    for (var p = leftOverhang; p < seq.length; p += 3) {
        var codon = seq.substr(p, 3).toUpperCase();
        if (this._orientation == '-') codon = reverseComplement(codon);
        var aa = codon in AMINO_ACID_TRANSLATION ? AMINO_ACID_TRANSLATION[codon] : '?';
        color = codon.length == 3 ? aminoTileColor(aa, p, this._fill) : this._fill;
        gc.fillStyle = color;
        gc.fillRect(this._min + p * scale, 0, scale * codon.length, this._height);

        if (scale >= 8 && codon.length == 3) {
            gc.fillStyle = 'white';
            gc.fillText(aa, this._min + (p + 1) * scale, this._height);
        }
    }
};

AminoAcidGlyph.prototype.toSVG = function () {
    var g = makeElementNS(NS_SVG, 'g');
    var seq = this._seq;
    var color = this._fill;

    if (!seq) return g;

    var scale = (this._max - this._min + 1) / seq.length;

    var prevOverhang = (3 - this._readframe) % 3;
    var nextOverhang = (seq.length - prevOverhang) % 3;
    var leftOverhang = this._orientation == '+' ? prevOverhang : nextOverhang;

    if (leftOverhang > 0) {
        g.appendChild(makeElementNS(NS_SVG, 'rect', null, {
            x: this._min,
            y: 0,
            width: scale * leftOverhang,
            height: this._height,
            fill: color }));
    }
    for (var p = leftOverhang; p < seq.length; p += 3) {
        var codon = seq.substr(p, 3).toUpperCase();
        if (this._orientation == '-') codon = reverseComplement(codon);
        var aa = codon in AMINO_ACID_TRANSLATION ? AMINO_ACID_TRANSLATION[codon] : '?';
        color = codon.length == 3 ? aminoTileColor(aa, p, this._fill) : this._fill;
        g.appendChild(makeElementNS(NS_SVG, 'rect', null, {
            x: this._min + p * scale,
            y: 0,
            width: scale * codon.length,
            height: this._height,
            fill: color }));

        if (scale >= 8 && codon.length == 3) {
            g.appendChild(makeElementNS(NS_SVG, 'text', aa, {
                x: this._min + (p + 1) * scale,
                y: this._height,
                fill: 'white' }));
        }
    }
    return g;
};

var isRetina = typeof window !== 'undefined' && window.devicePixelRatio > 1;
var __dalliance_SequenceGlyphCache = {};
var altPattern = new RegExp('^[ACGT-]$');
var isCloseUp = function isCloseUp(scale) {
    return scale >= 8;
};

function SequenceGlyph(baseColors, strandColor, min, max, height, seq, ref, scheme, quals, fillbg, scaleVertical) {
    this.baseColors = baseColors;
    this._strandColor = strandColor;
    this._min = min;
    this._max = max;
    this._height = height;
    this._seq = seq;
    this._ref = ref;
    this._scheme = scheme;
    this._quals = quals;
    this._fillbg = fillbg;
    this._scaleVertical = scaleVertical;
}

SequenceGlyph.prototype.min = function () {
    return this._min;
};
SequenceGlyph.prototype.max = function () {
    return this._max;
};
SequenceGlyph.prototype.height = function () {
    return this._height;
};

SequenceGlyph.prototype.alphaForQual = function (qual) {
    return 0.1 + 0.9 * Math.max(0.0, Math.min(1.0 * qual / 30.0, 1.0));
};

SequenceGlyph.prototype.draw = function (gc) {
    var seq = this._seq;
    var ref = this._ref;
    var mismatch = this._scheme === 'mismatch' || this._scheme === 'mismatch-all';
    var all = this._scheme === 'mismatch-all';

    var seqLength = seq ? seq.length : this._max - this._min + 1;
    var scale = (this._max - this._min + 1) / seqLength;

    if (mismatch && !isCloseUp(scale)) {
        gc.fillStyle = this._strandColor;
        if (this._scaleVertical) gc.fillRect(this._min, scale, this._max - this._min, scale);else gc.fillRect(this._min, this._height / 4, this._max - this._min, this._height / 2);
    }

    for (var p = 0; p < seqLength; ++p) {
        var base = seq ? seq.substr(p, 1).toUpperCase() : 'N';

        if (!altPattern.test(base) && !isCloseUp(scale)) continue;

        var color = this.baseColors[base];

        if (this._quals) {
            var qc = this._quals.charCodeAt(p) - 33;
            var oldAlpha = gc.globalAlpha; // NB hoisted!
            gc.globalAlpha = this.alphaForQual(qc);
        }

        if (!color) {
            var refBase = ref ? ref.substr(p, 1).toUpperCase() : 'N';
            if (base == 'N' || refBase == 'N') color = 'gray';else color = this._strandColor;

            if (all) base = refBase;
        }

        gc.fillStyle = color;

        var alt = altPattern.test(base);
        if (this._fillbg || !isCloseUp(scale) || !alt) {
            if (this._scaleVertical) gc.fillRect(this._min + p * scale, scale, scale, scale);else gc.fillRect(this._min + p * scale, 0, scale, this._height);
        }
        if (isCloseUp(scale) && alt) {
            var key = color + '_' + base;
            var img = __dalliance_SequenceGlyphCache[key];
            if (!img) {
                img = document.createElement('canvas');
                if (isRetina) {
                    img.width = 16;
                    img.height = 20;
                } else {
                    img.width = 8;
                    img.height = 10;
                }
                var imgGc = img.getContext('2d');
                if (isRetina) {
                    imgGc.scale(2, 2);
                }
                imgGc.fillStyle = this._fillbg ? 'black' : color;
                var w = imgGc.measureText(base).width;
                imgGc.fillText(base, 0.5 * (8.0 - w), 8);
                __dalliance_SequenceGlyphCache[key] = img;
            }
            var dy = this._scaleVertical ? scale : 0;
            if (isRetina) gc.drawImage(img, this._min + p * scale + 0.5 * (scale - 8), dy, 8, 10);else gc.drawImage(img, this._min + p * scale + 0.5 * (scale - 8), dy);
        }

        if (this._quals) {
            gc.globalAlpha = oldAlpha;
        }
    }
};

SequenceGlyph.prototype.toSVG = function () {
    var seq = this._seq;
    var ref = this._ref;
    var mismatch = this._scheme === 'mismatch' || this._scheme === 'mismatch-all';
    var all = this._scheme === 'mismatch-all';
    var scale = (this._max - this._min + 1) / this._seq.length;
    var g = makeElementNS(NS_SVG, 'g');

    for (var p = 0; p < seq.length; ++p) {
        var base = seq ? seq.substr(p, 1).toUpperCase() : 'N';
        var color = this.baseColors[base];

        if (!color) {
            var refBase = ref ? ref.substr(p, 1).toUpperCase() : 'N';
            if (base == 'N' || refBase == 'N') color = 'gray';else color = this._strandColor;

            if (all) base = refBase;
        }

        var alpha = 1.0;
        if (this._quals) {
            var qc = this._quals.charCodeAt(p) - 33;
            alpha = this.alphaForQual(qc);
        }

        var alt = altPattern.test(base);
        if (this._fillbg || !isCloseUp(scale) || !alt) {
            g.appendChild(makeElementNS(NS_SVG, 'rect', null, {
                x: this._min + p * scale,
                y: 0,
                width: scale,
                height: this._height,
                fill: color,
                fillOpacity: alpha }));
        }

        if (isCloseUp(scale) && alt) {
            g.appendChild(makeElementNS(NS_SVG, 'text', base, {
                x: this._min + (0.5 + p) * scale,
                y: 8,
                textAnchor: 'middle',
                fill: this._fillbg ? 'black' : color,
                fillOpacity: alpha }));
        }
    }

    return g;
};

function TranslatedGlyph(glyph, x, y, height) {
    this.glyph = glyph;
    this._height = height;
    this._x = x;
    this._y = y;
}

TranslatedGlyph.prototype.height = function () {
    if (this._height) {
        return this._height;
    } else {
        return this.glyph.height() + this._y;
    }
};

TranslatedGlyph.prototype.min = function () {
    return this.glyph.min() + this._x;
};

TranslatedGlyph.prototype.max = function () {
    return this.glyph.max() + this._x;
};

TranslatedGlyph.prototype.minY = function () {
    return this._y;
};

TranslatedGlyph.prototype.maxY = function () {
    return this._y + this.glyph.height();
};

TranslatedGlyph.prototype.draw = function (g, o) {
    g.save();
    g.translate(this._x, this._y);
    this.glyph.draw(g, o);
    g.restore();
};

TranslatedGlyph.prototype.toSVG = function () {
    var s = this.glyph.toSVG();
    s.setAttribute('transform', 'translate(' + this._x + ',' + this._y + ')');
    return s;
};

function PointGlyph(x, y, height, fill) {
    this._x = x;
    this._y = y;
    this._height = height;
    this._fill = fill;
}

PointGlyph.prototype.min = function () {
    return this._x - 2;
};

PointGlyph.prototype.max = function () {
    return this._x + 2;
};

PointGlyph.prototype.height = function () {
    return this._height;
};

PointGlyph.prototype.draw = function (g) {
    g.save();
    g.globalAlpha = 0.3;
    g.fillStyle = this._fill;
    g.beginPath();
    g.arc(this._x, this._y, 1.5, 0, 6.29);
    g.fill();
    g.restore();
};

PointGlyph.prototype.toSVG = function () {
    return makeElementNS(NS_SVG, 'circle', null, { cx: this._x, cy: this._y, r: 2,
        fill: this._fill,
        stroke: 'none' });
};

function GridGlyph(height, yOffset, spacing) {
    this._height = height || 50;
    this.yOffset = yOffset || 0;
    this.spacing = spacing || 10;
}

GridGlyph.prototype.notSelectable = true;

GridGlyph.prototype.min = function () {
    return -100000;
};

GridGlyph.prototype.max = function () {
    return 100000;
};

GridGlyph.prototype.height = function () {
    return this._height;
};

GridGlyph.prototype.draw = function (g) {
    g.save();
    g.strokeStyle = 'black';
    g.lineWidth = 0.1;

    g.beginPath();
    for (var y = this.yOffset; y <= this._height + this.yOffset; y += this.spacing) {
        // for (var y = 0; y <= this._height; y += 10) {
        g.moveTo(-5000, y);
        g.lineTo(5000, y);
    }
    g.stroke();
    g.restore();
};

GridGlyph.prototype.toSVG = function () {
    var p = new SVGPath();
    for (var y = 0; y <= this._height; y += 10) {
        p.moveTo(-5000, y);
        p.lineTo(5000, y);
    }

    return makeElementNS(NS_SVG, 'path', null, { d: p.toPathData(),
        fill: 'none',
        stroke: 'black',
        strokeWidth: '0.1px' });
};

function StarGlyph(x, r, points, fill, stroke) {
    PathGlyphBase.call(this, stroke, fill);
    this._x = x;
    this._r = r;
    this._points = points;
}

StarGlyph.prototype = Object.create(PathGlyphBase.prototype);

StarGlyph.prototype.min = function () {
    return this._x - this._r;
};

StarGlyph.prototype.max = function () {
    return this._x + this._r;
};

StarGlyph.prototype.height = function () {
    return 2 * this._r;
};

StarGlyph.prototype.drawPath = function (g) {
    var midX = this._x,
        midY = this._r,
        r = this._r;
    for (var p = 0; p < this._points; ++p) {
        var theta = p * 6.28 / this._points;
        var px = midX + r * Math.sin(theta);
        var py = midY - r * Math.cos(theta);
        if (p == 0) {
            g.moveTo(px, py);
        } else {
            g.lineTo(px, py);
        }
        theta = (p + 0.5) * 6.28 / this._points;
        px = midX + 0.4 * r * Math.sin(theta);
        py = midY - 0.4 * r * Math.cos(theta);
        g.lineTo(px, py);
    }
    g.closePath();
};

function PlimsollGlyph(x, height, overhang, fill, stroke) {
    this._x = x;
    this._height = height;
    this._overhang = overhang;
    this._fill = fill;
    this._stroke = stroke;
    this._hh = height / 2;
}

PlimsollGlyph.prototype.draw = function (g) {
    var hh = this._height / 2;
    g.fillStyle = this._stroke;
    g.beginPath();
    g.arc(this._x, hh, hh - this._overhang, 0, 6.29);
    g.moveTo(this._x, 0);
    g.lineTo(this._x, this._height);

    if (this._fill) {
        g.fillStyle = this._fill;
        g.fill();
    }

    if (this._stroke) {
        g.strokeStyle = this._stroke;
        g.stroke();
    }
};

PlimsollGlyph.prototype.toSVG = function () {
    var hh = this._hh;
    return makeElementNS(NS_SVG, 'g', [makeElementNS(NS_SVG, 'circle', null, { cx: this._x, cy: hh, r: hh - this._overhang }), makeElementNS(NS_SVG, 'line', null, { x1: this._x, y1: 0, x2: this._x, y2: this._height })], { fill: this._fill || 'none',
        stroke: this._stroke || 'none',
        strokeWidth: '1px' });
};

PlimsollGlyph.prototype.min = function () {
    return this._x - this._hh;
};

PlimsollGlyph.prototype.max = function () {
    return this._x + this._hh;
};

PlimsollGlyph.prototype.height = function () {
    return this._height;
};

function OverlayLabelCanvas() {
    this.ox = 0;
    this.oy = 0;
    this.glyphs = [];
}

OverlayLabelCanvas.prototype.translate = function (x, y) {
    this.ox += x;
    this.oy += y;
};

OverlayLabelCanvas.prototype.registerGlyph = function (g) {
    this.glyphs.push({
        x: this.ox,
        y: this.oy,
        glyph: g
    });
};

OverlayLabelCanvas.prototype.draw = function (g, minVisible, maxVisible) {
    for (var gi = 0; gi < this.glyphs.length; ++gi) {
        var gg = this.glyphs[gi];
        g.save();
        g.translate(gg.x, gg.y);
        gg.glyph.drawOverlay(g, minVisible, maxVisible);
        g.restore();
    }
};

if (typeof module !== 'undefined') {
    module.exports = {
        BoxGlyph: BoxGlyph,
        GroupGlyph: GroupGlyph,
        LineGraphGlyph: LineGraphGlyph,
        LabelledGlyph: LabelledGlyph,
        CrossGlyph: CrossGlyph,
        ExGlyph: ExGlyph,
        TriangleGlyph: TriangleGlyph,
        DotGlyph: DotGlyph,
        PaddedGlyph: PaddedGlyph,
        AArrowGlyph: AArrowGlyph,
        SpanGlyph: SpanGlyph,
        LineGlyph: LineGlyph,
        PrimersGlyph: PrimersGlyph,
        ArrowGlyph: ArrowGlyph,
        TooManyGlyph: TooManyGlyph,
        TextGlyph: TextGlyph,
        SequenceGlyph: SequenceGlyph,
        AminoAcidGlyph: AminoAcidGlyph,
        TranslatedGlyph: TranslatedGlyph,
        GridGlyph: GridGlyph,
        StarGlyph: StarGlyph,
        PointGlyph: PointGlyph,
        PlimsollGlyph: PlimsollGlyph,

        OverlayLabelCanvas: OverlayLabelCanvas
    };
}

},{"./spans":40,"./svg-utils":44,"./utils":55}],24:[function(require,module,exports){
'use strict';

/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2013
//
// jbjson.js -- query JBrowse-style REST data stores
//

if (typeof require !== 'undefined') {
    var das = require('./das');
    var DASStylesheet = das.DASStylesheet;
    var DASStyle = das.DASStyle;
    var DASFeature = das.DASFeature;
    var DASGroup = das.DASGroup;

    var utils = require('./utils');
    var shallowCopy = utils.shallowCopy;

    var spans = require('./spans');
    var Range = spans.Range;
    var union = spans.union;
    var intersection = spans.intersection;
}

function JBrowseStore(base, query) {
    this.base = base;
    this.query = query;
}

function jbori(strand) {
    if (strand > 0) return '+';else if (strand < 0) return '-';
}

JBrowseStore.prototype.features = function (segment, opts, callback) {
    opts = opts || {};

    url = this.base + '/features/' + segment.name;

    var filters = [];
    if (this.query) {
        filters.push(this.query);
    }
    if (segment.isBounded) {
        filters.push('start=' + segment.start);
        filters.push('end=' + segment.end);
    }
    if (filters.length > 0) {
        url = url + '?' + filters.join('&');
    }

    var req = new XMLHttpRequest();
    req.onreadystatechange = function () {
        if (req.readyState == 4) {
            if (req.status >= 300) {
                callback(null, 'Error code ' + req.status);
            } else {
                var jf = JSON.parse(req.response)['features'];
                var features = [];
                for (fi = 0; fi < jf.length; ++fi) {
                    var j = jf[fi];

                    var f = new DASFeature();
                    f.segment = segment.name;
                    f.min = (j['start'] | 0) + 1;
                    f.max = j['end'] | 0;
                    if (j.name) {
                        f.label = j.name;
                    }
                    if (j.strand) f.orientation = jbori(j.strand);
                    f.type = j.type || 'unknown';

                    if (j.subfeatures && j.subfeatures.length > 0) {
                        f.id = j.uniqueID;

                        var blocks = [];
                        var cds = [];
                        var all = [];

                        for (var si = 0; si < j.subfeatures.length; ++si) {
                            var sj = j.subfeatures[si];
                            var sf = shallowCopy(f);
                            sf.min = sj.start + 1;
                            sf.max = sj.end;
                            sf.groups = [f];

                            all.push(sf);
                            blocks.push(new Range(sf.min, sf.max));
                            if (sj.type === 'CDS') cds.push(sf);
                        }

                        if (cds.length > 0) {
                            spans = union(blocks);
                            var txGroup = shallowCopy(f);
                            txGroup.type = 'transcript';
                            spans.ranges().forEach(function (exon) {
                                features.push({
                                    segment: segment.name,
                                    min: exon.min(),
                                    max: exon.max(),
                                    orientation: f.orientation,
                                    groups: [txGroup],
                                    type: 'transcript'
                                });
                            });

                            var tlGroup = shallowCopy(f);
                            cds.forEach(function (cdsExon) {
                                cdsExon.type = 'translation';
                                cdsExon.groups = [tlGroup];
                                features.push(cdsExon);
                            });
                        } else {
                            all.forEach(function (f) {
                                features.push(f);
                            });
                        }
                    } else {
                        features.push(f);
                    }
                }
                callback(features);
            }
        }
    };

    req.open('GET', url, true);
    req.responseType = 'text';
    req.send();
};

if (typeof module !== 'undefined') {
    module.exports = {
        JBrowseStore: JBrowseStore
    };
}

},{"./das":10,"./spans":40,"./utils":55}],25:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

//
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2013
//
// kspace.js
//

"use strict";

if (typeof require !== 'undefined') {
    var utils = require('./utils');
    var Awaited = utils.Awaited;
    var pusho = utils.pusho;

    var sa = require('./sourceadapters');
    var MappedFeatureSource = sa.MappedFeatureSource;
    var CachingFeatureSource = sa.CachingFeatureSource;
    var BWGFeatureSource = sa.BWGFeatureSource;
    var RemoteBWGFeatureSource = sa.RemoteBWGFeatureSource;
    var BAMFeatureSource = sa.BAMFeatureSource;
    var RemoteBAMFeatureSource = sa.RemoteBAMFeatureSource;
    var DummySequenceSource = sa.DummySequenceSource;
    var DummyFeatureSource = sa.DummyFeatureSource;

    var OverlayFeatureSource = require('./overlay').OverlayFeatureSource;

    var spans = require('./spans');
    var Range = spans.Range;
    var union = spans.union;
    var intersection = spans.intersection;

    var sample = require('./sample');
    var downsample = sample.downsample;
    var getBaseCoverage = sample.getBaseCoverage;

    var das = require('./das');
    var DASSequence = das.DASSequence;

    var Promise = require('es6-promise').Promise;
}

function FetchPool() {
    var self = this;
    this.reqs = [];
    this.awaitedFeatures = {};
    this.requestsIssued = new Promise(function (resolve, reject) {
        self.notifyRequestsIssued = resolve;
    });
}

FetchPool.prototype.addRequest = function (xhr) {
    this.reqs.push(xhr);
};

FetchPool.prototype.abortAll = function () {
    for (var i = 0; i < this.reqs.length; ++i) {
        this.reqs[i].abort();
    }
};

function KSCacheBaton(chr, min, max, scale, features, status, coverage) {
    this.chr = chr;
    this.min = min;
    this.max = max;
    this.coverage = coverage;
    this.scale = scale;
    this.features = features || [];
    this.status = status;
}

KSCacheBaton.prototype.toString = function () {
    return this.chr + ":" + this.min + ".." + this.max + ";scale=" + this.scale;
};

function KnownSpace(tierMap, chr, min, max, scale, seqSource) {
    this.tierMap = tierMap;
    this.chr = chr;
    this.min = min;
    this.max = max;
    this.scale = scale;
    this.seqSource = seqSource || new DummySequenceSource();
    this.viewCount = 0;

    this.featureCache = {};
    this.latestViews = {};
}

KnownSpace.prototype.cancel = function () {
    this.cancelled = true;
};

KnownSpace.prototype.bestCacheOverlapping = function (chr, min, max) {
    var baton = this.featureCache[this.tierMap[0]];
    if (baton) {
        return baton;
    } else {
        return null;
    }
};

KnownSpace.prototype.retrieveFeatures = function (tiers, chr, min, max, scale) {
    if (scale != scale) {
        throw "retrieveFeatures called with silly scale";
    }

    if (chr != this.chr) {
        throw "Can't extend Known Space to a new chromosome";
    }
    if (min < 1) {
        min = 1;
    }

    this.min = min;
    this.max = max;
    this.scale = scale;

    if (this.pool) {
        this.pool.abortAll();
    }
    this.pool = new FetchPool();
    this.awaitedSeq = new Awaited();
    this.seqWasFetched = false;
    this.viewCount++;

    this.startFetchesForTiers(tiers);
    this.pool.notifyRequestsIssued();
};

function filterFeatures(features, min, max) {
    var ff = [];
    var featuresByGroup = {};

    for (var fi = 0; fi < features.length; ++fi) {
        var f = features[fi];
        if (!f.min || !f.max) {
            ff.push(f);
        } else if (f.groups && f.groups.length > 0) {
            pusho(featuresByGroup, f.groups[0].id, f);
        } else if (f.min <= max && f.max >= min) {
            ff.push(f);
        }
    }

    for (var gid in featuresByGroup) {
        var gf = featuresByGroup[gid];
        var gmin = 100000000000,
            gmax = -100000000000;
        for (var fi = 0; fi < gf.length; ++fi) {
            var f = gf[fi];
            gmin = Math.min(gmin, f.min);
            gmax = Math.max(gmax, f.max);
        }
        if (gmin <= max || gmax >= min) {
            for (var fi = 0; fi < gf.length; ++fi) {
                ff.push(gf[fi]);
            }
        }
    }

    return ff;
}

KnownSpace.prototype.invalidate = function (tier) {
    if (!this.pool) {
        return;
    }

    this.featureCache[tier] = null;
    this.startFetchesForTiers([tier]);
};

KnownSpace.prototype.startFetchesForTiers = function (tiers) {
    var thisB = this;

    var awaitedSeq = this.awaitedSeq;
    var needSeq = false;

    var gex;

    for (var t = 0; t < tiers.length; ++t) {
        var tierRenderer = tiers[t].browser.getTierRenderer(tiers[t]);
        try {
            if (this.startFetchesFor(tiers[t], awaitedSeq)) {
                needSeq = true;
            }
        } catch (ex) {
            var tier = tiers[t];

            tier.currentFeatures = [];
            tier.currentSequence = null;
            console.log('Error fetching tier source');
            console.log(ex);
            gex = ex;
            console.log(ex.stack);
            tierRenderer.renderTier(ex, tier);
            tier.wasRendered();
        }
    }

    if (needSeq && !this.seqWasFetched) {
        this.seqWasFetched = true;
        var smin = this.min,
            smax = this.max;

        if (this.cs) {
            if (this.cs.start <= smin && this.cs.end >= smax) {
                var cachedSeq;
                if (this.cs.start == smin && this.cs.end == smax) {
                    cachedSeq = this.cs;
                } else {
                    cachedSeq = new DASSequence(this.cs.name, smin, smax, this.cs.alphabet, this.cs.seq.substring(smin - this.cs.start, smax + 1 - this.cs.start));
                }
                return awaitedSeq.provide(cachedSeq);
            }
        }

        this.seqSource.fetch(this.chr, smin, smax, this.pool, function (err, seq) {
            if (seq) {
                if (!thisB.cs || smin <= thisB.cs.start && smax >= thisB.cs.end || smin >= thisB.cs.end || smax <= thisB.cs.start || smax - smin > thisB.cs.end - thisB.cs.start) {
                    thisB.cs = seq;
                }
                awaitedSeq.provide(seq);
            } else {
                console.log('Sequence loading failed', err);
                awaitedSeq.provide(null);
            }
        });
    }

    if (gex) throw gex;
};

KnownSpace.prototype.startFetchesFor = function (tier, awaitedSeq) {
    var thisB = this;

    var viewID = this.viewCount;
    var source = tier.getSource() || new DummyFeatureSource();
    var needsSeq = tier.needsSequence(this.scale);
    var baton = thisB.featureCache[tier];
    var styleFilters = tier.getActiveStyleFilters(this.scale);
    var wantedTypes;
    if (styleFilters) wantedTypes = styleFilters.typeList();
    var chr = this.chr,
        min = this.min,
        max = this.max;

    if (wantedTypes === undefined) {
        return false;
    }
    if (baton && baton.chr === this.chr && baton.min <= min && baton.max >= max) {
        var cachedFeatures = baton.features;
        if (baton.min < min || baton.max > max) {
            cachedFeatures = filterFeatures(cachedFeatures, min, max);
        }

        thisB.provision(tier, baton.chr, intersection(baton.coverage, new Range(min, max)), baton.scale, wantedTypes, cachedFeatures, baton.status, needsSeq ? awaitedSeq : null);

        var availableScales = source.getScales();

        if (baton.scale <= this.scale || !availableScales) {
            return needsSeq;
        }
    }

    if (source.instrument) console.log('Starting  fetch ' + viewID + ' (' + min + ', ' + max + ')');

    source.fetch(chr, min, max, this.scale, wantedTypes, this.pool, function (status, features, scale, coverage) {
        if (source.instrument) console.log('Finishing fetch ' + viewID);

        var latestViewID = thisB.latestViews[tier] || -1;
        if (thisB.cancelled || latestViewID > viewID) {
            return;
        }

        if (!coverage) {
            coverage = new Range(min, max);
        }

        if (!baton || min < baton.min || max > baton.max) {
            // FIXME should be merging in some cases?
            thisB.featureCache[tier] = new KSCacheBaton(chr, min, max, scale, features, status, coverage);
        }

        thisB.latestViews[tier] = viewID;
        thisB.provision(tier, chr, coverage, scale, wantedTypes, features, status, needsSeq ? awaitedSeq : null);
    }, styleFilters);
    return needsSeq;
};

KnownSpace.prototype.provision = function (tier, chr, coverage, actualScale, wantedTypes, features, status, awaitedSeq) {
    var tierRenderer = tier.browser.getTierRenderer(tier);
    if (status) {
        tier.setFeatures(chr, coverage, actualScale, [], null);
        if (!features) {
            var e = new Error(status);
            status = "Error fetching data: " + status + "; see browser console";
            console.log("Error fetching data for tier " + tier.dasSource.name + ":");
            console.log(tier.dasSource);
            console.log("Stack trace:");
            console.log(e.stack);
        }
        tierRenderer.renderTier(status, tier);
        tier.wasRendered();
    } else {
        var mayDownsample = false;
        var needBaseComposition = false;
        var src = tier.getSource();
        while (MappedFeatureSource.prototype.isPrototypeOf(src) || CachingFeatureSource.prototype.isPrototypeOf(src) || OverlayFeatureSource.prototype.isPrototypeOf(src)) {

            if (OverlayFeatureSource.prototype.isPrototypeOf(src)) {
                src = src.sources[0];
            } else {
                src = src.source;
            }
        }
        if (BWGFeatureSource.prototype.isPrototypeOf(src) || RemoteBWGFeatureSource.prototype.isPrototypeOf(src) || BAMFeatureSource.prototype.isPrototypeOf(src) || RemoteBAMFeatureSource.prototype.isPrototypeOf(src)) {

            mayDownsample = true;
        }

        if (!src.opts || !src.opts.forceReduction && !src.opts.noDownsample) {
            if ( /* (actualScale < (this.scale/2) && features.length > 200)  || */
            mayDownsample && wantedTypes && wantedTypes.length == 1 && wantedTypes.indexOf('density') >= 0) {
                features = downsample(features, this.scale);
            }
        }

        if (wantedTypes && wantedTypes.length == 1 && wantedTypes.indexOf('base-coverage') >= 0) {
            // Base-composition coverage track
            needBaseComposition = true;
        }

        if (awaitedSeq) {
            awaitedSeq.await(function (seq) {
                if (needBaseComposition) {
                    features = getBaseCoverage(features, seq, tier.browser.baseColors);
                }
                tier.setFeatures(chr, coverage, actualScale, features, seq);
                tierRenderer.renderTier(status, tier);
                tier.wasRendered();
            });
        } else {
            tier.setFeatures(chr, coverage, actualScale, features);
            tierRenderer.renderTier(status, tier);
            tier.wasRendered();
        }
    }
};

if (typeof module !== 'undefined') {
    module.exports = {
        KnownSpace: KnownSpace
    };
}

},{"./das":10,"./overlay":30,"./sample":33,"./sourceadapters":38,"./spans":40,"./utils":55,"es6-promise":59}],26:[function(require,module,exports){
'use strict';

/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2011
//
// lh3utils.js: common support for lh3's file formats
//

if (typeof require !== 'undefined') {
    var jszlib = require('jszlib');
    var jszlib_inflate_buffer = jszlib.inflateBuffer;
    var arrayCopy = jszlib.arrayCopy;
}

function Vob(b, o) {
    this.block = b;
    this.offset = o;
}

Vob.prototype.toString = function () {
    return '' + this.block + ':' + this.offset;
};

function readVob(ba, offset, allowZero) {
    var block = (ba[offset + 6] & 0xff) * 0x100000000 + (ba[offset + 5] & 0xff) * 0x1000000 + (ba[offset + 4] & 0xff) * 0x10000 + (ba[offset + 3] & 0xff) * 0x100 + (ba[offset + 2] & 0xff);
    var bint = ba[offset + 1] << 8 | ba[offset];
    if (block == 0 && bint == 0 && !allowZero) {
        return null; // Should only happen in the linear index?
    } else {
        return new Vob(block, bint);
    }
}

function unbgzf(data, lim) {
    lim = Math.min(lim || 1, data.byteLength - 50);
    var oBlockList = [];
    var ptr = [0];
    var totalSize = 0;

    while (ptr[0] < lim) {
        var ba = new Uint8Array(data, ptr[0], 12); // FIXME is this enough for all credible BGZF block headers?
        var xlen = ba[11] << 8 | ba[10];
        // dlog('xlen[' + (ptr[0]) +']=' + xlen);
        var unc = jszlib_inflate_buffer(data, 12 + xlen + ptr[0], Math.min(65536, data.byteLength - 12 - xlen - ptr[0]), ptr);
        ptr[0] += 8;
        totalSize += unc.byteLength;
        oBlockList.push(unc);
    }

    if (oBlockList.length == 1) {
        return oBlockList[0];
    } else {
        var out = new Uint8Array(totalSize);
        var cursor = 0;
        for (var i = 0; i < oBlockList.length; ++i) {
            var b = new Uint8Array(oBlockList[i]);
            arrayCopy(b, 0, out, cursor, b.length);
            cursor += b.length;
        }
        return out.buffer;
    }
}

function Chunk(minv, maxv) {
    this.minv = minv;this.maxv = maxv;
}

//
// Binning (transliterated from SAM1.3 spec)
//

/* calculate bin given an alignment covering [beg,end) (zero-based, half-close-half-open) */
function reg2bin(beg, end) {
    --end;
    if (beg >> 14 == end >> 14) return ((1 << 15) - 1) / 7 + (beg >> 14);
    if (beg >> 17 == end >> 17) return ((1 << 12) - 1) / 7 + (beg >> 17);
    if (beg >> 20 == end >> 20) return ((1 << 9) - 1) / 7 + (beg >> 20);
    if (beg >> 23 == end >> 23) return ((1 << 6) - 1) / 7 + (beg >> 23);
    if (beg >> 26 == end >> 26) return ((1 << 3) - 1) / 7 + (beg >> 26);
    return 0;
}

/* calculate the list of bins that may overlap with region [beg,end) (zero-based) */
var MAX_BIN = ((1 << 18) - 1) / 7;
function reg2bins(beg, end) {
    var i = 0,
        k,
        list = [];
    --end;
    list.push(0);
    for (k = 1 + (beg >> 26); k <= 1 + (end >> 26); ++k) {
        list.push(k);
    }for (k = 9 + (beg >> 23); k <= 9 + (end >> 23); ++k) {
        list.push(k);
    }for (k = 73 + (beg >> 20); k <= 73 + (end >> 20); ++k) {
        list.push(k);
    }for (k = 585 + (beg >> 17); k <= 585 + (end >> 17); ++k) {
        list.push(k);
    }for (k = 4681 + (beg >> 14); k <= 4681 + (end >> 14); ++k) {
        list.push(k);
    }return list;
}

if (typeof module !== 'undefined') {
    module.exports = {
        unbgzf: unbgzf,
        readVob: readVob,
        reg2bin: reg2bin,
        reg2bins: reg2bins,
        Chunk: Chunk
    };
}

},{"jszlib":60}],27:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2014
//
// memstore.js
//

"use strict";

if (typeof require !== 'undefined') {
    var sa = require('./sourceadapters');
    var dalliance_registerSourceAdapterFactory = sa.registerSourceAdapterFactory;
    var dalliance_makeParser = sa.makeParser;
    var FeatureSourceBase = sa.FeatureSourceBase;

    var das = require('./das');
    var DASStylesheet = das.DASStylesheet;
    var DASStyle = das.DASStyle;
    var DASFeature = das.DASFeature;
    var DASGroup = das.DASGroup;

    var utils = require('./utils');
    var Awaited = utils.Awaited;
    var textXHR = utils.textXHR;
}

function MemStore() {
    this.featuresByChr = {};
    this.maxLength = 1;
    this.chrRing = null;
}

MemStore.prototype.addFeatures = function (features) {
    var dirty = {};
    for (var fi = 0; fi < features.length; ++fi) {
        var f = features[fi];
        var chr = f.segment || f.chr;
        var fa = this.featuresByChr[chr];
        if (!fa) {
            fa = [];
            this.featuresByChr[chr] = fa;
        }
        fa.push(f);
        dirty[chr] = true;

        var len = f.max - f.min + 1;
        if (len > this.maxLength) this.maxLength = len;
    }

    for (chr in dirty) {
        var fa = this.featuresByChr[chr];
        fa.sort(function (f1, f2) {
            var d = f1.min - f2.min;
            if (d != 0) return d;
            return f1.max - f2.max;
        });
    }
    this.chrRing = null;
};

MemStore.prototype._indexFor = function (fa, p) {
    var lb = 0,
        ub = fa.length;
    while (ub > lb) {
        var mid = (lb + ub) / 2 | 0;
        if (mid >= fa.length) return fa.length;
        var mg = fa[mid];
        if (p < mg.min) {
            ub = mid;
        } else {
            lb = mid + 1;
        }
    }
    return ub;
};

MemStore.prototype.fetch = function (chr, min, max) {
    var fa = this.featuresByChr[chr];
    if (!fa) {
        if (chr.indexOf('chr') == 0) fa = this.featuresByChr[chr.substring(3)];else fa = this.featuresByChr['chr' + chr];
    }
    if (!fa) return [];

    var mini = Math.max(0, this._indexFor(fa, min - this.maxLength - 1));
    var maxi = Math.min(fa.length - 1, this._indexFor(fa, max));

    var res = [];
    for (var fi = mini; fi <= maxi; ++fi) {
        var f = fa[fi];
        if (f.min <= max && f.max >= min) res.push(f);
    }
    return res;
};

MemStore.prototype.findNextFeature = function (chr, pos, dir) {
    if (this.chrRing == null) {
        this.chrRing = [];
        for (var chr in this.featuresByChr) {
            this.chrRing.push(chr);
        }
        this.chrRing.sort();
    }

    var fa = this.featuresByChr[chr];
    if (!fa) {
        if (chr.indexOf('chr') == 0) {
            chr = chr.substring(3);
            fa = this.featuresByChr[chr];
        } else {
            chr = 'chr' + chr;
            fa = this.featuresByChr[chr];
        }
    }
    if (!fa) return null;

    var i = Math.max(0, Math.min(this._indexFor(fa, pos), fa.length - 1));
    if (dir > 0) {
        while (i < fa.length) {
            var f = fa[i++];
            if (f.min > pos) return f;
        }
        var chrInd = this.chrRing.indexOf(chr) + 1;
        if (chrInd >= this.chrRing.length) chrInd = 0;
        return this.findNextFeature(this.chrRing[chrInd], 0, dir);
    } else {
        while (i >= 0) {
            var f = fa[i--];
            if (f.max < pos) return f;
        }
        var chrInd = this.chrRing.indexOf(chr) - 1;
        if (chrInd < 0) chrInd = this.chrRing.length - 1;
        return this.findNextFeature(this.chrRing[chrInd], 10000000000, dir);
    }
};

function MemStoreFeatureSource(source) {
    this.source = source;
    FeatureSourceBase.call(this);
    this.storeHolder = new Awaited();
    this.parser = dalliance_makeParser(source.payload);
    if (!this.parser) {
        throw "Unsupported memstore payload: " + source.payload;
    }

    var thisB = this;
    this._load(function (resp, err) {
        if (err) {
            thisB.error = err;
            thisB.storeHolder.provide(null);
        } else {
            var store = new MemStore();
            var features = [];
            var lines = resp.split('\n');

            var session = thisB.parser.createSession(function (f) {
                features.push(f);
            });
            for (var li = 0; li < lines.length; ++li) {
                var line = lines[li];
                if (line.length > 0) {
                    session.parse(line);
                }
            }
            session.flush();

            store.addFeatures(features);

            thisB.storeHolder.provide(store);
        }
    });
}

MemStoreFeatureSource.prototype = Object.create(FeatureSourceBase.prototype);

MemStoreFeatureSource.prototype._load = function (callback) {
    if (this.source.blob) {
        var r = new FileReader();
        r.onloadend = function () {
            return callback(r.result, r.error);
        };
        r.readAsText(this.source.blob);
    } else {
        if (this.source.credentials) var opts = { credentials: this.source.credentials };
        textXHR(this.source.uri, callback, opts);
    }
};

MemStoreFeatureSource.prototype.fetch = function (chr, min, max, scale, types, pool, cnt) {
    var thisB = this;
    this.storeHolder.await(function (store) {
        if (store) {
            var f = store.fetch(chr, min, max);
            return cnt(null, f, 100000000);
        } else {
            return cnt(thisB.error);
        }
    });
};

MemStoreFeatureSource.prototype.getStyleSheet = function (callback) {
    if (this.parser && this.parser.getStyleSheet) this.parser.getStyleSheet(callback);
};

MemStoreFeatureSource.prototype.getDefaultFIPs = function (callback) {
    if (this.parser && this.parser.getDefaultFIPs) this.parser.getDefaultFIPs(callback);
};

MemStoreFeatureSource.prototype.getScales = function () {
    return 100000000;
};

MemStoreFeatureSource.prototype.findNextFeature = function (chr, pos, dir, callback) {
    var thisB = this;
    this.storeHolder.await(function (store) {
        if (store) {
            return callback(store.findNextFeature(chr, pos, dir));
        } else {
            return callback(null, thisB.error);
        }
    });
};

MemStoreFeatureSource.prototype.capabilities = function () {
    var caps = { leap: true };
    return caps;
};

dalliance_registerSourceAdapterFactory('memstore', function (source) {
    return { features: new MemStoreFeatureSource(source) };
});

},{"./das":10,"./sourceadapters":38,"./utils":55}],28:[function(require,module,exports){
/* jshint esversion: 6 */
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.drawTier = exports.renderTier = undefined;

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

var _sequenceDraw = require("./sequence-draw.js");

var _glyphs = require("./glyphs.js");

var _defaultRenderer = require("./default-renderer");

var DefaultRenderer = _interopRequireWildcard(_defaultRenderer);

var _ramda = require("ramda");

var R = _interopRequireWildcard(_ramda);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

exports.renderTier = renderTier;
exports.drawTier = drawTier;

/* Renders multiple tiers in a single track.
   Works by simply drawing several tiers to a single canvas.
   Actual rendering is done using default-renderer.es6.
   A multi-tier renderer is configured by adding the following to a tier's
   configuration:
   renderer: 'multi',
   multi: {
       multi_id: "multi_1",
   }

   All subtiers with the "multi_1" multi_id will be drawn to this tier's canvas.
 */

function renderTier(status, tier) {
    drawTier(tier);
    tier.updateStatus(status);
}

function drawTier(multiTier) {
    var multiConfig = multiTier.dasSource.multi;
    var getSubConfig = function getSubConfig(t) {
        return t.dasSource.sub;
    };

    // Padding is used for finding the correct canvas size and must be set
    if (!multiTier.padding) multiTier.padding = 3;

    var canvas = multiTier.viewport.getContext("2d");
    var retina = multiTier.browser.retina && window.devicePixelRatio > 1;
    if (retina) {
        canvas.scale(2, 2);
    }

    // Filter out only tiers that are to be drawn in this multitier,
    // and also have fetched data.
    var tiers = multiTier.browser.tiers.filter(function (tier) {
        return _typeof(getSubConfig(tier)) === "object" && getSubConfig(tier).multi_id === multiConfig.multi_id && (tier.currentFeatures || tier.currentSequence);
    });

    // The shortest distance from the top of the canvas to a subtier
    var minOffset = R.pipe(R.map(function (tier) {
        return tier.dasSource.sub.offset;
    }), R.reduce(function (acc, offset) {
        return offset < acc ? offset : acc;
    }, 0))(tiers);

    tiers.forEach(function (tier) {
        if (tier.sequenceSource) {
            (0, _sequenceDraw.drawSeqTier)(tier, tier.currentSequence);
        } else {
            // Shift subtiers up by the minimum offset,
            // so that there's no empty space at the top
            DefaultRenderer.prepareSubtiers(tier, canvas, getSubConfig(tier).offset - minOffset, false);
        }

        // Must be set for painting to work
        if (!multiTier.glyphCacheOrigin) multiTier.glyphCacheOrigin = tier.glyphCacheOrigin;
    });

    // The canvas should fit all subtiers, including offsets, but no more
    var canvasHeight = R.pipe(R.map(function (tier) {
        return R.map(function (subtier) {
            return subtier.height + getSubConfig(tier).offset;
        }, tier.subtiers);
    }), R.flatten, R.reduce(function (acc, h) {
        return h > acc ? h : acc;
    }, -Infinity), R.add(-minOffset))(tiers);

    prepareViewport(multiTier, canvas, retina, canvasHeight, true);

    tiers.sort(function (t1, t2) {
        return getSubConfig(t1).z > getSubConfig(t2).z;
    });

    // TODO: make it add the glyph on to the first available tier;
    // crashes if last tier is empty...
    if (multiConfig.grid && tiers && tiers[tiers.length - 1] && tiers[tiers.length - 1].subtiers[0]) {
        var grid = new _glyphs.GridGlyph(canvasHeight, multiConfig.grid_offset, multiConfig.grid_spacing);
        // pretty hacky way of adding the grid, but it works (mostly)
        tiers[tiers.length - 1].subtiers[0].glyphs.unshift(grid);
    }

    tiers.forEach(function (tier) {
        // Need to save and restore canvas to make sure that the subtiers are
        // drawn on top of one another, if not shifted...
        canvas.save();
        DefaultRenderer.paint(tier, canvas, retina, true);
        canvas.restore();
    });

    multiTier.drawOverlay();

    if (multiConfig.quant) {
        var quantCanvas = DefaultRenderer.createQuantOverlay(multiTier, canvasHeight + multiTier.padding * 2, retina);
        DefaultRenderer.paintQuant(quantCanvas, multiTier, multiConfig.quant, 10);
    }

    if (typeof multiTier.dasSource.drawCallback === "function") {
        multiTier.dasSource.drawCallback(canvas, multiTier);
    }

    multiTier.originHaxx = 0;
    multiTier.browser.arrangeTiers();
}

function prepareViewport(tier, canvas, retina, canvasHeight) {
    var clear = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : true;

    var desiredWidth = tier.browser.featurePanelWidth + 2000;
    if (retina) {
        desiredWidth *= 2;
    }

    var fpw = tier.viewport.width | 0;
    if (fpw < desiredWidth - 50) {
        tier.viewport.width = fpw = desiredWidth;
    }

    canvasHeight += 2 * tier.padding;
    canvasHeight = Math.max(canvasHeight, tier.browser.minTierHeight);

    if (canvasHeight != tier.viewport.height) {
        tier.viewport.height = canvasHeight;

        if (retina) {
            tier.viewport.height *= 2;
        }
    }

    tier.viewportHolder.style.left = '-1000px';
    tier.viewport.style.width = retina ? '' + fpw / 2 + 'px' : '' + fpw + 'px';
    tier.viewport.style.height = '' + canvasHeight + 'px';
    tier.layoutHeight = Math.max(canvasHeight, tier.browser.minTierHeight);

    tier.updateHeight();
    tier.norigin = tier.browser.viewStart;

    if (clear) {
        DefaultRenderer.clearViewport(canvas, fpw, canvasHeight);
    }

    DefaultRenderer.drawUnmapped(tier, canvas, canvasHeight);
}

},{"./default-renderer":11,"./glyphs.js":23,"./sequence-draw.js":35,"ramda":62}],29:[function(require,module,exports){
'use strict';

/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2014
//
// memstore.js
//

function formatLongInt(n) {
    return (n | 0).toString().replace(/\B(?=(\d{3})+(?!\d))/g, ',');
}

function formatQuantLabel(v) {
    var t = '' + v;
    var dot = t.indexOf('.');
    if (dot < 0) {
        return t;
    } else {
        var dotThreshold = 2;
        if (t.substring(0, 1) == '-') {
            ++dotThreshold;
        }

        if (dot >= dotThreshold) {
            return t.substring(0, dot);
        } else {
            return t.substring(0, dot + 2);
        }
    }
}

if (typeof module !== 'undefined') {
    module.exports = {
        formatLongInt: formatLongInt,
        formatQuantLabel: formatQuantLabel
    };
}

},{}],30:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2013
//
// overlay.js: featuresources composed from multiple underlying sources
//

"use strict";

if (typeof require !== 'undefined') {
    var utils = require('./utils');
    var shallowCopy = utils.shallowCopy;
    var arrayIndexOf = utils.arrayIndexOf;
}

function OverlayFeatureSource(sources, opts) {
    this.sources = sources;
    this.opts = opts || {};
    this.activityListeners = [];
    this.readinessListeners = [];
    this.changeListeners = [];
    this.business = [];
    this.readiness = [];

    for (var i = 0; i < this.sources.length; ++i) {
        this.initN(i);
    }

    if (typeof opts.merge === 'function') {
        this.merge = opts.merge;
    } else if (opts.merge == 'concat') {
        this.merge = OverlayFeatureSource_merge_concat;
    } else if (opts.merge == 'alternates') {
        this.merge = OverlayFeatureSource_merge_concat;
        this.filterDispatchOnMethod = true;
    } else {
        this.merge = OverlayFeatureSource_merge_byKey;
    }
}

OverlayFeatureSource.prototype.initN = function (n) {
    var s = this.sources[n];
    var thisB = this;
    this.business[n] = 0;

    if (s.addActivityListener) {
        s.addActivityListener(function (b) {
            thisB.business[n] = b;
            thisB.notifyActivity();
        });
    }
    if (s.addChangeListener) {
        s.addChangeListener(function () {
            thisB.notifyChange();
        });
    }
    if (s.addReadinessListener) {
        s.addReadinessListener(function (r) {
            thisB.readiness[n] = r;
            thisB.notifyReadiness();
        });
    }
};

OverlayFeatureSource.prototype.addReadinessListener = function (l) {
    this.readinessListeners.push(l);
    this.notifyReadinessListener(l);
};

OverlayFeatureSource.prototype.removeReadinessListener = function (l) {
    var idx = arrayIndexOf(this.readinessListeners, l);
    if (idx >= 0) {
        this.readinessListeners.splice(idx, 1);
    }
};

OverlayFeatureSource.prototype.notifyReadiness = function () {
    for (var i = 0; i < this.readinessListeners.length; ++i) {
        this.notifyReadinessListener(this.readinessListeners[i]);
    }
};

OverlayFeatureSource.prototype.notifyReadinessListener = function (l) {
    var r = null;
    for (var i = 0; i < this.readiness.length; ++i) {
        if (this.readiness[i] != null) {
            r = this.readiness[i];break;
        }
    }
    try {
        l(r);
    } catch (e) {
        console.log(e);
    }
};

OverlayFeatureSource.prototype.addActivityListener = function (l) {
    this.activityListeners.push(l);
};

OverlayFeatureSource.prototype.removeActivityListener = function (l) {
    var idx = arrayIndexOf(this.activityListeners, l);
    if (idx >= 0) {
        this.activityListeners.splice(idx, 1);
    }
};

OverlayFeatureSource.prototype.notifyActivity = function () {
    var busy = 0;
    for (var i = 0; i < this.business.length; ++i) {
        busy += this.business[i];
    }

    for (var li = 0; li < this.activityListeners.length; ++li) {
        try {
            this.activityListeners[li](busy);
        } catch (e) {
            console.log(e);
        }
    }
};

OverlayFeatureSource.prototype.addChangeListener = function (listener) {
    this.changeListeners.push(listener);
};

OverlayFeatureSource.prototype.removeChangeListener = function (l) {
    var idx = arrayIndexOf(this.changeListeners, l);
    if (idx >= 0) {
        this.changeListeners.splice(idx, 1);
    }
};

OverlayFeatureSource.prototype.notifyChange = function () {
    for (var li = 0; li < this.changeListeners.length; ++li) {
        try {
            this.changeListeners[li](this.busy);
        } catch (e) {
            console.log(e);
        }
    }
};

OverlayFeatureSource.prototype.getScales = function () {
    return this.sources[0].getScales();
};

OverlayFeatureSource.prototype.getStyleSheet = function (callback) {
    return this.sources[0].getStyleSheet(callback);
};

OverlayFeatureSource.prototype.capabilities = function () {
    var caps = {};
    var s0 = this.sources[0];
    if (s0.capabilities) caps = shallowCopy(s0.capabilities());

    for (var i = 1; i < this.sources.length; ++i) {
        var si = this.sources[i];
        if (si.capabilities) {
            var co = si.capabilities();
            if (co.search) {
                caps.search = co.search;
            }
        }
    }

    return caps;
};

OverlayFeatureSource.prototype.search = function (query, callback) {
    for (var i = 0; i < this.sources.length; ++i) {
        if (_sourceAdapterIsCapable(this.sources[i], 'search')) {
            return this.sources[i].search(query, callback);
        }
    }
};

OverlayFeatureSource.prototype.fetch = function (chr, min, max, scale, types, pool, callback, styleFilters) {
    var sources;
    if (this.filterDispatchOnMethod) {
        sources = [];
        var sfl = styleFilters.list();
        for (var si = 0; si < this.sources.length; ++si) {
            var source = this.sources[si];
            for (var fi = 0; fi < sfl.length; ++fi) {
                var filter = sfl[fi];
                if (!filter.method || filter.method == source.name) {
                    sources.push(source);
                    break;
                }
            }
        }
    } else {
        sources = this.sources;
    }

    var baton = new OverlayBaton(this, callback, sources);
    for (var si = 0; si < sources.length; ++si) {
        this.fetchN(baton, si, sources[si], chr, min, max, scale, types, pool, styleFilters);
    }
};

OverlayFeatureSource.prototype.fetchN = function (baton, si, source, chr, min, max, scale, types, pool, styleFilters) {
    // FIXME should we try to prune styleFilters?
    source.fetch(chr, min, max, scale, types, pool, function (status, features, scale) {
        return baton.completed(si, status, features, scale);
    }, styleFilters);
};

OverlayFeatureSource.prototype.quantFindNextFeature = function (chr, pos, dir, threshold, callback) {
    return this.sources[0].quantFindNextFeature(chr, pos, dir, threshold, callback);
};

OverlayFeatureSource.prototype.findNextFeature = function (chr, pos, dir, callback) {
    return this.sources[0].findNextFeature(chr, pos, dir, callback);
};

function OverlayBaton(source, callback, sources) {
    this.source = source;
    this.callback = callback;
    this.sources = sources;
    this.count = sources.length;

    this.returnCount = 0;
    this.statusCount = 0;
    this.returns = [];
    this.features = [];
    this.statuses = [];
    this.scale = null;
}

OverlayBaton.prototype.completed = function (index, status, features, scale) {
    if (this.scale == null || index == 0) this.scale = scale;

    if (this.returns[index]) throw 'Multiple returns for source ' + index;

    this.returns[index] = true;
    this.returnCount++;

    this.features[index] = features;

    if (status) {
        this.statuses[index] = status;
        this.statusCount++;
    }

    if (this.returnCount == this.count) {
        if (this.statusCount > 0) {
            var message = '';
            for (var si = 0; si < this.count; ++si) {
                var s = this.statuses[si];
                if (s) {
                    if (message.length > 0) message += ', ';
                    message += s;
                }
            }
            return this.callback(message, null, this.scale);
        } else {
            this.callback(null, this.source.merge(this.features, this.sources), this.scale);
        }
    }
};

OverlayFeatureSource.prototype.getDefaultFIPs = function (callback) {
    for (var si = 0; si < this.sources.length; ++si) {
        var s = this.sources[si];
        if (s.getDefaultFIPs) s.getDefaultFIPs(callback);
    }
};

OverlayFeatureSource.prototype.keyForFeature = function (feature) {
    return '' + feature.min + '..' + feature.max;
};

function OverlayFeatureSource_merge_byKey(featureSets) {
    var omaps = [];

    for (var fsi = 1; fsi < featureSets.length; ++fsi) {
        var om = {};
        var of = featureSets[fsi];
        for (var fi = 0; fi < of.length; ++fi) {
            om[this.keyForFeature(of[fi])] = of[fi];
        }
        omaps.push(om);
    }

    var mf = [];
    var fl = featureSets[0];
    for (var fi = 0; fi < fl.length; ++fi) {
        var f = fl[fi];

        for (var oi = 0; oi < omaps.length; ++oi) {
            var om = omaps[oi];
            of = om[this.keyForFeature(f)];
            if (of) {
                for (var k in of) {
                    if (k === 'score') {
                        f.score2 = of.score;
                    } else if (k === 'min' || k === 'max' || k === 'segment' || k === '_cachedStyle') {
                        // do nothing
                    } else {
                        f[k] = of[k];
                    }
                }
            }
        }
        mf.push(f);
    }
    return mf;
}

function OverlayFeatureSource_merge_concat(featureSets, sources) {
    var features = [];
    for (var fsi = 0; fsi < featureSets.length; ++fsi) {
        var fs = featureSets[fsi];
        var name = sources[fsi].name;
        for (var fi = 0; fi < fs.length; ++fi) {
            var f = fs[fi];
            f.method = name;
            features.push(f);
        }
    }
    return features;
}

function _sourceAdapterIsCapable(s, cap) {
    if (!s.capabilities) return false;else return s.capabilities()[cap];
}

if (typeof module !== 'undefined') {
    module.exports = {
        OverlayFeatureSource: OverlayFeatureSource
    };
}

},{"./utils":55}],31:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2014
//
// bedwig.js
//

"use strict";

if (typeof require !== 'undefined') {
    var bin = require('./bin');
    var URLFetchable = bin.URLFetchable;
    var BlobFetchable = bin.BlobFetchable;
    var readInt = bin.readInt;

    var bbi = require('./bigwig');
    var BIG_WIG_MAGIC = bbi.BIG_WIG_MAGIC;
    var BIG_BED_MAGIC = bbi.BIG_BED_MAGIC;

    var lh3utils = require('./lh3utils');
    var unbgzf = lh3utils.unbgzf;

    var bam = require('./bam');
    var BAM_MAGIC = bam.BAM_MAGIC;
    var BAI_MAGIC = bam.BAI_MAGIC;

    var tbi = require('./tabix');
    var TABIX_MAGIC = tbi.TABIX_MAGIC;

    var EncodeFetchable = require('./encode').EncodeFetchable;
}

function probeResource(source, listener, retry) {
    var BED_REGEXP = new RegExp('^\\w+\\s[0-9]+\\s[0-9]+.*$');
    var KV_REGEXP = /([^=]+)=\"?([^\"]+)\"?/;
    var VCFHEAD_RE = /^##\s*fileformat=VCFv4\..+/;

    var fetchable;
    if (source.blob) fetchable = new BlobFetchable(source.blob);else if (source.transport == 'encode') fetchable = new EncodeFetchable(source.uri);else fetchable = new URLFetchable(source.uri, { credentials: source.credentials });

    fetchable.slice(0, 1 << 16).salted().fetch(function (result, error) {
        if (!result) {
            if (!retry) {
                source.credentials = true;
                probeResource(source, listener, true);
            }

            return listener(source, "Couldn't fetch data");
        }

        var ba = new Uint8Array(result);
        var la = new Uint32Array(result, 0, 1);
        var magic = la[0];
        if (magic == BIG_WIG_MAGIC || magic == BIG_BED_MAGIC) {
            source.tier_type = 'bwg';
            var nameExtractPattern = new RegExp('/?([^/]+?)(.bw|.bb|.bigWig|.bigBed)?$');
            var match = nameExtractPattern.exec(source.uri || source.blob.name);
            if (match) {
                source.name = match[1];
            }

            return listener(source, null);
        } else if (magic == BAI_MAGIC) {
            source.tier_type = 'bai';
            return listener(source, null);
        } else if (ba[0] == 31 || ba[1] == 139) {
            var unc = unbgzf(result);
            var uncba = new Uint8Array(unc);
            magic = readInt(uncba, 0);
            if (magic == BAM_MAGIC) {
                source.tier_type = 'bam';
                var nameExtractPattern = new RegExp('/?([^/]+?)(.bam)?$');
                var match = nameExtractPattern.exec(source.uri || source.blob.name);
                if (match) {
                    source.name = match[1];
                }

                return listener(source, null);
            } else if (magic == TABIX_MAGIC) {
                source.tier_type = 'tabix-index';
                return listener(source, null);
            } else if (magic == 0x69662323) {
                source.tier_type = 'tabix';
                source.payload = 'vcf';
                var nameExtractPattern = new RegExp('/?([^/]+?)(.vcf)?(.gz)?$');
                var match = nameExtractPattern.exec(source.uri || source.blob.name);
                if (match) {
                    source.name = match[1];
                }

                return listener(source, null);
            } else {
                console.log('magic = ' + magic.toString(16));
                return listener(source, "Unsupported format");
            }
        } else {
            var text = String.fromCharCode.apply(null, ba);
            var lines = text.split("\n");

            if (lines.length > 0 && VCFHEAD_RE.test(lines[0])) {
                source.tier_type = 'memstore';
                source.payload = 'vcf';
                var nameExtractPattern = new RegExp('/?([^/]+?)(\.vcf)?$');
                var match = nameExtractPattern.exec(source.uri || source.blob.name);
                if (match && !source.name) {
                    source.name = match[1];
                }
                return listener(source, null);
            }

            for (var li = 0; li < lines.length; ++li) {
                var line = lines[li].replace('\r', '');
                if (line.length == 0) continue;

                if (line.indexOf('browser') == 0) continue;

                if (line.indexOf('track') == 0) {
                    var maybeType = 'bed';
                    var toks = line.split(/\s/);
                    for (var ti = 1; ti < toks.length; ++ti) {
                        var m = KV_REGEXP.exec(toks[ti]);
                        if (m) {
                            if (m[1] == 'type' && m[2] == 'wiggle_0') {
                                maybeType = 'wig';
                            } else if (m[0] == 'name') {
                                source.name = m[2];
                            }
                        }
                    }

                    finishProbeBedWig(source, maybeType);
                    return listener(source, null);
                }

                if (line.indexOf('fixedStep') == 0) {
                    finishProbeBedWig(source, 'wig');
                    return listener(source, null);
                }

                if (line.indexOf('variableStep') == 0) {
                    finishProbeBedWig(source, 'wig');
                    return listener(source, null);
                }

                if (BED_REGEXP.test(line)) {
                    finishProbeBedWig(source, null);
                    return listener(source, null);
                }

                break;
            }

            return listener(source, "Unsupported format");
        }
    }, { timeout: 1500 }); // Timeout to catch mixed-origin case on Chromium.
}

function finishProbeBedWig(source, maybeType) {
    source.tier_type = 'memstore';
    var nameExtractPattern = new RegExp('/?([^/]+?)(.(bed|wig))?$');
    var match = nameExtractPattern.exec(source.uri || source.blob.name);
    if (match) {
        if (!source.name) source.name = match[1];
        if (!maybeType && match[3]) {
            maybeType = match[3];
        }
    }
    source.payload = maybeType || 'bed';
}

if (typeof module !== 'undefined') {
    module.exports = {
        probeResource: probeResource
    };
}

},{"./bam":1,"./bigwig":3,"./bin":4,"./encode":14,"./lh3utils":26,"./tabix":46}],32:[function(require,module,exports){
/* jshint esversion: 6 */

"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.Ruler = Ruler;
exports.rulerDrawCallback = rulerDrawCallback;


function Ruler(options) {
    var self = this;

    self.value = options.value;
    self.min = options.min;
    self.max = options.max;
    self.width = options.width;
    self.color = options.color;

    Object.keys(self).map(function (key) {
        if (self[key] === undefined) {
            console.log("WARNING: Ruler option " + key + " not set");
        }
    });
}

Ruler.prototype.constructor = Ruler;

function rulerDrawCallback(canvas, tier) {
    var rulers = tier.dasSource.rulers;

    if (!rulers) {
        console.log("Tier uses ruler callback but has no rulers!");
    } else if (!(rulers instanceof Array)) {
        console.log("rulers.js: 'rulers' should be an Array");
    }

    rulers.map(function (r) {
        var rulerY = (r.max - r.value) * r.height;
        var viewWidth = tier.viewport.width;
        var oldLineWidth = canvas.lineWidth;

        canvas.strokeStyle = r.color;
        canvas.beginPath();
        canvas.moveTo(-viewWidth, rulerY + r.offset);
        // Other parts of the code rely on not having changed the lineWidth...
        // So we need to change it back when we're done.
        canvas.lineWidth = r.width;
        canvas.lineTo(2 * viewWidth, rulerY + r.offset);
        canvas.stroke();
        canvas.lineWidth = oldLineWidth;
    });
}

},{}],33:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2010
//
// sample.js: downsampling of quantitative features
//

"use strict";

if (typeof require !== 'undefined') {
    var das = require('./das');
    var DASFeature = das.DASFeature;

    var parseCigar = require('./cigar').parseCigar;

    var shallowCopy = require('./utils').shallowCopy;
}

var __DS_SCALES = [1, 2, 5];

function ds_scale(n) {
    return __DS_SCALES[n % __DS_SCALES.length] * Math.pow(10, n / __DS_SCALES.length | 0);
}

function DSBin(scale, min, max) {
    this.scale = scale;
    this.tot = 0;
    this.cnt = 0;
    this.hasScore = false;
    this.min = min;this.max = max;
    this.features = [];
}

function _featureOrder(a, b) {
    if (a.min < b.min) {
        return -1;
    } else if (a.min > b.min) {
        return 1;
    } else if (a.max < b.max) {
        return -1;
    } else if (b.max > a.max) {
        return 1;
    } else {
        return 0;
    }
}

DSBin.prototype.score = function () {
    if (this.cnt == 0) {
        return 0;
    } else if (this.hasScore) {
        return this.tot / this.cnt;
    } else {
        var features = this.features;
        features.sort(_featureOrder);

        var maxSeen = -10000000000;
        var cov = 0,
            lap = 0;

        for (var fi = 1; fi < features.length; ++fi) {
            var f = features[fi];
            var lMin = Math.max(f.min, this.min);
            var lMax = Math.min(f.max, this.max);
            lap += lMax - lMin + 1;

            if (lMin > maxSeen) {
                cov += lMax - lMin + 1;
                maxSeen = lMax;
            } else {
                if (lMax > maxSeen) {
                    cov += lMax - maxSeen;
                    maxSeen = lMax;
                }
            }
        }

        if (cov > 0) return 1.0 * lap / cov;else return 0;
    }
};

DSBin.prototype.feature = function (f) {
    if (f.score !== undefined) {
        this.tot += f.score;
        this.hasScore = true;
    }

    ++this.cnt;
    this.features.push(f);
};

function downsample(features, targetRez) {
    var sn = 0;
    while (ds_scale(sn + 1) < targetRez) {
        ++sn;
    }
    var scale = ds_scale(sn);

    var binTots = [];
    var maxBin = -10000000000;
    var minBin = 10000000000;
    for (var fi = 0; fi < features.length; ++fi) {
        var f = features[fi];
        if (f.groups && f.groups.length > 0) {
            // Don't downsample complex features (?)
            return features;
        }

        var minLap = f.min / scale | 0;
        var maxLap = f.max / scale | 0;
        maxBin = Math.max(maxBin, maxLap);
        minBin = Math.min(minBin, minLap);
        for (var b = minLap; b <= maxLap; ++b) {
            var bm = binTots[b];
            if (!bm) {
                bm = new DSBin(scale, b * scale, (b + 1) * scale - 1);
                binTots[b] = bm;
            }
            bm.feature(f);
        }
    }

    var sampledFeatures = [];
    for (var b = minBin; b <= maxBin; ++b) {
        var bm = binTots[b];
        if (bm) {
            var f = new DASFeature();
            f.segment = features[0].segment;
            f.min = b * scale + 1;
            f.max = (b + 1) * scale;
            f.score = bm.score();
            f.type = 'density';
            sampledFeatures.push(f);
        }
    }

    var afterDS = Date.now();
    return sampledFeatures;
}

/** Data structure to store information for
a base position:

pos: position of the base.
*/
function BaseBin(pos) {

    this._pos = pos;
    this._bases = {};
    this._totalCount = 0;
}

/** Keep record for incidence of a base,
with related qual score and strand for a position.

Params
    base: base (e.g A, T, G, C, N) observed at position.
    qual: numeric quality score.
    strand: '+' or '-'.
*/
BaseBin.prototype.recordBase = function (base, qual, strand) {
    if (!this._bases[base]) {
        var strandComposition = { '+': 0, '-': 0 };
        strandComposition[strand]++;
        this._bases[base] = {
            cnt: 1,
            totalQual: qual,
            strandCnt: strandComposition
        };
    } else {
        var baseComposition = this._bases[base];
        baseComposition.cnt++;
        baseComposition.totalQual += qual;
        baseComposition.strandCnt[strand]++;
    }
    this._totalCount++;
};

/** Returns count of total number of bases observed at position */
BaseBin.prototype.totalCount = function () {
    return this._totalCount;
};

/** Returns the base position */
BaseBin.prototype.pos = function () {
    return this._pos;
};

/** Creates a list of tag, info pairs in the form
[tag]=[info] for each base, for use in feature-popup */
BaseBin.prototype.infoList = function () {
    var info = [];
    var totalCount = this._totalCount;
    var totalCountStr = "Depth=" + totalCount.toString();
    info.push(totalCountStr);
    for (var base in this._bases) {
        var baseComposition = this._bases[base];
        var baseCnt = baseComposition.cnt;
        var basePercentage = baseCnt * 100 / totalCount;
        var plusStrandCnt = baseComposition.strandCnt['+'];
        var minusStrandCnt = baseComposition.strandCnt['-'];
        var meanQual = baseComposition.totalQual / baseCnt;

        var baseInfoString = [base, '=', baseCnt, ' (', basePercentage.toFixed(0), '%, ', plusStrandCnt, ' +, ', minusStrandCnt, ' -, Qual: ', meanQual.toFixed(0), ')'];
        info.push(baseInfoString.join(''));
    }
    return info;
};

/** Return a list of objects for creating a
histogram showing composition of different bases at a
given location.

Current implementation is hacky: the logic involves
overlaying BoxGlyphs on top of each other, thus the score
is not meaningful, but only used to manipulate height.

Params:
  ref: reference base at position
  threshold: value between 0 and 1 representing min allele frequency
              below which the allele will be ignored in histogram.
              (interpreted as noise)
              Similar to 'allele threshold' parameter in IGV

Returns a list of objects containing 2 properties
    base: such as A, T, G, C, N, - (del)
    score: a numeric score for determining height of histogram
The list is ordered such that a preceeding object always have a
score >= the current object, and the ref base will be the last item.

Example: There are 50 T's and 40 A's (total depth = 90)
at a base where ref=A. The function will return
[T: 90, A: 40]. When creating a histogram with overlap,
this will give an appearance of 40 A's (bottom) and 50 T's (top):
#######
#  T  #
#  T  #
#  T  #
#  T  #
#  T  #
#######
#  A  #
#  A  #
#  A  #
#  A  #
#######
*/
BaseBin.prototype.baseScoreList = function (ref, threshold) {
    var baseScoreList = [];
    var totalCount = this._totalCount;
    var minCount = threshold * totalCount;
    for (var base in this._bases) {
        var baseCount = this._bases[base].cnt;
        if (baseCount < minCount || base == ref) continue;
        var baseScorePair = { base: base, score: totalCount };
        baseScoreList.push(baseScorePair);
        totalCount -= baseCount;
    }
    baseScoreList.push({ base: ref, score: totalCount });
    return baseScoreList;
};

/** Generates an aligned read from the raw sequence of a BAM record
using given cigar string.

Params:
  rawseq: unaligned read sequence from Bam record
  rawquals: unaligned read quals from Bam record
  cigar: Bam cigar string from Bam record

Returns an object with 2 properties:
  seq: string containing aligned read
  quals: string containing printable-character representation
         of sequencing quality score
*/
function alignSeqUsingCigar(rawseq, rawquals, cigar) {
    var ops = parseCigar(cigar);
    var seq = [];
    var quals = [];
    var cursor = 0;
    for (var ci = 0; ci < ops.length; ++ci) {
        var co = ops[ci];
        if (co.op == 'M') {
            seq.push(rawseq.substr(cursor, co.cnt));
            quals.push(rawquals.substr(cursor, co.cnt));
            cursor += co.cnt;
        } else if (co.op == 'D') {
            for (var oi = 0; oi < co.cnt; ++oi) {
                seq.push('-');
                quals.push('Z');
            }
        } else if (co.op == 'I') {
            cursor += co.cnt;
        } else if (co.op == 'S') {
            cursor += co.cnt;
        } else {
            console.log('unknown cigop' + co.op);
        }
    }
    var processedSeq = { seq: seq.join(''), quals: quals.join('') };
    return processedSeq;
}

/** Constructs the reference sequence for a given window.

Params
    currentSequence: DasSequence object containing ref sequence
                     in current browser view.
    min, max: min and max position for window.

Returns a string containing the refseq, padded with 'N' where sequence is not
    available.
*/
function getRefSeq(currentSequence, min, max) {
    var refSeq = [];
    if (currentSequence) {
        var csStart = currentSequence.start | 0;
        var csEnd = currentSequence.end | 0;
        if (csStart <= max && csEnd >= min) {
            var sfMin = Math.max(min, csStart);
            var sfMax = Math.min(max, csEnd);

            for (var i = 0; i < sfMin - min; i++) {
                refSeq.push('N');
            }refSeq.push(currentSequence.seq.substr(sfMin - csStart, sfMax - sfMin + 1));
            for (var i = 0; i < max - sfMax; i++) {
                refSeq.push('N');
            }
        }
    }
    return refSeq.join('');
}

/** Constructs features necessary for a coverage track showing
base composition for BAM reads

Params
    features: a list of features from BAM records.
    currentRefSeq: a DASSequence object containing reference sequence.
    baseColors: an object mapping base to desired colors.

Returns a list of features of type base-coverage.
*/
function getBaseCoverage(features, currentRefSeq, baseColors) {
    var minBin = null;
    var maxBin = null;

    var allBins = [];

    // Populate BaseBins
    for (var fi = 0; fi < features.length; ++fi) {
        var f = features[fi];
        if (f.groups && f.groups.length > 0) {
            // Don't downsample complex features
            return features;
        }
        var processedSeq = alignSeqUsingCigar(f.seq, f.quals, f.cigar);
        var seq = processedSeq.seq;
        var quals = processedSeq.quals;
        var strand = f.orientation;
        var minForFeature = f.min || 0;
        var maxForFeature = f.max || 0;
        var ind = 0;

        for (var b = minForFeature; b <= maxForFeature; ++b) {
            var bm = allBins[b];
            if (!bm) {
                bm = new BaseBin(b);
                allBins[b] = bm;
            }
            var base = seq.charAt(ind);
            var qual = quals.charCodeAt(ind) - 33; // Generate numeric qual score
            bm.recordBase(base, qual, strand);
            ind++;
        }

        if (!minBin) minBin = minForFeature;else minBin = Math.min(minBin, minForFeature);
        if (!maxBin) maxBin = maxForFeature;else maxBin = Math.max(maxBin, maxForFeature);
    }

    // Generate coverage features
    var refSeq = getRefSeq(currentRefSeq, minBin, maxBin);
    var baseFeatures = [];
    var ind = 0;
    for (var b = minBin; b <= maxBin; ++b) {
        var bm = allBins[b];
        if (bm) {
            var f = new DASFeature();
            f.segment = features[0].segment;
            f.min = bm.pos();
            f.max = f.min;
            f.notes = [];
            f.notes = f.notes.concat(bm.infoList());
            f.type = 'base-coverage';
            f.suppressScore = true;
            if (refSeq) {
                var refBase = refSeq.charAt(ind);
                var refString = 'Ref=' + refBase;
                f.notes.unshift(refString);
                var baseScoreList = bm.baseScoreList(refBase, 0.2);
                // TODO: shift 0.2 threshold to a config parameter
                for (var i = 0; i < baseScoreList.length; i++) {
                    var base = baseScoreList[i].base;
                    var score = baseScoreList[i].score;
                    var fBase = shallowCopy(f);
                    fBase.score = score;
                    // Color by baseColor when mismatch occurs
                    // otherwise, BoxGlyph to COLOR1 in style
                    if (baseScoreList.length > 1 || base != refBase) fBase.itemRgb = baseColors[base];

                    baseFeatures.push(fBase);
                }
            } else {
                // No refSeq, only show coverage height.
                baseFeatures.push(f);
            }
        }
        ind++;
    }
    return baseFeatures;
}

if (typeof module !== 'undefined') {
    module.exports = {
        downsample: downsample,
        getBaseCoverage: getBaseCoverage
    };
}

},{"./cigar":8,"./das":10,"./utils":55}],34:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2011
//
// bin.js general binary data support
//

"use strict";

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

if (typeof require !== 'undefined') {
    var browser = require('./cbrowser');
    var Browser = browser.Browser;

    var bin = require('./bin');
    var URLFetchable = bin.URLFetchable;

    var connectTrix = require('./trix').connectTrix;
}

var REGION_PATTERN = /^([\d+,\w,\.,\_,\-]+)[\s:]+([0-9,\.]+?)([KkMmGg])?((-|\.\.|\s)+([0-9,\.]+)([KkMmGg])?)?$/;

function parseLocCardinal(n, m) {
    var i = parseFloat(n.replace(/,/g, ''));
    if (m === 'k' || m === 'K') {
        return i * 1000 | 0;
    } else if (m == 'm' || m === 'M') {
        return i * 1000000 | 0;
    } else {
        return i | 0;
    }
}

Browser.prototype.search = function (g, statusCallback, opts) {
    var thisB = this;
    opts = opts || {};
    var srPadding = opts.padding || this.defaultSearchRegionPadding;

    var m = REGION_PATTERN.exec(g);

    if (m) {
        var chr = m[1],
            start,
            end;
        if (m[6]) {
            start = parseLocCardinal(m[2], m[3]);
            end = parseLocCardinal(m[6], m[7]);
        } else {
            var width = this.viewEnd - this.viewStart + 1;
            start = parseLocCardinal(m[2], m[3]) - width / 2 | 0;
            end = start + width - 1;
        }
        this.setLocation(chr, start, end, statusCallback);
    } else {
        if (!g || g.length == 0) {
            return false;
        }

        var searchCount = 0;
        var foundLatch = false;

        var searchCallback = function searchCallback(found, err) {
            --searchCount;
            if (err) {
                return statusCallback(err);
            }

            if (!found) found = [];
            var min = 500000000,
                max = -100000000;
            var nchr = null;
            for (var fi = 0; fi < found.length; ++fi) {
                var f = found[fi];

                if (nchr == null) {
                    nchr = f.segment;
                }
                min = Math.min(min, f.min);
                max = Math.max(max, f.max);
            }

            if (!nchr) {
                if (searchCount == 0 && !foundLatch) return statusCallback("no match for '" + g + "'");
            } else {
                foundLatch = true;
                thisB.highlightRegion(nchr, min, max);

                var mid = (max + min) / 2 | 0;
                var padding = Math.max(srPadding, 0.3 * (max - min + 1) | 0);
                thisB.setLocation(nchr, min - padding, max + padding, statusCallback);
            }
        };

        var doTrixSearch = function doTrixSearch(tier, trix) {
            trix.lookup(g, function (result, status) {
                if (result == null || result.length < 2) {
                    return tier.featureSource.search(g, searchCallback);
                } else {
                    var hit = result[1].split(',')[0];
                    return tier.featureSource.search(hit, searchCallback);
                }
            });
        };

        if (this.searchEndpoint) {
            searchCount = 1;
            return this.doDasSearch(thisB.searchEndpoint, g, searchCallback);
        }

        var searchSources = [].concat(_toConsumableArray(this.searchOnlySourceHolders || []), _toConsumableArray(this.tiers));

        for (var ti = 0; ti < searchSources.length; ++ti) {
            (function (tier) {
                if (thisB.sourceAdapterIsCapable(tier.featureSource, 'search')) {
                    if (tier.dasSource.trixURI) {
                        ++searchCount;
                        if (tier.trix) {
                            doTrixSearch(tier, tier.trix);
                        } else {
                            var ix = new URLFetchable(tier.dasSource.trixURI, { credentials: tier.dasSource.credentials,
                                resolver: tier.dasSource.resolver });

                            var ixx = new URLFetchable(tier.dasSource.trixxURI || tier.dasSource.trixURI + 'x', { credentials: tier.dasSource.credentials,
                                resolver: tier.dasSource.resolver });

                            connectTrix(ix, ixx, function (trix) {
                                tier.trix = trix;
                                doTrixSearch(tier, trix);
                            });
                        }
                    } else {
                        ++searchCount;
                        tier.featureSource.search(g, searchCallback);
                    }
                } else if (tier.dasSource.provides_search) {
                    ++searchCount;
                    thisB.doDasSearch(tier.dasSource, g, searchCallback);
                }
            })(searchSources[ti]);
        }
    }
};

Browser.prototype.doDasSearch = function (source, g, searchCallback) {
    var thisB = this;
    source.features(null, { group: g, type: 'transcript' }, function (found) {
        if (!found) found = [];
        var min = 500000000,
            max = -100000000;
        var nchr = null;

        var found2 = [];
        for (var fi = 0; fi < found.length; ++fi) {
            var f = found[fi];

            if (f.label.toLowerCase() != g.toLowerCase()) {
                // ...because Dazzle can return spurious overlapping features.
                continue;
            }
            found2.push(f);
        }

        return searchCallback(found2);
    }, false);
};

},{"./bin":4,"./cbrowser":6,"./trix":53}],35:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2012
//
// sequence-draw.js: renderers for sequence-related data
//

"use strict";

if (typeof require !== 'undefined') {
    var utils = require('./utils');
    var formatLongInt = utils.formatLongInt;
    var makeElementNS = utils.makeElementNS;

    var svgu = require('./svg-utils');
    var NS_SVG = svgu.NS_SVG;
    var NS_XLINK = svgu.NS_XLINK;
    var SVGPath = svgu.SVGPath;

    var nf = require('./numformats');
    var formatLongInt = nf.formatLongInt;
}

var MIN_TILE = 100;
var rulerTileColors = ['black', 'white'];

var steps = [1, 2, 5];

var NS_SVG = 'http://www.w3.org/2000/svg';

function tileSizeForScale(scale, min) {
    if (!min) {
        min = MIN_TILE;
    }

    function ts(p) {
        return steps[p % steps.length] * Math.pow(10, p / steps.length | 0);
    }
    var pow = steps.length;
    while (scale * ts(pow) < min) {
        ++pow;
    }
    return ts(pow);
}

function drawSeqTier(tier, seq) {
    var gc = tier.viewport.getContext('2d');
    var retina = tier.browser.retina && window.devicePixelRatio > 1;
    var desiredWidth = tier.browser.featurePanelWidth + 2000;
    if (retina) {
        desiredWidth *= 2;
    }
    var fpw = tier.viewport.width | 0; // this.browser.featurePanelWidth;
    if (fpw < desiredWidth - 50) {
        tier.viewport.width = fpw = desiredWidth;
    }

    var height = 50;
    if (seq && seq.seq) {
        height += 25;
    }

    var canvasHeight = height;
    if (retina) canvasHeight *= 2;

    tier.viewport.height = canvasHeight;
    tier.viewport.style.height = '' + height + 'px';
    tier.viewport.style.width = retina ? '' + fpw / 2 + 'px' : '' + fpw + 'px';
    tier.layoutHeight = height;
    tier.updateHeight();

    if (tier.background) {
        gc.fillStyle = tier.background;
        gc.fillRect(0, 0, fpw, tier.viewport.height);
    }
    if (retina) {
        gc.scale(2, 2);
    }

    gc.translate(1000, 0);
    drawSeqTierGC(tier, seq, gc);
    tier.norigin = tier.browser.viewStart;
    tier.viewportHolder.style.left = '-1000px';
}

function drawSeqTierGC(tier, seq, gc) {
    var scale = tier.browser.scale,
        knownStart = tier.browser.viewStart - 1000 / scale | 0,
        knownEnd = tier.browser.viewEnd + 2000 / scale,
        currentSeqMax = tier.browser.currentSeqMax;

    var seqTierMax = knownEnd;
    if (currentSeqMax > 0 && currentSeqMax < knownEnd) {
        seqTierMax = currentSeqMax;
    }
    var tile = tileSizeForScale(scale);
    var pos = Math.max(0, (knownStart / tile | 0) * tile);

    var origin = tier.browser.viewStart;

    while (pos <= seqTierMax) {
        gc.fillStyle = pos / tile % 2 == 0 ? 'white' : 'black';
        gc.strokeStyle = 'black';
        gc.fillRect((pos - origin) * scale, 8, tile * scale, 3);
        gc.strokeRect((pos - origin) * scale, 8, tile * scale, 3);

        gc.fillStyle = 'black';
        gc.fillText(formatLongInt(pos), (pos - origin) * scale, 22);

        pos += tile;
    }

    if (seq && seq.seq) {
        for (var p = knownStart; p <= knownEnd; ++p) {
            if (p >= seq.start && p <= seq.end) {
                var base = seq.seq.substr(p - seq.start, 1).toUpperCase();
                var color = tier.browser.baseColors[base];
                if (!color) {
                    color = 'gray';
                }

                gc.fillStyle = color;

                if (scale >= 8) {
                    var w = gc.measureText(base).width;
                    // console.log(scale-w);
                    gc.fillText(base, (p - origin) * scale + (scale - w) * 0.5, 52);
                } else {
                    gc.fillRect((p - origin) * scale, 42, scale, 12);
                }
            }
        }
    }
}

function svgSeqTier(tier, seq) {
    var scale = tier.browser.scale,
        knownStart = tier.browser.viewStart - 1000 / scale | 0,
        knownEnd = tier.browser.viewEnd + 2000 / scale,
        currentSeqMax = tier.browser.currentSeqMax;

    var fpw = tier.viewport.width | 0;

    var seqTierMax = knownEnd;
    if (currentSeqMax > 0 && currentSeqMax < knownEnd) {
        seqTierMax = currentSeqMax;
    }
    var tile = tileSizeForScale(scale);
    var pos = Math.max(0, (knownStart / tile | 0) * tile);

    var origin = tier.browser.viewStart;

    var g = makeElementNS(NS_SVG, 'g', [], { fontSize: '8pt' });
    while (pos <= seqTierMax) {
        g.appendChild(makeElementNS(NS_SVG, 'rect', null, { x: (pos - origin) * scale,
            y: 8,
            width: tile * scale,
            height: 3,
            fill: pos / tile % 2 == 0 ? 'white' : 'black',
            stroke: 'black' }));

        g.appendChild(makeElementNS(NS_SVG, 'text', formatLongInt(pos), { x: (pos - origin) * scale,
            y: 28,
            fill: 'black', stroke: 'none' }));

        pos += tile;
    }

    if (seq && seq.seq) {
        for (var p = knownStart; p <= knownEnd; ++p) {
            if (p >= seq.start && p <= seq.end) {
                var base = seq.seq.substr(p - seq.start, 1).toUpperCase();
                var color = tier.browser.baseColors[base];
                if (!color) {
                    color = 'gray';
                }

                if (scale >= 8) {
                    g.appendChild(makeElementNS(NS_SVG, 'text', base, {
                        x: (0.5 + p - origin) * scale,
                        y: 52,
                        textAnchor: 'middle',
                        fill: color }));
                } else {
                    g.appendChild(makeElementNS(NS_SVG, 'rect', null, {
                        x: (p - origin) * scale,
                        y: 42,
                        width: scale,
                        height: 12,
                        fill: color }));
                }
            }
        }
    }

    return g;
}

if (typeof module !== 'undefined') {
    module.exports = {
        drawSeqTier: drawSeqTier,
        drawSeqTierGC: drawSeqTierGC,
        svgSeqTier: svgSeqTier
    };
}

},{"./numformats":29,"./svg-utils":44,"./utils":55}],36:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2013
//
// session.js
//

"use strict";

if (typeof require != 'undefined') {
    var browser = require('./cbrowser');
    var Browser = browser.Browser;

    var sc = require('./sourcecompare');
    var sourceDataURI = sc.sourceDataURI;
    var sourcesAreEqual = sc.sourcesAreEqual;

    var VERSION = require('./version');

    var utils = require('./utils');
    var miniJSONify = utils.miniJSONify;

    var sha1 = require('./sha1');
    var hex_sha1 = sha1.hex_sha1;
}

Browser.prototype.nukeStatus = function () {
    delete localStorage['dalliance.' + this.cookieKey + '.view-chr'];
    delete localStorage['dalliance.' + this.cookieKey + '.view-start'];
    delete localStorage['dalliance.' + this.cookieKey + '.view-end'];
    delete localStorage['dalliance.' + this.cookieKey + '.current-seq-length'];
    delete localStorage['dalliance.' + this.cookieKey + '.showing-alt-zoom'];
    delete localStorage['dalliance.' + this.cookieKey + '.saved-zoom'];

    delete localStorage['dalliance.' + this.cookieKey + '.sources'];
    delete localStorage['dalliance.' + this.cookieKey + '.hubs'];
    delete localStorage['dalliance.' + this.cookieKey + '.version'];

    delete localStorage['dalliance.' + this.cookieKey + '.reverse-scrolling'];
    delete localStorage['dalliance.' + this.cookieKey + '.reverse-key-scrolling'];
    delete localStorage['dalliance.' + this.cookieKey + '.ruler-location'];
};

Browser.prototype.storeStatus = function () {
    this.storeViewStatus();
    this.storeTierStatus();
};

Browser.prototype.storeViewStatus = function () {
    if (!this.cookieKey || this.noPersist || this.noPersistView) {
        return;
    }

    localStorage['dalliance.' + this.cookieKey + '.view-chr'] = this.chr;
    localStorage['dalliance.' + this.cookieKey + '.view-start'] = this.viewStart | 0;
    localStorage['dalliance.' + this.cookieKey + '.view-end'] = this.viewEnd | 0;
    localStorage['dalliance.' + this.cookieKey + '.showing-alt-zoom'] = '' + this.isSnapZooming;
    localStorage['dalliance.' + this.cookieKey + '.saved-zoom'] = this.savedZoom;
    if (this.currentSeqMax) {
        localStorage['dalliance.' + this.cookieKey + '.current-seq-length'] = this.currentSeqMax;
    }
};

Browser.prototype.storeTierStatus = function () {
    if (!this.cookieKey || this.noPersist) {
        return;
    }

    var currentSourceList = [];
    for (var t = 0; t < this.tiers.length; ++t) {
        var tt = this.tiers[t];
        var ts = tt.dasSource;
        if (!ts.noPersist) {
            currentSourceList.push({ source: tt.dasSource, config: tt.config || {} });
        }
    }
    localStorage['dalliance.' + this.cookieKey + '.sources'] = JSON.stringify(currentSourceList);

    var coveredHubURLs = {};
    var currentHubList = [];
    for (var hi = 0; hi < this.hubObjects.length; ++hi) {
        var tdb = this.hubObjects[hi];
        var hc = { url: tdb.hub.url, genome: tdb.genome };
        if (tdb.credentials) hc.credentials = tdb.credentials;
        if (tdb.mapping) hc.mapping = tdb.mapping;
        coveredHubURLs[hc.url] = true;
        currentHubList.push(hc);
    }

    // Needed to handle hubs that failed to connect, or hubs that haven't
    // connected yet when we're called soon after startup.
    for (var hi = 0; hi < this.hubs.length; ++hi) {
        var hc = this.hubs[hi];
        if (typeof hc === 'string') hc = { url: hc };
        if (!coveredHubURLs[hc.url]) currentHubList.push(hc);
    }

    localStorage['dalliance.' + this.cookieKey + '.hubs'] = JSON.stringify(currentHubList);

    localStorage['dalliance.' + this.cookieKey + '.reverse-scrolling'] = this.reverseScrolling;
    localStorage['dalliance.' + this.cookieKey + '.reverse-key-scrolling'] = this.reverseKeyScrolling;
    localStorage['dalliance.' + this.cookieKey + '.single-base-highlight'] = this.singleBaseHighlight;
    localStorage['dalliance.' + this.cookieKey + '.ruler-location'] = this.rulerLocation;

    localStorage['dalliance.' + this.cookieKey + '.export-ruler'] = this.exportRuler;
    localStorage['dalliance.' + this.cookieKey + '.export-highlights'] = this.exportHighlights;

    localStorage['dalliance.' + this.cookieKey + '.version'] = VERSION.CONFIG;
};

Browser.prototype.restoreStatus = function () {
    if (this.noPersist) return;

    var storedConfigVersion = localStorage['dalliance.' + this.cookieKey + '.version'];
    if (storedConfigVersion) {
        storedConfigVersion = storedConfigVersion | 0;
    } else {
        storedConfigVersion = -100;
    }
    if (VERSION.CONFIG != storedConfigVersion) {
        return;
    }

    var storedConfigHash = localStorage['dalliance.' + this.cookieKey + '.configHash'] || '';
    var pageConfigHash = hex_sha1(miniJSONify({
        sources: this.sources,
        hubs: this.hubs,
        rulerLocation: this.rulerLocation
    }));
    if (pageConfigHash != storedConfigHash) {
        localStorage['dalliance.' + this.cookieKey + '.configHash'] = pageConfigHash;
        return;
    }

    var defaultSourcesByURI = {};
    for (var si = 0; si < this.sources.length; ++si) {
        var source = this.sources[si];
        if (!source) continue;

        var uri = sourceDataURI(source);
        var ul = defaultSourcesByURI[uri];
        if (!ul) defaultSourcesByURI[uri] = ul = [];
        ul.push(source);
    }

    if (!this.noPersistView) {
        var qChr = localStorage['dalliance.' + this.cookieKey + '.view-chr'];
        var qMin = localStorage['dalliance.' + this.cookieKey + '.view-start'] | 0;
        var qMax = localStorage['dalliance.' + this.cookieKey + '.view-end'] | 0;
        if (qChr && qMin && qMax) {
            this.chr = qChr;
            this.viewStart = qMin;
            this.viewEnd = qMax;

            var csm = localStorage['dalliance.' + this.cookieKey + '.current-seq-length'];
            if (csm) {
                this.currentSeqMax = csm | 0;
            }

            this.isSnapZooming = localStorage['dalliance.' + this.cookieKey + '.showing-alt-zoom'] == 'true';

            var sz = parseFloat(localStorage['dalliance.' + this.cookieKey + '.saved-zoom']);
            if (typeof sz === 'number' && !isNaN(sz)) {
                this.savedZoom = sz;
            }
        }
    }

    var rs = localStorage['dalliance.' + this.cookieKey + '.reverse-scrolling'];
    this.reverseScrolling = rs && rs == 'true';
    var rks = localStorage['dalliance.' + this.cookieKey + '.reverse-key-scrolling'];
    this.reverseKeyScrolling = rks && rks == 'true';
    var sbh = localStorage['dalliance.' + this.cookieKey + '.single-base-highlight'];
    this.singleBaseHighlight = sbh && sbh == 'true';

    var rl = localStorage['dalliance.' + this.cookieKey + '.ruler-location'];
    if (rl) this.rulerLocation = rl;

    var x = localStorage['dalliance.' + this.cookieKey + '.export-ruler'];
    if (x) this.exportRuler = x === 'true';
    var x = localStorage['dalliance.' + this.cookieKey + '.export-highlights'];
    if (x) this.exportHighlights = x === 'true';

    var sourceStr = localStorage['dalliance.' + this.cookieKey + '.sources'];
    if (sourceStr) {
        var storedSources = JSON.parse(sourceStr);
        this.sources = [];
        this.restoredConfigs = [];
        for (var si = 0; si < storedSources.length; ++si) {
            var source = this.sources[si] = storedSources[si].source;
            this.restoredConfigs[si] = storedSources[si].config;
            var uri = sourceDataURI(source);
            var ul = defaultSourcesByURI[uri] || [];
            for (var osi = 0; osi < ul.length; ++osi) {
                var oldSource = ul[osi];
                if (sourcesAreEqual(source, oldSource)) {
                    for (var k in oldSource) {
                        if (oldSource.hasOwnProperty(k) && (typeof oldSource[k] === 'function' || oldSource[k] instanceof Blob)) {
                            source[k] = oldSource[k];
                        }
                    }
                }
            }
        }
    }

    var hubStr = localStorage['dalliance.' + this.cookieKey + '.hubs'];
    if (hubStr) {
        this.hubs = JSON.parse(hubStr);
    }

    return true;
};

Browser.prototype.reset = function () {
    for (var i = this.tiers.length - 1; i >= 0; --i) {
        this.removeTier({ index: i }, true);
    }
    for (var i = 0; i < this.defaultSources.length; ++i) {
        var s = this.defaultSources[i];
        if (!s.disabled) this.addTier(this.defaultSources[i]);
    }

    this.highlights.splice(0, this.highlights.length);

    this.setLocation(this.defaultChr, this.defaultStart, this.defaultEnd);
};

},{"./cbrowser":6,"./sha1":37,"./sourcecompare":39,"./utils":55,"./version":57}],37:[function(require,module,exports){
/*
 * A JavaScript implementation of the Secure Hash Algorithm, SHA-1, as defined
 * in FIPS 180-1
 * Version 2.2 Copyright Paul Johnston 2000 - 2009.
 * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet
 * Distributed under the BSD License
 * See http://pajhome.org.uk/crypt/md5 for details.
 */

"use strict";

/*
 * Configurable variables. You may need to tweak these to be compatible with
 * the server-side, but the defaults work in most cases.
 */

var hexcase = 0; /* hex output format. 0 - lowercase; 1 - uppercase        */
var b64pad = ""; /* base-64 pad character. "=" for strict RFC compliance   */

/*
 * These are the functions you'll usually want to call
 * They take string arguments and return either hex or base-64 encoded strings
 */
function hex_sha1(s) {
  return rstr2hex(rstr_sha1(str2rstr_utf8(s)));
}
function b64_sha1(s) {
  return rstr2b64(rstr_sha1(str2rstr_utf8(s)));
}
function any_sha1(s, e) {
  return rstr2any(rstr_sha1(str2rstr_utf8(s)), e);
}
function hex_hmac_sha1(k, d) {
  return rstr2hex(rstr_hmac_sha1(str2rstr_utf8(k), str2rstr_utf8(d)));
}
function b64_hmac_sha1(k, d) {
  return rstr2b64(rstr_hmac_sha1(str2rstr_utf8(k), str2rstr_utf8(d)));
}
function any_hmac_sha1(k, d, e) {
  return rstr2any(rstr_hmac_sha1(str2rstr_utf8(k), str2rstr_utf8(d)), e);
}

/*
 * Perform a simple self-test to see if the VM is working
 */
function sha1_vm_test() {
  return hex_sha1("abc").toLowerCase() == "a9993e364706816aba3e25717850c26c9cd0d89d";
}

/*
 * Calculate the SHA1 of a raw string
 */
function rstr_sha1(s) {
  return binb2rstr(binb_sha1(rstr2binb(s), s.length * 8));
}

/*
 * Calculate the HMAC-SHA1 of a key and some data (raw strings)
 */
function rstr_hmac_sha1(key, data) {
  var bkey = rstr2binb(key);
  if (bkey.length > 16) bkey = binb_sha1(bkey, key.length * 8);

  var ipad = Array(16),
      opad = Array(16);
  for (var i = 0; i < 16; i++) {
    ipad[i] = bkey[i] ^ 0x36363636;
    opad[i] = bkey[i] ^ 0x5C5C5C5C;
  }

  var hash = binb_sha1(ipad.concat(rstr2binb(data)), 512 + data.length * 8);
  return binb2rstr(binb_sha1(opad.concat(hash), 512 + 160));
}

/*
 * Convert a raw string to a hex string
 */
function rstr2hex(input) {
  // try { hexcase } catch(e) { hexcase=0; }
  var hex_tab = hexcase ? "0123456789ABCDEF" : "0123456789abcdef";
  var output = "";
  var x;
  for (var i = 0; i < input.length; i++) {
    x = input.charCodeAt(i);
    output += hex_tab.charAt(x >>> 4 & 0x0F) + hex_tab.charAt(x & 0x0F);
  }
  return output;
}

/*
 * Convert a raw string to a base-64 string
 */
function rstr2b64(input) {
  // try { b64pad } catch(e) { b64pad=''; }
  var tab = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
  var output = "";
  var len = input.length;
  for (var i = 0; i < len; i += 3) {
    var triplet = input.charCodeAt(i) << 16 | (i + 1 < len ? input.charCodeAt(i + 1) << 8 : 0) | (i + 2 < len ? input.charCodeAt(i + 2) : 0);
    for (var j = 0; j < 4; j++) {
      if (i * 8 + j * 6 > input.length * 8) output += b64pad;else output += tab.charAt(triplet >>> 6 * (3 - j) & 0x3F);
    }
  }
  return output;
}

/*
 * Convert a raw string to an arbitrary string encoding
 */
function rstr2any(input, encoding) {
  var divisor = encoding.length;
  var remainders = Array();
  var i, q, x, quotient;

  /* Convert to an array of 16-bit big-endian values, forming the dividend */
  var dividend = Array(Math.ceil(input.length / 2));
  for (i = 0; i < dividend.length; i++) {
    dividend[i] = input.charCodeAt(i * 2) << 8 | input.charCodeAt(i * 2 + 1);
  }

  /*
   * Repeatedly perform a long division. The binary array forms the dividend,
   * the length of the encoding is the divisor. Once computed, the quotient
   * forms the dividend for the next step. We stop when the dividend is zero.
   * All remainders are stored for later use.
   */
  while (dividend.length > 0) {
    quotient = Array();
    x = 0;
    for (i = 0; i < dividend.length; i++) {
      x = (x << 16) + dividend[i];
      q = Math.floor(x / divisor);
      x -= q * divisor;
      if (quotient.length > 0 || q > 0) quotient[quotient.length] = q;
    }
    remainders[remainders.length] = x;
    dividend = quotient;
  }

  /* Convert the remainders to the output string */
  var output = "";
  for (i = remainders.length - 1; i >= 0; i--) {
    output += encoding.charAt(remainders[i]);
  } /* Append leading zero equivalents */
  var full_length = Math.ceil(input.length * 8 / (Math.log(encoding.length) / Math.log(2)));
  for (i = output.length; i < full_length; i++) {
    output = encoding[0] + output;
  }return output;
}

/*
 * Encode a string as utf-8.
 * For efficiency, this assumes the input is valid utf-16.
 */
function str2rstr_utf8(input) {
  var output = "";
  var i = -1;
  var x, y;

  while (++i < input.length) {
    /* Decode utf-16 surrogate pairs */
    x = input.charCodeAt(i);
    y = i + 1 < input.length ? input.charCodeAt(i + 1) : 0;
    if (0xD800 <= x && x <= 0xDBFF && 0xDC00 <= y && y <= 0xDFFF) {
      x = 0x10000 + ((x & 0x03FF) << 10) + (y & 0x03FF);
      i++;
    }

    /* Encode output as utf-8 */
    if (x <= 0x7F) output += String.fromCharCode(x);else if (x <= 0x7FF) output += String.fromCharCode(0xC0 | x >>> 6 & 0x1F, 0x80 | x & 0x3F);else if (x <= 0xFFFF) output += String.fromCharCode(0xE0 | x >>> 12 & 0x0F, 0x80 | x >>> 6 & 0x3F, 0x80 | x & 0x3F);else if (x <= 0x1FFFFF) output += String.fromCharCode(0xF0 | x >>> 18 & 0x07, 0x80 | x >>> 12 & 0x3F, 0x80 | x >>> 6 & 0x3F, 0x80 | x & 0x3F);
  }
  return output;
}

/*
 * Encode a string as utf-16
 */
function str2rstr_utf16le(input) {
  var output = "";
  for (var i = 0; i < input.length; i++) {
    output += String.fromCharCode(input.charCodeAt(i) & 0xFF, input.charCodeAt(i) >>> 8 & 0xFF);
  }return output;
}

function str2rstr_utf16be(input) {
  var output = "";
  for (var i = 0; i < input.length; i++) {
    output += String.fromCharCode(input.charCodeAt(i) >>> 8 & 0xFF, input.charCodeAt(i) & 0xFF);
  }return output;
}

/*
 * Convert a raw string to an array of big-endian words
 * Characters >255 have their high-byte silently ignored.
 */
function rstr2binb(input) {
  var output = Array(input.length >> 2);
  for (var i = 0; i < output.length; i++) {
    output[i] = 0;
  }for (var i = 0; i < input.length * 8; i += 8) {
    output[i >> 5] |= (input.charCodeAt(i / 8) & 0xFF) << 24 - i % 32;
  }return output;
}

/*
 * Convert an array of big-endian words to a string
 */
function binb2rstr(input) {
  var output = "";
  for (var i = 0; i < input.length * 32; i += 8) {
    output += String.fromCharCode(input[i >> 5] >>> 24 - i % 32 & 0xFF);
  }return output;
}

/*
 * Calculate the SHA-1 of an array of big-endian words, and a bit length
 */
function binb_sha1(x, len) {
  /* append padding */
  x[len >> 5] |= 0x80 << 24 - len % 32;
  x[(len + 64 >> 9 << 4) + 15] = len;

  var w = Array(80);
  var a = 1732584193;
  var b = -271733879;
  var c = -1732584194;
  var d = 271733878;
  var e = -1009589776;

  for (var i = 0; i < x.length; i += 16) {
    var olda = a;
    var oldb = b;
    var oldc = c;
    var oldd = d;
    var olde = e;

    for (var j = 0; j < 80; j++) {
      if (j < 16) w[j] = x[i + j];else w[j] = bit_rol(w[j - 3] ^ w[j - 8] ^ w[j - 14] ^ w[j - 16], 1);
      var t = safe_add(safe_add(bit_rol(a, 5), sha1_ft(j, b, c, d)), safe_add(safe_add(e, w[j]), sha1_kt(j)));
      e = d;
      d = c;
      c = bit_rol(b, 30);
      b = a;
      a = t;
    }

    a = safe_add(a, olda);
    b = safe_add(b, oldb);
    c = safe_add(c, oldc);
    d = safe_add(d, oldd);
    e = safe_add(e, olde);
  }
  return Array(a, b, c, d, e);
}

/*
 * Perform the appropriate triplet combination function for the current
 * iteration
 */
function sha1_ft(t, b, c, d) {
  if (t < 20) return b & c | ~b & d;
  if (t < 40) return b ^ c ^ d;
  if (t < 60) return b & c | b & d | c & d;
  return b ^ c ^ d;
}

/*
 * Determine the appropriate additive constant for the current iteration
 */
function sha1_kt(t) {
  return t < 20 ? 1518500249 : t < 40 ? 1859775393 : t < 60 ? -1894007588 : -899497514;
}

/*
 * Add integers, wrapping at 2^32. This uses 16-bit operations internally
 * to work around bugs in some JS interpreters.
 */
function safe_add(x, y) {
  var lsw = (x & 0xFFFF) + (y & 0xFFFF);
  var msw = (x >> 16) + (y >> 16) + (lsw >> 16);
  return msw << 16 | lsw & 0xFFFF;
}

/*
 * Bitwise rotate a 32-bit number to the left.
 */
function bit_rol(num, cnt) {
  return num << cnt | num >>> 32 - cnt;
}

if (typeof module !== 'undefined') {
  module.exports = {
    b64_sha1: b64_sha1,
    hex_sha1: hex_sha1
  };
}

},{}],38:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2013
//
// sourceadapters.js
//

"use strict";

if (typeof require !== 'undefined') {
    var browser = require('./cbrowser');
    var Browser = browser.Browser;

    var tier = require('./tier');
    var DasTier = tier.DasTier;

    var utils = require('./utils');
    var Awaited = utils.Awaited;
    var arrayIndexOf = utils.arrayIndexOf;
    var shallowCopy = utils.shallowCopy;
    var resolveUrlToPage = utils.resolveUrlToPage;

    var das = require('./das');
    var DASStylesheet = das.DASStylesheet;
    var DASStyle = das.DASStyle;
    var DASSource = das.DASSource;
    var DASSegment = das.DASSegment;
    var DASFeature = das.DASFeature;
    var DASSequence = das.DASSequence;
    var DASLink = das.DASLink;

    var bin = require('./bin');
    var URLFetchable = bin.URLFetchable;
    var BlobFetchable = bin.BlobFetchable;

    var twoBit = require('./twoBit');
    var makeTwoBit = twoBit.makeTwoBit;

    var bbi = require('./bigwig');
    var makeBwg = bbi.makeBwg;

    var bam = require('./bam');
    var makeBam = bam.makeBam;
    var BamFlags = bam.BamFlags;

    var spans = require('./spans');
    var Range = spans.Range;
    var union = spans.union;

    var parseCigar = require('./cigar').parseCigar;

    var OverlayFeatureSource = require('./overlay').OverlayFeatureSource;

    var JBrowseStore = require('./jbjson').JBrowseStore;

    var Chainset = require('./chainset').Chainset;

    var style = require('./style');
    var StyleFilterSet = style.StyleFilterSet;

    var EncodeFetchable = require('./encode').EncodeFetchable;
}

var __dalliance_sourceAdapterFactories = {};

function dalliance_registerSourceAdapterFactory(type, factory) {
    __dalliance_sourceAdapterFactories[type] = factory;
}

var __dalliance_parserFactories = {};

function dalliance_registerParserFactory(type, factory) {
    __dalliance_parserFactories[type] = factory;
}

function dalliance_makeParser(type) {
    if (__dalliance_parserFactories[type]) {
        return __dalliance_parserFactories[type](type);
    }
}

DasTier.prototype.initSources = function () {
    var thisTier = this;

    var sources = this.browser.createSources(this.dasSource);
    this.featureSource = sources.features || new DummyFeatureSource();
    this.sequenceSource = sources.sequence;

    if (this.featureSource && this.featureSource.addChangeListener) {
        this.featureSource.addChangeListener(function () {
            thisTier.browser.refreshTier(thisTier);
        });
    }
};

Browser.prototype.createSources = function (config) {
    var sources = this.sourceCache.get(config);
    if (sources) return sources;

    var fs, ss;

    if (config.tier_type == 'sequence' || config.twoBitURI || config.twoBitBlob) {
        if (config.twoBitURI || config.twoBitBlob) {
            ss = new TwoBitSequenceSource(config);
        } else if (config.ensemblURI) {
            ss = new EnsemblSequenceSource(config);
        } else {
            ss = new DASSequenceSource(config);
        }
    } else if (config.tier_type && __dalliance_sourceAdapterFactories[config.tier_type]) {
        var saf = __dalliance_sourceAdapterFactories[config.tier_type];
        var ns = saf(config);
        fs = ns.features;
        ss = ns.sequence;
    } else if (config.bwgURI || config.bwgBlob) {
        var worker = this.getWorker();
        if (worker) fs = new RemoteBWGFeatureSource(config, worker, this);else fs = new BWGFeatureSource(config);
    } else if (config.bamURI || config.bamBlob) {
        var worker = this.getWorker();
        if (worker) fs = new RemoteBAMFeatureSource(config, worker, this);else fs = new BAMFeatureSource(config);
    } else if (config.jbURI) {
        fs = new JBrowseFeatureSource(config);
    } else if (config.uri || config.features_uri) {
        fs = new DASFeatureSource(config);
    }

    if (config.overlay) {
        var sources = [];
        if (fs) sources.push(new CachingFeatureSource(fs));

        for (var oi = 0; oi < config.overlay.length; ++oi) {
            var cs = this.createSources(config.overlay[oi]);
            if (cs && cs.features) sources.push(cs.features);
        }
        fs = new OverlayFeatureSource(sources, config);
    }

    if (config.sequenceAliases) {
        fs = new MappedFeatureSource(fs, new Chainset({ type: 'alias', sequenceAliases: config.sequenceAliases }));
    }

    if (config.mapping) {
        fs = new MappedFeatureSource(fs, this.chains[config.mapping]);
    }

    if (config.name && fs && !fs.name) {
        fs.name = config.name;
    }

    if (typeof fs !== 'undefined' && fs !== null) {
        fs = new CachingFeatureSource(fs);
    }

    if (typeof fs !== 'undefined' && fs !== null || typeof ss !== 'undefined' && ss != null) {
        sources = {
            features: fs,
            sequence: ss
        };
        this.sourceCache.put(config, sources);
    }

    return sources;
};

DasTier.prototype.fetchStylesheet = function (cb) {
    var ssSource;
    // Somewhat ugly workaround for the special case of DAS sources...
    if (this.dasSource.stylesheet_uri || !this.dasSource.tier_type && !this.dasSource.bwgURI && !this.dasSource.bwgBlob && !this.dasSource.bamURI && !this.dasSource.bamBlob && !this.dasSource.twoBitURI && !this.dasSource.twoBitBlob && !this.dasSource.jbURI && !this.dasSource.overlay) {
        ssSource = new DASFeatureSource(this.dasSource);
    } else {
        ssSource = this.getSource();
    }
    ssSource.getStyleSheet(cb);
};

var __cfs_id_seed = 0;

function CachingFeatureSource(source) {
    var thisB = this;

    this.source = source;
    this.cfsid = 'cfs' + ++__cfs_id_seed;
    if (source.name) {
        this.name = source.name;
    }
    if (source.addChangeListener) {
        source.addChangeListener(function () {
            thisB.cfsid = 'cfs' + ++__cfs_id_seed;
        });
    }
}

CachingFeatureSource.prototype.addReadinessListener = function (listener) {
    if (this.source.addReadinessListener) return this.source.addReadinessListener(listener);else listener(null);
};

CachingFeatureSource.prototype.removeReadinessListener = function (listener) {
    if (this.source.removeReadinessListener) return this.source.removeReadinessListener(listener);
};

CachingFeatureSource.prototype.search = function (query, callback) {
    if (this.source.search) return this.source.search(query, callback);
};

CachingFeatureSource.prototype.getDefaultFIPs = function (callback) {
    if (this.source.getDefaultFIPs) return this.source.getDefaultFIPs(callback);
};

CachingFeatureSource.prototype.getStyleSheet = function (callback) {
    this.source.getStyleSheet(callback);
};

CachingFeatureSource.prototype.getScales = function () {
    return this.source.getScales();
};

CachingFeatureSource.prototype.addActivityListener = function (l) {
    if (this.source.addActivityListener) {
        this.source.addActivityListener(l);
    }
};

CachingFeatureSource.prototype.removeActivityListener = function (l) {
    if (this.source.removeActivityListener) {
        this.source.removeActivityListener(l);
    }
};

CachingFeatureSource.prototype.addChangeListener = function (l) {
    if (this.source.addChangeListener) this.source.addChangeListener(l);
};

CachingFeatureSource.prototype.removeChangeListener = function (l) {
    if (this.source.removeChangeListener) this.source.removeChangeListener(l);
};

CachingFeatureSource.prototype.findNextFeature = function (chr, pos, dir, callback) {
    this.source.findNextFeature(chr, pos, dir, callback);
};

CachingFeatureSource.prototype.quantFindNextFeature = function (chr, pos, dir, threshold, callback) {
    this.source.quantFindNextFeature(chr, pos, dir, threshold, callback);
};

CachingFeatureSource.prototype.capabilities = function () {
    if (this.source.capabilities) {
        return this.source.capabilities();
    } else {
        return {};
    }
};

CachingFeatureSource.prototype.fetch = function (chr, min, max, scale, types, pool, callback, styleFilters) {
    if (!pool) {
        throw Error('Fetch pool is null');
    }

    var self = this;
    var cacheKey = this.cfsid;

    var awaitedFeatures = pool.awaitedFeatures[cacheKey];
    if (awaitedFeatures && awaitedFeatures.started) {
        if (awaitedFeatures.styleFilters.doesNotContain(styleFilters)) {
            // console.log('Fetch already started with wrong parameters, skipping cache.');
            self.source.fetch(chr, min, max, scale, types, pool, callback, styleFilters);
            return;
        }
    } else if (awaitedFeatures) {
        awaitedFeatures.styleFilters.addAll(styleFilters);
    } else {
        awaitedFeatures = new Awaited();
        awaitedFeatures.styleFilters = styleFilters;
        pool.awaitedFeatures[cacheKey] = awaitedFeatures;

        pool.requestsIssued.then(function () {
            awaitedFeatures.started = true;
            self.source.fetch(chr, min, max, scale, awaitedFeatures.styleFilters.typeList(), pool, function (status, features, scale, coverage) {
                if (!awaitedFeatures.res) awaitedFeatures.provide({ status: status, features: features, scale: scale, coverage: coverage });
            }, awaitedFeatures.styleFilters);
        }).catch(function (err) {
            console.log(err);
        });
    }

    awaitedFeatures.await(function (af) {
        callback(af.status, af.features, af.scale, af.coverage);
    });
};

function FeatureSourceBase() {
    this.busy = 0;
    this.activityListeners = [];
    this.readinessListeners = [];
    this.readiness = null;
}

FeatureSourceBase.prototype.addReadinessListener = function (listener) {
    this.readinessListeners.push(listener);
    listener(this.readiness);
};

FeatureSourceBase.prototype.removeReadinessListener = function (listener) {
    var idx = arrayIndexOf(this.readinessListeners, listener);
    if (idx >= 0) {
        this.readinessListeners.splice(idx, 1);
    }
};

FeatureSourceBase.prototype.notifyReadiness = function () {
    for (var li = 0; li < this.readinessListeners.length; ++li) {
        try {
            this.readinessListeners[li](this.readiness);
        } catch (e) {
            console.log(e);
        }
    }
};

FeatureSourceBase.prototype.addActivityListener = function (listener) {
    this.activityListeners.push(listener);
};

FeatureSourceBase.prototype.removeActivityListener = function (listener) {
    var idx = arrayIndexOf(this.activityListeners, listener);
    if (idx >= 0) {
        this.activityListeners.splice(idx, 1);
    }
};

FeatureSourceBase.prototype.notifyActivity = function () {
    for (var li = 0; li < this.activityListeners.length; ++li) {
        try {
            this.activityListeners[li](this.busy);
        } catch (e) {
            console.log(e);
        }
    }
};

FeatureSourceBase.prototype.getScales = function () {
    return null;
};

FeatureSourceBase.prototype.fetch = function (chr, min, max, scale, types, pool, cnt) {
    return cnt(null, [], 1000000000);
};

FeatureSourceBase.prototype.getStyleSheet = function (callback) {
    var stylesheet = new DASStylesheet();
    var defStyle = new DASStyle();
    defStyle.glyph = 'BOX';
    defStyle.BGCOLOR = 'blue';
    defStyle.FGCOLOR = 'black';
    stylesheet.pushStyle({ type: 'default' }, null, defStyle);
    return callback(stylesheet);
};

function DASFeatureSource(dasSource) {
    this.dasSource = new DASSource(dasSource);
    this.busy = 0;
    this.activityListeners = [];
}

DASFeatureSource.prototype.addActivityListener = function (listener) {
    this.activityListeners.push(listener);
};

DASFeatureSource.prototype.removeActivityListener = function (listener) {
    var idx = arrayIndexOf(this.activityListeners, listener);
    if (idx >= 0) this.activityListeners.splice(idx, 1);
};

DASFeatureSource.prototype.notifyActivity = function () {
    for (var li = 0; li < this.activityListeners.length; ++li) {
        try {
            this.activityListeners[li](this.busy);
        } catch (e) {
            console.log(e);
        }
    }
};

DASFeatureSource.prototype.getStyleSheet = function (callback) {
    this.dasSource.stylesheet(function (stylesheet) {
        callback(stylesheet);
    }, function () {
        callback(null, "Couldn't fetch DAS stylesheet");
    });
};

DASFeatureSource.prototype.fetch = function (chr, min, max, scale, types, pool, callback) {
    if (types && types.length === 0) {
        callback(null, [], scale);
        return;
    }

    if (!this.dasSource.uri && !this.dasSource.features_uri) {
        // FIXME should this be making an error callback???
        return;
    }

    if (this.dasSource.dasStaticFeatures && this.cachedStaticFeatures) {
        return callback(null, this.cachedStaticFeatures, this.cachedStaticScale);
    }

    var tryMaxBins = this.dasSource.maxbins !== false;
    var fops = {
        type: types
    };
    if (tryMaxBins) {
        fops.maxbins = 1 + ((max - min) / scale | 0);
    }

    var thisB = this;
    thisB.busy++;
    thisB.notifyActivity();

    this.dasSource.features(new DASSegment(chr, min, max), fops, function (features, status) {

        thisB.busy--;
        thisB.notifyActivity();

        var retScale = scale;
        if (!tryMaxBins) {
            retScale = 0.1;
        }
        if (!status && thisB.dasSource.dasStaticFeatures) {
            thisB.cachedStaticFeatures = features;
            thisB.cachedStaticScale = retScale;
        }
        callback(status, features, retScale);
    });
};

DASFeatureSource.prototype.findNextFeature = function (chr, pos, dir, callback) {
    if (this.dasSource.capabilities && arrayIndexOf(this.dasSource.capabilities, 'das1:adjacent-feature') >= 0) {
        var thisB = this;
        if (this.dasAdjLock) {
            return console.log('Already looking for a next feature, be patient!');
        }
        this.dasAdjLock = true;
        var fops = {
            adjacent: chr + ':' + (pos | 0) + ':' + (dir > 0 ? 'F' : 'B')
        };
        var types = thisTier.getDesiredTypes(thisTier.browser.scale);
        if (types) {
            fops.types = types;
        }
        thisTier.dasSource.features(null, fops, function (res) {
            thisB.dasAdjLock = false;
            if (res.length > 0 && res[0] !== null) {
                callback(res[0]);
            }
        });
    }
};

function DASSequenceSource(dasSource) {
    this.dasSource = new DASSource(dasSource);
    this.awaitedEntryPoints = new Awaited();

    var thisB = this;
    this.dasSource.entryPoints(function (ep) {
        thisB.awaitedEntryPoints.provide(ep);
    });
}

DASSequenceSource.prototype.fetch = function (chr, min, max, pool, callback) {
    this.dasSource.sequence(new DASSegment(chr, min, max), function (seqs) {
        if (seqs.length == 1) {
            return callback(null, seqs[0]);
        } else {
            return callback("Didn't get sequence");
        }
    });
};

DASSequenceSource.prototype.getSeqInfo = function (chr, cnt) {
    this.awaitedEntryPoints.await(function (ep) {
        for (var epi = 0; epi < ep.length; ++epi) {
            if (ep[epi].name == chr) {
                return cnt({ length: ep[epi].end });
            }
        }
        return cnt();
    });
};

function TwoBitSequenceSource(source) {
    var thisB = this;
    this.source = source;
    this.twoBit = new Awaited();
    var data;
    if (source.twoBitURI) {
        data = new URLFetchable(source.twoBitURI, { credentials: source.credentials, resolver: source.resolver });
    } else if (source.twoBitBlob) {
        data = new BlobFetchable(source.twoBitBlob);
    } else {
        throw Error("No twoBitURI or twoBitBlob parameter");
    }

    makeTwoBit(data, function (tb, error) {
        if (error) {
            console.log(error);
        } else {
            thisB.twoBit.provide(tb);
        }
    });
}

TwoBitSequenceSource.prototype.fetch = function (chr, min, max, pool, callback) {
    this.twoBit.await(function (tb) {
        tb.fetch(chr, min, max, function (seq, err) {
            if (err) {
                return callback(err, null);
            } else {
                var sequence = new DASSequence(chr, min, max, 'DNA', seq);
                return callback(null, sequence);
            }
        });
    });
};

TwoBitSequenceSource.prototype.getSeqInfo = function (chr, cnt) {
    this.twoBit.await(function (tb) {
        var seq = tb.getSeq(chr);
        if (seq) {
            tb.getSeq(chr).length(function (l) {
                cnt({ length: l });
            });
        } else {
            cnt();
        }
    });
};

function EnsemblSequenceSource(source) {
    this.source = source;
    // http://data.gramene.org/ensembl/info/assembly/triticum_aestivum/2B?content-type=application/json
    // http://data.gramene.org/ensembl/sequence/region/triticum_aestivum/2B:8001..18000:1?content-type=application/json
}

EnsemblSequenceSource.prototype.fetch = function (chr, min, max, pool, callback) {
    var url = this.source.ensemblURI + '/sequence/region/' + this.source.species + '/' + chr + ':' + min + '..' + max + ':1?content-type=application/json';
    var req = new XMLHttpRequest();
    req.onreadystatechange = function () {
        if (req.readyState == 4) {
            var jr;
            if (req.status >= 300) {
                var err = 'Error code ' + req.status;
                try {
                    jr = JSON.parse(req.response);
                    if (jr.error) {
                        err = jr.error;
                    }
                } finally {
                    callback(err, null);
                }
            } else {
                jr = JSON.parse(req.response);
                var sequence = new DASSequence(chr, min, max, 'DNA', jr.seq);
                return callback(null, sequence);
            }
        }
    };
    req.open('GET', url, true);
    req.responseType = 'text';
    req.send();
};

EnsemblSequenceSource.prototype.getSeqInfo = function (chr, cnt) {
    var url = this.source.ensemblURI + '/info/assembly/' + this.source.species + '/' + chr + '?content-type=application/json';
    var req = new XMLHttpRequest();
    req.onreadystatechange = function () {
        if (req.readyState == 4) {
            if (req.status >= 300) {
                cnt();
            } else {
                var jr = JSON.parse(req.response);
                cnt(jr);
            }
        }
    };
    req.open('GET', url, true);
    req.responseType = 'text';
    req.send();
};

DASFeatureSource.prototype.getScales = function () {
    return [];
};

var bwg_preflights = {};

function BWGFeatureSource(bwgSource) {
    FeatureSourceBase.call(this);

    var thisB = this;
    this.readiness = 'Connecting';
    this.bwgSource = this.opts = bwgSource;
    thisB.bwgHolder = new Awaited();

    if (this.opts.preflight) {
        var pfs = bwg_preflights[this.opts.preflight];
        if (!pfs) {
            pfs = new Awaited();
            bwg_preflights[this.opts.preflight] = pfs;

            var req = new XMLHttpRequest();
            req.onreadystatechange = function () {
                if (req.readyState == 4) {
                    if (req.status == 200) {
                        pfs.provide('success');
                    } else {
                        pfs.provide('failure');
                    }
                }
            };
            req.open('get', this.opts.preflight + '?' + hex_sha1('salt' + Date.now()), true); // Instead, ensure we always preflight a unique URI.
            if (this.opts.credentials) {
                req.withCredentials = true;
            }
            req.send();
        }
        pfs.await(function (status) {
            if (status === 'success') {
                thisB.init();
            }
        });
    } else {
        thisB.init();
    }
}

BWGFeatureSource.prototype = Object.create(FeatureSourceBase.prototype);

BWGFeatureSource.prototype.init = function () {
    var thisB = this;
    var arg;

    var uri = this.bwgSource.uri || this.bwgSource.bwgURI;
    if (uri) {
        if (this.bwgSource.transport === 'encode') {
            arg = new EncodeFetchable(uri, { credentials: this.opts.credentials });
        } else {
            arg = new URLFetchable(uri, { credentials: this.opts.credentials, resolver: this.opts.resolver });
        }
    } else {
        arg = new BlobFetchable(this.bwgSource.bwgBlob);
    }

    makeBwg(arg, function (bwg, err) {
        if (err) {
            thisB.error = err;
            thisB.readiness = null;
            thisB.notifyReadiness();
            thisB.bwgHolder.provide(null);
        } else {
            thisB.bwgHolder.provide(bwg);
            thisB.readiness = null;
            thisB.notifyReadiness();
            if (bwg.type == 'bigbed') {
                bwg.getExtraIndices(function (ei) {
                    thisB.extraIndices = ei;
                });
            }
        }
    });
};

BWGFeatureSource.prototype.capabilities = function () {
    var caps = { leap: true };
    if (this.bwgHolder.res && this.bwgHolder.res.type == 'bigwig') caps.quantLeap = true;
    if (this.extraIndices && this.extraIndices.length > 0) {
        caps.search = [];
        for (var eii = 0; eii < this.extraIndices.length; ++eii) {
            caps.search.push(this.extraIndices[eii].field);
        }
    }
    return caps;
};

BWGFeatureSource.prototype.fetch = function (chr, min, max, scale, types, pool, callback) {
    var thisB = this;
    this.bwgHolder.await(function (bwg) {
        if (typeof bwg === 'undefined' || bwg === null) {
            return callback(thisB.error || "Can't access binary file", null, null);
        }

        var data;
        var wantDensity = !types || types.length === 0 || arrayIndexOf(types, 'density') >= 0;
        if (thisB.opts.clientBin) {
            wantDensity = false;
        }
        var scaleFactor = thisB.opts.scaleFactor || 1.0;
        if (bwg.type == 'bigwig' || wantDensity || typeof thisB.opts.forceReduction !== 'undefined') {
            var zoom = -1;
            for (var z = 0; z < bwg.zoomLevels.length; ++z) {
                if (bwg.zoomLevels[z].reduction <= scale * scaleFactor) {
                    zoom = z;
                } else {
                    break;
                }
            }
            if (typeof thisB.opts.forceReduction !== 'undefined') {
                zoom = thisB.opts.forceReduction;
            }

            if (zoom < 0) {
                data = bwg.getUnzoomedView();
            } else {
                data = bwg.getZoomedView(zoom);
            }
        } else {
            data = bwg.getUnzoomedView();
        }

        thisB.busy++;
        thisB.notifyActivity();
        data.readWigData(chr, min, max, function (features) {
            thisB.busy--;
            thisB.notifyActivity();

            var fs = 1000000000;
            if (bwg.type === 'bigwig') {
                var is = (max - min) / features.length / 2;
                if (is < fs) {
                    fs = is;
                }
            }
            if (thisB.opts.link) {
                for (var fi = 0; fi < features.length; ++fi) {
                    var f = features[fi];
                    if (f.label) {
                        f.links = [new DASLink('Link', thisB.opts.link.replace(/\$\$/, f.label))];
                    }
                }
            }
            callback(null, features, fs);
        });
    });
};

BWGFeatureSource.prototype.quantFindNextFeature = function (chr, pos, dir, threshold, callback) {
    // var beforeQFNF = Date.now()|0;
    var thisB = this;
    thisB.busy++;
    thisB.notifyActivity();
    this.bwgHolder.res.thresholdSearch(chr, pos, dir, threshold, function (a, b) {
        thisB.busy--;
        thisB.notifyActivity();
        // var afterQFNF = Date.now()|0;
        // console.log('QFNF took ' + (afterQFNF - beforeQFNF) + 'ms');
        return callback(a, b);
    });
};

BWGFeatureSource.prototype.findNextFeature = function (chr, pos, dir, callback) {
    var thisB = this;
    thisB.busy++;
    thisB.notifyActivity();
    this.bwgHolder.res.getUnzoomedView().getFirstAdjacent(chr, pos, dir, function (res) {
        thisB.busy--;
        thisB.notifyActivity();
        if (res.length > 0 && res[0] !== null) {
            callback(res[0]);
        }
    });
};

BWGFeatureSource.prototype.getScales = function () {
    var bwg = this.bwgHolder.res;
    if (bwg /* && bwg.type == 'bigwig' */) {
            var scales = [1]; // Can we be smarter about inferring baseline scale?
            for (var z = 0; z < bwg.zoomLevels.length; ++z) {
                scales.push(bwg.zoomLevels[z].reduction);
            }
            return scales;
        } else {
        return null;
    }
};

BWGFeatureSource.prototype.search = function (query, callback) {
    if (!this.extraIndices || this.extraIndices.length === 0) {
        return callback(null, 'No indices available');
    }

    var index = this.extraIndices[0];
    return index.lookup(query, callback);
};

BWGFeatureSource.prototype.getDefaultFIPs = function (callback) {
    if (this.opts.noExtraFeatureInfo) return true;

    this.bwgHolder.await(function (bwg) {
        if (!bwg) return;

        if (bwg.schema && bwg.definedFieldCount < bwg.schema.fields.length) {
            var fip = function fip(feature, featureInfo) {
                for (var hi = 0; hi < featureInfo.hit.length; ++hi) {
                    if (featureInfo.hit[hi].isSuperGroup) return;
                }
                for (var fi = bwg.definedFieldCount; fi < bwg.schema.fields.length; ++fi) {
                    var f = bwg.schema.fields[fi];
                    featureInfo.add(f.comment, feature[f.name]);
                }
            };

            callback(fip);
        } else {
            // No need to do anything.
        }
    });
};

BWGFeatureSource.prototype.getStyleSheet = function (callback) {
    var thisB = this;

    this.bwgHolder.await(function (bwg) {
        if (!bwg) {
            return callback(null, 'bbi error');
        }

        var stylesheet = new DASStylesheet();
        if (bwg.type == 'bigbed') {
            var wigStyle = new DASStyle();
            wigStyle.glyph = 'BOX';
            wigStyle.FGCOLOR = 'black';
            wigStyle.BGCOLOR = 'blue';
            wigStyle.HEIGHT = 8;
            wigStyle.BUMP = true;
            wigStyle.LABEL = true;
            wigStyle.ZINDEX = 20;
            stylesheet.pushStyle({ type: 'bigbed' }, null, wigStyle);

            wigStyle.glyph = 'BOX';
            wigStyle.FGCOLOR = 'black';
            wigStyle.BGCOLOR = 'red';
            wigStyle.HEIGHT = 10;
            wigStyle.BUMP = true;
            wigStyle.ZINDEX = 20;
            stylesheet.pushStyle({ type: 'translation' }, null, wigStyle);

            var tsStyle = new DASStyle();
            tsStyle.glyph = 'BOX';
            tsStyle.FGCOLOR = 'black';
            tsStyle.BGCOLOR = 'white';
            tsStyle.HEIGHT = 10;
            tsStyle.ZINDEX = 10;
            tsStyle.BUMP = true;
            tsStyle.LABEL = true;
            stylesheet.pushStyle({ type: 'transcript' }, null, tsStyle);

            var densStyle = new DASStyle();
            densStyle.glyph = 'HISTOGRAM';
            densStyle.COLOR1 = 'white';
            densStyle.COLOR2 = 'black';
            densStyle.HEIGHT = 30;
            stylesheet.pushStyle({ type: 'density' }, null, densStyle);
        } else {
            var wigStyle = new DASStyle();
            wigStyle.glyph = 'HISTOGRAM';
            wigStyle.COLOR1 = 'white';
            wigStyle.COLOR2 = 'black';
            wigStyle.HEIGHT = 30;
            stylesheet.pushStyle({ type: 'default' }, null, wigStyle);
        }

        if (bwg.definedFieldCount == 12 && bwg.fieldCount >= 14) {
            stylesheet.geneHint = true;
        }

        return callback(stylesheet);
    });
};

function RemoteBWGFeatureSource(bwgSource, worker, browser) {
    FeatureSourceBase.call(this);

    var thisB = this;
    this.worker = worker;
    this.readiness = 'Connecting';
    this.bwgSource = this.opts = bwgSource;
    this.keyHolder = new Awaited();

    if (bwgSource.resolver) {
        this.resolverKey = browser.registerResolver(bwgSource.resolver);
    }

    this.init();
}

RemoteBWGFeatureSource.prototype = Object.create(FeatureSourceBase.prototype);

RemoteBWGFeatureSource.prototype.init = function () {
    var thisB = this;
    var uri = this.uri || this.bwgSource.uri || this.bwgSource.bwgURI;
    var blob = this.bwgSource.blob || this.bwgSource.bwgBlob;

    var cnt = function cnt(key, err) {
        thisB.readiness = null;
        thisB.notifyReadiness();

        if (key) {
            thisB.worker.postCommand({ command: 'meta', connection: key }, function (meta, err) {
                if (err) {
                    thisB.error = err;
                    thisB.keyHolder.provide(null);
                } else {
                    thisB.meta = meta;
                    thisB.keyHolder.provide(key);
                }
            });
        } else {
            thisB.error = err;
            thisB.keyHolder.provide(null);
        }
    };

    if (blob) {
        this.worker.postCommand({ command: 'connectBBI', blob: blob }, cnt);
    } else {
        this.worker.postCommand({
            command: 'connectBBI',
            uri: resolveUrlToPage(uri),
            resolver: this.resolverKey,
            transport: this.bwgSource.transport,
            credentials: this.bwgSource.credentials }, cnt);
    }
};

RemoteBWGFeatureSource.prototype.capabilities = function () {
    var caps = { leap: true };

    if (this.meta && this.meta.type == 'bigwig') caps.quantLeap = true;
    if (this.meta && this.meta.extraIndices && this.meta.extraIndices.length > 0) {
        caps.search = [];
        for (var eii = 0; eii < this.meta.extraIndices.length; ++eii) {
            caps.search.push(this.meta.extraIndices[eii].field);
        }
    }
    return caps;
};

RemoteBWGFeatureSource.prototype.fetch = function (chr, min, max, scale, types, pool, callback) {
    var thisB = this;

    thisB.busy++;
    thisB.notifyActivity();

    this.keyHolder.await(function (key) {
        if (!key) {
            thisB.busy--;
            thisB.notifyActivity();
            return callback(thisB.error || "Can't access binary file", null, null);
        }

        var zoom = -1;
        var wantDensity = !types || types.length === 0 || arrayIndexOf(types, 'density') >= 0;
        if (thisB.opts.clientBin) {
            wantDensity = false;
        }
        if (thisB.meta.type == 'bigwig' || wantDensity || typeof thisB.opts.forceReduction !== 'undefined') {
            for (var z = 1; z < thisB.meta.zoomLevels.length; ++z) {
                if (thisB.meta.zoomLevels[z] <= scale) {
                    zoom = z - 1; // Scales returned in metadata start at 1, unlike "real" zoom levels.
                } else {
                    break;
                }
            }
            if (typeof thisB.opts.forceReduction !== 'undefined') {
                zoom = thisB.opts.forceReduction;
            }
        }

        thisB.worker.postCommand({ command: 'fetch', connection: key, chr: chr, min: min, max: max, zoom: zoom }, function (features, error) {
            thisB.busy--;
            thisB.notifyActivity();

            var fs = 1000000000;
            if (thisB.meta.type === 'bigwig') {
                var is = (max - min) / features.length / 2;
                if (is < fs) {
                    fs = is;
                }
            }
            if (thisB.opts.link) {
                for (var fi = 0; fi < features.length; ++fi) {
                    var f = features[fi];
                    if (f.label) {
                        f.links = [new DASLink('Link', thisB.opts.link.replace(/\$\$/, f.label))];
                    }
                }
            }
            callback(error, features, fs);
        });
    });
};

RemoteBWGFeatureSource.prototype.quantFindNextFeature = function (chr, pos, dir, threshold, callback) {
    var thisB = this;
    this.busy++;
    this.notifyActivity();
    this.worker.postCommand({ command: 'quantLeap', connection: this.keyHolder.res, chr: chr, pos: pos, dir: dir, threshold: threshold, under: false }, function (result, err) {
        console.log(result, err);
        thisB.busy--;
        thisB.notifyActivity();
        return callback(result, err);
    });
};

RemoteBWGFeatureSource.prototype.findNextFeature = function (chr, pos, dir, callback) {
    var thisB = this;
    this.busy++;
    this.notifyActivity();
    this.worker.postCommand({ command: 'leap', connection: this.keyHolder.res, chr: chr, pos: pos, dir: dir }, function (result, err) {
        thisB.busy--;
        thisB.notifyActivity();
        if (result.length > 0 && result[0] !== null) {
            callback(result[0]);
        }
    });
};

RemoteBWGFeatureSource.prototype.getScales = function () {
    var meta = this.meta;
    if (meta) {
        return meta.zoomLevels;
    } else {
        return null;
    }
};

RemoteBWGFeatureSource.prototype.search = function (query, callback) {
    if (!this.meta.extraIndices || this.meta.extraIndices.length === 0) {
        return callback(null, 'No indices available');
    }

    var thisB = this;
    this.busy++;
    this.notifyActivity();
    var index = this.meta.extraIndices[0];
    this.worker.postCommand({ command: 'search', connection: this.keyHolder.res, query: query, index: index }, function (result, err) {
        thisB.busy--;
        thisB.notifyActivity();

        callback(result, err);
    });
};

RemoteBWGFeatureSource.prototype.getDefaultFIPs = function (callback) {
    if (this.opts.noExtraFeatureInfo) return true;

    var thisB = this;
    this.keyHolder.await(function (key) {
        var bwg = thisB.meta;
        if (!bwg) return;

        if (bwg.schema && bwg.definedFieldCount < bwg.schema.fields.length) {
            var fip = function fip(feature, featureInfo) {
                for (var hi = 0; hi < featureInfo.hit.length; ++hi) {
                    if (featureInfo.hit[hi].isSuperGroup) return;
                }
                for (var fi = bwg.definedFieldCount; fi < bwg.schema.fields.length; ++fi) {
                    var f = bwg.schema.fields[fi];
                    featureInfo.add(f.comment, feature[f.name]);
                }
            };

            callback(fip);
        } else {
            // No need to do anything.
        }
    });
};

RemoteBWGFeatureSource.prototype.getStyleSheet = function (callback) {
    var thisB = this;

    this.keyHolder.await(function (key) {
        var bwg = thisB.meta;
        if (!bwg) {
            return callback(null, 'bbi error');
        }

        var stylesheet = new DASStylesheet();
        if (bwg.type == 'bigbed') {
            var wigStyle = new DASStyle();
            wigStyle.glyph = 'BOX';
            wigStyle.FGCOLOR = 'black';
            wigStyle.BGCOLOR = 'blue';
            wigStyle.HEIGHT = 8;
            wigStyle.BUMP = true;
            wigStyle.LABEL = true;
            wigStyle.ZINDEX = 20;
            stylesheet.pushStyle({ type: 'bigbed' }, null, wigStyle);

            wigStyle.glyph = 'BOX';
            wigStyle.FGCOLOR = 'black';
            wigStyle.BGCOLOR = 'red';
            wigStyle.HEIGHT = 10;
            wigStyle.BUMP = true;
            wigStyle.ZINDEX = 20;
            stylesheet.pushStyle({ type: 'translation' }, null, wigStyle);

            var tsStyle = new DASStyle();
            tsStyle.glyph = 'BOX';
            tsStyle.FGCOLOR = 'black';
            tsStyle.BGCOLOR = 'white';
            tsStyle.HEIGHT = 10;
            tsStyle.ZINDEX = 10;
            tsStyle.BUMP = true;
            tsStyle.LABEL = true;
            stylesheet.pushStyle({ type: 'transcript' }, null, tsStyle);

            var densStyle = new DASStyle();
            densStyle.glyph = 'HISTOGRAM';
            densStyle.COLOR1 = 'white';
            densStyle.COLOR2 = 'black';
            densStyle.HEIGHT = 30;
            stylesheet.pushStyle({ type: 'density' }, null, densStyle);
        } else {
            var wigStyle = new DASStyle();
            wigStyle.glyph = 'HISTOGRAM';
            wigStyle.COLOR1 = 'white';
            wigStyle.COLOR2 = 'black';
            wigStyle.HEIGHT = 30;
            stylesheet.pushStyle({ type: 'default' }, null, wigStyle);
        }

        if (bwg.definedFieldCount == 12 && bwg.fieldCount >= 14) {
            stylesheet.geneHint = true;
        }

        return callback(stylesheet);
    });
};

function bamRecordToFeature(r, group) {
    if (r.flag & BamFlags.SEGMENT_UNMAPPED) return;

    var len;
    if (r.seq) len = r.seq.length;else len = r.seqLength;

    if (r.cigar) {
        len = 0;
        var ops = parseCigar(r.cigar);
        for (var ci = 0; ci < ops.length; ++ci) {
            var co = ops[ci];
            if (co.op == 'M' || co.op == 'D') len += co.cnt;
        }
    }

    var f = new DASFeature();
    f.min = r.pos + 1;
    f.max = r.pos + len;
    f.segment = r.segment;
    f.type = 'bam';
    f.id = r.readName;
    f.notes = [/* 'Sequence=' + r.seq, 'CIGAR=' + r.cigar, */'MQ=' + r.mq];
    f.cigar = r.cigar;
    f.seq = r.seq;
    f.quals = r.quals;
    f.orientation = r.flag & BamFlags.REVERSE_COMPLEMENT ? '-' : '+';
    f.bamRecord = r;

    if (group && r.flag & BamFlags.MULTIPLE_SEGMENTS) {
        f.groups = [{ id: r.readName,
            type: 'readpair' }];
    }

    return f;
}

function BAMFeatureSource(bamSource) {
    FeatureSourceBase.call(this);

    var thisB = this;
    this.bamSource = bamSource;
    this.opts = { credentials: bamSource.credentials, preflight: bamSource.preflight, bamGroup: bamSource.bamGroup };
    this.bamHolder = new Awaited();

    if (this.opts.preflight) {
        var pfs = bwg_preflights[this.opts.preflight];
        if (!pfs) {
            pfs = new Awaited();
            bwg_preflights[this.opts.preflight] = pfs;

            var req = new XMLHttpRequest();
            req.onreadystatechange = function () {
                if (req.readyState == 4) {
                    if (req.status == 200) {
                        pfs.provide('success');
                    } else {
                        pfs.provide('failure');
                    }
                }
            };
            // req.setRequestHeader('cache-control', 'no-cache');    /* Doesn't work, not an allowed request header in CORS */
            req.open('get', this.opts.preflight + '?' + hex_sha1('salt' + Date.now()), true); // Instead, ensure we always preflight a unique URI.
            if (this.opts.credentials) {
                req.withCredentials = 'true';
            }
            req.send();
        }
        pfs.await(function (status) {
            if (status === 'success') {
                thisB.init();
            }
        });
    } else {
        thisB.init();
    }
}

BAMFeatureSource.prototype = Object.create(FeatureSourceBase.prototype);

BAMFeatureSource.prototype.init = function () {
    var thisB = this;
    var bamF, baiF;
    if (this.bamSource.bamBlob) {
        bamF = new BlobFetchable(this.bamSource.bamBlob);
        baiF = new BlobFetchable(this.bamSource.baiBlob);
    } else {
        bamF = new URLFetchable(this.bamSource.bamURI, { credentials: this.opts.credentials, resolver: this.opts.resolver });
        baiF = new URLFetchable(this.bamSource.baiURI || this.bamSource.bamURI + '.bai', { credentials: this.opts.credentials, resolver: this.opts.resolver });
    }
    makeBam(bamF, baiF, null, function (bam, err) {
        thisB.readiness = null;
        thisB.notifyReadiness();

        if (bam) {
            thisB.bamHolder.provide(bam);
        } else {
            thisB.error = err;
            thisB.bamHolder.provide(null);
        }
    });
};

BAMFeatureSource.prototype.fetch = function (chr, min, max, scale, types, pool, callback) {
    var light = types && types.length == 1 && types[0] == 'density';

    var thisB = this;

    thisB.busy++;
    thisB.notifyActivity();

    this.bamHolder.await(function (bam) {
        if (!bam) {
            thisB.busy--;
            thisB.notifyActivity();
            return callback(thisB.error || "Couldn't fetch BAM");
        }

        bam.fetch(chr, min, max, function (bamRecords, error) {
            thisB.busy--;
            thisB.notifyActivity();

            if (error) {
                callback(error, null, null);
            } else {
                var features = [];
                for (var ri = 0; ri < bamRecords.length; ++ri) {
                    var r = bamRecords[ri];

                    var f = bamRecordToFeature(r, thisB.opts.bamGroup);
                    if (f) features.push(f);
                }
                callback(null, features, 1000000000);
            }
        }, { light: light });
    });
};

BAMFeatureSource.prototype.getScales = function () {
    return 1000000000;
};

BAMFeatureSource.prototype.getStyleSheet = function (callback) {
    this.bamHolder.await(function (bam) {
        var stylesheet = new DASStylesheet();

        var densStyle = new DASStyle();
        densStyle.glyph = 'HISTOGRAM';
        densStyle.COLOR1 = 'black';
        densStyle.COLOR2 = 'red';
        densStyle.HEIGHT = 30;
        stylesheet.pushStyle({ type: 'density' }, 'low', densStyle);
        stylesheet.pushStyle({ type: 'density' }, 'medium', densStyle);

        var wigStyle = new DASStyle();
        wigStyle.glyph = '__SEQUENCE';
        wigStyle.FGCOLOR = 'black';
        wigStyle.BGCOLOR = 'blue';
        wigStyle.HEIGHT = 8;
        wigStyle.BUMP = true;
        wigStyle.LABEL = false;
        wigStyle.ZINDEX = 20;
        stylesheet.pushStyle({ type: 'bam' }, 'high', wigStyle);

        return callback(stylesheet);
    });
};

function RemoteBAMFeatureSource(bamSource, worker) {
    FeatureSourceBase.call(this);

    var thisB = this;
    this.bamSource = bamSource;
    this.worker = worker;
    this.opts = { credentials: bamSource.credentials, preflight: bamSource.preflight, bamGroup: bamSource.bamGroup };
    this.keyHolder = new Awaited();

    if (bamSource.resolver) {
        this.resolverKey = browser.registerResolver(bamSource.resolver);
    }

    this.init();
}

RemoteBAMFeatureSource.prototype = Object.create(FeatureSourceBase.prototype);

RemoteBAMFeatureSource.prototype.init = function () {
    var thisB = this;
    var uri = this.bamSource.uri || this.bamSource.bamURI;
    var indexUri = this.bamSource.indexUri || this.bamSource.baiURI || uri + '.bai';

    var blob = this.bamSource.bamBlob || this.bamSource.blob;
    var indexBlob = this.bamSource.baiBlob || this.bamSource.indexBlob;

    var cnt = function cnt(result, err) {
        thisB.readiness = null;
        thisB.notifyReadiness();

        if (result) {
            thisB.keyHolder.provide(result);
        } else {
            thisB.error = err;
            thisB.keyHolder.provide(null);
        }
    };

    if (blob) {
        this.worker.postCommand({ command: 'connectBAM', blob: blob, indexBlob: indexBlob }, cnt);
    } else {
        this.worker.postCommand({
            command: 'connectBAM',
            uri: resolveUrlToPage(uri),
            resolver: this.resolverKey,
            indexUri: resolveUrlToPage(indexUri),
            credentials: this.bamSource.credentials,
            indexChunks: this.bamSource.indexChunks }, cnt);
    }
};

RemoteBAMFeatureSource.prototype.fetch = function (chr, min, max, scale, types, pool, callback) {
    var light = types && types.length == 1 && types[0] == 'density';
    var thisB = this;

    thisB.busy++;
    thisB.notifyActivity();

    this.keyHolder.await(function (key) {
        if (!key) {
            thisB.busy--;
            thisB.notifyActivity();
            return callback(thisB.error || "Couldn't fetch BAM");
        }

        thisB.worker.postCommand({ command: 'fetch', connection: key, chr: chr, min: min, max: max, opts: { light: light } }, function (bamRecords, error) {
            // console.log('retrieved ' + bamRecords.length + ' via worker.');

            thisB.busy--;
            thisB.notifyActivity();

            if (error) {
                callback(error, null, null);
            } else {
                var features = [];
                for (var ri = 0; ri < bamRecords.length; ++ri) {
                    var r = bamRecords[ri];
                    var f = bamRecordToFeature(r, thisB.opts.bamGroup);
                    if (f) features.push(f);
                }
                callback(null, features, 1000000000);
            }
        });
    });
};

RemoteBAMFeatureSource.prototype.getScales = function () {
    return 1000000000;
};

RemoteBAMFeatureSource.prototype.getStyleSheet = function (callback) {
    this.keyHolder.await(function (bam) {
        var stylesheet = new DASStylesheet();

        var densStyle = new DASStyle();
        densStyle.glyph = 'HISTOGRAM';
        densStyle.COLOR1 = 'black';
        densStyle.COLOR2 = 'red';
        densStyle.HEIGHT = 30;
        stylesheet.pushStyle({ type: 'density' }, 'low', densStyle);
        stylesheet.pushStyle({ type: 'density' }, 'medium', densStyle);

        var wigStyle = new DASStyle();
        wigStyle.glyph = '__SEQUENCE';
        wigStyle.FGCOLOR = 'black';
        wigStyle.BGCOLOR = 'blue';
        wigStyle.HEIGHT = 8;
        wigStyle.BUMP = true;
        wigStyle.LABEL = false;
        wigStyle.ZINDEX = 20;
        stylesheet.pushStyle({ type: 'bam' }, 'high', wigStyle);
        return callback(stylesheet);
    });
};

function MappedFeatureSource(source, mapping) {
    this.source = source;
    this.mapping = mapping;

    this.activityListeners = [];
    this.busy = 0;
}

MappedFeatureSource.prototype.addActivityListener = function (listener) {
    this.activityListeners.push(listener);
};

MappedFeatureSource.prototype.removeActivityListener = function (listener) {
    var idx = arrayIndexOf(this.activityListeners, listener);
    if (idx >= 0) this.activityListeners.splice(idx, 0);
};

MappedFeatureSource.prototype.notifyActivity = function () {
    for (var li = 0; li < this.activityListeners.length; ++li) {
        try {
            this.activityListeners[li](this.busy);
        } catch (e) {
            console.log(e);
        }
    }
};

MappedFeatureSource.prototype.getStyleSheet = function (callback) {
    return this.source.getStyleSheet(callback);
};

MappedFeatureSource.prototype.getScales = function () {
    return this.source.getScales();
};

MappedFeatureSource.prototype.getDefaultFIPs = function (callback) {
    if (this.source.getDefaultFIPs) return this.source.getDefaultFIPs(callback);
};

MappedFeatureSource.prototype.simplifySegments = function (segs, minGap) {
    if (segs.length === 0) return segs;

    segs.sort(function (s1, s2) {
        var d = s1.name - s2.name;
        if (d) return d;
        d = s1.start - s2.start;
        if (d) return d;
        return s1.end - s2.end; // Should never come to this...?
    });

    var ssegs = [];
    var currentSeg = segs[0];
    for (var si = 0; si < segs.length; ++si) {
        var ns = segs[si];

        // console.log(ns.name + ' ' + ns.start + ' ' + ns.end);
        if (ns.name != currentSeg.name || ns.start > currentSeg.end + minGap) {
            ssegs.push(currentSeg);
            currentSeg = ns;
        } else {
            currentSeg = new DASSegment(currentSeg.name, Math.min(currentSeg.start, ns.start), Math.max(currentSeg.end, ns.end));
        }
    }
    ssegs.push(currentSeg);
    return ssegs;
};

MappedFeatureSource.prototype.fetch = function (chr, min, max, scale, types, pool, callback, styleFilters) {
    var thisB = this;
    var fetchLength = max - min + 1;

    thisB.busy++;
    thisB.notifyActivity();

    this.mapping.sourceBlocksForRange(chr, min, max, function (mseg) {
        if (mseg.length === 0) {
            thisB.busy--;
            thisB.notifyActivity();

            callback("No mapping available for this regions", [], scale);
        } else {
            mseg = thisB.simplifySegments(mseg, Math.max(100, 0.05 * fetchLength));

            var mappedFeatures = [];
            var mappedLoc = null;
            var count = mseg.length;
            var finalStatus;

            mseg.map(function (seg) {
                thisB.source.fetch(seg.name, seg.start, seg.end, scale, types, pool, function (status, features, fscale) {
                    if (status && !finalStatus) finalStatus = status;

                    if (features) {
                        for (var fi = 0; fi < features.length; ++fi) {
                            var f = features[fi];
                            var sn = f.segment;
                            if (sn.indexOf('chr') === 0) {
                                sn = sn.substr(3);
                            }

                            var mappings = thisB.mapping.mapSegment(sn, f.min, f.max);

                            if (mappings.length === 0) {
                                if (f.parts && f.parts.length > 0) {
                                    mappedFeatures.push(f);
                                }
                            } else {
                                for (var mi = 0; mi < mappings.length; ++mi) {
                                    var m = mappings[mi];
                                    var mf = shallowCopy(f);
                                    mf.segment = m.segment;
                                    mf.min = m.min;
                                    mf.max = m.max;
                                    if (m.partialMin) mf.partialMin = m.partialMin;
                                    if (m.partialMax) mf.partialMax = m.partialMax;

                                    if (m.flipped) {
                                        if (f.orientation == '-') {
                                            mf.orientation = '+';
                                        } else if (f.orientation == '+') {
                                            mf.orientation = '-';
                                        }
                                    }
                                    mappedFeatures.push(mf);
                                }
                            }
                        }
                    }

                    var m1 = thisB.mapping.mapPoint(seg.name, seg.start);
                    var m2 = thisB.mapping.mapPoint(seg.name, seg.end);

                    if (m1 && m2) {
                        var segDestCoverage = new Range(m1.pos, m2.pos);
                        if (mappedLoc) mappedLoc = union(mappedLoc, segDestCoverage);else mappedLoc = segDestCoverage;
                    }

                    --count;
                    if (count === 0) {
                        thisB.busy--;
                        thisB.notifyActivity();
                        callback(finalStatus, mappedFeatures, fscale, mappedLoc);
                    }
                }, styleFilters);
            });
        }
    });
};

function DummyFeatureSource() {}

DummyFeatureSource.prototype.getScales = function () {
    return null;
};

DummyFeatureSource.prototype.fetch = function (chr, min, max, scale, types, pool, cnt) {
    return cnt(null, [], 1000000000);
};

DummyFeatureSource.prototype.getStyleSheet = function (callback) {
    var stylesheet = new DASStylesheet();
    var defStyle = new DASStyle();
    defStyle.glyph = 'BOX';
    defStyle.BGCOLOR = 'blue';
    defStyle.FGCOLOR = 'black';
    stylesheet.pushStyle({ type: 'default' }, null, defStyle);
    return callback(stylesheet);
};

function DummySequenceSource() {}

DummySequenceSource.prototype.fetch = function (chr, min, max, pool, cnt) {
    return cnt(null, null);
};

function JBrowseFeatureSource(source) {
    this.store = new JBrowseStore(source.jbURI, source.jbQuery);
}

JBrowseFeatureSource.prototype.getScales = function () {
    return null;
};

JBrowseFeatureSource.prototype.getStyleSheet = function (callback) {
    var stylesheet = new DASStylesheet();

    var cdsStyle = new DASStyle();
    cdsStyle.glyph = 'BOX';
    cdsStyle.FGCOLOR = 'black';
    cdsStyle.BGCOLOR = 'red';
    cdsStyle.HEIGHT = 10;
    cdsStyle.BUMP = true;
    cdsStyle.ZINDEX = 20;
    stylesheet.pushStyle({ type: 'translation' }, null, cdsStyle);

    var tsStyle = new DASStyle();
    tsStyle.glyph = 'BOX';
    tsStyle.FGCOLOR = 'black';
    tsStyle.BGCOLOR = 'white';
    tsStyle.HEIGHT = 10;
    tsStyle.ZINDEX = 10;
    tsStyle.BUMP = true;
    tsStyle.LABEL = true;
    stylesheet.pushStyle({ type: 'transcript' }, null, tsStyle);

    var wigStyle = new DASStyle();
    wigStyle.glyph = 'BOX';
    wigStyle.FGCOLOR = 'black';
    wigStyle.BGCOLOR = 'green';
    wigStyle.HEIGHT = 8;
    wigStyle.BUMP = true;
    wigStyle.LABEL = true;
    wigStyle.ZINDEX = 20;
    stylesheet.pushStyle({ type: 'default' }, null, wigStyle);

    return callback(stylesheet);
};

JBrowseFeatureSource.prototype.fetch = function (chr, min, max, scale, types, pool, callback) {
    if (types && types.length === 0) {
        callback(null, [], scale);
        return;
    }

    var fops = {};

    this.store.features(new DASSegment(chr, min, max), fops, function (features, status) {
        callback(status, features, 100000);
    });
};

Browser.prototype.sourceAdapterIsCapable = function (s, cap) {
    if (!s.capabilities) return false;else return s.capabilities()[cap];
};

if (typeof module !== 'undefined') {
    module.exports = {
        FeatureSourceBase: FeatureSourceBase,

        TwoBitSequenceSource: TwoBitSequenceSource,
        EnsemblSequenceSource: EnsemblSequenceSource,
        DASSequenceSource: DASSequenceSource,
        MappedFeatureSource: MappedFeatureSource,
        CachingFeatureSource: CachingFeatureSource,
        BWGFeatureSource: BWGFeatureSource,
        RemoteBWGFeatureSource: RemoteBWGFeatureSource,
        BAMFeatureSource: BAMFeatureSource,
        RemoteBAMFeatureSource: RemoteBAMFeatureSource,
        DummyFeatureSource: DummyFeatureSource,
        DummySequenceSource: DummySequenceSource,

        registerSourceAdapterFactory: dalliance_registerSourceAdapterFactory,
        registerParserFactory: dalliance_registerParserFactory,
        makeParser: dalliance_makeParser
    };

    // Standard set of plugins.
    require('./ensembljson');
    require('./tabix-source');
    require('./memstore');
    require('./bedwig');
    require('./vcf');
    require('./test-source');
}

},{"./bam":1,"./bedwig":2,"./bigwig":3,"./bin":4,"./cbrowser":6,"./chainset":7,"./cigar":8,"./das":10,"./encode":14,"./ensembljson":15,"./jbjson":24,"./memstore":27,"./overlay":30,"./spans":40,"./style":41,"./tabix-source":45,"./test-source":47,"./tier":51,"./twoBit":54,"./utils":55,"./vcf":56}],39:[function(require,module,exports){
'use strict';

/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2015
//
// sourcecompare.js
//


function sourceDataURI(conf) {
    if (conf.uri) {
        return conf.uri;
    } else if (conf.blob) {
        return 'file:' + conf.blob.name;
    } else if (conf.bwgBlob) {
        return 'file:' + conf.bwgBlob.name;
    } else if (conf.bamBlob) {
        return 'file:' + conf.bamBlob.name;
    } else if (conf.twoBitBlob) {
        return 'file:' + conf.twoBitBlob.name;
    }

    return conf.bwgURI || conf.bamURI || conf.jbURI || conf.twoBitURI || 'https://www.biodalliance.org/magic/no_uri';
}

function sourceStyleURI(conf) {
    if (conf.stylesheet_uri) return conf.stylesheet_uri;else if (conf.tier_type == 'sequence' || conf.twoBitURI || conf.twoBitBlob) return 'https://www.biodalliance.org/magic/sequence';else return sourceDataURI(conf);
}

function sourcesAreEqualModuloStyle(a, b) {
    if (sourceDataURI(a) != sourceDataURI(b)) return false;

    if (a.mapping != b.mapping) return false;

    if (a.tier_type != b.tier_type) return false;

    if (a.overlay) {
        if (!b.overlay || b.overlay.length != a.overlay.length) return false;
        for (var oi = 0; oi < a.overlay.length; ++oi) {
            if (!sourcesAreEqualModuloStyle(a.overlay[oi], b.overlay[oi])) return false;
        }
    } else {
        if (b.overlay) return false;
    }

    return true;
}

function sourcesAreEqual(a, b) {
    if (sourceDataURI(a) != sourceDataURI(b) || sourceStyleURI(a) != sourceStyleURI(b)) return false;

    if (a.mapping != b.mapping) return false;

    if (a.tier_type != b.tier_type) return false;

    if (a.overlay) {
        if (!b.overlay || b.overlay.length != a.overlay.length) return false;
        for (var oi = 0; oi < a.overlay.length; ++oi) {
            if (!sourcesAreEqual(a.overlay[oi], b.overlay[oi])) return false;
        }
    } else {
        if (b.overlay) return false;
    }

    return true;
}

if (typeof module !== 'undefined') {
    module.exports = {
        sourcesAreEqual: sourcesAreEqual,
        sourcesAreEqualModuloStyle: sourcesAreEqualModuloStyle,
        sourceDataURI: sourceDataURI,
        sourceStyleURI: sourceStyleURI
    };
}

},{}],40:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2010
//
// spans.js: JavaScript Intset/Location port.
//

"use strict";

function Range(min, max) {
    if (typeof min != 'number' || typeof max != 'number') throw 'Bad range ' + min + ',' + max;
    this._min = min;
    this._max = max;
}

Range.prototype.min = function () {
    return this._min;
};

Range.prototype.max = function () {
    return this._max;
};

Range.prototype.contains = function (pos) {
    return pos >= this._min && pos <= this._max;
};

Range.prototype.isContiguous = function () {
    return true;
};

Range.prototype.ranges = function () {
    return [this];
};

Range.prototype._pushRanges = function (ranges) {
    ranges.push(this);
};

Range.prototype.toString = function () {
    return '[' + this._min + '-' + this._max + ']';
};

function _Compound(ranges) {
    // given: a set of unsorted possibly overlapping ranges
    // sort the input ranges
    var sorted = ranges.sort(_rangeOrder);
    // merge overlaps between adjacent ranges
    var merged = [];
    var current = sorted.shift();
    sorted.forEach(function (range) {
        if (range._min <= current._max) {
            if (range._max > current._max) {
                current._max = range._max;
            }
        } else {
            merged.push(current);
            current = range;
        }
    });
    merged.push(current);
    this._ranges = merged;
}

_Compound.prototype.min = function () {
    return this._ranges[0].min();
};

_Compound.prototype.max = function () {
    return this._ranges[this._ranges.length - 1].max();
};

// returns the index of the first range that is not less than pos
_Compound.prototype.lower_bound = function (pos) {
    // first check if pos is out of range
    var r = this.ranges();
    if (pos > this.max()) return r.length;
    if (pos < this.min()) return 0;
    // do a binary search
    var a = 0,
        b = r.length - 1;
    while (a <= b) {
        var m = Math.floor((a + b) / 2);
        if (pos > r[m]._max) {
            a = m + 1;
        } else if (pos < r[m]._min) {
            b = m - 1;
        } else {
            return m;
        }
    }
    return a;
};

_Compound.prototype.contains = function (pos) {
    var lb = this.lower_bound(pos);
    if (lb < this._ranges.length && this._ranges[lb].contains(pos)) {
        return true;
    }
    return false;
};

_Compound.prototype.insertRange = function (range) {
    var lb = this.lower_bound(range._min);
    if (lb === this._ranges.length) {
        // range follows this
        this._ranges.push(range);
        return;
    }

    var r = this.ranges();
    if (range._max < r[lb]._min) {
        // range preceeds lb
        this._ranges.splice(lb, 0, range);
        return;
    }

    // range overlaps lb (at least)
    if (r[lb]._min < range._min) range._min = r[lb]._min;
    var ub = lb + 1;
    while (ub < r.length && r[ub]._min <= range._max) {
        ub++;
    }
    ub--;
    // ub is the upper bound of the new range
    if (r[ub]._max > range._max) range._max = r[ub]._max;

    // splice range into this._ranges
    this._ranges.splice(lb, ub - lb + 1, range);
    return;
};

_Compound.prototype.isContiguous = function () {
    return this._ranges.length > 1;
};

_Compound.prototype.ranges = function () {
    return this._ranges;
};

_Compound.prototype._pushRanges = function (ranges) {
    for (var ri = 0; ri < this._ranges.length; ++ri) {
        ranges.push(this._ranges[ri]);
    }
};

_Compound.prototype.toString = function () {
    var s = '';
    for (var r = 0; r < this._ranges.length; ++r) {
        if (r > 0) {
            s = s + ',';
        }
        s = s + this._ranges[r].toString();
    }
    return s;
};

function union(s0, s1) {
    if (!(s0 instanceof _Compound)) {
        if (!(s0 instanceof Array)) s0 = [s0];
        s0 = new _Compound(s0);
    }

    if (s1) s0.insertRange(s1);

    return s0;
}

function intersection(s0, s1) {
    var r0 = s0.ranges();
    var r1 = s1.ranges();
    var l0 = r0.length,
        l1 = r1.length;
    var i0 = 0,
        i1 = 0;
    var or = [];

    while (i0 < l0 && i1 < l1) {
        var s0 = r0[i0],
            s1 = r1[i1];
        var lapMin = Math.max(s0.min(), s1.min());
        var lapMax = Math.min(s0.max(), s1.max());
        if (lapMax >= lapMin) {
            or.push(new Range(lapMin, lapMax));
        }
        if (s0.max() > s1.max()) {
            ++i1;
        } else {
            ++i0;
        }
    }

    if (or.length == 0) {
        return null; // FIXME
    } else if (or.length == 1) {
        return or[0];
    } else {
        return new _Compound(or);
    }
}

function coverage(s) {
    var tot = 0;
    var rl = s.ranges();
    for (var ri = 0; ri < rl.length; ++ri) {
        var r = rl[ri];
        tot += r.max() - r.min() + 1;
    }
    return tot;
}

function rangeOrder(a, b) {
    if (a.min() < b.min()) {
        return -1;
    } else if (a.min() > b.min()) {
        return 1;
    } else if (a.max() < b.max()) {
        return -1;
    } else if (b.max() > a.max()) {
        return 1;
    } else {
        return 0;
    }
}

function _rangeOrder(a, b) {
    if (a._min < b._min) {
        return -1;
    } else if (a._min > b._min) {
        return 1;
    } else if (a._max < b._max) {
        return -1;
    } else if (b._max > a._max) {
        return 1;
    } else {
        return 0;
    }
}

if (typeof module !== 'undefined') {
    module.exports = {
        Range: Range,
        union: union,
        intersection: intersection,
        coverage: coverage,
        rangeOver: rangeOrder,
        _rangeOrder: _rangeOrder
    };
}

},{}],41:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2014
//
// style.js
//

"use strict";

function StyleFilter(type, method, label) {
    this.type = type;
    this.method = method;
    this.label = label;
}

StyleFilter.prototype.equals = function (o) {
    return this.type == o.type && this.method == o.method && this.label == o.label;
};

StyleFilter.prototype.toString = function () {
    var fs = [];
    if (this.type) fs.push('type=' + this.type);
    if (this.method) fs.push('method=' + this.method);
    if (this.label) fs.push('label=' + this.label);
    return 'StyleFilter<' + fs.join(';') + '>';
};

function StyleFilterSet(filters) {
    this._filters = {};
    if (filters) {
        for (var fi = 0; fi < filters.length; ++fi) {
            this.add(filters[fi]);
        }
    }
}

StyleFilterSet.prototype.add = function (filter) {
    var fs = filter.toString();
    if (!this._filters[fs]) {
        this._filters[fs] = filter;
        this._list = null;
    }
};

StyleFilterSet.prototype.addAll = function (filterSet) {
    var l = filterSet.list();
    for (var fi = 0; fi < l.length; ++fi) {
        this.add(l[fi]);
    }
};

StyleFilterSet.prototype.doesNotContain = function (filterSet) {
    var l = filterSet.list();
    for (var fi = 0; fi < l.length; ++fi) {
        if (!this._filters[fi.toString()]) return true;
    }
    return false;
};

StyleFilterSet.prototype.list = function () {
    if (!this._list) {
        this._list = [];
        for (var k in this._filters) {
            if (this._filters.hasOwnProperty(k)) {
                this._list.push(this._filters[k]);
            }
        }
    }
    return this._list;
};

StyleFilterSet.prototype.typeList = function () {
    var types = [];
    var list = this.list();
    for (var fi = 0; fi < list.length; ++fi) {
        var filter = list[fi];
        var type = filter.type;
        if (!type || type == 'default') return null;
        if (types.indexOf(type) < 0) types.push(type);
    }
    return types;
};

if (typeof module !== 'undefined') {
    module.exports = {
        StyleFilter: StyleFilter,
        StyleFilterSet: StyleFilterSet
    };
}

},{}],42:[function(require,module,exports){
/* jshint esversion: 6 */
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.renderTier = renderTier;
exports.drawTier = drawTier;

/* To be used by tiers which are to be drawn in a multitier
   using the multi-renderer.

   Subtiers are configured by adding the following to a tier's source configuration:
       renderer: 'sub',
       sub: {
           multi_id: "multi_1",
           offset: 130,
           z: 2,
       }
   This would define a subtier that's to be rendered in the multi-tier with
   id "multi_1", with the top of the subtier at 130 pixels and at z-index 2.
 */

function renderTier(status, tier) {
    drawTier(tier);
    tier.updateStatus(status);
}

// drawTier is called when this tier's data has been fetched,
// so by refreshing the multiTier from here, we can be sure that
// there's something new worth drawing in it
function drawTier(tier) {
    var browser = tier.browser;

    var multiTier = browser.tiers.filter(function (t) {
        return t.dasSource.renderer === 'multi' && t.dasSource.multi.multi_id === tier.dasSource.sub.multi_id;
    });

    multiTier.forEach(function (t) {
        return browser.refreshTier(t);
    });
}

},{}],43:[function(require,module,exports){
'use strict';

/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2013
//
// svg-export.js
//

if (typeof require !== 'undefined') {
    var browser = require('./cbrowser');
    var Browser = browser.Browser;

    var utils = require('./utils');
    var makeElement = utils.makeElement;
    var makeElementNS = utils.makeElementNS;

    var VERSION = require('./version');

    var svgSeqTier = require('./sequence-draw').svgSeqTier;

    var svgu = require('./svg-utils');
    var NS_SVG = svgu.NS_SVG;
    var NS_XLINK = svgu.NS_XLINK;
    var SVGPath = svgu.SVGPath;

    var nf = require('./numformats');
    var formatQuantLabel = nf.formatQuantLabel;
    var formatLongInt = nf.formatLongInt;
}

Browser.prototype.makeSVG = function (opts) {
    opts = opts || {};
    var minTierHeight = opts.minTierHeight || 20;
    var padding = 3;
    var fpw = opts.width || this.featurePanelWidth;

    var backupFPW = this.featurePanelWidth;
    var backupScale = this.scale;
    this.featurePanelWidth = fpw;
    this.scale = this.featurePanelWidth / (this.viewEnd - this.viewStart);

    var b = this;
    var saveDoc = document.implementation.createDocument(NS_SVG, 'svg', null);

    var saveRoot = makeElementNS(NS_SVG, 'g', null, {
        fontFamily: 'helvetica',
        fontSize: '8pt'
    });
    saveDoc.documentElement.appendChild(saveRoot);

    var margin = 200;

    if (opts.banner) {
        var dallianceAnchor = makeElementNS(NS_SVG, 'a', makeElementNS(NS_SVG, 'text', 'Graphics from Biodalliance ' + VERSION, {
            x: b.featurePanelWidth + margin - 100,
            y: 35,
            strokeWidth: 0,
            fontSize: '12pt',
            textAnchor: 'end',
            fill: 'blue'
        }));
        dallianceAnchor.setAttribute('xmlns:xlink', NS_XLINK);
        dallianceAnchor.setAttribute('xlink:href', 'http://www.biodalliance.org/');

        saveRoot.appendChild(dallianceAnchor);
    }

    if (opts.region) {
        saveRoot.appendChild(makeElementNS(NS_SVG, 'text', this.chr + ':' + formatLongInt(this.viewStart) + '..' + formatLongInt(this.viewEnd), {
            x: margin + 100,
            y: 35,
            strokeWidth: 0,
            fontSize: '12pt',
            textAnchor: 'start'
        }));
    }

    var clipRect = makeElementNS(NS_SVG, 'rect', null, {
        x: margin,
        y: 50,
        width: b.featurePanelWidth,
        height: 100000
    });
    var clip = makeElementNS(NS_SVG, 'clipPath', clipRect, { id: 'featureClip' });
    saveRoot.appendChild(clip);

    var pos = 70;
    var tierHolder = makeElementNS(NS_SVG, 'g', null, {});

    for (var ti = 0; ti < b.tiers.length; ++ti) {
        var tier = b.tiers[ti];
        tier.backupSubtiers = tier.subtiers;
        tier.backupOriginHaxx = tier.originHaxx;
        tier.backupLayoutHeight = tier.layoutHeight;

        var renderer = b.getTierRenderer(tier);
        if (renderer && renderer.prepareSubtiers) {
            renderer.prepareSubtiers(tier, tier.viewport.getContext('2d'));
        }

        var tierSVG = makeElementNS(NS_SVG, 'g', null, { clipPath: 'url(#featureClip)', clipRule: 'nonzero' });
        var tierLabels = makeElementNS(NS_SVG, 'g');
        var tierTopPos = pos;

        var tierBackground = makeElementNS(NS_SVG, 'rect', null, { x: 0, y: tierTopPos, width: '10000', height: 50, fill: tier.background });
        tierSVG.appendChild(tierBackground);

        if (tier.sequenceSource) {
            var seqTrack = svgSeqTier(tier, tier.currentSequence);

            tierSVG.appendChild(makeElementNS(NS_SVG, 'g', seqTrack, { transform: 'translate(' + margin + ', ' + pos + ')' }));
            pos += 80;
        } else {
            if (!tier.subtiers) {
                continue;
            }

            var offset = (tier.glyphCacheOrigin - b.viewStart) * b.scale;
            var hasQuant = false;
            for (var sti = 0; sti < tier.subtiers.length; ++sti) {
                pos += padding;
                var subtier = tier.subtiers[sti];

                var glyphElements = [];
                for (var gi = 0; gi < subtier.glyphs.length; ++gi) {
                    var glyph = subtier.glyphs[gi];
                    glyphElements.push(glyph.toSVG());
                }

                tierSVG.appendChild(makeElementNS(NS_SVG, 'g', glyphElements, { transform: 'translate(' + (margin + offset) + ', ' + pos + ')' }));

                if (subtier.quant) {
                    hasQuant = true;
                    var q = subtier.quant;
                    var h = subtier.height;

                    var numTics = 2;
                    if (h > 40) {
                        numTics = 1 + (h / 20 | 0);
                    }
                    var ticSpacing = h / (numTics - 1);
                    var ticInterval = (q.max - q.min) / (numTics - 1);

                    var path = new SVGPath();
                    path.moveTo(margin + 5, pos);
                    path.lineTo(margin, pos);
                    path.lineTo(margin, pos + subtier.height);
                    path.lineTo(margin + 5, pos + subtier.height);
                    for (var t = 1; t < numTics - 1; ++t) {
                        var ty = t * ticSpacing;
                        path.moveTo(margin, pos + ty);
                        path.lineTo(margin + 3, pos + ty);
                    }

                    tierLabels.appendChild(makeElementNS(NS_SVG, 'path', null, { d: path.toPathData(), fill: 'none', stroke: 'black', strokeWidth: '2px' }));
                    tierLabels.appendChild(makeElementNS(NS_SVG, 'text', formatQuantLabel(q.max), { x: margin - 3, y: pos + 7, textAnchor: 'end' }));
                    tierLabels.appendChild(makeElementNS(NS_SVG, 'text', formatQuantLabel(q.min), { x: margin - 3, y: pos + subtier.height, textAnchor: 'end' }));
                    for (var t = 1; t < numTics - 1; ++t) {
                        var ty = t * ticSpacing;
                        tierLabels.appendChild(makeElementNS(NS_SVG, 'text', formatQuantLabel(1.0 * q.max - t * ticInterval), { x: margin - 3, y: pos + ty + 3, textAnchor: 'end' }));
                    }
                }

                pos += subtier.height + padding;
            }

            if (pos - tierTopPos < minTierHeight) {
                pos = tierTopPos + minTierHeight;
            }
        }

        var labelName;
        if (typeof tier.config.name === 'string') labelName = tier.config.name;else labelName = tier.dasSource.name;
        tierLabels.appendChild(makeElementNS(NS_SVG, 'text', labelName, { x: margin - (hasQuant ? 20 : 12), y: (pos + tierTopPos + 8) / 2, fontSize: '10pt', textAnchor: 'end' }));

        tierBackground.setAttribute('height', pos - tierTopPos);
        tierHolder.appendChild(makeElementNS(NS_SVG, 'g', [tierSVG, tierLabels]));

        tier.subtiers = tier.backupSubtiers;
        tier.originHaxx = tier.backupOriginHaxx;
        tier.layoutHeight = tier.backupLayoutHeight;
    }

    if (opts.highlights) {
        var highlights = this.highlights || [];
        for (var hi = 0; hi < highlights.length; ++hi) {
            var h = highlights[hi];
            if ((h.chr == this.chr || h.chr == 'chr' + this.chr) && h.min < this.viewEnd && h.max > this.viewStart) {
                var tmin = (Math.max(h.min, this.viewStart) - this.viewStart) * this.scale;
                var tmax = (Math.min(h.max, this.viewEnd) - this.viewStart) * this.scale;

                tierHolder.appendChild(makeElementNS(NS_SVG, 'rect', null, { x: margin + tmin, y: 70, width: tmax - tmin, height: pos - 70,
                    stroke: 'none', fill: this.defaultHighlightFill, fillOpacity: this.defaultHighlightAlpha }));
            }
        }
    }

    var rulerPos = -1;
    if (opts.ruler == 'center') {
        rulerPos = margin + (this.viewEnd - this.viewStart) * this.scale / 2;
    } else if (opts.ruler == 'left') {
        rulerPos = margin;
    } else if (opts.ruler == 'right') {
        rulerPos = margin + (this.viewEnd - this.viewStart) * this.scale;
    }
    if (rulerPos >= 0) {
        tierHolder.appendChild(makeElementNS(NS_SVG, 'line', null, { x1: rulerPos, y1: 70, x2: rulerPos, y2: pos,
            stroke: 'blue' }));
    }

    saveRoot.appendChild(tierHolder);
    saveDoc.documentElement.setAttribute('width', b.featurePanelWidth + 20 + margin);
    saveDoc.documentElement.setAttribute('height', pos + 50);

    this.featurePanelWidth = backupFPW;
    this.scale = backupScale;

    var svg = void 0;
    if (typeof XMLSerializer !== 'undefined') {
        svg = new XMLSerializer().serializeToString(saveDoc);
    } else {
        var root = saveDoc.documentElement;
        root.setAttribute('xmlns', 'http://www.w3.org/2000/svg');
        svg = root.outerHTML;
    }

    if (opts.output && opts.output === 'string') {
        return svg;
    } else {
        return new Blob([svg], { type: 'image/svg+xml' });
    }
};

},{"./cbrowser":6,"./numformats":29,"./sequence-draw":35,"./svg-utils":44,"./utils":55,"./version":57}],44:[function(require,module,exports){
'use strict';

/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2014
//
// svg-utils.js
//

var NS_SVG = 'http://www.w3.org/2000/svg';
var NS_XLINK = 'http://www.w3.org/1999/xlink';

function SVGPath() {
    this.ops = [];
}

SVGPath.prototype.moveTo = function (x, y) {
    this.ops.push('M ' + x + ' ' + y);
};

SVGPath.prototype.lineTo = function (x, y) {
    this.ops.push('L ' + x + ' ' + y);
};

SVGPath.prototype.closePath = function () {
    this.ops.push('Z');
};

SVGPath.prototype.toPathData = function () {
    return this.ops.join(' ');
};

if (typeof module !== 'undefined') {
    module.exports = {
        NS_SVG: NS_SVG,
        NS_XLINK: NS_XLINK,
        SVGPath: SVGPath
    };
}

},{}],45:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2013
//
// tabix-source.js
//

"use strict";

if (typeof require !== 'undefined') {
    var sa = require('./sourceadapters');
    var dalliance_registerSourceAdapterFactory = sa.registerSourceAdapterFactory;
    var dalliance_makeParser = sa.makeParser;
    var FeatureSourceBase = sa.FeatureSourceBase;

    var bin = require('./bin');
    var URLFetchable = bin.URLFetchable;
    var BlobFetchable = bin.BlobFetchable;

    var utils = require('./utils');
    var Awaited = utils.Awaited;

    var connectTabix = require('./tabix').connectTabix;
}

function TabixFeatureSource(source) {
    FeatureSourceBase.call(this);
    this.readiness = 'Connecting';
    this.source = source;

    this.tabixHolder = new Awaited();
    var thisB = this;

    var parser = dalliance_makeParser(source.payload);
    if (!parser) {
        throw 'Unsuported tabix payload ' + source.payload;
    } else {
        this.parser = parser;
    }

    var data, index;
    if (this.source.blob) {
        data = new BlobFetchable(this.source.blob);
        index = new BlobFetchable(this.source.indexBlob);
    } else {
        data = new URLFetchable(this.source.uri, { credentials: this.source.credentials, resolver: this.source.resolver });
        index = new URLFetchable(this.source.indexURI || this.source.uri + '.tbi', { credentials: this.source.credentials, resolver: this.source.resolver });
    }
    connectTabix(data, index, function (tabix, err) {
        thisB.tabixHolder.provide(tabix);
        tabix.fetchHeader(function (lines, err) {
            if (lines) {
                var session = parser.createSession(function () {/* Null sink because we shouldn't get records */});
                for (var li = 0; li < lines.length; ++li) {
                    session.parse(lines[li]);
                }
                session.flush();
            }
        });
        thisB.readiness = null;
        thisB.notifyReadiness();
    });
}

TabixFeatureSource.prototype = Object.create(FeatureSourceBase.prototype);

TabixFeatureSource.prototype.fetch = function (chr, min, max, scale, types, pool, callback) {
    var thisB = this;

    thisB.busy++;
    thisB.notifyActivity();

    this.tabixHolder.await(function (tabix) {
        tabix.fetch(chr, min, max, function (records, error) {
            thisB.busy--;
            thisB.notifyActivity();

            var features = [];
            var session = thisB.parser.createSession(function (f) {
                features.push(f);
            });
            for (var ri = 0; ri < records.length; ++ri) {
                var f = session.parse(records[ri]);
            }
            session.flush();
            callback(null, features, 1000000000);
        });
    });
};

TabixFeatureSource.prototype.getStyleSheet = function (callback) {
    if (this.parser && this.parser.getStyleSheet) this.parser.getStyleSheet(callback);
};

TabixFeatureSource.prototype.getDefaultFIPs = function (callback) {
    if (this.parser && this.parser.getDefaultFIPs) this.parser.getDefaultFIPs(callback);
};

dalliance_registerSourceAdapterFactory('tabix', function (source) {
    return { features: new TabixFeatureSource(source) };
});

},{"./bin":4,"./sourceadapters":38,"./tabix":46,"./utils":55}],46:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2011
//
// tabix.js: basic support for tabix-indexed flatfiles
//

"use strict";

var TABIX_MAGIC = 0x01494254;

if (typeof require !== 'undefined') {
    var spans = require('./spans');
    var Range = spans.Range;
    var union = spans.union;
    var intersection = spans.intersection;

    var bin = require('./bin');
    var readInt = bin.readInt;
    var readShort = bin.readShort;
    var readByte = bin.readByte;
    var readInt64 = bin.readInt64;
    var readFloat = bin.readFloat;

    var lh3utils = require('./lh3utils');
    var readVob = lh3utils.readVob;
    var unbgzf = lh3utils.unbgzf;
    var reg2bins = lh3utils.reg2bins;
    var Chunk = lh3utils.Chunk;
}

function TabixFile() {}

function connectTabix(data, tbi, callback) {
    var tabix = new TabixFile();
    tabix.data = data;
    tabix.tbi = tbi;

    tabix.tbi.fetch(function (header) {
        // Do we really need to fetch the whole thing? :-(
        if (!header) {
            return callback(null, "Couldn't access Tabix");
        }

        var unchead = unbgzf(header, header.byteLength);
        var uncba = new Uint8Array(unchead);
        var magic = readInt(uncba, 0);
        if (magic != TABIX_MAGIC) {
            return callback(null, 'Not a tabix index');
        }

        var nref = readInt(uncba, 4);
        tabix.format = readInt(uncba, 8);
        tabix.colSeq = readInt(uncba, 12);
        tabix.colStart = readInt(uncba, 16);
        tabix.colEnd = readInt(uncba, 20);
        tabix.meta = readInt(uncba, 24);
        tabix.skip = readInt(uncba, 28);
        var nameLength = readInt(uncba, 32);

        tabix.indices = [];

        var p = 36;
        tabix.chrToIndex = {};
        tabix.indexToChr = [];
        for (var i = 0; i < nref; ++i) {
            var name = '';

            while (true) {
                var ch = uncba[p++];
                if (ch == 0) break;

                name += String.fromCharCode(ch);
            }

            tabix.chrToIndex[name] = i;
            if (name.indexOf('chr') == 0) {
                tabix.chrToIndex[name.substring(3)] = i;
            } else {
                tabix.chrToIndex['chr' + name] = i;
            }
            tabix.indexToChr.push(name);
        }

        var minBlockIndex = 1000000000;
        for (var ref = 0; ref < nref; ++ref) {
            var blockStart = p;
            var nbin = readInt(uncba, p);p += 4;
            for (var b = 0; b < nbin; ++b) {
                var bin = readInt(uncba, p);
                var nchnk = readInt(uncba, p + 4);
                p += 8 + nchnk * 16;
            }
            var nintv = readInt(uncba, p);p += 4;

            var q = p;
            for (var i = 0; i < nintv; ++i) {
                var v = readVob(uncba, q);q += 8;
                if (v) {
                    var bi = v.block;
                    if (v.offset > 0) bi += 65536;

                    if (bi < minBlockIndex) minBlockIndex = bi;
                    break;
                }
            }
            p += nintv * 8;

            var ub = uncba;
            if (nbin > 0) {
                tabix.indices[ref] = new Uint8Array(unchead, blockStart, p - blockStart);
            }
        }

        tabix.headerMax = minBlockIndex;

        callback(tabix);
    }, { timeout: 50000 });
}

// Copy-paste from BamFile

TabixFile.prototype.blocksForRange = function (refId, min, max) {
    var index = this.indices[refId];
    if (!index) {
        return [];
    }

    var intBinsL = reg2bins(min, max);
    var intBins = [];
    for (var i = 0; i < intBinsL.length; ++i) {
        intBins[intBinsL[i]] = true;
    }
    var leafChunks = [],
        otherChunks = [];

    var nbin = readInt(index, 0);
    var p = 4;
    for (var b = 0; b < nbin; ++b) {
        var bin = readInt(index, p);
        var nchnk = readInt(index, p + 4);
        p += 8;
        if (intBins[bin]) {
            for (var c = 0; c < nchnk; ++c) {
                var cs = readVob(index, p, true);
                var ce = readVob(index, p + 8, true);
                (bin < 4681 ? otherChunks : leafChunks).push(new Chunk(cs, ce));
                p += 16;
            }
        } else {
            p += nchnk * 16;
        }
    }

    var nintv = readInt(index, p);
    var lowest = null;
    var minLin = Math.min(min >> 14, nintv - 1),
        maxLin = Math.min(max >> 14, nintv - 1);
    for (var i = minLin; i <= maxLin; ++i) {
        var lb = readVob(index, p + 4 + i * 8);
        if (!lb) {
            continue;
        }
        if (!lowest || lb.block < lowest.block || lb.offset < lowest.offset) {
            lowest = lb;
        }
    }

    var prunedOtherChunks = [];
    if (lowest != null) {
        for (var i = 0; i < otherChunks.length; ++i) {
            var chnk = otherChunks[i];
            if (chnk.maxv.block >= lowest.block && chnk.maxv.offset >= lowest.offset) {
                prunedOtherChunks.push(chnk);
            }
        }
    }
    otherChunks = prunedOtherChunks;

    var intChunks = [];
    for (var i = 0; i < otherChunks.length; ++i) {
        intChunks.push(otherChunks[i]);
    }
    for (var i = 0; i < leafChunks.length; ++i) {
        intChunks.push(leafChunks[i]);
    }

    intChunks.sort(function (c0, c1) {
        var dif = c0.minv.block - c1.minv.block;
        if (dif != 0) {
            return dif;
        } else {
            return c0.minv.offset - c1.minv.offset;
        }
    });
    var mergedChunks = [];
    if (intChunks.length > 0) {
        var cur = intChunks[0];
        for (var i = 1; i < intChunks.length; ++i) {
            var nc = intChunks[i];
            if (nc.minv.block == cur.maxv.block /* && nc.minv.offset == cur.maxv.offset */) {
                    // no point splitting mid-block
                    cur = new Chunk(cur.minv, nc.maxv);
                } else {
                mergedChunks.push(cur);
                cur = nc;
            }
        }
        mergedChunks.push(cur);
    }

    return mergedChunks;
};

TabixFile.prototype.fetch = function (chr, min, max, callback) {
    var thisB = this;

    var chrId = this.chrToIndex[chr];
    if (chrId == undefined) return callback([]);

    var canonicalChr = this.indexToChr[chrId];

    var chunks;
    if (chrId === undefined) {
        chunks = [];
    } else {
        chunks = this.blocksForRange(chrId, min, max);
        if (!chunks) {
            callback(null, 'Error in index fetch');
        }
    }

    var records = [];
    var index = 0;
    var data;

    function tramp() {
        if (index >= chunks.length) {
            return callback(records);
        } else if (!data) {
            var c = chunks[index];
            var fetchMin = c.minv.block;
            var fetchMax = c.maxv.block + (1 << 16); // *sigh*
            thisB.data.slice(fetchMin, fetchMax - fetchMin).fetch(function (r) {
                data = unbgzf(r, c.maxv.block - c.minv.block + 1);
                return tramp();
            });
        } else {
            var ba = new Uint8Array(data);
            thisB.readRecords(ba, chunks[index].minv.offset, records, min, max, canonicalChr);
            data = null;
            ++index;
            return tramp();
        }
    }
    tramp();
};

TabixFile.prototype.readRecords = function (ba, offset, sink, min, max, chr) {
    LINE_LOOP: while (true) {
        var line = '';
        while (offset < ba.length) {
            var ch = ba[offset++];
            if (ch == 10) {
                var toks = line.split('\t');

                if (toks[this.colSeq - 1] == chr) {
                    var fmin = parseInt(toks[this.colStart - 1]);
                    var fmax = fmin;
                    if (this.colEnd > 0) fmax = parseInt(toks[this.colEnd - 1]);
                    if (this.format & 0x10000) ++fmin;

                    if (fmin <= max && fmax >= min) sink.push(line);
                }
                continue LINE_LOOP;
            } else {
                line += String.fromCharCode(ch);
            }
        }
        return;
    }
};

TabixFile.prototype.fetchHeader = function (callback) {
    var self = this;
    var fetchPtr = 0,
        ptr = 0,
        line = '';
    var lines = [];

    self.data.slice(0, self.headerMax).fetch(function (chnk) {
        if (!chnk) {
            return callback(null, "Fetch failed");
        }
        var ba = new Uint8Array(unbgzf(chnk, chnk.byteLength));
        var ptr = 0,
            line = '',
            lines = [];
        while (ptr < ba.length) {
            var ch = ba[ptr++];
            if (ch == 10) {
                if (line.charCodeAt(0) == self.meta) {
                    lines.push(line);
                    line = '';
                } else {
                    return callback(lines);
                }
            } else {
                line += String.fromCharCode(ch);
            }
        }
        callback(lines);
    });
};

if (typeof module !== 'undefined') {
    module.exports = {
        connectTabix: connectTabix,
        TABIX_MAGIC: TABIX_MAGIC
    };
}

},{"./bin":4,"./lh3utils":26,"./spans":40}],47:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _sourceadapters = require("./sourceadapters.js");

var _das = require("./das.js");

var _ramda = require("ramda");

var R = _interopRequireWildcard(_ramda);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /* jshint esversion: 6 */

/*
 Source that can be configured to produce any type of feature,
 useful for testing renderers.
 */

var TestSource = function (_FeatureSourceBase) {
    _inherits(TestSource, _FeatureSourceBase);

    function TestSource(source) {
        _classCallCheck(this, TestSource);

        var _this = _possibleConstructorReturn(this, (TestSource.__proto__ || Object.getPrototypeOf(TestSource)).call(this));

        _this.features = R.defaultTo([], source.features);
        return _this;
    }

    _createClass(TestSource, [{
        key: "genFeature",
        value: function genFeature(conf) {
            var feature = new _das.DASFeature();

            for (var key in conf) {
                feature[key] = conf[key];
            }
        }
    }, {
        key: "fetch",
        value: function fetch(chr, min, max, scale, types, pool, callback) {
            var features = R.forEach(this.genFeature, this.features);
            return callback(null, features, 1);
        }
    }]);

    return TestSource;
}(_sourceadapters.FeatureSourceBase);

(0, _sourceadapters.registerSourceAdapterFactory)('test-source', function (source) {
    return { features: new TestSource(source) };
});

},{"./das.js":10,"./sourceadapters.js":38,"ramda":62}],48:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2013
//
// thub.js: support for track-hub style registries
//

"use strict";

if (typeof require !== 'undefined') {
    var utils = require('./utils');
    var textXHR = utils.textXHR;
    var relativeURL = utils.relativeURL;
    var shallowCopy = utils.shallowCopy;

    var das = require('./das');
    var DASStylesheet = das.DASStylesheet;
    var DASStyle = das.DASStyle;
}

var THUB_STANZA_REGEXP = /\n\s*\n/;
var THUB_PARSE_REGEXP = /(\w+) +(.+)\n?/;
var THUB_SUBGROUP_REGEXP = /subGroup[1-9]/;

var THUB_PENNANT_PREFIX = 'http://genome.ucsc.edu/images/';

function TrackHub(url) {
    this.genomes = {};
    this.url = url;
}

function TrackHubTrack() {}

TrackHubTrack.prototype.get = function (k) {
    if (this[k]) return this[k];else if (this._parent) return this._parent.get(k);
};

function TrackHubDB(hub) {
    this.hub = hub;
}

TrackHubDB.prototype.getTracks = function (callback) {
    var thisB = this;
    if (this._tracks) {
        return callback(this._tracks);
    }

    textXHR(this.absURL, function (trackFile, err) {
        if (err) {
            return callback(null, err);
        }

        // trackFile = trackFile.replace(/\#.*/g, '');
        trackFile = trackFile.replace('\\\n', ' ');

        var tracks = [];
        var tracksById = {};
        var stanzas = trackFile.split(THUB_STANZA_REGEXP);
        for (var s = 0; s < stanzas.length; ++s) {
            var toks = stanzas[s].replace(/\#.*/g, '').split(THUB_PARSE_REGEXP);
            var track = new TrackHubTrack();
            track._db = thisB;
            for (var l = 0; l < toks.length - 2; l += 3) {
                var k = toks[l + 1],
                    v = toks[l + 2];
                if (k.match(THUB_SUBGROUP_REGEXP)) {
                    if (!track.subgroups) track.subgroups = {};
                    var sgtoks = v.split(/\s/);
                    var sgtag = sgtoks[0];
                    var sgrecord = { name: sgtoks[1], tags: [], titles: [] };
                    for (var sgti = 2; sgti < sgtoks.length; ++sgti) {
                        var grp = sgtoks[sgti].split(/=/);
                        sgrecord.tags.push(grp[0]);
                        sgrecord.titles.push(grp[1]);
                    }
                    track.subgroups[sgtag] = sgrecord;
                } else if (k === 'subGroups') {
                    var sgtoks = v.split(/(\w+)=(\w+)/);
                    track.sgm = {};
                    for (var sgti = 0; sgti < sgtoks.length - 2; sgti += 3) {
                        track.sgm[sgtoks[sgti + 1]] = sgtoks[sgti + 2];
                    }
                } else {
                    track[toks[l + 1]] = toks[l + 2];
                }
            }

            if (track.track && (track.type || track.container || track.view || track.bigDataUrl)) {
                tracks.push(track);
                tracksById[track.track] = track;
            } else {
                // console.log('skipping ', track);
            }
        }

        var toplevels = [];
        var composites = [];
        for (var ti = 0; ti < tracks.length; ++ti) {
            var track = tracks[ti];
            var top = true;
            if (track.parent) {
                var ptoks = track.parent.split(/\s+/);
                var parent = tracksById[ptoks[0]];
                if (parent) {
                    track._parent = parent;

                    if (!parent.children) parent.children = [];
                    parent.children.push(track);

                    if (parent) top = false;
                } else {
                    console.log("Couldn't find parent " + ptoks[0] + '(' + track.parent + ')');
                }
            }
            if (track.compositeTrack) {
                composites.push(track);
            } else if (top) {
                toplevels.push(track);
            }
        }

        for (var ci = 0; ci < composites.length; ++ci) {
            var comp = composites[ci];
            if (!comp.children) continue;

            var parentOfViews = false;
            for (var ki = 0; ki < comp.children.length; ++ki) {
                var k = comp.children[ki];
                if (k.view) {
                    k.shortLabel = comp.shortLabel + ": " + k.shortLabel;
                    toplevels.push(k);
                    parentOfViews = true;
                }
            }
            if (!parentOfViews) toplevels.push(comp);
        }

        thisB._tracks = toplevels;
        return callback(thisB._tracks, null);
    }, { credentials: this.credentials, salt: true });
};

function connectTrackHub(hubURL, callback, opts) {
    opts = opts || {};
    opts.salt = true;

    textXHR(hubURL, function (hubFile, err) {
        if (err) {
            return callback(null, err);
        }

        var toks = hubFile.split(THUB_PARSE_REGEXP);
        var hub = new TrackHub(hubURL);
        if (opts.credentials) {
            hub.credentials = opts.credentials;
        }
        for (var l = 0; l < toks.length - 2; l += 3) {
            hub[toks[l + 1]] = toks[l + 2];
        }

        if (hub.genomesFile) {
            var genURL = relativeURL(hubURL, hub.genomesFile);
            textXHR(genURL, function (genFile, err) {
                if (err) {
                    return callback(null, err);
                }

                var stanzas = genFile.split(THUB_STANZA_REGEXP);
                for (var s = 0; s < stanzas.length; ++s) {
                    var toks = stanzas[s].split(THUB_PARSE_REGEXP);
                    var gprops = new TrackHubDB(hub);
                    if (opts.credentials) {
                        gprops.credentials = opts.credentials;
                    }

                    for (var l = 0; l < toks.length - 2; l += 3) {
                        gprops[toks[l + 1]] = toks[l + 2];
                    }

                    if (gprops.twoBitPath) {
                        gprops.twoBitPath = relativeURL(genURL, gprops.twoBitPath);
                    }

                    if (gprops.genome && gprops.trackDb) {
                        gprops.absURL = relativeURL(genURL, gprops.trackDb);
                        hub.genomes[gprops.genome] = gprops;
                    }
                }

                callback(hub);
            }, opts);
        } else {
            callback(null, 'No genomesFile');
        }
    }, opts);
}

TrackHubTrack.prototype.toDallianceSource = function () {
    var source = {
        name: this.shortLabel,
        desc: this.longLabel
    };
    if (this._db.mapping) {
        source.mapping = this._db.mapping;
    }

    var pennantIcon = this.get('pennantIcon');
    if (pennantIcon) {
        var ptoks = pennantIcon.split(/\s+/);
        source.pennant = THUB_PENNANT_PREFIX + ptoks[0];
    }

    var searchTrix = this.get('searchTrix');
    if (searchTrix) {
        source.trixURI = relativeURL(this._db.absURL, searchTrix);
    }

    if (this.container == 'multiWig') {
        source.merge = 'concat';
        source.overlay = [];
        var children = this.children || [];
        source.style = [];
        source.noDownsample = true;

        for (var ci = 0; ci < children.length; ++ci) {
            var ch = children[ci];
            var cs = ch.toDallianceSource();
            source.overlay.push(cs);

            if (cs.style) {
                for (var si = 0; si < cs.style.length; ++si) {
                    var style = cs.style[si];
                    style.method = ch.shortLabel; // FIXME
                    if (this.aggregate == 'transparentOverlay') style.style.ALPHA = 0.5;
                    source.style.push(style);
                }
            }
        }
        return source;
    } else {
        var type = this.type;
        if (!type) {
            var p = this;
            while (p._parent && !p.type) {
                p = p._parent;
            }
            type = p.type;
        }
        if (!type) return;
        var typeToks = type.split(/\s+/);
        if (typeToks[0] == 'bigBed' && this.bigDataUrl) {
            var bedTokens = typeToks[1] | 0;
            var bedPlus = typeToks[2] == '+';

            source.bwgURI = relativeURL(this._db.absURL, this.bigDataUrl);
            source.style = this.bigbedStyles();
            if (this._db.credentials) {
                source.credentials = true;
            }
            if (bedTokens >= 12 && bedPlus) source.collapseSuperGroups = true;
            return source;
        } else if (typeToks[0] == 'bigWig' && this.bigDataUrl) {
            source.bwgURI = relativeURL(this._db.absURL, this.bigDataUrl);
            source.style = this.bigwigStyles();
            source.noDownsample = true; // FIXME seems like a blunt instrument...

            if (this.yLineOnOff && this.yLineOnOff == 'on') {
                source.quantLeapThreshold = this.yLineMark !== undefined ? 1.0 * this.yLineMark : 0.0;
            }

            if (this._db.credentials) {
                source.credentials = true;
            }

            return source;
        } else if (typeToks[0] == 'bam' && this.bigDataUrl) {
            source.bamURI = relativeURL(this._db.absURL, this.bigDataUrl);
            if (this._db.credentials) {
                source.credentials = true;
            }
            return source;
        } else if (typeToks[0] == 'vcfTabix' && this.bigDataUrl) {
            source.uri = relativeURL(this._db.absURL, this.bigDataUrl);
            source.tier_type = 'tabix';
            source.payload = 'vcf';
            if (this._db.credentials) {
                source.credentials = true;
            }
            return source;
        } else {
            console.log('Unsupported ' + this.type);
        }
    }
};

TrackHubTrack.prototype.bigwigStyles = function () {
    var type = this.type;
    if (!type) {
        var p = this;
        while (p._parent && !p.type) {
            p = p._parent;
        }
        type = p.type;
    }
    if (!type) return;
    var typeToks = type.split(/\s+/);

    var min, max;
    if (typeToks.length >= 3) {
        min = 1.0 * typeToks[1];
        max = 1.0 * typeToks[2];
    }

    var height;
    if (this.maxHeightPixels) {
        var mhpToks = this.maxHeightPixels.split(/:/);
        if (mhpToks.length == 3) {
            height = mhpToks[1] | 0;
        } else {
            console.log('maxHeightPixels should be of the form max:default:min');
        }
    }

    var gtype = 'bars';
    if (this.graphTypeDefault) {
        gtype = this.graphTypeDefault;
    }

    var color = 'black';
    var altColor = null;
    if (this.color) {
        color = 'rgb(' + this.color + ')';
    }
    if (this.altColor) {
        altColor = 'rgb(' + this.altColor + ')';
    }

    var stylesheet = new DASStylesheet();
    var wigStyle = new DASStyle();
    if (gtype == 'points') {
        wigStyle.glyph = 'POINT';
    } else {
        wigStyle.glyph = 'HISTOGRAM';
    }

    if (altColor) {
        wigStyle.COLOR1 = color;
        wigStyle.COLOR2 = altColor;
    } else {
        wigStyle.BGCOLOR = color;
    }
    wigStyle.HEIGHT = height || 30;
    if (min || max) {
        wigStyle.MIN = min;
        wigStyle.MAX = max;
    }
    stylesheet.pushStyle({ type: 'default' }, null, wigStyle);
    return stylesheet.styles;
};

TrackHubTrack.prototype.bigbedStyles = function () {
    var itemRgb = ('' + this.get('itemRgb')).toLowerCase() == 'on';
    var visibility = this.get('visibility') || 'full';
    var color = this.get('color');
    if (color) color = 'rgb(' + color + ')';else color = 'blue';

    var stylesheet = new DASStylesheet();
    var wigStyle = new DASStyle();
    wigStyle.glyph = 'BOX';
    wigStyle.FGCOLOR = 'black';
    wigStyle.BGCOLOR = color;
    wigStyle.HEIGHT = visibility == 'full' || visibility == 'pack' ? 12 : 8;
    wigStyle.BUMP = visibility == 'full' || visibility == 'pack';
    wigStyle.LABEL = visibility == 'full' || visibility == 'pack';
    wigStyle.ZINDEX = 20;
    if (itemRgb) wigStyle.BGITEM = true;

    var cbs = this.get('colorByStrand');
    if (cbs) {
        var cbsToks = cbs.split(/\s+/);

        var plus = shallowCopy(wigStyle);
        plus.BGCOLOR = 'rgb(' + cbsToks[0] + ')';
        stylesheet.pushStyle({ type: 'bigbed', orientation: '+' }, null, plus);

        var minus = shallowCopy(wigStyle);
        minus.BGCOLOR = 'rgb(' + cbsToks[1] + ')';
        stylesheet.pushStyle({ type: 'bigbed', orientation: '-' }, null, minus);
    } else {
        stylesheet.pushStyle({ type: 'bigbed' }, null, wigStyle);
    }

    var tlStyle = new DASStyle();
    tlStyle.glyph = 'BOX';
    tlStyle.FGCOLOR = 'black';
    if (itemRgb) tlStyle.BGITEM = true;
    tlStyle.BGCOLOR = 'red';
    tlStyle.HEIGHT = 10;
    tlStyle.BUMP = true;
    tlStyle.ZINDEX = 20;
    stylesheet.pushStyle({ type: 'translation' }, null, tlStyle);

    var tsStyle = new DASStyle();
    tsStyle.glyph = 'BOX';
    tsStyle.FGCOLOR = 'black';
    tsStyle.BGCOLOR = 'white';
    tsStyle.HEIGHT = 10;
    tsStyle.ZINDEX = 10;
    tsStyle.BUMP = true;
    tsStyle.LABEL = true;
    stylesheet.pushStyle({ type: 'transcript' }, null, tsStyle);

    return stylesheet.styles;
};

function THUB_COMPARE(g, h) {
    if (g.priority && h.priority) {
        return 1.0 * g.priority - 1.0 * h.priority;
    } else if (g.priority) {
        return 1;
    } else if (h.priority) {
        return -1;
    } else {
        return g.shortLabel.localeCompare(h.shortLabel);
    }
}

if (typeof module !== 'undefined') {
    module.exports = {
        connectTrackHub: connectTrackHub,
        THUB_COMPARE: THUB_COMPARE
    };
}

},{"./das":10,"./utils":55}],49:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2013
//
// tier-actions.js
//

"use strict";

if (typeof require !== 'undefined') {
    var browser = require('./cbrowser');
    var Browser = browser.Browser;

    var utils = require('./utils');
    var shallowCopy = utils.shallowCopy;
}

Browser.prototype.mergeSelectedTiers = function () {
    var sources = [];
    var styles = [];

    for (var sti = 0; sti < this.selectedTiers.length; ++sti) {
        var tier = this.tiers[this.selectedTiers[sti]];
        sources.push(shallowCopy(tier.dasSource));
        var ss = tier.stylesheet.styles;
        for (var si = 0; si < ss.length; ++si) {
            var sh = ss[si];
            var nsh = shallowCopy(sh);
            nsh.method = tier.dasSource.name.replace(/[()+*?]/g, '\\$&');
            nsh._methodRE = null;
            nsh.style = shallowCopy(sh.style);
            if (nsh.style.ZINDEX === undefined) nsh.style.ZINDEX = sti;

            if (tier.forceMin) {
                nsh.style.MIN = tier.forceMin;
            }
            if (tier.forceMax) {
                nsh.style.MAX = tier.forceMax;
            }

            styles.push(nsh);
        }
    }

    this.addTier({ name: 'Merged',
        merge: 'concat',
        overlay: sources,
        noDownsample: true,
        style: styles });

    this.setSelectedTier(this.tiers.length - 1);
};

},{"./cbrowser":6,"./utils":55}],50:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2013
//
// tier-edit.js
//

"use strict";

if (typeof require !== 'undefined') {
    var browser = require('./cbrowser');
    var Browser = browser.Browser;

    var utils = require('./utils');
    var makeElement = utils.makeElement;

    var das = require('./das');
    var isDasBooleanTrue = das.isDasBooleanTrue;
    var isDasBooleanNotFalse = das.isDasBooleanNotFalse;
    var copyStylesheet = das.copyStylesheet;

    var color = require('./color');
    var dasColourForName = color.dasColourForName;

    var sourceDataURI = require('./sourcecompare').sourceDataURI;
}

var __dalliance_smallGlyphs = {
    DOT: true,
    EX: true,
    STAR: true,
    SQUARE: true,
    CROSS: true,
    TRIANGLE: true,
    PLIMSOLL: true
};

Browser.prototype.openTierPanel = function (tier) {
    var b = this;

    if (this.uiMode === 'tier' && this.manipulatingTier === tier) {
        this.hideToolPanel();
        this.setUiMode('none');
    } else if (!tier) {
        return;
    } else {
        var setStyleColors = function setStyleColors(style) {
            if (style.BGGRAD) return;

            if (numColors == 1) {
                if (style.glyph == 'LINEPLOT' || __dalliance_smallGlyphs[style.glyph]) {
                    style.FGCOLOR = tierColorField.value;
                } else {
                    style.BGCOLOR = tierColorField.value;
                }
                style.COLOR1 = style.COLOR2 = style.COLOR3 = null;
            } else {
                style.COLOR1 = tierColorField.value;
                style.COLOR2 = tierColorField2.value;
                if (numColors > 2) {
                    style.COLOR3 = tierColorField3.value;
                } else {
                    style.COLOR3 = null;
                }
            }
            style._gradient = null;
            style._plusColor = tierPlusColorField.value;
            style._minusColor = tierMinusColorField.value;
        };

        var mutateStylesheet = function mutateStylesheet(visitor) {
            var nss = copyStylesheet(tier.stylesheet);
            var ssScale = tier.browser.zoomForCurrentScale();

            for (var i = 0; i < nss.styles.length; ++i) {
                var sh = nss.styles[i];
                if (sh.zoom && sh.zoom != ssScale) {
                    continue;
                }

                visitor(sh.style);
            }

            return nss;
        };

        var changeColor = function changeColor(ev) {
            tier.mergeStylesheet(mutateStylesheet(setStyleColors));
        };

        this.manipulatingTier = tier;

        var tierForm = makeElement('div', null, { className: 'tier-edit' });

        var aboutBanner = makeElement('div', "About '" + (tier.config.Name || tier.dasSource.name) + "'", null, { background: 'gray', paddingBottom: '5px', marginBottom: '5px', textAlign: 'center' });
        tierForm.appendChild(aboutBanner);

        var about = makeElement('div', [makeElement('p', tier.dasSource.desc)]);
        var aboutNotes = [];
        var sduri = sourceDataURI(tier.dasSource);
        if (sduri && (sduri.indexOf('http://') == 0 || sduri.indexOf('https://') == 0 || sduri.indexOf('//') == 0) && sduri !== 'https://www.biodalliance.org/magic/no_uri') {
            aboutNotes.push(makeElement('li', makeElement('a', '(Download data)', { href: sduri })));
        }

        if (tier.dasSource.mapping) {
            var coords = this.chains[tier.dasSource.mapping].coords;
            aboutNotes.push(makeElement('li', 'Mapped from ' + coords.auth + coords.version));
        }

        if (aboutNotes.length > 0) {
            about.appendChild(makeElement('ul', aboutNotes));
        }

        tierForm.appendChild(about);

        var semanticBanner = makeElement('span', ' (styles for current zoom level)', null, { display: 'none' });
        var editBanner = makeElement('div', ['Edit', semanticBanner], null, { background: 'gray', paddingBottom: '5px', marginBottom: '5px', textAlign: 'center' });
        tierForm.appendChild(editBanner);

        var tierNameField = makeElement('input', null, { type: 'text' });
        var tierPinnedToggle = makeElement('input', null, { type: 'checkbox', disabled: this.disablePinning });

        var glyphField = makeElement('select');
        glyphField.appendChild(makeElement('option', 'Histogram', { value: 'HISTOGRAM' }));
        glyphField.appendChild(makeElement('option', 'Line Plot', { value: 'LINEPLOT' }));
        glyphField.appendChild(makeElement('option', 'Ribbon', { value: 'GRADIENT' }));
        glyphField.appendChild(makeElement('option', 'Scatter', { value: 'SCATTER' }));

        var tierColorField = makeElement('input', null, { type: 'text', value: '#dd00dd' });
        var tierColorField2 = makeElement('input', null, { type: 'text', value: '#dd00dd' });
        var tierColorField3 = makeElement('input', null, { type: 'text', value: '#dd00dd' });

        var tierPlusColorField = makeElement('input', null, { type: 'text', value: '#ffa07a' });
        var tierMinusColorField = makeElement('input', null, { type: 'text', value: '#87cefa' });

        try {
            tierColorField.type = tierColorField2.type = tierColorField3.type = 'color';
            tierPlusColorField.type = tierMinusColorField.type = 'color';
        } catch (e) {
            // IE throws if attempt to set type to 'color'.
        }

        var tierColorFields = [tierColorField, tierColorField2, tierColorField3];
        var colorListPlus = makeElement('i', null, { className: 'fa fa-plus-circle' });
        var colorListMinus = makeElement('i', null, { className: 'fa fa-minus-circle' });
        var numColors = 1;
        var colorListElement = makeElement('td', tierColorFields);
        var setNumColors = function setNumColors(n) {
            numColors = n;
            for (var i = 0; i < n; ++i) {
                tierColorFields[i].style.display = 'block';
            }for (var i = n; i < tierColorFields.length; ++i) {
                tierColorFields[i].style.display = 'none';
            }
        };
        colorListPlus.addEventListener('click', function (ev) {
            if (numColors < 3) {
                setNumColors(numColors + 1);
                changeColor(null);
            }
        }, false);
        colorListMinus.addEventListener('click', function (ev) {
            if (numColors > 1) {
                setNumColors(numColors - 1);
                changeColor(null);
            }
        }, false);

        var tierMinField = makeElement('input', null, { type: 'text', value: '0.0' });
        var tierMaxField = makeElement('input', null, { type: 'text', value: '10.0' });
        var tierMinToggle = makeElement('input', null, { type: 'checkbox' });
        var tierMaxToggle = makeElement('input', null, { type: 'checkbox' });

        var quantLeapToggle = makeElement('input', null, { type: 'checkbox', checked: tier.quantLeapThreshold !== undefined });
        var quantLeapThreshField = makeElement('input', null, { type: 'text', value: tier.quantLeapThreshold, disabled: !quantLeapToggle.checked });

        var tierHeightField = makeElement('input', null, { type: 'text', value: '50' });

        var bumpToggle = makeElement('input', null, { type: 'checkbox' });
        var bumpLimit = makeElement('input', null, { type: 'text' });
        var labelToggle = makeElement('input', null, { type: 'checkbox' });

        var mainStyle = null;
        if (tier.stylesheet.styles.length > 0) {
            var s = mainStyle = tier.stylesheet.styles[0].style;
        }

        var refresh = function refresh() {
            if (typeof tier.config.name === 'string') tierNameField.value = tier.config.name;else tierNameField.value = tier.dasSource.name;

            tierPinnedToggle.checked = tier.pinned;

            if (tier.forceHeight) {
                tierHeightField.value = '' + tier.forceHeight;
            } else if (mainStyle && mainStyle.HEIGHT) {
                tierHeightField.value = '' + mainStyle.HEIGHT;
            }

            if (typeof tier.quantLeapThreshold == 'number') {
                quantLeapToggle.checked = true;
                quantLeapThreshField.disabled = false;
                if (parseFloat(quantLeapThreshField.value) != tier.quantLeapThreshold) quantLeapThreshField.value = tier.quantLeapThreshold;
            } else {
                quantLeapToggle.checked = false;
                quantLeapThreshField.disabled = true;
            }

            if (typeof tier.subtierMax == 'number') {
                bumpLimit.value = '' + tier.subtierMax;
            } else {
                bumpLimit.value = '' + (tier.dasSource.subtierMax || tier.browser.defaultSubtierMax);
            }

            if (tier.stylesheet.styles.length > 0) {
                var s = null;
                var isQuantitative = false,
                    isSimpleQuantitative = false;
                var ssScale = tier.browser.zoomForCurrentScale();
                var activeStyleCount = 0;

                for (var si = 0; si < tier.stylesheet.styles.length; ++si) {
                    var sh = tier.stylesheet.styles[si];
                    if (sh.zoom && sh.zoom != ssScale) {
                        continue;
                    }
                    ++activeStyleCount;
                    var ss = tier.stylesheet.styles[si].style;

                    if (!s) {
                        s = mainStyle = ss;
                    }

                    if (ss.glyph == 'LINEPLOT' || ss.glyph == 'HISTOGRAM' || ss.glyph == 'GRADIENT' || isDasBooleanTrue(ss.SCATTER)) {
                        if (!isQuantitative) s = mainStyle = ss;
                        isQuantitative = true;
                    }
                }
                if (!s) {
                    return;
                }

                semanticBanner.style.display = activeStyleCount == tier.stylesheet.styles.length ? 'none' : 'inline';

                isSimpleQuantitative = isQuantitative && activeStyleCount == 1;
                var isGradient = s.COLOR2 || s.BGGRAD;

                if (isQuantitative) {
                    minRow.style.display = 'table-row';
                    maxRow.style.display = 'table-row';
                    bumpRow.style.display = 'none';
                    labelRow.style.display = 'none';
                } else {
                    minRow.style.display = 'none';
                    maxRow.style.display = 'none';
                    bumpRow.style.display = 'table-row';
                    bumpToggle.checked = isDasBooleanTrue(mainStyle.BUMP);
                    bumpLimit.disabled = !isDasBooleanTrue(mainStyle.BUMP);
                    labelRow.style.display = 'table-row';
                    labelToggle.checked = isDasBooleanTrue(mainStyle.LABEL);
                }

                if (isSimpleQuantitative) {
                    styleRow.style.display = 'table-row';
                    colorRow.style.display = 'table-row';
                } else {
                    styleRow.style.display = 'none';
                    colorRow.style.display = 'none';
                }

                var numColors = 1;
                if (s.COLOR1) {
                    tierColorField.value = dasColourForName(s.COLOR1).toHexString();
                    if (s.COLOR2) {
                        tierColorField2.value = dasColourForName(s.COLOR2).toHexString();
                        if (s.COLOR3) {
                            tierColorField3.value = dasColourForName(s.COLOR3).toHexString();
                            numColors = 3;
                        } else {
                            numColors = 2;
                        }
                    }
                } else {
                    if (s.glyph == 'LINEPLOT' || s.glyph == 'DOT' && s.FGCOLOR) {
                        tierColorField.value = dasColourForName(s.FGCOLOR).toHexString();
                    } else if (s.BGCOLOR) {
                        tierColorField.value = dasColourForName(s.BGCOLOR).toHexString();
                    }
                }
                setNumColors(numColors);

                if (s._plusColor) tierPlusColorField.value = dasColourForName(s._plusColor).toHexString() || s._plusColor;
                if (s._minusColor) tierMinusColorField.value = dasColourForName(s._minusColor).toHexString() || s._minusColor;
                if (isDasBooleanTrue(s.SCATTER)) {
                    glyphField.value = 'SCATTER';
                } else {
                    glyphField.value = s.glyph;
                }

                var setMinValue, setMaxValue;
                if (s.MIN !== undefined) {
                    var x = parseFloat(s.MIN);
                    if (!isNaN(x)) setMinValue = x;
                }
                if (!tier.forceMinDynamic && (s.MIN !== undefined || tier.forceMin !== undefined)) {
                    tierMinToggle.checked = true;
                    tierMinField.disabled = false;
                } else {
                    tierMinToggle.checked = false;
                    tierMinField.disabled = true;
                }

                if (s.MAX !== undefined) {
                    var x = parseFloat(s.MAX);
                    if (!isNaN(x)) setMaxValue = x;
                }
                if (!tier.forceMaxDynamic && (s.MAX !== undefined || tier.forceMax !== undefined)) {
                    tierMaxToggle.checked = true;
                    tierMaxField.disabled = false;
                } else {
                    tierMaxToggle.checked = false;
                    tierMaxField.disabled = true;
                }

                if (tier.forceMin != undefined) {
                    setMinValue = tier.forceMin;
                }
                if (tier.forceMax != undefined) {
                    setMaxValue = tier.forceMax;
                }
                if (typeof setMinValue == 'number' && setMinValue != parseFloat(tierMinField.value)) {
                    tierMinField.value = setMinValue;
                }
                if (typeof setMaxValue == 'number' && setMaxValue != parseFloat(tierMaxField.value)) {
                    tierMaxField.value = setMaxValue;
                }

                var seqStyle = getSeqStyle(tier.stylesheet);
                if (seqStyle) {
                    seqMismatchRow.style.display = 'table-row';
                    seqMismatchToggle.checked = seqStyle.__SEQCOLOR === 'mismatch';
                    seqInsertRow.style.display = 'table-row';
                    seqInsertToggle.checked = isDasBooleanTrue(seqStyle.__INSERTIONS);
                    seqIgnoreQualsRow.style.display = 'table-row';
                    seqIgnoreQualsToggle.checked = seqStyle.__disableQuals === undefined || seqStyle.__disableQuals === false;
                    console.log(seqStyle.__disableQuals);
                } else {
                    seqMismatchRow.style.display = 'none';
                    seqInsertRow.style.display = 'none';
                    seqIgnoreQualsRow.style.display = 'none';
                }

                if (seqStyle && seqMismatchToggle.checked && !isSimpleQuantitative) {
                    plusStrandColorRow.style.display = 'table-row';
                    minusStrandColorRow.style.display = 'table-row';
                } else {
                    plusStrandColorRow.style.display = 'none';
                    minusStrandColorRow.style.display = 'none';
                }
            }

            if (isQuantitative && tier.browser.sourceAdapterIsCapable(tier.featureSource, 'quantLeap')) quantLeapRow.style.display = 'table-row';else quantLeapRow.style.display = 'none';
        };

        var seqMismatchToggle = makeElement('input', null, { type: 'checkbox' });
        var seqMismatchRow = makeElement('tr', [makeElement('th', 'Highlight mismatches & strands'), makeElement('td', seqMismatchToggle)]);
        seqMismatchToggle.addEventListener('change', function (ev) {
            var nss = copyStylesheet(tier.stylesheet);
            var seqStyle = getSeqStyle(nss);
            seqStyle.__SEQCOLOR = seqMismatchToggle.checked ? 'mismatch' : 'base';
            tier.mergeStylesheet(nss);
        });

        var seqInsertToggle = makeElement('input', null, { type: 'checkbox' });
        var seqInsertRow = makeElement('tr', [makeElement('th', 'Show insertions'), makeElement('td', seqInsertToggle)]);
        seqInsertToggle.addEventListener('change', function (ev) {
            var nss = copyStylesheet(tier.stylesheet);
            var seqStyle = getSeqStyle(nss);
            seqStyle.__INSERTIONS = seqInsertToggle.checked ? 'yes' : 'no';
            tier.mergeStylesheet(nss);
        });

        var seqIgnoreQualsToggle = makeElement('input', null, { type: 'checkbox' });
        var seqIgnoreQualsRow = makeElement('tr', [makeElement('th', 'Reflect base quality as base color transparency'), makeElement('td', seqIgnoreQualsToggle)]);
        seqIgnoreQualsToggle.addEventListener('change', function (ev) {
            var nss = copyStylesheet(tier.stylesheet);
            var seqStyle = getSeqStyle(nss);
            seqStyle.__disableQuals = !seqIgnoreQualsToggle.checked;
            console.log(seqStyle.__disableQuals);
            tier.mergeStylesheet(nss);
        });

        var styleRow = makeElement('tr', [makeElement('th', 'Style'), makeElement('td', glyphField)]);
        var colorRow = makeElement('tr', [makeElement('th', ['Colour(s)', colorListPlus, colorListMinus]), colorListElement]);
        var plusStrandColorRow = makeElement('tr', [makeElement('th', 'Plus Strand Color'), makeElement('td', tierPlusColorField)]);
        var minusStrandColorRow = makeElement('tr', [makeElement('th', 'Minus Strand Color'), makeElement('td', tierMinusColorField)]);
        var minRow = makeElement('tr', [makeElement('th', 'Min value'), makeElement('td', [tierMinToggle, ' ', tierMinField])]);
        var maxRow = makeElement('tr', [makeElement('th', 'Max value'), makeElement('td', [tierMaxToggle, ' ', tierMaxField])]);
        var quantLeapRow = makeElement('tr', [makeElement('th', 'Threshold leap:'), makeElement('td', [quantLeapToggle, ' ', quantLeapThreshField])]);
        var bumpRow = makeElement('tr', [makeElement('th', 'Bump overlaps'), makeElement('td', [bumpToggle, ' limit: ', bumpLimit])]);
        var labelRow = makeElement('tr', [makeElement('th', 'Label features'), makeElement('td', labelToggle)]);

        var tierTable = makeElement('table', [makeElement('tr', [makeElement('th', 'Name', {}, { width: '150px', textAlign: 'right' }), tierNameField]), makeElement('tr', [makeElement('th', 'Pin to top'), tierPinnedToggle]), makeElement('tr', [makeElement('th', 'Height'), makeElement('td', tierHeightField)]), styleRow, colorRow, plusStrandColorRow, minusStrandColorRow, minRow, maxRow, quantLeapRow, bumpRow, labelRow, seqMismatchRow, seqInsertRow, seqIgnoreQualsRow]);

        refresh();

        tierForm.appendChild(tierTable);

        var resetButton = makeElement('button', 'Reset track', { className: 'btn' }, { marginLeft: 'auto', marginRight: 'auto', display: 'block' });
        resetButton.addEventListener('click', function (ev) {
            tier.setConfig({});
        }, false);
        tierForm.appendChild(resetButton);

        tierNameField.addEventListener('input', function (ev) {
            tier.mergeConfig({ name: tierNameField.value });
        }, false);

        tierPinnedToggle.addEventListener('change', function (ev) {
            tier.mergeConfig({ pinned: tierPinnedToggle.checked });
        }, false);

        for (var ci = 0; ci < tierColorFields.length; ++ci) {
            tierColorFields[ci].addEventListener('change', changeColor, false);
        }

        tierPlusColorField.addEventListener('change', changeColor, false);
        tierMinusColorField.addEventListener('change', changeColor, false);

        glyphField.addEventListener('change', function (ev) {
            var nss = mutateStylesheet(function (ts) {
                if (glyphField.value === 'SCATTER') {
                    ts.SCATTER = true;
                    ts.glyph = 'DOT';
                    ts.SIZE = '3';
                } else {
                    ts.glyph = glyphField.value;
                    ts.SCATTER = undefined;
                }
                setStyleColors(ts);
            });
            tier.mergeStylesheet(nss);
        }, false);

        tierMinToggle.addEventListener('change', function (ev) {
            var conf = { forceMinDynamic: !tierMinToggle.checked };
            tierMinField.disabled = !tierMinToggle.checked;
            var x = parseFloat(tierMinField.value);
            if (tierMinToggle.checked && typeof x == 'number' && !isNaN(x)) conf.forceMin = parseFloat(x);
            tier.mergeConfig(conf);
        });
        tierMinField.addEventListener('input', function (ev) {
            var x = parseFloat(tierMinField.value);
            if (typeof x == 'number' && !isNaN(x)) tier.mergeConfig({ forceMin: x });
        }, false);

        tierMaxToggle.addEventListener('change', function (ev) {
            var conf = { forceMaxDynamic: !tierMaxToggle.checked };
            tierMaxField.disabled = !tierMaxToggle.checked;
            var x = parseFloat(tierMaxField.value);
            if (tierMaxToggle.checked && typeof x == 'number' && !isNaN(x)) conf.forceMax = parseFloat(x);
            tier.mergeConfig(conf);
        });
        tierMaxField.addEventListener('input', function (ev) {
            var x = parseFloat(tierMaxField.value);
            if (typeof x == 'number' && !isNaN(x)) tier.mergeConfig({ forceMax: x });
        }, false);

        tierHeightField.addEventListener('input', function (ev) {
            var x = parseFloat(tierHeightField.value);
            if (typeof x == 'number' && !isNaN(x)) tier.mergeConfig({ height: Math.min(500, x | 0) });
        }, false);

        var updateQuant = function updateQuant() {
            quantLeapThreshField.disabled = !quantLeapToggle.checked;
            if (quantLeapToggle.checked) {
                var x = parseFloat(quantLeapThreshField.value);
                if (typeof x == 'number' && !isNaN(x)) {
                    tier.mergeConfig({ quantLeapThreshold: parseFloat(quantLeapThreshField.value) });
                }
            } else {
                tier.mergeConfig({ quantLeapThreshold: null });
            }
        };
        quantLeapToggle.addEventListener('change', function (ev) {
            updateQuant();
        }, false);
        quantLeapThreshField.addEventListener('input', function (ev) {
            updateQuant();
        }, false);

        labelToggle.addEventListener('change', function (ev) {
            var nss = mutateStylesheet(function (style) {
                style.LABEL = labelToggle.checked ? 'yes' : 'no';
            });
            tier.mergeStylesheet(nss);
        }, false);
        bumpToggle.addEventListener('change', function (ev) {
            var nss = mutateStylesheet(function (style) {
                style.BUMP = bumpToggle.checked ? 'yes' : 'no';
            });
            tier.mergeStylesheet(nss);
        }, false);
        bumpLimit.addEventListener('input', function (ev) {
            var x = parseInt(bumpLimit.value);
            if (typeof x == 'number' && x > 0) {
                tier.mergeConfig({ subtierMax: x });
            }
        }, false);

        this.showToolPanel(tierForm);
        this.setUiMode('tier');

        tier.addTierListener(refresh);

        var currentScale = tier.browser.scale;
        tier.browser.addViewListener(function () {
            if (tier.browser.scale != currentScale) {
                currentScale = tier.browser.scale;
                refresh();
            }
        });
    }
};

function getSeqStyle(stylesheet) {
    for (var si = 0; si < stylesheet.styles.length; ++si) {
        var ss = stylesheet.styles[si].style;
        if (ss.glyph === '__SEQUENCE') {
            return ss;
        }
    }
}

},{"./cbrowser":6,"./color":9,"./das":10,"./sourcecompare":39,"./utils":55}],51:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2010
//
// tier.js: (try) to encapsulate the functionality of a browser tier.
//

"use strict";

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

if (typeof require !== 'undefined') {
    var utils = require('./utils');
    var makeElement = utils.makeElement;
    var removeChildren = utils.removeChildren;
    var shallowCopy = utils.shallowCopy;
    var pushnew = utils.pushnew;
    var miniJSONify = utils.miniJSONify;
    var arrayIndexOf = utils.arrayIndexOf;

    var das = require('./das');
    var DASStylesheet = das.DASStylesheet;
    var DASStyle = das.DASStyle;

    var sha1 = require('./sha1');
    var b64_sha1 = sha1.b64_sha1;

    var style = require('./style');
    var StyleFilter = style.StyleFilter;
    var StyleFilterSet = style.StyleFilterSet;

    var sc = require('./sourcecompare');
    var sourceDataURI = sc.sourceDataURI;

    var Promise = require('es6-promise').Promise;

    var sortFeatures = require('./features').sortFeatures;
}

var __tier_idSeed = 0;

function DasTier(browser, source, config, background) {
    var _this = this;

    this.config = config || {};
    this.id = 'tier' + ++__tier_idSeed;
    this.browser = browser;
    this.dasSource = shallowCopy(source);
    this.background = background;

    this.viewport = makeElement('canvas', null, { width: '' + ((this.browser.featurePanelWidth | 0) + 2000),
        height: "30",
        className: 'viewport_12_5' }, { position: 'inline-block',
        margin: '0px', border: '0px' });
    this.viewportHolder = makeElement('div', this.viewport, { className: 'viewport-holder_12_5' }, { background: background,
        position: 'absolute',
        padding: '0px', margin: '0px',
        border: '0px',
        left: '-1000px',
        minHeight: '200px' });
    this.overlay = makeElement('canvas', null, { width: +(this.browser.featurePanelWidth | 0),
        height: "30",
        className: 'viewport-overlay' });

    this.notifier = makeElement('div', '', { className: 'notifier' });
    this.notifierHolder = makeElement('div', this.notifier, { className: 'notifier-holder' });
    this.quantOverlay = makeElement('canvas', null, { width: '50', height: "56",
        className: 'quant-overlay' });

    this.removeButton = makeElement('i', null, { className: 'fa fa-times' });
    this.bumpButton = makeElement('i', null, { className: 'fa fa-plus-circle' });
    this.loaderButton = browser.makeLoader(16);
    this.loaderButton.style.display = 'none';
    this.infoElement = makeElement('div', this.dasSource.desc, { className: 'track-label-info' });
    this.nameButton = makeElement('div', [], { className: 'tier-tab' });
    this.nameButton.appendChild(this.removeButton);
    if (source.pennant) {
        this.nameButton.appendChild(makeElement('img', null, { src: source.pennant, width: '16', height: '16' }));
    } else if (source.mapping) {
        var version = null;
        if (this.browser.chains[source.mapping]) version = this.browser.chains[source.mapping].coords.version;
        if (version) this.nameButton.appendChild(makeElement('span', '' + version, null, { fontSize: '8pt', background: 'black', color: 'white', paddingLeft: '3px', paddingRight: '3px', paddingTop: '1px', paddingBottom: '1px', marginLeft: '2px', borderRadius: '10px' }));
    }
    this.nameElement = makeElement('span', source.name);
    this.nameButton.appendChild(makeElement('span', [this.nameElement, this.infoElement], { className: 'track-name-holder' }));
    this.nameButton.appendChild(this.bumpButton);
    this.nameButton.appendChild(this.loaderButton);

    this.label = makeElement('span', [this.nameButton], { className: 'btn-group track-label' });

    var classes = 'tier' + (source.className ? ' ' + source.className : '');
    this.row = makeElement('div', [this.viewportHolder, this.overlay, this.quantOverlay], { className: classes });

    if (!background) {
        this.row.style.background = 'none';
    }

    if (!browser.noDefaultLabels) this.row.appendChild(this.label);
    this.row.appendChild(this.notifierHolder);

    this.layoutHeight = 25;
    this.bumped = true;
    this.styleIdSeed = 0;
    if (source.quantLeapThreshold) {
        this.quantLeapThreshold = source.quantLeapThreshold;
    }
    if (this.dasSource.collapseSuperGroups) {
        this.bumped = false;
    }
    this.layoutWasDone = false;

    if (source.featureInfoPlugin) {
        this.addFeatureInfoPlugin(source.featureInfoPlugin);
    }

    this.initSources();

    var thisB = this;
    if (this.featureSource && this.featureSource.getDefaultFIPs && !source.noSourceFeatureInfo) {
        this.featureSource.getDefaultFIPs(function (fip) {
            if (fip) thisB.addFeatureInfoPlugin(fip);
        });
    }

    if (this.featureSource && this.featureSource.addReadinessListener) {
        this.readinessListener = function (ready) {
            thisB.notify(ready, -1);
        };
        this.featureSource.addReadinessListener(this.readinessListener);
    }

    if (this.featureSource && this.featureSource.addActivityListener) {
        this.activityListener = function (busy) {
            if (busy > 0) {
                thisB.loaderButton.style.display = 'inline-block';
            } else {
                thisB.loaderButton.style.display = 'none';
            }
            thisB.browser.pingActivity();
        };
        this.featureSource.addActivityListener(this.activityListener);
    }

    this.listeners = [];
    this.featuresLoadedListeners = [];
    this.firstRenderPromise = new Promise(function (resolve, reject) {
        return _this._resolveFirstRenderPromise = resolve;
    });
}

DasTier.prototype.destroy = function () {
    if (this.featureSource.removeReadinessListener) {
        this.featureSource.removeReadinessListener(this.readinessListener);
    }
    if (this.featureSource.removeActivityListener) {
        this.featureSource.removeActivityListener(this.activityListener);
    }
};

DasTier.prototype.setBackground = function (b) {
    this.background = b;
    this.viewportHolder.style.background = b;
};

DasTier.prototype.toString = function () {
    return this.id;
};

DasTier.prototype.addFeatureInfoPlugin = function (p) {
    if (!this.featureInfoPlugins) this.featureInfoPlugins = [];
    this.featureInfoPlugins.push(p);
};

DasTier.prototype.init = function () {
    var tier = this;
    return new Promise(function (resolve, reject) {

        if (tier.dasSource.style) {
            tier.setStylesheet({ styles: tier.dasSource.style });
            resolve(tier);
        } else {
            tier.status = 'Fetching stylesheet';
            tier.fetchStylesheet(function (ss, err) {
                if (err || !ss) {
                    tier.error = 'No stylesheet';
                    var ss = new DASStylesheet();
                    var defStyle = new DASStyle();
                    defStyle.glyph = 'BOX';
                    defStyle.BGCOLOR = 'blue';
                    defStyle.FGCOLOR = 'black';
                    ss.pushStyle({ type: 'default' }, null, defStyle);
                    tier.setStylesheet(ss);
                } else {
                    tier.setStylesheet(ss);
                    if (ss.geneHint) {
                        tier.dasSource.collapseSuperGroups = true;
                        tier.bumped = false;
                        tier.updateLabel();
                    }
                    tier._updateFromConfig();
                }
                resolve(tier);
            });
        }
    });
};

DasTier.prototype.setStylesheet = function (ss) {
    this.baseStylesheet = shallowCopy(ss);
    for (var si = 0; si < this.baseStylesheet.styles.length; ++si) {
        var sh = this.baseStylesheet.styles[si] = shallowCopy(this.baseStylesheet.styles[si]);
        sh._methodRE = sh._labelRE = sh._typeRE = null;
        sh.style = shallowCopy(sh.style);
        sh.style.id = 'style' + ++this.styleIdSeed;
    }
    this.baseStylesheetValidity = b64_sha1(miniJSONify(this.baseStylesheet));
    this._updateFromConfig();
};

DasTier.prototype.getSource = function () {
    return this.featureSource;
};

DasTier.prototype.getDesiredTypes = function (scale) {
    var sfs = this.getActiveStyleFilters(scale);
    if (sfs) return sfs.typeList();
};

DasTier.prototype.getActiveStyleFilters = function (scale) {
    var ssScale = this.browser.zoomForCurrentScale();

    if (this.stylesheet) {
        var styles = new StyleFilterSet();
        var ss = this.stylesheet.styles;
        for (var si = 0; si < ss.length; ++si) {
            var sh = ss[si];
            if (!sh.zoom || sh.zoom == ssScale) {
                styles.add(new StyleFilter(sh.type, sh.method, sh.label));
            }
        }
        return styles;
    }
};

DasTier.prototype.needsSequence = function (scale) {
    var sourceConfigNeedsSeq = function sourceConfigNeedsSeq(s) {
        if (s.bamURI || s.bamBlob || s.bwgURI || s.bwgBlob) {
            return true;
        } else if (s.overlay) {
            return s.overlay.some(sourceConfigNeedsSeq);
        } else {
            return false;
        }
    };

    if (this.sequenceSource && scale < 5) {
        return true;
    } else if (sourceConfigNeedsSeq(this.dasSource) && scale < 20) {
        return true;
    }
    return false;
};

DasTier.prototype.setFeatures = function (chr, coverage, scale, features, sequence) {
    this.currentFeatures = features;
    this.currentSequence = sequence;
    this.knownChr = chr;
    this.knownCoverage = coverage;

    // only notify features loaded, if they are valid
    if (features) {
        sortFeatures(this);
        this.notifyFeaturesLoaded();
    }
};

DasTier.prototype.draw = function () {
    console.log("Use browser.getTierRenderer(tier).drawTier(tier)");
};

DasTier.prototype.findNextFeature = function (chr, pos, dir, fedge, callback) {
    if (this.quantLeapThreshold) {
        var width = this.browser.viewEnd - this.browser.viewStart + 1;
        pos = pos + width * dir / 2 | 0;
        this.featureSource.quantFindNextFeature(chr, pos, dir, this.quantLeapThreshold, callback);
    } else {
        if (this.knownCoverage && pos >= this.knownCoverage.min() && pos <= this.knownCoverage.max()) {
            if (this.currentFeatures) {
                var bestFeature = null;
                for (var fi = 0; fi < this.currentFeatures.length; ++fi) {
                    var f = this.currentFeatures[fi];
                    if (!f.min || !f.max) {
                        continue;
                    }
                    if (f.parents && f.parents.length > 0) {
                        continue;
                    }
                    if (dir < 0) {
                        if (fedge == 1 && f.max >= pos && f.min < pos) {
                            if (!bestFeature || f.min > bestFeature.min || f.min == bestFeature.min && f.max < bestFeature.max) {
                                bestFeature = f;
                            }
                        } else if (f.max < pos) {
                            if (!bestFeature || f.max > bestFeature.max || f.max == bestFeature.max && f.min < bestFeature.min || f.min == bestFeature.mmin && bestFeature.max >= pos) {
                                bestFeature = f;
                            }
                        }
                    } else {
                        if (fedge == 1 && f.min <= pos && f.max > pos) {
                            if (!bestFeature || f.max < bestFeature.max || f.max == bestFeature.max && f.min > bestFeature.min) {
                                bestFeature = f;
                            }
                        } else if (f.min > pos) {
                            if (!bestFeature || f.min < bestFeature.min || f.min == bestFeature.min && f.max > bestFeature.max || f.max == bestFeature.max && bestFeature.min <= pos) {
                                bestFeature = f;
                            }
                        }
                    }
                }
                if (bestFeature) {
                    return callback(bestFeature);
                }
                if (dir < 0) {
                    pos = this.browser.knownSpace.min;
                } else {
                    pos = this.browser.knownSpace.max;
                }
            }
        }

        this.trySourceFNF(chr, pos, dir, callback);
    }
};

DasTier.prototype.trySourceFNF = function (chr, pos, dir, callback) {
    var self = this;
    this.featureSource.findNextFeature(chr, pos, dir, function (feature) {
        if (!feature) callback(feature);

        var ss = self.browser.getSequenceSource();
        if (!ss) // We're probably in trouble, but return anyway.
            callback(feature);

        ss.getSeqInfo(feature.segment, function (si) {
            if (si) callback(feature);else self.trySourceFNF(feature.segment, dir > 0 ? 10000000000 : 0, dir, callback);
        });
    });
};

DasTier.prototype.updateLabel = function () {
    this.bumpButton.className = this.bumped ? 'fa fa-minus-circle' : 'fa fa-plus-circle';
    if (this.dasSource.collapseSuperGroups) {
        this.bumpButton.style.display = 'inline-block';
    } else {
        this.bumpButton.style.display = 'none';
    }
};

DasTier.prototype.updateHeight = function () {
    this.currentHeight = Math.max(Math.max(this.layoutHeight, this.label.clientHeight + 2), this.browser.minTierHeight);
    this.row.style.height = '' + this.currentHeight + 'px';
    this.browser.updateHeight();
};

DasTier.prototype.drawOverlay = function () {
    var t = this;
    var b = this.browser;
    var retina = b.retina && window.devicePixelRatio > 1;

    t.overlay.height = t.viewport.height;
    t.overlay.width = retina ? b.featurePanelWidth * 2 : b.featurePanelWidth;

    var g = t.overlay.getContext('2d');
    if (retina) {
        g.scale(2, 2);
    }

    var origin = b.viewStart;
    var visStart = b.viewStart;
    var visEnd = b.viewEnd;

    if (this.overlayLabelCanvas) {
        var offset = (this.glyphCacheOrigin - this.browser.viewStart) * this.browser.scale;
        g.save();
        g.translate(offset, 0);
        var drawStart = -offset + 2;
        if (this.dasSource.tierGroup) drawStart += 15;
        this.overlayLabelCanvas.draw(g, drawStart, b.featurePanelWidth - offset);
        g.restore();
    }

    for (var hi = 0; hi < b.highlights.length; ++hi) {
        var h = b.highlights[hi];
        if ((h.chr === b.chr || h.chr === 'chr' + b.chr) && h.min < visEnd && h.max > visStart) {
            g.globalAlpha = b.defaultHighlightAlpha;
            g.fillStyle = b.defaultHighlightFill;
            g.fillRect((h.min - origin) * b.scale, 0, (h.max - h.min) * b.scale, t.overlay.height);
        }
    }

    // t.oorigin = b.viewStart;
    t.overlay.style.width = b.featurePanelWidth;
    t.overlay.style.height = t.viewport.style.height;
    t.overlay.style.left = '0px';
};

DasTier.prototype.updateStatus = function (status) {
    var self = this;
    if (status) {
        this.status = status;
        this._notifierToStatus();
        var sd = sourceDataURI(this.dasSource);
        if (window.location.protocol === 'https:' && sourceDataURI(this.dasSource).indexOf('http:') == 0 && !this.checkedHTTP) {
            this.checkedHTTP = true;
            this.browser.canFetchPlainHTTP().then(function (can) {
                if (!can) {
                    self.warnHTTP = true;
                    self._notifierToStatus();
                }
            });
        }
    } else {
        if (this.status) {
            this.status = null;
            this._notifierToStatus();
        }
    }
};

DasTier.prototype.notify = function (message, timeout) {
    if (typeof timeout !== 'number') timeout = 2000;

    if (this.notifierFadeTimeout) {
        clearTimeout(this.notifierFadeTimeout);
        this.notifierFadeTimeout = null;
    }

    if (message) {
        this._notifierOn(message);
        if (timeout > 0) {
            var thisB = this;
            this.notifierFadeTimeout = setTimeout(function () {
                thisB._notifierToStatus();
            }, timeout);
        }
    } else {
        this._notifierToStatus();
    }
};

DasTier.prototype._notifierOn = function (message, warnHTTP) {
    removeChildren(this.notifier);
    if (warnHTTP) {
        this.notifier.appendChild(makeElement('span', [makeElement('a', '[HTTP Warning] ', { href: this.browser.httpWarningURL, target: "_blank" }), message]));
    } else {
        this.notifier.textContent = message;
    }
    this.notifier.style.opacity = 0.8;
};

DasTier.prototype._notifierOff = function () {
    this.notifier.style.opacity = 0;
};

DasTier.prototype._notifierToStatus = function () {
    if (this.status) {
        this._notifierOn(this.status, this.warnHTTP);
    } else {
        this._notifierOff();
    }
};

DasTier.prototype.setConfig = function (config) {
    this.config = config || {};
    this._updateFromConfig();
    this.notifyTierListeners();
};

DasTier.prototype.mergeStylesheet = function (newStyle) {
    this.mergeConfig({
        stylesheet: newStyle,
        stylesheetValidity: this.baseStylesheetValidity
    });
};

DasTier.prototype.mergeConfig = function (newConfig) {
    for (var k in newConfig) {
        this.config[k] = newConfig[k];
    }
    this._updateFromConfig();
    this.notifyTierListeners();
};

DasTier.prototype._updateFromConfig = function () {
    var needsRefresh = false;
    var needsReorder = false;

    if (typeof this.config.name === 'string') this.nameElement.textContent = this.config.name;else this.nameElement.textContent = this.dasSource.name;

    var wantedHeight = this.config.height || this.dasSource.forceHeight;
    if (wantedHeight != this.forceHeight) {
        this.forceHeight = wantedHeight;
        needsRefresh = true;
    }

    if (this.forceMinDynamic != this.config.forceMinDynamic) {
        this.forceMinDynamic = this.config.forceMinDynamic;
        needsRefresh = true;
    }

    var forceMin = this.config.forceMin != undefined ? this.config.forceMin : this.dasSource.forceMin;
    if (this.forceMin != forceMin) {
        this.forceMin = forceMin;
        needsRefresh = true;
    }

    if (this.forceMaxDynamic != this.config.forceMaxDynamic) {
        this.forceMaxDynamic = this.config.forceMaxDynamic;
        needsRefresh = true;
    }

    var forceMax = this.config.forceMax != undefined ? this.config.forceMax : this.dasSource.forceMax;
    if (this.forceMax != forceMax) {
        this.forceMax = forceMax;
        needsRefresh = true;
    }

    var quantLeapThreshold = null;
    if (this.config.quantLeapThreshold !== undefined) quantLeapThreshold = this.config.quantLeapThreshold;else if (this.dasSource.quantLeapThreshold !== undefined) quantLeapThreshold = this.dasSource.quantLeapThreshold;
    if (quantLeapThreshold != this.quantLeapThreshold) {
        this.quantLeapThreshold = quantLeapThreshold;
        needsRefresh = true;
    }

    // Possible FIXME -- are there cases where style IDs need to be reassigned?
    var stylesheet = null;
    if (this.config.stylesheetValidity == this.baseStylesheetValidity) stylesheet = this.config.stylesheet;
    stylesheet = stylesheet || this.baseStylesheet;
    if (this.stylesheet !== stylesheet) {
        this.stylesheet = stylesheet;
        needsRefresh = true;
    }

    var wantedPinned = this.config.pinned !== undefined ? this.config.pinned : this.dasSource.pinned;
    if (wantedPinned !== this.pinned) {
        this.pinned = wantedPinned;
        needsReorder = true;
    }

    var wantedSubtierMax = _typeof(this.config.subtierMax === 'number') ? this.config.subtierMax : this.dasSource.subtierMax || this.browser.defaultSubtierMax;
    if (wantedSubtierMax != this.subtierMax) {
        this.subtierMax = wantedSubtierMax;
        needsRefresh = true;
    }

    var wantedBumped;
    if (this.config.bumped !== undefined) {
        wantedBumped = this.config.bumped;
    } else if (this.dasSource.bumped !== undefined) {
        wantedBumped = this.dasSource.bumped;
    } else {
        wantedBumped = this.dasSource.collapseSuperGroups ? false : true;
    }
    if (wantedBumped !== this.bumped) {
        this.bumped = wantedBumped;
        needsRefresh = true;
        this.updateLabel();
    }

    if (needsRefresh) this.scheduleRedraw();

    if (needsReorder) this.browser.reorderTiers();
};

DasTier.prototype.scheduleRedraw = function () {
    if (!this.currentFeatures) return;

    var tier = this;

    if (!this.redrawTimeout) {
        this.redrawTimeout = setTimeout(function () {
            sortFeatures(tier); // Some render actions mutate the results of this,
            // => need to re-run before refreshing.
            var renderer = tier.browser.getTierRenderer(tier);
            renderer.drawTier(tier);
            tier.redrawTimeout = null;
        }, 10);
    }
};
DasTier.prototype.clearTierListeners = function () {
    this.listeners = [];
};

DasTier.prototype.addTierListener = function (l) {
    this.listeners.push(l);
};

DasTier.prototype.removeTierListener = function (l) {
    var idx = arrayIndexOf(this.listeners, l);
    if (idx >= 0) {
        this.listeners.splice(idx, 1);
    }
};

DasTier.prototype.notifyTierListeners = function (change) {
    for (var li = 0; li < this.listeners.length; ++li) {
        try {
            this.listeners[li](change);
        } catch (e) {
            console.log(e);
        }
    }
    this.browser.notifyTier();
};

DasTier.prototype.clearFeaturesLoadedListeners = function () {
    this.featuresLoadedListeners = [];
};

DasTier.prototype.addFeaturesLoadedListener = function (handler) {
    this.featuresLoadedListeners.push(handler);
};

DasTier.prototype.removeFeaturesLoadedListener = function (handler) {
    var idx = arrayIndexOf(this.featuresLoadedListeners, handler);
    if (idx >= 0) {
        this.featuresLoadedListeners.splice(idx, 1);
    }
};

DasTier.prototype.notifyFeaturesLoaded = function () {
    for (var li = 0; li < this.featuresLoadedListeners.length; ++li) {
        try {
            this.featuresLoadedListeners[li].call(this);
        } catch (e) {
            console.log(e);
        }
    }
};

DasTier.prototype.wasRendered = function () {
    this._resolveFirstRenderPromise();
};

if (typeof module !== 'undefined') {
    module.exports = {
        DasTier: DasTier
    };

    // Imported for side effects
    var fd = require('./feature-draw');
}

},{"./das":10,"./feature-draw":20,"./features":22,"./sha1":37,"./sourcecompare":39,"./style":41,"./utils":55,"es6-promise":59}],52:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2010
//
// track-adder.js
//

"use strict";

if (typeof require !== 'undefined') {
    var browser = require('./cbrowser');
    var Browser = browser.Browser;

    var sc = require('./sourcecompare');
    var sourcesAreEqual = sc.sourcesAreEqual;

    var utils = require('./utils');
    var makeElement = utils.makeElement;
    var removeChildren = utils.removeChildren;
    var Observed = utils.Observed;

    var thub = require('./thub');
    var THUB_COMPARE = thub.THUB_COMPARE;
    var connectTrackHub = thub.connectTrackHub;

    var domui = require('./domui');
    var makeTreeTableSection = domui.makeTreeTableSection;

    var probeResource = require('./probe').probeResource;

    // Most of this could disappear if we leave all probing to the probe module...
    var bin = require('./bin');
    var URLFetchable = bin.URLFetchable;
    var BlobFetchable = bin.BlobFetchable;
    var readInt = bin.readInt;

    var lh3utils = require('./lh3utils');
    var unbgzf = lh3utils.unbgzf;

    var bam = require('./bam');
    var BAM_MAGIC = bam.BAM_MAGIC;
    var BAI_MAGIC = bam.BAI_MAGIC;

    var tbi = require('./tabix');
    var TABIX_MAGIC = tbi.TABIX_MAGIC;

    var das = require('./das');
    var DASSource = das.DASSource;
    var DASSegment = das.DASSegment;
    var DASRegistry = das.DASRegistry;
    var coordsMatch = das.coordsMatch;

    var EncodeFetchable = require('./encode').EncodeFetchable;
}

Browser.prototype.currentlyActive = function (source) {
    for (var ti = 0; ti < this.tiers.length; ++ti) {
        if (sourcesAreEqual(this.tiers[ti].dasSource, source)) return this.tiers[ti];
    }
    return false;
};

Browser.prototype.makeButton = function (name, tooltip) {
    var regButton = makeElement('a', name, { href: '#' });
    if (tooltip) {
        this.makeTooltip(regButton, tooltip);
    }
    return makeElement('li', regButton);
};

function activateButton(addModeButtons, which) {
    for (var i = 0; i < addModeButtons.length; ++i) {
        var b = addModeButtons[i];
        if (b === which) {
            b.classList.add('active');
        } else {
            b.classList.remove('active');
        }
    }
}

Browser.prototype.showTrackAdder = function (ev) {
    if (this.uiMode === 'add') {
        this.hideToolPanel();
        this.setUiMode('none');
        return;
    }

    var thisB = this;

    var popup = makeElement('div', null, { className: 'dalliance' }, { width: '100%', display: 'inline-block', boxSizing: 'border-box', MozBoxSizing: 'border-box', verticalAlign: 'top', paddingRight: '15px' });

    var addModeButtons = [];
    var makeStab, makeStabObserver;

    if (!this.noRegistryTabs) {
        var regButton = this.makeButton('Registry', 'Browse compatible datasources from the DAS registry');
        addModeButtons.push(regButton);

        for (var m in this.mappableSources) {
            var mf = function mf(mm) {
                var mapButton = thisB.makeButton(thisB.chains[mm].srcTag, 'Browse datasources mapped from ' + thisB.chains[mm].srcTag);
                addModeButtons.push(mapButton);
                mapButton.addEventListener('click', function (ev) {
                    ev.preventDefault();ev.stopPropagation();
                    activateButton(addModeButtons, mapButton);
                    makeStab(thisB.mappableSources[mm], mm);
                }, false);
            };mf(m);
        }
    }

    var groupedDefaults = {};
    for (var si = 0; si < this.defaultSources.length; ++si) {
        var s = this.defaultSources[si];
        var g = s.group || 'Defaults';
        if (groupedDefaults[g]) {
            groupedDefaults[g].push(s);
        } else {
            groupedDefaults[g] = [s];
        }
    }

    var makeHubButton = function makeHubButton(tdb) {
        var hub = tdb.hub;
        var hubMenuButton = makeElement('i', null, { className: 'fa fa-list-alt' }, { cursor: 'context-menu' });
        var label = hub.altLabel || hub.shortLabel || 'Unknown';
        if (tdb.mapping) label = label + ' (' + tdb.genome + ')';
        var hbContent = makeElement('span', [label, ' ', hubMenuButton]);
        var hubButton = thisB.makeButton(hbContent, hub.longLabel);
        hubButton.hub = tdb;
        addModeButtons.push(hubButton);

        hubButton.addEventListener('click', function (ev) {
            ev.preventDefault();ev.stopPropagation();
            activateButton(addModeButtons, hubButton);
            removeChildren(stabHolder);
            var loader = thisB.makeLoader(24);
            loader.style.marginLeft = 'auto';
            loader.style.marginRight = 'auto';
            loader.style.marginTop = '100px';
            stabHolder.appendChild(makeElement('div', loader, null, { textAlign: 'center' }));

            refreshButton.style.display = 'none';
            addButton.style.display = 'none';
            canButton.style.display = 'none';

            tdb.getTracks(function (tracks, err) {
                if (err) {
                    console.log(err);
                }

                makeHubStab(tracks);
            });
        }, false);

        hubMenuButton.addEventListener('click', function (ev) {
            ev.preventDefault();ev.stopPropagation();

            var removeHubItem = makeElement('li', makeElement('a', 'Remove hub'));
            var allOnItem = makeElement('li', makeElement('a', 'Enable all'));
            var allOffItem = makeElement('li', makeElement('a', 'Disable all'));
            var hubMenu = makeElement('ul', [removeHubItem, allOnItem, allOffItem], { className: 'dropdown-menu' }, { display: 'block' });

            var mx = ev.clientX,
                my = ev.clientY;
            mx += document.documentElement.scrollLeft || document.body.scrollLeft;
            my += document.documentElement.scrollTop || document.body.scrollTop;

            hubMenu.style.position = 'absolute';
            hubMenu.style.top = '' + (my + 10) + 'px';
            hubMenu.style.left = '' + (mx - 30) + 'px';
            thisB.hPopupHolder.appendChild(hubMenu);

            var clickCatcher = function clickCatcher(ev) {
                console.log('cc');
                document.body.removeEventListener('click', clickCatcher, true);
                thisB.hPopupHolder.removeChild(hubMenu);
            };
            document.body.addEventListener('click', clickCatcher, true);

            removeHubItem.addEventListener('click', function (ev) {
                for (var hi = 0; hi < thisB.hubObjects.length; ++hi) {
                    if (thisB.hubObjects[hi].absURL == tdb.absURL) {
                        thisB.hubObjects.splice(hi, 1);
                        break;
                    }
                }
                for (var hi = 0; hi < thisB.hubs.length; ++hi) {
                    var hc = thisB.hubs[hi];
                    if (typeof hc === 'string') hc = { url: hc };
                    if (hc.url == tdb.hub.url && !hc.genome || hc.genome == tdb.genome) {
                        thisB.hubs.splice(hi, 1);
                        break;
                    }
                }

                thisB.notifyTier();

                modeButtonHolder.removeChild(hubButton);
                activateButton(addModeButtons, addHubButton);
                switchToHubConnectMode();
            }, false);

            allOnItem.addEventListener('click', function (ev) {
                tdb.getTracks(function (tracks, err) {
                    if (err) {
                        console.log(err);
                    }

                    for (var ti = 0; ti < tracks.length; ++ti) {
                        var ds = tracks[ti].toDallianceSource();
                        if (!thisB.currentlyActive(ds)) {
                            thisB.addTier(ds);
                        }
                    }
                });
            }, false);

            allOffItem.addEventListener('click', function (ev) {
                tdb.getTracks(function (tracks, err) {
                    if (err) {
                        console.log(err);
                    }

                    for (var ti = 0; ti < tracks.length; ++ti) {
                        var ds = tracks[ti].toDallianceSource();
                        if (thisB.currentlyActive(ds)) {
                            thisB.removeTier(ds);
                        }
                    }
                });
            }, false);
        }, false);

        return hubButton;
    };

    var firstDefButton = null;
    var firstDefSources = null;
    for (var g in groupedDefaults) {
        (function (g, ds) {
            var defButton = thisB.makeButton(g, 'Browse the default set of data for this browser');
            defButton.addEventListener('click', function (ev) {
                ev.preventDefault();ev.stopPropagation();
                activateButton(addModeButtons, defButton);
                makeStab(new Observed(ds));
            }, false);
            addModeButtons.push(defButton);

            if (!firstDefButton || thisB.defaultTrackAdderTab && thisB.defaultTrackAdderTab == g) {
                firstDefButton = defButton;
                firstDefSources = ds;
            }
        })(g, groupedDefaults[g]);
    }
    var custButton = this.makeButton('DAS', 'Add data using the DAS protocol');
    addModeButtons.push(custButton);
    var binButton = this.makeButton('Files', 'Add data from files on disk or the web');
    addModeButtons.push(binButton);

    for (var hi = 0; hi < this.hubObjects.length; ++hi) {
        var hub = this.hubObjects[hi];
        makeHubButton(hub);
    }

    var addHubButton = this.makeButton('+', 'Connect to a new track-hub');
    addModeButtons.push(addHubButton);

    var modeButtonHolder = makeElement('ul', addModeButtons, { className: 'nav nav-tabs' }, { marginBottom: '0px' });
    popup.appendChild(modeButtonHolder);

    var custURL, custName, custCS, custQuant, custFile, custUser, custPass;
    var customMode = false;
    var dataToFinalize = null;

    var asform = makeElement('form', null, {}, { display: 'inline-block', width: '100%' });
    asform.addEventListener('submit', function (ev) {
        ev.stopPropagation();ev.preventDefault();
        doAdd();
        return false;
    }, true);
    var stabHolder = makeElement('div');
    stabHolder.style.position = 'relative';
    stabHolder.style.overflow = 'scroll';
    // stabHolder.style.height = '500px';
    asform.appendChild(stabHolder);

    var __mapping;
    var __sourceHolder;

    makeStab = function makeStab(msources, mapping) {
        refreshButton.style.display = 'none';
        addButton.style.display = 'none';
        canButton.style.display = 'none';
        if (__sourceHolder) {
            __sourceHolder.removeListener(makeStabObserver);
        }
        __mapping = mapping;
        __sourceHolder = msources;
        __sourceHolder.addListenerAndFire(makeStabObserver);
    };

    makeStabObserver = function makeStabObserver(msources) {
        customMode = false;
        var buttons = [];
        removeChildren(stabHolder);
        if (!msources) {
            stabHolder.appendChild(makeElement('p', 'Dalliance was unable to retrieve data source information from the DAS registry, please try again later'));
            return;
        }

        var stabBody = makeElement('tbody', null, { className: 'table table-striped table-condensed' }, { width: '100%' });
        var stab = makeElement('table', stabBody, { className: 'table table-striped table-condensed' }, { width: '100%', tableLayout: 'fixed' });
        var idx = 0;

        var sources = [];
        for (var i = 0; i < msources.length; ++i) {
            sources.push(msources[i]);
        }

        sources.sort(function (a, b) {
            return a.name.toLowerCase().trim().localeCompare(b.name.toLowerCase().trim());
        });

        for (var i = 0; i < sources.length; ++i) {
            var source = sources[i];
            var r = makeElement('tr');

            var bd = makeElement('td', null, {}, { width: '30px' });
            bd.style.textAlign = 'center';
            if (!source.props || source.props.cors) {
                var b = makeElement('input');
                b.type = 'checkbox';
                b.dalliance_source = source;
                b.id = 'sourcecb' + i;
                if (__mapping) {
                    b.dalliance_mapping = __mapping;
                }
                // b.checked = thisB.currentlyActive(source);
                bd.appendChild(b);
                buttons.push(b);
                b.addEventListener('change', function (ev) {
                    if (ev.target.checked) {
                        thisB.addTier(ev.target.dalliance_source);
                    } else {
                        thisB.removeTier(ev.target.dalliance_source);
                    }
                });
            } else {
                bd.appendChild(document.createTextNode('!'));
                thisB.makeTooltip(bd, makeElement('span', ["This data source isn't accessible because it doesn't support ", makeElement('a', "CORS", { href: 'http://www.w3.org/TR/cors/' }), "."]));
            }
            r.appendChild(bd);
            var ld = makeElement('label', null, { htmlFor: 'sourcecb' + i });
            ld.appendChild(document.createTextNode(source.name));
            if (source.desc && source.desc.length > 0) {
                thisB.makeTooltip(ld, source.desc);
            }
            r.appendChild(makeElement('td', ld));
            stabBody.appendChild(r);
            ++idx;
        }

        var setChecks = function setChecks() {
            for (var bi = 0; bi < buttons.length; ++bi) {
                var b = buttons[bi];
                var t = thisB.currentlyActive(b.dalliance_source);
                if (t) {
                    b.checked = true;
                } else {
                    b.checked = false;
                }
            }
        };
        setChecks();
        thisB.addTierListener(function (l) {
            setChecks();
        });

        stabHolder.appendChild(stab);
    };

    function makeHubStab(tracks) {
        refreshButton.style.display = 'none';
        addButton.style.display = 'none';
        canButton.style.display = 'none';

        customMode = false;
        removeChildren(stabHolder);

        var buttonIdSeed = 0;

        var ttab = makeElement('div', null, {}, { width: '100%' });
        var sources = [];
        for (var i = 0; i < tracks.length; ++i) {
            sources.push(tracks[i]);
        }

        sources.sort(function (a, b) {
            return a.shortLabel.toLowerCase().trim().localeCompare(b.shortLabel.toLowerCase().trim());
        });

        var groups = [];
        var tops = [];

        for (var ti = 0; ti < sources.length; ++ti) {
            var track = sources[ti];
            if (track.children && track.children.length > 0 && track.container != 'multiWig') {
                groups.push(track);
            } else {
                tops.push(track);
            }
        }
        if (tops.length > 0) {
            groups.push({
                shortLabel: 'Others',
                priority: -100000000,
                children: tops });
        }

        groups.sort(THUB_COMPARE);

        var buttons = [];
        for (var gi = 0; gi < groups.length; ++gi) {
            var group = groups[gi];
            var dg = group;
            if (!dg.dimensions && dg._parent && dg._parent.dimensions) dg = dg._parent;

            var dprops = {};
            if (dg.dimensions) {
                var dtoks = dg.dimensions.split(/(\w+)=(\w+)/);
                for (var dti = 0; dti < dtoks.length - 2; dti += 3) {
                    dprops[dtoks[dti + 1]] = dtoks[dti + 2];
                }
            }

            if (dprops.dimX && dprops.dimY) {
                var dimX = dprops.dimX,
                    dimY = dprops.dimY;
                var sgX = dg.subgroups[dimX];
                var sgY = dg.subgroups[dimY];

                var trks = {};
                for (var ci = 0; ci < group.children.length; ++ci) {
                    var child = group.children[ci];
                    var vX = child.sgm[dimX],
                        vY = child.sgm[dimY];
                    if (!trks[vX]) trks[vX] = {};
                    trks[vX][vY] = child;
                }

                var matrix = makeElement('table', null, { className: 'table table-striped table-condensed' }, { tableLayout: 'fixed' });
                {
                    var header = makeElement('tr');
                    header.appendChild(makeElement('th', null, {}, { width: '150px', height: '100px' })); // blank corner element
                    for (var si = 0; si < sgX.titles.length; ++si) {
                        var h = makeElement('th', makeElement('div', sgX.titles[si], {}, { transform: 'rotate(-60deg)',
                            transformOrigin: '0% 100%',
                            webkitTransform: 'rotate(-60deg) translate(20px,10px)',
                            webkitTransformOrigin: '0% 100%',
                            textAlign: 'left' }), {}, { width: '35px',
                            height: '100px',
                            verticalAlign: 'bottom' });
                        header.appendChild(h);
                    }
                    matrix.appendChild(header);
                }

                var mbody = makeElement('tbody', null, { className: 'table table-striped table-condensed' });
                for (var yi = 0; yi < sgY.titles.length; ++yi) {
                    var vY = sgY.tags[yi];
                    var row = makeElement('tr');
                    row.appendChild(makeElement('th', sgY.titles[yi]), {});

                    for (var xi = 0; xi < sgX.titles.length; ++xi) {
                        var vX = sgX.tags[xi];
                        var cell = makeElement('td');
                        if (trks[vX] && trks[vX][vY]) {
                            var track = trks[vX][vY];
                            var ds = track.toDallianceSource();
                            if (!ds) continue;

                            var r = makeElement('tr');
                            var bd = makeElement('td');
                            bd.style.textAlign = 'center';

                            var b = makeElement('input');
                            b.type = 'checkbox';
                            b.dalliance_source = ds;
                            if (__mapping) {
                                b.dalliance_mapping = __mapping;
                            }
                            buttons.push(b);
                            cell.appendChild(b);
                            b.addEventListener('change', function (ev) {
                                if (ev.target.checked) {
                                    thisB.addTier(ev.target.dalliance_source);
                                } else {
                                    thisB.removeTier(ev.target.dalliance_source);
                                }
                            });
                        }
                        row.appendChild(cell);
                    }
                    mbody.appendChild(row);
                }
                matrix.appendChild(mbody);
                ttab.appendChild(makeTreeTableSection(group.shortLabel, matrix, gi == 0));
            } else {
                var stabBody = makeElement('tbody', null, { className: 'table table-striped table-condensed' });
                var stab = makeElement('table', stabBody, { className: 'table table-striped table-condensed' }, { width: '100%', tableLayout: 'fixed' });
                var idx = 0;

                group.children.sort(THUB_COMPARE);
                for (var i = 0; i < group.children.length; ++i) {
                    var buttonId = 'hb' + ++buttonIdSeed;

                    var track = group.children[i];
                    var ds = track.toDallianceSource();
                    if (!ds) continue;

                    var r = makeElement('tr');
                    var bd = makeElement('td', null, {}, { width: '30px' });
                    bd.style.textAlign = 'center';

                    var b = makeElement('input');
                    b.type = 'checkbox';
                    b.dalliance_source = ds;
                    b.id = buttonId;
                    if (__mapping) {
                        b.dalliance_mapping = __mapping;
                    }
                    buttons.push(b);
                    bd.appendChild(b);
                    b.addEventListener('change', function (ev) {
                        if (ev.target.checked) {
                            thisB.addTier(ev.target.dalliance_source);
                        } else {
                            thisB.removeTier(ev.target.dalliance_source);
                        }
                    });

                    r.appendChild(bd);
                    var ld = makeElement('label', null, { htmlFor: buttonId });
                    ld.appendChild(document.createTextNode(track.shortLabel));
                    if (track.longLabel && track.longLabel.length > 0) {
                        thisB.makeTooltip(ld, track.longLabel);
                    }
                    r.appendChild(makeElement('td', ld));
                    stabBody.appendChild(r);
                    ++idx;
                }

                if (groups.length > 1 || group.shortLabel !== 'Others') {
                    ttab.appendChild(makeTreeTableSection(group.shortLabel, stab, gi == 0));
                } else {
                    ttab.appendChild(stab);
                }
            }
        }

        var setChecks = function setChecks() {
            for (var bi = 0; bi < buttons.length; ++bi) {
                var b = buttons[bi];
                var t = thisB.currentlyActive(b.dalliance_source);
                if (t) {
                    b.checked = true;
                    b.disabled = t.sequenceSource != null;
                } else {
                    b.checked = false;
                }
            }
        };
        setChecks();
        thisB.addTierListener(function (l) {
            setChecks();
        });

        stabHolder.appendChild(ttab);
    }

    if (regButton) {
        regButton.addEventListener('click', function (ev) {
            ev.preventDefault();ev.stopPropagation();
            activateButton(addModeButtons, regButton);
            makeStab(thisB.availableSources);
        }, false);
    }

    binButton.addEventListener('click', function (ev) {
        ev.preventDefault();ev.stopPropagation();
        switchToBinMode();
    }, false);
    addHubButton.addEventListener('click', function (ev) {
        ev.preventDefault();ev.stopPropagation();
        switchToHubConnectMode();
    }, false);

    function switchToBinMode() {
        activateButton(addModeButtons, binButton);
        customMode = 'bin';

        refreshButton.style.display = 'none';
        addButton.style.display = 'inline';
        canButton.style.display = 'none';

        removeChildren(stabHolder);
        var pageHolder = makeElement('div', null, {}, { paddingLeft: '10px', paddingRight: '10px' });
        pageHolder.appendChild(makeElement('h3', 'Add custom URL-based data'));
        pageHolder.appendChild(makeElement('p', ['You can add indexed binary data hosted on an web server that supports CORS (', makeElement('a', 'full details', { href: 'http://www.biodalliance.org/bin.html' }), ').  Currently supported formats are bigwig, bigbed, and indexed BAM.']));

        pageHolder.appendChild(makeElement('br'));
        pageHolder.appendChild(document.createTextNode('URL: '));
        custURL = makeElement('input', '', { size: 80, value: 'http://www.biodalliance.org/datasets/ensGene.bb' }, { width: '100%' });
        pageHolder.appendChild(custURL);

        pageHolder.appendChild(makeElement('br'));
        pageHolder.appendChild(makeElement('b', '- or -'));
        pageHolder.appendChild(makeElement('br'));
        pageHolder.appendChild(document.createTextNode('File: '));
        custFile = makeElement('input', null, { type: 'file', multiple: 'multiple' });
        pageHolder.appendChild(custFile);

        pageHolder.appendChild(makeElement('p', 'Clicking the "Add" button below will initiate a series of test queries.'));

        stabHolder.appendChild(pageHolder);
        custURL.focus();
    }

    function switchToHubConnectMode() {
        activateButton(addModeButtons, addHubButton);
        refreshButton.style.display = 'none';
        addButton.style.display = 'inline';
        canButton.style.display = 'none';

        customMode = 'hub-connect';
        refreshButton.style.visibility = 'hidden';

        removeChildren(stabHolder);

        var pageHolder = makeElement('div', null, {}, { paddingLeft: '10px', paddingRight: '10px' });
        pageHolder.appendChild(makeElement('h3', 'Connect to a track hub.'));
        pageHolder.appendChild(makeElement('p', ['Enter the top-level URL (usually points to a file called "hub.txt") of a UCSC-style track hub']));

        custURL = makeElement('input', '', { size: 120, value: 'http://www.biodalliance.org/datasets/testhub/hub.txt' }, { width: '100%' });
        pageHolder.appendChild(custURL);

        stabHolder.appendChild(pageHolder);

        custURL.focus();
    }

    custButton.addEventListener('click', function (ev) {
        ev.preventDefault();ev.stopPropagation();
        switchToCustomMode();
    }, false);

    function switchToCustomMode() {
        activateButton(addModeButtons, custButton);
        refreshButton.style.display = 'none';
        addButton.style.display = 'inline';
        canButton.style.display = 'none';

        customMode = 'das';

        removeChildren(stabHolder);

        var customForm = makeElement('div', null, {}, { paddingLeft: '10px', paddingRight: '10px' });
        customForm.appendChild(makeElement('h3', 'Add custom DAS data'));
        customForm.appendChild(makeElement('p', 'This interface is intended for adding custom or lab-specific data.  Public data can be added more easily via the registry interface.'));

        customForm.appendChild(document.createTextNode('URL: '));
        customForm.appendChild(makeElement('br'));
        custURL = makeElement('input', '', { size: 80, value: 'http://www.derkholm.net:8080/das/medipseq_reads/' }, { width: '100%' });
        customForm.appendChild(custURL);

        customForm.appendChild(makeElement('p', 'Clicking the "Add" button below will initiate a series of test queries.  If the source is password-protected, you may be prompted to enter credentials.'));
        stabHolder.appendChild(customForm);

        custURL.focus();
    }

    var addButton = makeElement('button', 'Add', { className: 'btn btn-primary' });
    addButton.addEventListener('click', function (ev) {
        ev.stopPropagation();ev.preventDefault();
        doAdd();
    }, false);

    function doAdd() {
        if (customMode) {
            if (customMode === 'das') {
                var curi = custURL.value.trim();
                if (!/^.+:\/\//.exec(curi)) {
                    curi = 'http://' + curi;
                }
                var nds = new DASSource({ name: 'temporary', uri: curi });
                tryAddDAS(nds);
            } else if (customMode === 'bin') {
                var fileList = custFile.files;

                if (fileList && fileList.length > 0) {
                    tryAddMultiple(fileList);
                } else {
                    var curi = custURL.value.trim();
                    if (!/^.+:\/\//.exec(curi)) {
                        curi = 'http://' + curi;
                    }
                    var source = { uri: curi };
                    var lcuri = curi.toLowerCase();
                    if (lcuri.indexOf("https://www.encodeproject.org/") == 0 && lcuri.indexOf("@@download") >= 0) {
                        source.transport = 'encode';
                    }
                    tryAddBin(source);
                }
            } else if (customMode === 'reset') {
                switchToCustomMode();
            } else if (customMode === 'reset-bin') {
                switchToBinMode();
            } else if (customMode === 'reset-hub') {
                switchToHubConnectMode();
            } else if (customMode === 'prompt-bai') {
                var fileList = custFile.files;
                if (fileList && fileList.length > 0 && fileList[0]) {
                    dataToFinalize.baiBlob = fileList[0];
                    completeBAM(dataToFinalize);
                } else {
                    promptForBAI(dataToFinalize);
                }
            } else if (customMode === 'prompt-tbi') {
                var fileList = custFile.files;
                if (fileList && fileList.length > 0 && fileList[0]) {
                    dataToFinalize.indexBlob = fileList[0];
                    completeTabixVCF(dataToFinalize);
                } else {
                    promptForTabix(dataToFinalize);
                }
            } else if (customMode === 'finalize' || customMode === 'finalize-bin') {
                dataToFinalize.name = custName.value;
                var m = custCS.value;
                if (m != '__default__') {
                    dataToFinalize.mapping = m;
                } else {
                    dataToFinalize.mapping = undefined;
                }
                if (custQuant) {
                    dataToFinalize.maxbins = custQuant.checked;
                }

                if (custUser.value.length > 1 && custPass.value.length > 1) {
                    dataToFinalize.xUser = custUser.value;
                    dataToFinalize.xPass = custPass.value;
                }

                thisB.addTier(dataToFinalize);

                if (customMode == 'finalize-bin') switchToBinMode();else switchToCustomMode();
            } else if (customMode === 'hub-connect') {
                var curi = custURL.value.trim();
                if (!/^.+:\/\//.exec(curi)) {
                    curi = 'http://' + curi;
                }

                tryAddHub(curi);
            } else if (customMode === 'multiple') {
                for (var mi = 0; mi < multipleSet.length; ++mi) {
                    var s = multipleSet[mi];
                    if (s.hidden) continue;

                    if (s.tier_type == 'bam' && !s.indexBlob && !s.indexUri) continue;
                    if (s.tier_type == 'tabix' && !s.indexBlob && !s.indexUri) continue;

                    var nds = makeSourceConfig(s);
                    if (nds) {
                        nds.noPersist = true;
                        thisB.addTier(nds);
                    }
                }

                switchToBinMode();
            }
        } else {
            thisB.removeAllPopups();
        }
    };

    function tryAddHub(curi, opts, retry) {
        opts = opts || {};
        for (var hi = 0; hi < thisB.hubObjects.length; ++hi) {
            var h = thisB.hubObjects[hi];
            if (h.hub.url == curi) {
                for (var bi = 0; bi < addModeButtons.length; ++bi) {
                    if (addModeButtons[bi].hub == h) {
                        activateButton(addModeButtons, addModeButtons[bi]);
                    }
                }
                h.getTracks(function (tracks, err) {
                    if (err) {
                        console.log(err);
                    }
                    makeHubStab(tracks);
                });
                return;
            }
        }

        connectTrackHub(curi, function (hub, err) {
            if (err) {
                if (!retry) {
                    return tryAddHub(curi, { credentials: true }, true);
                }
                removeChildren(stabHolder);
                stabHolder.appendChild(makeElement('h2', 'Error connecting to track hub'));
                stabHolder.appendChild(makeElement('p', err));
                customMode = 'reset-hub';
                return;
            } else {
                var bestHub = null;
                var bestHubButton = null;
                for (var genome in hub.genomes) {
                    var mapping = null;
                    var okay = false;

                    if (genome == thisB.coordSystem.ucscName) {
                        okay = true;
                    } else {
                        for (var mid in thisB.chains) {
                            var m = thisB.chains[mid];
                            if (genome == m.coords.ucscName) {
                                mapping = mid;
                                okay = true;
                            }
                        }
                    }

                    if (okay) {
                        var hc = { url: curi, genome: genome };
                        if (opts.credentials) hc.credentials = true;
                        if (mapping) {
                            hc.mapping = mapping;
                            hub.genomes[genome].mapping = mapping;
                        }
                        thisB.hubs.push(hc);
                        thisB.hubObjects.push(hub.genomes[genome]);

                        var hubButton = makeHubButton(hub.genomes[genome]);
                        modeButtonHolder.appendChild(hubButton);

                        if (!mapping || !bestHub) {
                            bestHub = hub.genomes[genome];
                            bestHubButton = hubButton;
                        }
                    }
                }

                if (bestHub) {
                    thisB.notifyTier();
                    activateButton(addModeButtons, bestHubButton);
                    bestHub.getTracks(function (tracks, err) {
                        makeHubStab(tracks);
                    });
                } else {
                    removeChildren(stabHolder);
                    stabHolder.appendChild(makeElement('h2', 'No data for this genome'));
                    stabHolder.appendChild(makeElement('p', 'This URL appears to be a valid track-hub, but it doesn\'t contain any data for the coordinate system of this browser'));
                    stabHolder.appendChild(makeElement('p', 'coordSystem.ucscName = ' + thisB.coordSystem.ucscName));
                    customMode = 'reset-hub';
                    return;
                }
            }
        }, opts);
    }

    var tryAddDAS = function tryAddDAS(nds, retry) {
        var knownSpace = thisB.knownSpace;
        if (!knownSpace) {
            alert("Can't confirm track-addition to an uninit browser.");
            return;
        }
        var tsm = Math.max(knownSpace.min, (knownSpace.min + knownSpace.max - 100) / 2) | 0;
        var testSegment = new DASSegment(knownSpace.chr, tsm, Math.min(tsm + 99, knownSpace.max));
        nds.features(testSegment, {}, function (features, status) {
            if (status) {
                if (!retry) {
                    nds.credentials = true;
                    tryAddDAS(nds, true);
                } else {
                    removeChildren(stabHolder);
                    stabHolder.appendChild(makeElement('h2', 'Custom data not found'));
                    stabHolder.appendChild(makeElement('p', 'DAS uri: ' + nds.uri + ' is not answering features requests'));
                    customMode = 'reset';
                    return;
                }
            } else {
                var nameExtractPattern = new RegExp('/([^/]+)/?$');
                var match = nameExtractPattern.exec(nds.uri);
                if (match) {
                    nds.name = match[1];
                }

                tryAddDASxSources(nds);
                return;
            }
        });
    };

    function tryAddDASxSources(nds, retry) {
        var uri = nds.uri;
        if (retry) {
            var match = /(.+)\/[^\/]+\/?/.exec(uri);
            if (match) {
                uri = match[1] + '/sources';
            }
        }
        function sqfail() {
            if (!retry) {
                return tryAddDASxSources(nds, true);
            } else {
                return addDasCompletionPage(nds);
            }
        }
        new DASRegistry(uri, { credentials: nds.credentials }).sources(function (sources) {
            if (!sources || sources.length == 0) {
                return sqfail();
            }

            var fs = null;
            if (sources.length == 1) {
                fs = sources[0];
            } else {
                for (var i = 0; i < sources.length; ++i) {
                    if (sources[i].uri === nds.uri) {
                        fs = sources[i];
                        break;
                    }
                }
            }

            var coordsDetermined = false,
                quantDetermined = false;
            if (fs) {
                nds.name = fs.name;
                nds.desc = fs.desc;
                if (fs.maxbins) {
                    nds.maxbins = true;
                } else {
                    nds.maxbins = false;
                }
                if (fs.capabilities) {
                    nds.capabilities = fs.capabilities;
                }
                quantDetermined = true;

                if (fs.coords && fs.coords.length == 1) {
                    var coords = fs.coords[0];
                    if (coordsMatch(coords, thisB.coordSystem)) {
                        coordsDetermined = true;
                    } else if (thisB.chains) {
                        for (var k in thisB.chains) {
                            if (coordsMatch(coords, thisB.chains[k].coords)) {
                                nds.mapping = k;
                                coordsDetermined = true;
                            }
                        }
                    }
                }
            }
            return addDasCompletionPage(nds, coordsDetermined, quantDetermined);
        }, function () {
            return sqfail();
        });
    }

    var makeSourceConfig = function makeSourceConfig(s) {
        var nds = { name: s.name };
        if (s.credentials) nds.credentials = s.credentials;

        if (s.mapping && s.mapping != '__default__') nds.mapping = s.mapping;

        if (s.transport) nds.transport = s.transport;

        if (s.tier_type == 'bwg') {
            if (s.blob) nds.bwgBlob = s.blob;else if (s.uri) nds.bwgURI = s.uri;
            return nds;
        } else if (s.tier_type == 'bam') {
            if (s.blob) {
                nds.bamBlob = s.blob;
                nds.baiBlob = s.indexBlob;
            } else {
                nds.bamURI = s.uri;
                nds.baiURI = s.indexUri;
            }
            return nds;
        } else if (s.tier_type == 'tabix') {
            nds.tier_type = 'tabix';
            nds.payload = s.payload;
            if (s.blob) {
                nds.blob = s.blob;
                nds.indexBlob = s.indexBlob;
            } else {
                nds.uri = s.uri;
                nds.indexUri = s.indexUri;
            }
            return nds;
        } else if (s.tier_type == 'memstore') {
            nds.tier_type = 'memstore';
            nds.payload = s.payload;
            if (s.blob) nds.blob = s.blob;else nds.uri = s.uri;
            return nds;
        }
    };

    var tryAddBin = function tryAddBin(source) {
        probeResource(source, function (source, err) {
            if (err) {
                removeChildren(stabHolder);
                var tabError = makeElement('div');
                tabError.appendChild(makeElement('h2', "Couldn't access custom data"));
                tabError.appendChild(makeElement('p', '' + err));
                stabHolder.appendChild(tabError);
                console.log(source);
                if (window.location.protocol === 'https:' && source.uri.indexOf('http:') == 0) {
                    thisB.canFetchPlainHTTP().then(function (can) {
                        if (!can) {
                            tabError.appendChild(makeElement('p', [makeElement('strong', 'HTTP warning: '), 'you may not be able to access HTTP resources from an instance of Biodalliance which you are accessing via HTTPS.', makeElement('a', '[More info]', { href: thisB.httpWarningURL, target: "_blank" })]));
                        }
                    });
                }
                customMode = 'reset-bin';
            } else {
                var nds = makeSourceConfig(source);
                if (source.tier_type == 'bam') {
                    return completeBAM(nds);
                } else if (source.tier_type == 'tabix') {
                    return completeTabixVCF(nds);
                } else {
                    return addDasCompletionPage(nds, false, false, true);
                }
            }
        });
    };

    function promptForBAI(nds) {
        refreshButton.style.display = 'none';
        addButton.style.display = 'inline';
        canButton.style.display = 'inline';

        removeChildren(stabHolder);
        customMode = 'prompt-bai';
        stabHolder.appendChild(makeElement('h2', 'Select an index file'));
        stabHolder.appendChild(makeElement('p', 'Dalliance requires a BAM index (.bai) file when displaying BAM data.  These normally accompany BAM files.  For security reasons, web applications like Dalliance can only access local files which you have explicity selected.  Please use the file chooser below to select the appropriate BAI file'));

        stabHolder.appendChild(document.createTextNode('Index file: '));
        custFile = makeElement('input', null, { type: 'file' });
        stabHolder.appendChild(custFile);
        dataToFinalize = nds;
    }

    function promptForTabix(nds) {
        refreshButton.style.display = 'none';
        addButton.style.display = 'inline';
        canButton.style.display = 'inline';

        removeChildren(stabHolder);
        customMode = 'prompt-tbi';
        stabHolder.appendChild(makeElement('h2', 'Select an index file'));
        stabHolder.appendChild(makeElement('p', 'Dalliance requires a Tabix index (.tbi) file when displaying VCF data.  For security reasons, web applications like Dalliance can only access local files which you have explicity selected.  Please use the file chooser below to select the appropriate BAI file'));

        stabHolder.appendChild(document.createTextNode('Index file: '));
        custFile = makeElement('input', null, { type: 'file' });
        stabHolder.appendChild(custFile);
        dataToFinalize = nds;
    }

    function completeBAM(nds) {
        var indexF;
        if (nds.baiBlob) indexF = new BlobFetchable(nds.baiBlob);else if (nds.transport == 'encode') indexF = new EncodeFetchable(nds.bamURI + '.bai');else indexF = new URLFetchable(nds.bamURI + '.bai', { credentials: nds.credentials });

        indexF.slice(0, 256).fetch(function (r) {
            var hasBAI = false;
            if (r) {
                var ba = new Uint8Array(r);
                var magic2 = readInt(ba, 0);
                hasBAI = magic2 == BAI_MAGIC;
            }
            if (hasBAI) {
                return addDasCompletionPage(nds, false, false, true);
            } else {
                return binFormatErrorPage('You have selected a valid BAM file, but a corresponding index (.bai) file was not found.  Please index your BAM (samtools index) and place the BAI file in the same directory');
            }
        });
    }

    function completeTabixVCF(nds) {
        var indexF;
        if (nds.indexBlob) {
            indexF = new BlobFetchable(nds.indexBlob);
        } else {
            indexF = new URLFetchable(nds.uri + '.tbi');
        }
        indexF.slice(0, 1 << 16).fetch(function (r) {
            var hasTabix = false;
            if (r) {
                var ba = new Uint8Array(r);
                if (ba[0] == 31 || ba[1] == 139) {
                    var unc = unbgzf(r);
                    ba = new Uint8Array(unc);
                    var m2 = readInt(ba, 0);
                    hasTabix = m2 == TABIX_MAGIC;
                }
            }
            if (hasTabix) {
                return addDasCompletionPage(nds, false, false, true);
            } else {
                return binFormatErrorPage('You have selected a valid VCF file, but a corresponding index (.tbi) file was not found.  Please index your VCF ("tabix -p vcf -f myfile.vcf.gz") and place the .tbi file in the same directory');
            }
        });
    }

    function binFormatErrorPage(message) {
        refreshButton.style.display = 'none';
        addButton.style.display = 'inline';
        canButton.style.display = 'inline';

        removeChildren(stabHolder);
        message = message || 'Custom data format not recognized';
        stabHolder.appendChild(makeElement('h2', 'Error adding custom data'));
        stabHolder.appendChild(makeElement('p', message));
        stabHolder.appendChild(makeElement('p', 'Currently supported formats are bigBed, bigWig, and BAM.'));
        customMode = 'reset-bin';
        return;
    }

    var addDasCompletionPage = function addDasCompletionPage(nds, coordsDetermined, quantDetermined, quantIrrelevant) {
        refreshButton.style.display = 'none';
        addButton.style.display = 'inline';
        canButton.style.display = 'inline';

        removeChildren(stabHolder);
        stabHolder.appendChild(makeElement('h2', 'Add custom data: step 2'));
        stabHolder.appendChild(document.createTextNode('Label: '));
        custName = makeElement('input', '', { value: nds.name });
        stabHolder.appendChild(custName);

        // stabHolder.appendChild(document.createTextNode('User: '));
        custUser = makeElement('input', '');
        // stabHolder.appendChild(custUser);
        //stabHolder.appendChild(document.createTextNode('Pass: '));
        custPass = makeElement('input', '');
        // stabHolder.appendChild(custPass);


        stabHolder.appendChild(makeElement('br'));
        stabHolder.appendChild(makeElement('br'));
        stabHolder.appendChild(makeElement('h4', 'Coordinate system: '));
        custCS = makeElement('select', null);
        custCS.appendChild(makeElement('option', thisB.nameForCoordSystem(thisB.coordSystem), { value: '__default__' }));
        if (thisB.chains) {
            for (var csk in thisB.chains) {
                var cs = thisB.chains[csk].coords;
                custCS.appendChild(makeElement('option', thisB.nameForCoordSystem(cs), { value: csk }));
            }
        }
        custCS.value = nds.mapping || '__default__';
        stabHolder.appendChild(custCS);

        if (coordsDetermined) {
            stabHolder.appendChild(makeElement('p', "(Based on server response, probably doesn't need changing.)"));
        } else {
            stabHolder.appendChild(makeElement('p', [makeElement('b', 'Warning: '), "unable to determine the correct value from server responses.  Please check carefully."]));
            stabHolder.appendChild(makeElement('p', "If you don't see the mapping you're looking for, please contact thomas@biodalliance.org"));
        }

        if (!quantIrrelevant) {
            stabHolder.appendChild(document.createTextNode('Quantitative: '));
            custQuant = makeElement('input', null, { type: 'checkbox', checked: true });
            if (typeof nds.maxbins !== 'undefined') {
                custQuant.checked = nds.maxbins;
            }
            stabHolder.appendChild(custQuant);
            if (quantDetermined) {
                stabHolder.appendChild(makeElement('p', "(Based on server response, probably doesn't need changing.)"));
            } else {
                stabHolder.appendChild(makeElement('p', [makeElement('b', "Warning: "), "unable to determine correct value.  If in doubt, leave checked."]));
            }
        }

        if (nds.bwgBlob) {
            stabHolder.appendChild(makeElement('p', [makeElement('b', 'Warning: '), 'data added from local file.  Due to the browser security model, the track will disappear if you reload Dalliance.']));
        }

        custName.focus();

        if (customMode === 'bin' || customMode === 'prompt-bai' || customMode === 'prompt-tbi') customMode = 'finalize-bin';else customMode = 'finalize';
        dataToFinalize = nds;
    };

    var multipleSet = null;
    var tryAddMultiple = function tryAddMultiple(fileList) {
        var newSources = multipleSet = [];
        customMode = 'multiple';
        for (var fi = 0; fi < fileList.length; ++fi) {
            var f = fileList[fi];
            if (f) {
                newSources.push({ blob: f });
            }
        }

        for (var fi = 0; fi < newSources.length; ++fi) {
            probeMultiple(newSources[fi]);
        }
        updateMultipleStatus();
    };

    var probeMultiple = function probeMultiple(ns) {
        probeResource(ns, function (source, err) {
            if (err) {
                source.error = err;
            }

            var usedIndices = [];
            var bams = {},
                tabixes = {};
            for (var si = 0; si < multipleSet.length; ++si) {
                var s = multipleSet[si];
                if (s.tier_type == 'bam' && !s.indexBlob) {
                    bams[s.blob.name] = s;
                }
                if (s.tier_type == 'tabix' && !s.indexBlob) {
                    tabixes[s.blob.name] = s;
                }
            }

            for (var si = 0; si < multipleSet.length; ++si) {
                var s = multipleSet[si];
                if (s.tier_type === 'bai') {
                    var baiPattern = new RegExp('(.+)\\.bai$');
                    var match = baiPattern.exec(s.blob.name);
                    if (match && bams[match[1]]) {
                        bams[match[1]].indexBlob = s.blob;
                        usedIndices.push(si);
                    }
                } else if (s.tier_type === 'tabix-index') {
                    var tbiPattern = new RegExp('(.+)\\.tbi$');
                    var match = tbiPattern.exec(s.blob.name);
                    if (match && tabixes[match[1]]) {
                        tabixes[match[1]].indexBlob = s.blob;
                        usedIndices.push(si);
                    }
                }
            }

            for (var bi = usedIndices.length - 1; bi >= 0; --bi) {
                multipleSet.splice(usedIndices[bi], 1);
            }

            updateMultipleStatus();
        });
    };

    var updateMultipleStatus = function updateMultipleStatus() {
        removeChildren(stabHolder);
        var needsIndex = false;
        var multTable = makeElement('table', multipleSet.filter(function (s) {
            return !s.hidden;
        }).map(function (s) {
            var row = makeElement('tr');
            row.appendChild(makeElement('td', s.name || s.blob.name));
            var typeContent;
            if (s.error) {
                typeContent = makeElement('span', 'Error', null, { color: 'red' });
            } else if (s.tier_type) {
                typeContent = s.payload || s.tier_type;
            } else {
                typeContent = thisB.makeLoader(16);
            }

            var ccs;
            var state = 'unknown';
            if (s.tier_type == 'bwg' || s.tier_type == 'memstore') {
                state = 'okay';
            } else if (s.tier_type == 'bam') {
                state = s.indexBlob ? 'okay' : 'needs-index';
            } else if (s.tier_type == 'tabix') {
                state = s.indexBlob ? 'okay' : 'needs-index';
            }

            if (state == 'okay') {
                ccs = makeElement('select', null, null, { width: '150px' });
                ccs.appendChild(makeElement('option', thisB.nameForCoordSystem(thisB.coordSystem), { value: '__default__' }));
                if (thisB.chains) {
                    for (var csk in thisB.chains) {
                        var cs = thisB.chains[csk].coords;
                        ccs.appendChild(makeElement('option', thisB.nameForCoordSystem(cs), { value: csk }));
                    }
                }
                ccs.value = s.mapping || '__default__';

                ccs.addEventListener('change', function (ev) {
                    s.mapping = ccs.value;
                    console.log(s);
                }, false);
            } else if (state == 'needs-index') {
                ccs = makeElement('span', 'Needs index', {}, { color: 'red' });
                needsIndex = true;
            }

            return makeElement('tr', [makeElement('td', s.name || s.blob.name), makeElement('td', typeContent), makeElement('td', ccs)]);
        }), { className: 'table table-striped table-condensed' });
        stabHolder.appendChild(multTable);

        if (needsIndex) {
            stabHolder.appendChild(makeElement('p', 'Some of these files are missing required index (.bai or .tbi) files.  For security reasons, web applications like Dalliance can only access local files which you have explicity selected.  Please use the file chooser below to select the appropriate index file'));
            stabHolder.appendChild(document.createTextNode('Index file(s): '));
            var indexFile = makeElement('input', null, { type: 'file', multiple: 'multiple' });
            stabHolder.appendChild(indexFile);
            indexFile.addEventListener('change', function (ev) {
                console.log('fileset changed');
                var fileList = indexFile.files || [];
                for (var fi = 0; fi < fileList.length; ++fi) {
                    var f = fileList[fi];
                    if (f) {
                        var ns = { blob: f, hidden: true };
                        multipleSet.push(ns);
                        probeMultiple(ns);
                    }
                }
            }, false);
        }
    };

    var canButton = makeElement('button', 'Cancel', { className: 'btn' });
    canButton.addEventListener('click', function (ev) {
        ev.stopPropagation();ev.preventDefault();
        if (customMode === 'finalize-bin') switchToBinMode();else switchToCustomMode();
    }, false);

    var refreshButton = makeElement('button', 'Refresh', { className: 'btn' });
    refreshButton.addEventListener('click', function (ev) {
        ev.stopPropagation();ev.preventDefault();
        thisB.queryRegistry(__mapping);
    }, false);
    this.makeTooltip(refreshButton, 'Click to re-fetch data from the DAS registry');

    var buttonHolder = makeElement('div', [addButton, ' ', canButton, ' ', refreshButton]);
    buttonHolder.style.margin = '10px';
    asform.appendChild(buttonHolder);

    popup.appendChild(asform);
    makeStab(thisB.availableSources);

    this.showToolPanel(popup);
    this.setUiMode('add');

    if (firstDefButton) {
        activateButton(addModeButtons, firstDefButton);
        makeStab(new Observed(firstDefSources));
    }
};

},{"./bam":1,"./bin":4,"./cbrowser":6,"./das":10,"./domui":12,"./encode":14,"./lh3utils":26,"./probe":31,"./sourcecompare":39,"./tabix":46,"./thub":48,"./utils":55}],53:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2010
//
// trix.js: UCSC-style free text indices
//

"use strict";

function connectTrix(ix, ixx, callback) {
    ixx.fetchAsText(function (ixxData) {
        if (!ixxData) return callback(null, "Couldn't fetch index-index");

        var toks = ixxData.split(/(.+)([0-9A-F]{10})\n/);

        var keys = [];
        var offsets = [];
        for (var ti = 1; ti < toks.length; ti += 3) {
            keys.push(toks[ti]);
            offsets.push(parseInt(toks[ti + 1], 16));
        }

        return callback(new TrixIndex(keys, offsets, ix));
    });
}

function TrixIndex(keys, offsets, ix) {
    this.keys = keys;
    this.offsets = offsets;
    this.ix = ix;
}

TrixIndex.prototype.lookup = function (query, callback) {
    var ixslice;

    var qtag = (query + '     ').substring(0, 5).toLowerCase();
    for (var i = 0; i < this.keys.length; ++i) {
        if (qtag.localeCompare(this.keys[i]) < 0) {
            ixslice = this.ix.slice(this.offsets[i - 1], this.offsets[i] - this.offsets[i - 1]);
            break;
        }
    }

    if (!ixslice) {
        ixslice = this.ix.slice(this.offsets[this.offsets.length - 1]);
    }

    ixslice.fetchAsText(function (ist) {
        var lines = ist.split('\n');
        for (var li = 0; li < lines.length; ++li) {
            if (lines[li].indexOf(query.toLowerCase() + ' ') == 0) {
                return callback(lines[li].split(' '));
            }
        }
        return callback(null);
    });
};

if (typeof module !== 'undefined') {
    module.exports = {
        connectTrix: connectTrix
    };
}

},{}],54:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2010
//
// twoBit.js: packed-binary reference sequences
//

"use strict";

if (typeof require !== 'undefined') {
    var bin = require('./bin');
    var readInt = bin.readInt;
    var readIntBE = bin.readIntBE;

    var spans = require('./spans');
    var Range = spans.Range;
    var union = spans.union;
    var intersection = spans.intersection;
}

var TWOBIT_MAGIC = 0x1a412743;
var TWOBIT_MAGIC_BE = 0x4327411a;
var HEADER_BLOCK_SIZE = 12500;

function TwoBitFile() {}

function makeTwoBit(fetchable, cnt) {
    var tb = new TwoBitFile();
    tb.data = fetchable;
    var headerBlockSize = HEADER_BLOCK_SIZE;
    var headerBlocksFetched = 0;

    tb.data.slice(0, headerBlockSize).fetch(function (r) {
        if (!r) {
            return cnt(null, "Couldn't access data");
        }
        var ba = new Uint8Array(r);
        var magic = readInt(ba, 0);
        if (magic == TWOBIT_MAGIC) {
            tb.readInt = readInt;
        } else if (magic == TWOBIT_MAGIC_BE) {
            tb.readInt = readIntBE;
        } else {
            return cnt(null, "Not a .2bit file, magic=0x" + magic.toString(16));
        }

        var version = tb.readInt(ba, 4);
        if (version != 0) {
            return cnt(null, 'Unsupported version ' + version);
        }

        tb.seqCount = tb.readInt(ba, 8);
        tb.seqDict = {};

        var p = 16,
            i = 0;
        var o = 0; // Offset of the current block if we need to fetch multiple header blocks.

        var parseSeqInfo = function parseSeqInfo() {
            while (i < tb.seqCount) {
                var ns = ba[p];
                if (p + ns + 6 >= ba.length) {
                    headerBlocksFetched += headerBlockSize;
                    headerBlockSize = Math.max(HEADER_BLOCK_SIZE, Math.floor(headerBlocksFetched * tb.seqCount / i));
                    return tb.data.slice(o + p, headerBlockSize).fetch(function (r) {
                        o += p;
                        p = 0;
                        ba = new Uint8Array(r);
                        parseSeqInfo();
                    });
                } else {
                    ++p;
                    var name = '';
                    for (var j = 1; j <= ns; ++j) {
                        name += String.fromCharCode(ba[p++]);
                    }
                    var offset = tb.readInt(ba, p);
                    p += 4;
                    tb.seqDict[name] = new TwoBitSeq(tb, offset);
                    ++i;
                }
            }
            return cnt(tb);
        };

        parseSeqInfo();
    });
}

TwoBitFile.prototype.getSeq = function (chr) {
    var seq = this.seqDict[chr];
    if (!seq) {
        seq = this.seqDict['chr' + chr];
    }
    return seq;
};

TwoBitFile.prototype.fetch = function (chr, min, max, cnt) {
    var seq = this.getSeq(chr);
    if (!seq) {
        return cnt(null, "Couldn't find " + chr);
    } else if (max <= min) {
        return cnt('');
    } else {
        seq.fetch(min, max, cnt);
    }
};

function TwoBitSeq(tbf, offset) {
    this.tbf = tbf;
    this.offset = offset;
}

TwoBitSeq.prototype.init = function (cnt) {
    if (this.seqOffset) {
        return cnt();
    }

    var thisB = this;
    thisB.tbf.data.slice(thisB.offset, 8).fetch(function (r1) {
        if (!r1) {
            return cnt('Fetch failed');
        }
        var ba = new Uint8Array(r1);
        thisB._length = thisB.tbf.readInt(ba, 0);
        thisB.nBlockCnt = thisB.tbf.readInt(ba, 4);
        thisB.tbf.data.slice(thisB.offset + 8, thisB.nBlockCnt * 8 + 4).fetch(function (r2) {
            if (!r2) {
                return cnt('Fetch failed');
            }
            var ba = new Uint8Array(r2);
            var nbs = null;
            for (var b = 0; b < thisB.nBlockCnt; ++b) {
                var nbMin = thisB.tbf.readInt(ba, b * 4);
                var nbLen = thisB.tbf.readInt(ba, (b + thisB.nBlockCnt) * 4);
                var nb = new Range(nbMin, nbMin + nbLen - 1);
                if (!nbs) {
                    nbs = nb;
                } else {
                    nbs = union(nbs, nb);
                }
            }
            thisB.nBlocks = nbs;
            thisB.mBlockCnt = thisB.tbf.readInt(ba, thisB.nBlockCnt * 8);
            thisB.seqLength = (thisB._length + 3) / 4 | 0;
            thisB.seqOffset = thisB.offset + 16 + (thisB.nBlockCnt + thisB.mBlockCnt) * 8;
            return cnt();
        });
    });
};

var TWOBIT_TABLE = ['T', 'C', 'A', 'G'];

TwoBitSeq.prototype.fetch = function (min, max, cnt) {
    --min;--max; // Switch to zero-based.
    var thisB = this;
    this.init(function (error) {
        if (error) {
            return cnt(null, error);
        }

        var fetchMin = min >> 2;
        var fetchMax = max + 3 >> 2;
        if (fetchMin < 0 || fetchMax > thisB.seqLength) {
            return cnt('Coordinates out of bounds: ' + min + ':' + max);
        }

        thisB.tbf.data.slice(thisB.seqOffset + fetchMin, fetchMax - fetchMin).salted().fetch(function (r) {
            if (r == null) {
                return cnt('SeqFetch failed');
            }
            var seqData = new Uint8Array(r);

            var nSpans = [];
            if (thisB.nBlocks) {
                var intr = intersection(new Range(min, max), thisB.nBlocks);
                if (intr) {
                    nSpans = intr.ranges();
                }
            }

            var seqstr = '';
            var ptr = min;
            function fillSeq(fsm) {
                while (ptr <= fsm) {
                    var bb = (ptr >> 2) - fetchMin;
                    var ni = ptr & 0x3;
                    var bv = seqData[bb];
                    var n;
                    if (ni == 0) {
                        n = bv >> 6 & 0x3;
                    } else if (ni == 1) {
                        n = bv >> 4 & 0x3;
                    } else if (ni == 2) {
                        n = bv >> 2 & 0x3;
                    } else {
                        n = bv & 0x3;
                    }
                    seqstr += TWOBIT_TABLE[n];
                    ++ptr;
                }
            }

            for (var b = 0; b < nSpans.length; ++b) {
                var nb = nSpans[b];
                if (ptr > nb.min()) {
                    throw 'N mismatch...';
                }
                if (ptr < nb.min()) {
                    fillSeq(nb.min() - 1);
                }
                while (ptr <= nb.max()) {
                    seqstr += 'N';
                    ++ptr;
                }
            }
            if (ptr <= max) {
                fillSeq(max);
            }
            return cnt(seqstr);
        });
    });
};

TwoBitSeq.prototype.length = function (cnt) {
    var thisB = this;
    this.init(function (error) {
        if (error) {
            return cnt(null, error);
        } else {
            return cnt(thisB._length);
        }
    });
};

if (typeof module !== 'undefined') {
    module.exports = {
        makeTwoBit: makeTwoBit
    };
}

},{"./bin":4,"./spans":40}],55:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2010
//
// utils.js: odds, sods, and ends.
//

"use strict";

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

if (typeof require !== 'undefined') {
    var sha1 = require('./sha1');
    var b64_sha1 = sha1.b64_sha1;
}

var NUM_REGEXP = new RegExp('[0-9]+');

function stringToNumbersArray(str) {
    var nums = new Array();
    var m;
    while (m = NUM_REGEXP.exec(str)) {
        nums.push(m[0]);
        str = str.substring(m.index + m[0].length);
    }
    return nums;
}

var STRICT_NUM_REGEXP = new RegExp('^[0-9]+$');

function stringToInt(str) {
    str = str.replace(new RegExp(',', 'g'), '');
    if (!STRICT_NUM_REGEXP.test(str)) {
        return null;
    }
    return str | 0;
}

function pushnew(a, v) {
    for (var i = 0; i < a.length; ++i) {
        if (a[i] == v) {
            return;
        }
    }
    a.push(v);
}

function pusho(obj, k, v) {
    if (obj[k]) {
        obj[k].push(v);
    } else {
        obj[k] = [v];
    }
}

function pushnewo(obj, k, v) {
    var a = obj[k];
    if (a) {
        for (var i = 0; i < a.length; ++i) {
            // indexOf requires JS16 :-(.
            if (a[i] == v) {
                return;
            }
        }
        a.push(v);
    } else {
        obj[k] = [v];
    }
}

function pick(a, b, c, d) {
    if (a) {
        return a;
    } else if (b) {
        return b;
    } else if (c) {
        return c;
    } else if (d) {
        return d;
    }
}

function pushnew(l, o) {
    for (var i = 0; i < l.length; ++i) {
        if (l[i] == o) {
            return;
        }
    }
    l.push(o);
}

function arrayIndexOf(a, x) {
    if (!a) {
        return -1;
    }

    for (var i = 0; i < a.length; ++i) {
        if (a[i] === x) {
            return i;
        }
    }
    return -1;
}

function arrayRemove(a, x) {
    var i = arrayIndexOf(a, x);
    if (i >= 0) {
        a.splice(i, 1);
        return true;
    }
    return false;
}

//
// DOM utilities
//


function makeElement(tag, children, attribs, styles) {
    var ele = document.createElement(tag);
    if (children) {
        if (!(children instanceof Array)) {
            children = [children];
        }
        for (var i = 0; i < children.length; ++i) {
            var c = children[i];
            if (c) {
                if (typeof c == 'string') {
                    c = document.createTextNode(c);
                } else if (typeof c == 'number') {
                    c = document.createTextNode('' + c);
                }
                ele.appendChild(c);
            }
        }
    }

    if (attribs) {
        for (var l in attribs) {
            try {
                ele[l] = attribs[l];
            } catch (e) {
                console.log('error setting ' + l);
                throw e;
            }
        }
    }
    if (styles) {
        for (var l in styles) {
            ele.style[l] = styles[l];
        }
    }
    return ele;
}

function makeElementNS(namespace, tag, children, attribs) {
    var ele = document.createElementNS(namespace, tag);
    if (children) {
        if (!(children instanceof Array)) {
            children = [children];
        }
        for (var i = 0; i < children.length; ++i) {
            var c = children[i];
            if (typeof c == 'string') {
                c = document.createTextNode(c);
            }
            ele.appendChild(c);
        }
    }

    setAttrs(ele, attribs);
    return ele;
}

var attr_name_cache = {};

function setAttr(node, key, value) {
    var attr = attr_name_cache[key];
    if (!attr) {
        var _attr = '';
        for (var c = 0; c < key.length; ++c) {
            var cc = key.substring(c, c + 1);
            var lcc = cc.toLowerCase();
            if (lcc != cc) {
                _attr = _attr + '-' + lcc;
            } else {
                _attr = _attr + cc;
            }
        }
        attr_name_cache[key] = _attr;
        attr = _attr;
    }
    node.setAttribute(attr, value);
}

function setAttrs(node, attribs) {
    if (attribs) {
        for (var l in attribs) {
            setAttr(node, l, attribs[l]);
        }
    }
}

function removeChildren(node) {
    if (!node || !node.childNodes) {
        return;
    }

    while (node.childNodes.length > 0) {
        node.removeChild(node.firstChild);
    }
}

//
// WARNING: not for general use!
//

function miniJSONify(o, exc) {
    if (typeof o === 'undefined') {
        return 'undefined';
    } else if (o == null) {
        return 'null';
    } else if (typeof o == 'string') {
        return "'" + o + "'";
    } else if (typeof o == 'number') {
        return "" + o;
    } else if (typeof o == 'boolean') {
        return "" + o;
    } else if ((typeof o === 'undefined' ? 'undefined' : _typeof(o)) == 'object') {
        if (o instanceof Array) {
            var s = null;
            for (var i = 0; i < o.length; ++i) {
                s = (s == null ? '' : s + ', ') + miniJSONify(o[i], exc);
            }
            return '[' + (s ? s : '') + ']';
        } else {
            exc = exc || {};
            var s = null;
            for (var k in o) {
                if (exc[k]) continue;
                if (k != undefined && typeof o[k] != 'function') {
                    s = (s == null ? '' : s + ', ') + k + ': ' + miniJSONify(o[k], exc);
                }
            }
            return '{' + (s ? s : '') + '}';
        }
    } else {
        return typeof o === 'undefined' ? 'undefined' : _typeof(o);
    }
}

function shallowCopy(o) {
    var n = {};
    for (var k in o) {
        n[k] = o[k];
    }
    return n;
}

function Observed(x) {
    this.value = x;
    this.listeners = [];
}

Observed.prototype.addListener = function (f) {
    this.listeners.push(f);
};

Observed.prototype.addListenerAndFire = function (f) {
    this.listeners.push(f);
    f(this.value);
};

Observed.prototype.removeListener = function (f) {
    arrayRemove(this.listeners, f);
};

Observed.prototype.get = function () {
    return this.value;
};

Observed.prototype.set = function (x) {
    this.value = x;
    for (var i = 0; i < this.listeners.length; ++i) {
        this.listeners[i](x);
    }
};

function Awaited() {
    this.queue = [];
}

Awaited.prototype.provide = function (x) {
    if (this.res !== undefined) {
        throw "Resource has already been provided.";
    }

    this.res = x;
    for (var i = 0; i < this.queue.length; ++i) {
        this.queue[i](x);
    }
    this.queue = null; // avoid leaking closures.
};

Awaited.prototype.await = function (f) {
    if (this.res !== undefined) {
        f(this.res);
        return this.res;
    } else {
        this.queue.push(f);
    }
};

var __dalliance_saltSeed = 0;

function saltURL(url) {
    return url + '?salt=' + b64_sha1('' + Date.now() + ',' + ++__dalliance_saltSeed);
}

function textXHR(url, callback, opts) {
    if (opts && opts.salt) url = saltURL(url);

    try {
        var timeout;
        if (opts && opts.timeout) {
            timeout = setTimeout(function () {
                console.log('timing out ' + url);
                req.abort();
                return callback(null, 'Timeout');
            }, opts.timeout);
        }

        var req = new XMLHttpRequest();
        req.onreadystatechange = function () {
            if (req.readyState == 4) {
                if (timeout) clearTimeout(timeout);
                if (req.status < 200 || req.status >= 300) {
                    callback(null, 'Error code ' + req.status);
                } else {
                    callback(req.responseText);
                }
            }
        };

        req.open('GET', url, true);
        req.responseType = 'text';

        if (opts && opts.credentials) {
            req.withCredentials = true;
        }
        req.send();
    } catch (e) {
        callback(null, 'Exception ' + e);
    }
}

function relativeURL(base, rel) {
    // FIXME quite naive -- good enough for trackhubs?

    if (rel.indexOf('http:') == 0 || rel.indexOf('https:') == 0) {
        return rel;
    }

    var li = base.lastIndexOf('/');
    if (li >= 0) {
        return base.substr(0, li + 1) + rel;
    } else {
        return rel;
    }
}

var AMINO_ACID_TRANSLATION = {
    'TTT': 'F',
    'TTC': 'F',
    'TTA': 'L',
    'TTG': 'L',
    'CTT': 'L',
    'CTC': 'L',
    'CTA': 'L',
    'CTG': 'L',
    'ATT': 'I',
    'ATC': 'I',
    'ATA': 'I',
    'ATG': 'M',
    'GTT': 'V',
    'GTC': 'V',
    'GTA': 'V',
    'GTG': 'V',
    'TCT': 'S',
    'TCC': 'S',
    'TCA': 'S',
    'TCG': 'S',
    'CCT': 'P',
    'CCC': 'P',
    'CCA': 'P',
    'CCG': 'P',
    'ACT': 'T',
    'ACC': 'T',
    'ACA': 'T',
    'ACG': 'T',
    'GCT': 'A',
    'GCC': 'A',
    'GCA': 'A',
    'GCG': 'A',
    'TAT': 'Y',
    'TAC': 'Y',
    'TAA': '*', // stop
    'TAG': '*', // stop
    'CAT': 'H',
    'CAC': 'H',
    'CAA': 'Q',
    'CAG': 'Q',
    'AAT': 'N',
    'AAC': 'N',
    'AAA': 'K',
    'AAG': 'K',
    'GAT': 'D',
    'GAC': 'D',
    'GAA': 'E',
    'GAG': 'E',
    'TGT': 'C',
    'TGC': 'C',
    'TGA': '*', // stop
    'TGG': 'W',
    'CGT': 'R',
    'CGC': 'R',
    'CGA': 'R',
    'CGG': 'R',
    'AGT': 'S',
    'AGC': 'S',
    'AGA': 'R',
    'AGG': 'R',
    'GGT': 'G',
    'GGC': 'G',
    'GGA': 'G',
    'GGG': 'G'
};

function resolveUrlToPage(rel) {
    return makeElement('a', null, { href: rel }).href;
}

//
// Missing APIs
// 

if (!('trim' in String.prototype)) {
    String.prototype.trim = function () {
        return this.replace(/^\s+/, '').replace(/\s+$/, '');
    };
}

if (typeof module !== 'undefined') {
    module.exports = {
        textXHR: textXHR,
        relativeURL: relativeURL,
        resolveUrlToPage: resolveUrlToPage,
        shallowCopy: shallowCopy,
        pusho: pusho,
        pushnew: pushnew,
        pushnewo: pushnewo,
        arrayIndexOf: arrayIndexOf,
        pick: pick,

        makeElement: makeElement,
        makeElementNS: makeElementNS,
        removeChildren: removeChildren,

        miniJSONify: miniJSONify,

        Observed: Observed,
        Awaited: Awaited,

        AMINO_ACID_TRANSLATION: AMINO_ACID_TRANSLATION
    };
}

},{"./sha1":37}],56:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2014
//
// vcf.js
//

"use strict";

if (typeof require !== 'undefined') {
    var sa = require('./sourceadapters');
    var dalliance_registerParserFactory = sa.registerParserFactory;

    var das = require('./das');
    var DASStylesheet = das.DASStylesheet;
    var DASStyle = das.DASStyle;
    var DASFeature = das.DASFeature;
    var DASGroup = das.DASGroup;
}

function VCFParser() {
    this.info = [];
}

var VCF_INFO_RE = /([^;=]+)(=([^;]+))?;?/;
var VCF_INFO_HEADER = /##INFO=<([^>]+)>/;
var VCF_INFO_HEADER_TOK = /([^,=]+)=([^,]+|"[^"]+"),?/;

VCFParser.prototype.createSession = function (sink) {
    return new VCFParseSession(this, sink);
};

function VCFParseSession(parser, sink) {
    this.parser = parser;
    this.sink = sink;
}

VCFParseSession.prototype.parse = function (line) {
    if (line.length == 0) return;
    if (line[0] == '#') {
        if (line.length > 1 && line[1] == '#') {
            var m = VCF_INFO_HEADER.exec(line);
            if (m) {
                var toks = m[1].split(VCF_INFO_HEADER_TOK);
                var id = null,
                    desc = null;
                for (var ti = 0; ti < toks.length - 1; ti += 3) {
                    var key = toks[ti + 1];
                    var value = toks[ti + 2].replace(/"/g, '');
                    if (key == 'ID') {
                        id = value;
                    } else if (key == 'Description') {
                        desc = value;
                    }
                }
                if (id && desc) {
                    this.parser.info.push({ id: id,
                        desc: desc });
                }
            }
            return;
        } else {
            return;
        }
    }

    var toks = line.split('\t');
    var f = new DASFeature();
    f.segment = toks[0];
    f.id = toks[2];
    f.refAllele = toks[3];
    f.altAlleles = toks[4].split(',');
    f.min = parseInt(toks[1]);
    f.max = f.min + f.refAllele.length - 1;

    var infoToks = toks[7].split(VCF_INFO_RE);
    f.info = {};
    for (var ti = 0; ti < infoToks.length; ti += 4) {
        f.info[infoToks[ti + 1]] = infoToks[ti + 3];
    }

    var alt = f.altAlleles[0];
    var ref = f.refAllele;
    if (alt.length > ref.length) {
        f.type = "insertion";
        if (alt.indexOf(ref) == 0) {
            f.insertion = alt.substr(ref.length);
            f.min += ref.length;
            f.max = f.min - 1; // Effectively "between" bases.
        } else {
            f.insertion = alt;
        }
    } else if (alt.length < ref.length) {
        f.type = "deletion";
    } else {
        f.type = 'substitution';
    }

    this.sink(f);
};

VCFParseSession.prototype.flush = function () {};

VCFParser.prototype.getStyleSheet = function (callback) {
    var stylesheet = new DASStylesheet();

    {
        var varStyle = new DASStyle();
        varStyle.glyph = '__INSERTION';
        varStyle.BUMP = 'yes';
        varStyle.LABEL = 'no';
        varStyle.FGCOLOR = 'rgb(50,80,255)';
        varStyle.BGCOLOR = '#888888';
        varStyle.STROKECOLOR = 'black';
        stylesheet.pushStyle({ type: 'insertion' }, null, varStyle);
    }
    {
        var varStyle = new DASStyle();
        varStyle.glyph = 'PLIMSOLL';
        varStyle.BUMP = 'yes';
        varStyle.LABEL = 'no';
        varStyle.FGCOLOR = 'rgb(255, 60, 60)';
        varStyle.BGCOLOR = '#888888';
        varStyle.STROKECOLOR = 'black';
        stylesheet.pushStyle({ type: 'deletion' }, null, varStyle);
    }
    {
        var varStyle = new DASStyle();
        varStyle.glyph = 'PLIMSOLL';
        varStyle.BUMP = 'yes';
        varStyle.LABEL = 'no';
        varStyle.FGCOLOR = 'rgb(50,80,255)';
        varStyle.BGCOLOR = '#888888';
        varStyle.STROKECOLOR = 'black';
        stylesheet.pushStyle({ type: 'default' }, null, varStyle);
    }

    return callback(stylesheet);
};

VCFParser.prototype.getDefaultFIPs = function (callback) {
    var self = this;
    var fip = function fip(feature, featureInfo) {
        featureInfo.add("Ref. allele", feature.refAllele);
        featureInfo.add("Alt. alleles", feature.altAlleles.join(','));

        if (feature.info) {
            for (var ii = 0; ii < self.info.length; ++ii) {
                var info = self.info[ii];
                var val = feature.info[info.id];
                if (val !== undefined) {
                    featureInfo.add(info.desc, val);
                }
            }
        }
    };
    callback(fip);
};

dalliance_registerParserFactory('vcf', function () {
    return new VCFParser();
});

},{"./das":10,"./sourceadapters":38}],57:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2010
//
// version.js
//

"use strict";

var VERSION = {
    CONFIG: 5,
    MAJOR: 0,
    MINOR: 13,
    MICRO: 7,
    BRANCH: 'dev'
};

VERSION.toString = function () {
    var vs = '' + this.MAJOR + '.' + this.MINOR + '.' + this.MICRO;
    if (this.PATCH) {
        vs = vs + this.PATCH;
    }
    if (this.BRANCH && this.BRANCH != '') {
        vs = vs + '-' + this.BRANCH;
    }
    return vs;
};

if (typeof module !== 'undefined') {
    module.exports = VERSION;
}

},{}],58:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Dalliance Genome Explorer
// (c) Thomas Down 2006-2014
//
// zoomslider.js: custom slider component
//


"use strict";

if (typeof require !== 'undefined') {
    var utils = require('./utils');
    var makeElement = utils.makeElement;
}

function makeZoomSlider(opts) {
    opts = opts || {};

    var minPos = 0,
        maxPos = opts.width || 200;
    var min = 0,
        max = 200;
    var pos = 50,
        pos2 = 100;
    var labels = [];
    var track = makeElement('hr', null, { className: 'slider-track' }, { width: '' + (maxPos | 0) + 'px' });
    var thumb = makeElement('hr', null, { className: 'slider-thumb active' });
    var thumb2 = makeElement('hr', null, { className: 'slider-thumb' });
    var slider = makeElement('div', [track, thumb, thumb2], { className: 'slider' }, { width: '' + ((maxPos | 0) + 10) + 'px' });

    slider.removeLabels = function () {
        for (var li = 0; li < labels.length; ++li) {
            slider.removeChild(labels[li]);
        }
        labels = [];
    };

    slider.addLabel = function (val, txt) {
        var pos = minPos + (val - min) * (maxPos - minPos) / (max - min) | 0;
        var label = makeElement('div', txt, { className: 'slider-label' }, {
            left: '' + (minPos + (val - min) * (maxPos - minPos) / (max - min) | 0) + 'px'
        });
        slider.appendChild(label);
        labels.push(label);
    };

    var onChange = document.createEvent('HTMLEvents');
    onChange.initEvent('change', true, false);

    function setPos(np) {
        np = Math.min(np, maxPos);
        np = Math.max(np, minPos);
        pos = np;
        thumb.style.left = '' + pos + 'px';
    }

    function setPos2(np) {
        np = Math.min(np, maxPos);
        np = Math.max(np, minPos);
        pos2 = np;
        thumb2.style.left = '' + pos2 + 'px';
    }

    Object.defineProperty(slider, 'value', {
        get: function get() {
            return min + (pos - minPos) * (max - min) / (maxPos - minPos);
        },
        set: function set(v) {
            var np = minPos + (v - min) * (maxPos - minPos) / (max - min);
            setPos(np);
        }
    });

    Object.defineProperty(slider, 'value2', {
        get: function get() {
            return min + (pos2 - minPos) * (max - min) / (maxPos - minPos);
        },
        set: function set(v) {
            var np = minPos + (v - min) * (maxPos - minPos) / (max - min);
            setPos2(np);
        }
    });

    Object.defineProperty(slider, 'active', {
        get: function get() {
            return thumb.classList.contains('active') ? 1 : 2;
        },
        set: function set(x) {
            if (x == 1) {
                thumb.classList.add('active');
                thumb2.classList.remove('active');
            } else {
                thumb2.classList.add('active');
                thumb.classList.remove('active');
            }
        }
    });

    Object.defineProperty(slider, 'min', {
        get: function get() {
            return min;
        },
        set: function set(v) {
            min = v;
        }
    });

    Object.defineProperty(slider, 'max', {
        get: function get() {
            return max;
        },
        set: function set(v) {
            max = v;
        }
    });

    var offset;
    var which;

    var thumbMouseDown = function thumbMouseDown(ev) {
        which = this == thumb ? 1 : 2;
        if (which != slider.active) {
            slider.active = which;
            slider.dispatchEvent(onChange);
        }
        ev.stopPropagation();ev.preventDefault();
        window.addEventListener('mousemove', thumbDragHandler, false);
        window.addEventListener('mouseup', thumbDragEndHandler, false);
        offset = ev.clientX - (which == 1 ? pos : pos2);
    };

    thumb.addEventListener('mousedown', thumbMouseDown, false);
    thumb2.addEventListener('mousedown', thumbMouseDown, false);

    var thumbDragHandler = function thumbDragHandler(ev) {
        if (which == 1) setPos(ev.clientX - offset);else setPos2(ev.clientX - offset);
        slider.dispatchEvent(onChange);
    };

    var thumbDragEndHandler = function thumbDragEndHandler(ev) {
        window.removeEventListener('mousemove', thumbDragHandler, false);
        window.removeEventListener('mouseup', thumbDragEndHandler, false);
    };

    return slider;
}

if (typeof module !== 'undefined') {
    module.exports = makeZoomSlider;
}

},{"./utils":55}],59:[function(require,module,exports){
(function (process,global){
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/jakearchibald/es6-promise/master/LICENSE
 * @version   3.0.2
 */

(function() {
    "use strict";
    function lib$es6$promise$utils$$objectOrFunction(x) {
      return typeof x === 'function' || (typeof x === 'object' && x !== null);
    }

    function lib$es6$promise$utils$$isFunction(x) {
      return typeof x === 'function';
    }

    function lib$es6$promise$utils$$isMaybeThenable(x) {
      return typeof x === 'object' && x !== null;
    }

    var lib$es6$promise$utils$$_isArray;
    if (!Array.isArray) {
      lib$es6$promise$utils$$_isArray = function (x) {
        return Object.prototype.toString.call(x) === '[object Array]';
      };
    } else {
      lib$es6$promise$utils$$_isArray = Array.isArray;
    }

    var lib$es6$promise$utils$$isArray = lib$es6$promise$utils$$_isArray;
    var lib$es6$promise$asap$$len = 0;
    var lib$es6$promise$asap$$toString = {}.toString;
    var lib$es6$promise$asap$$vertxNext;
    var lib$es6$promise$asap$$customSchedulerFn;

    var lib$es6$promise$asap$$asap = function asap(callback, arg) {
      lib$es6$promise$asap$$queue[lib$es6$promise$asap$$len] = callback;
      lib$es6$promise$asap$$queue[lib$es6$promise$asap$$len + 1] = arg;
      lib$es6$promise$asap$$len += 2;
      if (lib$es6$promise$asap$$len === 2) {
        // If len is 2, that means that we need to schedule an async flush.
        // If additional callbacks are queued before the queue is flushed, they
        // will be processed by this flush that we are scheduling.
        if (lib$es6$promise$asap$$customSchedulerFn) {
          lib$es6$promise$asap$$customSchedulerFn(lib$es6$promise$asap$$flush);
        } else {
          lib$es6$promise$asap$$scheduleFlush();
        }
      }
    }

    function lib$es6$promise$asap$$setScheduler(scheduleFn) {
      lib$es6$promise$asap$$customSchedulerFn = scheduleFn;
    }

    function lib$es6$promise$asap$$setAsap(asapFn) {
      lib$es6$promise$asap$$asap = asapFn;
    }

    var lib$es6$promise$asap$$browserWindow = (typeof window !== 'undefined') ? window : undefined;
    var lib$es6$promise$asap$$browserGlobal = lib$es6$promise$asap$$browserWindow || {};
    var lib$es6$promise$asap$$BrowserMutationObserver = lib$es6$promise$asap$$browserGlobal.MutationObserver || lib$es6$promise$asap$$browserGlobal.WebKitMutationObserver;
    var lib$es6$promise$asap$$isNode = typeof process !== 'undefined' && {}.toString.call(process) === '[object process]';

    // test for web worker but not in IE10
    var lib$es6$promise$asap$$isWorker = typeof Uint8ClampedArray !== 'undefined' &&
      typeof importScripts !== 'undefined' &&
      typeof MessageChannel !== 'undefined';

    // node
    function lib$es6$promise$asap$$useNextTick() {
      // node version 0.10.x displays a deprecation warning when nextTick is used recursively
      // see https://github.com/cujojs/when/issues/410 for details
      return function() {
        process.nextTick(lib$es6$promise$asap$$flush);
      };
    }

    // vertx
    function lib$es6$promise$asap$$useVertxTimer() {
      return function() {
        lib$es6$promise$asap$$vertxNext(lib$es6$promise$asap$$flush);
      };
    }

    function lib$es6$promise$asap$$useMutationObserver() {
      var iterations = 0;
      var observer = new lib$es6$promise$asap$$BrowserMutationObserver(lib$es6$promise$asap$$flush);
      var node = document.createTextNode('');
      observer.observe(node, { characterData: true });

      return function() {
        node.data = (iterations = ++iterations % 2);
      };
    }

    // web worker
    function lib$es6$promise$asap$$useMessageChannel() {
      var channel = new MessageChannel();
      channel.port1.onmessage = lib$es6$promise$asap$$flush;
      return function () {
        channel.port2.postMessage(0);
      };
    }

    function lib$es6$promise$asap$$useSetTimeout() {
      return function() {
        setTimeout(lib$es6$promise$asap$$flush, 1);
      };
    }

    var lib$es6$promise$asap$$queue = new Array(1000);
    function lib$es6$promise$asap$$flush() {
      for (var i = 0; i < lib$es6$promise$asap$$len; i+=2) {
        var callback = lib$es6$promise$asap$$queue[i];
        var arg = lib$es6$promise$asap$$queue[i+1];

        callback(arg);

        lib$es6$promise$asap$$queue[i] = undefined;
        lib$es6$promise$asap$$queue[i+1] = undefined;
      }

      lib$es6$promise$asap$$len = 0;
    }

    function lib$es6$promise$asap$$attemptVertx() {
      try {
        var r = require;
        var vertx = r('vertx');
        lib$es6$promise$asap$$vertxNext = vertx.runOnLoop || vertx.runOnContext;
        return lib$es6$promise$asap$$useVertxTimer();
      } catch(e) {
        return lib$es6$promise$asap$$useSetTimeout();
      }
    }

    var lib$es6$promise$asap$$scheduleFlush;
    // Decide what async method to use to triggering processing of queued callbacks:
    if (lib$es6$promise$asap$$isNode) {
      lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$useNextTick();
    } else if (lib$es6$promise$asap$$BrowserMutationObserver) {
      lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$useMutationObserver();
    } else if (lib$es6$promise$asap$$isWorker) {
      lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$useMessageChannel();
    } else if (lib$es6$promise$asap$$browserWindow === undefined && typeof require === 'function') {
      lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$attemptVertx();
    } else {
      lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$useSetTimeout();
    }

    function lib$es6$promise$$internal$$noop() {}

    var lib$es6$promise$$internal$$PENDING   = void 0;
    var lib$es6$promise$$internal$$FULFILLED = 1;
    var lib$es6$promise$$internal$$REJECTED  = 2;

    var lib$es6$promise$$internal$$GET_THEN_ERROR = new lib$es6$promise$$internal$$ErrorObject();

    function lib$es6$promise$$internal$$selfFulfillment() {
      return new TypeError("You cannot resolve a promise with itself");
    }

    function lib$es6$promise$$internal$$cannotReturnOwn() {
      return new TypeError('A promises callback cannot return that same promise.');
    }

    function lib$es6$promise$$internal$$getThen(promise) {
      try {
        return promise.then;
      } catch(error) {
        lib$es6$promise$$internal$$GET_THEN_ERROR.error = error;
        return lib$es6$promise$$internal$$GET_THEN_ERROR;
      }
    }

    function lib$es6$promise$$internal$$tryThen(then, value, fulfillmentHandler, rejectionHandler) {
      try {
        then.call(value, fulfillmentHandler, rejectionHandler);
      } catch(e) {
        return e;
      }
    }

    function lib$es6$promise$$internal$$handleForeignThenable(promise, thenable, then) {
       lib$es6$promise$asap$$asap(function(promise) {
        var sealed = false;
        var error = lib$es6$promise$$internal$$tryThen(then, thenable, function(value) {
          if (sealed) { return; }
          sealed = true;
          if (thenable !== value) {
            lib$es6$promise$$internal$$resolve(promise, value);
          } else {
            lib$es6$promise$$internal$$fulfill(promise, value);
          }
        }, function(reason) {
          if (sealed) { return; }
          sealed = true;

          lib$es6$promise$$internal$$reject(promise, reason);
        }, 'Settle: ' + (promise._label || ' unknown promise'));

        if (!sealed && error) {
          sealed = true;
          lib$es6$promise$$internal$$reject(promise, error);
        }
      }, promise);
    }

    function lib$es6$promise$$internal$$handleOwnThenable(promise, thenable) {
      if (thenable._state === lib$es6$promise$$internal$$FULFILLED) {
        lib$es6$promise$$internal$$fulfill(promise, thenable._result);
      } else if (thenable._state === lib$es6$promise$$internal$$REJECTED) {
        lib$es6$promise$$internal$$reject(promise, thenable._result);
      } else {
        lib$es6$promise$$internal$$subscribe(thenable, undefined, function(value) {
          lib$es6$promise$$internal$$resolve(promise, value);
        }, function(reason) {
          lib$es6$promise$$internal$$reject(promise, reason);
        });
      }
    }

    function lib$es6$promise$$internal$$handleMaybeThenable(promise, maybeThenable) {
      if (maybeThenable.constructor === promise.constructor) {
        lib$es6$promise$$internal$$handleOwnThenable(promise, maybeThenable);
      } else {
        var then = lib$es6$promise$$internal$$getThen(maybeThenable);

        if (then === lib$es6$promise$$internal$$GET_THEN_ERROR) {
          lib$es6$promise$$internal$$reject(promise, lib$es6$promise$$internal$$GET_THEN_ERROR.error);
        } else if (then === undefined) {
          lib$es6$promise$$internal$$fulfill(promise, maybeThenable);
        } else if (lib$es6$promise$utils$$isFunction(then)) {
          lib$es6$promise$$internal$$handleForeignThenable(promise, maybeThenable, then);
        } else {
          lib$es6$promise$$internal$$fulfill(promise, maybeThenable);
        }
      }
    }

    function lib$es6$promise$$internal$$resolve(promise, value) {
      if (promise === value) {
        lib$es6$promise$$internal$$reject(promise, lib$es6$promise$$internal$$selfFulfillment());
      } else if (lib$es6$promise$utils$$objectOrFunction(value)) {
        lib$es6$promise$$internal$$handleMaybeThenable(promise, value);
      } else {
        lib$es6$promise$$internal$$fulfill(promise, value);
      }
    }

    function lib$es6$promise$$internal$$publishRejection(promise) {
      if (promise._onerror) {
        promise._onerror(promise._result);
      }

      lib$es6$promise$$internal$$publish(promise);
    }

    function lib$es6$promise$$internal$$fulfill(promise, value) {
      if (promise._state !== lib$es6$promise$$internal$$PENDING) { return; }

      promise._result = value;
      promise._state = lib$es6$promise$$internal$$FULFILLED;

      if (promise._subscribers.length !== 0) {
        lib$es6$promise$asap$$asap(lib$es6$promise$$internal$$publish, promise);
      }
    }

    function lib$es6$promise$$internal$$reject(promise, reason) {
      if (promise._state !== lib$es6$promise$$internal$$PENDING) { return; }
      promise._state = lib$es6$promise$$internal$$REJECTED;
      promise._result = reason;

      lib$es6$promise$asap$$asap(lib$es6$promise$$internal$$publishRejection, promise);
    }

    function lib$es6$promise$$internal$$subscribe(parent, child, onFulfillment, onRejection) {
      var subscribers = parent._subscribers;
      var length = subscribers.length;

      parent._onerror = null;

      subscribers[length] = child;
      subscribers[length + lib$es6$promise$$internal$$FULFILLED] = onFulfillment;
      subscribers[length + lib$es6$promise$$internal$$REJECTED]  = onRejection;

      if (length === 0 && parent._state) {
        lib$es6$promise$asap$$asap(lib$es6$promise$$internal$$publish, parent);
      }
    }

    function lib$es6$promise$$internal$$publish(promise) {
      var subscribers = promise._subscribers;
      var settled = promise._state;

      if (subscribers.length === 0) { return; }

      var child, callback, detail = promise._result;

      for (var i = 0; i < subscribers.length; i += 3) {
        child = subscribers[i];
        callback = subscribers[i + settled];

        if (child) {
          lib$es6$promise$$internal$$invokeCallback(settled, child, callback, detail);
        } else {
          callback(detail);
        }
      }

      promise._subscribers.length = 0;
    }

    function lib$es6$promise$$internal$$ErrorObject() {
      this.error = null;
    }

    var lib$es6$promise$$internal$$TRY_CATCH_ERROR = new lib$es6$promise$$internal$$ErrorObject();

    function lib$es6$promise$$internal$$tryCatch(callback, detail) {
      try {
        return callback(detail);
      } catch(e) {
        lib$es6$promise$$internal$$TRY_CATCH_ERROR.error = e;
        return lib$es6$promise$$internal$$TRY_CATCH_ERROR;
      }
    }

    function lib$es6$promise$$internal$$invokeCallback(settled, promise, callback, detail) {
      var hasCallback = lib$es6$promise$utils$$isFunction(callback),
          value, error, succeeded, failed;

      if (hasCallback) {
        value = lib$es6$promise$$internal$$tryCatch(callback, detail);

        if (value === lib$es6$promise$$internal$$TRY_CATCH_ERROR) {
          failed = true;
          error = value.error;
          value = null;
        } else {
          succeeded = true;
        }

        if (promise === value) {
          lib$es6$promise$$internal$$reject(promise, lib$es6$promise$$internal$$cannotReturnOwn());
          return;
        }

      } else {
        value = detail;
        succeeded = true;
      }

      if (promise._state !== lib$es6$promise$$internal$$PENDING) {
        // noop
      } else if (hasCallback && succeeded) {
        lib$es6$promise$$internal$$resolve(promise, value);
      } else if (failed) {
        lib$es6$promise$$internal$$reject(promise, error);
      } else if (settled === lib$es6$promise$$internal$$FULFILLED) {
        lib$es6$promise$$internal$$fulfill(promise, value);
      } else if (settled === lib$es6$promise$$internal$$REJECTED) {
        lib$es6$promise$$internal$$reject(promise, value);
      }
    }

    function lib$es6$promise$$internal$$initializePromise(promise, resolver) {
      try {
        resolver(function resolvePromise(value){
          lib$es6$promise$$internal$$resolve(promise, value);
        }, function rejectPromise(reason) {
          lib$es6$promise$$internal$$reject(promise, reason);
        });
      } catch(e) {
        lib$es6$promise$$internal$$reject(promise, e);
      }
    }

    function lib$es6$promise$enumerator$$Enumerator(Constructor, input) {
      var enumerator = this;

      enumerator._instanceConstructor = Constructor;
      enumerator.promise = new Constructor(lib$es6$promise$$internal$$noop);

      if (enumerator._validateInput(input)) {
        enumerator._input     = input;
        enumerator.length     = input.length;
        enumerator._remaining = input.length;

        enumerator._init();

        if (enumerator.length === 0) {
          lib$es6$promise$$internal$$fulfill(enumerator.promise, enumerator._result);
        } else {
          enumerator.length = enumerator.length || 0;
          enumerator._enumerate();
          if (enumerator._remaining === 0) {
            lib$es6$promise$$internal$$fulfill(enumerator.promise, enumerator._result);
          }
        }
      } else {
        lib$es6$promise$$internal$$reject(enumerator.promise, enumerator._validationError());
      }
    }

    lib$es6$promise$enumerator$$Enumerator.prototype._validateInput = function(input) {
      return lib$es6$promise$utils$$isArray(input);
    };

    lib$es6$promise$enumerator$$Enumerator.prototype._validationError = function() {
      return new Error('Array Methods must be provided an Array');
    };

    lib$es6$promise$enumerator$$Enumerator.prototype._init = function() {
      this._result = new Array(this.length);
    };

    var lib$es6$promise$enumerator$$default = lib$es6$promise$enumerator$$Enumerator;

    lib$es6$promise$enumerator$$Enumerator.prototype._enumerate = function() {
      var enumerator = this;

      var length  = enumerator.length;
      var promise = enumerator.promise;
      var input   = enumerator._input;

      for (var i = 0; promise._state === lib$es6$promise$$internal$$PENDING && i < length; i++) {
        enumerator._eachEntry(input[i], i);
      }
    };

    lib$es6$promise$enumerator$$Enumerator.prototype._eachEntry = function(entry, i) {
      var enumerator = this;
      var c = enumerator._instanceConstructor;

      if (lib$es6$promise$utils$$isMaybeThenable(entry)) {
        if (entry.constructor === c && entry._state !== lib$es6$promise$$internal$$PENDING) {
          entry._onerror = null;
          enumerator._settledAt(entry._state, i, entry._result);
        } else {
          enumerator._willSettleAt(c.resolve(entry), i);
        }
      } else {
        enumerator._remaining--;
        enumerator._result[i] = entry;
      }
    };

    lib$es6$promise$enumerator$$Enumerator.prototype._settledAt = function(state, i, value) {
      var enumerator = this;
      var promise = enumerator.promise;

      if (promise._state === lib$es6$promise$$internal$$PENDING) {
        enumerator._remaining--;

        if (state === lib$es6$promise$$internal$$REJECTED) {
          lib$es6$promise$$internal$$reject(promise, value);
        } else {
          enumerator._result[i] = value;
        }
      }

      if (enumerator._remaining === 0) {
        lib$es6$promise$$internal$$fulfill(promise, enumerator._result);
      }
    };

    lib$es6$promise$enumerator$$Enumerator.prototype._willSettleAt = function(promise, i) {
      var enumerator = this;

      lib$es6$promise$$internal$$subscribe(promise, undefined, function(value) {
        enumerator._settledAt(lib$es6$promise$$internal$$FULFILLED, i, value);
      }, function(reason) {
        enumerator._settledAt(lib$es6$promise$$internal$$REJECTED, i, reason);
      });
    };
    function lib$es6$promise$promise$all$$all(entries) {
      return new lib$es6$promise$enumerator$$default(this, entries).promise;
    }
    var lib$es6$promise$promise$all$$default = lib$es6$promise$promise$all$$all;
    function lib$es6$promise$promise$race$$race(entries) {
      /*jshint validthis:true */
      var Constructor = this;

      var promise = new Constructor(lib$es6$promise$$internal$$noop);

      if (!lib$es6$promise$utils$$isArray(entries)) {
        lib$es6$promise$$internal$$reject(promise, new TypeError('You must pass an array to race.'));
        return promise;
      }

      var length = entries.length;

      function onFulfillment(value) {
        lib$es6$promise$$internal$$resolve(promise, value);
      }

      function onRejection(reason) {
        lib$es6$promise$$internal$$reject(promise, reason);
      }

      for (var i = 0; promise._state === lib$es6$promise$$internal$$PENDING && i < length; i++) {
        lib$es6$promise$$internal$$subscribe(Constructor.resolve(entries[i]), undefined, onFulfillment, onRejection);
      }

      return promise;
    }
    var lib$es6$promise$promise$race$$default = lib$es6$promise$promise$race$$race;
    function lib$es6$promise$promise$resolve$$resolve(object) {
      /*jshint validthis:true */
      var Constructor = this;

      if (object && typeof object === 'object' && object.constructor === Constructor) {
        return object;
      }

      var promise = new Constructor(lib$es6$promise$$internal$$noop);
      lib$es6$promise$$internal$$resolve(promise, object);
      return promise;
    }
    var lib$es6$promise$promise$resolve$$default = lib$es6$promise$promise$resolve$$resolve;
    function lib$es6$promise$promise$reject$$reject(reason) {
      /*jshint validthis:true */
      var Constructor = this;
      var promise = new Constructor(lib$es6$promise$$internal$$noop);
      lib$es6$promise$$internal$$reject(promise, reason);
      return promise;
    }
    var lib$es6$promise$promise$reject$$default = lib$es6$promise$promise$reject$$reject;

    var lib$es6$promise$promise$$counter = 0;

    function lib$es6$promise$promise$$needsResolver() {
      throw new TypeError('You must pass a resolver function as the first argument to the promise constructor');
    }

    function lib$es6$promise$promise$$needsNew() {
      throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");
    }

    var lib$es6$promise$promise$$default = lib$es6$promise$promise$$Promise;
    /**
      Promise objects represent the eventual result of an asynchronous operation. The
      primary way of interacting with a promise is through its `then` method, which
      registers callbacks to receive either a promise's eventual value or the reason
      why the promise cannot be fulfilled.

      Terminology
      -----------

      - `promise` is an object or function with a `then` method whose behavior conforms to this specification.
      - `thenable` is an object or function that defines a `then` method.
      - `value` is any legal JavaScript value (including undefined, a thenable, or a promise).
      - `exception` is a value that is thrown using the throw statement.
      - `reason` is a value that indicates why a promise was rejected.
      - `settled` the final resting state of a promise, fulfilled or rejected.

      A promise can be in one of three states: pending, fulfilled, or rejected.

      Promises that are fulfilled have a fulfillment value and are in the fulfilled
      state.  Promises that are rejected have a rejection reason and are in the
      rejected state.  A fulfillment value is never a thenable.

      Promises can also be said to *resolve* a value.  If this value is also a
      promise, then the original promise's settled state will match the value's
      settled state.  So a promise that *resolves* a promise that rejects will
      itself reject, and a promise that *resolves* a promise that fulfills will
      itself fulfill.


      Basic Usage:
      ------------

      ```js
      var promise = new Promise(function(resolve, reject) {
        // on success
        resolve(value);

        // on failure
        reject(reason);
      });

      promise.then(function(value) {
        // on fulfillment
      }, function(reason) {
        // on rejection
      });
      ```

      Advanced Usage:
      ---------------

      Promises shine when abstracting away asynchronous interactions such as
      `XMLHttpRequest`s.

      ```js
      function getJSON(url) {
        return new Promise(function(resolve, reject){
          var xhr = new XMLHttpRequest();

          xhr.open('GET', url);
          xhr.onreadystatechange = handler;
          xhr.responseType = 'json';
          xhr.setRequestHeader('Accept', 'application/json');
          xhr.send();

          function handler() {
            if (this.readyState === this.DONE) {
              if (this.status === 200) {
                resolve(this.response);
              } else {
                reject(new Error('getJSON: `' + url + '` failed with status: [' + this.status + ']'));
              }
            }
          };
        });
      }

      getJSON('/posts.json').then(function(json) {
        // on fulfillment
      }, function(reason) {
        // on rejection
      });
      ```

      Unlike callbacks, promises are great composable primitives.

      ```js
      Promise.all([
        getJSON('/posts'),
        getJSON('/comments')
      ]).then(function(values){
        values[0] // => postsJSON
        values[1] // => commentsJSON

        return values;
      });
      ```

      @class Promise
      @param {function} resolver
      Useful for tooling.
      @constructor
    */
    function lib$es6$promise$promise$$Promise(resolver) {
      this._id = lib$es6$promise$promise$$counter++;
      this._state = undefined;
      this._result = undefined;
      this._subscribers = [];

      if (lib$es6$promise$$internal$$noop !== resolver) {
        if (!lib$es6$promise$utils$$isFunction(resolver)) {
          lib$es6$promise$promise$$needsResolver();
        }

        if (!(this instanceof lib$es6$promise$promise$$Promise)) {
          lib$es6$promise$promise$$needsNew();
        }

        lib$es6$promise$$internal$$initializePromise(this, resolver);
      }
    }

    lib$es6$promise$promise$$Promise.all = lib$es6$promise$promise$all$$default;
    lib$es6$promise$promise$$Promise.race = lib$es6$promise$promise$race$$default;
    lib$es6$promise$promise$$Promise.resolve = lib$es6$promise$promise$resolve$$default;
    lib$es6$promise$promise$$Promise.reject = lib$es6$promise$promise$reject$$default;
    lib$es6$promise$promise$$Promise._setScheduler = lib$es6$promise$asap$$setScheduler;
    lib$es6$promise$promise$$Promise._setAsap = lib$es6$promise$asap$$setAsap;
    lib$es6$promise$promise$$Promise._asap = lib$es6$promise$asap$$asap;

    lib$es6$promise$promise$$Promise.prototype = {
      constructor: lib$es6$promise$promise$$Promise,

    /**
      The primary way of interacting with a promise is through its `then` method,
      which registers callbacks to receive either a promise's eventual value or the
      reason why the promise cannot be fulfilled.

      ```js
      findUser().then(function(user){
        // user is available
      }, function(reason){
        // user is unavailable, and you are given the reason why
      });
      ```

      Chaining
      --------

      The return value of `then` is itself a promise.  This second, 'downstream'
      promise is resolved with the return value of the first promise's fulfillment
      or rejection handler, or rejected if the handler throws an exception.

      ```js
      findUser().then(function (user) {
        return user.name;
      }, function (reason) {
        return 'default name';
      }).then(function (userName) {
        // If `findUser` fulfilled, `userName` will be the user's name, otherwise it
        // will be `'default name'`
      });

      findUser().then(function (user) {
        throw new Error('Found user, but still unhappy');
      }, function (reason) {
        throw new Error('`findUser` rejected and we're unhappy');
      }).then(function (value) {
        // never reached
      }, function (reason) {
        // if `findUser` fulfilled, `reason` will be 'Found user, but still unhappy'.
        // If `findUser` rejected, `reason` will be '`findUser` rejected and we're unhappy'.
      });
      ```
      If the downstream promise does not specify a rejection handler, rejection reasons will be propagated further downstream.

      ```js
      findUser().then(function (user) {
        throw new PedagogicalException('Upstream error');
      }).then(function (value) {
        // never reached
      }).then(function (value) {
        // never reached
      }, function (reason) {
        // The `PedgagocialException` is propagated all the way down to here
      });
      ```

      Assimilation
      ------------

      Sometimes the value you want to propagate to a downstream promise can only be
      retrieved asynchronously. This can be achieved by returning a promise in the
      fulfillment or rejection handler. The downstream promise will then be pending
      until the returned promise is settled. This is called *assimilation*.

      ```js
      findUser().then(function (user) {
        return findCommentsByAuthor(user);
      }).then(function (comments) {
        // The user's comments are now available
      });
      ```

      If the assimliated promise rejects, then the downstream promise will also reject.

      ```js
      findUser().then(function (user) {
        return findCommentsByAuthor(user);
      }).then(function (comments) {
        // If `findCommentsByAuthor` fulfills, we'll have the value here
      }, function (reason) {
        // If `findCommentsByAuthor` rejects, we'll have the reason here
      });
      ```

      Simple Example
      --------------

      Synchronous Example

      ```javascript
      var result;

      try {
        result = findResult();
        // success
      } catch(reason) {
        // failure
      }
      ```

      Errback Example

      ```js
      findResult(function(result, err){
        if (err) {
          // failure
        } else {
          // success
        }
      });
      ```

      Promise Example;

      ```javascript
      findResult().then(function(result){
        // success
      }, function(reason){
        // failure
      });
      ```

      Advanced Example
      --------------

      Synchronous Example

      ```javascript
      var author, books;

      try {
        author = findAuthor();
        books  = findBooksByAuthor(author);
        // success
      } catch(reason) {
        // failure
      }
      ```

      Errback Example

      ```js

      function foundBooks(books) {

      }

      function failure(reason) {

      }

      findAuthor(function(author, err){
        if (err) {
          failure(err);
          // failure
        } else {
          try {
            findBoooksByAuthor(author, function(books, err) {
              if (err) {
                failure(err);
              } else {
                try {
                  foundBooks(books);
                } catch(reason) {
                  failure(reason);
                }
              }
            });
          } catch(error) {
            failure(err);
          }
          // success
        }
      });
      ```

      Promise Example;

      ```javascript
      findAuthor().
        then(findBooksByAuthor).
        then(function(books){
          // found books
      }).catch(function(reason){
        // something went wrong
      });
      ```

      @method then
      @param {Function} onFulfilled
      @param {Function} onRejected
      Useful for tooling.
      @return {Promise}
    */
      then: function(onFulfillment, onRejection) {
        var parent = this;
        var state = parent._state;

        if (state === lib$es6$promise$$internal$$FULFILLED && !onFulfillment || state === lib$es6$promise$$internal$$REJECTED && !onRejection) {
          return this;
        }

        var child = new this.constructor(lib$es6$promise$$internal$$noop);
        var result = parent._result;

        if (state) {
          var callback = arguments[state - 1];
          lib$es6$promise$asap$$asap(function(){
            lib$es6$promise$$internal$$invokeCallback(state, child, callback, result);
          });
        } else {
          lib$es6$promise$$internal$$subscribe(parent, child, onFulfillment, onRejection);
        }

        return child;
      },

    /**
      `catch` is simply sugar for `then(undefined, onRejection)` which makes it the same
      as the catch block of a try/catch statement.

      ```js
      function findAuthor(){
        throw new Error('couldn't find that author');
      }

      // synchronous
      try {
        findAuthor();
      } catch(reason) {
        // something went wrong
      }

      // async with promises
      findAuthor().catch(function(reason){
        // something went wrong
      });
      ```

      @method catch
      @param {Function} onRejection
      Useful for tooling.
      @return {Promise}
    */
      'catch': function(onRejection) {
        return this.then(null, onRejection);
      }
    };
    function lib$es6$promise$polyfill$$polyfill() {
      var local;

      if (typeof global !== 'undefined') {
          local = global;
      } else if (typeof self !== 'undefined') {
          local = self;
      } else {
          try {
              local = Function('return this')();
          } catch (e) {
              throw new Error('polyfill failed because global object is unavailable in this environment');
          }
      }

      var P = local.Promise;

      if (P && Object.prototype.toString.call(P.resolve()) === '[object Promise]' && !P.cast) {
        return;
      }

      local.Promise = lib$es6$promise$promise$$default;
    }
    var lib$es6$promise$polyfill$$default = lib$es6$promise$polyfill$$polyfill;

    var lib$es6$promise$umd$$ES6Promise = {
      'Promise': lib$es6$promise$promise$$default,
      'polyfill': lib$es6$promise$polyfill$$default
    };

    /* global define:true module:true window: true */
    if (typeof define === 'function' && define['amd']) {
      define(function() { return lib$es6$promise$umd$$ES6Promise; });
    } else if (typeof module !== 'undefined' && module['exports']) {
      module['exports'] = lib$es6$promise$umd$$ES6Promise;
    } else if (typeof this !== 'undefined') {
      this['ES6Promise'] = lib$es6$promise$umd$$ES6Promise;
    }

    lib$es6$promise$polyfill$$default();
}).call(this);


}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"_process":61}],60:[function(require,module,exports){
/* -*- mode: javascript; c-basic-offset: 4; indent-tabs-mode: nil -*- */

// 
// Javascript ZLib
// By Thomas Down 2010-2011
//
// Based very heavily on portions of jzlib (by ymnk@jcraft.com), who in
// turn credits Jean-loup Gailly and Mark Adler for the original zlib code.
//
// inflate.js: ZLib inflate code
//

//
// Shared constants
//

var MAX_WBITS=15; // 32K LZ77 window
var DEF_WBITS=MAX_WBITS;
var MAX_MEM_LEVEL=9;
var MANY=1440;
var BMAX = 15;

// preset dictionary flag in zlib header
var PRESET_DICT=0x20;

var Z_NO_FLUSH=0;
var Z_PARTIAL_FLUSH=1;
var Z_SYNC_FLUSH=2;
var Z_FULL_FLUSH=3;
var Z_FINISH=4;

var Z_DEFLATED=8;

var Z_OK=0;
var Z_STREAM_END=1;
var Z_NEED_DICT=2;
var Z_ERRNO=-1;
var Z_STREAM_ERROR=-2;
var Z_DATA_ERROR=-3;
var Z_MEM_ERROR=-4;
var Z_BUF_ERROR=-5;
var Z_VERSION_ERROR=-6;

var METHOD=0;   // waiting for method byte
var FLAG=1;     // waiting for flag byte
var DICT4=2;    // four dictionary check bytes to go
var DICT3=3;    // three dictionary check bytes to go
var DICT2=4;    // two dictionary check bytes to go
var DICT1=5;    // one dictionary check byte to go
var DICT0=6;    // waiting for inflateSetDictionary
var BLOCKS=7;   // decompressing blocks
var CHECK4=8;   // four check bytes to go
var CHECK3=9;   // three check bytes to go
var CHECK2=10;  // two check bytes to go
var CHECK1=11;  // one check byte to go
var DONE=12;    // finished check, done
var BAD=13;     // got an error--stay here

var inflate_mask = [0x00000000, 0x00000001, 0x00000003, 0x00000007, 0x0000000f, 0x0000001f, 0x0000003f, 0x0000007f, 0x000000ff, 0x000001ff, 0x000003ff, 0x000007ff, 0x00000fff, 0x00001fff, 0x00003fff, 0x00007fff, 0x0000ffff];

var IB_TYPE=0;  // get type bits (3, including end bit)
var IB_LENS=1;  // get lengths for stored
var IB_STORED=2;// processing stored block
var IB_TABLE=3; // get table lengths
var IB_BTREE=4; // get bit lengths tree for a dynamic block
var IB_DTREE=5; // get length, distance trees for a dynamic block
var IB_CODES=6; // processing fixed or dynamic block
var IB_DRY=7;   // output remaining window bytes
var IB_DONE=8;  // finished last block, done
var IB_BAD=9;   // ot a data error--stuck here

var fixed_bl = 9;
var fixed_bd = 5;

var fixed_tl = [
    96,7,256, 0,8,80, 0,8,16, 84,8,115,
    82,7,31, 0,8,112, 0,8,48, 0,9,192,
    80,7,10, 0,8,96, 0,8,32, 0,9,160,
    0,8,0, 0,8,128, 0,8,64, 0,9,224,
    80,7,6, 0,8,88, 0,8,24, 0,9,144,
    83,7,59, 0,8,120, 0,8,56, 0,9,208,
    81,7,17, 0,8,104, 0,8,40, 0,9,176,
    0,8,8, 0,8,136, 0,8,72, 0,9,240,
    80,7,4, 0,8,84, 0,8,20, 85,8,227,
    83,7,43, 0,8,116, 0,8,52, 0,9,200,
    81,7,13, 0,8,100, 0,8,36, 0,9,168,
    0,8,4, 0,8,132, 0,8,68, 0,9,232,
    80,7,8, 0,8,92, 0,8,28, 0,9,152,
    84,7,83, 0,8,124, 0,8,60, 0,9,216,
    82,7,23, 0,8,108, 0,8,44, 0,9,184,
    0,8,12, 0,8,140, 0,8,76, 0,9,248,
    80,7,3, 0,8,82, 0,8,18, 85,8,163,
    83,7,35, 0,8,114, 0,8,50, 0,9,196,
    81,7,11, 0,8,98, 0,8,34, 0,9,164,
    0,8,2, 0,8,130, 0,8,66, 0,9,228,
    80,7,7, 0,8,90, 0,8,26, 0,9,148,
    84,7,67, 0,8,122, 0,8,58, 0,9,212,
    82,7,19, 0,8,106, 0,8,42, 0,9,180,
    0,8,10, 0,8,138, 0,8,74, 0,9,244,
    80,7,5, 0,8,86, 0,8,22, 192,8,0,
    83,7,51, 0,8,118, 0,8,54, 0,9,204,
    81,7,15, 0,8,102, 0,8,38, 0,9,172,
    0,8,6, 0,8,134, 0,8,70, 0,9,236,
    80,7,9, 0,8,94, 0,8,30, 0,9,156,
    84,7,99, 0,8,126, 0,8,62, 0,9,220,
    82,7,27, 0,8,110, 0,8,46, 0,9,188,
    0,8,14, 0,8,142, 0,8,78, 0,9,252,
    96,7,256, 0,8,81, 0,8,17, 85,8,131,
    82,7,31, 0,8,113, 0,8,49, 0,9,194,
    80,7,10, 0,8,97, 0,8,33, 0,9,162,
    0,8,1, 0,8,129, 0,8,65, 0,9,226,
    80,7,6, 0,8,89, 0,8,25, 0,9,146,
    83,7,59, 0,8,121, 0,8,57, 0,9,210,
    81,7,17, 0,8,105, 0,8,41, 0,9,178,
    0,8,9, 0,8,137, 0,8,73, 0,9,242,
    80,7,4, 0,8,85, 0,8,21, 80,8,258,
    83,7,43, 0,8,117, 0,8,53, 0,9,202,
    81,7,13, 0,8,101, 0,8,37, 0,9,170,
    0,8,5, 0,8,133, 0,8,69, 0,9,234,
    80,7,8, 0,8,93, 0,8,29, 0,9,154,
    84,7,83, 0,8,125, 0,8,61, 0,9,218,
    82,7,23, 0,8,109, 0,8,45, 0,9,186,
    0,8,13, 0,8,141, 0,8,77, 0,9,250,
    80,7,3, 0,8,83, 0,8,19, 85,8,195,
    83,7,35, 0,8,115, 0,8,51, 0,9,198,
    81,7,11, 0,8,99, 0,8,35, 0,9,166,
    0,8,3, 0,8,131, 0,8,67, 0,9,230,
    80,7,7, 0,8,91, 0,8,27, 0,9,150,
    84,7,67, 0,8,123, 0,8,59, 0,9,214,
    82,7,19, 0,8,107, 0,8,43, 0,9,182,
    0,8,11, 0,8,139, 0,8,75, 0,9,246,
    80,7,5, 0,8,87, 0,8,23, 192,8,0,
    83,7,51, 0,8,119, 0,8,55, 0,9,206,
    81,7,15, 0,8,103, 0,8,39, 0,9,174,
    0,8,7, 0,8,135, 0,8,71, 0,9,238,
    80,7,9, 0,8,95, 0,8,31, 0,9,158,
    84,7,99, 0,8,127, 0,8,63, 0,9,222,
    82,7,27, 0,8,111, 0,8,47, 0,9,190,
    0,8,15, 0,8,143, 0,8,79, 0,9,254,
    96,7,256, 0,8,80, 0,8,16, 84,8,115,
    82,7,31, 0,8,112, 0,8,48, 0,9,193,

    80,7,10, 0,8,96, 0,8,32, 0,9,161,
    0,8,0, 0,8,128, 0,8,64, 0,9,225,
    80,7,6, 0,8,88, 0,8,24, 0,9,145,
    83,7,59, 0,8,120, 0,8,56, 0,9,209,
    81,7,17, 0,8,104, 0,8,40, 0,9,177,
    0,8,8, 0,8,136, 0,8,72, 0,9,241,
    80,7,4, 0,8,84, 0,8,20, 85,8,227,
    83,7,43, 0,8,116, 0,8,52, 0,9,201,
    81,7,13, 0,8,100, 0,8,36, 0,9,169,
    0,8,4, 0,8,132, 0,8,68, 0,9,233,
    80,7,8, 0,8,92, 0,8,28, 0,9,153,
    84,7,83, 0,8,124, 0,8,60, 0,9,217,
    82,7,23, 0,8,108, 0,8,44, 0,9,185,
    0,8,12, 0,8,140, 0,8,76, 0,9,249,
    80,7,3, 0,8,82, 0,8,18, 85,8,163,
    83,7,35, 0,8,114, 0,8,50, 0,9,197,
    81,7,11, 0,8,98, 0,8,34, 0,9,165,
    0,8,2, 0,8,130, 0,8,66, 0,9,229,
    80,7,7, 0,8,90, 0,8,26, 0,9,149,
    84,7,67, 0,8,122, 0,8,58, 0,9,213,
    82,7,19, 0,8,106, 0,8,42, 0,9,181,
    0,8,10, 0,8,138, 0,8,74, 0,9,245,
    80,7,5, 0,8,86, 0,8,22, 192,8,0,
    83,7,51, 0,8,118, 0,8,54, 0,9,205,
    81,7,15, 0,8,102, 0,8,38, 0,9,173,
    0,8,6, 0,8,134, 0,8,70, 0,9,237,
    80,7,9, 0,8,94, 0,8,30, 0,9,157,
    84,7,99, 0,8,126, 0,8,62, 0,9,221,
    82,7,27, 0,8,110, 0,8,46, 0,9,189,
    0,8,14, 0,8,142, 0,8,78, 0,9,253,
    96,7,256, 0,8,81, 0,8,17, 85,8,131,
    82,7,31, 0,8,113, 0,8,49, 0,9,195,
    80,7,10, 0,8,97, 0,8,33, 0,9,163,
    0,8,1, 0,8,129, 0,8,65, 0,9,227,
    80,7,6, 0,8,89, 0,8,25, 0,9,147,
    83,7,59, 0,8,121, 0,8,57, 0,9,211,
    81,7,17, 0,8,105, 0,8,41, 0,9,179,
    0,8,9, 0,8,137, 0,8,73, 0,9,243,
    80,7,4, 0,8,85, 0,8,21, 80,8,258,
    83,7,43, 0,8,117, 0,8,53, 0,9,203,
    81,7,13, 0,8,101, 0,8,37, 0,9,171,
    0,8,5, 0,8,133, 0,8,69, 0,9,235,
    80,7,8, 0,8,93, 0,8,29, 0,9,155,
    84,7,83, 0,8,125, 0,8,61, 0,9,219,
    82,7,23, 0,8,109, 0,8,45, 0,9,187,
    0,8,13, 0,8,141, 0,8,77, 0,9,251,
    80,7,3, 0,8,83, 0,8,19, 85,8,195,
    83,7,35, 0,8,115, 0,8,51, 0,9,199,
    81,7,11, 0,8,99, 0,8,35, 0,9,167,
    0,8,3, 0,8,131, 0,8,67, 0,9,231,
    80,7,7, 0,8,91, 0,8,27, 0,9,151,
    84,7,67, 0,8,123, 0,8,59, 0,9,215,
    82,7,19, 0,8,107, 0,8,43, 0,9,183,
    0,8,11, 0,8,139, 0,8,75, 0,9,247,
    80,7,5, 0,8,87, 0,8,23, 192,8,0,
    83,7,51, 0,8,119, 0,8,55, 0,9,207,
    81,7,15, 0,8,103, 0,8,39, 0,9,175,
    0,8,7, 0,8,135, 0,8,71, 0,9,239,
    80,7,9, 0,8,95, 0,8,31, 0,9,159,
    84,7,99, 0,8,127, 0,8,63, 0,9,223,
    82,7,27, 0,8,111, 0,8,47, 0,9,191,
    0,8,15, 0,8,143, 0,8,79, 0,9,255
];
var fixed_td = [
    80,5,1, 87,5,257, 83,5,17, 91,5,4097,
    81,5,5, 89,5,1025, 85,5,65, 93,5,16385,
    80,5,3, 88,5,513, 84,5,33, 92,5,8193,
    82,5,9, 90,5,2049, 86,5,129, 192,5,24577,
    80,5,2, 87,5,385, 83,5,25, 91,5,6145,
    81,5,7, 89,5,1537, 85,5,97, 93,5,24577,
    80,5,4, 88,5,769, 84,5,49, 92,5,12289,
    82,5,13, 90,5,3073, 86,5,193, 192,5,24577
];

  // Tables for deflate from PKZIP's appnote.txt.
  var cplens = [ // Copy lengths for literal codes 257..285
        3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31,
        35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258, 0, 0
  ];

  // see note #13 above about 258
  var cplext = [ // Extra bits for literal codes 257..285
        0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2,
        3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0, 112, 112  // 112==invalid
  ];

 var cpdist = [ // Copy offsets for distance codes 0..29
        1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193,
        257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145,
        8193, 12289, 16385, 24577
  ];

  var cpdext = [ // Extra bits for distance codes
        0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6,
        7, 7, 8, 8, 9, 9, 10, 10, 11, 11,
        12, 12, 13, 13];

//
// ZStream.java
//

function ZStream() {
}


ZStream.prototype.inflateInit = function(w, nowrap) {
    if (!w) {
	w = DEF_WBITS;
    }
    if (nowrap) {
	nowrap = false;
    }
    this.istate = new Inflate();
    return this.istate.inflateInit(this, nowrap?-w:w);
}

ZStream.prototype.inflate = function(f) {
    if(this.istate==null) return Z_STREAM_ERROR;
    return this.istate.inflate(this, f);
}

ZStream.prototype.inflateEnd = function(){
    if(this.istate==null) return Z_STREAM_ERROR;
    var ret=istate.inflateEnd(this);
    this.istate = null;
    return ret;
}
ZStream.prototype.inflateSync = function(){
    // if(istate == null) return Z_STREAM_ERROR;
    return istate.inflateSync(this);
}
ZStream.prototype.inflateSetDictionary = function(dictionary, dictLength){
    // if(istate == null) return Z_STREAM_ERROR;
    return istate.inflateSetDictionary(this, dictionary, dictLength);
}

/*

  public int deflateInit(int level){
    return deflateInit(level, MAX_WBITS);
  }
  public int deflateInit(int level, boolean nowrap){
    return deflateInit(level, MAX_WBITS, nowrap);
  }
  public int deflateInit(int level, int bits){
    return deflateInit(level, bits, false);
  }
  public int deflateInit(int level, int bits, boolean nowrap){
    dstate=new Deflate();
    return dstate.deflateInit(this, level, nowrap?-bits:bits);
  }
  public int deflate(int flush){
    if(dstate==null){
      return Z_STREAM_ERROR;
    }
    return dstate.deflate(this, flush);
  }
  public int deflateEnd(){
    if(dstate==null) return Z_STREAM_ERROR;
    int ret=dstate.deflateEnd();
    dstate=null;
    return ret;
  }
  public int deflateParams(int level, int strategy){
    if(dstate==null) return Z_STREAM_ERROR;
    return dstate.deflateParams(this, level, strategy);
  }
  public int deflateSetDictionary (byte[] dictionary, int dictLength){
    if(dstate == null)
      return Z_STREAM_ERROR;
    return dstate.deflateSetDictionary(this, dictionary, dictLength);
  }

*/

/*
  // Flush as much pending output as possible. All deflate() output goes
  // through this function so some applications may wish to modify it
  // to avoid allocating a large strm->next_out buffer and copying into it.
  // (See also read_buf()).
  void flush_pending(){
    int len=dstate.pending;

    if(len>avail_out) len=avail_out;
    if(len==0) return;

    if(dstate.pending_buf.length<=dstate.pending_out ||
       next_out.length<=next_out_index ||
       dstate.pending_buf.length<(dstate.pending_out+len) ||
       next_out.length<(next_out_index+len)){
      System.out.println(dstate.pending_buf.length+", "+dstate.pending_out+
			 ", "+next_out.length+", "+next_out_index+", "+len);
      System.out.println("avail_out="+avail_out);
    }

    System.arraycopy(dstate.pending_buf, dstate.pending_out,
		     next_out, next_out_index, len);

    next_out_index+=len;
    dstate.pending_out+=len;
    total_out+=len;
    avail_out-=len;
    dstate.pending-=len;
    if(dstate.pending==0){
      dstate.pending_out=0;
    }
  }

  // Read a new buffer from the current input stream, update the adler32
  // and total number of bytes read.  All deflate() input goes through
  // this function so some applications may wish to modify it to avoid
  // allocating a large strm->next_in buffer and copying from it.
  // (See also flush_pending()).
  int read_buf(byte[] buf, int start, int size) {
    int len=avail_in;

    if(len>size) len=size;
    if(len==0) return 0;

    avail_in-=len;

    if(dstate.noheader==0) {
      adler=_adler.adler32(adler, next_in, next_in_index, len);
    }
    System.arraycopy(next_in, next_in_index, buf, start, len);
    next_in_index  += len;
    total_in += len;
    return len;
  }

  public void free(){
    next_in=null;
    next_out=null;
    msg=null;
    _adler=null;
  }
}
*/


//
// Inflate.java
//

function Inflate() {
    this.was = [0];
}

Inflate.prototype.inflateReset = function(z) {
    if(z == null || z.istate == null) return Z_STREAM_ERROR;
    
    z.total_in = z.total_out = 0;
    z.msg = null;
    z.istate.mode = z.istate.nowrap!=0 ? BLOCKS : METHOD;
    z.istate.blocks.reset(z, null);
    return Z_OK;
}

Inflate.prototype.inflateEnd = function(z){
    if(this.blocks != null)
      this.blocks.free(z);
    this.blocks=null;
    return Z_OK;
}

Inflate.prototype.inflateInit = function(z, w){
    z.msg = null;
    this.blocks = null;

    // handle undocumented nowrap option (no zlib header or check)
    nowrap = 0;
    if(w < 0){
      w = - w;
      nowrap = 1;
    }

    // set window size
    if(w<8 ||w>15){
      this.inflateEnd(z);
      return Z_STREAM_ERROR;
    }
    this.wbits=w;

    z.istate.blocks=new InfBlocks(z, 
				  z.istate.nowrap!=0 ? null : this,
				  1<<w);

    // reset state
    this.inflateReset(z);
    return Z_OK;
  }

Inflate.prototype.inflate = function(z, f){
    var r, b;

    if(z == null || z.istate == null || z.next_in == null)
      return Z_STREAM_ERROR;
    f = f == Z_FINISH ? Z_BUF_ERROR : Z_OK;
    r = Z_BUF_ERROR;
    while (true){
      switch (z.istate.mode){
      case METHOD:

        if(z.avail_in==0)return r;r=f;

        z.avail_in--; z.total_in++;
        if(((z.istate.method = z.next_in[z.next_in_index++])&0xf)!=Z_DEFLATED){
          z.istate.mode = BAD;
          z.msg="unknown compression method";
          z.istate.marker = 5;       // can't try inflateSync
          break;
        }
        if((z.istate.method>>4)+8>z.istate.wbits){
          z.istate.mode = BAD;
          z.msg="invalid window size";
          z.istate.marker = 5;       // can't try inflateSync
          break;
        }
        z.istate.mode=FLAG;
      case FLAG:

        if(z.avail_in==0)return r;r=f;

        z.avail_in--; z.total_in++;
        b = (z.next_in[z.next_in_index++])&0xff;

        if((((z.istate.method << 8)+b) % 31)!=0){
          z.istate.mode = BAD;
          z.msg = "incorrect header check";
          z.istate.marker = 5;       // can't try inflateSync
          break;
        }

        if((b&PRESET_DICT)==0){
          z.istate.mode = BLOCKS;
          break;
        }
        z.istate.mode = DICT4;
      case DICT4:

        if(z.avail_in==0)return r;r=f;

        z.avail_in--; z.total_in++;
        z.istate.need=((z.next_in[z.next_in_index++]&0xff)<<24)&0xff000000;
        z.istate.mode=DICT3;
      case DICT3:

        if(z.avail_in==0)return r;r=f;

        z.avail_in--; z.total_in++;
        z.istate.need+=((z.next_in[z.next_in_index++]&0xff)<<16)&0xff0000;
        z.istate.mode=DICT2;
      case DICT2:

        if(z.avail_in==0)return r;r=f;

        z.avail_in--; z.total_in++;
        z.istate.need+=((z.next_in[z.next_in_index++]&0xff)<<8)&0xff00;
        z.istate.mode=DICT1;
      case DICT1:

        if(z.avail_in==0)return r;r=f;

        z.avail_in--; z.total_in++;
        z.istate.need += (z.next_in[z.next_in_index++]&0xff);
        z.adler = z.istate.need;
        z.istate.mode = DICT0;
        return Z_NEED_DICT;
      case DICT0:
        z.istate.mode = BAD;
        z.msg = "need dictionary";
        z.istate.marker = 0;       // can try inflateSync
        return Z_STREAM_ERROR;
      case BLOCKS:

        r = z.istate.blocks.proc(z, r);
        if(r == Z_DATA_ERROR){
          z.istate.mode = BAD;
          z.istate.marker = 0;     // can try inflateSync
          break;
        }
        if(r == Z_OK){
          r = f;
        }
        if(r != Z_STREAM_END){
          return r;
        }
        r = f;
        z.istate.blocks.reset(z, z.istate.was);
        if(z.istate.nowrap!=0){
          z.istate.mode=DONE;
          break;
        }
        z.istate.mode=CHECK4;
      case CHECK4:

        if(z.avail_in==0)return r;r=f;

        z.avail_in--; z.total_in++;
        z.istate.need=((z.next_in[z.next_in_index++]&0xff)<<24)&0xff000000;
        z.istate.mode=CHECK3;
      case CHECK3:

        if(z.avail_in==0)return r;r=f;

        z.avail_in--; z.total_in++;
        z.istate.need+=((z.next_in[z.next_in_index++]&0xff)<<16)&0xff0000;
        z.istate.mode = CHECK2;
      case CHECK2:

        if(z.avail_in==0)return r;r=f;

        z.avail_in--; z.total_in++;
        z.istate.need+=((z.next_in[z.next_in_index++]&0xff)<<8)&0xff00;
        z.istate.mode = CHECK1;
      case CHECK1:

        if(z.avail_in==0)return r;r=f;

        z.avail_in--; z.total_in++;
        z.istate.need+=(z.next_in[z.next_in_index++]&0xff);

        if(((z.istate.was[0])) != ((z.istate.need))){
          z.istate.mode = BAD;
          z.msg = "incorrect data check";
          z.istate.marker = 5;       // can't try inflateSync
          break;
        }

        z.istate.mode = DONE;
      case DONE:
        return Z_STREAM_END;
      case BAD:
        return Z_DATA_ERROR;
      default:
        return Z_STREAM_ERROR;
      }
    }
  }


Inflate.prototype.inflateSetDictionary = function(z,  dictionary, dictLength) {
    var index=0;
    var length = dictLength;
    if(z==null || z.istate == null|| z.istate.mode != DICT0)
      return Z_STREAM_ERROR;

    if(z._adler.adler32(1, dictionary, 0, dictLength)!=z.adler){
      return Z_DATA_ERROR;
    }

    z.adler = z._adler.adler32(0, null, 0, 0);

    if(length >= (1<<z.istate.wbits)){
      length = (1<<z.istate.wbits)-1;
      index=dictLength - length;
    }
    z.istate.blocks.set_dictionary(dictionary, index, length);
    z.istate.mode = BLOCKS;
    return Z_OK;
  }

//  static private byte[] mark = {(byte)0, (byte)0, (byte)0xff, (byte)0xff};
var mark = [0, 0, 255, 255]

Inflate.prototype.inflateSync = function(z){
    var n;       // number of bytes to look at
    var p;       // pointer to bytes
    var m;       // number of marker bytes found in a row
    var r, w;   // temporaries to save total_in and total_out

    // set up
    if(z == null || z.istate == null)
      return Z_STREAM_ERROR;
    if(z.istate.mode != BAD){
      z.istate.mode = BAD;
      z.istate.marker = 0;
    }
    if((n=z.avail_in)==0)
      return Z_BUF_ERROR;
    p=z.next_in_index;
    m=z.istate.marker;

    // search
    while (n!=0 && m < 4){
      if(z.next_in[p] == mark[m]){
        m++;
      }
      else if(z.next_in[p]!=0){
        m = 0;
      }
      else{
        m = 4 - m;
      }
      p++; n--;
    }

    // restore
    z.total_in += p-z.next_in_index;
    z.next_in_index = p;
    z.avail_in = n;
    z.istate.marker = m;

    // return no joy or set up to restart on a new block
    if(m != 4){
      return Z_DATA_ERROR;
    }
    r=z.total_in;  w=z.total_out;
    this.inflateReset(z);
    z.total_in=r;  z.total_out = w;
    z.istate.mode = BLOCKS;
    return Z_OK;
}

  // Returns true if inflate is currently at the end of a block generated
  // by Z_SYNC_FLUSH or Z_FULL_FLUSH. This function is used by one PPP
  // implementation to provide an additional safety check. PPP uses Z_SYNC_FLUSH
  // but removes the length bytes of the resulting empty stored block. When
  // decompressing, PPP checks that at the end of input packet, inflate is
  // waiting for these length bytes.
Inflate.prototype.inflateSyncPoint = function(z){
    if(z == null || z.istate == null || z.istate.blocks == null)
      return Z_STREAM_ERROR;
    return z.istate.blocks.sync_point();
}


//
// InfBlocks.java
//

var INFBLOCKS_BORDER = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15];

function InfBlocks(z, checkfn, w) {
    this.hufts=new Int32Array(MANY*3);
    this.window=new Uint8Array(w);
    this.end=w;
    this.checkfn = checkfn;
    this.mode = IB_TYPE;
    this.reset(z, null);

    this.left = 0;            // if STORED, bytes left to copy 

    this.table = 0;           // table lengths (14 bits) 
    this.index = 0;           // index into blens (or border) 
    this.blens = null;         // bit lengths of codes 
    this.bb=new Int32Array(1); // bit length tree depth 
    this.tb=new Int32Array(1); // bit length decoding tree 

    this.codes = new InfCodes();

    this.last = 0;            // true if this block is the last block 

  // mode independent information 
    this.bitk = 0;            // bits in bit buffer 
    this.bitb = 0;            // bit buffer 
    this.read = 0;            // window read pointer 
    this.write = 0;           // window write pointer 
    this.check = 0;          // check on output 

    this.inftree=new InfTree();
}




InfBlocks.prototype.reset = function(z, c){
    if(c) c[0]=this.check;
    if(this.mode==IB_CODES){
      this.codes.free(z);
    }
    this.mode=IB_TYPE;
    this.bitk=0;
    this.bitb=0;
    this.read=this.write=0;

    if(this.checkfn)
      z.adler=this.check=z._adler.adler32(0, null, 0, 0);
  }

 InfBlocks.prototype.proc = function(z, r){
    var t;              // temporary storage
    var b;              // bit buffer
    var k;              // bits in bit buffer
    var p;              // input data pointer
    var n;              // bytes available there
    var q;              // output window write pointer
    var m;              // bytes to end of window or read pointer

    // copy input/output information to locals (UPDATE macro restores)
    {p=z.next_in_index;n=z.avail_in;b=this.bitb;k=this.bitk;}
    {q=this.write;m=(q<this.read ? this.read-q-1 : this.end-q);}

    // process input based on current state
    while(true){
      switch (this.mode){
      case IB_TYPE:

	while(k<(3)){
	  if(n!=0){
	    r=Z_OK;
	  }
	  else{
	    this.bitb=b; this.bitk=k; 
	    z.avail_in=n;
	    z.total_in+=p-z.next_in_index;z.next_in_index=p;
	    this.write=q;
	    return this.inflate_flush(z,r);
	  };
	  n--;
	  b|=(z.next_in[p++]&0xff)<<k;
	  k+=8;
	}
	t = (b & 7);
	this.last = t & 1;

	switch (t >>> 1){
        case 0:                         // stored 
          {b>>>=(3);k-=(3);}
          t = k & 7;                    // go to byte boundary

          {b>>>=(t);k-=(t);}
          this.mode = IB_LENS;                  // get length of stored block
          break;
        case 1:                         // fixed
          {
              var bl=new Int32Array(1);
	      var bd=new Int32Array(1);
              var tl=[];
	      var td=[];

	      inflate_trees_fixed(bl, bd, tl, td, z);
              this.codes.init(bl[0], bd[0], tl[0], 0, td[0], 0, z);
          }

          {b>>>=(3);k-=(3);}

          this.mode = IB_CODES;
          break;
        case 2:                         // dynamic

          {b>>>=(3);k-=(3);}

          this.mode = IB_TABLE;
          break;
        case 3:                         // illegal

          {b>>>=(3);k-=(3);}
          this.mode = BAD;
          z.msg = "invalid block type";
          r = Z_DATA_ERROR;

	  this.bitb=b; this.bitk=k; 
	  z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
	  this.write=q;
	  return this.inflate_flush(z,r);
	}
	break;
      case IB_LENS:
	while(k<(32)){
	  if(n!=0){
	    r=Z_OK;
	  }
	  else{
	    this.bitb=b; this.bitk=k; 
	    z.avail_in=n;
	    z.total_in+=p-z.next_in_index;z.next_in_index=p;
	    this.write=q;
	    return this.inflate_flush(z,r);
	  };
	  n--;
	  b|=(z.next_in[p++]&0xff)<<k;
	  k+=8;
	}

	if ((((~b) >>> 16) & 0xffff) != (b & 0xffff)){
	  this.mode = BAD;
	  z.msg = "invalid stored block lengths";
	  r = Z_DATA_ERROR;

	  this.bitb=b; this.bitk=k; 
	  z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
	  this.write=q;
	  return this.inflate_flush(z,r);
	}
	this.left = (b & 0xffff);
	b = k = 0;                       // dump bits
	this.mode = this.left!=0 ? IB_STORED : (this.last!=0 ? IB_DRY : IB_TYPE);
	break;
      case IB_STORED:
	if (n == 0){
	  this.bitb=b; this.bitk=k; 
	  z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
	  write=q;
	  return this.inflate_flush(z,r);
	}

	if(m==0){
	  if(q==end&&read!=0){
	    q=0; m=(q<this.read ? this.read-q-1 : this.end-q);
	  }
	  if(m==0){
	    this.write=q; 
	    r=this.inflate_flush(z,r);
	    q=this.write; m = (q < this.read ? this.read-q-1 : this.end-q);
	    if(q==this.end && this.read != 0){
	      q=0; m = (q < this.read ? this.read-q-1 : this.end-q);
	    }
	    if(m==0){
	      this.bitb=b; this.bitk=k; 
	      z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
	      this.write=q;
	      return this.inflate_flush(z,r);
	    }
	  }
	}
	r=Z_OK;

	t = this.left;
	if(t>n) t = n;
	if(t>m) t = m;
	arrayCopy(z.next_in, p, this.window, q, t);
	p += t;  n -= t;
	q += t;  m -= t;
	if ((this.left -= t) != 0)
	  break;
	this.mode = (this.last != 0 ? IB_DRY : IB_TYPE);
	break;
      case IB_TABLE:

	while(k<(14)){
	  if(n!=0){
	    r=Z_OK;
	  }
	  else{
	    this.bitb=b; this.bitk=k; 
	    z.avail_in=n;
	    z.total_in+=p-z.next_in_index;z.next_in_index=p;
	    this.write=q;
	    return this.inflate_flush(z,r);
	  };
	  n--;
	  b|=(z.next_in[p++]&0xff)<<k;
	  k+=8;
	}

	this.table = t = (b & 0x3fff);
	if ((t & 0x1f) > 29 || ((t >> 5) & 0x1f) > 29)
	  {
	    this.mode = IB_BAD;
	    z.msg = "too many length or distance symbols";
	    r = Z_DATA_ERROR;

	    this.bitb=b; this.bitk=k; 
	    z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
	    this.write=q;
	    return this.inflate_flush(z,r);
	  }
	t = 258 + (t & 0x1f) + ((t >> 5) & 0x1f);
	if(this.blens==null || this.blens.length<t){
	    this.blens=new Int32Array(t);
	}
	else{
	  for(var i=0; i<t; i++){
              this.blens[i]=0;
          }
	}

	{b>>>=(14);k-=(14);}

	this.index = 0;
	mode = IB_BTREE;
      case IB_BTREE:
	while (this.index < 4 + (this.table >>> 10)){
	  while(k<(3)){
	    if(n!=0){
	      r=Z_OK;
	    }
	    else{
	      this.bitb=b; this.bitk=k; 
	      z.avail_in=n;
	      z.total_in+=p-z.next_in_index;z.next_in_index=p;
	      this.write=q;
	      return this.inflate_flush(z,r);
	    };
	    n--;
	    b|=(z.next_in[p++]&0xff)<<k;
	    k+=8;
	  }

	  this.blens[INFBLOCKS_BORDER[this.index++]] = b&7;

	  {b>>>=(3);k-=(3);}
	}

	while(this.index < 19){
	  this.blens[INFBLOCKS_BORDER[this.index++]] = 0;
	}

	this.bb[0] = 7;
	t = this.inftree.inflate_trees_bits(this.blens, this.bb, this.tb, this.hufts, z);
	if (t != Z_OK){
	  r = t;
	  if (r == Z_DATA_ERROR){
	    this.blens=null;
	    this.mode = IB_BAD;
	  }

	  this.bitb=b; this.bitk=k; 
	  z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
	  write=q;
	  return this.inflate_flush(z,r);
	}

	this.index = 0;
	this.mode = IB_DTREE;
      case IB_DTREE:
	while (true){
	  t = this.table;
	  if(!(this.index < 258 + (t & 0x1f) + ((t >> 5) & 0x1f))){
	    break;
	  }

	  var h; //int[]
	  var i, j, c;

	  t = this.bb[0];

	  while(k<(t)){
	    if(n!=0){
	      r=Z_OK;
	    }
	    else{
	      this.bitb=b; this.bitk=k; 
	      z.avail_in=n;
	      z.total_in+=p-z.next_in_index;z.next_in_index=p;
	      this.write=q;
	      return this.inflate_flush(z,r);
	    };
	    n--;
	    b|=(z.next_in[p++]&0xff)<<k;
	    k+=8;
	  }

//	  if (this.tb[0]==-1){
//            dlog("null...");
//	  }

	  t=this.hufts[(this.tb[0]+(b & inflate_mask[t]))*3+1];
	  c=this.hufts[(this.tb[0]+(b & inflate_mask[t]))*3+2];

	  if (c < 16){
	    b>>>=(t);k-=(t);
	    this.blens[this.index++] = c;
	  }
	  else { // c == 16..18
	    i = c == 18 ? 7 : c - 14;
	    j = c == 18 ? 11 : 3;

	    while(k<(t+i)){
	      if(n!=0){
		r=Z_OK;
	      }
	      else{
		this.bitb=b; this.bitk=k; 
		z.avail_in=n;
		z.total_in+=p-z.next_in_index;z.next_in_index=p;
		this.write=q;
		return this.inflate_flush(z,r);
	      };
	      n--;
	      b|=(z.next_in[p++]&0xff)<<k;
	      k+=8;
	    }

	    b>>>=(t);k-=(t);

	    j += (b & inflate_mask[i]);

	    b>>>=(i);k-=(i);

	    i = this.index;
	    t = this.table;
	    if (i + j > 258 + (t & 0x1f) + ((t >> 5) & 0x1f) ||
		(c == 16 && i < 1)){
	      this.blens=null;
	      this.mode = IB_BAD;
	      z.msg = "invalid bit length repeat";
	      r = Z_DATA_ERROR;

	      this.bitb=b; this.bitk=k; 
	      z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
	      this.write=q;
	      return this.inflate_flush(z,r);
	    }

	    c = c == 16 ? this.blens[i-1] : 0;
	    do{
	      this.blens[i++] = c;
	    }
	    while (--j!=0);
	    this.index = i;
	  }
	}

	this.tb[0]=-1;
	{
	    var bl=new Int32Array(1);
	    var bd=new Int32Array(1);
	    var tl=new Int32Array(1);
	    var td=new Int32Array(1);
	    bl[0] = 9;         // must be <= 9 for lookahead assumptions
	    bd[0] = 6;         // must be <= 9 for lookahead assumptions

	    t = this.table;
	    t = this.inftree.inflate_trees_dynamic(257 + (t & 0x1f), 
					      1 + ((t >> 5) & 0x1f),
					      this.blens, bl, bd, tl, td, this.hufts, z);

	    if (t != Z_OK){
	        if (t == Z_DATA_ERROR){
	            this.blens=null;
	            this.mode = BAD;
	        }
	        r = t;

	        this.bitb=b; this.bitk=k; 
	        z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
	        this.write=q;
	        return this.inflate_flush(z,r);
	    }
	    this.codes.init(bl[0], bd[0], this.hufts, tl[0], this.hufts, td[0], z);
	}
	this.mode = IB_CODES;
      case IB_CODES:
	this.bitb=b; this.bitk=k;
	z.avail_in=n; z.total_in+=p-z.next_in_index;z.next_in_index=p;
	this.write=q;

	if ((r = this.codes.proc(this, z, r)) != Z_STREAM_END){
	  return this.inflate_flush(z, r);
	}
	r = Z_OK;
	this.codes.free(z);

	p=z.next_in_index; n=z.avail_in;b=this.bitb;k=this.bitk;
	q=this.write;m = (q < this.read ? this.read-q-1 : this.end-q);

	if (this.last==0){
	  this.mode = IB_TYPE;
	  break;
	}
	this.mode = IB_DRY;
      case IB_DRY:
	this.write=q; 
	r = this.inflate_flush(z, r); 
	q=this.write; m = (q < this.read ? this.read-q-1 : this.end-q);
	if (this.read != this.write){
	  this.bitb=b; this.bitk=k; 
	  z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
	  this.write=q;
	  return this.inflate_flush(z, r);
	}
	mode = DONE;
      case IB_DONE:
	r = Z_STREAM_END;

	this.bitb=b; this.bitk=k; 
	z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
	this.write=q;
	return this.inflate_flush(z, r);
      case IB_BAD:
	r = Z_DATA_ERROR;

	this.bitb=b; this.bitk=k; 
	z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
	this.write=q;
	return this.inflate_flush(z, r);

      default:
	r = Z_STREAM_ERROR;

	this.bitb=b; this.bitk=k; 
	z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
	this.write=q;
	return this.inflate_flush(z, r);
      }
    }
  }

InfBlocks.prototype.free = function(z){
    this.reset(z, null);
    this.window=null;
    this.hufts=null;
}

InfBlocks.prototype.set_dictionary = function(d, start, n){
    arrayCopy(d, start, window, 0, n);
    this.read = this.write = n;
}

  // Returns true if inflate is currently at the end of a block generated
  // by Z_SYNC_FLUSH or Z_FULL_FLUSH. 
InfBlocks.prototype.sync_point = function(){
    return this.mode == IB_LENS;
}

  // copy as much as possible from the sliding window to the output area
InfBlocks.prototype.inflate_flush = function(z, r){
    var n;
    var p;
    var q;

    // local copies of source and destination pointers
    p = z.next_out_index;
    q = this.read;

    // compute number of bytes to copy as far as end of window
    n = ((q <= this.write ? this.write : this.end) - q);
    if (n > z.avail_out) n = z.avail_out;
    if (n!=0 && r == Z_BUF_ERROR) r = Z_OK;

    // update counters
    z.avail_out -= n;
    z.total_out += n;

    // update check information
    if(this.checkfn != null)
      z.adler=this.check=z._adler.adler32(this.check, this.window, q, n);

    // copy as far as end of window
    arrayCopy(this.window, q, z.next_out, p, n);
    p += n;
    q += n;

    // see if more to copy at beginning of window
    if (q == this.end){
      // wrap pointers
      q = 0;
      if (this.write == this.end)
        this.write = 0;

      // compute bytes to copy
      n = this.write - q;
      if (n > z.avail_out) n = z.avail_out;
      if (n!=0 && r == Z_BUF_ERROR) r = Z_OK;

      // update counters
      z.avail_out -= n;
      z.total_out += n;

      // update check information
      if(this.checkfn != null)
	z.adler=this.check=z._adler.adler32(this.check, this.window, q, n);

      // copy
      arrayCopy(this.window, q, z.next_out, p, n);
      p += n;
      q += n;
    }

    // update pointers
    z.next_out_index = p;
    this.read = q;

    // done
    return r;
  }

//
// InfCodes.java
//

var IC_START=0;  // x: set up for LEN
var IC_LEN=1;    // i: get length/literal/eob next
var IC_LENEXT=2; // i: getting length extra (have base)
var IC_DIST=3;   // i: get distance next
var IC_DISTEXT=4;// i: getting distance extra
var IC_COPY=5;   // o: copying bytes in window, waiting for space
var IC_LIT=6;    // o: got literal, waiting for output space
var IC_WASH=7;   // o: got eob, possibly still output waiting
var IC_END=8;    // x: got eob and all data flushed
var IC_BADCODE=9;// x: got error

function InfCodes() {
}

InfCodes.prototype.init = function(bl, bd, tl, tl_index, td, td_index, z) {
    this.mode=IC_START;
    this.lbits=bl;
    this.dbits=bd;
    this.ltree=tl;
    this.ltree_index=tl_index;
    this.dtree = td;
    this.dtree_index=td_index;
    this.tree=null;
}

InfCodes.prototype.proc = function(s, z, r){ 
    var j;              // temporary storage
    var t;              // temporary pointer (int[])
    var tindex;         // temporary pointer
    var e;              // extra bits or operation
    var b=0;            // bit buffer
    var k=0;            // bits in bit buffer
    var p=0;            // input data pointer
    var n;              // bytes available there
    var q;              // output window write pointer
    var m;              // bytes to end of window or read pointer
    var f;              // pointer to copy strings from

    // copy input/output information to locals (UPDATE macro restores)
    p=z.next_in_index;n=z.avail_in;b=s.bitb;k=s.bitk;
    q=s.write;m=q<s.read?s.read-q-1:s.end-q;

    // process input and output based on current state
    while (true){
      switch (this.mode){
	// waiting for "i:"=input, "o:"=output, "x:"=nothing
      case IC_START:         // x: set up for LEN
	if (m >= 258 && n >= 10){

	  s.bitb=b;s.bitk=k;
	  z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
	  s.write=q;
	  r = this.inflate_fast(this.lbits, this.dbits, 
			   this.ltree, this.ltree_index, 
			   this.dtree, this.dtree_index,
			   s, z);

	  p=z.next_in_index;n=z.avail_in;b=s.bitb;k=s.bitk;
	  q=s.write;m=q<s.read?s.read-q-1:s.end-q;

	  if (r != Z_OK){
	    this.mode = r == Z_STREAM_END ? IC_WASH : IC_BADCODE;
	    break;
	  }
	}
	this.need = this.lbits;
	this.tree = this.ltree;
	this.tree_index=this.ltree_index;

	this.mode = IC_LEN;
      case IC_LEN:           // i: get length/literal/eob next
	j = this.need;

	while(k<(j)){
	  if(n!=0)r=Z_OK;
	  else{

	    s.bitb=b;s.bitk=k;
	    z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
	    s.write=q;
	    return s.inflate_flush(z,r);
	  }
	  n--;
	  b|=(z.next_in[p++]&0xff)<<k;
	  k+=8;
	}

	tindex=(this.tree_index+(b&inflate_mask[j]))*3;

	b>>>=(this.tree[tindex+1]);
	k-=(this.tree[tindex+1]);

	e=this.tree[tindex];

	if(e == 0){               // literal
	  this.lit = this.tree[tindex+2];
	  this.mode = IC_LIT;
	  break;
	}
	if((e & 16)!=0 ){          // length
	  this.get = e & 15;
	  this.len = this.tree[tindex+2];
	  this.mode = IC_LENEXT;
	  break;
	}
	if ((e & 64) == 0){        // next table
	  this.need = e;
	  this.tree_index = tindex/3 + this.tree[tindex+2];
	  break;
	}
	if ((e & 32)!=0){               // end of block
	  this.mode = IC_WASH;
	  break;
	}
	this.mode = IC_BADCODE;        // invalid code
	z.msg = "invalid literal/length code";
	r = Z_DATA_ERROR;

	s.bitb=b;s.bitk=k;
	z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
	s.write=q;
	return s.inflate_flush(z,r);

      case IC_LENEXT:        // i: getting length extra (have base)
	j = this.get;

	while(k<(j)){
	  if(n!=0)r=Z_OK;
	  else{

	    s.bitb=b;s.bitk=k;
	    z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
	    s.write=q;
	    return s.inflate_flush(z,r);
	  }
	  n--; b|=(z.next_in[p++]&0xff)<<k;
	  k+=8;
	}

	this.len += (b & inflate_mask[j]);

	b>>=j;
	k-=j;

	this.need = this.dbits;
	this.tree = this.dtree;
	this.tree_index = this.dtree_index;
	this.mode = IC_DIST;
      case IC_DIST:          // i: get distance next
	j = this.need;

	while(k<(j)){
	  if(n!=0)r=Z_OK;
	  else{

	    s.bitb=b;s.bitk=k;
	    z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
	    s.write=q;
	    return s.inflate_flush(z,r);
	  }
	  n--; b|=(z.next_in[p++]&0xff)<<k;
	  k+=8;
	}

	tindex=(this.tree_index+(b & inflate_mask[j]))*3;

	b>>=this.tree[tindex+1];
	k-=this.tree[tindex+1];

	e = (this.tree[tindex]);
	if((e & 16)!=0){               // distance
	  this.get = e & 15;
	  this.dist = this.tree[tindex+2];
	  this.mode = IC_DISTEXT;
	  break;
	}
	if ((e & 64) == 0){        // next table
	  this.need = e;
	  this.tree_index = tindex/3 + this.tree[tindex+2];
	  break;
	}
	this.mode = IC_BADCODE;        // invalid code
	z.msg = "invalid distance code";
	r = Z_DATA_ERROR;

	s.bitb=b;s.bitk=k;
	z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
	s.write=q;
	return s.inflate_flush(z,r);

      case IC_DISTEXT:       // i: getting distance extra
	j = this.get;

	while(k<(j)){
	  if(n!=0)r=Z_OK;
	  else{

	    s.bitb=b;s.bitk=k;
	    z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
	    s.write=q;
	    return s.inflate_flush(z,r);
	  }
	  n--; b|=(z.next_in[p++]&0xff)<<k;
	  k+=8;
	}

	this.dist += (b & inflate_mask[j]);

	b>>=j;
	k-=j;

	this.mode = IC_COPY;
      case IC_COPY:          // o: copying bytes in window, waiting for space
        f = q - this.dist;
        while(f < 0){     // modulo window size-"while" instead
          f += s.end;     // of "if" handles invalid distances
	}
	while (this.len!=0){

	  if(m==0){
	    if(q==s.end&&s.read!=0){q=0;m=q<s.read?s.read-q-1:s.end-q;}
	    if(m==0){
	      s.write=q; r=s.inflate_flush(z,r);
	      q=s.write;m=q<s.read?s.read-q-1:s.end-q;

	      if(q==s.end&&s.read!=0){q=0;m=q<s.read?s.read-q-1:s.end-q;}

	      if(m==0){
		s.bitb=b;s.bitk=k;
		z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
		s.write=q;
		return s.inflate_flush(z,r);
	      }  
	    }
	  }

	  s.window[q++]=s.window[f++]; m--;

	  if (f == s.end)
            f = 0;
	  this.len--;
	}
	this.mode = IC_START;
	break;
      case IC_LIT:           // o: got literal, waiting for output space
	if(m==0){
	  if(q==s.end&&s.read!=0){q=0;m=q<s.read?s.read-q-1:s.end-q;}
	  if(m==0){
	    s.write=q; r=s.inflate_flush(z,r);
	    q=s.write;m=q<s.read?s.read-q-1:s.end-q;

	    if(q==s.end&&s.read!=0){q=0;m=q<s.read?s.read-q-1:s.end-q;}
	    if(m==0){
	      s.bitb=b;s.bitk=k;
	      z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
	      s.write=q;
	      return s.inflate_flush(z,r);
	    }
	  }
	}
	r=Z_OK;

	s.window[q++]=this.lit; m--;

	this.mode = IC_START;
	break;
      case IC_WASH:           // o: got eob, possibly more output
	if (k > 7){        // return unused byte, if any
	  k -= 8;
	  n++;
	  p--;             // can always return one
	}

	s.write=q; r=s.inflate_flush(z,r);
	q=s.write;m=q<s.read?s.read-q-1:s.end-q;

	if (s.read != s.write){
	  s.bitb=b;s.bitk=k;
	  z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
	  s.write=q;
	  return s.inflate_flush(z,r);
	}
	this.mode = IC_END;
      case IC_END:
	r = Z_STREAM_END;
	s.bitb=b;s.bitk=k;
	z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
	s.write=q;
	return s.inflate_flush(z,r);

      case IC_BADCODE:       // x: got error

	r = Z_DATA_ERROR;

	s.bitb=b;s.bitk=k;
	z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
	s.write=q;
	return s.inflate_flush(z,r);

      default:
	r = Z_STREAM_ERROR;

	s.bitb=b;s.bitk=k;
	z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
	s.write=q;
	return s.inflate_flush(z,r);
      }
    }
  }

InfCodes.prototype.free = function(z){
    //  ZFREE(z, c);
}

  // Called with number of bytes left to write in window at least 258
  // (the maximum string length) and number of input bytes available
  // at least ten.  The ten bytes are six bytes for the longest length/
  // distance pair plus four bytes for overloading the bit buffer.

InfCodes.prototype.inflate_fast = function(bl, bd, tl, tl_index, td, td_index, s, z) {
    var t;                // temporary pointer
    var   tp;             // temporary pointer (int[])
    var tp_index;         // temporary pointer
    var e;                // extra bits or operation
    var b;                // bit buffer
    var k;                // bits in bit buffer
    var p;                // input data pointer
    var n;                // bytes available there
    var q;                // output window write pointer
    var m;                // bytes to end of window or read pointer
    var ml;               // mask for literal/length tree
    var md;               // mask for distance tree
    var c;                // bytes to copy
    var d;                // distance back to copy from
    var r;                // copy source pointer

    var tp_index_t_3;     // (tp_index+t)*3

    // load input, output, bit values
    p=z.next_in_index;n=z.avail_in;b=s.bitb;k=s.bitk;
    q=s.write;m=q<s.read?s.read-q-1:s.end-q;

    // initialize masks
    ml = inflate_mask[bl];
    md = inflate_mask[bd];

    // do until not enough input or output space for fast loop
    do {                          // assume called with m >= 258 && n >= 10
      // get literal/length code
      while(k<(20)){              // max bits for literal/length code
	n--;
	b|=(z.next_in[p++]&0xff)<<k;k+=8;
      }

      t= b&ml;
      tp=tl; 
      tp_index=tl_index;
      tp_index_t_3=(tp_index+t)*3;
      if ((e = tp[tp_index_t_3]) == 0){
	b>>=(tp[tp_index_t_3+1]); k-=(tp[tp_index_t_3+1]);

	s.window[q++] = tp[tp_index_t_3+2];
	m--;
	continue;
      }
      do {

	b>>=(tp[tp_index_t_3+1]); k-=(tp[tp_index_t_3+1]);

	if((e&16)!=0){
	  e &= 15;
	  c = tp[tp_index_t_3+2] + (b & inflate_mask[e]);

	  b>>=e; k-=e;

	  // decode distance base of block to copy
	  while(k<(15)){           // max bits for distance code
	    n--;
	    b|=(z.next_in[p++]&0xff)<<k;k+=8;
	  }

	  t= b&md;
	  tp=td;
	  tp_index=td_index;
          tp_index_t_3=(tp_index+t)*3;
	  e = tp[tp_index_t_3];

	  do {

	    b>>=(tp[tp_index_t_3+1]); k-=(tp[tp_index_t_3+1]);

	    if((e&16)!=0){
	      // get extra bits to add to distance base
	      e &= 15;
	      while(k<(e)){         // get extra bits (up to 13)
		n--;
		b|=(z.next_in[p++]&0xff)<<k;k+=8;
	      }

	      d = tp[tp_index_t_3+2] + (b&inflate_mask[e]);

	      b>>=(e); k-=(e);

	      // do the copy
	      m -= c;
	      if (q >= d){                // offset before dest
		//  just copy
		r=q-d;
		if(q-r>0 && 2>(q-r)){           
		  s.window[q++]=s.window[r++]; // minimum count is three,
		  s.window[q++]=s.window[r++]; // so unroll loop a little
		  c-=2;
		}
		else{
		  s.window[q++]=s.window[r++]; // minimum count is three,
		  s.window[q++]=s.window[r++]; // so unroll loop a little
		  c-=2;
		}
	      }
	      else{                  // else offset after destination
                r=q-d;
                do{
                  r+=s.end;          // force pointer in window
                }while(r<0);         // covers invalid distances
		e=s.end-r;
		if(c>e){             // if source crosses,
		  c-=e;              // wrapped copy
		  if(q-r>0 && e>(q-r)){           
		    do{s.window[q++] = s.window[r++];}
		    while(--e!=0);
		  }
		  else{
		    arrayCopy(s.window, r, s.window, q, e);
		    q+=e; r+=e; e=0;
		  }
		  r = 0;                  // copy rest from start of window
		}

	      }

	      // copy all or what's left
              do{s.window[q++] = s.window[r++];}
		while(--c!=0);
	      break;
	    }
	    else if((e&64)==0){
	      t+=tp[tp_index_t_3+2];
	      t+=(b&inflate_mask[e]);
	      tp_index_t_3=(tp_index+t)*3;
	      e=tp[tp_index_t_3];
	    }
	    else{
	      z.msg = "invalid distance code";

	      c=z.avail_in-n;c=(k>>3)<c?k>>3:c;n+=c;p-=c;k-=c<<3;

	      s.bitb=b;s.bitk=k;
	      z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
	      s.write=q;

	      return Z_DATA_ERROR;
	    }
	  }
	  while(true);
	  break;
	}

	if((e&64)==0){
	  t+=tp[tp_index_t_3+2];
	  t+=(b&inflate_mask[e]);
	  tp_index_t_3=(tp_index+t)*3;
	  if((e=tp[tp_index_t_3])==0){

	    b>>=(tp[tp_index_t_3+1]); k-=(tp[tp_index_t_3+1]);

	    s.window[q++]=tp[tp_index_t_3+2];
	    m--;
	    break;
	  }
	}
	else if((e&32)!=0){

	  c=z.avail_in-n;c=(k>>3)<c?k>>3:c;n+=c;p-=c;k-=c<<3;
 
	  s.bitb=b;s.bitk=k;
	  z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
	  s.write=q;

	  return Z_STREAM_END;
	}
	else{
	  z.msg="invalid literal/length code";

	  c=z.avail_in-n;c=(k>>3)<c?k>>3:c;n+=c;p-=c;k-=c<<3;

	  s.bitb=b;s.bitk=k;
	  z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
	  s.write=q;

	  return Z_DATA_ERROR;
	}
      } 
      while(true);
    } 
    while(m>=258 && n>= 10);

    // not enough input or output--restore pointers and return
    c=z.avail_in-n;c=(k>>3)<c?k>>3:c;n+=c;p-=c;k-=c<<3;

    s.bitb=b;s.bitk=k;
    z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;
    s.write=q;

    return Z_OK;
}

//
// InfTree.java
//

function InfTree() {
}

InfTree.prototype.huft_build = function(b, bindex, n, s, d, e, t, m, hp, hn, v) {

    // Given a list of code lengths and a maximum table size, make a set of
    // tables to decode that set of codes.  Return Z_OK on success, Z_BUF_ERROR
    // if the given code set is incomplete (the tables are still built in this
    // case), Z_DATA_ERROR if the input is invalid (an over-subscribed set of
    // lengths), or Z_MEM_ERROR if not enough memory.

    var a;                       // counter for codes of length k
    var f;                       // i repeats in table every f entries
    var g;                       // maximum code length
    var h;                       // table level
    var i;                       // counter, current code
    var j;                       // counter
    var k;                       // number of bits in current code
    var l;                       // bits per table (returned in m)
    var mask;                    // (1 << w) - 1, to avoid cc -O bug on HP
    var p;                       // pointer into c[], b[], or v[]
    var q;                       // points to current table
    var w;                       // bits before this table == (l * h)
    var xp;                      // pointer into x
    var y;                       // number of dummy codes added
    var z;                       // number of entries in current table

    // Generate counts for each bit length

    p = 0; i = n;
    do {
      this.c[b[bindex+p]]++; p++; i--;   // assume all entries <= BMAX
    }while(i!=0);

    if(this.c[0] == n){                // null input--all zero length codes
      t[0] = -1;
      m[0] = 0;
      return Z_OK;
    }

    // Find minimum and maximum length, bound *m by those
    l = m[0];
    for (j = 1; j <= BMAX; j++)
      if(this.c[j]!=0) break;
    k = j;                        // minimum code length
    if(l < j){
      l = j;
    }
    for (i = BMAX; i!=0; i--){
      if(this.c[i]!=0) break;
    }
    g = i;                        // maximum code length
    if(l > i){
      l = i;
    }
    m[0] = l;

    // Adjust last length count to fill out codes, if needed
    for (y = 1 << j; j < i; j++, y <<= 1){
      if ((y -= this.c[j]) < 0){
        return Z_DATA_ERROR;
      }
    }
    if ((y -= this.c[i]) < 0){
      return Z_DATA_ERROR;
    }
    this.c[i] += y;

    // Generate starting offsets into the value table for each length
    this.x[1] = j = 0;
    p = 1;  xp = 2;
    while (--i!=0) {                 // note that i == g from above
      this.x[xp] = (j += this.c[p]);
      xp++;
      p++;
    }

    // Make a table of values in order of bit lengths
    i = 0; p = 0;
    do {
      if ((j = b[bindex+p]) != 0){
        this.v[this.x[j]++] = i;
      }
      p++;
    }
    while (++i < n);
    n = this.x[g];                     // set n to length of v

    // Generate the Huffman codes and for each, make the table entries
    this.x[0] = i = 0;                 // first Huffman code is zero
    p = 0;                        // grab values in bit order
    h = -1;                       // no tables yet--level -1
    w = -l;                       // bits decoded == (l * h)
    this.u[0] = 0;                     // just to keep compilers happy
    q = 0;                        // ditto
    z = 0;                        // ditto

    // go through the bit lengths (k already is bits in shortest code)
    for (; k <= g; k++){
      a = this.c[k];
      while (a--!=0){
	// here i is the Huffman code of length k bits for value *p
	// make tables up to required level
        while (k > w + l){
          h++;
          w += l;                 // previous table always l bits
	  // compute minimum size table less than or equal to l bits
          z = g - w;
          z = (z > l) ? l : z;        // table size upper limit
          if((f=1<<(j=k-w))>a+1){     // try a k-w bit table
                                      // too few codes for k-w bit table
            f -= a + 1;               // deduct codes from patterns left
            xp = k;
            if(j < z){
              while (++j < z){        // try smaller tables up to z bits
                if((f <<= 1) <= this.c[++xp])
                  break;              // enough codes to use up j bits
                f -= this.c[xp];           // else deduct codes from patterns
              }
	    }
          }
          z = 1 << j;                 // table entries for j-bit table

	  // allocate new table
          if (this.hn[0] + z > MANY){       // (note: doesn't matter for fixed)
            return Z_DATA_ERROR;       // overflow of MANY
          }
          this.u[h] = q = /*hp+*/ this.hn[0];   // DEBUG
          this.hn[0] += z;
 
	  // connect to last table, if there is one
	  if(h!=0){
            this.x[h]=i;           // save pattern for backing up
            this.r[0]=j;     // bits in this table
            this.r[1]=l;     // bits to dump before this table
            j=i>>>(w - l);
            this.r[2] = (q - this.u[h-1] - j);               // offset to this table
            arrayCopy(this.r, 0, hp, (this.u[h-1]+j)*3, 3); // connect to last table
          }
          else{
            t[0] = q;               // first table is returned result
	  }
        }

	// set up table entry in r
        this.r[1] = (k - w);
        if (p >= n){
          this.r[0] = 128 + 64;      // out of values--invalid code
	}
        else if (v[p] < s){
          this.r[0] = (this.v[p] < 256 ? 0 : 32 + 64);  // 256 is end-of-block
          this.r[2] = this.v[p++];          // simple code is just the value
        }
        else{
          this.r[0]=(e[this.v[p]-s]+16+64); // non-simple--look up in lists
          this.r[2]=d[this.v[p++] - s];
        }

        // fill code-like entries with r
        f=1<<(k-w);
        for (j=i>>>w;j<z;j+=f){
          arrayCopy(this.r, 0, hp, (q+j)*3, 3);
	}

	// backwards increment the k-bit code i
        for (j = 1 << (k - 1); (i & j)!=0; j >>>= 1){
          i ^= j;
	}
        i ^= j;

	// backup over finished tables
        mask = (1 << w) - 1;      // needed on HP, cc -O bug
        while ((i & mask) != this.x[h]){
          h--;                    // don't need to update q
          w -= l;
          mask = (1 << w) - 1;
        }
      }
    }
    // Return Z_BUF_ERROR if we were given an incomplete table
    return y != 0 && g != 1 ? Z_BUF_ERROR : Z_OK;
}

InfTree.prototype.inflate_trees_bits = function(c, bb, tb, hp, z) {
    var result;
    this.initWorkArea(19);
    this.hn[0]=0;
    result = this.huft_build(c, 0, 19, 19, null, null, tb, bb, hp, this.hn, this.v);

    if(result == Z_DATA_ERROR){
      z.msg = "oversubscribed dynamic bit lengths tree";
    }
    else if(result == Z_BUF_ERROR || bb[0] == 0){
      z.msg = "incomplete dynamic bit lengths tree";
      result = Z_DATA_ERROR;
    }
    return result;
}

InfTree.prototype.inflate_trees_dynamic = function(nl, nd, c, bl, bd, tl, td, hp, z) {
    var result;

    // build literal/length tree
    this.initWorkArea(288);
    this.hn[0]=0;
    result = this.huft_build(c, 0, nl, 257, cplens, cplext, tl, bl, hp, this.hn, this.v);
    if (result != Z_OK || bl[0] == 0){
      if(result == Z_DATA_ERROR){
        z.msg = "oversubscribed literal/length tree";
      }
      else if (result != Z_MEM_ERROR){
        z.msg = "incomplete literal/length tree";
        result = Z_DATA_ERROR;
      }
      return result;
    }

    // build distance tree
    this.initWorkArea(288);
    result = this.huft_build(c, nl, nd, 0, cpdist, cpdext, td, bd, hp, this.hn, this.v);

    if (result != Z_OK || (bd[0] == 0 && nl > 257)){
      if (result == Z_DATA_ERROR){
        z.msg = "oversubscribed distance tree";
      }
      else if (result == Z_BUF_ERROR) {
        z.msg = "incomplete distance tree";
        result = Z_DATA_ERROR;
      }
      else if (result != Z_MEM_ERROR){
        z.msg = "empty distance tree with lengths";
        result = Z_DATA_ERROR;
      }
      return result;
    }

    return Z_OK;
}
/*
  static int inflate_trees_fixed(int[] bl,  //literal desired/actual bit depth
                                 int[] bd,  //distance desired/actual bit depth
                                 int[][] tl,//literal/length tree result
                                 int[][] td,//distance tree result 
                                 ZStream z  //for memory allocation
				 ){

*/

function inflate_trees_fixed(bl, bd, tl, td, z) {
    bl[0]=fixed_bl;
    bd[0]=fixed_bd;
    tl[0]=fixed_tl;
    td[0]=fixed_td;
    return Z_OK;
}

InfTree.prototype.initWorkArea = function(vsize){
    if(this.hn==null){
        this.hn=new Int32Array(1);
        this.v=new Int32Array(vsize);
        this.c=new Int32Array(BMAX+1);
        this.r=new Int32Array(3);
        this.u=new Int32Array(BMAX);
        this.x=new Int32Array(BMAX+1);
    }
    if(this.v.length<vsize){ 
        this.v=new Int32Array(vsize); 
    }
    for(var i=0; i<vsize; i++){this.v[i]=0;}
    for(var i=0; i<BMAX+1; i++){this.c[i]=0;}
    for(var i=0; i<3; i++){this.r[i]=0;}
//  for(int i=0; i<BMAX; i++){u[i]=0;}
    arrayCopy(this.c, 0, this.u, 0, BMAX);
//  for(int i=0; i<BMAX+1; i++){x[i]=0;}
    arrayCopy(this.c, 0, this.x, 0, BMAX+1);
}

var testArray = new Uint8Array(1);
var hasSubarray = (typeof testArray.subarray === 'function');
var hasSlice = false; /* (typeof testArray.slice === 'function'); */ // Chrome slice performance is so dire that we're currently not using it...

function arrayCopy(src, srcOffset, dest, destOffset, count) {
    if (count == 0) {
        return;
    } 
    if (!src) {
        throw "Undef src";
    } else if (!dest) {
        throw "Undef dest";
    }

    if (srcOffset == 0 && count == src.length) {
        arrayCopy_fast(src, dest, destOffset);
    } else if (hasSubarray) {
        arrayCopy_fast(src.subarray(srcOffset, srcOffset + count), dest, destOffset); 
    } else if (src.BYTES_PER_ELEMENT == 1 && count > 100) {
        arrayCopy_fast(new Uint8Array(src.buffer, src.byteOffset + srcOffset, count), dest, destOffset);
    } else { 
        arrayCopy_slow(src, srcOffset, dest, destOffset, count);
    }

}

function arrayCopy_slow(src, srcOffset, dest, destOffset, count) {

    // dlog('_slow call: srcOffset=' + srcOffset + '; destOffset=' + destOffset + '; count=' + count);

     for (var i = 0; i < count; ++i) {
        dest[destOffset + i] = src[srcOffset + i];
    }
}

function arrayCopy_fast(src, dest, destOffset) {
    dest.set(src, destOffset);
}


  // largest prime smaller than 65536
var ADLER_BASE=65521; 
  // NMAX is the largest n such that 255n(n+1)/2 + (n+1)(BASE-1) <= 2^32-1
var ADLER_NMAX=5552;

function adler32(adler, /* byte[] */ buf,  index, len){
    if(buf == null){ return 1; }

    var s1=adler&0xffff;
    var s2=(adler>>16)&0xffff;
    var k;

    while(len > 0) {
      k=len<ADLER_NMAX?len:ADLER_NMAX;
      len-=k;
      while(k>=16){
        s1+=buf[index++]&0xff; s2+=s1;
        s1+=buf[index++]&0xff; s2+=s1;
        s1+=buf[index++]&0xff; s2+=s1;
        s1+=buf[index++]&0xff; s2+=s1;
        s1+=buf[index++]&0xff; s2+=s1;
        s1+=buf[index++]&0xff; s2+=s1;
        s1+=buf[index++]&0xff; s2+=s1;
        s1+=buf[index++]&0xff; s2+=s1;
        s1+=buf[index++]&0xff; s2+=s1;
        s1+=buf[index++]&0xff; s2+=s1;
        s1+=buf[index++]&0xff; s2+=s1;
        s1+=buf[index++]&0xff; s2+=s1;
        s1+=buf[index++]&0xff; s2+=s1;
        s1+=buf[index++]&0xff; s2+=s1;
        s1+=buf[index++]&0xff; s2+=s1;
        s1+=buf[index++]&0xff; s2+=s1;
        k-=16;
      }
      if(k!=0){
        do{
          s1+=buf[index++]&0xff; s2+=s1;
        }
        while(--k!=0);
      }
      s1%=ADLER_BASE;
      s2%=ADLER_BASE;
    }
    return (s2<<16)|s1;
}



function jszlib_inflate_buffer(buffer, start, length, afterUncOffset) {
    if (!start) {
        buffer = new Uint8Array(buffer);
    } else if (!length) {
        buffer = new Uint8Array(buffer, start, buffer.byteLength - start);
    } else {
        buffer = new Uint8Array(buffer, start, length);
    }

    var z = new ZStream();
    z.inflateInit(DEF_WBITS, true);
    z.next_in = buffer;
    z.next_in_index = 0;
    z.avail_in = buffer.length;

    var oBlockList = [];
    var totalSize = 0;
    while (true) {
        var obuf = new Uint8Array(32000);
        z.next_out = obuf;
        z.next_out_index = 0;
        z.avail_out = obuf.length;
        var status = z.inflate(Z_NO_FLUSH);
        if (status != Z_OK && status != Z_STREAM_END && status != Z_BUF_ERROR) {
            throw z.msg;
        }
        if (z.avail_out != 0) {
            var newob = new Uint8Array(obuf.length - z.avail_out);
            arrayCopy(obuf, 0, newob, 0, (obuf.length - z.avail_out));
            obuf = newob;
        }
        oBlockList.push(obuf);
        totalSize += obuf.length;
        if (status == Z_STREAM_END || status == Z_BUF_ERROR) {
            break;
        }
    }

    if (afterUncOffset) {
        afterUncOffset[0] = (start || 0) + z.next_in_index;
    }

    if (oBlockList.length == 1) {
        return oBlockList[0].buffer;
    } else {
        var out = new Uint8Array(totalSize);
        var cursor = 0;
        for (var i = 0; i < oBlockList.length; ++i) {
            var b = oBlockList[i];
            arrayCopy(b, 0, out, cursor, b.length);
            cursor += b.length;
        }
        return out.buffer;
    }
}

if (typeof(module) !== 'undefined') {
  module.exports = {
    inflateBuffer: jszlib_inflate_buffer,
    arrayCopy: arrayCopy
  };
}

},{}],61:[function(require,module,exports){
// shim for using process in browser
var process = module.exports = {};

// cached from whatever global is present so that test runners that stub it
// don't break things.  But we need to wrap it in a try catch in case it is
// wrapped in strict mode code which doesn't define any globals.  It's inside a
// function because try/catches deoptimize in certain engines.

var cachedSetTimeout;
var cachedClearTimeout;

function defaultSetTimout() {
    throw new Error('setTimeout has not been defined');
}
function defaultClearTimeout () {
    throw new Error('clearTimeout has not been defined');
}
(function () {
    try {
        if (typeof setTimeout === 'function') {
            cachedSetTimeout = setTimeout;
        } else {
            cachedSetTimeout = defaultSetTimout;
        }
    } catch (e) {
        cachedSetTimeout = defaultSetTimout;
    }
    try {
        if (typeof clearTimeout === 'function') {
            cachedClearTimeout = clearTimeout;
        } else {
            cachedClearTimeout = defaultClearTimeout;
        }
    } catch (e) {
        cachedClearTimeout = defaultClearTimeout;
    }
} ())
function runTimeout(fun) {
    if (cachedSetTimeout === setTimeout) {
        //normal enviroments in sane situations
        return setTimeout(fun, 0);
    }
    // if setTimeout wasn't available but was latter defined
    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {
        cachedSetTimeout = setTimeout;
        return setTimeout(fun, 0);
    }
    try {
        // when when somebody has screwed with setTimeout but no I.E. maddness
        return cachedSetTimeout(fun, 0);
    } catch(e){
        try {
            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally
            return cachedSetTimeout.call(null, fun, 0);
        } catch(e){
            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error
            return cachedSetTimeout.call(this, fun, 0);
        }
    }


}
function runClearTimeout(marker) {
    if (cachedClearTimeout === clearTimeout) {
        //normal enviroments in sane situations
        return clearTimeout(marker);
    }
    // if clearTimeout wasn't available but was latter defined
    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {
        cachedClearTimeout = clearTimeout;
        return clearTimeout(marker);
    }
    try {
        // when when somebody has screwed with setTimeout but no I.E. maddness
        return cachedClearTimeout(marker);
    } catch (e){
        try {
            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally
            return cachedClearTimeout.call(null, marker);
        } catch (e){
            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.
            // Some versions of I.E. have different rules for clearTimeout vs setTimeout
            return cachedClearTimeout.call(this, marker);
        }
    }



}
var queue = [];
var draining = false;
var currentQueue;
var queueIndex = -1;

function cleanUpNextTick() {
    if (!draining || !currentQueue) {
        return;
    }
    draining = false;
    if (currentQueue.length) {
        queue = currentQueue.concat(queue);
    } else {
        queueIndex = -1;
    }
    if (queue.length) {
        drainQueue();
    }
}

function drainQueue() {
    if (draining) {
        return;
    }
    var timeout = runTimeout(cleanUpNextTick);
    draining = true;

    var len = queue.length;
    while(len) {
        currentQueue = queue;
        queue = [];
        while (++queueIndex < len) {
            if (currentQueue) {
                currentQueue[queueIndex].run();
            }
        }
        queueIndex = -1;
        len = queue.length;
    }
    currentQueue = null;
    draining = false;
    runClearTimeout(timeout);
}

process.nextTick = function (fun) {
    var args = new Array(arguments.length - 1);
    if (arguments.length > 1) {
        for (var i = 1; i < arguments.length; i++) {
            args[i - 1] = arguments[i];
        }
    }
    queue.push(new Item(fun, args));
    if (queue.length === 1 && !draining) {
        runTimeout(drainQueue);
    }
};

// v8 likes predictible objects
function Item(fun, array) {
    this.fun = fun;
    this.array = array;
}
Item.prototype.run = function () {
    this.fun.apply(null, this.array);
};
process.title = 'browser';
process.browser = true;
process.env = {};
process.argv = [];
process.version = ''; // empty string to avoid regexp issues
process.versions = {};

function noop() {}

process.on = noop;
process.addListener = noop;
process.once = noop;
process.off = noop;
process.removeListener = noop;
process.removeAllListeners = noop;
process.emit = noop;

process.binding = function (name) {
    throw new Error('process.binding is not supported');
};

process.cwd = function () { return '/' };
process.chdir = function (dir) {
    throw new Error('process.chdir is not supported');
};
process.umask = function() { return 0; };

},{}],62:[function(require,module,exports){
//  Ramda v0.21.0
//  https://github.com/ramda/ramda
//  (c) 2013-2016 Scott Sauyet, Michael Hurley, and David Chambers
//  Ramda may be freely distributed under the MIT license.

;(function() {

  'use strict';

  /**
     * A special placeholder value used to specify "gaps" within curried functions,
     * allowing partial application of any combination of arguments, regardless of
     * their positions.
     *
     * If `g` is a curried ternary function and `_` is `R.__`, the following are
     * equivalent:
     *
     *   - `g(1, 2, 3)`
     *   - `g(_, 2, 3)(1)`
     *   - `g(_, _, 3)(1)(2)`
     *   - `g(_, _, 3)(1, 2)`
     *   - `g(_, 2, _)(1, 3)`
     *   - `g(_, 2)(1)(3)`
     *   - `g(_, 2)(1, 3)`
     *   - `g(_, 2)(_, 3)(1)`
     *
     * @constant
     * @memberOf R
     * @since v0.6.0
     * @category Function
     * @example
     *
     *      var greet = R.replace('{name}', R.__, 'Hello, {name}!');
     *      greet('Alice'); //=> 'Hello, Alice!'
     */
    var __ = { '@@functional/placeholder': true };

    /* eslint-disable no-unused-vars */
    var _arity = function _arity(n, fn) {
        /* eslint-disable no-unused-vars */
        switch (n) {
        case 0:
            return function () {
                return fn.apply(this, arguments);
            };
        case 1:
            return function (a0) {
                return fn.apply(this, arguments);
            };
        case 2:
            return function (a0, a1) {
                return fn.apply(this, arguments);
            };
        case 3:
            return function (a0, a1, a2) {
                return fn.apply(this, arguments);
            };
        case 4:
            return function (a0, a1, a2, a3) {
                return fn.apply(this, arguments);
            };
        case 5:
            return function (a0, a1, a2, a3, a4) {
                return fn.apply(this, arguments);
            };
        case 6:
            return function (a0, a1, a2, a3, a4, a5) {
                return fn.apply(this, arguments);
            };
        case 7:
            return function (a0, a1, a2, a3, a4, a5, a6) {
                return fn.apply(this, arguments);
            };
        case 8:
            return function (a0, a1, a2, a3, a4, a5, a6, a7) {
                return fn.apply(this, arguments);
            };
        case 9:
            return function (a0, a1, a2, a3, a4, a5, a6, a7, a8) {
                return fn.apply(this, arguments);
            };
        case 10:
            return function (a0, a1, a2, a3, a4, a5, a6, a7, a8, a9) {
                return fn.apply(this, arguments);
            };
        default:
            throw new Error('First argument to _arity must be a non-negative integer no greater than ten');
        }
    };

    var _arrayFromIterator = function _arrayFromIterator(iter) {
        var list = [];
        var next;
        while (!(next = iter.next()).done) {
            list.push(next.value);
        }
        return list;
    };

    var _arrayOf = function _arrayOf() {
        return Array.prototype.slice.call(arguments);
    };

    var _cloneRegExp = function _cloneRegExp(pattern) {
        return new RegExp(pattern.source, (pattern.global ? 'g' : '') + (pattern.ignoreCase ? 'i' : '') + (pattern.multiline ? 'm' : '') + (pattern.sticky ? 'y' : '') + (pattern.unicode ? 'u' : ''));
    };

    var _complement = function _complement(f) {
        return function () {
            return !f.apply(this, arguments);
        };
    };

    /**
     * Private `concat` function to merge two array-like objects.
     *
     * @private
     * @param {Array|Arguments} [set1=[]] An array-like object.
     * @param {Array|Arguments} [set2=[]] An array-like object.
     * @return {Array} A new, merged array.
     * @example
     *
     *      _concat([4, 5, 6], [1, 2, 3]); //=> [4, 5, 6, 1, 2, 3]
     */
    var _concat = function _concat(set1, set2) {
        set1 = set1 || [];
        set2 = set2 || [];
        var idx;
        var len1 = set1.length;
        var len2 = set2.length;
        var result = [];
        idx = 0;
        while (idx < len1) {
            result[result.length] = set1[idx];
            idx += 1;
        }
        idx = 0;
        while (idx < len2) {
            result[result.length] = set2[idx];
            idx += 1;
        }
        return result;
    };

    var _containsWith = function _containsWith(pred, x, list) {
        var idx = 0;
        var len = list.length;
        while (idx < len) {
            if (pred(x, list[idx])) {
                return true;
            }
            idx += 1;
        }
        return false;
    };

    var _filter = function _filter(fn, list) {
        var idx = 0;
        var len = list.length;
        var result = [];
        while (idx < len) {
            if (fn(list[idx])) {
                result[result.length] = list[idx];
            }
            idx += 1;
        }
        return result;
    };

    var _forceReduced = function _forceReduced(x) {
        return {
            '@@transducer/value': x,
            '@@transducer/reduced': true
        };
    };

    // String(x => x) evaluates to "x => x", so the pattern may not match.
    var _functionName = function _functionName(f) {
        // String(x => x) evaluates to "x => x", so the pattern may not match.
        var match = String(f).match(/^function (\w*)/);
        return match == null ? '' : match[1];
    };

    var _has = function _has(prop, obj) {
        return Object.prototype.hasOwnProperty.call(obj, prop);
    };

    var _identity = function _identity(x) {
        return x;
    };

    var _isArguments = function () {
        var toString = Object.prototype.toString;
        return toString.call(arguments) === '[object Arguments]' ? function _isArguments(x) {
            return toString.call(x) === '[object Arguments]';
        } : function _isArguments(x) {
            return _has('callee', x);
        };
    }();

    /**
     * Tests whether or not an object is an array.
     *
     * @private
     * @param {*} val The object to test.
     * @return {Boolean} `true` if `val` is an array, `false` otherwise.
     * @example
     *
     *      _isArray([]); //=> true
     *      _isArray(null); //=> false
     *      _isArray({}); //=> false
     */
    var _isArray = Array.isArray || function _isArray(val) {
        return val != null && val.length >= 0 && Object.prototype.toString.call(val) === '[object Array]';
    };

    var _isFunction = function _isNumber(x) {
        return Object.prototype.toString.call(x) === '[object Function]';
    };

    /**
     * Determine if the passed argument is an integer.
     *
     * @private
     * @param {*} n
     * @category Type
     * @return {Boolean}
     */
    var _isInteger = Number.isInteger || function _isInteger(n) {
        return n << 0 === n;
    };

    var _isNumber = function _isNumber(x) {
        return Object.prototype.toString.call(x) === '[object Number]';
    };

    var _isObject = function _isObject(x) {
        return Object.prototype.toString.call(x) === '[object Object]';
    };

    var _isPlaceholder = function _isPlaceholder(a) {
        return a != null && typeof a === 'object' && a['@@functional/placeholder'] === true;
    };

    var _isRegExp = function _isRegExp(x) {
        return Object.prototype.toString.call(x) === '[object RegExp]';
    };

    var _isString = function _isString(x) {
        return Object.prototype.toString.call(x) === '[object String]';
    };

    var _isTransformer = function _isTransformer(obj) {
        return typeof obj['@@transducer/step'] === 'function';
    };

    var _map = function _map(fn, functor) {
        var idx = 0;
        var len = functor.length;
        var result = Array(len);
        while (idx < len) {
            result[idx] = fn(functor[idx]);
            idx += 1;
        }
        return result;
    };

    // Based on https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/assign
    var _objectAssign = function _objectAssign(target) {
        if (target == null) {
            throw new TypeError('Cannot convert undefined or null to object');
        }
        var output = Object(target);
        var idx = 1;
        var length = arguments.length;
        while (idx < length) {
            var source = arguments[idx];
            if (source != null) {
                for (var nextKey in source) {
                    if (_has(nextKey, source)) {
                        output[nextKey] = source[nextKey];
                    }
                }
            }
            idx += 1;
        }
        return output;
    };

    var _of = function _of(x) {
        return [x];
    };

    var _pipe = function _pipe(f, g) {
        return function () {
            return g.call(this, f.apply(this, arguments));
        };
    };

    var _pipeP = function _pipeP(f, g) {
        return function () {
            var ctx = this;
            return f.apply(ctx, arguments).then(function (x) {
                return g.call(ctx, x);
            });
        };
    };

    // \b matches word boundary; [\b] matches backspace
    var _quote = function _quote(s) {
        var escaped = s.replace(/\\/g, '\\\\').replace(/[\b]/g, '\\b')    // \b matches word boundary; [\b] matches backspace
    .replace(/\f/g, '\\f').replace(/\n/g, '\\n').replace(/\r/g, '\\r').replace(/\t/g, '\\t').replace(/\v/g, '\\v').replace(/\0/g, '\\0');
        return '"' + escaped.replace(/"/g, '\\"') + '"';
    };

    var _reduced = function _reduced(x) {
        return x && x['@@transducer/reduced'] ? x : {
            '@@transducer/value': x,
            '@@transducer/reduced': true
        };
    };

    /**
     * An optimized, private array `slice` implementation.
     *
     * @private
     * @param {Arguments|Array} args The array or arguments object to consider.
     * @param {Number} [from=0] The array index to slice from, inclusive.
     * @param {Number} [to=args.length] The array index to slice to, exclusive.
     * @return {Array} A new, sliced array.
     * @example
     *
     *      _slice([1, 2, 3, 4, 5], 1, 3); //=> [2, 3]
     *
     *      var firstThreeArgs = function(a, b, c, d) {
     *        return _slice(arguments, 0, 3);
     *      };
     *      firstThreeArgs(1, 2, 3, 4); //=> [1, 2, 3]
     */
    var _slice = function _slice(args, from, to) {
        switch (arguments.length) {
        case 1:
            return _slice(args, 0, args.length);
        case 2:
            return _slice(args, from, args.length);
        default:
            var list = [];
            var idx = 0;
            var len = Math.max(0, Math.min(args.length, to) - from);
            while (idx < len) {
                list[idx] = args[from + idx];
                idx += 1;
            }
            return list;
        }
    };

    /**
     * Polyfill from <https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toISOString>.
     */
    var _toISOString = function () {
        var pad = function pad(n) {
            return (n < 10 ? '0' : '') + n;
        };
        return typeof Date.prototype.toISOString === 'function' ? function _toISOString(d) {
            return d.toISOString();
        } : function _toISOString(d) {
            return d.getUTCFullYear() + '-' + pad(d.getUTCMonth() + 1) + '-' + pad(d.getUTCDate()) + 'T' + pad(d.getUTCHours()) + ':' + pad(d.getUTCMinutes()) + ':' + pad(d.getUTCSeconds()) + '.' + (d.getUTCMilliseconds() / 1000).toFixed(3).slice(2, 5) + 'Z';
        };
    }();

    var _xfBase = {
        init: function () {
            return this.xf['@@transducer/init']();
        },
        result: function (result) {
            return this.xf['@@transducer/result'](result);
        }
    };

    var _xwrap = function () {
        function XWrap(fn) {
            this.f = fn;
        }
        XWrap.prototype['@@transducer/init'] = function () {
            throw new Error('init not implemented on XWrap');
        };
        XWrap.prototype['@@transducer/result'] = function (acc) {
            return acc;
        };
        XWrap.prototype['@@transducer/step'] = function (acc, x) {
            return this.f(acc, x);
        };
        return function _xwrap(fn) {
            return new XWrap(fn);
        };
    }();

    var _aperture = function _aperture(n, list) {
        var idx = 0;
        var limit = list.length - (n - 1);
        var acc = new Array(limit >= 0 ? limit : 0);
        while (idx < limit) {
            acc[idx] = _slice(list, idx, idx + n);
            idx += 1;
        }
        return acc;
    };

    var _assign = typeof Object.assign === 'function' ? Object.assign : _objectAssign;

    /**
     * Similar to hasMethod, this checks whether a function has a [methodname]
     * function. If it isn't an array it will execute that function otherwise it
     * will default to the ramda implementation.
     *
     * @private
     * @param {Function} fn ramda implemtation
     * @param {String} methodname property to check for a custom implementation
     * @return {Object} Whatever the return value of the method is.
     */
    var _checkForMethod = function _checkForMethod(methodname, fn) {
        return function () {
            var length = arguments.length;
            if (length === 0) {
                return fn();
            }
            var obj = arguments[length - 1];
            return _isArray(obj) || typeof obj[methodname] !== 'function' ? fn.apply(this, arguments) : obj[methodname].apply(obj, _slice(arguments, 0, length - 1));
        };
    };

    /**
     * Optimized internal one-arity curry function.
     *
     * @private
     * @category Function
     * @param {Function} fn The function to curry.
     * @return {Function} The curried function.
     */
    var _curry1 = function _curry1(fn) {
        return function f1(a) {
            if (arguments.length === 0 || _isPlaceholder(a)) {
                return f1;
            } else {
                return fn.apply(this, arguments);
            }
        };
    };

    /**
     * Optimized internal two-arity curry function.
     *
     * @private
     * @category Function
     * @param {Function} fn The function to curry.
     * @return {Function} The curried function.
     */
    var _curry2 = function _curry2(fn) {
        return function f2(a, b) {
            switch (arguments.length) {
            case 0:
                return f2;
            case 1:
                return _isPlaceholder(a) ? f2 : _curry1(function (_b) {
                    return fn(a, _b);
                });
            default:
                return _isPlaceholder(a) && _isPlaceholder(b) ? f2 : _isPlaceholder(a) ? _curry1(function (_a) {
                    return fn(_a, b);
                }) : _isPlaceholder(b) ? _curry1(function (_b) {
                    return fn(a, _b);
                }) : fn(a, b);
            }
        };
    };

    /**
     * Optimized internal three-arity curry function.
     *
     * @private
     * @category Function
     * @param {Function} fn The function to curry.
     * @return {Function} The curried function.
     */
    var _curry3 = function _curry3(fn) {
        return function f3(a, b, c) {
            switch (arguments.length) {
            case 0:
                return f3;
            case 1:
                return _isPlaceholder(a) ? f3 : _curry2(function (_b, _c) {
                    return fn(a, _b, _c);
                });
            case 2:
                return _isPlaceholder(a) && _isPlaceholder(b) ? f3 : _isPlaceholder(a) ? _curry2(function (_a, _c) {
                    return fn(_a, b, _c);
                }) : _isPlaceholder(b) ? _curry2(function (_b, _c) {
                    return fn(a, _b, _c);
                }) : _curry1(function (_c) {
                    return fn(a, b, _c);
                });
            default:
                return _isPlaceholder(a) && _isPlaceholder(b) && _isPlaceholder(c) ? f3 : _isPlaceholder(a) && _isPlaceholder(b) ? _curry2(function (_a, _b) {
                    return fn(_a, _b, c);
                }) : _isPlaceholder(a) && _isPlaceholder(c) ? _curry2(function (_a, _c) {
                    return fn(_a, b, _c);
                }) : _isPlaceholder(b) && _isPlaceholder(c) ? _curry2(function (_b, _c) {
                    return fn(a, _b, _c);
                }) : _isPlaceholder(a) ? _curry1(function (_a) {
                    return fn(_a, b, c);
                }) : _isPlaceholder(b) ? _curry1(function (_b) {
                    return fn(a, _b, c);
                }) : _isPlaceholder(c) ? _curry1(function (_c) {
                    return fn(a, b, _c);
                }) : fn(a, b, c);
            }
        };
    };

    /**
     * Internal curryN function.
     *
     * @private
     * @category Function
     * @param {Number} length The arity of the curried function.
     * @param {Array} received An array of arguments received thus far.
     * @param {Function} fn The function to curry.
     * @return {Function} The curried function.
     */
    var _curryN = function _curryN(length, received, fn) {
        return function () {
            var combined = [];
            var argsIdx = 0;
            var left = length;
            var combinedIdx = 0;
            while (combinedIdx < received.length || argsIdx < arguments.length) {
                var result;
                if (combinedIdx < received.length && (!_isPlaceholder(received[combinedIdx]) || argsIdx >= arguments.length)) {
                    result = received[combinedIdx];
                } else {
                    result = arguments[argsIdx];
                    argsIdx += 1;
                }
                combined[combinedIdx] = result;
                if (!_isPlaceholder(result)) {
                    left -= 1;
                }
                combinedIdx += 1;
            }
            return left <= 0 ? fn.apply(this, combined) : _arity(left, _curryN(length, combined, fn));
        };
    };

    /**
     * Returns a function that dispatches with different strategies based on the
     * object in list position (last argument). If it is an array, executes [fn].
     * Otherwise, if it has a function with [methodname], it will execute that
     * function (functor case). Otherwise, if it is a transformer, uses transducer
     * [xf] to return a new transformer (transducer case). Otherwise, it will
     * default to executing [fn].
     *
     * @private
     * @param {String} methodname property to check for a custom implementation
     * @param {Function} xf transducer to initialize if object is transformer
     * @param {Function} fn default ramda implementation
     * @return {Function} A function that dispatches on object in list position
     */
    var _dispatchable = function _dispatchable(methodname, xf, fn) {
        return function () {
            var length = arguments.length;
            if (length === 0) {
                return fn();
            }
            var obj = arguments[length - 1];
            if (!_isArray(obj)) {
                var args = _slice(arguments, 0, length - 1);
                if (typeof obj[methodname] === 'function') {
                    return obj[methodname].apply(obj, args);
                }
                if (_isTransformer(obj)) {
                    var transducer = xf.apply(null, args);
                    return transducer(obj);
                }
            }
            return fn.apply(this, arguments);
        };
    };

    var _dropLastWhile = function dropLastWhile(pred, list) {
        var idx = list.length - 1;
        while (idx >= 0 && pred(list[idx])) {
            idx -= 1;
        }
        return _slice(list, 0, idx + 1);
    };

    var _xall = function () {
        function XAll(f, xf) {
            this.xf = xf;
            this.f = f;
            this.all = true;
        }
        XAll.prototype['@@transducer/init'] = _xfBase.init;
        XAll.prototype['@@transducer/result'] = function (result) {
            if (this.all) {
                result = this.xf['@@transducer/step'](result, true);
            }
            return this.xf['@@transducer/result'](result);
        };
        XAll.prototype['@@transducer/step'] = function (result, input) {
            if (!this.f(input)) {
                this.all = false;
                result = _reduced(this.xf['@@transducer/step'](result, false));
            }
            return result;
        };
        return _curry2(function _xall(f, xf) {
            return new XAll(f, xf);
        });
    }();

    var _xany = function () {
        function XAny(f, xf) {
            this.xf = xf;
            this.f = f;
            this.any = false;
        }
        XAny.prototype['@@transducer/init'] = _xfBase.init;
        XAny.prototype['@@transducer/result'] = function (result) {
            if (!this.any) {
                result = this.xf['@@transducer/step'](result, false);
            }
            return this.xf['@@transducer/result'](result);
        };
        XAny.prototype['@@transducer/step'] = function (result, input) {
            if (this.f(input)) {
                this.any = true;
                result = _reduced(this.xf['@@transducer/step'](result, true));
            }
            return result;
        };
        return _curry2(function _xany(f, xf) {
            return new XAny(f, xf);
        });
    }();

    var _xaperture = function () {
        function XAperture(n, xf) {
            this.xf = xf;
            this.pos = 0;
            this.full = false;
            this.acc = new Array(n);
        }
        XAperture.prototype['@@transducer/init'] = _xfBase.init;
        XAperture.prototype['@@transducer/result'] = function (result) {
            this.acc = null;
            return this.xf['@@transducer/result'](result);
        };
        XAperture.prototype['@@transducer/step'] = function (result, input) {
            this.store(input);
            return this.full ? this.xf['@@transducer/step'](result, this.getCopy()) : result;
        };
        XAperture.prototype.store = function (input) {
            this.acc[this.pos] = input;
            this.pos += 1;
            if (this.pos === this.acc.length) {
                this.pos = 0;
                this.full = true;
            }
        };
        XAperture.prototype.getCopy = function () {
            return _concat(_slice(this.acc, this.pos), _slice(this.acc, 0, this.pos));
        };
        return _curry2(function _xaperture(n, xf) {
            return new XAperture(n, xf);
        });
    }();

    var _xdrop = function () {
        function XDrop(n, xf) {
            this.xf = xf;
            this.n = n;
        }
        XDrop.prototype['@@transducer/init'] = _xfBase.init;
        XDrop.prototype['@@transducer/result'] = _xfBase.result;
        XDrop.prototype['@@transducer/step'] = function (result, input) {
            if (this.n > 0) {
                this.n -= 1;
                return result;
            }
            return this.xf['@@transducer/step'](result, input);
        };
        return _curry2(function _xdrop(n, xf) {
            return new XDrop(n, xf);
        });
    }();

    var _xdropLast = function () {
        function XDropLast(n, xf) {
            this.xf = xf;
            this.pos = 0;
            this.full = false;
            this.acc = new Array(n);
        }
        XDropLast.prototype['@@transducer/init'] = _xfBase.init;
        XDropLast.prototype['@@transducer/result'] = function (result) {
            this.acc = null;
            return this.xf['@@transducer/result'](result);
        };
        XDropLast.prototype['@@transducer/step'] = function (result, input) {
            if (this.full) {
                result = this.xf['@@transducer/step'](result, this.acc[this.pos]);
            }
            this.store(input);
            return result;
        };
        XDropLast.prototype.store = function (input) {
            this.acc[this.pos] = input;
            this.pos += 1;
            if (this.pos === this.acc.length) {
                this.pos = 0;
                this.full = true;
            }
        };
        return _curry2(function _xdropLast(n, xf) {
            return new XDropLast(n, xf);
        });
    }();

    var _xdropRepeatsWith = function () {
        function XDropRepeatsWith(pred, xf) {
            this.xf = xf;
            this.pred = pred;
            this.lastValue = undefined;
            this.seenFirstValue = false;
        }
        XDropRepeatsWith.prototype['@@transducer/init'] = function () {
            return this.xf['@@transducer/init']();
        };
        XDropRepeatsWith.prototype['@@transducer/result'] = function (result) {
            return this.xf['@@transducer/result'](result);
        };
        XDropRepeatsWith.prototype['@@transducer/step'] = function (result, input) {
            var sameAsLast = false;
            if (!this.seenFirstValue) {
                this.seenFirstValue = true;
            } else if (this.pred(this.lastValue, input)) {
                sameAsLast = true;
            }
            this.lastValue = input;
            return sameAsLast ? result : this.xf['@@transducer/step'](result, input);
        };
        return _curry2(function _xdropRepeatsWith(pred, xf) {
            return new XDropRepeatsWith(pred, xf);
        });
    }();

    var _xdropWhile = function () {
        function XDropWhile(f, xf) {
            this.xf = xf;
            this.f = f;
        }
        XDropWhile.prototype['@@transducer/init'] = _xfBase.init;
        XDropWhile.prototype['@@transducer/result'] = _xfBase.result;
        XDropWhile.prototype['@@transducer/step'] = function (result, input) {
            if (this.f) {
                if (this.f(input)) {
                    return result;
                }
                this.f = null;
            }
            return this.xf['@@transducer/step'](result, input);
        };
        return _curry2(function _xdropWhile(f, xf) {
            return new XDropWhile(f, xf);
        });
    }();

    var _xfilter = function () {
        function XFilter(f, xf) {
            this.xf = xf;
            this.f = f;
        }
        XFilter.prototype['@@transducer/init'] = _xfBase.init;
        XFilter.prototype['@@transducer/result'] = _xfBase.result;
        XFilter.prototype['@@transducer/step'] = function (result, input) {
            return this.f(input) ? this.xf['@@transducer/step'](result, input) : result;
        };
        return _curry2(function _xfilter(f, xf) {
            return new XFilter(f, xf);
        });
    }();

    var _xfind = function () {
        function XFind(f, xf) {
            this.xf = xf;
            this.f = f;
            this.found = false;
        }
        XFind.prototype['@@transducer/init'] = _xfBase.init;
        XFind.prototype['@@transducer/result'] = function (result) {
            if (!this.found) {
                result = this.xf['@@transducer/step'](result, void 0);
            }
            return this.xf['@@transducer/result'](result);
        };
        XFind.prototype['@@transducer/step'] = function (result, input) {
            if (this.f(input)) {
                this.found = true;
                result = _reduced(this.xf['@@transducer/step'](result, input));
            }
            return result;
        };
        return _curry2(function _xfind(f, xf) {
            return new XFind(f, xf);
        });
    }();

    var _xfindIndex = function () {
        function XFindIndex(f, xf) {
            this.xf = xf;
            this.f = f;
            this.idx = -1;
            this.found = false;
        }
        XFindIndex.prototype['@@transducer/init'] = _xfBase.init;
        XFindIndex.prototype['@@transducer/result'] = function (result) {
            if (!this.found) {
                result = this.xf['@@transducer/step'](result, -1);
            }
            return this.xf['@@transducer/result'](result);
        };
        XFindIndex.prototype['@@transducer/step'] = function (result, input) {
            this.idx += 1;
            if (this.f(input)) {
                this.found = true;
                result = _reduced(this.xf['@@transducer/step'](result, this.idx));
            }
            return result;
        };
        return _curry2(function _xfindIndex(f, xf) {
            return new XFindIndex(f, xf);
        });
    }();

    var _xfindLast = function () {
        function XFindLast(f, xf) {
            this.xf = xf;
            this.f = f;
        }
        XFindLast.prototype['@@transducer/init'] = _xfBase.init;
        XFindLast.prototype['@@transducer/result'] = function (result) {
            return this.xf['@@transducer/result'](this.xf['@@transducer/step'](result, this.last));
        };
        XFindLast.prototype['@@transducer/step'] = function (result, input) {
            if (this.f(input)) {
                this.last = input;
            }
            return result;
        };
        return _curry2(function _xfindLast(f, xf) {
            return new XFindLast(f, xf);
        });
    }();

    var _xfindLastIndex = function () {
        function XFindLastIndex(f, xf) {
            this.xf = xf;
            this.f = f;
            this.idx = -1;
            this.lastIdx = -1;
        }
        XFindLastIndex.prototype['@@transducer/init'] = _xfBase.init;
        XFindLastIndex.prototype['@@transducer/result'] = function (result) {
            return this.xf['@@transducer/result'](this.xf['@@transducer/step'](result, this.lastIdx));
        };
        XFindLastIndex.prototype['@@transducer/step'] = function (result, input) {
            this.idx += 1;
            if (this.f(input)) {
                this.lastIdx = this.idx;
            }
            return result;
        };
        return _curry2(function _xfindLastIndex(f, xf) {
            return new XFindLastIndex(f, xf);
        });
    }();

    var _xmap = function () {
        function XMap(f, xf) {
            this.xf = xf;
            this.f = f;
        }
        XMap.prototype['@@transducer/init'] = _xfBase.init;
        XMap.prototype['@@transducer/result'] = _xfBase.result;
        XMap.prototype['@@transducer/step'] = function (result, input) {
            return this.xf['@@transducer/step'](result, this.f(input));
        };
        return _curry2(function _xmap(f, xf) {
            return new XMap(f, xf);
        });
    }();

    var _xtake = function () {
        function XTake(n, xf) {
            this.xf = xf;
            this.n = n;
        }
        XTake.prototype['@@transducer/init'] = _xfBase.init;
        XTake.prototype['@@transducer/result'] = _xfBase.result;
        XTake.prototype['@@transducer/step'] = function (result, input) {
            if (this.n === 0) {
                return _reduced(result);
            } else {
                this.n -= 1;
                return this.xf['@@transducer/step'](result, input);
            }
        };
        return _curry2(function _xtake(n, xf) {
            return new XTake(n, xf);
        });
    }();

    var _xtakeWhile = function () {
        function XTakeWhile(f, xf) {
            this.xf = xf;
            this.f = f;
        }
        XTakeWhile.prototype['@@transducer/init'] = _xfBase.init;
        XTakeWhile.prototype['@@transducer/result'] = _xfBase.result;
        XTakeWhile.prototype['@@transducer/step'] = function (result, input) {
            return this.f(input) ? this.xf['@@transducer/step'](result, input) : _reduced(result);
        };
        return _curry2(function _xtakeWhile(f, xf) {
            return new XTakeWhile(f, xf);
        });
    }();

    /**
     * Adds two values.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Math
     * @sig Number -> Number -> Number
     * @param {Number} a
     * @param {Number} b
     * @return {Number}
     * @see R.subtract
     * @example
     *
     *      R.add(2, 3);       //=>  5
     *      R.add(7)(10);      //=> 17
     */
    var add = _curry2(function add(a, b) {
        return Number(a) + Number(b);
    });

    /**
     * Applies a function to the value at the given index of an array, returning a
     * new copy of the array with the element at the given index replaced with the
     * result of the function application.
     *
     * @func
     * @memberOf R
     * @since v0.14.0
     * @category List
     * @sig (a -> a) -> Number -> [a] -> [a]
     * @param {Function} fn The function to apply.
     * @param {Number} idx The index.
     * @param {Array|Arguments} list An array-like object whose value
     *        at the supplied index will be replaced.
     * @return {Array} A copy of the supplied array-like object with
     *         the element at index `idx` replaced with the value
     *         returned by applying `fn` to the existing element.
     * @see R.update
     * @example
     *
     *      R.adjust(R.add(10), 1, [0, 1, 2]);     //=> [0, 11, 2]
     *      R.adjust(R.add(10))(1)([0, 1, 2]);     //=> [0, 11, 2]
     */
    var adjust = _curry3(function adjust(fn, idx, list) {
        if (idx >= list.length || idx < -list.length) {
            return list;
        }
        var start = idx < 0 ? list.length : 0;
        var _idx = start + idx;
        var _list = _concat(list);
        _list[_idx] = fn(list[_idx]);
        return _list;
    });

    /**
     * Returns `true` if all elements of the list match the predicate, `false` if
     * there are any that don't.
     *
     * Dispatches to the `all` method of the second argument, if present.
     *
     * Acts as a transducer if a transformer is given in list position.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig (a -> Boolean) -> [a] -> Boolean
     * @param {Function} fn The predicate function.
     * @param {Array} list The array to consider.
     * @return {Boolean} `true` if the predicate is satisfied by every element, `false`
     *         otherwise.
     * @see R.any, R.none, R.transduce
     * @example
     *
     *      var lessThan2 = R.flip(R.lt)(2);
     *      var lessThan3 = R.flip(R.lt)(3);
     *      R.all(lessThan2)([1, 2]); //=> false
     *      R.all(lessThan3)([1, 2]); //=> true
     */
    var all = _curry2(_dispatchable('all', _xall, function all(fn, list) {
        var idx = 0;
        while (idx < list.length) {
            if (!fn(list[idx])) {
                return false;
            }
            idx += 1;
        }
        return true;
    }));

    /**
     * Returns a function that always returns the given value. Note that for
     * non-primitives the value returned is a reference to the original value.
     *
     * This function is known as `const`, `constant`, or `K` (for K combinator) in
     * other languages and libraries.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Function
     * @sig a -> (* -> a)
     * @param {*} val The value to wrap in a function
     * @return {Function} A Function :: * -> val.
     * @example
     *
     *      var t = R.always('Tee');
     *      t(); //=> 'Tee'
     */
    var always = _curry1(function always(val) {
        return function () {
            return val;
        };
    });

    /**
     * Returns `true` if both arguments are `true`; `false` otherwise.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Logic
     * @sig * -> * -> *
     * @param {Boolean} a A boolean value
     * @param {Boolean} b A boolean value
     * @return {Boolean} `true` if both arguments are `true`, `false` otherwise
     * @see R.both
     * @example
     *
     *      R.and(true, true); //=> true
     *      R.and(true, false); //=> false
     *      R.and(false, true); //=> false
     *      R.and(false, false); //=> false
     */
    var and = _curry2(function and(a, b) {
        return a && b;
    });

    /**
     * Returns `true` if at least one of elements of the list match the predicate,
     * `false` otherwise.
     *
     * Dispatches to the `any` method of the second argument, if present.
     *
     * Acts as a transducer if a transformer is given in list position.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig (a -> Boolean) -> [a] -> Boolean
     * @param {Function} fn The predicate function.
     * @param {Array} list The array to consider.
     * @return {Boolean} `true` if the predicate is satisfied by at least one element, `false`
     *         otherwise.
     * @see R.all, R.none, R.transduce
     * @example
     *
     *      var lessThan0 = R.flip(R.lt)(0);
     *      var lessThan2 = R.flip(R.lt)(2);
     *      R.any(lessThan0)([1, 2]); //=> false
     *      R.any(lessThan2)([1, 2]); //=> true
     */
    var any = _curry2(_dispatchable('any', _xany, function any(fn, list) {
        var idx = 0;
        while (idx < list.length) {
            if (fn(list[idx])) {
                return true;
            }
            idx += 1;
        }
        return false;
    }));

    /**
     * Returns a new list, composed of n-tuples of consecutive elements If `n` is
     * greater than the length of the list, an empty list is returned.
     *
     * Dispatches to the `aperture` method of the second argument, if present.
     *
     * Acts as a transducer if a transformer is given in list position.
     *
     * @func
     * @memberOf R
     * @since v0.12.0
     * @category List
     * @sig Number -> [a] -> [[a]]
     * @param {Number} n The size of the tuples to create
     * @param {Array} list The list to split into `n`-tuples
     * @return {Array} The new list.
     * @see R.transduce
     * @example
     *
     *      R.aperture(2, [1, 2, 3, 4, 5]); //=> [[1, 2], [2, 3], [3, 4], [4, 5]]
     *      R.aperture(3, [1, 2, 3, 4, 5]); //=> [[1, 2, 3], [2, 3, 4], [3, 4, 5]]
     *      R.aperture(7, [1, 2, 3, 4, 5]); //=> []
     */
    var aperture = _curry2(_dispatchable('aperture', _xaperture, _aperture));

    /**
     * Returns a new list containing the contents of the given list, followed by
     * the given element.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig a -> [a] -> [a]
     * @param {*} el The element to add to the end of the new list.
     * @param {Array} list The list whose contents will be added to the beginning of the output
     *        list.
     * @return {Array} A new list containing the contents of the old list followed by `el`.
     * @see R.prepend
     * @example
     *
     *      R.append('tests', ['write', 'more']); //=> ['write', 'more', 'tests']
     *      R.append('tests', []); //=> ['tests']
     *      R.append(['tests'], ['write', 'more']); //=> ['write', 'more', ['tests']]
     */
    var append = _curry2(function append(el, list) {
        return _concat(list, [el]);
    });

    /**
     * Applies function `fn` to the argument list `args`. This is useful for
     * creating a fixed-arity function from a variadic function. `fn` should be a
     * bound function if context is significant.
     *
     * @func
     * @memberOf R
     * @since v0.7.0
     * @category Function
     * @sig (*... -> a) -> [*] -> a
     * @param {Function} fn
     * @param {Array} args
     * @return {*}
     * @see R.call, R.unapply
     * @example
     *
     *      var nums = [1, 2, 3, -99, 42, 6, 7];
     *      R.apply(Math.max, nums); //=> 42
     */
    var apply = _curry2(function apply(fn, args) {
        return fn.apply(this, args);
    });

    /**
     * Makes a shallow clone of an object, setting or overriding the specified
     * property with the given value. Note that this copies and flattens prototype
     * properties onto the new object as well. All non-primitive properties are
     * copied by reference.
     *
     * @func
     * @memberOf R
     * @since v0.8.0
     * @category Object
     * @sig String -> a -> {k: v} -> {k: v}
     * @param {String} prop the property name to set
     * @param {*} val the new value
     * @param {Object} obj the object to clone
     * @return {Object} a new object similar to the original except for the specified property.
     * @see R.dissoc
     * @example
     *
     *      R.assoc('c', 3, {a: 1, b: 2}); //=> {a: 1, b: 2, c: 3}
     */
    var assoc = _curry3(function assoc(prop, val, obj) {
        var result = {};
        for (var p in obj) {
            result[p] = obj[p];
        }
        result[prop] = val;
        return result;
    });

    /**
     * Makes a shallow clone of an object, setting or overriding the nodes required
     * to create the given path, and placing the specific value at the tail end of
     * that path. Note that this copies and flattens prototype properties onto the
     * new object as well. All non-primitive properties are copied by reference.
     *
     * @func
     * @memberOf R
     * @since v0.8.0
     * @category Object
     * @sig [String] -> a -> {k: v} -> {k: v}
     * @param {Array} path the path to set
     * @param {*} val the new value
     * @param {Object} obj the object to clone
     * @return {Object} a new object similar to the original except along the specified path.
     * @see R.dissocPath
     * @example
     *
     *      R.assocPath(['a', 'b', 'c'], 42, {a: {b: {c: 0}}}); //=> {a: {b: {c: 42}}}
     */
    var assocPath = _curry3(function assocPath(path, val, obj) {
        switch (path.length) {
        case 0:
            return val;
        case 1:
            return assoc(path[0], val, obj);
        default:
            return assoc(path[0], assocPath(_slice(path, 1), val, Object(obj[path[0]])), obj);
        }
    });

    /**
     * Creates a function that is bound to a context.
     * Note: `R.bind` does not provide the additional argument-binding capabilities of
     * [Function.prototype.bind](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/bind).
     *
     * @func
     * @memberOf R
     * @since v0.6.0
     * @category Function
     * @category Object
     * @sig (* -> *) -> {*} -> (* -> *)
     * @param {Function} fn The function to bind to context
     * @param {Object} thisObj The context to bind `fn` to
     * @return {Function} A function that will execute in the context of `thisObj`.
     * @see R.partial
     */
    var bind = _curry2(function bind(fn, thisObj) {
        return _arity(fn.length, function () {
            return fn.apply(thisObj, arguments);
        });
    });

    /**
     * Restricts a number to be within a range.
     *
     * Also works for other ordered types such as Strings and Dates.
     *
     * @func
     * @memberOf R
     * @since v0.20.0
     * @category Relation
     * @sig Ord a => a -> a -> a -> a
     * @param {Number} minimum number
     * @param {Number} maximum number
     * @param {Number} value to be clamped
     * @return {Number} Returns the clamped value
     * @example
     *
     *      R.clamp(1, 10, -1) // => 1
     *      R.clamp(1, 10, 11) // => 10
     *      R.clamp(1, 10, 4)  // => 4
     */
    var clamp = _curry3(function clamp(min, max, value) {
        if (min > max) {
            throw new Error('min must not be greater than max in clamp(min, max, value)');
        }
        return value < min ? min : value > max ? max : value;
    });

    /**
     * Makes a comparator function out of a function that reports whether the first
     * element is less than the second.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Function
     * @sig (a, b -> Boolean) -> (a, b -> Number)
     * @param {Function} pred A predicate function of arity two.
     * @return {Function} A Function :: a -> b -> Int that returns `-1` if a < b, `1` if b < a, otherwise `0`.
     * @example
     *
     *      var cmp = R.comparator((a, b) => a.age < b.age);
     *      var people = [
     *        // ...
     *      ];
     *      R.sort(cmp, people);
     */
    var comparator = _curry1(function comparator(pred) {
        return function (a, b) {
            return pred(a, b) ? -1 : pred(b, a) ? 1 : 0;
        };
    });

    /**
     * Returns a curried equivalent of the provided function, with the specified
     * arity. The curried function has two unusual capabilities. First, its
     * arguments needn't be provided one at a time. If `g` is `R.curryN(3, f)`, the
     * following are equivalent:
     *
     *   - `g(1)(2)(3)`
     *   - `g(1)(2, 3)`
     *   - `g(1, 2)(3)`
     *   - `g(1, 2, 3)`
     *
     * Secondly, the special placeholder value `R.__` may be used to specify
     * "gaps", allowing partial application of any combination of arguments,
     * regardless of their positions. If `g` is as above and `_` is `R.__`, the
     * following are equivalent:
     *
     *   - `g(1, 2, 3)`
     *   - `g(_, 2, 3)(1)`
     *   - `g(_, _, 3)(1)(2)`
     *   - `g(_, _, 3)(1, 2)`
     *   - `g(_, 2)(1)(3)`
     *   - `g(_, 2)(1, 3)`
     *   - `g(_, 2)(_, 3)(1)`
     *
     * @func
     * @memberOf R
     * @since v0.5.0
     * @category Function
     * @sig Number -> (* -> a) -> (* -> a)
     * @param {Number} length The arity for the returned function.
     * @param {Function} fn The function to curry.
     * @return {Function} A new, curried function.
     * @see R.curry
     * @example
     *
     *      var sumArgs = (...args) => R.sum(args);
     *
     *      var curriedAddFourNumbers = R.curryN(4, sumArgs);
     *      var f = curriedAddFourNumbers(1, 2);
     *      var g = f(3);
     *      g(4); //=> 10
     */
    var curryN = _curry2(function curryN(length, fn) {
        if (length === 1) {
            return _curry1(fn);
        }
        return _arity(length, _curryN(length, [], fn));
    });

    /**
     * Decrements its argument.
     *
     * @func
     * @memberOf R
     * @since v0.9.0
     * @category Math
     * @sig Number -> Number
     * @param {Number} n
     * @return {Number}
     * @see R.inc
     * @example
     *
     *      R.dec(42); //=> 41
     */
    var dec = add(-1);

    /**
     * Returns the second argument if it is not `null`, `undefined` or `NaN`
     * otherwise the first argument is returned.
     *
     * @func
     * @memberOf R
     * @since v0.10.0
     * @category Logic
     * @sig a -> b -> a | b
     * @param {a} val The default value.
     * @param {b} val The value to return if it is not null or undefined
     * @return {*} The the second value or the default value
     * @example
     *
     *      var defaultTo42 = R.defaultTo(42);
     *
     *      defaultTo42(null);  //=> 42
     *      defaultTo42(undefined);  //=> 42
     *      defaultTo42('Ramda');  //=> 'Ramda'
     *      defaultTo42(parseInt('string')); //=> 42
     */
    var defaultTo = _curry2(function defaultTo(d, v) {
        return v == null || v !== v ? d : v;
    });

    /**
     * Finds the set (i.e. no duplicates) of all elements in the first list not
     * contained in the second list. Duplication is determined according to the
     * value returned by applying the supplied predicate to two list elements.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Relation
     * @sig (a -> a -> Boolean) -> [*] -> [*] -> [*]
     * @param {Function} pred A predicate used to test whether two items are equal.
     * @param {Array} list1 The first list.
     * @param {Array} list2 The second list.
     * @return {Array} The elements in `list1` that are not in `list2`.
     * @see R.difference
     * @example
     *
     *      var cmp = (x, y) => x.a === y.a;
     *      var l1 = [{a: 1}, {a: 2}, {a: 3}];
     *      var l2 = [{a: 3}, {a: 4}];
     *      R.differenceWith(cmp, l1, l2); //=> [{a: 1}, {a: 2}]
     */
    var differenceWith = _curry3(function differenceWith(pred, first, second) {
        var out = [];
        var idx = 0;
        var firstLen = first.length;
        while (idx < firstLen) {
            if (!_containsWith(pred, first[idx], second) && !_containsWith(pred, first[idx], out)) {
                out.push(first[idx]);
            }
            idx += 1;
        }
        return out;
    });

    /**
     * Returns a new object that does not contain a `prop` property.
     *
     * @func
     * @memberOf R
     * @since v0.10.0
     * @category Object
     * @sig String -> {k: v} -> {k: v}
     * @param {String} prop the name of the property to dissociate
     * @param {Object} obj the object to clone
     * @return {Object} a new object similar to the original but without the specified property
     * @see R.assoc
     * @example
     *
     *      R.dissoc('b', {a: 1, b: 2, c: 3}); //=> {a: 1, c: 3}
     */
    var dissoc = _curry2(function dissoc(prop, obj) {
        var result = {};
        for (var p in obj) {
            if (p !== prop) {
                result[p] = obj[p];
            }
        }
        return result;
    });

    /**
     * Makes a shallow clone of an object, omitting the property at the given path.
     * Note that this copies and flattens prototype properties onto the new object
     * as well. All non-primitive properties are copied by reference.
     *
     * @func
     * @memberOf R
     * @since v0.11.0
     * @category Object
     * @sig [String] -> {k: v} -> {k: v}
     * @param {Array} path the path to set
     * @param {Object} obj the object to clone
     * @return {Object} a new object without the property at path
     * @see R.assocPath
     * @example
     *
     *      R.dissocPath(['a', 'b', 'c'], {a: {b: {c: 42}}}); //=> {a: {b: {}}}
     */
    var dissocPath = _curry2(function dissocPath(path, obj) {
        switch (path.length) {
        case 0:
            return obj;
        case 1:
            return dissoc(path[0], obj);
        default:
            var head = path[0];
            var tail = _slice(path, 1);
            return obj[head] == null ? obj : assoc(head, dissocPath(tail, obj[head]), obj);
        }
    });

    /**
     * Divides two numbers. Equivalent to `a / b`.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Math
     * @sig Number -> Number -> Number
     * @param {Number} a The first value.
     * @param {Number} b The second value.
     * @return {Number} The result of `a / b`.
     * @see R.multiply
     * @example
     *
     *      R.divide(71, 100); //=> 0.71
     *
     *      var half = R.divide(R.__, 2);
     *      half(42); //=> 21
     *
     *      var reciprocal = R.divide(1);
     *      reciprocal(4);   //=> 0.25
     */
    var divide = _curry2(function divide(a, b) {
        return a / b;
    });

    /**
     * Returns a new list containing the last `n` elements of a given list, passing
     * each value to the supplied predicate function, skipping elements while the
     * predicate function returns `true`. The predicate function is passed one
     * argument: *(value)*.
     *
     * Dispatches to the `dropWhile` method of the second argument, if present.
     *
     * Acts as a transducer if a transformer is given in list position.
     *
     * @func
     * @memberOf R
     * @since v0.9.0
     * @category List
     * @sig (a -> Boolean) -> [a] -> [a]
     * @param {Function} fn The function called per iteration.
     * @param {Array} list The collection to iterate over.
     * @return {Array} A new array.
     * @see R.takeWhile, R.transduce, R.addIndex
     * @example
     *
     *      var lteTwo = x => x <= 2;
     *
     *      R.dropWhile(lteTwo, [1, 2, 3, 4, 3, 2, 1]); //=> [3, 4, 3, 2, 1]
     */
    var dropWhile = _curry2(_dispatchable('dropWhile', _xdropWhile, function dropWhile(pred, list) {
        var idx = 0;
        var len = list.length;
        while (idx < len && pred(list[idx])) {
            idx += 1;
        }
        return _slice(list, idx);
    }));

    /**
     * Returns the empty value of its argument's type. Ramda defines the empty
     * value of Array (`[]`), Object (`{}`), String (`''`), and Arguments. Other
     * types are supported if they define `<Type>.empty` and/or
     * `<Type>.prototype.empty`.
     *
     * Dispatches to the `empty` method of the first argument, if present.
     *
     * @func
     * @memberOf R
     * @since v0.3.0
     * @category Function
     * @sig a -> a
     * @param {*} x
     * @return {*}
     * @example
     *
     *      R.empty(Just(42));      //=> Nothing()
     *      R.empty([1, 2, 3]);     //=> []
     *      R.empty('unicorns');    //=> ''
     *      R.empty({x: 1, y: 2});  //=> {}
     */
    // else
    var empty = _curry1(function empty(x) {
        return x != null && typeof x.empty === 'function' ? x.empty() : x != null && x.constructor != null && typeof x.constructor.empty === 'function' ? x.constructor.empty() : _isArray(x) ? [] : _isString(x) ? '' : _isObject(x) ? {} : _isArguments(x) ? function () {
            return arguments;
        }() : // else
        void 0;
    });

    /**
     * Creates a new object by recursively evolving a shallow copy of `object`,
     * according to the `transformation` functions. All non-primitive properties
     * are copied by reference.
     *
     * A `transformation` function will not be invoked if its corresponding key
     * does not exist in the evolved object.
     *
     * @func
     * @memberOf R
     * @since v0.9.0
     * @category Object
     * @sig {k: (v -> v)} -> {k: v} -> {k: v}
     * @param {Object} transformations The object specifying transformation functions to apply
     *        to the object.
     * @param {Object} object The object to be transformed.
     * @return {Object} The transformed object.
     * @example
     *
     *      var tomato  = {firstName: '  Tomato ', data: {elapsed: 100, remaining: 1400}, id:123};
     *      var transformations = {
     *        firstName: R.trim,
     *        lastName: R.trim, // Will not get invoked.
     *        data: {elapsed: R.add(1), remaining: R.add(-1)}
     *      };
     *      R.evolve(transformations, tomato); //=> {firstName: 'Tomato', data: {elapsed: 101, remaining: 1399}, id:123}
     */
    var evolve = _curry2(function evolve(transformations, object) {
        var result = {};
        var transformation, key, type;
        for (key in object) {
            transformation = transformations[key];
            type = typeof transformation;
            result[key] = type === 'function' ? transformation(object[key]) : type === 'object' ? evolve(transformations[key], object[key]) : object[key];
        }
        return result;
    });

    /**
     * Returns the first element of the list which matches the predicate, or
     * `undefined` if no element matches.
     *
     * Dispatches to the `find` method of the second argument, if present.
     *
     * Acts as a transducer if a transformer is given in list position.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig (a -> Boolean) -> [a] -> a | undefined
     * @param {Function} fn The predicate function used to determine if the element is the
     *        desired one.
     * @param {Array} list The array to consider.
     * @return {Object} The element found, or `undefined`.
     * @see R.transduce
     * @example
     *
     *      var xs = [{a: 1}, {a: 2}, {a: 3}];
     *      R.find(R.propEq('a', 2))(xs); //=> {a: 2}
     *      R.find(R.propEq('a', 4))(xs); //=> undefined
     */
    var find = _curry2(_dispatchable('find', _xfind, function find(fn, list) {
        var idx = 0;
        var len = list.length;
        while (idx < len) {
            if (fn(list[idx])) {
                return list[idx];
            }
            idx += 1;
        }
    }));

    /**
     * Returns the index of the first element of the list which matches the
     * predicate, or `-1` if no element matches.
     *
     * Dispatches to the `findIndex` method of the second argument, if present.
     *
     * Acts as a transducer if a transformer is given in list position.
     *
     * @func
     * @memberOf R
     * @since v0.1.1
     * @category List
     * @sig (a -> Boolean) -> [a] -> Number
     * @param {Function} fn The predicate function used to determine if the element is the
     * desired one.
     * @param {Array} list The array to consider.
     * @return {Number} The index of the element found, or `-1`.
     * @see R.transduce
     * @example
     *
     *      var xs = [{a: 1}, {a: 2}, {a: 3}];
     *      R.findIndex(R.propEq('a', 2))(xs); //=> 1
     *      R.findIndex(R.propEq('a', 4))(xs); //=> -1
     */
    var findIndex = _curry2(_dispatchable('findIndex', _xfindIndex, function findIndex(fn, list) {
        var idx = 0;
        var len = list.length;
        while (idx < len) {
            if (fn(list[idx])) {
                return idx;
            }
            idx += 1;
        }
        return -1;
    }));

    /**
     * Returns the last element of the list which matches the predicate, or
     * `undefined` if no element matches.
     *
     * Dispatches to the `findLast` method of the second argument, if present.
     *
     * Acts as a transducer if a transformer is given in list position.
     *
     * @func
     * @memberOf R
     * @since v0.1.1
     * @category List
     * @sig (a -> Boolean) -> [a] -> a | undefined
     * @param {Function} fn The predicate function used to determine if the element is the
     * desired one.
     * @param {Array} list The array to consider.
     * @return {Object} The element found, or `undefined`.
     * @see R.transduce
     * @example
     *
     *      var xs = [{a: 1, b: 0}, {a:1, b: 1}];
     *      R.findLast(R.propEq('a', 1))(xs); //=> {a: 1, b: 1}
     *      R.findLast(R.propEq('a', 4))(xs); //=> undefined
     */
    var findLast = _curry2(_dispatchable('findLast', _xfindLast, function findLast(fn, list) {
        var idx = list.length - 1;
        while (idx >= 0) {
            if (fn(list[idx])) {
                return list[idx];
            }
            idx -= 1;
        }
    }));

    /**
     * Returns the index of the last element of the list which matches the
     * predicate, or `-1` if no element matches.
     *
     * Dispatches to the `findLastIndex` method of the second argument, if present.
     *
     * Acts as a transducer if a transformer is given in list position.
     *
     * @func
     * @memberOf R
     * @since v0.1.1
     * @category List
     * @sig (a -> Boolean) -> [a] -> Number
     * @param {Function} fn The predicate function used to determine if the element is the
     * desired one.
     * @param {Array} list The array to consider.
     * @return {Number} The index of the element found, or `-1`.
     * @see R.transduce
     * @example
     *
     *      var xs = [{a: 1, b: 0}, {a:1, b: 1}];
     *      R.findLastIndex(R.propEq('a', 1))(xs); //=> 1
     *      R.findLastIndex(R.propEq('a', 4))(xs); //=> -1
     */
    var findLastIndex = _curry2(_dispatchable('findLastIndex', _xfindLastIndex, function findLastIndex(fn, list) {
        var idx = list.length - 1;
        while (idx >= 0) {
            if (fn(list[idx])) {
                return idx;
            }
            idx -= 1;
        }
        return -1;
    }));

    /**
     * Iterate over an input `list`, calling a provided function `fn` for each
     * element in the list.
     *
     * `fn` receives one argument: *(value)*.
     *
     * Note: `R.forEach` does not skip deleted or unassigned indices (sparse
     * arrays), unlike the native `Array.prototype.forEach` method. For more
     * details on this behavior, see:
     * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach#Description
     *
     * Also note that, unlike `Array.prototype.forEach`, Ramda's `forEach` returns
     * the original array. In some libraries this function is named `each`.
     *
     * Dispatches to the `forEach` method of the second argument, if present.
     *
     * @func
     * @memberOf R
     * @since v0.1.1
     * @category List
     * @sig (a -> *) -> [a] -> [a]
     * @param {Function} fn The function to invoke. Receives one argument, `value`.
     * @param {Array} list The list to iterate over.
     * @return {Array} The original list.
     * @see R.addIndex
     * @example
     *
     *      var printXPlusFive = x => console.log(x + 5);
     *      R.forEach(printXPlusFive, [1, 2, 3]); //=> [1, 2, 3]
     *      //-> 6
     *      //-> 7
     *      //-> 8
     */
    var forEach = _curry2(_checkForMethod('forEach', function forEach(fn, list) {
        var len = list.length;
        var idx = 0;
        while (idx < len) {
            fn(list[idx]);
            idx += 1;
        }
        return list;
    }));

    /**
     * Creates a new object out of a list key-value pairs.
     *
     * @func
     * @memberOf R
     * @since v0.3.0
     * @category List
     * @sig [[k,v]] -> {k: v}
     * @param {Array} pairs An array of two-element arrays that will be the keys and values of the output object.
     * @return {Object} The object made by pairing up `keys` and `values`.
     * @see R.toPairs, R.pair
     * @example
     *
     *      R.fromPairs([['a', 1], ['b', 2],  ['c', 3]]); //=> {a: 1, b: 2, c: 3}
     */
    var fromPairs = _curry1(function fromPairs(pairs) {
        var idx = 0;
        var len = pairs.length;
        var out = {};
        while (idx < len) {
            if (_isArray(pairs[idx]) && pairs[idx].length) {
                out[pairs[idx][0]] = pairs[idx][1];
            }
            idx += 1;
        }
        return out;
    });

    /**
     * Takes a list and returns a list of lists where each sublist's elements are
     * all "equal" according to the provided equality function.
     *
     * @func
     * @memberOf R
     * @since v0.21.0
     * @category List
     * @sig (a, a -> Boolean) -> [a] -> [[a]]
     * @param {Function} fn Function for determining whether two given (adjacent)
     *        elements should be in the same group
     * @param {Array} list The array to group. Also accepts a string, which will be
     *        treated as a list of characters.
     * @return {List} A list that contains sublists of equal elements,
     *         whose concatenations is equal to the original list.
     * @example
     *
     *    groupWith(R.equals, [0, 1, 1, 2, 3, 5, 8, 13, 21])
     *    // [[0], [1, 1], [2, 3, 5, 8, 13, 21]]
     *
     *    groupWith((a, b) => a % 2 === b % 2, [0, 1, 1, 2, 3, 5, 8, 13, 21])
     *    // [[0], [1, 1], [2], [3, 5], [8], [13, 21]]
     *
     *    R.groupWith(R.eqBy(isVowel), 'aestiou')
     *    // ['ae', 'st', 'iou']
     */
    var groupWith = _curry2(function (fn, list) {
        var res = [];
        var idx = 0;
        var len = list.length;
        while (idx < len) {
            var nextidx = idx + 1;
            while (nextidx < len && fn(list[idx], list[nextidx])) {
                nextidx += 1;
            }
            res.push(list.slice(idx, nextidx));
            idx = nextidx;
        }
        return res;
    });

    /**
     * Returns `true` if the first argument is greater than the second; `false`
     * otherwise.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Relation
     * @sig Ord a => a -> a -> Boolean
     * @param {*} a
     * @param {*} b
     * @return {Boolean}
     * @see R.lt
     * @example
     *
     *      R.gt(2, 1); //=> true
     *      R.gt(2, 2); //=> false
     *      R.gt(2, 3); //=> false
     *      R.gt('a', 'z'); //=> false
     *      R.gt('z', 'a'); //=> true
     */
    var gt = _curry2(function gt(a, b) {
        return a > b;
    });

    /**
     * Returns `true` if the first argument is greater than or equal to the second;
     * `false` otherwise.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Relation
     * @sig Ord a => a -> a -> Boolean
     * @param {Number} a
     * @param {Number} b
     * @return {Boolean}
     * @see R.lte
     * @example
     *
     *      R.gte(2, 1); //=> true
     *      R.gte(2, 2); //=> true
     *      R.gte(2, 3); //=> false
     *      R.gte('a', 'z'); //=> false
     *      R.gte('z', 'a'); //=> true
     */
    var gte = _curry2(function gte(a, b) {
        return a >= b;
    });

    /**
     * Returns whether or not an object has an own property with the specified name
     *
     * @func
     * @memberOf R
     * @since v0.7.0
     * @category Object
     * @sig s -> {s: x} -> Boolean
     * @param {String} prop The name of the property to check for.
     * @param {Object} obj The object to query.
     * @return {Boolean} Whether the property exists.
     * @example
     *
     *      var hasName = R.has('name');
     *      hasName({name: 'alice'});   //=> true
     *      hasName({name: 'bob'});     //=> true
     *      hasName({});                //=> false
     *
     *      var point = {x: 0, y: 0};
     *      var pointHas = R.has(R.__, point);
     *      pointHas('x');  //=> true
     *      pointHas('y');  //=> true
     *      pointHas('z');  //=> false
     */
    var has = _curry2(_has);

    /**
     * Returns whether or not an object or its prototype chain has a property with
     * the specified name
     *
     * @func
     * @memberOf R
     * @since v0.7.0
     * @category Object
     * @sig s -> {s: x} -> Boolean
     * @param {String} prop The name of the property to check for.
     * @param {Object} obj The object to query.
     * @return {Boolean} Whether the property exists.
     * @example
     *
     *      function Rectangle(width, height) {
     *        this.width = width;
     *        this.height = height;
     *      }
     *      Rectangle.prototype.area = function() {
     *        return this.width * this.height;
     *      };
     *
     *      var square = new Rectangle(2, 2);
     *      R.hasIn('width', square);  //=> true
     *      R.hasIn('area', square);  //=> true
     */
    var hasIn = _curry2(function hasIn(prop, obj) {
        return prop in obj;
    });

    /**
     * Returns true if its arguments are identical, false otherwise. Values are
     * identical if they reference the same memory. `NaN` is identical to `NaN`;
     * `0` and `-0` are not identical.
     *
     * @func
     * @memberOf R
     * @since v0.15.0
     * @category Relation
     * @sig a -> a -> Boolean
     * @param {*} a
     * @param {*} b
     * @return {Boolean}
     * @example
     *
     *      var o = {};
     *      R.identical(o, o); //=> true
     *      R.identical(1, 1); //=> true
     *      R.identical(1, '1'); //=> false
     *      R.identical([], []); //=> false
     *      R.identical(0, -0); //=> false
     *      R.identical(NaN, NaN); //=> true
     */
    // SameValue algorithm
    // Steps 1-5, 7-10
    // Steps 6.b-6.e: +0 != -0
    // Step 6.a: NaN == NaN
    var identical = _curry2(function identical(a, b) {
        // SameValue algorithm
        if (a === b) {
            // Steps 1-5, 7-10
            // Steps 6.b-6.e: +0 != -0
            return a !== 0 || 1 / a === 1 / b;
        } else {
            // Step 6.a: NaN == NaN
            return a !== a && b !== b;
        }
    });

    /**
     * A function that does nothing but return the parameter supplied to it. Good
     * as a default or placeholder function.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Function
     * @sig a -> a
     * @param {*} x The value to return.
     * @return {*} The input value, `x`.
     * @example
     *
     *      R.identity(1); //=> 1
     *
     *      var obj = {};
     *      R.identity(obj) === obj; //=> true
     */
    var identity = _curry1(_identity);

    /**
     * Creates a function that will process either the `onTrue` or the `onFalse`
     * function depending upon the result of the `condition` predicate.
     *
     * @func
     * @memberOf R
     * @since v0.8.0
     * @category Logic
     * @sig (*... -> Boolean) -> (*... -> *) -> (*... -> *) -> (*... -> *)
     * @param {Function} condition A predicate function
     * @param {Function} onTrue A function to invoke when the `condition` evaluates to a truthy value.
     * @param {Function} onFalse A function to invoke when the `condition` evaluates to a falsy value.
     * @return {Function} A new unary function that will process either the `onTrue` or the `onFalse`
     *                    function depending upon the result of the `condition` predicate.
     * @see R.unless, R.when
     * @example
     *
     *      var incCount = R.ifElse(
     *        R.has('count'),
     *        R.over(R.lensProp('count'), R.inc),
     *        R.assoc('count', 1)
     *      );
     *      incCount({});           //=> { count: 1 }
     *      incCount({ count: 1 }); //=> { count: 2 }
     */
    var ifElse = _curry3(function ifElse(condition, onTrue, onFalse) {
        return curryN(Math.max(condition.length, onTrue.length, onFalse.length), function _ifElse() {
            return condition.apply(this, arguments) ? onTrue.apply(this, arguments) : onFalse.apply(this, arguments);
        });
    });

    /**
     * Increments its argument.
     *
     * @func
     * @memberOf R
     * @since v0.9.0
     * @category Math
     * @sig Number -> Number
     * @param {Number} n
     * @return {Number}
     * @see R.dec
     * @example
     *
     *      R.inc(42); //=> 43
     */
    var inc = add(1);

    /**
     * Inserts the supplied element into the list, at index `index`. _Note that
     * this is not destructive_: it returns a copy of the list with the changes.
     * <small>No lists have been harmed in the application of this function.</small>
     *
     * @func
     * @memberOf R
     * @since v0.2.2
     * @category List
     * @sig Number -> a -> [a] -> [a]
     * @param {Number} index The position to insert the element
     * @param {*} elt The element to insert into the Array
     * @param {Array} list The list to insert into
     * @return {Array} A new Array with `elt` inserted at `index`.
     * @example
     *
     *      R.insert(2, 'x', [1,2,3,4]); //=> [1,2,'x',3,4]
     */
    var insert = _curry3(function insert(idx, elt, list) {
        idx = idx < list.length && idx >= 0 ? idx : list.length;
        var result = _slice(list);
        result.splice(idx, 0, elt);
        return result;
    });

    /**
     * Inserts the sub-list into the list, at index `index`. _Note that this is not
     * destructive_: it returns a copy of the list with the changes.
     * <small>No lists have been harmed in the application of this function.</small>
     *
     * @func
     * @memberOf R
     * @since v0.9.0
     * @category List
     * @sig Number -> [a] -> [a] -> [a]
     * @param {Number} index The position to insert the sub-list
     * @param {Array} elts The sub-list to insert into the Array
     * @param {Array} list The list to insert the sub-list into
     * @return {Array} A new Array with `elts` inserted starting at `index`.
     * @example
     *
     *      R.insertAll(2, ['x','y','z'], [1,2,3,4]); //=> [1,2,'x','y','z',3,4]
     */
    var insertAll = _curry3(function insertAll(idx, elts, list) {
        idx = idx < list.length && idx >= 0 ? idx : list.length;
        return _concat(_concat(_slice(list, 0, idx), elts), _slice(list, idx));
    });

    /**
     * Creates a new list with the separator interposed between elements.
     *
     * Dispatches to the `intersperse` method of the second argument, if present.
     *
     * @func
     * @memberOf R
     * @since v0.14.0
     * @category List
     * @sig a -> [a] -> [a]
     * @param {*} separator The element to add to the list.
     * @param {Array} list The list to be interposed.
     * @return {Array} The new list.
     * @example
     *
     *      R.intersperse('n', ['ba', 'a', 'a']); //=> ['ba', 'n', 'a', 'n', 'a']
     */
    var intersperse = _curry2(_checkForMethod('intersperse', function intersperse(separator, list) {
        var out = [];
        var idx = 0;
        var length = list.length;
        while (idx < length) {
            if (idx === length - 1) {
                out.push(list[idx]);
            } else {
                out.push(list[idx], separator);
            }
            idx += 1;
        }
        return out;
    }));

    /**
     * See if an object (`val`) is an instance of the supplied constructor. This
     * function will check up the inheritance chain, if any.
     *
     * @func
     * @memberOf R
     * @since v0.3.0
     * @category Type
     * @sig (* -> {*}) -> a -> Boolean
     * @param {Object} ctor A constructor
     * @param {*} val The value to test
     * @return {Boolean}
     * @example
     *
     *      R.is(Object, {}); //=> true
     *      R.is(Number, 1); //=> true
     *      R.is(Object, 1); //=> false
     *      R.is(String, 's'); //=> true
     *      R.is(String, new String('')); //=> true
     *      R.is(Object, new String('')); //=> true
     *      R.is(Object, 's'); //=> false
     *      R.is(Number, {}); //=> false
     */
    var is = _curry2(function is(Ctor, val) {
        return val != null && val.constructor === Ctor || val instanceof Ctor;
    });

    /**
     * Tests whether or not an object is similar to an array.
     *
     * @func
     * @memberOf R
     * @since v0.5.0
     * @category Type
     * @category List
     * @sig * -> Boolean
     * @param {*} x The object to test.
     * @return {Boolean} `true` if `x` has a numeric length property and extreme indices defined; `false` otherwise.
     * @example
     *
     *      R.isArrayLike([]); //=> true
     *      R.isArrayLike(true); //=> false
     *      R.isArrayLike({}); //=> false
     *      R.isArrayLike({length: 10}); //=> false
     *      R.isArrayLike({0: 'zero', 9: 'nine', length: 10}); //=> true
     */
    var isArrayLike = _curry1(function isArrayLike(x) {
        if (_isArray(x)) {
            return true;
        }
        if (!x) {
            return false;
        }
        if (typeof x !== 'object') {
            return false;
        }
        if (x instanceof String) {
            return false;
        }
        if (x.nodeType === 1) {
            return !!x.length;
        }
        if (x.length === 0) {
            return true;
        }
        if (x.length > 0) {
            return x.hasOwnProperty(0) && x.hasOwnProperty(x.length - 1);
        }
        return false;
    });

    /**
     * Checks if the input value is `null` or `undefined`.
     *
     * @func
     * @memberOf R
     * @since v0.9.0
     * @category Type
     * @sig * -> Boolean
     * @param {*} x The value to test.
     * @return {Boolean} `true` if `x` is `undefined` or `null`, otherwise `false`.
     * @example
     *
     *      R.isNil(null); //=> true
     *      R.isNil(undefined); //=> true
     *      R.isNil(0); //=> false
     *      R.isNil([]); //=> false
     */
    var isNil = _curry1(function isNil(x) {
        return x == null;
    });

    /**
     * Returns a list containing the names of all the enumerable own properties of
     * the supplied object.
     * Note that the order of the output array is not guaranteed to be consistent
     * across different JS platforms.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Object
     * @sig {k: v} -> [k]
     * @param {Object} obj The object to extract properties from
     * @return {Array} An array of the object's own properties.
     * @example
     *
     *      R.keys({a: 1, b: 2, c: 3}); //=> ['a', 'b', 'c']
     */
    // cover IE < 9 keys issues
    // Safari bug
    var keys = function () {
        // cover IE < 9 keys issues
        var hasEnumBug = !{ toString: null }.propertyIsEnumerable('toString');
        var nonEnumerableProps = [
            'constructor',
            'valueOf',
            'isPrototypeOf',
            'toString',
            'propertyIsEnumerable',
            'hasOwnProperty',
            'toLocaleString'
        ];
        // Safari bug
        var hasArgsEnumBug = function () {
            'use strict';
            return arguments.propertyIsEnumerable('length');
        }();
        var contains = function contains(list, item) {
            var idx = 0;
            while (idx < list.length) {
                if (list[idx] === item) {
                    return true;
                }
                idx += 1;
            }
            return false;
        };
        return typeof Object.keys === 'function' && !hasArgsEnumBug ? _curry1(function keys(obj) {
            return Object(obj) !== obj ? [] : Object.keys(obj);
        }) : _curry1(function keys(obj) {
            if (Object(obj) !== obj) {
                return [];
            }
            var prop, nIdx;
            var ks = [];
            var checkArgsLength = hasArgsEnumBug && _isArguments(obj);
            for (prop in obj) {
                if (_has(prop, obj) && (!checkArgsLength || prop !== 'length')) {
                    ks[ks.length] = prop;
                }
            }
            if (hasEnumBug) {
                nIdx = nonEnumerableProps.length - 1;
                while (nIdx >= 0) {
                    prop = nonEnumerableProps[nIdx];
                    if (_has(prop, obj) && !contains(ks, prop)) {
                        ks[ks.length] = prop;
                    }
                    nIdx -= 1;
                }
            }
            return ks;
        });
    }();

    /**
     * Returns a list containing the names of all the properties of the supplied
     * object, including prototype properties.
     * Note that the order of the output array is not guaranteed to be consistent
     * across different JS platforms.
     *
     * @func
     * @memberOf R
     * @since v0.2.0
     * @category Object
     * @sig {k: v} -> [k]
     * @param {Object} obj The object to extract properties from
     * @return {Array} An array of the object's own and prototype properties.
     * @example
     *
     *      var F = function() { this.x = 'X'; };
     *      F.prototype.y = 'Y';
     *      var f = new F();
     *      R.keysIn(f); //=> ['x', 'y']
     */
    var keysIn = _curry1(function keysIn(obj) {
        var prop;
        var ks = [];
        for (prop in obj) {
            ks[ks.length] = prop;
        }
        return ks;
    });

    /**
     * Returns the number of elements in the array by returning `list.length`.
     *
     * @func
     * @memberOf R
     * @since v0.3.0
     * @category List
     * @sig [a] -> Number
     * @param {Array} list The array to inspect.
     * @return {Number} The length of the array.
     * @example
     *
     *      R.length([]); //=> 0
     *      R.length([1, 2, 3]); //=> 3
     */
    var length = _curry1(function length(list) {
        return list != null && is(Number, list.length) ? list.length : NaN;
    });

    /**
     * Returns `true` if the first argument is less than the second; `false`
     * otherwise.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Relation
     * @sig Ord a => a -> a -> Boolean
     * @param {*} a
     * @param {*} b
     * @return {Boolean}
     * @see R.gt
     * @example
     *
     *      R.lt(2, 1); //=> false
     *      R.lt(2, 2); //=> false
     *      R.lt(2, 3); //=> true
     *      R.lt('a', 'z'); //=> true
     *      R.lt('z', 'a'); //=> false
     */
    var lt = _curry2(function lt(a, b) {
        return a < b;
    });

    /**
     * Returns `true` if the first argument is less than or equal to the second;
     * `false` otherwise.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Relation
     * @sig Ord a => a -> a -> Boolean
     * @param {Number} a
     * @param {Number} b
     * @return {Boolean}
     * @see R.gte
     * @example
     *
     *      R.lte(2, 1); //=> false
     *      R.lte(2, 2); //=> true
     *      R.lte(2, 3); //=> true
     *      R.lte('a', 'z'); //=> true
     *      R.lte('z', 'a'); //=> false
     */
    var lte = _curry2(function lte(a, b) {
        return a <= b;
    });

    /**
     * The mapAccum function behaves like a combination of map and reduce; it
     * applies a function to each element of a list, passing an accumulating
     * parameter from left to right, and returning a final value of this
     * accumulator together with the new list.
     *
     * The iterator function receives two arguments, *acc* and *value*, and should
     * return a tuple *[acc, value]*.
     *
     * @func
     * @memberOf R
     * @since v0.10.0
     * @category List
     * @sig (acc -> x -> (acc, y)) -> acc -> [x] -> (acc, [y])
     * @param {Function} fn The function to be called on every element of the input `list`.
     * @param {*} acc The accumulator value.
     * @param {Array} list The list to iterate over.
     * @return {*} The final, accumulated value.
     * @see R.addIndex
     * @example
     *
     *      var digits = ['1', '2', '3', '4'];
     *      var appender = (a, b) => [a + b, a + b];
     *
     *      R.mapAccum(appender, 0, digits); //=> ['01234', ['01', '012', '0123', '01234']]
     */
    var mapAccum = _curry3(function mapAccum(fn, acc, list) {
        var idx = 0;
        var len = list.length;
        var result = [];
        var tuple = [acc];
        while (idx < len) {
            tuple = fn(tuple[0], list[idx]);
            result[idx] = tuple[1];
            idx += 1;
        }
        return [
            tuple[0],
            result
        ];
    });

    /**
     * The mapAccumRight function behaves like a combination of map and reduce; it
     * applies a function to each element of a list, passing an accumulating
     * parameter from right to left, and returning a final value of this
     * accumulator together with the new list.
     *
     * Similar to `mapAccum`, except moves through the input list from the right to
     * the left.
     *
     * The iterator function receives two arguments, *acc* and *value*, and should
     * return a tuple *[acc, value]*.
     *
     * @func
     * @memberOf R
     * @since v0.10.0
     * @category List
     * @sig (acc -> x -> (acc, y)) -> acc -> [x] -> (acc, [y])
     * @param {Function} fn The function to be called on every element of the input `list`.
     * @param {*} acc The accumulator value.
     * @param {Array} list The list to iterate over.
     * @return {*} The final, accumulated value.
     * @see R.addIndex
     * @example
     *
     *      var digits = ['1', '2', '3', '4'];
     *      var append = (a, b) => [a + b, a + b];
     *
     *      R.mapAccumRight(append, 0, digits); //=> ['04321', ['04321', '0432', '043', '04']]
     */
    var mapAccumRight = _curry3(function mapAccumRight(fn, acc, list) {
        var idx = list.length - 1;
        var result = [];
        var tuple = [acc];
        while (idx >= 0) {
            tuple = fn(tuple[0], list[idx]);
            result[idx] = tuple[1];
            idx -= 1;
        }
        return [
            tuple[0],
            result
        ];
    });

    /**
     * Tests a regular expression against a String. Note that this function will
     * return an empty array when there are no matches. This differs from
     * [`String.prototype.match`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/match)
     * which returns `null` when there are no matches.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category String
     * @sig RegExp -> String -> [String | Undefined]
     * @param {RegExp} rx A regular expression.
     * @param {String} str The string to match against
     * @return {Array} The list of matches or empty array.
     * @see R.test
     * @example
     *
     *      R.match(/([a-z]a)/g, 'bananas'); //=> ['ba', 'na', 'na']
     *      R.match(/a/, 'b'); //=> []
     *      R.match(/a/, null); //=> TypeError: null does not have a method named "match"
     */
    var match = _curry2(function match(rx, str) {
        return str.match(rx) || [];
    });

    /**
     * mathMod behaves like the modulo operator should mathematically, unlike the
     * `%` operator (and by extension, R.modulo). So while "-17 % 5" is -2,
     * mathMod(-17, 5) is 3. mathMod requires Integer arguments, and returns NaN
     * when the modulus is zero or negative.
     *
     * @func
     * @memberOf R
     * @since v0.3.0
     * @category Math
     * @sig Number -> Number -> Number
     * @param {Number} m The dividend.
     * @param {Number} p the modulus.
     * @return {Number} The result of `b mod a`.
     * @example
     *
     *      R.mathMod(-17, 5);  //=> 3
     *      R.mathMod(17, 5);   //=> 2
     *      R.mathMod(17, -5);  //=> NaN
     *      R.mathMod(17, 0);   //=> NaN
     *      R.mathMod(17.2, 5); //=> NaN
     *      R.mathMod(17, 5.3); //=> NaN
     *
     *      var clock = R.mathMod(R.__, 12);
     *      clock(15); //=> 3
     *      clock(24); //=> 0
     *
     *      var seventeenMod = R.mathMod(17);
     *      seventeenMod(3);  //=> 2
     *      seventeenMod(4);  //=> 1
     *      seventeenMod(10); //=> 7
     */
    var mathMod = _curry2(function mathMod(m, p) {
        if (!_isInteger(m)) {
            return NaN;
        }
        if (!_isInteger(p) || p < 1) {
            return NaN;
        }
        return (m % p + p) % p;
    });

    /**
     * Returns the larger of its two arguments.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Relation
     * @sig Ord a => a -> a -> a
     * @param {*} a
     * @param {*} b
     * @return {*}
     * @see R.maxBy, R.min
     * @example
     *
     *      R.max(789, 123); //=> 789
     *      R.max('a', 'b'); //=> 'b'
     */
    var max = _curry2(function max(a, b) {
        return b > a ? b : a;
    });

    /**
     * Takes a function and two values, and returns whichever value produces the
     * larger result when passed to the provided function.
     *
     * @func
     * @memberOf R
     * @since v0.8.0
     * @category Relation
     * @sig Ord b => (a -> b) -> a -> a -> a
     * @param {Function} f
     * @param {*} a
     * @param {*} b
     * @return {*}
     * @see R.max, R.minBy
     * @example
     *
     *      //  square :: Number -> Number
     *      var square = n => n * n;
     *
     *      R.maxBy(square, -3, 2); //=> -3
     *
     *      R.reduce(R.maxBy(square), 0, [3, -5, 4, 1, -2]); //=> -5
     *      R.reduce(R.maxBy(square), 0, []); //=> 0
     */
    var maxBy = _curry3(function maxBy(f, a, b) {
        return f(b) > f(a) ? b : a;
    });

    /**
     * Create a new object with the own properties of the first object merged with
     * the own properties of the second object. If a key exists in both objects,
     * the value from the second object will be used.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Object
     * @sig {k: v} -> {k: v} -> {k: v}
     * @param {Object} l
     * @param {Object} r
     * @return {Object}
     * @see R.mergeWith, R.mergeWithKey
     * @example
     *
     *      R.merge({ 'name': 'fred', 'age': 10 }, { 'age': 40 });
     *      //=> { 'name': 'fred', 'age': 40 }
     *
     *      var resetToDefault = R.merge(R.__, {x: 0});
     *      resetToDefault({x: 5, y: 2}); //=> {x: 0, y: 2}
     */
    var merge = _curry2(function merge(l, r) {
        return _assign({}, l, r);
    });

    /**
     * Merges a list of objects together into one object.
     *
     * @func
     * @memberOf R
     * @since v0.10.0
     * @category List
     * @sig [{k: v}] -> {k: v}
     * @param {Array} list An array of objects
     * @return {Object} A merged object.
     * @see R.reduce
     * @example
     *
     *      R.mergeAll([{foo:1},{bar:2},{baz:3}]); //=> {foo:1,bar:2,baz:3}
     *      R.mergeAll([{foo:1},{foo:2},{bar:2}]); //=> {foo:2,bar:2}
     */
    var mergeAll = _curry1(function mergeAll(list) {
        return _assign.apply(null, [{}].concat(list));
    });

    /**
     * Creates a new object with the own properties of the two provided objects. If
     * a key exists in both objects, the provided function is applied to the key
     * and the values associated with the key in each object, with the result being
     * used as the value associated with the key in the returned object. The key
     * will be excluded from the returned object if the resulting value is
     * `undefined`.
     *
     * @func
     * @memberOf R
     * @since v0.19.0
     * @category Object
     * @sig (String -> a -> a -> a) -> {a} -> {a} -> {a}
     * @param {Function} fn
     * @param {Object} l
     * @param {Object} r
     * @return {Object}
     * @see R.merge, R.mergeWith
     * @example
     *
     *      let concatValues = (k, l, r) => k == 'values' ? R.concat(l, r) : r
     *      R.mergeWithKey(concatValues,
     *                     { a: true, thing: 'foo', values: [10, 20] },
     *                     { b: true, thing: 'bar', values: [15, 35] });
     *      //=> { a: true, b: true, thing: 'bar', values: [10, 20, 15, 35] }
     */
    var mergeWithKey = _curry3(function mergeWithKey(fn, l, r) {
        var result = {};
        var k;
        for (k in l) {
            if (_has(k, l)) {
                result[k] = _has(k, r) ? fn(k, l[k], r[k]) : l[k];
            }
        }
        for (k in r) {
            if (_has(k, r) && !_has(k, result)) {
                result[k] = r[k];
            }
        }
        return result;
    });

    /**
     * Returns the smaller of its two arguments.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Relation
     * @sig Ord a => a -> a -> a
     * @param {*} a
     * @param {*} b
     * @return {*}
     * @see R.minBy, R.max
     * @example
     *
     *      R.min(789, 123); //=> 123
     *      R.min('a', 'b'); //=> 'a'
     */
    var min = _curry2(function min(a, b) {
        return b < a ? b : a;
    });

    /**
     * Takes a function and two values, and returns whichever value produces the
     * smaller result when passed to the provided function.
     *
     * @func
     * @memberOf R
     * @since v0.8.0
     * @category Relation
     * @sig Ord b => (a -> b) -> a -> a -> a
     * @param {Function} f
     * @param {*} a
     * @param {*} b
     * @return {*}
     * @see R.min, R.maxBy
     * @example
     *
     *      //  square :: Number -> Number
     *      var square = n => n * n;
     *
     *      R.minBy(square, -3, 2); //=> 2
     *
     *      R.reduce(R.minBy(square), Infinity, [3, -5, 4, 1, -2]); //=> 1
     *      R.reduce(R.minBy(square), Infinity, []); //=> Infinity
     */
    var minBy = _curry3(function minBy(f, a, b) {
        return f(b) < f(a) ? b : a;
    });

    /**
     * Divides the second parameter by the first and returns the remainder. Note
     * that this function preserves the JavaScript-style behavior for modulo. For
     * mathematical modulo see `mathMod`.
     *
     * @func
     * @memberOf R
     * @since v0.1.1
     * @category Math
     * @sig Number -> Number -> Number
     * @param {Number} a The value to the divide.
     * @param {Number} b The pseudo-modulus
     * @return {Number} The result of `b % a`.
     * @see R.mathMod
     * @example
     *
     *      R.modulo(17, 3); //=> 2
     *      // JS behavior:
     *      R.modulo(-17, 3); //=> -2
     *      R.modulo(17, -3); //=> 2
     *
     *      var isOdd = R.modulo(R.__, 2);
     *      isOdd(42); //=> 0
     *      isOdd(21); //=> 1
     */
    var modulo = _curry2(function modulo(a, b) {
        return a % b;
    });

    /**
     * Multiplies two numbers. Equivalent to `a * b` but curried.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Math
     * @sig Number -> Number -> Number
     * @param {Number} a The first value.
     * @param {Number} b The second value.
     * @return {Number} The result of `a * b`.
     * @see R.divide
     * @example
     *
     *      var double = R.multiply(2);
     *      var triple = R.multiply(3);
     *      double(3);       //=>  6
     *      triple(4);       //=> 12
     *      R.multiply(2, 5);  //=> 10
     */
    var multiply = _curry2(function multiply(a, b) {
        return a * b;
    });

    /**
     * Wraps a function of any arity (including nullary) in a function that accepts
     * exactly `n` parameters. Any extraneous parameters will not be passed to the
     * supplied function.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Function
     * @sig Number -> (* -> a) -> (* -> a)
     * @param {Number} n The desired arity of the new function.
     * @param {Function} fn The function to wrap.
     * @return {Function} A new function wrapping `fn`. The new function is guaranteed to be of
     *         arity `n`.
     * @example
     *
     *      var takesTwoArgs = (a, b) => [a, b];
     *
     *      takesTwoArgs.length; //=> 2
     *      takesTwoArgs(1, 2); //=> [1, 2]
     *
     *      var takesOneArg = R.nAry(1, takesTwoArgs);
     *      takesOneArg.length; //=> 1
     *      // Only `n` arguments are passed to the wrapped function
     *      takesOneArg(1, 2); //=> [1, undefined]
     */
    var nAry = _curry2(function nAry(n, fn) {
        switch (n) {
        case 0:
            return function () {
                return fn.call(this);
            };
        case 1:
            return function (a0) {
                return fn.call(this, a0);
            };
        case 2:
            return function (a0, a1) {
                return fn.call(this, a0, a1);
            };
        case 3:
            return function (a0, a1, a2) {
                return fn.call(this, a0, a1, a2);
            };
        case 4:
            return function (a0, a1, a2, a3) {
                return fn.call(this, a0, a1, a2, a3);
            };
        case 5:
            return function (a0, a1, a2, a3, a4) {
                return fn.call(this, a0, a1, a2, a3, a4);
            };
        case 6:
            return function (a0, a1, a2, a3, a4, a5) {
                return fn.call(this, a0, a1, a2, a3, a4, a5);
            };
        case 7:
            return function (a0, a1, a2, a3, a4, a5, a6) {
                return fn.call(this, a0, a1, a2, a3, a4, a5, a6);
            };
        case 8:
            return function (a0, a1, a2, a3, a4, a5, a6, a7) {
                return fn.call(this, a0, a1, a2, a3, a4, a5, a6, a7);
            };
        case 9:
            return function (a0, a1, a2, a3, a4, a5, a6, a7, a8) {
                return fn.call(this, a0, a1, a2, a3, a4, a5, a6, a7, a8);
            };
        case 10:
            return function (a0, a1, a2, a3, a4, a5, a6, a7, a8, a9) {
                return fn.call(this, a0, a1, a2, a3, a4, a5, a6, a7, a8, a9);
            };
        default:
            throw new Error('First argument to nAry must be a non-negative integer no greater than ten');
        }
    });

    /**
     * Negates its argument.
     *
     * @func
     * @memberOf R
     * @since v0.9.0
     * @category Math
     * @sig Number -> Number
     * @param {Number} n
     * @return {Number}
     * @example
     *
     *      R.negate(42); //=> -42
     */
    var negate = _curry1(function negate(n) {
        return -n;
    });

    /**
     * Returns `true` if no elements of the list match the predicate, `false`
     * otherwise.
     *
     * Dispatches to the `any` method of the second argument, if present.
     *
     * @func
     * @memberOf R
     * @since v0.12.0
     * @category List
     * @sig (a -> Boolean) -> [a] -> Boolean
     * @param {Function} fn The predicate function.
     * @param {Array} list The array to consider.
     * @return {Boolean} `true` if the predicate is not satisfied by every element, `false` otherwise.
     * @see R.all, R.any
     * @example
     *
     *      var isEven = n => n % 2 === 0;
     *
     *      R.none(isEven, [1, 3, 5, 7, 9, 11]); //=> true
     *      R.none(isEven, [1, 3, 5, 7, 8, 11]); //=> false
     */
    var none = _curry2(_complement(_dispatchable('any', _xany, any)));

    /**
     * A function that returns the `!` of its argument. It will return `true` when
     * passed false-y value, and `false` when passed a truth-y one.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Logic
     * @sig * -> Boolean
     * @param {*} a any value
     * @return {Boolean} the logical inverse of passed argument.
     * @see R.complement
     * @example
     *
     *      R.not(true); //=> false
     *      R.not(false); //=> true
     *      R.not(0); => true
     *      R.not(1); => false
     */
    var not = _curry1(function not(a) {
        return !a;
    });

    /**
     * Returns the nth element of the given list or string. If n is negative the
     * element at index length + n is returned.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig Number -> [a] -> a | Undefined
     * @sig Number -> String -> String
     * @param {Number} offset
     * @param {*} list
     * @return {*}
     * @example
     *
     *      var list = ['foo', 'bar', 'baz', 'quux'];
     *      R.nth(1, list); //=> 'bar'
     *      R.nth(-1, list); //=> 'quux'
     *      R.nth(-99, list); //=> undefined
     *
     *      R.nth(2, 'abc'); //=> 'c'
     *      R.nth(3, 'abc'); //=> ''
     */
    var nth = _curry2(function nth(offset, list) {
        var idx = offset < 0 ? list.length + offset : offset;
        return _isString(list) ? list.charAt(idx) : list[idx];
    });

    /**
     * Returns a function which returns its nth argument.
     *
     * @func
     * @memberOf R
     * @since v0.9.0
     * @category Function
     * @sig Number -> *... -> *
     * @param {Number} n
     * @return {Function}
     * @example
     *
     *      R.nthArg(1)('a', 'b', 'c'); //=> 'b'
     *      R.nthArg(-1)('a', 'b', 'c'); //=> 'c'
     */
    var nthArg = _curry1(function nthArg(n) {
        return function () {
            return nth(n, arguments);
        };
    });

    /**
     * Creates an object containing a single key:value pair.
     *
     * @func
     * @memberOf R
     * @since v0.18.0
     * @category Object
     * @sig String -> a -> {String:a}
     * @param {String} key
     * @param {*} val
     * @return {Object}
     * @see R.pair
     * @example
     *
     *      var matchPhrases = R.compose(
     *        R.objOf('must'),
     *        R.map(R.objOf('match_phrase'))
     *      );
     *      matchPhrases(['foo', 'bar', 'baz']); //=> {must: [{match_phrase: 'foo'}, {match_phrase: 'bar'}, {match_phrase: 'baz'}]}
     */
    var objOf = _curry2(function objOf(key, val) {
        var obj = {};
        obj[key] = val;
        return obj;
    });

    /**
     * Returns a singleton array containing the value provided.
     *
     * Note this `of` is different from the ES6 `of`; See
     * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/of
     *
     * @func
     * @memberOf R
     * @since v0.3.0
     * @category Function
     * @sig a -> [a]
     * @param {*} x any value
     * @return {Array} An array wrapping `x`.
     * @example
     *
     *      R.of(null); //=> [null]
     *      R.of([42]); //=> [[42]]
     */
    var of = _curry1(_of);

    /**
     * Accepts a function `fn` and returns a function that guards invocation of
     * `fn` such that `fn` can only ever be called once, no matter how many times
     * the returned function is invoked. The first value calculated is returned in
     * subsequent invocations.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Function
     * @sig (a... -> b) -> (a... -> b)
     * @param {Function} fn The function to wrap in a call-only-once wrapper.
     * @return {Function} The wrapped function.
     * @example
     *
     *      var addOneOnce = R.once(x => x + 1);
     *      addOneOnce(10); //=> 11
     *      addOneOnce(addOneOnce(50)); //=> 11
     */
    var once = _curry1(function once(fn) {
        var called = false;
        var result;
        return _arity(fn.length, function () {
            if (called) {
                return result;
            }
            called = true;
            result = fn.apply(this, arguments);
            return result;
        });
    });

    /**
     * Returns `true` if one or both of its arguments are `true`. Returns `false`
     * if both arguments are `false`.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Logic
     * @sig * -> * -> *
     * @param {Boolean} a A boolean value
     * @param {Boolean} b A boolean value
     * @return {Boolean} `true` if one or both arguments are `true`, `false` otherwise
     * @see R.either
     * @example
     *
     *      R.or(true, true); //=> true
     *      R.or(true, false); //=> true
     *      R.or(false, true); //=> true
     *      R.or(false, false); //=> false
     */
    var or = _curry2(function or(a, b) {
        return a || b;
    });

    /**
     * Returns the result of "setting" the portion of the given data structure
     * focused by the given lens to the result of applying the given function to
     * the focused value.
     *
     * @func
     * @memberOf R
     * @since v0.16.0
     * @category Object
     * @typedefn Lens s a = Functor f => (a -> f a) -> s -> f s
     * @sig Lens s a -> (a -> a) -> s -> s
     * @param {Lens} lens
     * @param {*} v
     * @param {*} x
     * @return {*}
     * @see R.prop, R.lensIndex, R.lensProp
     * @example
     *
     *      var headLens = R.lensIndex(0);
     *
     *      R.over(headLens, R.toUpper, ['foo', 'bar', 'baz']); //=> ['FOO', 'bar', 'baz']
     */
    // `Identity` is a functor that holds a single value, where `map` simply
    // transforms the held value with the provided function.
    // The value returned by the getter function is first transformed with `f`,
    // then set as the value of an `Identity`. This is then mapped over with the
    // setter function of the lens.
    var over = function () {
        // `Identity` is a functor that holds a single value, where `map` simply
        // transforms the held value with the provided function.
        var Identity = function (x) {
            return {
                value: x,
                map: function (f) {
                    return Identity(f(x));
                }
            };
        };
        return _curry3(function over(lens, f, x) {
            // The value returned by the getter function is first transformed with `f`,
            // then set as the value of an `Identity`. This is then mapped over with the
            // setter function of the lens.
            return lens(function (y) {
                return Identity(f(y));
            })(x).value;
        });
    }();

    /**
     * Takes two arguments, `fst` and `snd`, and returns `[fst, snd]`.
     *
     * @func
     * @memberOf R
     * @since v0.18.0
     * @category List
     * @sig a -> b -> (a,b)
     * @param {*} fst
     * @param {*} snd
     * @return {Array}
     * @see R.objOf, R.of
     * @example
     *
     *      R.pair('foo', 'bar'); //=> ['foo', 'bar']
     */
    var pair = _curry2(function pair(fst, snd) {
        return [
            fst,
            snd
        ];
    });

    /**
     * Retrieve the value at a given path.
     *
     * @func
     * @memberOf R
     * @since v0.2.0
     * @category Object
     * @sig [String] -> {k: v} -> v | Undefined
     * @param {Array} path The path to use.
     * @param {Object} obj The object to retrieve the nested property from.
     * @return {*} The data at `path`.
     * @example
     *
     *      R.path(['a', 'b'], {a: {b: 2}}); //=> 2
     *      R.path(['a', 'b'], {c: {b: 2}}); //=> undefined
     */
    var path = _curry2(function path(paths, obj) {
        var val = obj;
        var idx = 0;
        while (idx < paths.length) {
            if (val == null) {
                return;
            }
            val = val[paths[idx]];
            idx += 1;
        }
        return val;
    });

    /**
     * If the given, non-null object has a value at the given path, returns the
     * value at that path. Otherwise returns the provided default value.
     *
     * @func
     * @memberOf R
     * @since v0.18.0
     * @category Object
     * @sig a -> [String] -> Object -> a
     * @param {*} d The default value.
     * @param {Array} p The path to use.
     * @param {Object} obj The object to retrieve the nested property from.
     * @return {*} The data at `path` of the supplied object or the default value.
     * @example
     *
     *      R.pathOr('N/A', ['a', 'b'], {a: {b: 2}}); //=> 2
     *      R.pathOr('N/A', ['a', 'b'], {c: {b: 2}}); //=> "N/A"
     */
    var pathOr = _curry3(function pathOr(d, p, obj) {
        return defaultTo(d, path(p, obj));
    });

    /**
     * Returns `true` if the specified object property at given path satisfies the
     * given predicate; `false` otherwise.
     *
     * @func
     * @memberOf R
     * @since v0.19.0
     * @category Logic
     * @sig (a -> Boolean) -> [String] -> Object -> Boolean
     * @param {Function} pred
     * @param {Array} propPath
     * @param {*} obj
     * @return {Boolean}
     * @see R.propSatisfies, R.path
     * @example
     *
     *      R.pathSatisfies(y => y > 0, ['x', 'y'], {x: {y: 2}}); //=> true
     */
    var pathSatisfies = _curry3(function pathSatisfies(pred, propPath, obj) {
        return propPath.length > 0 && pred(path(propPath, obj));
    });

    /**
     * Returns a partial copy of an object containing only the keys specified. If
     * the key does not exist, the property is ignored.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Object
     * @sig [k] -> {k: v} -> {k: v}
     * @param {Array} names an array of String property names to copy onto a new object
     * @param {Object} obj The object to copy from
     * @return {Object} A new object with only properties from `names` on it.
     * @see R.omit, R.props
     * @example
     *
     *      R.pick(['a', 'd'], {a: 1, b: 2, c: 3, d: 4}); //=> {a: 1, d: 4}
     *      R.pick(['a', 'e', 'f'], {a: 1, b: 2, c: 3, d: 4}); //=> {a: 1}
     */
    var pick = _curry2(function pick(names, obj) {
        var result = {};
        var idx = 0;
        while (idx < names.length) {
            if (names[idx] in obj) {
                result[names[idx]] = obj[names[idx]];
            }
            idx += 1;
        }
        return result;
    });

    /**
     * Similar to `pick` except that this one includes a `key: undefined` pair for
     * properties that don't exist.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Object
     * @sig [k] -> {k: v} -> {k: v}
     * @param {Array} names an array of String property names to copy onto a new object
     * @param {Object} obj The object to copy from
     * @return {Object} A new object with only properties from `names` on it.
     * @see R.pick
     * @example
     *
     *      R.pickAll(['a', 'd'], {a: 1, b: 2, c: 3, d: 4}); //=> {a: 1, d: 4}
     *      R.pickAll(['a', 'e', 'f'], {a: 1, b: 2, c: 3, d: 4}); //=> {a: 1, e: undefined, f: undefined}
     */
    var pickAll = _curry2(function pickAll(names, obj) {
        var result = {};
        var idx = 0;
        var len = names.length;
        while (idx < len) {
            var name = names[idx];
            result[name] = obj[name];
            idx += 1;
        }
        return result;
    });

    /**
     * Returns a partial copy of an object containing only the keys that satisfy
     * the supplied predicate.
     *
     * @func
     * @memberOf R
     * @since v0.8.0
     * @category Object
     * @sig (v, k -> Boolean) -> {k: v} -> {k: v}
     * @param {Function} pred A predicate to determine whether or not a key
     *        should be included on the output object.
     * @param {Object} obj The object to copy from
     * @return {Object} A new object with only properties that satisfy `pred`
     *         on it.
     * @see R.pick, R.filter
     * @example
     *
     *      var isUpperCase = (val, key) => key.toUpperCase() === key;
     *      R.pickBy(isUpperCase, {a: 1, b: 2, A: 3, B: 4}); //=> {A: 3, B: 4}
     */
    var pickBy = _curry2(function pickBy(test, obj) {
        var result = {};
        for (var prop in obj) {
            if (test(obj[prop], prop, obj)) {
                result[prop] = obj[prop];
            }
        }
        return result;
    });

    /**
     * Returns a new list with the given element at the front, followed by the
     * contents of the list.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig a -> [a] -> [a]
     * @param {*} el The item to add to the head of the output list.
     * @param {Array} list The array to add to the tail of the output list.
     * @return {Array} A new array.
     * @see R.append
     * @example
     *
     *      R.prepend('fee', ['fi', 'fo', 'fum']); //=> ['fee', 'fi', 'fo', 'fum']
     */
    var prepend = _curry2(function prepend(el, list) {
        return _concat([el], list);
    });

    /**
     * Returns a function that when supplied an object returns the indicated
     * property of that object, if it exists.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Object
     * @sig s -> {s: a} -> a | Undefined
     * @param {String} p The property name
     * @param {Object} obj The object to query
     * @return {*} The value at `obj.p`.
     * @example
     *
     *      R.prop('x', {x: 100}); //=> 100
     *      R.prop('x', {}); //=> undefined
     */
    var prop = _curry2(function prop(p, obj) {
        return obj[p];
    });

    /**
     * If the given, non-null object has an own property with the specified name,
     * returns the value of that property. Otherwise returns the provided default
     * value.
     *
     * @func
     * @memberOf R
     * @since v0.6.0
     * @category Object
     * @sig a -> String -> Object -> a
     * @param {*} val The default value.
     * @param {String} p The name of the property to return.
     * @param {Object} obj The object to query.
     * @return {*} The value of given property of the supplied object or the default value.
     * @example
     *
     *      var alice = {
     *        name: 'ALICE',
     *        age: 101
     *      };
     *      var favorite = R.prop('favoriteLibrary');
     *      var favoriteWithDefault = R.propOr('Ramda', 'favoriteLibrary');
     *
     *      favorite(alice);  //=> undefined
     *      favoriteWithDefault(alice);  //=> 'Ramda'
     */
    var propOr = _curry3(function propOr(val, p, obj) {
        return obj != null && _has(p, obj) ? obj[p] : val;
    });

    /**
     * Returns `true` if the specified object property satisfies the given
     * predicate; `false` otherwise.
     *
     * @func
     * @memberOf R
     * @since v0.16.0
     * @category Logic
     * @sig (a -> Boolean) -> String -> {String: a} -> Boolean
     * @param {Function} pred
     * @param {String} name
     * @param {*} obj
     * @return {Boolean}
     * @see R.propEq, R.propIs
     * @example
     *
     *      R.propSatisfies(x => x > 0, 'x', {x: 1, y: 2}); //=> true
     */
    var propSatisfies = _curry3(function propSatisfies(pred, name, obj) {
        return pred(obj[name]);
    });

    /**
     * Acts as multiple `prop`: array of keys in, array of values out. Preserves
     * order.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Object
     * @sig [k] -> {k: v} -> [v]
     * @param {Array} ps The property names to fetch
     * @param {Object} obj The object to query
     * @return {Array} The corresponding values or partially applied function.
     * @example
     *
     *      R.props(['x', 'y'], {x: 1, y: 2}); //=> [1, 2]
     *      R.props(['c', 'a', 'b'], {b: 2, a: 1}); //=> [undefined, 1, 2]
     *
     *      var fullName = R.compose(R.join(' '), R.props(['first', 'last']));
     *      fullName({last: 'Bullet-Tooth', age: 33, first: 'Tony'}); //=> 'Tony Bullet-Tooth'
     */
    var props = _curry2(function props(ps, obj) {
        var len = ps.length;
        var out = [];
        var idx = 0;
        while (idx < len) {
            out[idx] = obj[ps[idx]];
            idx += 1;
        }
        return out;
    });

    /**
     * Returns a list of numbers from `from` (inclusive) to `to` (exclusive).
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig Number -> Number -> [Number]
     * @param {Number} from The first number in the list.
     * @param {Number} to One more than the last number in the list.
     * @return {Array} The list of numbers in tthe set `[a, b)`.
     * @example
     *
     *      R.range(1, 5);    //=> [1, 2, 3, 4]
     *      R.range(50, 53);  //=> [50, 51, 52]
     */
    var range = _curry2(function range(from, to) {
        if (!(_isNumber(from) && _isNumber(to))) {
            throw new TypeError('Both arguments to range must be numbers');
        }
        var result = [];
        var n = from;
        while (n < to) {
            result.push(n);
            n += 1;
        }
        return result;
    });

    /**
     * Returns a single item by iterating through the list, successively calling
     * the iterator function and passing it an accumulator value and the current
     * value from the array, and then passing the result to the next call.
     *
     * Similar to `reduce`, except moves through the input list from the right to
     * the left.
     *
     * The iterator function receives two values: *(acc, value)*
     *
     * Note: `R.reduceRight` does not skip deleted or unassigned indices (sparse
     * arrays), unlike the native `Array.prototype.reduce` method. For more details
     * on this behavior, see:
     * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduceRight#Description
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig (a,b -> a) -> a -> [b] -> a
     * @param {Function} fn The iterator function. Receives two values, the accumulator and the
     *        current element from the array.
     * @param {*} acc The accumulator value.
     * @param {Array} list The list to iterate over.
     * @return {*} The final, accumulated value.
     * @see R.addIndex
     * @example
     *
     *      var pairs = [ ['a', 1], ['b', 2], ['c', 3] ];
     *      var flattenPairs = (acc, pair) => acc.concat(pair);
     *
     *      R.reduceRight(flattenPairs, [], pairs); //=> [ 'c', 3, 'b', 2, 'a', 1 ]
     */
    var reduceRight = _curry3(function reduceRight(fn, acc, list) {
        var idx = list.length - 1;
        while (idx >= 0) {
            acc = fn(acc, list[idx]);
            idx -= 1;
        }
        return acc;
    });

    /**
     * Returns a value wrapped to indicate that it is the final value of the reduce
     * and transduce functions. The returned value should be considered a black
     * box: the internal structure is not guaranteed to be stable.
     *
     * Note: this optimization is unavailable to functions not explicitly listed
     * above. For instance, it is not currently supported by reduceRight.
     *
     * @func
     * @memberOf R
     * @since v0.15.0
     * @category List
     * @sig a -> *
     * @param {*} x The final value of the reduce.
     * @return {*} The wrapped value.
     * @see R.reduce, R.transduce
     * @example
     *
     *      R.reduce(
     *        R.pipe(R.add, R.when(R.gte(R.__, 10), R.reduced)),
     *        0,
     *        [1, 2, 3, 4, 5]) // 10
     */
    var reduced = _curry1(_reduced);

    /**
     * Removes the sub-list of `list` starting at index `start` and containing
     * `count` elements. _Note that this is not destructive_: it returns a copy of
     * the list with the changes.
     * <small>No lists have been harmed in the application of this function.</small>
     *
     * @func
     * @memberOf R
     * @since v0.2.2
     * @category List
     * @sig Number -> Number -> [a] -> [a]
     * @param {Number} start The position to start removing elements
     * @param {Number} count The number of elements to remove
     * @param {Array} list The list to remove from
     * @return {Array} A new Array with `count` elements from `start` removed.
     * @example
     *
     *      R.remove(2, 3, [1,2,3,4,5,6,7,8]); //=> [1,2,6,7,8]
     */
    var remove = _curry3(function remove(start, count, list) {
        return _concat(_slice(list, 0, Math.min(start, list.length)), _slice(list, Math.min(list.length, start + count)));
    });

    /**
     * Replace a substring or regex match in a string with a replacement.
     *
     * @func
     * @memberOf R
     * @since v0.7.0
     * @category String
     * @sig RegExp|String -> String -> String -> String
     * @param {RegExp|String} pattern A regular expression or a substring to match.
     * @param {String} replacement The string to replace the matches with.
     * @param {String} str The String to do the search and replacement in.
     * @return {String} The result.
     * @example
     *
     *      R.replace('foo', 'bar', 'foo foo foo'); //=> 'bar foo foo'
     *      R.replace(/foo/, 'bar', 'foo foo foo'); //=> 'bar foo foo'
     *
     *      // Use the "g" (global) flag to replace all occurrences:
     *      R.replace(/foo/g, 'bar', 'foo foo foo'); //=> 'bar bar bar'
     */
    var replace = _curry3(function replace(regex, replacement, str) {
        return str.replace(regex, replacement);
    });

    /**
     * Returns a new list or string with the elements or characters in reverse
     * order.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig [a] -> [a]
     * @sig String -> String
     * @param {Array|String} list
     * @return {Array|String}
     * @example
     *
     *      R.reverse([1, 2, 3]);  //=> [3, 2, 1]
     *      R.reverse([1, 2]);     //=> [2, 1]
     *      R.reverse([1]);        //=> [1]
     *      R.reverse([]);         //=> []
     *
     *      R.reverse('abc');      //=> 'cba'
     *      R.reverse('ab');       //=> 'ba'
     *      R.reverse('a');        //=> 'a'
     *      R.reverse('');         //=> ''
     */
    var reverse = _curry1(function reverse(list) {
        return _isString(list) ? list.split('').reverse().join('') : _slice(list).reverse();
    });

    /**
     * Scan is similar to reduce, but returns a list of successively reduced values
     * from the left
     *
     * @func
     * @memberOf R
     * @since v0.10.0
     * @category List
     * @sig (a,b -> a) -> a -> [b] -> [a]
     * @param {Function} fn The iterator function. Receives two values, the accumulator and the
     *        current element from the array
     * @param {*} acc The accumulator value.
     * @param {Array} list The list to iterate over.
     * @return {Array} A list of all intermediately reduced values.
     * @example
     *
     *      var numbers = [1, 2, 3, 4];
     *      var factorials = R.scan(R.multiply, 1, numbers); //=> [1, 1, 2, 6, 24]
     */
    var scan = _curry3(function scan(fn, acc, list) {
        var idx = 0;
        var len = list.length;
        var result = [acc];
        while (idx < len) {
            acc = fn(acc, list[idx]);
            result[idx + 1] = acc;
            idx += 1;
        }
        return result;
    });

    /**
     * Returns the result of "setting" the portion of the given data structure
     * focused by the given lens to the given value.
     *
     * @func
     * @memberOf R
     * @since v0.16.0
     * @category Object
     * @typedefn Lens s a = Functor f => (a -> f a) -> s -> f s
     * @sig Lens s a -> a -> s -> s
     * @param {Lens} lens
     * @param {*} v
     * @param {*} x
     * @return {*}
     * @see R.prop, R.lensIndex, R.lensProp
     * @example
     *
     *      var xLens = R.lensProp('x');
     *
     *      R.set(xLens, 4, {x: 1, y: 2});  //=> {x: 4, y: 2}
     *      R.set(xLens, 8, {x: 1, y: 2});  //=> {x: 8, y: 2}
     */
    var set = _curry3(function set(lens, v, x) {
        return over(lens, always(v), x);
    });

    /**
     * Returns the elements of the given list or string (or object with a `slice`
     * method) from `fromIndex` (inclusive) to `toIndex` (exclusive).
     *
     * Dispatches to the `slice` method of the third argument, if present.
     *
     * @func
     * @memberOf R
     * @since v0.1.4
     * @category List
     * @sig Number -> Number -> [a] -> [a]
     * @sig Number -> Number -> String -> String
     * @param {Number} fromIndex The start index (inclusive).
     * @param {Number} toIndex The end index (exclusive).
     * @param {*} list
     * @return {*}
     * @example
     *
     *      R.slice(1, 3, ['a', 'b', 'c', 'd']);        //=> ['b', 'c']
     *      R.slice(1, Infinity, ['a', 'b', 'c', 'd']); //=> ['b', 'c', 'd']
     *      R.slice(0, -1, ['a', 'b', 'c', 'd']);       //=> ['a', 'b', 'c']
     *      R.slice(-3, -1, ['a', 'b', 'c', 'd']);      //=> ['b', 'c']
     *      R.slice(0, 3, 'ramda');                     //=> 'ram'
     */
    var slice = _curry3(_checkForMethod('slice', function slice(fromIndex, toIndex, list) {
        return Array.prototype.slice.call(list, fromIndex, toIndex);
    }));

    /**
     * Returns a copy of the list, sorted according to the comparator function,
     * which should accept two values at a time and return a negative number if the
     * first value is smaller, a positive number if it's larger, and zero if they
     * are equal. Please note that this is a **copy** of the list. It does not
     * modify the original.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig (a,a -> Number) -> [a] -> [a]
     * @param {Function} comparator A sorting function :: a -> b -> Int
     * @param {Array} list The list to sort
     * @return {Array} a new array with its elements sorted by the comparator function.
     * @example
     *
     *      var diff = function(a, b) { return a - b; };
     *      R.sort(diff, [4,2,7,5]); //=> [2, 4, 5, 7]
     */
    var sort = _curry2(function sort(comparator, list) {
        return _slice(list).sort(comparator);
    });

    /**
     * Sorts the list according to the supplied function.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Relation
     * @sig Ord b => (a -> b) -> [a] -> [a]
     * @param {Function} fn
     * @param {Array} list The list to sort.
     * @return {Array} A new list sorted by the keys generated by `fn`.
     * @example
     *
     *      var sortByFirstItem = R.sortBy(R.prop(0));
     *      var sortByNameCaseInsensitive = R.sortBy(R.compose(R.toLower, R.prop('name')));
     *      var pairs = [[-1, 1], [-2, 2], [-3, 3]];
     *      sortByFirstItem(pairs); //=> [[-3, 3], [-2, 2], [-1, 1]]
     *      var alice = {
     *        name: 'ALICE',
     *        age: 101
     *      };
     *      var bob = {
     *        name: 'Bob',
     *        age: -10
     *      };
     *      var clara = {
     *        name: 'clara',
     *        age: 314.159
     *      };
     *      var people = [clara, bob, alice];
     *      sortByNameCaseInsensitive(people); //=> [alice, bob, clara]
     */
    var sortBy = _curry2(function sortBy(fn, list) {
        return _slice(list).sort(function (a, b) {
            var aa = fn(a);
            var bb = fn(b);
            return aa < bb ? -1 : aa > bb ? 1 : 0;
        });
    });

    /**
     * Splits a given list or string at a given index.
     *
     * @func
     * @memberOf R
     * @since v0.19.0
     * @category List
     * @sig Number -> [a] -> [[a], [a]]
     * @sig Number -> String -> [String, String]
     * @param {Number} index The index where the array/string is split.
     * @param {Array|String} array The array/string to be split.
     * @return {Array}
     * @example
     *
     *      R.splitAt(1, [1, 2, 3]);          //=> [[1], [2, 3]]
     *      R.splitAt(5, 'hello world');      //=> ['hello', ' world']
     *      R.splitAt(-1, 'foobar');          //=> ['fooba', 'r']
     */
    var splitAt = _curry2(function splitAt(index, array) {
        return [
            slice(0, index, array),
            slice(index, length(array), array)
        ];
    });

    /**
     * Splits a collection into slices of the specified length.
     *
     * @func
     * @memberOf R
     * @since v0.16.0
     * @category List
     * @sig Number -> [a] -> [[a]]
     * @sig Number -> String -> [String]
     * @param {Number} n
     * @param {Array} list
     * @return {Array}
     * @example
     *
     *      R.splitEvery(3, [1, 2, 3, 4, 5, 6, 7]); //=> [[1, 2, 3], [4, 5, 6], [7]]
     *      R.splitEvery(3, 'foobarbaz'); //=> ['foo', 'bar', 'baz']
     */
    var splitEvery = _curry2(function splitEvery(n, list) {
        if (n <= 0) {
            throw new Error('First argument to splitEvery must be a positive integer');
        }
        var result = [];
        var idx = 0;
        while (idx < list.length) {
            result.push(slice(idx, idx += n, list));
        }
        return result;
    });

    /**
     * Takes a list and a predicate and returns a pair of lists with the following properties:
     *
     *  - the result of concatenating the two output lists is equivalent to the input list;
     *  - none of the elements of the first output list satisfies the predicate; and
     *  - if the second output list is non-empty, its first element satisfies the predicate.
     *
     * @func
     * @memberOf R
     * @since v0.19.0
     * @category List
     * @sig (a -> Boolean) -> [a] -> [[a], [a]]
     * @param {Function} pred The predicate that determines where the array is split.
     * @param {Array} list The array to be split.
     * @return {Array}
     * @example
     *
     *      R.splitWhen(R.equals(2), [1, 2, 3, 1, 2, 3]);   //=> [[1], [2, 3, 1, 2, 3]]
     */
    var splitWhen = _curry2(function splitWhen(pred, list) {
        var idx = 0;
        var len = list.length;
        var prefix = [];
        while (idx < len && !pred(list[idx])) {
            prefix.push(list[idx]);
            idx += 1;
        }
        return [
            prefix,
            _slice(list, idx)
        ];
    });

    /**
     * Subtracts its second argument from its first argument.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Math
     * @sig Number -> Number -> Number
     * @param {Number} a The first value.
     * @param {Number} b The second value.
     * @return {Number} The result of `a - b`.
     * @see R.add
     * @example
     *
     *      R.subtract(10, 8); //=> 2
     *
     *      var minus5 = R.subtract(R.__, 5);
     *      minus5(17); //=> 12
     *
     *      var complementaryAngle = R.subtract(90);
     *      complementaryAngle(30); //=> 60
     *      complementaryAngle(72); //=> 18
     */
    var subtract = _curry2(function subtract(a, b) {
        return Number(a) - Number(b);
    });

    /**
     * Returns all but the first element of the given list or string (or object
     * with a `tail` method).
     *
     * Dispatches to the `slice` method of the first argument, if present.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig [a] -> [a]
     * @sig String -> String
     * @param {*} list
     * @return {*}
     * @see R.head, R.init, R.last
     * @example
     *
     *      R.tail([1, 2, 3]);  //=> [2, 3]
     *      R.tail([1, 2]);     //=> [2]
     *      R.tail([1]);        //=> []
     *      R.tail([]);         //=> []
     *
     *      R.tail('abc');  //=> 'bc'
     *      R.tail('ab');   //=> 'b'
     *      R.tail('a');    //=> ''
     *      R.tail('');     //=> ''
     */
    var tail = _checkForMethod('tail', slice(1, Infinity));

    /**
     * Returns the first `n` elements of the given list, string, or
     * transducer/transformer (or object with a `take` method).
     *
     * Dispatches to the `take` method of the second argument, if present.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig Number -> [a] -> [a]
     * @sig Number -> String -> String
     * @param {Number} n
     * @param {*} list
     * @return {*}
     * @see R.drop
     * @example
     *
     *      R.take(1, ['foo', 'bar', 'baz']); //=> ['foo']
     *      R.take(2, ['foo', 'bar', 'baz']); //=> ['foo', 'bar']
     *      R.take(3, ['foo', 'bar', 'baz']); //=> ['foo', 'bar', 'baz']
     *      R.take(4, ['foo', 'bar', 'baz']); //=> ['foo', 'bar', 'baz']
     *      R.take(3, 'ramda');               //=> 'ram'
     *
     *      var personnel = [
     *        'Dave Brubeck',
     *        'Paul Desmond',
     *        'Eugene Wright',
     *        'Joe Morello',
     *        'Gerry Mulligan',
     *        'Bob Bates',
     *        'Joe Dodge',
     *        'Ron Crotty'
     *      ];
     *
     *      var takeFive = R.take(5);
     *      takeFive(personnel);
     *      //=> ['Dave Brubeck', 'Paul Desmond', 'Eugene Wright', 'Joe Morello', 'Gerry Mulligan']
     */
    var take = _curry2(_dispatchable('take', _xtake, function take(n, xs) {
        return slice(0, n < 0 ? Infinity : n, xs);
    }));

    /**
     * Returns a new list containing the last `n` elements of a given list, passing
     * each value to the supplied predicate function, and terminating when the
     * predicate function returns `false`. Excludes the element that caused the
     * predicate function to fail. The predicate function is passed one argument:
     * *(value)*.
     *
     * @func
     * @memberOf R
     * @since v0.16.0
     * @category List
     * @sig (a -> Boolean) -> [a] -> [a]
     * @param {Function} fn The function called per iteration.
     * @param {Array} list The collection to iterate over.
     * @return {Array} A new array.
     * @see R.dropLastWhile, R.addIndex
     * @example
     *
     *      var isNotOne = x => x !== 1;
     *
     *      R.takeLastWhile(isNotOne, [1, 2, 3, 4]); //=> [2, 3, 4]
     */
    var takeLastWhile = _curry2(function takeLastWhile(fn, list) {
        var idx = list.length - 1;
        while (idx >= 0 && fn(list[idx])) {
            idx -= 1;
        }
        return _slice(list, idx + 1, Infinity);
    });

    /**
     * Returns a new list containing the first `n` elements of a given list,
     * passing each value to the supplied predicate function, and terminating when
     * the predicate function returns `false`. Excludes the element that caused the
     * predicate function to fail. The predicate function is passed one argument:
     * *(value)*.
     *
     * Dispatches to the `takeWhile` method of the second argument, if present.
     *
     * Acts as a transducer if a transformer is given in list position.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig (a -> Boolean) -> [a] -> [a]
     * @param {Function} fn The function called per iteration.
     * @param {Array} list The collection to iterate over.
     * @return {Array} A new array.
     * @see R.dropWhile, R.transduce, R.addIndex
     * @example
     *
     *      var isNotFour = x => x !== 4;
     *
     *      R.takeWhile(isNotFour, [1, 2, 3, 4, 3, 2, 1]); //=> [1, 2, 3]
     */
    var takeWhile = _curry2(_dispatchable('takeWhile', _xtakeWhile, function takeWhile(fn, list) {
        var idx = 0;
        var len = list.length;
        while (idx < len && fn(list[idx])) {
            idx += 1;
        }
        return _slice(list, 0, idx);
    }));

    /**
     * Runs the given function with the supplied object, then returns the object.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Function
     * @sig (a -> *) -> a -> a
     * @param {Function} fn The function to call with `x`. The return value of `fn` will be thrown away.
     * @param {*} x
     * @return {*} `x`.
     * @example
     *
     *      var sayX = x => console.log('x is ' + x);
     *      R.tap(sayX, 100); //=> 100
     *      //-> 'x is 100'
     */
    var tap = _curry2(function tap(fn, x) {
        fn(x);
        return x;
    });

    /**
     * Calls an input function `n` times, returning an array containing the results
     * of those function calls.
     *
     * `fn` is passed one argument: The current value of `n`, which begins at `0`
     * and is gradually incremented to `n - 1`.
     *
     * @func
     * @memberOf R
     * @since v0.2.3
     * @category List
     * @sig (Number -> a) -> Number -> [a]
     * @param {Function} fn The function to invoke. Passed one argument, the current value of `n`.
     * @param {Number} n A value between `0` and `n - 1`. Increments after each function call.
     * @return {Array} An array containing the return values of all calls to `fn`.
     * @example
     *
     *      R.times(R.identity, 5); //=> [0, 1, 2, 3, 4]
     */
    var times = _curry2(function times(fn, n) {
        var len = Number(n);
        var idx = 0;
        var list;
        if (len < 0 || isNaN(len)) {
            throw new RangeError('n must be a non-negative number');
        }
        list = new Array(len);
        while (idx < len) {
            list[idx] = fn(idx);
            idx += 1;
        }
        return list;
    });

    /**
     * Converts an object into an array of key, value arrays. Only the object's
     * own properties are used.
     * Note that the order of the output array is not guaranteed to be consistent
     * across different JS platforms.
     *
     * @func
     * @memberOf R
     * @since v0.4.0
     * @category Object
     * @sig {String: *} -> [[String,*]]
     * @param {Object} obj The object to extract from
     * @return {Array} An array of key, value arrays from the object's own properties.
     * @see R.fromPairs
     * @example
     *
     *      R.toPairs({a: 1, b: 2, c: 3}); //=> [['a', 1], ['b', 2], ['c', 3]]
     */
    var toPairs = _curry1(function toPairs(obj) {
        var pairs = [];
        for (var prop in obj) {
            if (_has(prop, obj)) {
                pairs[pairs.length] = [
                    prop,
                    obj[prop]
                ];
            }
        }
        return pairs;
    });

    /**
     * Converts an object into an array of key, value arrays. The object's own
     * properties and prototype properties are used. Note that the order of the
     * output array is not guaranteed to be consistent across different JS
     * platforms.
     *
     * @func
     * @memberOf R
     * @since v0.4.0
     * @category Object
     * @sig {String: *} -> [[String,*]]
     * @param {Object} obj The object to extract from
     * @return {Array} An array of key, value arrays from the object's own
     *         and prototype properties.
     * @example
     *
     *      var F = function() { this.x = 'X'; };
     *      F.prototype.y = 'Y';
     *      var f = new F();
     *      R.toPairsIn(f); //=> [['x','X'], ['y','Y']]
     */
    var toPairsIn = _curry1(function toPairsIn(obj) {
        var pairs = [];
        for (var prop in obj) {
            pairs[pairs.length] = [
                prop,
                obj[prop]
            ];
        }
        return pairs;
    });

    /**
     * Transposes the rows and columns of a 2D list.
     * When passed a list of `n` lists of length `x`,
     * returns a list of `x` lists of length `n`.
     *
     *
     * @func
     * @memberOf R
     * @since v0.19.0
     * @category List
     * @sig [[a]] -> [[a]]
     * @param {Array} list A 2D list
     * @return {Array} A 2D list
     * @example
     *
     *      R.transpose([[1, 'a'], [2, 'b'], [3, 'c']]) //=> [[1, 2, 3], ['a', 'b', 'c']]
     *      R.transpose([[1, 2, 3], ['a', 'b', 'c']]) //=> [[1, 'a'], [2, 'b'], [3, 'c']]
     *
     * If some of the rows are shorter than the following rows, their elements are skipped:
     *
     *      R.transpose([[10, 11], [20], [], [30, 31, 32]]) //=> [[10, 20, 30], [11, 31], [32]]
     */
    var transpose = _curry1(function transpose(outerlist) {
        var i = 0;
        var result = [];
        while (i < outerlist.length) {
            var innerlist = outerlist[i];
            var j = 0;
            while (j < innerlist.length) {
                if (typeof result[j] === 'undefined') {
                    result[j] = [];
                }
                result[j].push(innerlist[j]);
                j += 1;
            }
            i += 1;
        }
        return result;
    });

    /**
     * Removes (strips) whitespace from both ends of the string.
     *
     * @func
     * @memberOf R
     * @since v0.6.0
     * @category String
     * @sig String -> String
     * @param {String} str The string to trim.
     * @return {String} Trimmed version of `str`.
     * @example
     *
     *      R.trim('   xyz  '); //=> 'xyz'
     *      R.map(R.trim, R.split(',', 'x, y, z')); //=> ['x', 'y', 'z']
     */
    var trim = function () {
        var ws = '\t\n\x0B\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003' + '\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028' + '\u2029\uFEFF';
        var zeroWidth = '\u200B';
        var hasProtoTrim = typeof String.prototype.trim === 'function';
        if (!hasProtoTrim || (ws.trim() || !zeroWidth.trim())) {
            return _curry1(function trim(str) {
                var beginRx = new RegExp('^[' + ws + '][' + ws + ']*');
                var endRx = new RegExp('[' + ws + '][' + ws + ']*$');
                return str.replace(beginRx, '').replace(endRx, '');
            });
        } else {
            return _curry1(function trim(str) {
                return str.trim();
            });
        }
    }();

    /**
     * `tryCatch` takes two functions, a `tryer` and a `catcher`. The returned
     * function evaluates the `tryer`; if it does not throw, it simply returns the
     * result. If the `tryer` *does* throw, the returned function evaluates the
     * `catcher` function and returns its result. Note that for effective
     * composition with this function, both the `tryer` and `catcher` functions
     * must return the same type of results.
     *
     * @func
     * @memberOf R
     * @since v0.20.0
     * @category Function
     * @sig (...x -> a) -> ((e, ...x) -> a) -> (...x -> a)
     * @param {Function} tryer The function that may throw.
     * @param {Function} catcher The function that will be evaluated if `tryer` throws.
     * @return {Function} A new function that will catch exceptions and send then to the catcher.
     * @example
     *
     *      R.tryCatch(R.prop('x'), R.F, {x: true}); //=> true
     *      R.tryCatch(R.prop('x'), R.F, null);      //=> false
     */
    var tryCatch = _curry2(function _tryCatch(tryer, catcher) {
        return _arity(tryer.length, function () {
            try {
                return tryer.apply(this, arguments);
            } catch (e) {
                return catcher.apply(this, _concat([e], arguments));
            }
        });
    });

    /**
     * Gives a single-word string description of the (native) type of a value,
     * returning such answers as 'Object', 'Number', 'Array', or 'Null'. Does not
     * attempt to distinguish user Object types any further, reporting them all as
     * 'Object'.
     *
     * @func
     * @memberOf R
     * @since v0.8.0
     * @category Type
     * @sig (* -> {*}) -> String
     * @param {*} val The value to test
     * @return {String}
     * @example
     *
     *      R.type({}); //=> "Object"
     *      R.type(1); //=> "Number"
     *      R.type(false); //=> "Boolean"
     *      R.type('s'); //=> "String"
     *      R.type(null); //=> "Null"
     *      R.type([]); //=> "Array"
     *      R.type(/[A-z]/); //=> "RegExp"
     */
    var type = _curry1(function type(val) {
        return val === null ? 'Null' : val === undefined ? 'Undefined' : Object.prototype.toString.call(val).slice(8, -1);
    });

    /**
     * Takes a function `fn`, which takes a single array argument, and returns a
     * function which:
     *
     *   - takes any number of positional arguments;
     *   - passes these arguments to `fn` as an array; and
     *   - returns the result.
     *
     * In other words, R.unapply derives a variadic function from a function which
     * takes an array. R.unapply is the inverse of R.apply.
     *
     * @func
     * @memberOf R
     * @since v0.8.0
     * @category Function
     * @sig ([*...] -> a) -> (*... -> a)
     * @param {Function} fn
     * @return {Function}
     * @see R.apply
     * @example
     *
     *      R.unapply(JSON.stringify)(1, 2, 3); //=> '[1,2,3]'
     */
    var unapply = _curry1(function unapply(fn) {
        return function () {
            return fn(_slice(arguments));
        };
    });

    /**
     * Wraps a function of any arity (including nullary) in a function that accepts
     * exactly 1 parameter. Any extraneous parameters will not be passed to the
     * supplied function.
     *
     * @func
     * @memberOf R
     * @since v0.2.0
     * @category Function
     * @sig (* -> b) -> (a -> b)
     * @param {Function} fn The function to wrap.
     * @return {Function} A new function wrapping `fn`. The new function is guaranteed to be of
     *         arity 1.
     * @example
     *
     *      var takesTwoArgs = function(a, b) {
     *        return [a, b];
     *      };
     *      takesTwoArgs.length; //=> 2
     *      takesTwoArgs(1, 2); //=> [1, 2]
     *
     *      var takesOneArg = R.unary(takesTwoArgs);
     *      takesOneArg.length; //=> 1
     *      // Only 1 argument is passed to the wrapped function
     *      takesOneArg(1, 2); //=> [1, undefined]
     */
    var unary = _curry1(function unary(fn) {
        return nAry(1, fn);
    });

    /**
     * Returns a function of arity `n` from a (manually) curried function.
     *
     * @func
     * @memberOf R
     * @since v0.14.0
     * @category Function
     * @sig Number -> (a -> b) -> (a -> c)
     * @param {Number} length The arity for the returned function.
     * @param {Function} fn The function to uncurry.
     * @return {Function} A new function.
     * @see R.curry
     * @example
     *
     *      var addFour = a => b => c => d => a + b + c + d;
     *
     *      var uncurriedAddFour = R.uncurryN(4, addFour);
     *      uncurriedAddFour(1, 2, 3, 4); //=> 10
     */
    var uncurryN = _curry2(function uncurryN(depth, fn) {
        return curryN(depth, function () {
            var currentDepth = 1;
            var value = fn;
            var idx = 0;
            var endIdx;
            while (currentDepth <= depth && typeof value === 'function') {
                endIdx = currentDepth === depth ? arguments.length : idx + value.length;
                value = value.apply(this, _slice(arguments, idx, endIdx));
                currentDepth += 1;
                idx = endIdx;
            }
            return value;
        });
    });

    /**
     * Builds a list from a seed value. Accepts an iterator function, which returns
     * either false to stop iteration or an array of length 2 containing the value
     * to add to the resulting list and the seed to be used in the next call to the
     * iterator function.
     *
     * The iterator function receives one argument: *(seed)*.
     *
     * @func
     * @memberOf R
     * @since v0.10.0
     * @category List
     * @sig (a -> [b]) -> * -> [b]
     * @param {Function} fn The iterator function. receives one argument, `seed`, and returns
     *        either false to quit iteration or an array of length two to proceed. The element
     *        at index 0 of this array will be added to the resulting array, and the element
     *        at index 1 will be passed to the next call to `fn`.
     * @param {*} seed The seed value.
     * @return {Array} The final list.
     * @example
     *
     *      var f = n => n > 50 ? false : [-n, n + 10];
     *      R.unfold(f, 10); //=> [-10, -20, -30, -40, -50]
     */
    var unfold = _curry2(function unfold(fn, seed) {
        var pair = fn(seed);
        var result = [];
        while (pair && pair.length) {
            result[result.length] = pair[0];
            pair = fn(pair[1]);
        }
        return result;
    });

    /**
     * Returns a new list containing only one copy of each element in the original
     * list, based upon the value returned by applying the supplied predicate to
     * two list elements. Prefers the first item if two items compare equal based
     * on the predicate.
     *
     * @func
     * @memberOf R
     * @since v0.2.0
     * @category List
     * @sig (a, a -> Boolean) -> [a] -> [a]
     * @param {Function} pred A predicate used to test whether two items are equal.
     * @param {Array} list The array to consider.
     * @return {Array} The list of unique items.
     * @example
     *
     *      var strEq = R.eqBy(String);
     *      R.uniqWith(strEq)([1, '1', 2, 1]); //=> [1, 2]
     *      R.uniqWith(strEq)([{}, {}]);       //=> [{}]
     *      R.uniqWith(strEq)([1, '1', 1]);    //=> [1]
     *      R.uniqWith(strEq)(['1', 1, 1]);    //=> ['1']
     */
    var uniqWith = _curry2(function uniqWith(pred, list) {
        var idx = 0;
        var len = list.length;
        var result = [];
        var item;
        while (idx < len) {
            item = list[idx];
            if (!_containsWith(pred, item, result)) {
                result[result.length] = item;
            }
            idx += 1;
        }
        return result;
    });

    /**
     * Tests the final argument by passing it to the given predicate function. If
     * the predicate is not satisfied, the function will return the result of
     * calling the `whenFalseFn` function with the same argument. If the predicate
     * is satisfied, the argument is returned as is.
     *
     * @func
     * @memberOf R
     * @since v0.18.0
     * @category Logic
     * @sig (a -> Boolean) -> (a -> a) -> a -> a
     * @param {Function} pred        A predicate function
     * @param {Function} whenFalseFn A function to invoke when the `pred` evaluates
     *                               to a falsy value.
     * @param {*}        x           An object to test with the `pred` function and
     *                               pass to `whenFalseFn` if necessary.
     * @return {*} Either `x` or the result of applying `x` to `whenFalseFn`.
     * @see R.ifElse, R.when
     * @example
     *
     *      // coerceArray :: (a|[a]) -> [a]
     *      var coerceArray = R.unless(R.isArrayLike, R.of);
     *      coerceArray([1, 2, 3]); //=> [1, 2, 3]
     *      coerceArray(1);         //=> [1]
     */
    var unless = _curry3(function unless(pred, whenFalseFn, x) {
        return pred(x) ? x : whenFalseFn(x);
    });

    /**
     * Takes a predicate, a transformation function, and an initial value,
     * and returns a value of the same type as the initial value.
     * It does so by applying the transformation until the predicate is satisfied,
     * at which point it returns the satisfactory value.
     *
     * @func
     * @memberOf R
     * @since v0.20.0
     * @category Logic
     * @sig (a -> Boolean) -> (a -> a) -> a -> a
     * @param {Function} pred A predicate function
     * @param {Function} fn The iterator function
     * @param {*} init Initial value
     * @return {*} Final value that satisfies predicate
     * @example
     *
     *      R.until(R.gt(R.__, 100), R.multiply(2))(1) // => 128
     */
    var until = _curry3(function until(pred, fn, init) {
        var val = init;
        while (!pred(val)) {
            val = fn(val);
        }
        return val;
    });

    /**
     * Returns a new copy of the array with the element at the provided index
     * replaced with the given value.
     *
     * @func
     * @memberOf R
     * @since v0.14.0
     * @category List
     * @sig Number -> a -> [a] -> [a]
     * @param {Number} idx The index to update.
     * @param {*} x The value to exist at the given index of the returned array.
     * @param {Array|Arguments} list The source array-like object to be updated.
     * @return {Array} A copy of `list` with the value at index `idx` replaced with `x`.
     * @see R.adjust
     * @example
     *
     *      R.update(1, 11, [0, 1, 2]);     //=> [0, 11, 2]
     *      R.update(1)(11)([0, 1, 2]);     //=> [0, 11, 2]
     */
    var update = _curry3(function update(idx, x, list) {
        return adjust(always(x), idx, list);
    });

    /**
     * Accepts a function `fn` and a list of transformer functions and returns a
     * new curried function. When the new function is invoked, it calls the
     * function `fn` with parameters consisting of the result of calling each
     * supplied handler on successive arguments to the new function.
     *
     * If more arguments are passed to the returned function than transformer
     * functions, those arguments are passed directly to `fn` as additional
     * parameters. If you expect additional arguments that don't need to be
     * transformed, although you can ignore them, it's best to pass an identity
     * function so that the new function reports the correct arity.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Function
     * @sig (x1 -> x2 -> ... -> z) -> [(a -> x1), (b -> x2), ...] -> (a -> b -> ... -> z)
     * @param {Function} fn The function to wrap.
     * @param {Array} transformers A list of transformer functions
     * @return {Function} The wrapped function.
     * @example
     *
     *      R.useWith(Math.pow, [R.identity, R.identity])(3, 4); //=> 81
     *      R.useWith(Math.pow, [R.identity, R.identity])(3)(4); //=> 81
     *      R.useWith(Math.pow, [R.dec, R.inc])(3, 4); //=> 32
     *      R.useWith(Math.pow, [R.dec, R.inc])(3)(4); //=> 32
     */
    var useWith = _curry2(function useWith(fn, transformers) {
        return curryN(transformers.length, function () {
            var args = [];
            var idx = 0;
            while (idx < transformers.length) {
                args.push(transformers[idx].call(this, arguments[idx]));
                idx += 1;
            }
            return fn.apply(this, args.concat(_slice(arguments, transformers.length)));
        });
    });

    /**
     * Returns a list of all the enumerable own properties of the supplied object.
     * Note that the order of the output array is not guaranteed across different
     * JS platforms.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Object
     * @sig {k: v} -> [v]
     * @param {Object} obj The object to extract values from
     * @return {Array} An array of the values of the object's own properties.
     * @example
     *
     *      R.values({a: 1, b: 2, c: 3}); //=> [1, 2, 3]
     */
    var values = _curry1(function values(obj) {
        var props = keys(obj);
        var len = props.length;
        var vals = [];
        var idx = 0;
        while (idx < len) {
            vals[idx] = obj[props[idx]];
            idx += 1;
        }
        return vals;
    });

    /**
     * Returns a list of all the properties, including prototype properties, of the
     * supplied object.
     * Note that the order of the output array is not guaranteed to be consistent
     * across different JS platforms.
     *
     * @func
     * @memberOf R
     * @since v0.2.0
     * @category Object
     * @sig {k: v} -> [v]
     * @param {Object} obj The object to extract values from
     * @return {Array} An array of the values of the object's own and prototype properties.
     * @example
     *
     *      var F = function() { this.x = 'X'; };
     *      F.prototype.y = 'Y';
     *      var f = new F();
     *      R.valuesIn(f); //=> ['X', 'Y']
     */
    var valuesIn = _curry1(function valuesIn(obj) {
        var prop;
        var vs = [];
        for (prop in obj) {
            vs[vs.length] = obj[prop];
        }
        return vs;
    });

    /**
     * Returns a "view" of the given data structure, determined by the given lens.
     * The lens's focus determines which portion of the data structure is visible.
     *
     * @func
     * @memberOf R
     * @since v0.16.0
     * @category Object
     * @typedefn Lens s a = Functor f => (a -> f a) -> s -> f s
     * @sig Lens s a -> s -> a
     * @param {Lens} lens
     * @param {*} x
     * @return {*}
     * @see R.prop, R.lensIndex, R.lensProp
     * @example
     *
     *      var xLens = R.lensProp('x');
     *
     *      R.view(xLens, {x: 1, y: 2});  //=> 1
     *      R.view(xLens, {x: 4, y: 2});  //=> 4
     */
    // `Const` is a functor that effectively ignores the function given to `map`.
    // Using `Const` effectively ignores the setter function of the `lens`,
    // leaving the value returned by the getter function unmodified.
    var view = function () {
        // `Const` is a functor that effectively ignores the function given to `map`.
        var Const = function (x) {
            return {
                value: x,
                map: function () {
                    return this;
                }
            };
        };
        return _curry2(function view(lens, x) {
            // Using `Const` effectively ignores the setter function of the `lens`,
            // leaving the value returned by the getter function unmodified.
            return lens(Const)(x).value;
        });
    }();

    /**
     * Tests the final argument by passing it to the given predicate function. If
     * the predicate is satisfied, the function will return the result of calling
     * the `whenTrueFn` function with the same argument. If the predicate is not
     * satisfied, the argument is returned as is.
     *
     * @func
     * @memberOf R
     * @since v0.18.0
     * @category Logic
     * @sig (a -> Boolean) -> (a -> a) -> a -> a
     * @param {Function} pred       A predicate function
     * @param {Function} whenTrueFn A function to invoke when the `condition`
     *                              evaluates to a truthy value.
     * @param {*}        x          An object to test with the `pred` function and
     *                              pass to `whenTrueFn` if necessary.
     * @return {*} Either `x` or the result of applying `x` to `whenTrueFn`.
     * @see R.ifElse, R.unless
     * @example
     *
     *      // truncate :: String -> String
     *      var truncate = R.when(
     *        R.propSatisfies(R.gt(R.__, 10), 'length'),
     *        R.pipe(R.take(10), R.append('…'), R.join(''))
     *      );
     *      truncate('12345');         //=> '12345'
     *      truncate('0123456789ABC'); //=> '0123456789…'
     */
    var when = _curry3(function when(pred, whenTrueFn, x) {
        return pred(x) ? whenTrueFn(x) : x;
    });

    /**
     * Takes a spec object and a test object; returns true if the test satisfies
     * the spec. Each of the spec's own properties must be a predicate function.
     * Each predicate is applied to the value of the corresponding property of the
     * test object. `where` returns true if all the predicates return true, false
     * otherwise.
     *
     * `where` is well suited to declaratively expressing constraints for other
     * functions such as `filter` and `find`.
     *
     * @func
     * @memberOf R
     * @since v0.1.1
     * @category Object
     * @sig {String: (* -> Boolean)} -> {String: *} -> Boolean
     * @param {Object} spec
     * @param {Object} testObj
     * @return {Boolean}
     * @example
     *
     *      // pred :: Object -> Boolean
     *      var pred = R.where({
     *        a: R.equals('foo'),
     *        b: R.complement(R.equals('bar')),
     *        x: R.gt(_, 10),
     *        y: R.lt(_, 20)
     *      });
     *
     *      pred({a: 'foo', b: 'xxx', x: 11, y: 19}); //=> true
     *      pred({a: 'xxx', b: 'xxx', x: 11, y: 19}); //=> false
     *      pred({a: 'foo', b: 'bar', x: 11, y: 19}); //=> false
     *      pred({a: 'foo', b: 'xxx', x: 10, y: 19}); //=> false
     *      pred({a: 'foo', b: 'xxx', x: 11, y: 20}); //=> false
     */
    var where = _curry2(function where(spec, testObj) {
        for (var prop in spec) {
            if (_has(prop, spec) && !spec[prop](testObj[prop])) {
                return false;
            }
        }
        return true;
    });

    /**
     * Wrap a function inside another to allow you to make adjustments to the
     * parameters, or do other processing either before the internal function is
     * called or with its results.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Function
     * @sig (a... -> b) -> ((a... -> b) -> a... -> c) -> (a... -> c)
     * @param {Function} fn The function to wrap.
     * @param {Function} wrapper The wrapper function.
     * @return {Function} The wrapped function.
     * @example
     *
     *      var greet = name => 'Hello ' + name;
     *
     *      var shoutedGreet = R.wrap(greet, (gr, name) => gr(name).toUpperCase());
     *
     *      shoutedGreet("Kathy"); //=> "HELLO KATHY"
     *
     *      var shortenedGreet = R.wrap(greet, function(gr, name) {
     *        return gr(name.substring(0, 3));
     *      });
     *      shortenedGreet("Robert"); //=> "Hello Rob"
     */
    var wrap = _curry2(function wrap(fn, wrapper) {
        return curryN(fn.length, function () {
            return wrapper.apply(this, _concat([fn], arguments));
        });
    });

    /**
     * Creates a new list out of the two supplied by creating each possible pair
     * from the lists.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig [a] -> [b] -> [[a,b]]
     * @param {Array} as The first list.
     * @param {Array} bs The second list.
     * @return {Array} The list made by combining each possible pair from
     *         `as` and `bs` into pairs (`[a, b]`).
     * @example
     *
     *      R.xprod([1, 2], ['a', 'b']); //=> [[1, 'a'], [1, 'b'], [2, 'a'], [2, 'b']]
     */
    // = xprodWith(prepend); (takes about 3 times as long...)
    var xprod = _curry2(function xprod(a, b) {
        // = xprodWith(prepend); (takes about 3 times as long...)
        var idx = 0;
        var ilen = a.length;
        var j;
        var jlen = b.length;
        var result = [];
        while (idx < ilen) {
            j = 0;
            while (j < jlen) {
                result[result.length] = [
                    a[idx],
                    b[j]
                ];
                j += 1;
            }
            idx += 1;
        }
        return result;
    });

    /**
     * Creates a new list out of the two supplied by pairing up equally-positioned
     * items from both lists. The returned list is truncated to the length of the
     * shorter of the two input lists.
     * Note: `zip` is equivalent to `zipWith(function(a, b) { return [a, b] })`.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig [a] -> [b] -> [[a,b]]
     * @param {Array} list1 The first array to consider.
     * @param {Array} list2 The second array to consider.
     * @return {Array} The list made by pairing up same-indexed elements of `list1` and `list2`.
     * @example
     *
     *      R.zip([1, 2, 3], ['a', 'b', 'c']); //=> [[1, 'a'], [2, 'b'], [3, 'c']]
     */
    var zip = _curry2(function zip(a, b) {
        var rv = [];
        var idx = 0;
        var len = Math.min(a.length, b.length);
        while (idx < len) {
            rv[idx] = [
                a[idx],
                b[idx]
            ];
            idx += 1;
        }
        return rv;
    });

    /**
     * Creates a new object out of a list of keys and a list of values.
     * Key/value pairing is truncated to the length of the shorter of the two lists.
     * Note: `zipObj` is equivalent to `pipe(zipWith(pair), fromPairs)`.
     *
     * @func
     * @memberOf R
     * @since v0.3.0
     * @category List
     * @sig [String] -> [*] -> {String: *}
     * @param {Array} keys The array that will be properties on the output object.
     * @param {Array} values The list of values on the output object.
     * @return {Object} The object made by pairing up same-indexed elements of `keys` and `values`.
     * @example
     *
     *      R.zipObj(['a', 'b', 'c'], [1, 2, 3]); //=> {a: 1, b: 2, c: 3}
     */
    var zipObj = _curry2(function zipObj(keys, values) {
        var idx = 0;
        var len = Math.min(keys.length, values.length);
        var out = {};
        while (idx < len) {
            out[keys[idx]] = values[idx];
            idx += 1;
        }
        return out;
    });

    /**
     * Creates a new list out of the two supplied by applying the function to each
     * equally-positioned pair in the lists. The returned list is truncated to the
     * length of the shorter of the two input lists.
     *
     * @function
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig (a,b -> c) -> [a] -> [b] -> [c]
     * @param {Function} fn The function used to combine the two elements into one value.
     * @param {Array} list1 The first array to consider.
     * @param {Array} list2 The second array to consider.
     * @return {Array} The list made by combining same-indexed elements of `list1` and `list2`
     *         using `fn`.
     * @example
     *
     *      var f = (x, y) => {
     *        // ...
     *      };
     *      R.zipWith(f, [1, 2, 3], ['a', 'b', 'c']);
     *      //=> [f(1, 'a'), f(2, 'b'), f(3, 'c')]
     */
    var zipWith = _curry3(function zipWith(fn, a, b) {
        var rv = [];
        var idx = 0;
        var len = Math.min(a.length, b.length);
        while (idx < len) {
            rv[idx] = fn(a[idx], b[idx]);
            idx += 1;
        }
        return rv;
    });

    /**
     * A function that always returns `false`. Any passed in parameters are ignored.
     *
     * @func
     * @memberOf R
     * @since v0.9.0
     * @category Function
     * @sig * -> Boolean
     * @param {*}
     * @return {Boolean}
     * @see R.always, R.T
     * @example
     *
     *      R.F(); //=> false
     */
    var F = always(false);

    /**
     * A function that always returns `true`. Any passed in parameters are ignored.
     *
     * @func
     * @memberOf R
     * @since v0.9.0
     * @category Function
     * @sig * -> Boolean
     * @param {*}
     * @return {Boolean}
     * @see R.always, R.F
     * @example
     *
     *      R.T(); //=> true
     */
    var T = always(true);

    /**
     * Copies an object.
     *
     * @private
     * @param {*} value The value to be copied
     * @param {Array} refFrom Array containing the source references
     * @param {Array} refTo Array containing the copied source references
     * @param {Boolean} deep Whether or not to perform deep cloning.
     * @return {*} The copied value.
     */
    var _clone = function _clone(value, refFrom, refTo, deep) {
        var copy = function copy(copiedValue) {
            var len = refFrom.length;
            var idx = 0;
            while (idx < len) {
                if (value === refFrom[idx]) {
                    return refTo[idx];
                }
                idx += 1;
            }
            refFrom[idx + 1] = value;
            refTo[idx + 1] = copiedValue;
            for (var key in value) {
                copiedValue[key] = deep ? _clone(value[key], refFrom, refTo, true) : value[key];
            }
            return copiedValue;
        };
        switch (type(value)) {
        case 'Object':
            return copy({});
        case 'Array':
            return copy([]);
        case 'Date':
            return new Date(value.valueOf());
        case 'RegExp':
            return _cloneRegExp(value);
        default:
            return value;
        }
    };

    var _createPartialApplicator = function _createPartialApplicator(concat) {
        return _curry2(function (fn, args) {
            return _arity(Math.max(0, fn.length - args.length), function () {
                return fn.apply(this, concat(args, arguments));
            });
        });
    };

    var _dropLast = function dropLast(n, xs) {
        return take(n < xs.length ? xs.length - n : 0, xs);
    };

    // Values of other types are only equal if identical.
    var _equals = function _equals(a, b, stackA, stackB) {
        if (identical(a, b)) {
            return true;
        }
        if (type(a) !== type(b)) {
            return false;
        }
        if (a == null || b == null) {
            return false;
        }
        if (typeof a.equals === 'function' || typeof b.equals === 'function') {
            return typeof a.equals === 'function' && a.equals(b) && typeof b.equals === 'function' && b.equals(a);
        }
        switch (type(a)) {
        case 'Arguments':
        case 'Array':
        case 'Object':
            if (typeof a.constructor === 'function' && _functionName(a.constructor) === 'Promise') {
                return a === b;
            }
            break;
        case 'Boolean':
        case 'Number':
        case 'String':
            if (!(typeof a === typeof b && identical(a.valueOf(), b.valueOf()))) {
                return false;
            }
            break;
        case 'Date':
            if (!identical(a.valueOf(), b.valueOf())) {
                return false;
            }
            break;
        case 'Error':
            return a.name === b.name && a.message === b.message;
        case 'RegExp':
            if (!(a.source === b.source && a.global === b.global && a.ignoreCase === b.ignoreCase && a.multiline === b.multiline && a.sticky === b.sticky && a.unicode === b.unicode)) {
                return false;
            }
            break;
        case 'Map':
        case 'Set':
            if (!_equals(_arrayFromIterator(a.entries()), _arrayFromIterator(b.entries()), stackA, stackB)) {
                return false;
            }
            break;
        case 'Int8Array':
        case 'Uint8Array':
        case 'Uint8ClampedArray':
        case 'Int16Array':
        case 'Uint16Array':
        case 'Int32Array':
        case 'Uint32Array':
        case 'Float32Array':
        case 'Float64Array':
            break;
        case 'ArrayBuffer':
            break;
        default:
            // Values of other types are only equal if identical.
            return false;
        }
        var keysA = keys(a);
        if (keysA.length !== keys(b).length) {
            return false;
        }
        var idx = stackA.length - 1;
        while (idx >= 0) {
            if (stackA[idx] === a) {
                return stackB[idx] === b;
            }
            idx -= 1;
        }
        stackA.push(a);
        stackB.push(b);
        idx = keysA.length - 1;
        while (idx >= 0) {
            var key = keysA[idx];
            if (!(_has(key, b) && _equals(b[key], a[key], stackA, stackB))) {
                return false;
            }
            idx -= 1;
        }
        stackA.pop();
        stackB.pop();
        return true;
    };

    /**
     * `_makeFlat` is a helper function that returns a one-level or fully recursive
     * function based on the flag passed in.
     *
     * @private
     */
    var _makeFlat = function _makeFlat(recursive) {
        return function flatt(list) {
            var value, jlen, j;
            var result = [];
            var idx = 0;
            var ilen = list.length;
            while (idx < ilen) {
                if (isArrayLike(list[idx])) {
                    value = recursive ? flatt(list[idx]) : list[idx];
                    j = 0;
                    jlen = value.length;
                    while (j < jlen) {
                        result[result.length] = value[j];
                        j += 1;
                    }
                } else {
                    result[result.length] = list[idx];
                }
                idx += 1;
            }
            return result;
        };
    };

    var _reduce = function () {
        function _arrayReduce(xf, acc, list) {
            var idx = 0;
            var len = list.length;
            while (idx < len) {
                acc = xf['@@transducer/step'](acc, list[idx]);
                if (acc && acc['@@transducer/reduced']) {
                    acc = acc['@@transducer/value'];
                    break;
                }
                idx += 1;
            }
            return xf['@@transducer/result'](acc);
        }
        function _iterableReduce(xf, acc, iter) {
            var step = iter.next();
            while (!step.done) {
                acc = xf['@@transducer/step'](acc, step.value);
                if (acc && acc['@@transducer/reduced']) {
                    acc = acc['@@transducer/value'];
                    break;
                }
                step = iter.next();
            }
            return xf['@@transducer/result'](acc);
        }
        function _methodReduce(xf, acc, obj) {
            return xf['@@transducer/result'](obj.reduce(bind(xf['@@transducer/step'], xf), acc));
        }
        var symIterator = typeof Symbol !== 'undefined' ? Symbol.iterator : '@@iterator';
        return function _reduce(fn, acc, list) {
            if (typeof fn === 'function') {
                fn = _xwrap(fn);
            }
            if (isArrayLike(list)) {
                return _arrayReduce(fn, acc, list);
            }
            if (typeof list.reduce === 'function') {
                return _methodReduce(fn, acc, list);
            }
            if (list[symIterator] != null) {
                return _iterableReduce(fn, acc, list[symIterator]());
            }
            if (typeof list.next === 'function') {
                return _iterableReduce(fn, acc, list);
            }
            throw new TypeError('reduce: list must be array or iterable');
        };
    }();

    var _stepCat = function () {
        var _stepCatArray = {
            '@@transducer/init': Array,
            '@@transducer/step': function (xs, x) {
                xs.push(x);
                return xs;
            },
            '@@transducer/result': _identity
        };
        var _stepCatString = {
            '@@transducer/init': String,
            '@@transducer/step': function (a, b) {
                return a + b;
            },
            '@@transducer/result': _identity
        };
        var _stepCatObject = {
            '@@transducer/init': Object,
            '@@transducer/step': function (result, input) {
                return _assign(result, isArrayLike(input) ? objOf(input[0], input[1]) : input);
            },
            '@@transducer/result': _identity
        };
        return function _stepCat(obj) {
            if (_isTransformer(obj)) {
                return obj;
            }
            if (isArrayLike(obj)) {
                return _stepCatArray;
            }
            if (typeof obj === 'string') {
                return _stepCatString;
            }
            if (typeof obj === 'object') {
                return _stepCatObject;
            }
            throw new Error('Cannot create transformer for ' + obj);
        };
    }();

    var _xdropLastWhile = function () {
        function XDropLastWhile(fn, xf) {
            this.f = fn;
            this.retained = [];
            this.xf = xf;
        }
        XDropLastWhile.prototype['@@transducer/init'] = _xfBase.init;
        XDropLastWhile.prototype['@@transducer/result'] = function (result) {
            this.retained = null;
            return this.xf['@@transducer/result'](result);
        };
        XDropLastWhile.prototype['@@transducer/step'] = function (result, input) {
            return this.f(input) ? this.retain(result, input) : this.flush(result, input);
        };
        XDropLastWhile.prototype.flush = function (result, input) {
            result = _reduce(this.xf['@@transducer/step'], result, this.retained);
            this.retained = [];
            return this.xf['@@transducer/step'](result, input);
        };
        XDropLastWhile.prototype.retain = function (result, input) {
            this.retained.push(input);
            return result;
        };
        return _curry2(function _xdropLastWhile(fn, xf) {
            return new XDropLastWhile(fn, xf);
        });
    }();

    var _xgroupBy = function () {
        function XGroupBy(f, xf) {
            this.xf = xf;
            this.f = f;
            this.inputs = {};
        }
        XGroupBy.prototype['@@transducer/init'] = _xfBase.init;
        XGroupBy.prototype['@@transducer/result'] = function (result) {
            var key;
            for (key in this.inputs) {
                if (_has(key, this.inputs)) {
                    result = this.xf['@@transducer/step'](result, this.inputs[key]);
                    if (result['@@transducer/reduced']) {
                        result = result['@@transducer/value'];
                        break;
                    }
                }
            }
            this.inputs = null;
            return this.xf['@@transducer/result'](result);
        };
        XGroupBy.prototype['@@transducer/step'] = function (result, input) {
            var key = this.f(input);
            this.inputs[key] = this.inputs[key] || [
                key,
                []
            ];
            this.inputs[key][1] = append(input, this.inputs[key][1]);
            return result;
        };
        return _curry2(function _xgroupBy(f, xf) {
            return new XGroupBy(f, xf);
        });
    }();

    /**
     * Creates a new list iteration function from an existing one by adding two new
     * parameters to its callback function: the current index, and the entire list.
     *
     * This would turn, for instance, Ramda's simple `map` function into one that
     * more closely resembles `Array.prototype.map`. Note that this will only work
     * for functions in which the iteration callback function is the first
     * parameter, and where the list is the last parameter. (This latter might be
     * unimportant if the list parameter is not used.)
     *
     * @func
     * @memberOf R
     * @since v0.15.0
     * @category Function
     * @category List
     * @sig ((a ... -> b) ... -> [a] -> *) -> (a ..., Int, [a] -> b) ... -> [a] -> *)
     * @param {Function} fn A list iteration function that does not pass index or list to its callback
     * @return {Function} An altered list iteration function that passes (item, index, list) to its callback
     * @example
     *
     *      var mapIndexed = R.addIndex(R.map);
     *      mapIndexed((val, idx) => idx + '-' + val, ['f', 'o', 'o', 'b', 'a', 'r']);
     *      //=> ['0-f', '1-o', '2-o', '3-b', '4-a', '5-r']
     */
    var addIndex = _curry1(function addIndex(fn) {
        return curryN(fn.length, function () {
            var idx = 0;
            var origFn = arguments[0];
            var list = arguments[arguments.length - 1];
            var args = _slice(arguments);
            args[0] = function () {
                var result = origFn.apply(this, _concat(arguments, [
                    idx,
                    list
                ]));
                idx += 1;
                return result;
            };
            return fn.apply(this, args);
        });
    });

    /**
     * Wraps a function of any arity (including nullary) in a function that accepts
     * exactly 2 parameters. Any extraneous parameters will not be passed to the
     * supplied function.
     *
     * @func
     * @memberOf R
     * @since v0.2.0
     * @category Function
     * @sig (* -> c) -> (a, b -> c)
     * @param {Function} fn The function to wrap.
     * @return {Function} A new function wrapping `fn`. The new function is guaranteed to be of
     *         arity 2.
     * @example
     *
     *      var takesThreeArgs = function(a, b, c) {
     *        return [a, b, c];
     *      };
     *      takesThreeArgs.length; //=> 3
     *      takesThreeArgs(1, 2, 3); //=> [1, 2, 3]
     *
     *      var takesTwoArgs = R.binary(takesThreeArgs);
     *      takesTwoArgs.length; //=> 2
     *      // Only 2 arguments are passed to the wrapped function
     *      takesTwoArgs(1, 2, 3); //=> [1, 2, undefined]
     */
    var binary = _curry1(function binary(fn) {
        return nAry(2, fn);
    });

    /**
     * Creates a deep copy of the value which may contain (nested) `Array`s and
     * `Object`s, `Number`s, `String`s, `Boolean`s and `Date`s. `Function`s are not
     * copied, but assigned by their reference.
     *
     * Dispatches to a `clone` method if present.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Object
     * @sig {*} -> {*}
     * @param {*} value The object or array to clone
     * @return {*} A new object or array.
     * @example
     *
     *      var objects = [{}, {}, {}];
     *      var objectsClone = R.clone(objects);
     *      objects[0] === objectsClone[0]; //=> false
     */
    var clone = _curry1(function clone(value) {
        return value != null && typeof value.clone === 'function' ? value.clone() : _clone(value, [], [], true);
    });

    /**
     * Returns a curried equivalent of the provided function. The curried function
     * has two unusual capabilities. First, its arguments needn't be provided one
     * at a time. If `f` is a ternary function and `g` is `R.curry(f)`, the
     * following are equivalent:
     *
     *   - `g(1)(2)(3)`
     *   - `g(1)(2, 3)`
     *   - `g(1, 2)(3)`
     *   - `g(1, 2, 3)`
     *
     * Secondly, the special placeholder value `R.__` may be used to specify
     * "gaps", allowing partial application of any combination of arguments,
     * regardless of their positions. If `g` is as above and `_` is `R.__`, the
     * following are equivalent:
     *
     *   - `g(1, 2, 3)`
     *   - `g(_, 2, 3)(1)`
     *   - `g(_, _, 3)(1)(2)`
     *   - `g(_, _, 3)(1, 2)`
     *   - `g(_, 2)(1)(3)`
     *   - `g(_, 2)(1, 3)`
     *   - `g(_, 2)(_, 3)(1)`
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Function
     * @sig (* -> a) -> (* -> a)
     * @param {Function} fn The function to curry.
     * @return {Function} A new, curried function.
     * @see R.curryN
     * @example
     *
     *      var addFourNumbers = (a, b, c, d) => a + b + c + d;
     *
     *      var curriedAddFourNumbers = R.curry(addFourNumbers);
     *      var f = curriedAddFourNumbers(1, 2);
     *      var g = f(3);
     *      g(4); //=> 10
     */
    var curry = _curry1(function curry(fn) {
        return curryN(fn.length, fn);
    });

    /**
     * Returns all but the first `n` elements of the given list, string, or
     * transducer/transformer (or object with a `drop` method).
     *
     * Dispatches to the `drop` method of the second argument, if present.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig Number -> [a] -> [a]
     * @sig Number -> String -> String
     * @param {Number} n
     * @param {*} list
     * @return {*}
     * @see R.take, R.transduce
     * @example
     *
     *      R.drop(1, ['foo', 'bar', 'baz']); //=> ['bar', 'baz']
     *      R.drop(2, ['foo', 'bar', 'baz']); //=> ['baz']
     *      R.drop(3, ['foo', 'bar', 'baz']); //=> []
     *      R.drop(4, ['foo', 'bar', 'baz']); //=> []
     *      R.drop(3, 'ramda');               //=> 'da'
     */
    var drop = _curry2(_dispatchable('drop', _xdrop, function drop(n, xs) {
        return slice(Math.max(0, n), Infinity, xs);
    }));

    /**
     * Returns a list containing all but the last `n` elements of the given `list`.
     *
     * @func
     * @memberOf R
     * @since v0.16.0
     * @category List
     * @sig Number -> [a] -> [a]
     * @sig Number -> String -> String
     * @param {Number} n The number of elements of `xs` to skip.
     * @param {Array} xs The collection to consider.
     * @return {Array}
     * @see R.takeLast
     * @example
     *
     *      R.dropLast(1, ['foo', 'bar', 'baz']); //=> ['foo', 'bar']
     *      R.dropLast(2, ['foo', 'bar', 'baz']); //=> ['foo']
     *      R.dropLast(3, ['foo', 'bar', 'baz']); //=> []
     *      R.dropLast(4, ['foo', 'bar', 'baz']); //=> []
     *      R.dropLast(3, 'ramda');               //=> 'ra'
     */
    var dropLast = _curry2(_dispatchable('dropLast', _xdropLast, _dropLast));

    /**
     * Returns a new list containing all but last the`n` elements of a given list,
     * passing each value from the right to the supplied predicate function,
     * skipping elements while the predicate function returns `true`. The predicate
     * function is passed one argument: (value)*.
     *
     * @func
     * @memberOf R
     * @since v0.16.0
     * @category List
     * @sig (a -> Boolean) -> [a] -> [a]
     * @param {Function} fn The function called per iteration.
     * @param {Array} list The collection to iterate over.
     * @return {Array} A new array.
     * @see R.takeLastWhile, R.addIndex
     * @example
     *
     *      var lteThree = x => x <= 3;
     *
     *      R.dropLastWhile(lteThree, [1, 2, 3, 4, 3, 2, 1]); //=> [1, 2, 3, 4]
     */
    var dropLastWhile = _curry2(_dispatchable('dropLastWhile', _xdropLastWhile, _dropLastWhile));

    /**
     * Returns `true` if its arguments are equivalent, `false` otherwise. Handles
     * cyclical data structures.
     *
     * Dispatches symmetrically to the `equals` methods of both arguments, if
     * present.
     *
     * @func
     * @memberOf R
     * @since v0.15.0
     * @category Relation
     * @sig a -> b -> Boolean
     * @param {*} a
     * @param {*} b
     * @return {Boolean}
     * @example
     *
     *      R.equals(1, 1); //=> true
     *      R.equals(1, '1'); //=> false
     *      R.equals([1, 2, 3], [1, 2, 3]); //=> true
     *
     *      var a = {}; a.v = a;
     *      var b = {}; b.v = b;
     *      R.equals(a, b); //=> true
     */
    var equals = _curry2(function equals(a, b) {
        return _equals(a, b, [], []);
    });

    /**
     * Takes a predicate and a "filterable", and returns a new filterable of the
     * same type containing the members of the given filterable which satisfy the
     * given predicate.
     *
     * Dispatches to the `filter` method of the second argument, if present.
     *
     * Acts as a transducer if a transformer is given in list position.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig Filterable f => (a -> Boolean) -> f a -> f a
     * @param {Function} pred
     * @param {Array} filterable
     * @return {Array}
     * @see R.reject, R.transduce, R.addIndex
     * @example
     *
     *      var isEven = n => n % 2 === 0;
     *
     *      R.filter(isEven, [1, 2, 3, 4]); //=> [2, 4]
     *
     *      R.filter(isEven, {a: 1, b: 2, c: 3, d: 4}); //=> {b: 2, d: 4}
     */
    // else
    var filter = _curry2(_dispatchable('filter', _xfilter, function (pred, filterable) {
        return _isObject(filterable) ? _reduce(function (acc, key) {
            if (pred(filterable[key])) {
                acc[key] = filterable[key];
            }
            return acc;
        }, {}, keys(filterable)) : // else
        _filter(pred, filterable);
    }));

    /**
     * Returns a new list by pulling every item out of it (and all its sub-arrays)
     * and putting them in a new array, depth-first.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig [a] -> [b]
     * @param {Array} list The array to consider.
     * @return {Array} The flattened list.
     * @see R.unnest
     * @example
     *
     *      R.flatten([1, 2, [3, 4], 5, [6, [7, 8, [9, [10, 11], 12]]]]);
     *      //=> [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]
     */
    var flatten = _curry1(_makeFlat(true));

    /**
     * Returns a new function much like the supplied one, except that the first two
     * arguments' order is reversed.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Function
     * @sig (a -> b -> c -> ... -> z) -> (b -> a -> c -> ... -> z)
     * @param {Function} fn The function to invoke with its first two parameters reversed.
     * @return {*} The result of invoking `fn` with its first two parameters' order reversed.
     * @example
     *
     *      var mergeThree = (a, b, c) => [].concat(a, b, c);
     *
     *      mergeThree(1, 2, 3); //=> [1, 2, 3]
     *
     *      R.flip(mergeThree)(1, 2, 3); //=> [2, 1, 3]
     */
    var flip = _curry1(function flip(fn) {
        return curry(function (a, b) {
            var args = _slice(arguments);
            args[0] = b;
            args[1] = a;
            return fn.apply(this, args);
        });
    });

    /**
     * Returns the first element of the given list or string. In some libraries
     * this function is named `first`.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig [a] -> a | Undefined
     * @sig String -> String
     * @param {Array|String} list
     * @return {*}
     * @see R.tail, R.init, R.last
     * @example
     *
     *      R.head(['fi', 'fo', 'fum']); //=> 'fi'
     *      R.head([]); //=> undefined
     *
     *      R.head('abc'); //=> 'a'
     *      R.head(''); //=> ''
     */
    var head = nth(0);

    /**
     * Returns all but the last element of the given list or string.
     *
     * @func
     * @memberOf R
     * @since v0.9.0
     * @category List
     * @sig [a] -> [a]
     * @sig String -> String
     * @param {*} list
     * @return {*}
     * @see R.last, R.head, R.tail
     * @example
     *
     *      R.init([1, 2, 3]);  //=> [1, 2]
     *      R.init([1, 2]);     //=> [1]
     *      R.init([1]);        //=> []
     *      R.init([]);         //=> []
     *
     *      R.init('abc');  //=> 'ab'
     *      R.init('ab');   //=> 'a'
     *      R.init('a');    //=> ''
     *      R.init('');     //=> ''
     */
    var init = slice(0, -1);

    /**
     * Combines two lists into a set (i.e. no duplicates) composed of those
     * elements common to both lists. Duplication is determined according to the
     * value returned by applying the supplied predicate to two list elements.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Relation
     * @sig (a -> a -> Boolean) -> [*] -> [*] -> [*]
     * @param {Function} pred A predicate function that determines whether
     *        the two supplied elements are equal.
     * @param {Array} list1 One list of items to compare
     * @param {Array} list2 A second list of items to compare
     * @return {Array} A new list containing those elements common to both lists.
     * @see R.intersection
     * @example
     *
     *      var buffaloSpringfield = [
     *        {id: 824, name: 'Richie Furay'},
     *        {id: 956, name: 'Dewey Martin'},
     *        {id: 313, name: 'Bruce Palmer'},
     *        {id: 456, name: 'Stephen Stills'},
     *        {id: 177, name: 'Neil Young'}
     *      ];
     *      var csny = [
     *        {id: 204, name: 'David Crosby'},
     *        {id: 456, name: 'Stephen Stills'},
     *        {id: 539, name: 'Graham Nash'},
     *        {id: 177, name: 'Neil Young'}
     *      ];
     *
     *      R.intersectionWith(R.eqBy(R.prop('id')), buffaloSpringfield, csny);
     *      //=> [{id: 456, name: 'Stephen Stills'}, {id: 177, name: 'Neil Young'}]
     */
    var intersectionWith = _curry3(function intersectionWith(pred, list1, list2) {
        var lookupList, filteredList;
        if (list1.length > list2.length) {
            lookupList = list1;
            filteredList = list2;
        } else {
            lookupList = list2;
            filteredList = list1;
        }
        var results = [];
        var idx = 0;
        while (idx < filteredList.length) {
            if (_containsWith(pred, filteredList[idx], lookupList)) {
                results[results.length] = filteredList[idx];
            }
            idx += 1;
        }
        return uniqWith(pred, results);
    });

    /**
     * Transforms the items of the list with the transducer and appends the
     * transformed items to the accumulator using an appropriate iterator function
     * based on the accumulator type.
     *
     * The accumulator can be an array, string, object or a transformer. Iterated
     * items will be appended to arrays and concatenated to strings. Objects will
     * be merged directly or 2-item arrays will be merged as key, value pairs.
     *
     * The accumulator can also be a transformer object that provides a 2-arity
     * reducing iterator function, step, 0-arity initial value function, init, and
     * 1-arity result extraction function result. The step function is used as the
     * iterator function in reduce. The result function is used to convert the
     * final accumulator into the return type and in most cases is R.identity. The
     * init function is used to provide the initial accumulator.
     *
     * The iteration is performed with R.reduce after initializing the transducer.
     *
     * @func
     * @memberOf R
     * @since v0.12.0
     * @category List
     * @sig a -> (b -> b) -> [c] -> a
     * @param {*} acc The initial accumulator value.
     * @param {Function} xf The transducer function. Receives a transformer and returns a transformer.
     * @param {Array} list The list to iterate over.
     * @return {*} The final, accumulated value.
     * @example
     *
     *      var numbers = [1, 2, 3, 4];
     *      var transducer = R.compose(R.map(R.add(1)), R.take(2));
     *
     *      R.into([], transducer, numbers); //=> [2, 3]
     *
     *      var intoArray = R.into([]);
     *      intoArray(transducer, numbers); //=> [2, 3]
     */
    var into = _curry3(function into(acc, xf, list) {
        return _isTransformer(acc) ? _reduce(xf(acc), acc['@@transducer/init'](), list) : _reduce(xf(_stepCat(acc)), _clone(acc, [], [], false), list);
    });

    /**
     * Same as R.invertObj, however this accounts for objects with duplicate values
     * by putting the values into an array.
     *
     * @func
     * @memberOf R
     * @since v0.9.0
     * @category Object
     * @sig {s: x} -> {x: [ s, ... ]}
     * @param {Object} obj The object or array to invert
     * @return {Object} out A new object with keys
     * in an array.
     * @example
     *
     *      var raceResultsByFirstName = {
     *        first: 'alice',
     *        second: 'jake',
     *        third: 'alice',
     *      };
     *      R.invert(raceResultsByFirstName);
     *      //=> { 'alice': ['first', 'third'], 'jake':['second'] }
     */
    var invert = _curry1(function invert(obj) {
        var props = keys(obj);
        var len = props.length;
        var idx = 0;
        var out = {};
        while (idx < len) {
            var key = props[idx];
            var val = obj[key];
            var list = _has(val, out) ? out[val] : out[val] = [];
            list[list.length] = key;
            idx += 1;
        }
        return out;
    });

    /**
     * Returns a new object with the keys of the given object as values, and the
     * values of the given object, which are coerced to strings, as keys. Note
     * that the last key found is preferred when handling the same value.
     *
     * @func
     * @memberOf R
     * @since v0.9.0
     * @category Object
     * @sig {s: x} -> {x: s}
     * @param {Object} obj The object or array to invert
     * @return {Object} out A new object
     * @example
     *
     *      var raceResults = {
     *        first: 'alice',
     *        second: 'jake'
     *      };
     *      R.invertObj(raceResults);
     *      //=> { 'alice': 'first', 'jake':'second' }
     *
     *      // Alternatively:
     *      var raceResults = ['alice', 'jake'];
     *      R.invertObj(raceResults);
     *      //=> { 'alice': '0', 'jake':'1' }
     */
    var invertObj = _curry1(function invertObj(obj) {
        var props = keys(obj);
        var len = props.length;
        var idx = 0;
        var out = {};
        while (idx < len) {
            var key = props[idx];
            out[obj[key]] = key;
            idx += 1;
        }
        return out;
    });

    /**
     * Returns `true` if the given value is its type's empty value; `false`
     * otherwise.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Logic
     * @sig a -> Boolean
     * @param {*} x
     * @return {Boolean}
     * @see R.empty
     * @example
     *
     *      R.isEmpty([1, 2, 3]);   //=> false
     *      R.isEmpty([]);          //=> true
     *      R.isEmpty('');          //=> true
     *      R.isEmpty(null);        //=> false
     *      R.isEmpty({});          //=> true
     *      R.isEmpty({length: 0}); //=> false
     */
    var isEmpty = _curry1(function isEmpty(x) {
        return x != null && equals(x, empty(x));
    });

    /**
     * Returns the last element of the given list or string.
     *
     * @func
     * @memberOf R
     * @since v0.1.4
     * @category List
     * @sig [a] -> a | Undefined
     * @sig String -> String
     * @param {*} list
     * @return {*}
     * @see R.init, R.head, R.tail
     * @example
     *
     *      R.last(['fi', 'fo', 'fum']); //=> 'fum'
     *      R.last([]); //=> undefined
     *
     *      R.last('abc'); //=> 'c'
     *      R.last(''); //=> ''
     */
    var last = nth(-1);

    /**
     * Returns the position of the last occurrence of an item in an array, or -1 if
     * the item is not included in the array. `R.equals` is used to determine
     * equality.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig a -> [a] -> Number
     * @param {*} target The item to find.
     * @param {Array} xs The array to search in.
     * @return {Number} the index of the target, or -1 if the target is not found.
     * @see R.indexOf
     * @example
     *
     *      R.lastIndexOf(3, [-1,3,3,0,1,2,3,4]); //=> 6
     *      R.lastIndexOf(10, [1,2,3,4]); //=> -1
     */
    var lastIndexOf = _curry2(function lastIndexOf(target, xs) {
        if (typeof xs.lastIndexOf === 'function' && !_isArray(xs)) {
            return xs.lastIndexOf(target);
        } else {
            var idx = xs.length - 1;
            while (idx >= 0) {
                if (equals(xs[idx], target)) {
                    return idx;
                }
                idx -= 1;
            }
            return -1;
        }
    });

    /**
     * Takes a function and
     * a [functor](https://github.com/fantasyland/fantasy-land#functor),
     * applies the function to each of the functor's values, and returns
     * a functor of the same shape.
     *
     * Ramda provides suitable `map` implementations for `Array` and `Object`,
     * so this function may be applied to `[1, 2, 3]` or `{x: 1, y: 2, z: 3}`.
     *
     * Dispatches to the `map` method of the second argument, if present.
     *
     * Acts as a transducer if a transformer is given in list position.
     *
     * Also treats functions as functors and will compose them together.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig Functor f => (a -> b) -> f a -> f b
     * @param {Function} fn The function to be called on every element of the input `list`.
     * @param {Array} list The list to be iterated over.
     * @return {Array} The new list.
     * @see R.transduce, R.addIndex
     * @example
     *
     *      var double = x => x * 2;
     *
     *      R.map(double, [1, 2, 3]); //=> [2, 4, 6]
     *
     *      R.map(double, {x: 1, y: 2, z: 3}); //=> {x: 2, y: 4, z: 6}
     */
    var map = _curry2(_dispatchable('map', _xmap, function map(fn, functor) {
        switch (Object.prototype.toString.call(functor)) {
        case '[object Function]':
            return curryN(functor.length, function () {
                return fn.call(this, functor.apply(this, arguments));
            });
        case '[object Object]':
            return _reduce(function (acc, key) {
                acc[key] = fn(functor[key]);
                return acc;
            }, {}, keys(functor));
        default:
            return _map(fn, functor);
        }
    }));

    /**
     * An Object-specific version of `map`. The function is applied to three
     * arguments: *(value, key, obj)*. If only the value is significant, use
     * `map` instead.
     *
     * @func
     * @memberOf R
     * @since v0.9.0
     * @category Object
     * @sig ((*, String, Object) -> *) -> Object -> Object
     * @param {Function} fn
     * @param {Object} obj
     * @return {Object}
     * @see R.map
     * @example
     *
     *      var values = { x: 1, y: 2, z: 3 };
     *      var prependKeyAndDouble = (num, key, obj) => key + (num * 2);
     *
     *      R.mapObjIndexed(prependKeyAndDouble, values); //=> { x: 'x2', y: 'y4', z: 'z6' }
     */
    var mapObjIndexed = _curry2(function mapObjIndexed(fn, obj) {
        return _reduce(function (acc, key) {
            acc[key] = fn(obj[key], key, obj);
            return acc;
        }, {}, keys(obj));
    });

    /**
     * Creates a new object with the own properties of the two provided objects. If
     * a key exists in both objects, the provided function is applied to the values
     * associated with the key in each object, with the result being used as the
     * value associated with the key in the returned object. The key will be
     * excluded from the returned object if the resulting value is `undefined`.
     *
     * @func
     * @memberOf R
     * @since v0.19.0
     * @category Object
     * @sig (a -> a -> a) -> {a} -> {a} -> {a}
     * @param {Function} fn
     * @param {Object} l
     * @param {Object} r
     * @return {Object}
     * @see R.merge, R.mergeWithKey
     * @example
     *
     *      R.mergeWith(R.concat,
     *                  { a: true, values: [10, 20] },
     *                  { b: true, values: [15, 35] });
     *      //=> { a: true, b: true, values: [10, 20, 15, 35] }
     */
    var mergeWith = _curry3(function mergeWith(fn, l, r) {
        return mergeWithKey(function (_, _l, _r) {
            return fn(_l, _r);
        }, l, r);
    });

    /**
     * Takes a function `f` and a list of arguments, and returns a function `g`.
     * When applied, `g` returns the result of applying `f` to the arguments
     * provided initially followed by the arguments provided to `g`.
     *
     * @func
     * @memberOf R
     * @since v0.10.0
     * @category Function
     * @sig ((a, b, c, ..., n) -> x) -> [a, b, c, ...] -> ((d, e, f, ..., n) -> x)
     * @param {Function} f
     * @param {Array} args
     * @return {Function}
     * @see R.partialRight
     * @example
     *
     *      var multiply = (a, b) => a * b;
     *      var double = R.partial(multiply, [2]);
     *      double(2); //=> 4
     *
     *      var greet = (salutation, title, firstName, lastName) =>
     *        salutation + ', ' + title + ' ' + firstName + ' ' + lastName + '!';
     *
     *      var sayHello = R.partial(greet, ['Hello']);
     *      var sayHelloToMs = R.partial(sayHello, ['Ms.']);
     *      sayHelloToMs('Jane', 'Jones'); //=> 'Hello, Ms. Jane Jones!'
     */
    var partial = _createPartialApplicator(_concat);

    /**
     * Takes a function `f` and a list of arguments, and returns a function `g`.
     * When applied, `g` returns the result of applying `f` to the arguments
     * provided to `g` followed by the arguments provided initially.
     *
     * @func
     * @memberOf R
     * @since v0.10.0
     * @category Function
     * @sig ((a, b, c, ..., n) -> x) -> [d, e, f, ..., n] -> ((a, b, c, ...) -> x)
     * @param {Function} f
     * @param {Array} args
     * @return {Function}
     * @see R.partial
     * @example
     *
     *      var greet = (salutation, title, firstName, lastName) =>
     *        salutation + ', ' + title + ' ' + firstName + ' ' + lastName + '!';
     *
     *      var greetMsJaneJones = R.partialRight(greet, ['Ms.', 'Jane', 'Jones']);
     *
     *      greetMsJaneJones('Hello'); //=> 'Hello, Ms. Jane Jones!'
     */
    var partialRight = _createPartialApplicator(flip(_concat));

    /**
     * Determines whether a nested path on an object has a specific value, in
     * `R.equals` terms. Most likely used to filter a list.
     *
     * @func
     * @memberOf R
     * @since v0.7.0
     * @category Relation
     * @sig [String] -> * -> {String: *} -> Boolean
     * @param {Array} path The path of the nested property to use
     * @param {*} val The value to compare the nested property with
     * @param {Object} obj The object to check the nested property in
     * @return {Boolean} `true` if the value equals the nested object property,
     *         `false` otherwise.
     * @example
     *
     *      var user1 = { address: { zipCode: 90210 } };
     *      var user2 = { address: { zipCode: 55555 } };
     *      var user3 = { name: 'Bob' };
     *      var users = [ user1, user2, user3 ];
     *      var isFamous = R.pathEq(['address', 'zipCode'], 90210);
     *      R.filter(isFamous, users); //=> [ user1 ]
     */
    var pathEq = _curry3(function pathEq(_path, val, obj) {
        return equals(path(_path, obj), val);
    });

    /**
     * Returns a new list by plucking the same named property off all objects in
     * the list supplied.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig k -> [{k: v}] -> [v]
     * @param {Number|String} key The key name to pluck off of each object.
     * @param {Array} list The array to consider.
     * @return {Array} The list of values for the given key.
     * @see R.props
     * @example
     *
     *      R.pluck('a')([{a: 1}, {a: 2}]); //=> [1, 2]
     *      R.pluck(0)([[1, 2], [3, 4]]);   //=> [1, 3]
     */
    var pluck = _curry2(function pluck(p, list) {
        return map(prop(p), list);
    });

    /**
     * Reasonable analog to SQL `select` statement.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Object
     * @category Relation
     * @sig [k] -> [{k: v}] -> [{k: v}]
     * @param {Array} props The property names to project
     * @param {Array} objs The objects to query
     * @return {Array} An array of objects with just the `props` properties.
     * @example
     *
     *      var abby = {name: 'Abby', age: 7, hair: 'blond', grade: 2};
     *      var fred = {name: 'Fred', age: 12, hair: 'brown', grade: 7};
     *      var kids = [abby, fred];
     *      R.project(['name', 'grade'], kids); //=> [{name: 'Abby', grade: 2}, {name: 'Fred', grade: 7}]
     */
    // passing `identity` gives correct arity
    var project = useWith(_map, [
        pickAll,
        identity
    ]);

    /**
     * Returns `true` if the specified object property is equal, in `R.equals`
     * terms, to the given value; `false` otherwise.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Relation
     * @sig String -> a -> Object -> Boolean
     * @param {String} name
     * @param {*} val
     * @param {*} obj
     * @return {Boolean}
     * @see R.equals, R.propSatisfies
     * @example
     *
     *      var abby = {name: 'Abby', age: 7, hair: 'blond'};
     *      var fred = {name: 'Fred', age: 12, hair: 'brown'};
     *      var rusty = {name: 'Rusty', age: 10, hair: 'brown'};
     *      var alois = {name: 'Alois', age: 15, disposition: 'surly'};
     *      var kids = [abby, fred, rusty, alois];
     *      var hasBrownHair = R.propEq('hair', 'brown');
     *      R.filter(hasBrownHair, kids); //=> [fred, rusty]
     */
    var propEq = _curry3(function propEq(name, val, obj) {
        return propSatisfies(equals(val), name, obj);
    });

    /**
     * Returns `true` if the specified object property is of the given type;
     * `false` otherwise.
     *
     * @func
     * @memberOf R
     * @since v0.16.0
     * @category Type
     * @sig Type -> String -> Object -> Boolean
     * @param {Function} type
     * @param {String} name
     * @param {*} obj
     * @return {Boolean}
     * @see R.is, R.propSatisfies
     * @example
     *
     *      R.propIs(Number, 'x', {x: 1, y: 2});  //=> true
     *      R.propIs(Number, 'x', {x: 'foo'});    //=> false
     *      R.propIs(Number, 'x', {});            //=> false
     */
    var propIs = _curry3(function propIs(type, name, obj) {
        return propSatisfies(is(type), name, obj);
    });

    /**
     * Returns a single item by iterating through the list, successively calling
     * the iterator function and passing it an accumulator value and the current
     * value from the array, and then passing the result to the next call.
     *
     * The iterator function receives two values: *(acc, value)*. It may use
     * `R.reduced` to shortcut the iteration.
     *
     * Note: `R.reduce` does not skip deleted or unassigned indices (sparse
     * arrays), unlike the native `Array.prototype.reduce` method. For more details
     * on this behavior, see:
     * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce#Description
     *
     * Dispatches to the `reduce` method of the third argument, if present.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig ((a, b) -> a) -> a -> [b] -> a
     * @param {Function} fn The iterator function. Receives two values, the accumulator and the
     *        current element from the array.
     * @param {*} acc The accumulator value.
     * @param {Array} list The list to iterate over.
     * @return {*} The final, accumulated value.
     * @see R.reduced, R.addIndex
     * @example
     *
     *      var numbers = [1, 2, 3];
     *      var add = (a, b) => a + b;
     *
     *      R.reduce(add, 10, numbers); //=> 16
     */
    var reduce = _curry3(_reduce);

    /**
     * Groups the elements of the list according to the result of calling
     * the String-returning function `keyFn` on each element and reduces the elements
     * of each group to a single value via the reducer function `valueFn`.
     *
     * This function is basically a more general `groupBy` function.
     *
     * @func
     * @memberOf R
     * @since v0.20.0
     * @category List
     * @sig ((a, b) -> a) -> a -> (b -> String) -> [b] -> {String: a}
     * @param {Function} valueFn The function that reduces the elements of each group to a single
     *        value. Receives two values, accumulator for a particular group and the current element.
     * @param {*} acc The (initial) accumulator value for each group.
     * @param {Function} keyFn The function that maps the list's element into a key.
     * @param {Array} list The array to group.
     * @return {Object} An object with the output of `keyFn` for keys, mapped to the output of
     *         `valueFn` for elements which produced that key when passed to `keyFn`.
     * @see R.groupBy, R.reduce
     * @example
     *
     *      var reduceToNamesBy = R.reduceBy((acc, student) => acc.concat(student.name), []);
     *      var namesByGrade = reduceToNamesBy(function(student) {
     *        var score = student.score;
     *        return score < 65 ? 'F' :
     *               score < 70 ? 'D' :
     *               score < 80 ? 'C' :
     *               score < 90 ? 'B' : 'A';
     *      });
     *      var students = [{name: 'Lucy', score: 92},
     *                      {name: 'Drew', score: 85},
     *                      // ...
     *                      {name: 'Bart', score: 62}];
     *      namesByGrade(students);
     *      // {
     *      //   'A': ['Lucy'],
     *      //   'B': ['Drew']
     *      //   // ...,
     *      //   'F': ['Bart']
     *      // }
     */
    var reduceBy = _curryN(4, [], function reduceBy(valueFn, valueAcc, keyFn, list) {
        return _reduce(function (acc, elt) {
            var key = keyFn(elt);
            acc[key] = valueFn(_has(key, acc) ? acc[key] : valueAcc, elt);
            return acc;
        }, {}, list);
    });

    /**
     * The complement of `filter`.
     *
     * Acts as a transducer if a transformer is given in list position.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig Filterable f => (a -> Boolean) -> f a -> f a
     * @param {Function} pred
     * @param {Array} filterable
     * @return {Array}
     * @see R.filter, R.transduce, R.addIndex
     * @example
     *
     *      var isOdd = (n) => n % 2 === 1;
     *
     *      R.reject(isOdd, [1, 2, 3, 4]); //=> [2, 4]
     *
     *      R.reject(isOdd, {a: 1, b: 2, c: 3, d: 4}); //=> {b: 2, d: 4}
     */
    var reject = _curry2(function reject(pred, filterable) {
        return filter(_complement(pred), filterable);
    });

    /**
     * Returns a fixed list of size `n` containing a specified identical value.
     *
     * @func
     * @memberOf R
     * @since v0.1.1
     * @category List
     * @sig a -> n -> [a]
     * @param {*} value The value to repeat.
     * @param {Number} n The desired size of the output list.
     * @return {Array} A new array containing `n` `value`s.
     * @example
     *
     *      R.repeat('hi', 5); //=> ['hi', 'hi', 'hi', 'hi', 'hi']
     *
     *      var obj = {};
     *      var repeatedObjs = R.repeat(obj, 5); //=> [{}, {}, {}, {}, {}]
     *      repeatedObjs[0] === repeatedObjs[1]; //=> true
     */
    var repeat = _curry2(function repeat(value, n) {
        return times(always(value), n);
    });

    /**
     * Adds together all the elements of a list.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Math
     * @sig [Number] -> Number
     * @param {Array} list An array of numbers
     * @return {Number} The sum of all the numbers in the list.
     * @see R.reduce
     * @example
     *
     *      R.sum([2,4,6,8,100,1]); //=> 121
     */
    var sum = reduce(add, 0);

    /**
     * Returns a new list containing the last `n` elements of the given list.
     * If `n > list.length`, returns a list of `list.length` elements.
     *
     * @func
     * @memberOf R
     * @since v0.16.0
     * @category List
     * @sig Number -> [a] -> [a]
     * @sig Number -> String -> String
     * @param {Number} n The number of elements to return.
     * @param {Array} xs The collection to consider.
     * @return {Array}
     * @see R.dropLast
     * @example
     *
     *      R.takeLast(1, ['foo', 'bar', 'baz']); //=> ['baz']
     *      R.takeLast(2, ['foo', 'bar', 'baz']); //=> ['bar', 'baz']
     *      R.takeLast(3, ['foo', 'bar', 'baz']); //=> ['foo', 'bar', 'baz']
     *      R.takeLast(4, ['foo', 'bar', 'baz']); //=> ['foo', 'bar', 'baz']
     *      R.takeLast(3, 'ramda');               //=> 'mda'
     */
    var takeLast = _curry2(function takeLast(n, xs) {
        return drop(n >= 0 ? xs.length - n : 0, xs);
    });

    /**
     * Initializes a transducer using supplied iterator function. Returns a single
     * item by iterating through the list, successively calling the transformed
     * iterator function and passing it an accumulator value and the current value
     * from the array, and then passing the result to the next call.
     *
     * The iterator function receives two values: *(acc, value)*. It will be
     * wrapped as a transformer to initialize the transducer. A transformer can be
     * passed directly in place of an iterator function. In both cases, iteration
     * may be stopped early with the `R.reduced` function.
     *
     * A transducer is a function that accepts a transformer and returns a
     * transformer and can be composed directly.
     *
     * A transformer is an an object that provides a 2-arity reducing iterator
     * function, step, 0-arity initial value function, init, and 1-arity result
     * extraction function, result. The step function is used as the iterator
     * function in reduce. The result function is used to convert the final
     * accumulator into the return type and in most cases is R.identity. The init
     * function can be used to provide an initial accumulator, but is ignored by
     * transduce.
     *
     * The iteration is performed with R.reduce after initializing the transducer.
     *
     * @func
     * @memberOf R
     * @since v0.12.0
     * @category List
     * @sig (c -> c) -> (a,b -> a) -> a -> [b] -> a
     * @param {Function} xf The transducer function. Receives a transformer and returns a transformer.
     * @param {Function} fn The iterator function. Receives two values, the accumulator and the
     *        current element from the array. Wrapped as transformer, if necessary, and used to
     *        initialize the transducer
     * @param {*} acc The initial accumulator value.
     * @param {Array} list The list to iterate over.
     * @return {*} The final, accumulated value.
     * @see R.reduce, R.reduced, R.into
     * @example
     *
     *      var numbers = [1, 2, 3, 4];
     *      var transducer = R.compose(R.map(R.add(1)), R.take(2));
     *
     *      R.transduce(transducer, R.flip(R.append), [], numbers); //=> [2, 3]
     */
    var transduce = curryN(4, function transduce(xf, fn, acc, list) {
        return _reduce(xf(typeof fn === 'function' ? _xwrap(fn) : fn), acc, list);
    });

    /**
     * Combines two lists into a set (i.e. no duplicates) composed of the elements
     * of each list. Duplication is determined according to the value returned by
     * applying the supplied predicate to two list elements.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Relation
     * @sig (a -> a -> Boolean) -> [*] -> [*] -> [*]
     * @param {Function} pred A predicate used to test whether two items are equal.
     * @param {Array} list1 The first list.
     * @param {Array} list2 The second list.
     * @return {Array} The first and second lists concatenated, with
     *         duplicates removed.
     * @see R.union
     * @example
     *
     *      var l1 = [{a: 1}, {a: 2}];
     *      var l2 = [{a: 1}, {a: 4}];
     *      R.unionWith(R.eqBy(R.prop('a')), l1, l2); //=> [{a: 1}, {a: 2}, {a: 4}]
     */
    var unionWith = _curry3(function unionWith(pred, list1, list2) {
        return uniqWith(pred, _concat(list1, list2));
    });

    /**
     * Takes a spec object and a test object; returns true if the test satisfies
     * the spec, false otherwise. An object satisfies the spec if, for each of the
     * spec's own properties, accessing that property of the object gives the same
     * value (in `R.equals` terms) as accessing that property of the spec.
     *
     * `whereEq` is a specialization of [`where`](#where).
     *
     * @func
     * @memberOf R
     * @since v0.14.0
     * @category Object
     * @sig {String: *} -> {String: *} -> Boolean
     * @param {Object} spec
     * @param {Object} testObj
     * @return {Boolean}
     * @see R.where
     * @example
     *
     *      // pred :: Object -> Boolean
     *      var pred = R.whereEq({a: 1, b: 2});
     *
     *      pred({a: 1});              //=> false
     *      pred({a: 1, b: 2});        //=> true
     *      pred({a: 1, b: 2, c: 3});  //=> true
     *      pred({a: 1, b: 1});        //=> false
     */
    var whereEq = _curry2(function whereEq(spec, testObj) {
        return where(map(equals, spec), testObj);
    });

    var _flatCat = function () {
        var preservingReduced = function (xf) {
            return {
                '@@transducer/init': _xfBase.init,
                '@@transducer/result': function (result) {
                    return xf['@@transducer/result'](result);
                },
                '@@transducer/step': function (result, input) {
                    var ret = xf['@@transducer/step'](result, input);
                    return ret['@@transducer/reduced'] ? _forceReduced(ret) : ret;
                }
            };
        };
        return function _xcat(xf) {
            var rxf = preservingReduced(xf);
            return {
                '@@transducer/init': _xfBase.init,
                '@@transducer/result': function (result) {
                    return rxf['@@transducer/result'](result);
                },
                '@@transducer/step': function (result, input) {
                    return !isArrayLike(input) ? _reduce(rxf, result, [input]) : _reduce(rxf, result, input);
                }
            };
        };
    }();

    // Array.prototype.indexOf doesn't exist below IE9
    // manually crawl the list to distinguish between +0 and -0
    // NaN
    // non-zero numbers can utilise Set
    // all these types can utilise Set
    // null can utilise Set
    // anything else not covered above, defer to R.equals
    var _indexOf = function _indexOf(list, a, idx) {
        var inf, item;
        // Array.prototype.indexOf doesn't exist below IE9
        if (typeof list.indexOf === 'function') {
            switch (typeof a) {
            case 'number':
                if (a === 0) {
                    // manually crawl the list to distinguish between +0 and -0
                    inf = 1 / a;
                    while (idx < list.length) {
                        item = list[idx];
                        if (item === 0 && 1 / item === inf) {
                            return idx;
                        }
                        idx += 1;
                    }
                    return -1;
                } else if (a !== a) {
                    // NaN
                    while (idx < list.length) {
                        item = list[idx];
                        if (typeof item === 'number' && item !== item) {
                            return idx;
                        }
                        idx += 1;
                    }
                    return -1;
                }
                // non-zero numbers can utilise Set
                return list.indexOf(a, idx);
            // all these types can utilise Set
            case 'string':
            case 'boolean':
            case 'function':
            case 'undefined':
                return list.indexOf(a, idx);
            case 'object':
                if (a === null) {
                    // null can utilise Set
                    return list.indexOf(a, idx);
                }
            }
        }
        // anything else not covered above, defer to R.equals
        while (idx < list.length) {
            if (equals(list[idx], a)) {
                return idx;
            }
            idx += 1;
        }
        return -1;
    };

    var _xchain = _curry2(function _xchain(f, xf) {
        return map(f, _flatCat(xf));
    });

    /**
     * Takes a list of predicates and returns a predicate that returns true for a
     * given list of arguments if every one of the provided predicates is satisfied
     * by those arguments.
     *
     * The function returned is a curried function whose arity matches that of the
     * highest-arity predicate.
     *
     * @func
     * @memberOf R
     * @since v0.9.0
     * @category Logic
     * @sig [(*... -> Boolean)] -> (*... -> Boolean)
     * @param {Array} preds
     * @return {Function}
     * @see R.anyPass
     * @example
     *
     *      var isQueen = R.propEq('rank', 'Q');
     *      var isSpade = R.propEq('suit', '♠︎');
     *      var isQueenOfSpades = R.allPass([isQueen, isSpade]);
     *
     *      isQueenOfSpades({rank: 'Q', suit: '♣︎'}); //=> false
     *      isQueenOfSpades({rank: 'Q', suit: '♠︎'}); //=> true
     */
    var allPass = _curry1(function allPass(preds) {
        return curryN(reduce(max, 0, pluck('length', preds)), function () {
            var idx = 0;
            var len = preds.length;
            while (idx < len) {
                if (!preds[idx].apply(this, arguments)) {
                    return false;
                }
                idx += 1;
            }
            return true;
        });
    });

    /**
     * Returns `true` if all elements are unique, in `R.equals` terms, otherwise
     * `false`.
     *
     * @func
     * @memberOf R
     * @since v0.18.0
     * @category List
     * @sig [a] -> Boolean
     * @param {Array} list The array to consider.
     * @return {Boolean} `true` if all elements are unique, else `false`.
     * @deprecated since v0.20.0
     * @example
     *
     *      R.allUniq(['1', 1]); //=> true
     *      R.allUniq([1, 1]);   //=> false
     *      R.allUniq([[42], [42]]); //=> false
     */
    var allUniq = _curry1(function allUniq(list) {
        var len = list.length;
        var idx = 0;
        while (idx < len) {
            if (_indexOf(list, list[idx], idx + 1) >= 0) {
                return false;
            }
            idx += 1;
        }
        return true;
    });

    /**
     * Takes a list of predicates and returns a predicate that returns true for a
     * given list of arguments if at least one of the provided predicates is
     * satisfied by those arguments.
     *
     * The function returned is a curried function whose arity matches that of the
     * highest-arity predicate.
     *
     * @func
     * @memberOf R
     * @since v0.9.0
     * @category Logic
     * @sig [(*... -> Boolean)] -> (*... -> Boolean)
     * @param {Array} preds
     * @return {Function}
     * @see R.allPass
     * @example
     *
     *      var gte = R.anyPass([R.gt, R.equals]);
     *
     *      gte(3, 2); //=> true
     *      gte(2, 2); //=> true
     *      gte(2, 3); //=> false
     */
    var anyPass = _curry1(function anyPass(preds) {
        return curryN(reduce(max, 0, pluck('length', preds)), function () {
            var idx = 0;
            var len = preds.length;
            while (idx < len) {
                if (preds[idx].apply(this, arguments)) {
                    return true;
                }
                idx += 1;
            }
            return false;
        });
    });

    /**
     * ap applies a list of functions to a list of values.
     *
     * Dispatches to the `ap` method of the second argument, if present. Also
     * treats functions as applicatives.
     *
     * @func
     * @memberOf R
     * @since v0.3.0
     * @category Function
     * @sig [f] -> [a] -> [f a]
     * @param {Array} fns An array of functions
     * @param {Array} vs An array of values
     * @return {Array} An array of results of applying each of `fns` to all of `vs` in turn.
     * @example
     *
     *      R.ap([R.multiply(2), R.add(3)], [1,2,3]); //=> [2, 4, 6, 4, 5, 6]
     */
    // else
    var ap = _curry2(function ap(applicative, fn) {
        return typeof applicative.ap === 'function' ? applicative.ap(fn) : typeof applicative === 'function' ? curryN(Math.max(applicative.length, fn.length), function () {
            return applicative.apply(this, arguments)(fn.apply(this, arguments));
        }) : // else
        _reduce(function (acc, f) {
            return _concat(acc, map(f, fn));
        }, [], applicative);
    });

    /**
     * Given a spec object recursively mapping properties to functions, creates a
     * function producing an object of the same structure, by mapping each property
     * to the result of calling its associated function with the supplied arguments.
     *
     * @func
     * @memberOf R
     * @since v0.20.0
     * @category Function
     * @sig {k: ((a, b, ..., m) -> v)} -> ((a, b, ..., m) -> {k: v})
     * @param {Object} spec an object recursively mapping properties to functions for
     *        producing the values for these properties.
     * @return {Function} A function that returns an object of the same structure
     * as `spec', with each property set to the value returned by calling its
     * associated function with the supplied arguments.
     * @see R.juxt
     * @example
     *
     *      var getMetrics = R.applySpec({
     *                                      sum: R.add,
     *                                      nested: { mul: R.multiply }
     *                                   });
     *      getMetrics(2, 4); // => { sum: 6, nested: { mul: 8 } }
     */
    var applySpec = _curry1(function applySpec(spec) {
        spec = map(function (v) {
            return typeof v == 'function' ? v : applySpec(v);
        }, spec);
        return curryN(reduce(max, 0, pluck('length', values(spec))), function () {
            var args = arguments;
            return map(function (f) {
                return apply(f, args);
            }, spec);
        });
    });

    /**
     * Returns the result of calling its first argument with the remaining
     * arguments. This is occasionally useful as a converging function for
     * `R.converge`: the left branch can produce a function while the right branch
     * produces a value to be passed to that function as an argument.
     *
     * @func
     * @memberOf R
     * @since v0.9.0
     * @category Function
     * @sig (*... -> a),*... -> a
     * @param {Function} fn The function to apply to the remaining arguments.
     * @param {...*} args Any number of positional arguments.
     * @return {*}
     * @see R.apply
     * @example
     *
     *      var indentN = R.pipe(R.times(R.always(' ')),
     *                           R.join(''),
     *                           R.replace(/^(?!$)/gm));
     *
     *      var format = R.converge(R.call, [
     *                                  R.pipe(R.prop('indent'), indentN),
     *                                  R.prop('value')
     *                              ]);
     *
     *      format({indent: 2, value: 'foo\nbar\nbaz\n'}); //=> '  foo\n  bar\n  baz\n'
     */
    var call = curry(function call(fn) {
        return fn.apply(this, _slice(arguments, 1));
    });

    /**
     * `chain` maps a function over a list and concatenates the results. `chain`
     * is also known as `flatMap` in some libraries
     *
     * Dispatches to the `chain` method of the second argument, if present.
     *
     * @func
     * @memberOf R
     * @since v0.3.0
     * @category List
     * @sig (a -> [b]) -> [a] -> [b]
     * @param {Function} fn
     * @param {Array} list
     * @return {Array}
     * @example
     *
     *      var duplicate = n => [n, n];
     *      R.chain(duplicate, [1, 2, 3]); //=> [1, 1, 2, 2, 3, 3]
     */
    var chain = _curry2(_dispatchable('chain', _xchain, function chain(fn, monad) {
        if (typeof monad === 'function') {
            return function () {
                return monad.call(this, fn.apply(this, arguments)).apply(this, arguments);
            };
        }
        return _makeFlat(false)(map(fn, monad));
    }));

    /**
     * Returns a function, `fn`, which encapsulates if/else-if/else logic.
     * `R.cond` takes a list of [predicate, transform] pairs. All of the arguments
     * to `fn` are applied to each of the predicates in turn until one returns a
     * "truthy" value, at which point `fn` returns the result of applying its
     * arguments to the corresponding transformer. If none of the predicates
     * matches, `fn` returns undefined.
     *
     * @func
     * @memberOf R
     * @since v0.6.0
     * @category Logic
     * @sig [[(*... -> Boolean),(*... -> *)]] -> (*... -> *)
     * @param {Array} pairs
     * @return {Function}
     * @example
     *
     *      var fn = R.cond([
     *        [R.equals(0),   R.always('water freezes at 0°C')],
     *        [R.equals(100), R.always('water boils at 100°C')],
     *        [R.T,           temp => 'nothing special happens at ' + temp + '°C']
     *      ]);
     *      fn(0); //=> 'water freezes at 0°C'
     *      fn(50); //=> 'nothing special happens at 50°C'
     *      fn(100); //=> 'water boils at 100°C'
     */
    var cond = _curry1(function cond(pairs) {
        var arity = reduce(max, 0, map(function (pair) {
            return pair[0].length;
        }, pairs));
        return _arity(arity, function () {
            var idx = 0;
            while (idx < pairs.length) {
                if (pairs[idx][0].apply(this, arguments)) {
                    return pairs[idx][1].apply(this, arguments);
                }
                idx += 1;
            }
        });
    });

    /**
     * Wraps a constructor function inside a curried function that can be called
     * with the same arguments and returns the same type. The arity of the function
     * returned is specified to allow using variadic constructor functions.
     *
     * @func
     * @memberOf R
     * @since v0.4.0
     * @category Function
     * @sig Number -> (* -> {*}) -> (* -> {*})
     * @param {Number} n The arity of the constructor function.
     * @param {Function} Fn The constructor function to wrap.
     * @return {Function} A wrapped, curried constructor function.
     * @example
     *
     *      // Variadic constructor function
     *      var Widget = () => {
     *        this.children = Array.prototype.slice.call(arguments);
     *        // ...
     *      };
     *      Widget.prototype = {
     *        // ...
     *      };
     *      var allConfigs = [
     *        // ...
     *      ];
     *      R.map(R.constructN(1, Widget), allConfigs); // a list of Widgets
     */
    var constructN = _curry2(function constructN(n, Fn) {
        if (n > 10) {
            throw new Error('Constructor with greater than ten arguments');
        }
        if (n === 0) {
            return function () {
                return new Fn();
            };
        }
        return curry(nAry(n, function ($0, $1, $2, $3, $4, $5, $6, $7, $8, $9) {
            switch (arguments.length) {
            case 1:
                return new Fn($0);
            case 2:
                return new Fn($0, $1);
            case 3:
                return new Fn($0, $1, $2);
            case 4:
                return new Fn($0, $1, $2, $3);
            case 5:
                return new Fn($0, $1, $2, $3, $4);
            case 6:
                return new Fn($0, $1, $2, $3, $4, $5);
            case 7:
                return new Fn($0, $1, $2, $3, $4, $5, $6);
            case 8:
                return new Fn($0, $1, $2, $3, $4, $5, $6, $7);
            case 9:
                return new Fn($0, $1, $2, $3, $4, $5, $6, $7, $8);
            case 10:
                return new Fn($0, $1, $2, $3, $4, $5, $6, $7, $8, $9);
            }
        }));
    });

    /**
     * Accepts a converging function and a list of branching functions and returns
     * a new function. When invoked, this new function is applied to some
     * arguments, each branching function is applied to those same arguments. The
     * results of each branching function are passed as arguments to the converging
     * function to produce the return value.
     *
     * @func
     * @memberOf R
     * @since v0.4.2
     * @category Function
     * @sig (x1 -> x2 -> ... -> z) -> [(a -> b -> ... -> x1), (a -> b -> ... -> x2), ...] -> (a -> b -> ... -> z)
     * @param {Function} after A function. `after` will be invoked with the return values of
     *        `fn1` and `fn2` as its arguments.
     * @param {Array} functions A list of functions.
     * @return {Function} A new function.
     * @example
     *
     *      var add = (a, b) => a + b;
     *      var multiply = (a, b) => a * b;
     *      var subtract = (a, b) => a - b;
     *
     *      //≅ multiply( add(1, 2), subtract(1, 2) );
     *      R.converge(multiply, [add, subtract])(1, 2); //=> -3
     *
     *      var add3 = (a, b, c) => a + b + c;
     *      R.converge(add3, [multiply, add, subtract])(1, 2); //=> 4
     */
    var converge = _curry2(function converge(after, fns) {
        return curryN(reduce(max, 0, pluck('length', fns)), function () {
            var args = arguments;
            var context = this;
            return after.apply(context, _map(function (fn) {
                return fn.apply(context, args);
            }, fns));
        });
    });

    /**
     * Counts the elements of a list according to how many match each value of a
     * key generated by the supplied function. Returns an object mapping the keys
     * produced by `fn` to the number of occurrences in the list. Note that all
     * keys are coerced to strings because of how JavaScript objects work.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Relation
     * @sig (a -> String) -> [a] -> {*}
     * @param {Function} fn The function used to map values to keys.
     * @param {Array} list The list to count elements from.
     * @return {Object} An object mapping keys to number of occurrences in the list.
     * @example
     *
     *      var numbers = [1.0, 1.1, 1.2, 2.0, 3.0, 2.2];
     *      var letters = R.split('', 'abcABCaaaBBc');
     *      R.countBy(Math.floor)(numbers);    //=> {'1': 3, '2': 2, '3': 1}
     *      R.countBy(R.toLower)(letters);   //=> {'a': 5, 'b': 4, 'c': 3}
     */
    var countBy = reduceBy(function (acc, elem) {
        return acc + 1;
    }, 0);

    /**
     * Returns a new list without any consecutively repeating elements. Equality is
     * determined by applying the supplied predicate two consecutive elements. The
     * first element in a series of equal element is the one being preserved.
     *
     * Dispatches to the `dropRepeatsWith` method of the second argument, if present.
     *
     * Acts as a transducer if a transformer is given in list position.
     *
     * @func
     * @memberOf R
     * @since v0.14.0
     * @category List
     * @sig (a, a -> Boolean) -> [a] -> [a]
     * @param {Function} pred A predicate used to test whether two items are equal.
     * @param {Array} list The array to consider.
     * @return {Array} `list` without repeating elements.
     * @see R.transduce
     * @example
     *
     *      var l = [1, -1, 1, 3, 4, -4, -4, -5, 5, 3, 3];
     *      R.dropRepeatsWith(R.eqBy(Math.abs), l); //=> [1, 3, 4, -5, 3]
     */
    var dropRepeatsWith = _curry2(_dispatchable('dropRepeatsWith', _xdropRepeatsWith, function dropRepeatsWith(pred, list) {
        var result = [];
        var idx = 1;
        var len = list.length;
        if (len !== 0) {
            result[0] = list[0];
            while (idx < len) {
                if (!pred(last(result), list[idx])) {
                    result[result.length] = list[idx];
                }
                idx += 1;
            }
        }
        return result;
    }));

    /**
     * Takes a function and two values in its domain and returns `true` if the
     * values map to the same value in the codomain; `false` otherwise.
     *
     * @func
     * @memberOf R
     * @since v0.18.0
     * @category Relation
     * @sig (a -> b) -> a -> a -> Boolean
     * @param {Function} f
     * @param {*} x
     * @param {*} y
     * @return {Boolean}
     * @example
     *
     *      R.eqBy(Math.abs, 5, -5); //=> true
     */
    var eqBy = _curry3(function eqBy(f, x, y) {
        return equals(f(x), f(y));
    });

    /**
     * Reports whether two objects have the same value, in `R.equals` terms, for
     * the specified property. Useful as a curried predicate.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Object
     * @sig k -> {k: v} -> {k: v} -> Boolean
     * @param {String} prop The name of the property to compare
     * @param {Object} obj1
     * @param {Object} obj2
     * @return {Boolean}
     *
     * @example
     *
     *      var o1 = { a: 1, b: 2, c: 3, d: 4 };
     *      var o2 = { a: 10, b: 20, c: 3, d: 40 };
     *      R.eqProps('a', o1, o2); //=> false
     *      R.eqProps('c', o1, o2); //=> true
     */
    var eqProps = _curry3(function eqProps(prop, obj1, obj2) {
        return equals(obj1[prop], obj2[prop]);
    });

    /**
     * Splits a list into sub-lists stored in an object, based on the result of
     * calling a String-returning function on each element, and grouping the
     * results according to values returned.
     *
     * Dispatches to the `groupBy` method of the second argument, if present.
     *
     * Acts as a transducer if a transformer is given in list position.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig (a -> String) -> [a] -> {String: [a]}
     * @param {Function} fn Function :: a -> String
     * @param {Array} list The array to group
     * @return {Object} An object with the output of `fn` for keys, mapped to arrays of elements
     *         that produced that key when passed to `fn`.
     * @see R.transduce
     * @example
     *
     *      var byGrade = R.groupBy(function(student) {
     *        var score = student.score;
     *        return score < 65 ? 'F' :
     *               score < 70 ? 'D' :
     *               score < 80 ? 'C' :
     *               score < 90 ? 'B' : 'A';
     *      });
     *      var students = [{name: 'Abby', score: 84},
     *                      {name: 'Eddy', score: 58},
     *                      // ...
     *                      {name: 'Jack', score: 69}];
     *      byGrade(students);
     *      // {
     *      //   'A': [{name: 'Dianne', score: 99}],
     *      //   'B': [{name: 'Abby', score: 84}]
     *      //   // ...,
     *      //   'F': [{name: 'Eddy', score: 58}]
     *      // }
     */
    var groupBy = _curry2(_dispatchable('groupBy', _xgroupBy, reduceBy(function (acc, item) {
        if (acc == null) {
            acc = [];
        }
        acc.push(item);
        return acc;
    }, null)));

    /**
     * Given a function that generates a key, turns a list of objects into an
     * object indexing the objects by the given key. Note that if multiple
     * objects generate the same value for the indexing key only the last value
     * will be included in the generated object.
     *
     * @func
     * @memberOf R
     * @since v0.19.0
     * @category List
     * @sig (a -> String) -> [{k: v}] -> {k: {k: v}}
     * @param {Function} fn Function :: a -> String
     * @param {Array} array The array of objects to index
     * @return {Object} An object indexing each array element by the given property.
     * @example
     *
     *      var list = [{id: 'xyz', title: 'A'}, {id: 'abc', title: 'B'}];
     *      R.indexBy(R.prop('id'), list);
     *      //=> {abc: {id: 'abc', title: 'B'}, xyz: {id: 'xyz', title: 'A'}}
     */
    var indexBy = reduceBy(function (acc, elem) {
        return elem;
    }, null);

    /**
     * Returns the position of the first occurrence of an item in an array, or -1
     * if the item is not included in the array. `R.equals` is used to determine
     * equality.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig a -> [a] -> Number
     * @param {*} target The item to find.
     * @param {Array} xs The array to search in.
     * @return {Number} the index of the target, or -1 if the target is not found.
     * @see R.lastIndexOf
     * @example
     *
     *      R.indexOf(3, [1,2,3,4]); //=> 2
     *      R.indexOf(10, [1,2,3,4]); //=> -1
     */
    var indexOf = _curry2(function indexOf(target, xs) {
        return typeof xs.indexOf === 'function' && !_isArray(xs) ? xs.indexOf(target) : _indexOf(xs, target, 0);
    });

    /**
     * juxt applies a list of functions to a list of values.
     *
     * @func
     * @memberOf R
     * @since v0.19.0
     * @category Function
     * @sig [(a, b, ..., m) -> n] -> ((a, b, ..., m) -> [n])
     * @param {Array} fns An array of functions
     * @return {Function} A function that returns a list of values after applying each of the original `fns` to its parameters.
     * @see R.applySpec
     * @example
     *
     *      var range = R.juxt([Math.min, Math.max]);
     *      range(3, 4, 9, -3); //=> [-3, 9]
     */
    var juxt = _curry1(function juxt(fns) {
        return converge(_arrayOf, fns);
    });

    /**
     * Returns a lens for the given getter and setter functions. The getter "gets"
     * the value of the focus; the setter "sets" the value of the focus. The setter
     * should not mutate the data structure.
     *
     * @func
     * @memberOf R
     * @since v0.8.0
     * @category Object
     * @typedefn Lens s a = Functor f => (a -> f a) -> s -> f s
     * @sig (s -> a) -> ((a, s) -> s) -> Lens s a
     * @param {Function} getter
     * @param {Function} setter
     * @return {Lens}
     * @see R.view, R.set, R.over, R.lensIndex, R.lensProp
     * @example
     *
     *      var xLens = R.lens(R.prop('x'), R.assoc('x'));
     *
     *      R.view(xLens, {x: 1, y: 2});            //=> 1
     *      R.set(xLens, 4, {x: 1, y: 2});          //=> {x: 4, y: 2}
     *      R.over(xLens, R.negate, {x: 1, y: 2});  //=> {x: -1, y: 2}
     */
    var lens = _curry2(function lens(getter, setter) {
        return function (toFunctorFn) {
            return function (target) {
                return map(function (focus) {
                    return setter(focus, target);
                }, toFunctorFn(getter(target)));
            };
        };
    });

    /**
     * Returns a lens whose focus is the specified index.
     *
     * @func
     * @memberOf R
     * @since v0.14.0
     * @category Object
     * @typedefn Lens s a = Functor f => (a -> f a) -> s -> f s
     * @sig Number -> Lens s a
     * @param {Number} n
     * @return {Lens}
     * @see R.view, R.set, R.over
     * @example
     *
     *      var headLens = R.lensIndex(0);
     *
     *      R.view(headLens, ['a', 'b', 'c']);            //=> 'a'
     *      R.set(headLens, 'x', ['a', 'b', 'c']);        //=> ['x', 'b', 'c']
     *      R.over(headLens, R.toUpper, ['a', 'b', 'c']); //=> ['A', 'b', 'c']
     */
    var lensIndex = _curry1(function lensIndex(n) {
        return lens(nth(n), update(n));
    });

    /**
     * Returns a lens whose focus is the specified path.
     *
     * @func
     * @memberOf R
     * @since v0.19.0
     * @category Object
     * @typedefn Lens s a = Functor f => (a -> f a) -> s -> f s
     * @sig [String] -> Lens s a
     * @param {Array} path The path to use.
     * @return {Lens}
     * @see R.view, R.set, R.over
     * @example
     *
     *      var xyLens = R.lensPath(['x', 'y']);
     *
     *      R.view(xyLens, {x: {y: 2, z: 3}});            //=> 2
     *      R.set(xyLens, 4, {x: {y: 2, z: 3}});          //=> {x: {y: 4, z: 3}}
     *      R.over(xyLens, R.negate, {x: {y: 2, z: 3}});  //=> {x: {y: -2, z: 3}}
     */
    var lensPath = _curry1(function lensPath(p) {
        return lens(path(p), assocPath(p));
    });

    /**
     * Returns a lens whose focus is the specified property.
     *
     * @func
     * @memberOf R
     * @since v0.14.0
     * @category Object
     * @typedefn Lens s a = Functor f => (a -> f a) -> s -> f s
     * @sig String -> Lens s a
     * @param {String} k
     * @return {Lens}
     * @see R.view, R.set, R.over
     * @example
     *
     *      var xLens = R.lensProp('x');
     *
     *      R.view(xLens, {x: 1, y: 2});            //=> 1
     *      R.set(xLens, 4, {x: 1, y: 2});          //=> {x: 4, y: 2}
     *      R.over(xLens, R.negate, {x: 1, y: 2});  //=> {x: -1, y: 2}
     */
    var lensProp = _curry1(function lensProp(k) {
        return lens(prop(k), assoc(k));
    });

    /**
     * "lifts" a function to be the specified arity, so that it may "map over" that
     * many lists, Functions or other objects that satisfy the [FantasyLand Apply spec](https://github.com/fantasyland/fantasy-land#apply).
     *
     * @func
     * @memberOf R
     * @since v0.7.0
     * @category Function
     * @sig Number -> (*... -> *) -> ([*]... -> [*])
     * @param {Function} fn The function to lift into higher context
     * @return {Function} The lifted function.
     * @see R.lift, R.ap
     * @example
     *
     *      var madd3 = R.liftN(3, R.curryN(3, (...args) => R.sum(args)));
     *      madd3([1,2,3], [1,2,3], [1]); //=> [3, 4, 5, 4, 5, 6, 5, 6, 7]
     */
    var liftN = _curry2(function liftN(arity, fn) {
        var lifted = curryN(arity, fn);
        return curryN(arity, function () {
            return _reduce(ap, map(lifted, arguments[0]), _slice(arguments, 1));
        });
    });

    /**
     * Returns the mean of the given list of numbers.
     *
     * @func
     * @memberOf R
     * @since v0.14.0
     * @category Math
     * @sig [Number] -> Number
     * @param {Array} list
     * @return {Number}
     * @example
     *
     *      R.mean([2, 7, 9]); //=> 6
     *      R.mean([]); //=> NaN
     */
    var mean = _curry1(function mean(list) {
        return sum(list) / list.length;
    });

    /**
     * Returns the median of the given list of numbers.
     *
     * @func
     * @memberOf R
     * @since v0.14.0
     * @category Math
     * @sig [Number] -> Number
     * @param {Array} list
     * @return {Number}
     * @example
     *
     *      R.median([2, 9, 7]); //=> 7
     *      R.median([7, 2, 10, 9]); //=> 8
     *      R.median([]); //=> NaN
     */
    var median = _curry1(function median(list) {
        var len = list.length;
        if (len === 0) {
            return NaN;
        }
        var width = 2 - len % 2;
        var idx = (len - width) / 2;
        return mean(_slice(list).sort(function (a, b) {
            return a < b ? -1 : a > b ? 1 : 0;
        }).slice(idx, idx + width));
    });

    /**
     * Takes a predicate and a list or other "filterable" object and returns the
     * pair of filterable objects of the same type of elements which do and do not
     * satisfy, the predicate, respectively.
     *
     * @func
     * @memberOf R
     * @since v0.1.4
     * @category List
     * @sig Filterable f => (a -> Boolean) -> f a -> [f a, f a]
     * @param {Function} pred A predicate to determine which side the element belongs to.
     * @param {Array} filterable the list (or other filterable) to partition.
     * @return {Array} An array, containing first the subset of elements that satisfy the
     *         predicate, and second the subset of elements that do not satisfy.
     * @see R.filter, R.reject
     * @example
     *
     *      R.partition(R.contains('s'), ['sss', 'ttt', 'foo', 'bars']);
     *      // => [ [ 'sss', 'bars' ],  [ 'ttt', 'foo' ] ]
     *
     *      R.partition(R.contains('s'), { a: 'sss', b: 'ttt', foo: 'bars' });
     *      // => [ { a: 'sss', foo: 'bars' }, { b: 'ttt' }  ]
     */
    var partition = juxt([
        filter,
        reject
    ]);

    /**
     * Performs left-to-right function composition. The leftmost function may have
     * any arity; the remaining functions must be unary.
     *
     * In some libraries this function is named `sequence`.
     *
     * **Note:** The result of pipe is not automatically curried.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Function
     * @sig (((a, b, ..., n) -> o), (o -> p), ..., (x -> y), (y -> z)) -> ((a, b, ..., n) -> z)
     * @param {...Function} functions
     * @return {Function}
     * @see R.compose
     * @example
     *
     *      var f = R.pipe(Math.pow, R.negate, R.inc);
     *
     *      f(3, 4); // -(3^4) + 1
     */
    var pipe = function pipe() {
        if (arguments.length === 0) {
            throw new Error('pipe requires at least one argument');
        }
        return _arity(arguments[0].length, reduce(_pipe, arguments[0], tail(arguments)));
    };

    /**
     * Performs left-to-right composition of one or more Promise-returning
     * functions. The leftmost function may have any arity; the remaining functions
     * must be unary.
     *
     * @func
     * @memberOf R
     * @since v0.10.0
     * @category Function
     * @sig ((a -> Promise b), (b -> Promise c), ..., (y -> Promise z)) -> (a -> Promise z)
     * @param {...Function} functions
     * @return {Function}
     * @see R.composeP
     * @example
     *
     *      //  followersForUser :: String -> Promise [User]
     *      var followersForUser = R.pipeP(db.getUserById, db.getFollowers);
     */
    var pipeP = function pipeP() {
        if (arguments.length === 0) {
            throw new Error('pipeP requires at least one argument');
        }
        return _arity(arguments[0].length, reduce(_pipeP, arguments[0], tail(arguments)));
    };

    /**
     * Multiplies together all the elements of a list.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Math
     * @sig [Number] -> Number
     * @param {Array} list An array of numbers
     * @return {Number} The product of all the numbers in the list.
     * @see R.reduce
     * @example
     *
     *      R.product([2,4,6,8,100,1]); //=> 38400
     */
    var product = reduce(multiply, 1);

    /**
     * Transforms a [Traversable](https://github.com/fantasyland/fantasy-land#traversable)
     * of [Applicative](https://github.com/fantasyland/fantasy-land#applicative) into an
     * Applicative of Traversable.
     *
     * Dispatches to the `sequence` method of the second argument, if present.
     *
     * @func
     * @memberOf R
     * @since v0.19.0
     * @category List
     * @sig (Applicative f, Traversable t) => (a -> f a) -> t (f a) -> f (t a)
     * @param {Function} of
     * @param {*} traversable
     * @return {*}
     * @see R.traverse
     * @example
     *
     *      R.sequence(Maybe.of, [Just(1), Just(2), Just(3)]);   //=> Just([1, 2, 3])
     *      R.sequence(Maybe.of, [Just(1), Just(2), Nothing()]); //=> Nothing()
     *
     *      R.sequence(R.of, Just([1, 2, 3])); //=> [Just(1), Just(2), Just(3)]
     *      R.sequence(R.of, Nothing());       //=> [Nothing()]
     */
    var sequence = _curry2(function sequence(of, traversable) {
        return typeof traversable.sequence === 'function' ? traversable.sequence(of) : reduceRight(function (acc, x) {
            return ap(map(prepend, x), acc);
        }, of([]), traversable);
    });

    /**
     * Maps an [Applicative](https://github.com/fantasyland/fantasy-land#applicative)-returning
     * function over a [Traversable](https://github.com/fantasyland/fantasy-land#traversable),
     * then uses [`sequence`](#sequence) to transform the resulting Traversable of Applicative
     * into an Applicative of Traversable.
     *
     * Dispatches to the `sequence` method of the third argument, if present.
     *
     * @func
     * @memberOf R
     * @since v0.19.0
     * @category List
     * @sig (Applicative f, Traversable t) => (a -> f a) -> (a -> f b) -> t a -> f (t b)
     * @param {Function} of
     * @param {Function} f
     * @param {*} traversable
     * @return {*}
     * @see R.sequence
     * @example
     *
     *      // Returns `Nothing` if the given divisor is `0`
     *      safeDiv = n => d => d === 0 ? Nothing() : Just(n / d)
     *
     *      R.traverse(Maybe.of, safeDiv(10), [2, 4, 5]); //=> Just([5, 2.5, 2])
     *      R.traverse(Maybe.of, safeDiv(10), [2, 0, 5]); //=> Nothing
     */
    var traverse = _curry3(function traverse(of, f, traversable) {
        return sequence(of, map(f, traversable));
    });

    /**
     * Shorthand for `R.chain(R.identity)`, which removes one level of nesting from
     * any [Chain](https://github.com/fantasyland/fantasy-land#chain).
     *
     * @func
     * @memberOf R
     * @since v0.3.0
     * @category List
     * @sig Chain c => c (c a) -> c a
     * @param {*} list
     * @return {*}
     * @see R.flatten, R.chain
     * @example
     *
     *      R.unnest([1, [2], [[3]]]); //=> [1, 2, [3]]
     *      R.unnest([[1, 2], [3, 4], [5, 6]]); //=> [1, 2, 3, 4, 5, 6]
     */
    var unnest = chain(_identity);

    var _contains = function _contains(a, list) {
        return _indexOf(list, a, 0) >= 0;
    };

    //  mapPairs :: (Object, [String]) -> [String]
    var _toString = function _toString(x, seen) {
        var recur = function recur(y) {
            var xs = seen.concat([x]);
            return _contains(y, xs) ? '<Circular>' : _toString(y, xs);
        };
        //  mapPairs :: (Object, [String]) -> [String]
        var mapPairs = function (obj, keys) {
            return _map(function (k) {
                return _quote(k) + ': ' + recur(obj[k]);
            }, keys.slice().sort());
        };
        switch (Object.prototype.toString.call(x)) {
        case '[object Arguments]':
            return '(function() { return arguments; }(' + _map(recur, x).join(', ') + '))';
        case '[object Array]':
            return '[' + _map(recur, x).concat(mapPairs(x, reject(function (k) {
                return /^\d+$/.test(k);
            }, keys(x)))).join(', ') + ']';
        case '[object Boolean]':
            return typeof x === 'object' ? 'new Boolean(' + recur(x.valueOf()) + ')' : x.toString();
        case '[object Date]':
            return 'new Date(' + (isNaN(x.valueOf()) ? recur(NaN) : _quote(_toISOString(x))) + ')';
        case '[object Null]':
            return 'null';
        case '[object Number]':
            return typeof x === 'object' ? 'new Number(' + recur(x.valueOf()) + ')' : 1 / x === -Infinity ? '-0' : x.toString(10);
        case '[object String]':
            return typeof x === 'object' ? 'new String(' + recur(x.valueOf()) + ')' : _quote(x);
        case '[object Undefined]':
            return 'undefined';
        default:
            if (typeof x.toString === 'function') {
                var repr = x.toString();
                if (repr !== '[object Object]') {
                    return repr;
                }
            }
            return '{' + mapPairs(x, keys(x)).join(', ') + '}';
        }
    };

    /**
     * Performs right-to-left function composition. The rightmost function may have
     * any arity; the remaining functions must be unary.
     *
     * **Note:** The result of compose is not automatically curried.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Function
     * @sig ((y -> z), (x -> y), ..., (o -> p), ((a, b, ..., n) -> o)) -> ((a, b, ..., n) -> z)
     * @param {...Function} functions
     * @return {Function}
     * @see R.pipe
     * @example
     *
     *      var f = R.compose(R.inc, R.negate, Math.pow);
     *
     *      f(3, 4); // -(3^4) + 1
     */
    var compose = function compose() {
        if (arguments.length === 0) {
            throw new Error('compose requires at least one argument');
        }
        return pipe.apply(this, reverse(arguments));
    };

    /**
     * Returns the right-to-left Kleisli composition of the provided functions,
     * each of which must return a value of a type supported by [`chain`](#chain).
     *
     * `R.composeK(h, g, f)` is equivalent to `R.compose(R.chain(h), R.chain(g), R.chain(f))`.
     *
     * @func
     * @memberOf R
     * @since v0.16.0
     * @category Function
     * @sig Chain m => ((y -> m z), (x -> m y), ..., (a -> m b)) -> (m a -> m z)
     * @param {...Function}
     * @return {Function}
     * @see R.pipeK
     * @example
     *
     *      //  parseJson :: String -> Maybe *
     *      //  get :: String -> Object -> Maybe *
     *
     *      //  getStateCode :: Maybe String -> Maybe String
     *      var getStateCode = R.composeK(
     *        R.compose(Maybe.of, R.toUpper),
     *        get('state'),
     *        get('address'),
     *        get('user'),
     *        parseJson
     *      );
     *
     *      getStateCode(Maybe.of('{"user":{"address":{"state":"ny"}}}'));
     *      //=> Just('NY')
     *      getStateCode(Maybe.of('[Invalid JSON]'));
     *      //=> Nothing()
     */
    var composeK = function composeK() {
        return compose.apply(this, prepend(identity, map(chain, arguments)));
    };

    /**
     * Performs right-to-left composition of one or more Promise-returning
     * functions. The rightmost function may have any arity; the remaining
     * functions must be unary.
     *
     * @func
     * @memberOf R
     * @since v0.10.0
     * @category Function
     * @sig ((y -> Promise z), (x -> Promise y), ..., (a -> Promise b)) -> (a -> Promise z)
     * @param {...Function} functions
     * @return {Function}
     * @see R.pipeP
     * @example
     *
     *      //  followersForUser :: String -> Promise [User]
     *      var followersForUser = R.composeP(db.getFollowers, db.getUserById);
     */
    var composeP = function composeP() {
        if (arguments.length === 0) {
            throw new Error('composeP requires at least one argument');
        }
        return pipeP.apply(this, reverse(arguments));
    };

    /**
     * Wraps a constructor function inside a curried function that can be called
     * with the same arguments and returns the same type.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Function
     * @sig (* -> {*}) -> (* -> {*})
     * @param {Function} Fn The constructor function to wrap.
     * @return {Function} A wrapped, curried constructor function.
     * @example
     *
     *      // Constructor function
     *      var Widget = config => {
     *        // ...
     *      };
     *      Widget.prototype = {
     *        // ...
     *      };
     *      var allConfigs = [
     *        // ...
     *      ];
     *      R.map(R.construct(Widget), allConfigs); // a list of Widgets
     */
    var construct = _curry1(function construct(Fn) {
        return constructN(Fn.length, Fn);
    });

    /**
     * Returns `true` if the specified value is equal, in `R.equals` terms, to at
     * least one element of the given list; `false` otherwise.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig a -> [a] -> Boolean
     * @param {Object} a The item to compare against.
     * @param {Array} list The array to consider.
     * @return {Boolean} `true` if the item is in the list, `false` otherwise.
     * @see R.any
     * @example
     *
     *      R.contains(3, [1, 2, 3]); //=> true
     *      R.contains(4, [1, 2, 3]); //=> false
     *      R.contains([42], [[42]]); //=> true
     */
    var contains = _curry2(_contains);

    /**
     * Finds the set (i.e. no duplicates) of all elements in the first list not
     * contained in the second list.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Relation
     * @sig [*] -> [*] -> [*]
     * @param {Array} list1 The first list.
     * @param {Array} list2 The second list.
     * @return {Array} The elements in `list1` that are not in `list2`.
     * @see R.differenceWith
     * @example
     *
     *      R.difference([1,2,3,4], [7,6,5,4,3]); //=> [1,2]
     *      R.difference([7,6,5,4,3], [1,2,3,4]); //=> [7,6,5]
     */
    var difference = _curry2(function difference(first, second) {
        var out = [];
        var idx = 0;
        var firstLen = first.length;
        while (idx < firstLen) {
            if (!_contains(first[idx], second) && !_contains(first[idx], out)) {
                out[out.length] = first[idx];
            }
            idx += 1;
        }
        return out;
    });

    /**
     * Returns a new list without any consecutively repeating elements. `R.equals`
     * is used to determine equality.
     *
     * Dispatches to the `dropRepeats` method of the first argument, if present.
     *
     * Acts as a transducer if a transformer is given in list position.
     *
     * @func
     * @memberOf R
     * @since v0.14.0
     * @category List
     * @sig [a] -> [a]
     * @param {Array} list The array to consider.
     * @return {Array} `list` without repeating elements.
     * @see R.transduce
     * @example
     *
     *     R.dropRepeats([1, 1, 1, 2, 3, 4, 4, 2, 2]); //=> [1, 2, 3, 4, 2]
     */
    var dropRepeats = _curry1(_dispatchable('dropRepeats', _xdropRepeatsWith(equals), dropRepeatsWith(equals)));

    /**
     * "lifts" a function of arity > 1 so that it may "map over" a list, Function or other
     * object that satisfies the [FantasyLand Apply spec](https://github.com/fantasyland/fantasy-land#apply).
     *
     * @func
     * @memberOf R
     * @since v0.7.0
     * @category Function
     * @sig (*... -> *) -> ([*]... -> [*])
     * @param {Function} fn The function to lift into higher context
     * @return {Function} The lifted function.
     * @see R.liftN
     * @example
     *
     *      var madd3 = R.lift(R.curry((a, b, c) => a + b + c));
     *
     *      madd3([1,2,3], [1,2,3], [1]); //=> [3, 4, 5, 4, 5, 6, 5, 6, 7]
     *
     *      var madd5 = R.lift(R.curry((a, b, c, d, e) => a + b + c + d + e));
     *
     *      madd5([1,2], [3], [4, 5], [6], [7, 8]); //=> [21, 22, 22, 23, 22, 23, 23, 24]
     */
    var lift = _curry1(function lift(fn) {
        return liftN(fn.length, fn);
    });

    /**
     * Returns a partial copy of an object omitting the keys specified.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Object
     * @sig [String] -> {String: *} -> {String: *}
     * @param {Array} names an array of String property names to omit from the new object
     * @param {Object} obj The object to copy from
     * @return {Object} A new object with properties from `names` not on it.
     * @see R.pick
     * @example
     *
     *      R.omit(['a', 'd'], {a: 1, b: 2, c: 3, d: 4}); //=> {b: 2, c: 3}
     */
    var omit = _curry2(function omit(names, obj) {
        var result = {};
        for (var prop in obj) {
            if (!_contains(prop, names)) {
                result[prop] = obj[prop];
            }
        }
        return result;
    });

    /**
     * Returns the left-to-right Kleisli composition of the provided functions,
     * each of which must return a value of a type supported by [`chain`](#chain).
     *
     * `R.pipeK(f, g, h)` is equivalent to `R.pipe(R.chain(f), R.chain(g), R.chain(h))`.
     *
     * @func
     * @memberOf R
     * @since v0.16.0
     * @category Function
     * @sig Chain m => ((a -> m b), (b -> m c), ..., (y -> m z)) -> (m a -> m z)
     * @param {...Function}
     * @return {Function}
     * @see R.composeK
     * @example
     *
     *      //  parseJson :: String -> Maybe *
     *      //  get :: String -> Object -> Maybe *
     *
     *      //  getStateCode :: Maybe String -> Maybe String
     *      var getStateCode = R.pipeK(
     *        parseJson,
     *        get('user'),
     *        get('address'),
     *        get('state'),
     *        R.compose(Maybe.of, R.toUpper)
     *      );
     *
     *      getStateCode(Maybe.of('{"user":{"address":{"state":"ny"}}}'));
     *      //=> Just('NY')
     *      getStateCode(Maybe.of('[Invalid JSON]'));
     *      //=> Nothing()
     */
    var pipeK = function pipeK() {
        return composeK.apply(this, reverse(arguments));
    };

    /**
     * Returns the string representation of the given value. `eval`'ing the output
     * should result in a value equivalent to the input value. Many of the built-in
     * `toString` methods do not satisfy this requirement.
     *
     * If the given value is an `[object Object]` with a `toString` method other
     * than `Object.prototype.toString`, this method is invoked with no arguments
     * to produce the return value. This means user-defined constructor functions
     * can provide a suitable `toString` method. For example:
     *
     *     function Point(x, y) {
     *       this.x = x;
     *       this.y = y;
     *     }
     *
     *     Point.prototype.toString = function() {
     *       return 'new Point(' + this.x + ', ' + this.y + ')';
     *     };
     *
     *     R.toString(new Point(1, 2)); //=> 'new Point(1, 2)'
     *
     * @func
     * @memberOf R
     * @since v0.14.0
     * @category String
     * @sig * -> String
     * @param {*} val
     * @return {String}
     * @example
     *
     *      R.toString(42); //=> '42'
     *      R.toString('abc'); //=> '"abc"'
     *      R.toString([1, 2, 3]); //=> '[1, 2, 3]'
     *      R.toString({foo: 1, bar: 2, baz: 3}); //=> '{"bar": 2, "baz": 3, "foo": 1}'
     *      R.toString(new Date('2001-02-03T04:05:06Z')); //=> 'new Date("2001-02-03T04:05:06.000Z")'
     */
    var toString = _curry1(function toString(val) {
        return _toString(val, []);
    });

    /**
     * Returns a new list without values in the first argument.
     * `R.equals` is used to determine equality.
     *
     * Acts as a transducer if a transformer is given in list position.
     *
     * @func
     * @memberOf R
     * @since v0.19.0
     * @category List
     * @sig [a] -> [a] -> [a]
     * @param {Array} list1 The values to be removed from `list2`.
     * @param {Array} list2 The array to remove values from.
     * @return {Array} The new array without values in `list1`.
     * @see R.transduce
     * @example
     *
     *      R.without([1, 2], [1, 2, 1, 3, 4]); //=> [3, 4]
     */
    var without = _curry2(function (xs, list) {
        return reject(flip(_contains)(xs), list);
    });

    // A simple Set type that honours R.equals semantics
    /* globals Set */
    /**
       * Combines the logic for checking whether an item is a member of the set and
       * for adding a new item to the set.
       *
       * @param item       The item to check or add to the Set instance.
       * @param shouldAdd  If true, the item will be added to the set if it doesn't
       *                   already exist.
       * @param set        The set instance to check or add to.
       * @return {boolean} When shouldAdd is true, this will return true when a new
       *                   item was added otherwise false. When shouldAdd is false,
       *                   this will return true if the item already exists, otherwise
       *                   false.
       */
    // distinguish between +0 and -0
    // these types can all utilise Set
    // set._items['boolean'] holds a two element array
    // representing [ falseExists, trueExists ]
    // compare functions for reference equality
    /* falls through */
    // reduce the search size of heterogeneous sets by creating buckets
    // for each type.
    // scan through all previously applied items
    var _Set = function () {
        function _Set() {
            /* globals Set */
            this._nativeSet = typeof Set === 'function' ? new Set() : null;
            this._items = {};
        }
        _Set.prototype.add = function (item) {
            return hasOrAdd(item, true, this);
        };
        _Set.prototype.has = function (item) {
            return hasOrAdd(item, false, this);
        };
        /**
       * Combines the logic for checking whether an item is a member of the set and
       * for adding a new item to the set.
       *
       * @param item       The item to check or add to the Set instance.
       * @param shouldAdd  If true, the item will be added to the set if it doesn't
       *                   already exist.
       * @param set        The set instance to check or add to.
       * @return {boolean} When shouldAdd is true, this will return true when a new
       *                   item was added otherwise false. When shouldAdd is false,
       *                   this will return true if the item already exists, otherwise
       *                   false.
       */
        function hasOrAdd(item, shouldAdd, set) {
            var type = typeof item;
            var prevSize, newSize;
            switch (type) {
            case 'string':
            case 'number':
                // distinguish between +0 and -0
                if (item === 0 && !set._items['-0'] && 1 / item === -Infinity) {
                    if (shouldAdd) {
                        set._items['-0'] = true;
                    }
                    return shouldAdd;
                }
                // these types can all utilise Set
                if (set._nativeSet !== null) {
                    if (shouldAdd) {
                        prevSize = set._nativeSet.size;
                        set._nativeSet.add(item);
                        newSize = set._nativeSet.size;
                        return newSize > prevSize;
                    } else {
                        return set._nativeSet.has(item);
                    }
                } else {
                    if (!(type in set._items)) {
                        if (shouldAdd) {
                            set._items[type] = {};
                            set._items[type][item] = true;
                        }
                        return shouldAdd;
                    } else if (item in set._items[type]) {
                        return !shouldAdd;
                    } else {
                        if (shouldAdd) {
                            set._items[type][item] = true;
                        }
                        return shouldAdd;
                    }
                }
            case 'boolean':
                // set._items['boolean'] holds a two element array
                // representing [ falseExists, trueExists ]
                if (type in set._items) {
                    var bIdx = item ? 1 : 0;
                    if (set._items[type][bIdx]) {
                        return !shouldAdd;
                    } else {
                        if (shouldAdd) {
                            set._items[type][bIdx] = true;
                        }
                        return shouldAdd;
                    }
                } else {
                    if (shouldAdd) {
                        set._items[type] = item ? [
                            false,
                            true
                        ] : [
                            true,
                            false
                        ];
                    }
                    return shouldAdd;
                }
            case 'function':
                // compare functions for reference equality
                if (set._nativeSet !== null) {
                    if (shouldAdd) {
                        prevSize = set._nativeSet.size;
                        set._nativeSet.add(item);
                        newSize = set._nativeSet.size;
                        return newSize > prevSize;
                    } else {
                        return set._nativeSet.has(item);
                    }
                } else {
                    if (!(type in set._items)) {
                        if (shouldAdd) {
                            set._items[type] = [item];
                        }
                        return shouldAdd;
                    }
                    if (!_contains(item, set._items[type])) {
                        if (shouldAdd) {
                            set._items[type].push(item);
                        }
                        return shouldAdd;
                    }
                }
                return !shouldAdd;
            case 'undefined':
                if (set._items[type]) {
                    return !shouldAdd;
                } else {
                    if (shouldAdd) {
                        set._items[type] = true;
                    }
                    return shouldAdd;
                }
            case 'object':
                if (item === null) {
                    if (!set._items['null']) {
                        if (shouldAdd) {
                            set._items['null'] = true;
                        }
                        return shouldAdd;
                    }
                    return !shouldAdd;
                }
            /* falls through */
            default:
                // reduce the search size of heterogeneous sets by creating buckets
                // for each type.
                type = Object.prototype.toString.call(item);
                if (!(type in set._items)) {
                    if (shouldAdd) {
                        set._items[type] = [item];
                    }
                    return shouldAdd;
                }
                // scan through all previously applied items
                if (!_contains(item, set._items[type])) {
                    if (shouldAdd) {
                        set._items[type].push(item);
                    }
                    return shouldAdd;
                }
                return !shouldAdd;
            }
        }
        return _Set;
    }();

    /**
     * A function wrapping calls to the two functions in an `&&` operation,
     * returning the result of the first function if it is false-y and the result
     * of the second function otherwise. Note that this is short-circuited,
     * meaning that the second function will not be invoked if the first returns a
     * false-y value.
     *
     * In addition to functions, `R.both` also accepts any fantasy-land compatible
     * applicative functor.
     *
     * @func
     * @memberOf R
     * @since v0.12.0
     * @category Logic
     * @sig (*... -> Boolean) -> (*... -> Boolean) -> (*... -> Boolean)
     * @param {Function} f a predicate
     * @param {Function} g another predicate
     * @return {Function} a function that applies its arguments to `f` and `g` and `&&`s their outputs together.
     * @see R.and
     * @example
     *
     *      var gt10 = x => x > 10;
     *      var even = x => x % 2 === 0;
     *      var f = R.both(gt10, even);
     *      f(100); //=> true
     *      f(101); //=> false
     */
    var both = _curry2(function both(f, g) {
        return _isFunction(f) ? function _both() {
            return f.apply(this, arguments) && g.apply(this, arguments);
        } : lift(and)(f, g);
    });

    /**
     * Takes a function `f` and returns a function `g` such that:
     *
     *   - applying `g` to zero or more arguments will give __true__ if applying
     *     the same arguments to `f` gives a logical __false__ value; and
     *
     *   - applying `g` to zero or more arguments will give __false__ if applying
     *     the same arguments to `f` gives a logical __true__ value.
     *
     * `R.complement` will work on all other functors as well.
     *
     * @func
     * @memberOf R
     * @since v0.12.0
     * @category Logic
     * @sig (*... -> *) -> (*... -> Boolean)
     * @param {Function} f
     * @return {Function}
     * @see R.not
     * @example
     *
     *      var isEven = n => n % 2 === 0;
     *      var isOdd = R.complement(isEven);
     *      isOdd(21); //=> true
     *      isOdd(42); //=> false
     */
    var complement = lift(not);

    /**
     * A function wrapping calls to the two functions in an `||` operation,
     * returning the result of the first function if it is truth-y and the result
     * of the second function otherwise. Note that this is short-circuited,
     * meaning that the second function will not be invoked if the first returns a
     * truth-y value.
     *
     * In addition to functions, `R.either` also accepts any fantasy-land compatible
     * applicative functor.
     *
     * @func
     * @memberOf R
     * @since v0.12.0
     * @category Logic
     * @sig (*... -> Boolean) -> (*... -> Boolean) -> (*... -> Boolean)
     * @param {Function} f a predicate
     * @param {Function} g another predicate
     * @return {Function} a function that applies its arguments to `f` and `g` and `||`s their outputs together.
     * @see R.or
     * @example
     *
     *      var gt10 = x => x > 10;
     *      var even = x => x % 2 === 0;
     *      var f = R.either(gt10, even);
     *      f(101); //=> true
     *      f(8); //=> true
     */
    var either = _curry2(function either(f, g) {
        return _isFunction(f) ? function _either() {
            return f.apply(this, arguments) || g.apply(this, arguments);
        } : lift(or)(f, g);
    });

    /**
     * Turns a named method with a specified arity into a function that can be
     * called directly supplied with arguments and a target object.
     *
     * The returned function is curried and accepts `arity + 1` parameters where
     * the final parameter is the target object.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Function
     * @sig Number -> String -> (a -> b -> ... -> n -> Object -> *)
     * @param {Number} arity Number of arguments the returned function should take
     *        before the target object.
     * @param {String} method Name of the method to call.
     * @return {Function} A new curried function.
     * @example
     *
     *      var sliceFrom = R.invoker(1, 'slice');
     *      sliceFrom(6, 'abcdefghijklm'); //=> 'ghijklm'
     *      var sliceFrom6 = R.invoker(2, 'slice')(6);
     *      sliceFrom6(8, 'abcdefghijklm'); //=> 'gh'
     */
    var invoker = _curry2(function invoker(arity, method) {
        return curryN(arity + 1, function () {
            var target = arguments[arity];
            if (target != null && is(Function, target[method])) {
                return target[method].apply(target, _slice(arguments, 0, arity));
            }
            throw new TypeError(toString(target) + ' does not have a method named "' + method + '"');
        });
    });

    /**
     * Returns a string made by inserting the `separator` between each element and
     * concatenating all the elements into a single string.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig String -> [a] -> String
     * @param {Number|String} separator The string used to separate the elements.
     * @param {Array} xs The elements to join into a string.
     * @return {String} str The string made by concatenating `xs` with `separator`.
     * @see R.split
     * @example
     *
     *      var spacer = R.join(' ');
     *      spacer(['a', 2, 3.4]);   //=> 'a 2 3.4'
     *      R.join('|', [1, 2, 3]);    //=> '1|2|3'
     */
    var join = invoker(1, 'join');

    /**
     * Creates a new function that, when invoked, caches the result of calling `fn`
     * for a given argument set and returns the result. Subsequent calls to the
     * memoized `fn` with the same argument set will not result in an additional
     * call to `fn`; instead, the cached result for that set of arguments will be
     * returned.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Function
     * @sig (*... -> a) -> (*... -> a)
     * @param {Function} fn The function to memoize.
     * @return {Function} Memoized version of `fn`.
     * @example
     *
     *      var count = 0;
     *      var factorial = R.memoize(n => {
     *        count += 1;
     *        return R.product(R.range(1, n + 1));
     *      });
     *      factorial(5); //=> 120
     *      factorial(5); //=> 120
     *      factorial(5); //=> 120
     *      count; //=> 1
     */
    var memoize = _curry1(function memoize(fn) {
        var cache = {};
        return _arity(fn.length, function () {
            var key = toString(arguments);
            if (!_has(key, cache)) {
                cache[key] = fn.apply(this, arguments);
            }
            return cache[key];
        });
    });

    /**
     * Splits a string into an array of strings based on the given
     * separator.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category String
     * @sig (String | RegExp) -> String -> [String]
     * @param {String|RegExp} sep The pattern.
     * @param {String} str The string to separate into an array.
     * @return {Array} The array of strings from `str` separated by `str`.
     * @see R.join
     * @example
     *
     *      var pathComponents = R.split('/');
     *      R.tail(pathComponents('/usr/local/bin/node')); //=> ['usr', 'local', 'bin', 'node']
     *
     *      R.split('.', 'a.b.c.xyz.d'); //=> ['a', 'b', 'c', 'xyz', 'd']
     */
    var split = invoker(1, 'split');

    /**
     * Determines whether a given string matches a given regular expression.
     *
     * @func
     * @memberOf R
     * @since v0.12.0
     * @category String
     * @sig RegExp -> String -> Boolean
     * @param {RegExp} pattern
     * @param {String} str
     * @return {Boolean}
     * @see R.match
     * @example
     *
     *      R.test(/^x/, 'xyz'); //=> true
     *      R.test(/^y/, 'xyz'); //=> false
     */
    var test = _curry2(function test(pattern, str) {
        if (!_isRegExp(pattern)) {
            throw new TypeError('\u2018test\u2019 requires a value of type RegExp as its first argument; received ' + toString(pattern));
        }
        return _cloneRegExp(pattern).test(str);
    });

    /**
     * The lower case version of a string.
     *
     * @func
     * @memberOf R
     * @since v0.9.0
     * @category String
     * @sig String -> String
     * @param {String} str The string to lower case.
     * @return {String} The lower case version of `str`.
     * @see R.toUpper
     * @example
     *
     *      R.toLower('XYZ'); //=> 'xyz'
     */
    var toLower = invoker(0, 'toLowerCase');

    /**
     * The upper case version of a string.
     *
     * @func
     * @memberOf R
     * @since v0.9.0
     * @category String
     * @sig String -> String
     * @param {String} str The string to upper case.
     * @return {String} The upper case version of `str`.
     * @see R.toLower
     * @example
     *
     *      R.toUpper('abc'); //=> 'ABC'
     */
    var toUpper = invoker(0, 'toUpperCase');

    /**
     * Returns a new list containing only one copy of each element in the original
     * list, based upon the value returned by applying the supplied function to
     * each list element. Prefers the first item if the supplied function produces
     * the same value on two items. `R.equals` is used for comparison.
     *
     * @func
     * @memberOf R
     * @since v0.16.0
     * @category List
     * @sig (a -> b) -> [a] -> [a]
     * @param {Function} fn A function used to produce a value to use during comparisons.
     * @param {Array} list The array to consider.
     * @return {Array} The list of unique items.
     * @example
     *
     *      R.uniqBy(Math.abs, [-1, -5, 2, 10, 1, 2]); //=> [-1, -5, 2, 10]
     */
    var uniqBy = _curry2(function uniqBy(fn, list) {
        var set = new _Set();
        var result = [];
        var idx = 0;
        var appliedItem, item;
        while (idx < list.length) {
            item = list[idx];
            appliedItem = fn(item);
            if (set.add(appliedItem)) {
                result.push(item);
            }
            idx += 1;
        }
        return result;
    });

    /**
     * Returns the result of concatenating the given lists or strings.
     *
     * Dispatches to the `concat` method of the first argument, if present.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig [a] -> [a] -> [a]
     * @sig String -> String -> String
     * @param {Array|String} a
     * @param {Array|String} b
     * @return {Array|String}
     *
     * @example
     *
     *      R.concat([], []); //=> []
     *      R.concat([4, 5, 6], [1, 2, 3]); //=> [4, 5, 6, 1, 2, 3]
     *      R.concat('ABC', 'DEF'); // 'ABCDEF'
     */
    var concat = flip(invoker(1, 'concat'));

    /**
     * Finds the set (i.e. no duplicates) of all elements contained in the first or
     * second list, but not both.
     *
     * @func
     * @memberOf R
     * @since v0.19.0
     * @category Relation
     * @sig [*] -> [*] -> [*]
     * @param {Array} list1 The first list.
     * @param {Array} list2 The second list.
     * @return {Array} The elements in `list1` or `list2`, but not both.
     * @see R.symmetricDifferenceWith
     * @example
     *
     *      R.symmetricDifference([1,2,3,4], [7,6,5,4,3]); //=> [1,2,7,6,5]
     *      R.symmetricDifference([7,6,5,4,3], [1,2,3,4]); //=> [7,6,5,1,2]
     */
    var symmetricDifference = _curry2(function symmetricDifference(list1, list2) {
        return concat(difference(list1, list2), difference(list2, list1));
    });

    /**
     * Finds the set (i.e. no duplicates) of all elements contained in the first or
     * second list, but not both. Duplication is determined according to the value
     * returned by applying the supplied predicate to two list elements.
     *
     * @func
     * @memberOf R
     * @since v0.19.0
     * @category Relation
     * @sig (a -> a -> Boolean) -> [a] -> [a] -> [a]
     * @param {Function} pred A predicate used to test whether two items are equal.
     * @param {Array} list1 The first list.
     * @param {Array} list2 The second list.
     * @return {Array} The elements in `list1` or `list2`, but not both.
     * @see R.symmetricDifference
     * @example
     *
     *      var eqA = R.eqBy(R.prop('a'));
     *      var l1 = [{a: 1}, {a: 2}, {a: 3}, {a: 4}];
     *      var l2 = [{a: 3}, {a: 4}, {a: 5}, {a: 6}];
     *      R.symmetricDifferenceWith(eqA, l1, l2); //=> [{a: 1}, {a: 2}, {a: 5}, {a: 6}]
     */
    var symmetricDifferenceWith = _curry3(function symmetricDifferenceWith(pred, list1, list2) {
        return concat(differenceWith(pred, list1, list2), differenceWith(pred, list2, list1));
    });

    /**
     * Returns a new list containing only one copy of each element in the original
     * list. `R.equals` is used to determine equality.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category List
     * @sig [a] -> [a]
     * @param {Array} list The array to consider.
     * @return {Array} The list of unique items.
     * @example
     *
     *      R.uniq([1, 1, 2, 1]); //=> [1, 2]
     *      R.uniq([1, '1']);     //=> [1, '1']
     *      R.uniq([[42], [42]]); //=> [[42]]
     */
    var uniq = uniqBy(identity);

    /**
     * Combines two lists into a set (i.e. no duplicates) composed of those
     * elements common to both lists.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Relation
     * @sig [*] -> [*] -> [*]
     * @param {Array} list1 The first list.
     * @param {Array} list2 The second list.
     * @return {Array} The list of elements found in both `list1` and `list2`.
     * @see R.intersectionWith
     * @example
     *
     *      R.intersection([1,2,3,4], [7,6,5,4,3]); //=> [4, 3]
     */
    var intersection = _curry2(function intersection(list1, list2) {
        var lookupList, filteredList;
        if (list1.length > list2.length) {
            lookupList = list1;
            filteredList = list2;
        } else {
            lookupList = list2;
            filteredList = list1;
        }
        return uniq(_filter(flip(_contains)(lookupList), filteredList));
    });

    /**
     * Combines two lists into a set (i.e. no duplicates) composed of the elements
     * of each list.
     *
     * @func
     * @memberOf R
     * @since v0.1.0
     * @category Relation
     * @sig [*] -> [*] -> [*]
     * @param {Array} as The first list.
     * @param {Array} bs The second list.
     * @return {Array} The first and second lists concatenated, with
     *         duplicates removed.
     * @example
     *
     *      R.union([1, 2, 3], [2, 3, 4]); //=> [1, 2, 3, 4]
     */
    var union = _curry2(compose(uniq, _concat));

    var R = {
        F: F,
        T: T,
        __: __,
        add: add,
        addIndex: addIndex,
        adjust: adjust,
        all: all,
        allPass: allPass,
        allUniq: allUniq,
        always: always,
        and: and,
        any: any,
        anyPass: anyPass,
        ap: ap,
        aperture: aperture,
        append: append,
        apply: apply,
        applySpec: applySpec,
        assoc: assoc,
        assocPath: assocPath,
        binary: binary,
        bind: bind,
        both: both,
        call: call,
        chain: chain,
        clamp: clamp,
        clone: clone,
        comparator: comparator,
        complement: complement,
        compose: compose,
        composeK: composeK,
        composeP: composeP,
        concat: concat,
        cond: cond,
        construct: construct,
        constructN: constructN,
        contains: contains,
        converge: converge,
        countBy: countBy,
        curry: curry,
        curryN: curryN,
        dec: dec,
        defaultTo: defaultTo,
        difference: difference,
        differenceWith: differenceWith,
        dissoc: dissoc,
        dissocPath: dissocPath,
        divide: divide,
        drop: drop,
        dropLast: dropLast,
        dropLastWhile: dropLastWhile,
        dropRepeats: dropRepeats,
        dropRepeatsWith: dropRepeatsWith,
        dropWhile: dropWhile,
        either: either,
        empty: empty,
        eqBy: eqBy,
        eqProps: eqProps,
        equals: equals,
        evolve: evolve,
        filter: filter,
        find: find,
        findIndex: findIndex,
        findLast: findLast,
        findLastIndex: findLastIndex,
        flatten: flatten,
        flip: flip,
        forEach: forEach,
        fromPairs: fromPairs,
        groupBy: groupBy,
        groupWith: groupWith,
        gt: gt,
        gte: gte,
        has: has,
        hasIn: hasIn,
        head: head,
        identical: identical,
        identity: identity,
        ifElse: ifElse,
        inc: inc,
        indexBy: indexBy,
        indexOf: indexOf,
        init: init,
        insert: insert,
        insertAll: insertAll,
        intersection: intersection,
        intersectionWith: intersectionWith,
        intersperse: intersperse,
        into: into,
        invert: invert,
        invertObj: invertObj,
        invoker: invoker,
        is: is,
        isArrayLike: isArrayLike,
        isEmpty: isEmpty,
        isNil: isNil,
        join: join,
        juxt: juxt,
        keys: keys,
        keysIn: keysIn,
        last: last,
        lastIndexOf: lastIndexOf,
        length: length,
        lens: lens,
        lensIndex: lensIndex,
        lensPath: lensPath,
        lensProp: lensProp,
        lift: lift,
        liftN: liftN,
        lt: lt,
        lte: lte,
        map: map,
        mapAccum: mapAccum,
        mapAccumRight: mapAccumRight,
        mapObjIndexed: mapObjIndexed,
        match: match,
        mathMod: mathMod,
        max: max,
        maxBy: maxBy,
        mean: mean,
        median: median,
        memoize: memoize,
        merge: merge,
        mergeAll: mergeAll,
        mergeWith: mergeWith,
        mergeWithKey: mergeWithKey,
        min: min,
        minBy: minBy,
        modulo: modulo,
        multiply: multiply,
        nAry: nAry,
        negate: negate,
        none: none,
        not: not,
        nth: nth,
        nthArg: nthArg,
        objOf: objOf,
        of: of,
        omit: omit,
        once: once,
        or: or,
        over: over,
        pair: pair,
        partial: partial,
        partialRight: partialRight,
        partition: partition,
        path: path,
        pathEq: pathEq,
        pathOr: pathOr,
        pathSatisfies: pathSatisfies,
        pick: pick,
        pickAll: pickAll,
        pickBy: pickBy,
        pipe: pipe,
        pipeK: pipeK,
        pipeP: pipeP,
        pluck: pluck,
        prepend: prepend,
        product: product,
        project: project,
        prop: prop,
        propEq: propEq,
        propIs: propIs,
        propOr: propOr,
        propSatisfies: propSatisfies,
        props: props,
        range: range,
        reduce: reduce,
        reduceBy: reduceBy,
        reduceRight: reduceRight,
        reduced: reduced,
        reject: reject,
        remove: remove,
        repeat: repeat,
        replace: replace,
        reverse: reverse,
        scan: scan,
        sequence: sequence,
        set: set,
        slice: slice,
        sort: sort,
        sortBy: sortBy,
        split: split,
        splitAt: splitAt,
        splitEvery: splitEvery,
        splitWhen: splitWhen,
        subtract: subtract,
        sum: sum,
        symmetricDifference: symmetricDifference,
        symmetricDifferenceWith: symmetricDifferenceWith,
        tail: tail,
        take: take,
        takeLast: takeLast,
        takeLastWhile: takeLastWhile,
        takeWhile: takeWhile,
        tap: tap,
        test: test,
        times: times,
        toLower: toLower,
        toPairs: toPairs,
        toPairsIn: toPairsIn,
        toString: toString,
        toUpper: toUpper,
        transduce: transduce,
        transpose: transpose,
        traverse: traverse,
        trim: trim,
        tryCatch: tryCatch,
        type: type,
        unapply: unapply,
        unary: unary,
        uncurryN: uncurryN,
        unfold: unfold,
        union: union,
        unionWith: unionWith,
        uniq: uniq,
        uniqBy: uniqBy,
        uniqWith: uniqWith,
        unless: unless,
        unnest: unnest,
        until: until,
        update: update,
        useWith: useWith,
        values: values,
        valuesIn: valuesIn,
        view: view,
        when: when,
        where: where,
        whereEq: whereEq,
        without: without,
        wrap: wrap,
        xprod: xprod,
        zip: zip,
        zipObj: zipObj,
        zipWith: zipWith
    };
  /* eslint-env amd */

  /* TEST_ENTRY_POINT */

  if (typeof exports === 'object') {
    module.exports = R;
  } else if (typeof define === 'function' && define.amd) {
    define(function() { return R; });
  } else {
    this.R = R;
  }

}.call(this));

},{}]},{},[19])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJqcy9iYW0uanMiLCJqcy9iZWR3aWcuanMiLCJqcy9iaWd3aWcuanMiLCJqcy9iaW4uanMiLCJqcy9icm93c2VyLXVpLmpzIiwianMvY2Jyb3dzZXIuanMiLCJqcy9jaGFpbnNldC5qcyIsImpzL2NpZ2FyLmpzIiwianMvY29sb3IuanMiLCJqcy9kYXMuanMiLCJqcy9kZWZhdWx0LXJlbmRlcmVyLmVzNiIsImpzL2RvbXVpLmpzIiwianMvZHVtbXktcmVuZGVyZXIuZXM2IiwianMvZW5jb2RlLmpzIiwianMvZW5zZW1ibGpzb24uanMiLCJqcy9leHBvcnQtY29uZmlnLmpzIiwianMvZXhwb3J0LWltYWdlLmpzIiwianMvZXhwb3J0LXVpLmpzIiwianMvZXhwb3J0cy5qcyIsImpzL2ZlYXR1cmUtZHJhdy5qcyIsImpzL2ZlYXR1cmUtcG9wdXAuanMiLCJqcy9mZWF0dXJlcy5qcyIsImpzL2dseXBocy5qcyIsImpzL2pianNvbi5qcyIsImpzL2tzcGFjZS5qcyIsImpzL2xoM3V0aWxzLmpzIiwianMvbWVtc3RvcmUuanMiLCJqcy9tdWx0aS1yZW5kZXJlci5lczYiLCJqcy9udW1mb3JtYXRzLmpzIiwianMvb3ZlcmxheS5qcyIsImpzL3Byb2JlLmpzIiwianMvcnVsZXJzLmVzNiIsImpzL3NhbXBsZS5qcyIsImpzL3NlYXJjaC5qcyIsImpzL3NlcXVlbmNlLWRyYXcuanMiLCJqcy9zZXNzaW9uLmpzIiwianMvc2hhMS5qcyIsImpzL3NvdXJjZWFkYXB0ZXJzLmpzIiwianMvc291cmNlY29tcGFyZS5qcyIsImpzL3NwYW5zLmpzIiwianMvc3R5bGUuanMiLCJqcy9zdWItcmVuZGVyZXIuZXM2IiwianMvc3ZnLWV4cG9ydC5qcyIsImpzL3N2Zy11dGlscy5qcyIsImpzL3RhYml4LXNvdXJjZS5qcyIsImpzL3RhYml4LmpzIiwianMvdGVzdC1zb3VyY2UuZXM2IiwianMvdGh1Yi5qcyIsImpzL3RpZXItYWN0aW9ucy5qcyIsImpzL3RpZXItZWRpdC5qcyIsImpzL3RpZXIuanMiLCJqcy90cmFjay1hZGRlci5qcyIsImpzL3RyaXguanMiLCJqcy90d29CaXQuanMiLCJqcy91dGlscy5qcyIsImpzL3ZjZi5qcyIsImpzL3ZlcnNpb24uanMiLCJqcy96b29tc2xpZGVyLmpzIiwibm9kZV9tb2R1bGVzL2VzNi1wcm9taXNlL2Rpc3QvZXM2LXByb21pc2UuanMiLCJub2RlX21vZHVsZXMvanN6bGliL2pzL2luZmxhdGUuanMiLCJub2RlX21vZHVsZXMvcHJvY2Vzcy9icm93c2VyLmpzIiwibm9kZV9tb2R1bGVzL3JhbWRhL2Rpc3QvcmFtZGEuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsSUFBSSxPQUFPLE9BQVAsS0FBb0IsV0FBeEIsRUFBcUM7QUFDakMsUUFBSSxRQUFRLFFBQVEsU0FBUixDQUFaO0FBQ0EsUUFBSSxRQUFRLE1BQU0sS0FBbEI7QUFDQSxRQUFJLFFBQVEsTUFBTSxLQUFsQjtBQUNBLFFBQUksZUFBZSxNQUFNLFlBQXpCOztBQUVBLFFBQUksTUFBTSxRQUFRLE9BQVIsQ0FBVjtBQUNBLFFBQUksVUFBVSxJQUFJLE9BQWxCO0FBQ0EsUUFBSSxZQUFZLElBQUksU0FBcEI7QUFDQSxRQUFJLFdBQVcsSUFBSSxRQUFuQjtBQUNBLFFBQUksWUFBWSxJQUFJLFNBQXBCO0FBQ0EsUUFBSSxZQUFZLElBQUksU0FBcEI7O0FBRUEsUUFBSSxXQUFXLFFBQVEsWUFBUixDQUFmO0FBQ0EsUUFBSSxVQUFVLFNBQVMsT0FBdkI7QUFDQSxRQUFJLFNBQVMsU0FBUyxNQUF0QjtBQUNBLFFBQUksV0FBVyxTQUFTLFFBQXhCO0FBQ0EsUUFBSSxRQUFRLFNBQVMsS0FBckI7QUFDSDs7QUFHRCxJQUFJLFlBQVksU0FBaEI7QUFDQSxJQUFJLFlBQVksU0FBaEI7O0FBRUEsSUFBSSxXQUFXO0FBQ1gsdUJBQXlC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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQ3Y4QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xuRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcExBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIi8qIC0qLSBtb2RlOiBqYXZhc2NyaXB0OyBjLWJhc2ljLW9mZnNldDogNDsgaW5kZW50LXRhYnMtbW9kZTogbmlsIC0qLSAqL1xuXG4vLyBcbi8vIERhbGxpYW5jZSBHZW5vbWUgRXhwbG9yZXJcbi8vIChjKSBUaG9tYXMgRG93biAyMDA2LTIwMTFcbi8vXG4vLyBiYW0uanM6IGluZGV4ZWQgYmluYXJ5IGFsaWdubWVudHNcbi8vXG5cblwidXNlIHN0cmljdFwiO1xuXG5pZiAodHlwZW9mKHJlcXVpcmUpICE9PSAndW5kZWZpbmVkJykge1xuICAgIHZhciBzcGFucyA9IHJlcXVpcmUoJy4vc3BhbnMnKTtcbiAgICB2YXIgUmFuZ2UgPSBzcGFucy5SYW5nZTtcbiAgICB2YXIgdW5pb24gPSBzcGFucy51bmlvbjtcbiAgICB2YXIgaW50ZXJzZWN0aW9uID0gc3BhbnMuaW50ZXJzZWN0aW9uO1xuXG4gICAgdmFyIGJpbiA9IHJlcXVpcmUoJy4vYmluJyk7XG4gICAgdmFyIHJlYWRJbnQgPSBiaW4ucmVhZEludDtcbiAgICB2YXIgcmVhZFNob3J0ID0gYmluLnJlYWRTaG9ydDtcbiAgICB2YXIgcmVhZEJ5dGUgPSBiaW4ucmVhZEJ5dGU7XG4gICAgdmFyIHJlYWRJbnQ2NCA9IGJpbi5yZWFkSW50NjQ7XG4gICAgdmFyIHJlYWRGbG9hdCA9IGJpbi5yZWFkRmxvYXQ7XG5cbiAgICB2YXIgbGgzdXRpbHMgPSByZXF1aXJlKCcuL2xoM3V0aWxzJyk7XG4gICAgdmFyIHJlYWRWb2IgPSBsaDN1dGlscy5yZWFkVm9iO1xuICAgIHZhciB1bmJnemYgPSBsaDN1dGlscy51bmJnemY7XG4gICAgdmFyIHJlZzJiaW5zID0gbGgzdXRpbHMucmVnMmJpbnM7XG4gICAgdmFyIENodW5rID0gbGgzdXRpbHMuQ2h1bms7XG59XG5cblxudmFyIEJBTV9NQUdJQyA9IDB4MTRkNDE0MjtcbnZhciBCQUlfTUFHSUMgPSAweDE0OTQxNDI7XG5cbnZhciBCYW1GbGFncyA9IHtcbiAgICBNVUxUSVBMRV9TRUdNRU5UUzogICAgICAgMHgxLFxuICAgIEFMTF9TRUdNRU5UU19BTElHTjogICAgICAweDIsXG4gICAgU0VHTUVOVF9VTk1BUFBFRDogICAgICAgIDB4NCxcbiAgICBORVhUX1NFR01FTlRfVU5NQVBQRUQ6ICAgMHg4LFxuICAgIFJFVkVSU0VfQ09NUExFTUVOVDogICAgICAweDEwLFxuICAgIE5FWFRfUkVWRVJTRV9DT01QTEVNRU5UOiAweDIwLFxuICAgIEZJUlNUX1NFR01FTlQ6ICAgICAgICAgICAweDQwLFxuICAgIExBU1RfU0VHTUVOVDogICAgICAgICAgICAweDgwLFxuICAgIFNFQ09OREFSWV9BTElHTk1FTlQ6ICAgICAweDEwMCxcbiAgICBRQ19GQUlMOiAgICAgICAgICAgICAgICAgMHgyMDAsXG4gICAgRFVQTElDQVRFOiAgICAgICAgICAgICAgIDB4NDAwLFxuICAgIFNVUFBMRU1FTlRBUlk6ICAgICAgICAgICAweDgwMFxufTtcblxuZnVuY3Rpb24gQmFtRmlsZSgpIHtcbn1cblxuXG4vLyBDYWxjdWxhdGUgdGhlIGxlbmd0aCAoaW4gYnl0ZXMpIG9mIHRoZSBCQUkgcmVmIHN0YXJ0aW5nIGF0IG9mZnNldC5cbi8vIFJldHVybnMge25iaW4sIGxlbmd0aCwgbWluQmxvY2tJbmRleH1cbmZ1bmN0aW9uIF9nZXRCYWlSZWZMZW5ndGgodW5jYmEsIG9mZnNldCkge1xuICAgIHZhciBwID0gb2Zmc2V0O1xuICAgIHZhciBuYmluID0gcmVhZEludCh1bmNiYSwgcCk7IHAgKz0gNDtcbiAgICBmb3IgKHZhciBiID0gMDsgYiA8IG5iaW47ICsrYikge1xuICAgICAgICB2YXIgYmluID0gcmVhZEludCh1bmNiYSwgcCk7XG4gICAgICAgIHZhciBuY2huayA9IHJlYWRJbnQodW5jYmEsIHArNCk7XG4gICAgICAgIHAgKz0gOCArIChuY2huayAqIDE2KTtcbiAgICB9XG4gICAgdmFyIG5pbnR2ID0gcmVhZEludCh1bmNiYSwgcCk7IHAgKz0gNDtcblxuICAgIHZhciBtaW5CbG9ja0luZGV4ID0gMTAwMDAwMDAwMDtcbiAgICB2YXIgcSA9IHA7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuaW50djsgKytpKSB7XG4gICAgICAgIHZhciB2ID0gcmVhZFZvYih1bmNiYSwgcSk7IHEgKz0gODtcbiAgICAgICAgaWYgKHYpIHtcbiAgICAgICAgICAgIHZhciBiaSA9IHYuYmxvY2s7XG4gICAgICAgICAgICBpZiAodi5vZmZzZXQgPiAwKVxuICAgICAgICAgICAgICAgIGJpICs9IDY1NTM2O1xuXG4gICAgICAgICAgICBpZiAoYmkgPCBtaW5CbG9ja0luZGV4KVxuICAgICAgICAgICAgICAgIG1pbkJsb2NrSW5kZXggPSBiaTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIHAgKz0gKG5pbnR2ICogOCk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBtaW5CbG9ja0luZGV4OiBtaW5CbG9ja0luZGV4LFxuICAgICAgICBuYmluOiBuYmluLFxuICAgICAgICBsZW5ndGg6IHAgLSBvZmZzZXRcbiAgICB9O1xufVxuXG5cbmZ1bmN0aW9uIG1ha2VCYW0oZGF0YSwgYmFpLCBpbmRleENodW5rcywgY2FsbGJhY2ssIGF0dGVtcHRlZCkge1xuICAgIC8vIERvIGFuIGluaXRpYWwgcHJvYmUgb24gdGhlIEJBTSBmaWxlIHRvIGNhdGNoIGFueSBtaXhlZC1jb250ZW50IGVycm9ycy5cbiAgICBkYXRhLnNsaWNlKDAsIDEwKS5mZXRjaChmdW5jdGlvbihoZWFkZXIpIHtcbiAgICAgICAgaWYgKGhlYWRlcikge1xuICAgICAgICAgICAgcmV0dXJuIG1ha2VCYW0yKGRhdGEsIGJhaSwgaW5kZXhDaHVua3MsIGNhbGxiYWNrLCBhdHRlbXB0ZWQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwsIFwiQ291bGRuJ3QgYWNjZXNzIEJBTS5cIik7XG4gICAgICAgIH1cbiAgICB9LCB7dGltZW91dDogNTAwMH0pO1xufVxuXG5mdW5jdGlvbiBtYWtlQmFtMihkYXRhLCBiYWksIGluZGV4Q2h1bmtzLCBjYWxsYmFjaywgYXR0ZW1wdGVkKSB7XG4gICAgdmFyIGJhbSA9IG5ldyBCYW1GaWxlKCk7XG4gICAgYmFtLmRhdGEgPSBkYXRhO1xuICAgIGJhbS5iYWkgPSBiYWk7XG4gICAgYmFtLmluZGV4Q2h1bmtzID0gaW5kZXhDaHVua3M7XG5cbiAgICB2YXIgbWluQmxvY2tJbmRleCA9IGJhbS5pbmRleENodW5rcyA/IGJhbS5pbmRleENodW5rcy5taW5CbG9ja0luZGV4IDogMTAwMDAwMDAwMDtcblxuICAgIC8vIEZpbGxzIG91dCBiYW0uY2hyVG9JbmRleCBhbmQgYmFtLmluZGV4VG9DaHIgYmFzZWQgb24gdGhlIGZpcnN0IGZldyBieXRlcyBvZiB0aGUgQkFNLlxuICAgIGZ1bmN0aW9uIHBhcnNlQmFtSGVhZGVyKHIpIHtcbiAgICAgICAgaWYgKCFyKSB7XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCwgXCJDb3VsZG4ndCBhY2Nlc3MgQkFNXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHVuYyA9IHVuYmd6ZihyLCByLmJ5dGVMZW5ndGgpO1xuICAgICAgICB2YXIgdW5jYmEgPSBuZXcgVWludDhBcnJheSh1bmMpO1xuXG4gICAgICAgIHZhciBtYWdpYyA9IHJlYWRJbnQodW5jYmEsIDApO1xuICAgICAgICBpZiAobWFnaWMgIT0gQkFNX01BR0lDKSB7XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCwgXCJOb3QgYSBCQU0gZmlsZSwgbWFnaWM9MHhcIiArIG1hZ2ljLnRvU3RyaW5nKDE2KSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGhlYWRMZW4gPSByZWFkSW50KHVuY2JhLCA0KTtcbiAgICAgICAgdmFyIGhlYWRlciA9ICcnO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGhlYWRMZW47ICsraSkge1xuICAgICAgICAgICAgaGVhZGVyICs9IFN0cmluZy5mcm9tQ2hhckNvZGUodW5jYmFbaSArIDhdKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBuUmVmID0gcmVhZEludCh1bmNiYSwgaGVhZExlbiArIDgpO1xuICAgICAgICB2YXIgcCA9IGhlYWRMZW4gKyAxMjtcblxuICAgICAgICBiYW0uY2hyVG9JbmRleCA9IHt9O1xuICAgICAgICBiYW0uaW5kZXhUb0NociA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5SZWY7ICsraSkge1xuICAgICAgICAgICAgdmFyIGxOYW1lID0gcmVhZEludCh1bmNiYSwgcCk7XG4gICAgICAgICAgICB2YXIgbmFtZSA9ICcnO1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBsTmFtZS0xOyArK2opIHtcbiAgICAgICAgICAgICAgICBuYW1lICs9IFN0cmluZy5mcm9tQ2hhckNvZGUodW5jYmFbcCArIDQgKyBqXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgbFJlZiA9IHJlYWRJbnQodW5jYmEsIHAgKyBsTmFtZSArIDQpO1xuICAgICAgICAgICAgYmFtLmNoclRvSW5kZXhbbmFtZV0gPSBpO1xuICAgICAgICAgICAgaWYgKG5hbWUuaW5kZXhPZignY2hyJykgPT0gMCkge1xuICAgICAgICAgICAgICAgIGJhbS5jaHJUb0luZGV4W25hbWUuc3Vic3RyaW5nKDMpXSA9IGk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGJhbS5jaHJUb0luZGV4WydjaHInICsgbmFtZV0gPSBpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYmFtLmluZGV4VG9DaHIucHVzaChuYW1lKTtcblxuICAgICAgICAgICAgcCA9IHAgKyA4ICsgbE5hbWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoYmFtLmluZGljZXMpIHtcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhiYW0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcGFyc2VCYWkoaGVhZGVyKSB7XG4gICAgICAgIGlmICghaGVhZGVyKSB7XG4gICAgICAgICAgICByZXR1cm4gXCJDb3VsZG4ndCBhY2Nlc3MgQkFJXCI7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgdW5jYmEgPSBuZXcgVWludDhBcnJheShoZWFkZXIpO1xuICAgICAgICB2YXIgYmFpTWFnaWMgPSByZWFkSW50KHVuY2JhLCAwKTtcbiAgICAgICAgaWYgKGJhaU1hZ2ljICE9IEJBSV9NQUdJQykge1xuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwsICdOb3QgYSBCQUkgZmlsZSwgbWFnaWM9MHgnICsgYmFpTWFnaWMudG9TdHJpbmcoMTYpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBucmVmID0gcmVhZEludCh1bmNiYSwgNCk7XG5cbiAgICAgICAgYmFtLmluZGljZXMgPSBbXTtcblxuICAgICAgICB2YXIgcCA9IDg7XG4gICAgICAgIGZvciAodmFyIHJlZiA9IDA7IHJlZiA8IG5yZWY7ICsrcmVmKSB7XG4gICAgICAgICAgICB2YXIgYmxvY2tTdGFydCA9IHA7XG4gICAgICAgICAgICB2YXIgbyA9IF9nZXRCYWlSZWZMZW5ndGgodW5jYmEsIGJsb2NrU3RhcnQpO1xuICAgICAgICAgICAgcCArPSBvLmxlbmd0aDtcblxuICAgICAgICAgICAgbWluQmxvY2tJbmRleCA9IE1hdGgubWluKG8ubWluQmxvY2tJbmRleCwgbWluQmxvY2tJbmRleCk7XG5cbiAgICAgICAgICAgIHZhciBuYmluID0gby5uYmluO1xuXG4gICAgICAgICAgICBpZiAobmJpbiA+IDApIHtcbiAgICAgICAgICAgICAgICBiYW0uaW5kaWNlc1tyZWZdID0gbmV3IFVpbnQ4QXJyYXkoaGVhZGVyLCBibG9ja1N0YXJ0LCBwIC0gYmxvY2tTdGFydCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAoIWJhbS5pbmRleENodW5rcykge1xuICAgICAgICBiYW0uYmFpLmZldGNoKGZ1bmN0aW9uKGhlYWRlcikgeyAgIC8vIERvIHdlIHJlYWxseSBuZWVkIHRvIGZldGNoIHRoZSB3aG9sZSB0aGluZz8gOi0oXG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gcGFyc2VCYWkoaGVhZGVyKTtcbiAgICAgICAgICAgIGlmIChyZXN1bHQgIT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICBpZiAoYmFtLmJhaS51cmwgJiYgdHlwZW9mKGF0dGVtcHRlZCkgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQWxyZWFkeSBhdHRlbXB0ZWQgeC5iYW0uYmFpIG5vdCB0aGVyZSBzbyBub3cgdHJ5aW5nIHguYmFpXG4gICAgICAgICAgICAgICAgICAgIGJhbS5iYWkudXJsID0gYmFtLmRhdGEudXJsLnJlcGxhY2UobmV3IFJlZ0V4cCgnLmJhbSQnKSwgJy5iYWknKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAvLyBUcnVlIGxldHMgdXMga25vdyB3ZSBhcmUgbWFraW5nIGEgc2Vjb25kIGF0dGVtcHRcbiAgICAgICAgICAgICAgICAgICAgbWFrZUJhbTIoZGF0YSwgYmFtLmJhaSwgaW5kZXhDaHVua3MsIGNhbGxiYWNrLCB0cnVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFdlJ3ZlIGF0dGVtcHRlZCB4LmJhbS5iYWkgJiB4LmJhaSBhbmQgbm90aGluZyB3b3JrZWRcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sobnVsbCwgcmVzdWx0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBiYW0uZGF0YS5zbGljZSgwLCBtaW5CbG9ja0luZGV4KS5mZXRjaChwYXJzZUJhbUhlYWRlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pOyAgIC8vIFRpbWVvdXQgb24gZmlyc3QgcmVxdWVzdCB0byBjYXRjaCBDaHJvbWUgbWl4ZWQtY29udGVudCBlcnJvci5cbiAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgY2h1bmtzID0gYmFtLmluZGV4Q2h1bmtzLmNodW5rcztcbiAgICAgICAgYmFtLmluZGljZXMgPSBbXVxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNodW5rcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICBiYW0uaW5kaWNlc1tpXSA9IG51bGw7ICAvLyBUbyBiZSBmaWxsZWQgb3V0IGxhemlseSBhcyBuZWVkZWRcbiAgICAgICAgfVxuICAgICAgICBiYW0uZGF0YS5zbGljZSgwLCBtaW5CbG9ja0luZGV4KS5mZXRjaChwYXJzZUJhbUhlYWRlcik7XG4gICAgfVxufVxuXG5cblxuQmFtRmlsZS5wcm90b3R5cGUuYmxvY2tzRm9yUmFuZ2UgPSBmdW5jdGlvbihyZWZJZCwgbWluLCBtYXgpIHtcbiAgICB2YXIgaW5kZXggPSB0aGlzLmluZGljZXNbcmVmSWRdO1xuICAgIGlmICghaW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIHZhciBpbnRCaW5zTCA9IHJlZzJiaW5zKG1pbiwgbWF4KTtcbiAgICB2YXIgaW50QmlucyA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaW50Qmluc0wubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgaW50Qmluc1tpbnRCaW5zTFtpXV0gPSB0cnVlO1xuICAgIH1cbiAgICB2YXIgbGVhZkNodW5rcyA9IFtdLCBvdGhlckNodW5rcyA9IFtdO1xuXG4gICAgdmFyIG5iaW4gPSByZWFkSW50KGluZGV4LCAwKTtcbiAgICB2YXIgcCA9IDQ7XG4gICAgZm9yICh2YXIgYiA9IDA7IGIgPCBuYmluOyArK2IpIHtcbiAgICAgICAgdmFyIGJpbiA9IHJlYWRJbnQoaW5kZXgsIHApO1xuICAgICAgICB2YXIgbmNobmsgPSByZWFkSW50KGluZGV4LCBwKzQpO1xuLy8gICAgICAgIGRsb2coJ2Jpbj0nICsgYmluICsgJzsgbmNobms9JyArIG5jaG5rKTtcbiAgICAgICAgcCArPSA4O1xuICAgICAgICBpZiAoaW50Qmluc1tiaW5dKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBjID0gMDsgYyA8IG5jaG5rOyArK2MpIHtcbiAgICAgICAgICAgICAgICB2YXIgY3MgPSByZWFkVm9iKGluZGV4LCBwKTtcbiAgICAgICAgICAgICAgICB2YXIgY2UgPSByZWFkVm9iKGluZGV4LCBwICsgOCk7XG4gICAgICAgICAgICAgICAgKGJpbiA8IDQ2ODEgPyBvdGhlckNodW5rcyA6IGxlYWZDaHVua3MpLnB1c2gobmV3IENodW5rKGNzLCBjZSkpO1xuICAgICAgICAgICAgICAgIHAgKz0gMTY7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwICs9ICAobmNobmsgKiAxNik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gY29uc29sZS5sb2coJ2xlYWZDaHVua3MgPSAnICsgSlNPTi5zdHJpbmdpZnkobGVhZkNodW5rcykpO1xuICAgIC8vIGNvbnNvbGUubG9nKCdvdGhlckNodW5rcyA9ICcgKyBKU09OLnN0cmluZ2lmeShvdGhlckNodW5rcykpO1xuXG4gICAgdmFyIG5pbnR2ID0gcmVhZEludChpbmRleCwgcCk7XG4gICAgLy8gY29uc29sZS5sb2coJ25pbnR2PScgKyBuaW50dik7XG4gICAgdmFyIGxvd2VzdCA9IG51bGw7XG4gICAgdmFyIG1pbkxpbiA9IE1hdGgubWluKG1pbj4+MTQsIG5pbnR2IC0gMSksIG1heExpbiA9IE1hdGgubWluKG1heD4+MTQsIG5pbnR2IC0gMSk7XG4gICAgZm9yICh2YXIgaSA9IG1pbkxpbjsgaSA8PSBtYXhMaW47ICsraSkge1xuICAgICAgICB2YXIgbGIgPSAgcmVhZFZvYihpbmRleCwgcCArIDQgKyAoaSAqIDgpKTtcbiAgICAgICAgaWYgKCFsYikge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFsb3dlc3QgfHwgbGIuYmxvY2sgPCBsb3dlc3QuYmxvY2sgfHwgKGxiLmJsb2NrID09IGxvd2VzdC5ibG9jayAmJiBsYi5vZmZzZXQgPCBsb3dlc3Qub2Zmc2V0KSkge1xuICAgICAgICAgICAgbG93ZXN0ID0gbGI7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gY29uc29sZS5sb2coJ0xvd2VzdCBMQiA9ICcgKyBsb3dlc3QpO1xuXG4gICAgdmFyIHBydW5lZE90aGVyQ2h1bmtzID0gW107XG4gICAgaWYgKGxvd2VzdCAhPSBudWxsKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3RoZXJDaHVua3MubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIHZhciBjaG5rID0gb3RoZXJDaHVua3NbaV07XG4gICAgICAgICAgICBpZiAoY2huay5tYXh2LmJsb2NrID4gbG93ZXN0LmJsb2NrIHx8IChjaG5rLm1heHYuYmxvY2sgPT0gbG93ZXN0LmJsb2NrICYmIGNobmsubWF4di5vZmZzZXQgPj0gbG93ZXN0Lm9mZnNldCkpIHtcbiAgICAgICAgICAgICAgICBwcnVuZWRPdGhlckNodW5rcy5wdXNoKGNobmspO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8vIGNvbnNvbGUubG9nKCdwcnVuZWRPdGhlckNodW5rcyA9ICcgKyBKU09OLnN0cmluZ2lmeShwcnVuZWRPdGhlckNodW5rcykpO1xuICAgIG90aGVyQ2h1bmtzID0gcHJ1bmVkT3RoZXJDaHVua3M7XG5cbiAgICB2YXIgaW50Q2h1bmtzID0gW107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvdGhlckNodW5rcy5sZW5ndGg7ICsraSkge1xuICAgICAgICBpbnRDaHVua3MucHVzaChvdGhlckNodW5rc1tpXSk7XG4gICAgfVxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVhZkNodW5rcy5sZW5ndGg7ICsraSkge1xuICAgICAgICBpbnRDaHVua3MucHVzaChsZWFmQ2h1bmtzW2ldKTtcbiAgICB9XG5cbiAgICBpbnRDaHVua3Muc29ydChmdW5jdGlvbihjMCwgYzEpIHtcbiAgICAgICAgdmFyIGRpZiA9IGMwLm1pbnYuYmxvY2sgLSBjMS5taW52LmJsb2NrO1xuICAgICAgICBpZiAoZGlmICE9IDApIHtcbiAgICAgICAgICAgIHJldHVybiBkaWY7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gYzAubWludi5vZmZzZXQgLSBjMS5taW52Lm9mZnNldDtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHZhciBtZXJnZWRDaHVua3MgPSBbXTtcbiAgICBpZiAoaW50Q2h1bmtzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgdmFyIGN1ciA9IGludENodW5rc1swXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBpbnRDaHVua3MubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIHZhciBuYyA9IGludENodW5rc1tpXTtcbiAgICAgICAgICAgIGlmIChuYy5taW52LmJsb2NrID09IGN1ci5tYXh2LmJsb2NrIC8qICYmIG5jLm1pbnYub2Zmc2V0ID09IGN1ci5tYXh2Lm9mZnNldCAqLykgeyAvLyBubyBwb2ludCBzcGxpdHRpbmcgbWlkLWJsb2NrXG4gICAgICAgICAgICAgICAgY3VyID0gbmV3IENodW5rKGN1ci5taW52LCBuYy5tYXh2KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbWVyZ2VkQ2h1bmtzLnB1c2goY3VyKTtcbiAgICAgICAgICAgICAgICBjdXIgPSBuYztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBtZXJnZWRDaHVua3MucHVzaChjdXIpO1xuICAgIH1cbiAgICAvLyBjb25zb2xlLmxvZygnbWVyZ2VkQ2h1bmtzID0gJyArIEpTT04uc3RyaW5naWZ5KG1lcmdlZENodW5rcykpO1xuXG4gICAgcmV0dXJuIG1lcmdlZENodW5rcztcbn1cblxuQmFtRmlsZS5wcm90b3R5cGUuZmV0Y2ggPSBmdW5jdGlvbihjaHIsIG1pbiwgbWF4LCBjYWxsYmFjaywgb3B0cykge1xuICAgIHZhciB0aGlzQiA9IHRoaXM7XG4gICAgb3B0cyA9IG9wdHMgfHwge307XG5cbiAgICB2YXIgY2hySWQgPSB0aGlzLmNoclRvSW5kZXhbY2hyXTtcbiAgICB2YXIgY2h1bmtzO1xuICAgIGlmIChjaHJJZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGNodW5rcyA9IFtdO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEZldGNoIHRoaXMgcG9ydGlvbiBvZiB0aGUgQkFJIGlmIGl0IGhhc24ndCBiZWVuIGxvYWRlZCB5ZXQuXG4gICAgICAgIGlmICh0aGlzLmluZGljZXNbY2hySWRdID09PSBudWxsICYmIHRoaXMuaW5kZXhDaHVua3MuY2h1bmtzW2NocklkXSkge1xuICAgICAgICAgICAgdmFyIHN0YXJ0X3N0b3AgPSB0aGlzLmluZGV4Q2h1bmtzLmNodW5rc1tjaHJJZF07XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5iYWkuc2xpY2Uoc3RhcnRfc3RvcFswXSwgc3RhcnRfc3RvcFsxXSkuZmV0Y2goZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgIHZhciBidWZmZXIgPSBuZXcgVWludDhBcnJheShkYXRhKTtcbiAgICAgICAgICAgICAgICB0aGlzLmluZGljZXNbY2hySWRdID0gYnVmZmVyO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmZldGNoKGNociwgbWluLCBtYXgsIGNhbGxiYWNrLCBvcHRzKTtcbiAgICAgICAgICAgIH0uYmluZCh0aGlzKSk7XG4gICAgICAgIH1cblxuICAgICAgICBjaHVua3MgPSB0aGlzLmJsb2Nrc0ZvclJhbmdlKGNocklkLCBtaW4sIG1heCk7XG4gICAgICAgIGlmICghY2h1bmtzKSB7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCAnRXJyb3IgaW4gaW5kZXggZmV0Y2gnKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICB2YXIgcmVjb3JkcyA9IFtdO1xuICAgIHZhciBpbmRleCA9IDA7XG4gICAgdmFyIGRhdGE7XG5cbiAgICBmdW5jdGlvbiB0cmFtcCgpIHtcbiAgICAgICAgaWYgKGluZGV4ID49IGNodW5rcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhyZWNvcmRzKTtcbiAgICAgICAgfSBlbHNlIGlmICghZGF0YSkge1xuICAgICAgICAgICAgdmFyIGMgPSBjaHVua3NbaW5kZXhdO1xuICAgICAgICAgICAgdmFyIGZldGNoTWluID0gYy5taW52LmJsb2NrO1xuICAgICAgICAgICAgdmFyIGZldGNoTWF4ID0gYy5tYXh2LmJsb2NrICsgKDE8PDE2KTsgLy8gKnNpZ2gqXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnZmV0Y2hpbmcgJyArIGZldGNoTWluICsgJzonICsgZmV0Y2hNYXgpO1xuICAgICAgICAgICAgdGhpc0IuZGF0YS5zbGljZShmZXRjaE1pbiwgZmV0Y2hNYXggLSBmZXRjaE1pbikuZmV0Y2goZnVuY3Rpb24ocikge1xuICAgICAgICAgICAgICAgIGRhdGEgPSB1bmJnemYociwgYy5tYXh2LmJsb2NrIC0gYy5taW52LmJsb2NrICsgMSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRyYW1wKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciBiYSA9IG5ldyBVaW50OEFycmF5KGRhdGEpO1xuICAgICAgICAgICAgdmFyIGZpbmlzaGVkID0gdGhpc0IucmVhZEJhbVJlY29yZHMoYmEsIGNodW5rc1tpbmRleF0ubWludi5vZmZzZXQsIHJlY29yZHMsIG1pbiwgbWF4LCBjaHJJZCwgb3B0cyk7XG4gICAgICAgICAgICBkYXRhID0gbnVsbDtcbiAgICAgICAgICAgICsraW5kZXg7XG4gICAgICAgICAgICBpZiAoZmluaXNoZWQpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKHJlY29yZHMpO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHJldHVybiB0cmFtcCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHRyYW1wKCk7XG59XG5cbnZhciBTRVFSRVRfREVDT0RFUiA9IFsnPScsICdBJywgJ0MnLCAneCcsICdHJywgJ3gnLCAneCcsICd4JywgJ1QnLCAneCcsICd4JywgJ3gnLCAneCcsICd4JywgJ3gnLCAnTiddO1xudmFyIENJR0FSX0RFQ09ERVIgPSBbJ00nLCAnSScsICdEJywgJ04nLCAnUycsICdIJywgJ1AnLCAnPScsICdYJywgJz8nLCAnPycsICc/JywgJz8nLCAnPycsICc/JywgJz8nXTtcblxuZnVuY3Rpb24gQmFtUmVjb3JkKCkge1xufVxuXG5CYW1GaWxlLnByb3RvdHlwZS5yZWFkQmFtUmVjb3JkcyA9IGZ1bmN0aW9uKGJhLCBvZmZzZXQsIHNpbmssIG1pbiwgbWF4LCBjaHJJZCwgb3B0cykge1xuICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgIHZhciBibG9ja1NpemUgPSByZWFkSW50KGJhLCBvZmZzZXQpO1xuICAgICAgICB2YXIgYmxvY2tFbmQgPSBvZmZzZXQgKyBibG9ja1NpemUgKyA0O1xuICAgICAgICBpZiAoYmxvY2tFbmQgPiBiYS5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciByZWNvcmQgPSBuZXcgQmFtUmVjb3JkKCk7XG5cbiAgICAgICAgdmFyIHJlZklEID0gcmVhZEludChiYSwgb2Zmc2V0ICsgNCk7XG4gICAgICAgIHZhciBwb3MgPSByZWFkSW50KGJhLCBvZmZzZXQgKyA4KTtcbiAgICAgICAgXG4gICAgICAgIHZhciBibW4gPSByZWFkSW50KGJhLCBvZmZzZXQgKyAxMik7XG4gICAgICAgIHZhciBiaW4gPSAoYm1uICYgMHhmZmZmMDAwMCkgPj4gMTY7XG4gICAgICAgIHZhciBtcSA9IChibW4gJiAweGZmMDApID4+IDg7XG4gICAgICAgIHZhciBubCA9IGJtbiAmIDB4ZmY7XG5cbiAgICAgICAgdmFyIGZsYWdfbmMgPSByZWFkSW50KGJhLCBvZmZzZXQgKyAxNik7XG4gICAgICAgIHZhciBmbGFnID0gKGZsYWdfbmMgJiAweGZmZmYwMDAwKSA+PiAxNjtcbiAgICAgICAgdmFyIG5jID0gZmxhZ19uYyAmIDB4ZmZmZjtcbiAgICBcbiAgICAgICAgdmFyIGxzZXEgPSByZWFkSW50KGJhLCBvZmZzZXQgKyAyMCk7XG4gICAgICAgIFxuICAgICAgICB2YXIgbmV4dFJlZiAgPSByZWFkSW50KGJhLCBvZmZzZXQgKyAyNCk7XG4gICAgICAgIHZhciBuZXh0UG9zID0gcmVhZEludChiYSwgb2Zmc2V0ICsgMjgpO1xuICAgICAgICBcbiAgICAgICAgdmFyIHRsZW4gPSByZWFkSW50KGJhLCBvZmZzZXQgKyAzMik7XG4gICAgXG4gICAgICAgIHJlY29yZC5zZWdtZW50ID0gdGhpcy5pbmRleFRvQ2hyW3JlZklEXTtcbiAgICAgICAgcmVjb3JkLmZsYWcgPSBmbGFnO1xuICAgICAgICByZWNvcmQucG9zID0gcG9zO1xuICAgICAgICByZWNvcmQubXEgPSBtcTtcbiAgICAgICAgaWYgKG9wdHMubGlnaHQpXG4gICAgICAgICAgICByZWNvcmQuc2VxTGVuZ3RoID0gbHNlcTtcblxuICAgICAgICBpZiAoIW9wdHMubGlnaHQgfHwgb3B0cy5pbmNsdWRlTmFtZSkge1xuICAgICAgICAgICAgdmFyIHJlYWROYW1lID0gJyc7XG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG5sLTE7ICsraikge1xuICAgICAgICAgICAgICAgIHJlYWROYW1lICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYmFbb2Zmc2V0ICsgMzYgKyBqXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZWNvcmQucmVhZE5hbWUgPSByZWFkTmFtZTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKCFvcHRzLmxpZ2h0KSB7XG4gICAgICAgICAgICBpZiAobmV4dFJlZiA+PSAwKSB7XG4gICAgICAgICAgICAgICAgcmVjb3JkLm5leHRTZWdtZW50ID0gdGhpcy5pbmRleFRvQ2hyW25leHRSZWZdO1xuICAgICAgICAgICAgICAgIHJlY29yZC5uZXh0UG9zID0gbmV4dFBvcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgICAgICB2YXIgcCA9IG9mZnNldCArIDM2ICsgbmw7XG5cbiAgICAgICAgICAgIHZhciBjaWdhciA9ICcnO1xuICAgICAgICAgICAgZm9yICh2YXIgYyA9IDA7IGMgPCBuYzsgKytjKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNpZ29wID0gcmVhZEludChiYSwgcCk7XG4gICAgICAgICAgICAgICAgY2lnYXIgPSBjaWdhciArIChjaWdvcD4+NCkgKyBDSUdBUl9ERUNPREVSW2NpZ29wICYgMHhmXTtcbiAgICAgICAgICAgICAgICBwICs9IDQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZWNvcmQuY2lnYXIgPSBjaWdhcjtcbiAgICAgICAgXG4gICAgICAgICAgICB2YXIgc2VxID0gJyc7XG4gICAgICAgICAgICB2YXIgc2VxQnl0ZXMgPSAobHNlcSArIDEpID4+IDE7XG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHNlcUJ5dGVzOyArK2opIHtcbiAgICAgICAgICAgICAgICB2YXIgc2IgPSBiYVtwICsgal07XG4gICAgICAgICAgICAgICAgc2VxICs9IFNFUVJFVF9ERUNPREVSWyhzYiAmIDB4ZjApID4+IDRdO1xuICAgICAgICAgICAgICAgIGlmIChzZXEubGVuZ3RoIDwgbHNlcSlcbiAgICAgICAgICAgICAgICAgICAgc2VxICs9IFNFUVJFVF9ERUNPREVSWyhzYiAmIDB4MGYpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHAgKz0gc2VxQnl0ZXM7XG4gICAgICAgICAgICByZWNvcmQuc2VxID0gc2VxO1xuXG4gICAgICAgICAgICB2YXIgcXNlcSA9ICcnO1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBsc2VxOyArK2opIHtcbiAgICAgICAgICAgICAgICBxc2VxICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYmFbcCArIGpdICsgMzMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcCArPSBsc2VxO1xuICAgICAgICAgICAgcmVjb3JkLnF1YWxzID0gcXNlcTtcblxuICAgICAgICAgICAgd2hpbGUgKHAgPCBibG9ja0VuZCkge1xuICAgICAgICAgICAgICAgIHZhciB0YWcgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJhW3BdLCBiYVtwICsgMV0pO1xuICAgICAgICAgICAgICAgIHZhciB0eXBlID0gU3RyaW5nLmZyb21DaGFyQ29kZShiYVtwICsgMl0pO1xuICAgICAgICAgICAgICAgIHZhciB2YWx1ZTtcblxuICAgICAgICAgICAgICAgIGlmICh0eXBlID09ICdBJykge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoYmFbcCArIDNdKTtcbiAgICAgICAgICAgICAgICAgICAgcCArPSA0O1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PSAnaScgfHwgdHlwZSA9PSAnSScpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSByZWFkSW50KGJhLCBwICsgMyk7XG4gICAgICAgICAgICAgICAgICAgIHAgKz0gNztcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT0gJ2MnIHx8IHR5cGUgPT0gJ0MnKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gYmFbcCArIDNdO1xuICAgICAgICAgICAgICAgICAgICBwICs9IDQ7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlID09ICdzJyB8fCB0eXBlID09ICdTJykge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHJlYWRTaG9ydChiYSwgcCArIDMpO1xuICAgICAgICAgICAgICAgICAgICBwICs9IDU7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlID09ICdmJykge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHJlYWRGbG9hdChiYSwgcCArIDMpO1xuICAgICAgICAgICAgICAgICAgICBwICs9IDc7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlID09ICdaJyB8fCB0eXBlID09ICdIJykge1xuICAgICAgICAgICAgICAgICAgICBwICs9IDM7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIGZvciAoOzspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjYyA9IGJhW3ArK107XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2MgPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGNjKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PSAnQicpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGF0eXBlID0gU3RyaW5nLmZyb21DaGFyQ29kZShiYVtwICsgM10pO1xuICAgICAgICAgICAgICAgICAgICB2YXIgYWxlbiA9IHJlYWRJbnQoYmEsIHAgKyA0KTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVsZW47XG4gICAgICAgICAgICAgICAgICAgIHZhciByZWFkZXI7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhdHlwZSA9PSAnaScgfHwgYXR5cGUgPT0gJ0knIHx8IGF0eXBlID09ICdmJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbiA9IDQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXR5cGUgPT0gJ2YnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRlciA9IHJlYWRGbG9hdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkZXIgPSByZWFkSW50O1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGF0eXBlID09ICdzJyB8fCBhdHlwZSA9PSAnUycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW4gPSAyO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gcmVhZFNob3J0O1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGF0eXBlID09ICdjJyB8fCBhdHlwZSA9PSAnQycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW4gPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVhZGVyID0gcmVhZEJ5dGU7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyAnVW5rbm93biBhcnJheSB0eXBlICcgKyBhdHlwZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHAgKz0gODtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhbGVuOyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlLnB1c2gocmVhZGVyKGJhLCBwKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBwICs9IGVsZW47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyAnVW5rbm93biB0eXBlICcrIHR5cGU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJlY29yZFt0YWddID0gdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIW1pbiB8fCByZWNvcmQucG9zIDw9IG1heCAmJiByZWNvcmQucG9zICsgbHNlcSA+PSBtaW4pIHtcbiAgICAgICAgICAgIGlmIChjaHJJZCA9PT0gdW5kZWZpbmVkIHx8IHJlZklEID09IGNocklkKSB7XG4gICAgICAgICAgICAgICAgc2luay5wdXNoKHJlY29yZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlY29yZC5wb3MgPiBtYXgpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIG9mZnNldCA9IGJsb2NrRW5kO1xuICAgIH1cblxuICAgIC8vIEV4aXRzIHZpYSB0b3Agb2YgbG9vcC5cbn07XG5cbmlmICh0eXBlb2YobW9kdWxlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IHtcbiAgICAgICAgbWFrZUJhbTogbWFrZUJhbSxcbiAgICAgICAgQkFNX01BR0lDOiBCQU1fTUFHSUMsXG4gICAgICAgIEJBSV9NQUdJQzogQkFJX01BR0lDLFxuICAgICAgICBCYW1GbGFnczogQmFtRmxhZ3NcbiAgICB9O1xufVxuIiwiLyogLSotIG1vZGU6IGphdmFzY3JpcHQ7IGMtYmFzaWMtb2Zmc2V0OiA0OyBpbmRlbnQtdGFicy1tb2RlOiBuaWwgLSotICovXG5cbi8vIFxuLy8gRGFsbGlhbmNlIEdlbm9tZSBFeHBsb3JlclxuLy8gKGMpIFRob21hcyBEb3duIDIwMDYtMjAxNFxuLy9cbi8vIGJlZHdpZy5qc1xuLy9cblxuXCJ1c2Ugc3RyaWN0XCI7XG5cbmlmICh0eXBlb2YocmVxdWlyZSkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgdmFyIHNwYW5zID0gcmVxdWlyZSgnLi9zcGFucycpO1xuICAgIHZhciBSYW5nZSA9IHNwYW5zLlJhbmdlO1xuICAgIHZhciB1bmlvbiA9IHNwYW5zLnVuaW9uO1xuICAgIHZhciBpbnRlcnNlY3Rpb24gPSBzcGFucy5pbnRlcnNlY3Rpb247XG5cbiAgICB2YXIgc2EgPSByZXF1aXJlKCcuL3NvdXJjZWFkYXB0ZXJzJyk7XG4gICAgdmFyIGRhbGxpYW5jZV9yZWdpc3RlclBhcnNlckZhY3RvcnkgPSBzYS5yZWdpc3RlclBhcnNlckZhY3Rvcnk7XG5cbiAgICB2YXIgZGFzID0gcmVxdWlyZSgnLi9kYXMnKTtcbiAgICB2YXIgREFTU3R5bGVzaGVldCA9IGRhcy5EQVNTdHlsZXNoZWV0O1xuICAgIHZhciBEQVNTdHlsZSA9IGRhcy5EQVNTdHlsZTtcbiAgICB2YXIgREFTRmVhdHVyZSA9IGRhcy5EQVNGZWF0dXJlO1xuICAgIHZhciBEQVNHcm91cCA9IGRhcy5EQVNHcm91cDtcblxuICAgIHZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcbiAgICB2YXIgc2hhbGxvd0NvcHkgPSB1dGlscy5zaGFsbG93Q29weTtcbn1cblxuXG5mdW5jdGlvbiBCZWRXaWdQYXJzZXIodHlwZSkge1xuICAgIHRoaXMudHlwZSA9IHR5cGU7XG59XG5cbkJlZFdpZ1BhcnNlci5wcm90b3R5cGUuY3JlYXRlU2Vzc2lvbiA9IGZ1bmN0aW9uKHNpbmspIHtcbiAgICBpZiAodGhpcy50eXBlID09ICd3aWcnKVxuICAgICAgICByZXR1cm4gbmV3IFdpZ1BhcnNlU2Vzc2lvbih0aGlzLCBzaW5rKTtcbiAgICBlbHNlXG4gICAgICAgIHJldHVybiBuZXcgQmVkUGFyc2VTZXNzaW9uKHRoaXMsIHNpbmspO1xufVxuXG52YXIgX19LVl9SRUdFWFA9LyhbXj1dKyk9KC4rKS87XG52YXIgX19TUEFDRV9SRUdFWFA9L1xccy87XG52YXIgQkVEX0NPTE9SX1JFR0VYUCA9IG5ldyBSZWdFeHAoXCJeWzAtOV0rLFswLTldKyxbMC05XStcIik7XG5cbmZ1bmN0aW9uIEJlZFBhcnNlU2Vzc2lvbihwYXJzZXIsIHNpbmspIHtcbiAgICB0aGlzLnBhcnNlciA9IHBhcnNlcjtcbiAgICB0aGlzLnNpbmsgPSBzaW5rO1xufVxuXG5CZWRQYXJzZVNlc3Npb24ucHJvdG90eXBlLnBhcnNlID0gZnVuY3Rpb24obGluZSkge1xuICAgIHZhciB0b2tzID0gbGluZS5zcGxpdChfX1NQQUNFX1JFR0VYUCk7XG4gICAgaWYgKHRva3MubGVuZ3RoIDwgMylcbiAgICAgICAgcmV0dXJuO1xuXG4gICAgdmFyIHN0YXJ0ID0gcGFyc2VJbnQodG9rc1sxXSkgKyAxO1xuICAgIHZhciBlbmQgPSBwYXJzZUludCh0b2tzWzJdKTtcblxuICAgIHZhciBmID0ge3NlZ21lbnQ6IHRva3NbMF0sIFxuICAgICAgICAgICAgIG1pbjogc3RhcnQsXG4gICAgICAgICAgICAgbWF4OiBlbmR9O1xuXG4gICAgaWYgKHRva3MubGVuZ3RoID4gMyAmJiB0b2tzWzNdICE9PSAnLicpIHtcbiAgICAgICAgZi5sYWJlbCA9IHRva3NbM107XG4gICAgfVxuXG4gICAgaWYgKHRva3MubGVuZ3RoID4gNCkge1xuICAgICAgICBmLnNjb3JlID0gcGFyc2VGbG9hdCh0b2tzWzRdKVxuICAgIH1cblxuICAgIGlmICh0b2tzLmxlbmd0aCA+IDUpIHtcbiAgICAgICAgZi5vcmllbnRhdGlvbiA9IHRva3NbNV07XG4gICAgfVxuXG4gICAgaWYgKHRva3MubGVuZ3RoID4gOCkge1xuICAgICAgICB2YXIgY29sb3IgPSB0b2tzWzhdO1xuICAgICAgICBpZiAoQkVEX0NPTE9SX1JFR0VYUC50ZXN0KGNvbG9yKSkge1xuICAgICAgICAgICAgZi5pdGVtUmdiID0gJ3JnYignICsgY29sb3IgKyAnKSc7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodG9rcy5sZW5ndGggPj0gMTIpIHtcbiAgICAgICAgdmFyIHRoaWNrU3RhcnQgPSBwYXJzZUludCh0b2tzWzZdKTtcbiAgICAgICAgdmFyIHRoaWNrRW5kICAgPSBwYXJzZUludCh0b2tzWzddKTtcbiAgICAgICAgdmFyIGJsb2NrQ291bnQgPSBwYXJzZUludCh0b2tzWzldKTtcbiAgICAgICAgdmFyIGJsb2NrU2l6ZXMgPSB0b2tzWzEwXS5zcGxpdCgnLCcpLm1hcChmdW5jdGlvbih4KSB7cmV0dXJuIHBhcnNlSW50KHgpfSk7XG4gICAgICAgIHZhciBibG9ja1N0YXJ0cyA9IHRva3NbMTFdLnNwbGl0KCcsJykubWFwKGZ1bmN0aW9uKHgpIHtyZXR1cm4gcGFyc2VJbnQoeCl9KTtcblxuICAgICAgICBmLnR5cGUgPSAndHJhbnNjcmlwdCdcbiAgICAgICAgdmFyIGdycCA9IG5ldyBEQVNHcm91cCgpO1xuICAgICAgICBncnAuaWQgPSB0b2tzWzNdO1xuICAgICAgICBncnAudHlwZSA9ICd0cmFuc2NyaXB0J1xuICAgICAgICBncnAubm90ZXMgPSBbXTtcbiAgICAgICAgZi5ncm91cHMgPSBbZ3JwXTtcblxuICAgICAgICBpZiAodG9rcy5sZW5ndGggPiAxMikge1xuICAgICAgICAgICAgdmFyIGdlbmVJZCA9IHRva3NbMTJdO1xuICAgICAgICAgICAgdmFyIGdlbmVOYW1lID0gZ2VuZUlkO1xuICAgICAgICAgICAgaWYgKHRva3MubGVuZ3RoID4gMTMpIHtcbiAgICAgICAgICAgICAgICBnZW5lTmFtZSA9IHRva3NbMTNdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGdnID0gbmV3IERBU0dyb3VwKCk7XG4gICAgICAgICAgICBnZy5pZCA9IGdlbmVJZDtcbiAgICAgICAgICAgIGdnLmxhYmVsID0gZ2VuZU5hbWU7XG4gICAgICAgICAgICBnZy50eXBlID0gJ2dlbmUnO1xuICAgICAgICAgICAgZi5ncm91cHMucHVzaChnZyk7XG4gICAgICAgIH0gIFxuXG4gICAgICAgIHZhciBzcGFucyA9IG51bGw7XG4gICAgICAgIGZvciAodmFyIGIgPSAwOyBiIDwgYmxvY2tDb3VudDsgKytiKSB7XG4gICAgICAgICAgICB2YXIgYm1pbiA9IGJsb2NrU3RhcnRzW2JdICsgc3RhcnQ7XG4gICAgICAgICAgICB2YXIgYm1heCA9IGJtaW4gKyBibG9ja1NpemVzW2JdO1xuICAgICAgICAgICAgdmFyIHNwYW4gPSBuZXcgUmFuZ2UoYm1pbiwgYm1heCk7XG4gICAgICAgICAgICBpZiAoc3BhbnMpIHtcbiAgICAgICAgICAgICAgICBzcGFucyA9IHVuaW9uKHNwYW5zLCBzcGFuKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc3BhbnMgPSBzcGFuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICB2YXIgdHNMaXN0ID0gc3BhbnMucmFuZ2VzKCk7XG4gICAgICAgIGZvciAodmFyIHMgPSAwOyBzIDwgdHNMaXN0Lmxlbmd0aDsgKytzKSB7XG4gICAgICAgICAgICB2YXIgdHMgPSB0c0xpc3Rbc107XG4gICAgICAgICAgICB2YXIgYmYgPSBzaGFsbG93Q29weShmKTtcbiAgICAgICAgICAgIGJmLm1pbiA9IHRzLm1pbigpO1xuICAgICAgICAgICAgYmYubWF4ID0gdHMubWF4KCk7XG4gICAgICAgICAgICB0aGlzLnNpbmsoYmYpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaWNrRW5kID4gdGhpY2tTdGFydCkge1xuICAgICAgICAgICAgdmFyIGNvZGluZ1JlZ2lvbiA9IChmLm9yaWVudGF0aW9uID09ICcrJykgPyBcbiAgICAgICAgICAgICAgICBuZXcgUmFuZ2UodGhpY2tTdGFydCwgdGhpY2tFbmQgKyAzKSA6IFxuICAgICAgICAgICAgICAgIG5ldyBSYW5nZSh0aGlja1N0YXJ0IC0gMywgdGhpY2tFbmQpO1xuICAgICAgICAgICAgICAgIC8vICsvLSAzIHRvIGFjY291bnQgZm9yIHN0b3AgY29kb25cblxuICAgICAgICAgICAgdmFyIHRsID0gaW50ZXJzZWN0aW9uKHNwYW5zLCBjb2RpbmdSZWdpb24pO1xuICAgICAgICAgICAgaWYgKHRsKSB7XG4gICAgICAgICAgICAgICAgZi50eXBlID0gJ3RyYW5zbGF0aW9uJztcbiAgICAgICAgICAgICAgICB2YXIgdGxMaXN0ID0gdGwucmFuZ2VzKCk7XG4gICAgICAgICAgICAgICAgdmFyIHJlYWRpbmdGcmFtZSA9IDA7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgcyA9IDA7IHMgPCB0bExpc3QubGVuZ3RoOyArK3MpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gUmVjb3JkIHJlYWRpbmcgZnJhbWUgZm9yIGV2ZXJ5IGV4b25cbiAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gcztcbiAgICAgICAgICAgICAgICAgICAgaWYgKGYub3JpZW50YXRpb24gPT0gJy0nKVxuICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXggPSB0bExpc3QubGVuZ3RoIC0gcyAtIDE7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0cyA9IHRsTGlzdFtpbmRleF07XG4gICAgICAgICAgICAgICAgICAgIHZhciBiZiA9IHNoYWxsb3dDb3B5KGYpO1xuICAgICAgICAgICAgICAgICAgICBiZi5taW4gPSB0cy5taW4oKTtcbiAgICAgICAgICAgICAgICAgICAgYmYubWF4ID0gdHMubWF4KCk7XG4gICAgICAgICAgICAgICAgICAgIGYucmVhZGZyYW1lID0gcmVhZGluZ0ZyYW1lO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbGVuZ3RoID0gdHMubWF4KCkgLSB0cy5taW4oKTtcbiAgICAgICAgICAgICAgICAgICAgcmVhZGluZ0ZyYW1lID0gKHJlYWRpbmdGcmFtZSArIGxlbmd0aCkgJSAzO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNpbmsoYmYpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuc2luayhmKTtcbiAgICB9XG59XG5cbkJlZFBhcnNlU2Vzc2lvbi5wcm90b3R5cGUuZmx1c2ggPSBmdW5jdGlvbigpIHt9O1xuXG5mdW5jdGlvbiBXaWdQYXJzZVNlc3Npb24ocGFyc2VyLCBzaW5rKSB7XG4gICAgdGhpcy5wYXJzZXIgPSBwYXJzZXI7XG4gICAgdGhpcy5zaW5rID0gc2luaztcbiAgICB0aGlzLndpZ1N0YXRlID0gbnVsbDtcbn1cblxuV2lnUGFyc2VTZXNzaW9uLnByb3RvdHlwZS5wYXJzZSA9IGZ1bmN0aW9uKGxpbmUpIHtcbiAgICB2YXIgdG9rcyA9IGxpbmUuc3BsaXQoX19TUEFDRV9SRUdFWFApO1xuXG4gICAgaWYgKHRva3NbMF0gPT0gJ2ZpeGVkU3RlcCcpIHtcbiAgICAgICAgdGhpcy53aWdTdGF0ZSA9ICdmaXhlZFN0ZXAnO1xuICAgICAgICB0aGlzLmNociA9IHRoaXMucG9zID0gdGhpcy5zdGVwID0gbnVsbDtcbiAgICAgICAgdGhpcy5zcGFuID0gMTtcblxuICAgICAgICBmb3IgKHZhciB0aSA9IDE7IHRpIDwgdG9rcy5sZW5ndGg7ICsrdGkpIHtcbiAgICAgICAgICAgIHZhciBtID0gX19LVl9SRUdFWFAuZXhlYyh0b2tzW3RpXSk7XG4gICAgICAgICAgICBpZiAobSkge1xuICAgICAgICAgICAgICAgIGlmIChtWzFdID09ICdjaHJvbScpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaHIgPSBtWzJdO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobVsxXSA9PSAnc3RhcnQnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucG9zID0gcGFyc2VJbnQobVsyXSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChtWzFdID09ICdzdGVwJykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0ZXAgPSBwYXJzZUludChtWzJdKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG1bMV0gPT0gJ3NwYW4nKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3BhbiA9IHBhcnNlSW50KG1bMl0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0gZWxzZSBpZiAodG9rc1swXSA9PSAndmFyaWFibGVTdGVwJykge1xuICAgICAgICB0aGlzLndpZ1N0YXRlID0gJ3ZhcmlhYmxlU3RlcCc7XG4gICAgICAgIHRoaXMuY2hyID0gbnVsbDtcbiAgICAgICAgdGhpcy5zcGFuID0gMTtcblxuICAgICAgICBmb3IgKHZhciB0aSA9IDE7IHRpIDwgdG9rcy5sZW5ndGg7ICsrdGkpIHtcbiAgICAgICAgICAgIHZhciBtID0gX19LVl9SRUdFWFAuZXhlYyh0b2tzW3RpXSk7XG4gICAgICAgICAgICBpZiAobVsxXSA9PSAnY2hyb20nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jaHIgPSBtWzJdO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChtWzFdID09ICdzcGFuJykge1xuICAgICAgICAgICAgICAgIHRoaXMuc3BhbiA9IHBhcnNlSW50KG1bMl0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKCF0aGlzLndpZ1N0YXRlKSB7XG4gICAgICAgICAgICBpZiAodG9rcy5sZW5ndGggPCA0KVxuICAgICAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICAgICAgdmFyIGYgPSB7c2VnbWVudDogdG9rc1swXSwgXG4gICAgICAgICAgICAgICAgICAgICBtaW46IHBhcnNlSW50KHRva3NbMV0pICsgMSwgXG4gICAgICAgICAgICAgICAgICAgICBtYXg6IHBhcnNlSW50KHRva3NbMl0pLFxuICAgICAgICAgICAgICAgICAgICAgc2NvcmU6IHBhcnNlRmxvYXQodG9rc1szXSl9O1xuXG4gICAgICAgICAgICB0aGlzLnNpbmsoZik7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy53aWdTdGF0ZSA9PSAnZml4ZWRTdGVwJykge1xuICAgICAgICAgICAgaWYgKHRva3MubGVuZ3RoICE9IDEpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgdmFyIHNjb3JlID0gcGFyc2VGbG9hdCh0b2tzWzBdKTtcbiAgICAgICAgICAgIHZhciBmID0ge3NlZ21lbnQ6IHRoaXMuY2hyLCBtaW46IHRoaXMucG9zLCBtYXg6IHRoaXMucG9zICsgdGhpcy5zcGFuIC0gMSwgc2NvcmU6IHNjb3JlfTtcbiAgICAgICAgICAgIHRoaXMucG9zICs9IHRoaXMuc3RlcDtcbiAgICAgICAgICAgIHRoaXMuc2luayhmKTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLndpZ1N0YXRlID09ICd2YXJpYWJsZVN0ZXAnKSB7XG4gICAgICAgICAgICBpZiAodG9rcy5sZW5ndGggIT0gMilcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB2YXIgcG9zID0gcGFyc2VJbnQodG9rc1swXSk7XG4gICAgICAgICAgICB2YXIgc2NvcmUgPSBwYXJzZUZsb2F0KHRva3NbMV0pO1xuICAgICAgICAgICAgdmFyIGYgPSB7c2VnbWVudDogdGhpcy5jaHIsIG1pbjogcG9zLCBtYXg6IHBvcyArIHRoaXMuc3BhbiAtIDEsIHNjb3JlOiBzY29yZX07XG4gICAgICAgICAgICB0aGlzLnNpbmsoZik7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbldpZ1BhcnNlU2Vzc2lvbi5wcm90b3R5cGUuZmx1c2ggPSBmdW5jdGlvbigpIHt9O1xuXG5CZWRXaWdQYXJzZXIucHJvdG90eXBlLmdldFN0eWxlU2hlZXQgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgIHZhciB0aGlzQiA9IHRoaXM7XG4gICAgdmFyIHN0eWxlc2hlZXQgPSBuZXcgREFTU3R5bGVzaGVldCgpO1xuXG4gICAgaWYgKHRoaXMudHlwZSA9PSAnd2lnJykge1xuICAgICAgICB2YXIgd2lnU3R5bGUgPSBuZXcgREFTU3R5bGUoKTtcbiAgICAgICAgd2lnU3R5bGUuZ2x5cGggPSAnSElTVE9HUkFNJztcbiAgICAgICAgd2lnU3R5bGUuQkdDT0xPUiA9ICdibHVlJztcbiAgICAgICAgd2lnU3R5bGUuSEVJR0hUPTMwO1xuICAgICAgICBzdHlsZXNoZWV0LnB1c2hTdHlsZSh7dHlwZTogJ2RlZmF1bHQnfSwgbnVsbCwgd2lnU3R5bGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciB3aWdTdHlsZSA9IG5ldyBEQVNTdHlsZSgpO1xuICAgICAgICB3aWdTdHlsZS5nbHlwaCA9ICdCT1gnO1xuICAgICAgICB3aWdTdHlsZS5GR0NPTE9SID0gJ2JsYWNrJztcbiAgICAgICAgd2lnU3R5bGUuQkdDT0xPUiA9ICdibHVlJ1xuICAgICAgICB3aWdTdHlsZS5IRUlHSFQgPSA4O1xuICAgICAgICB3aWdTdHlsZS5CVU1QID0gdHJ1ZTtcbiAgICAgICAgd2lnU3R5bGUuTEFCRUwgPSB0cnVlO1xuICAgICAgICB3aWdTdHlsZS5aSU5ERVggPSAyMDtcbiAgICAgICAgc3R5bGVzaGVldC5wdXNoU3R5bGUoe3R5cGU6ICdkZWZhdWx0J30sIG51bGwsIHdpZ1N0eWxlKTtcblxuICAgICAgICB2YXIgd2lnU3R5bGUgPSBuZXcgREFTU3R5bGUoKTtcbiAgICAgICAgd2lnU3R5bGUuZ2x5cGggPSAnQk9YJztcbiAgICAgICAgd2lnU3R5bGUuRkdDT0xPUiA9ICdibGFjayc7XG4gICAgICAgIHdpZ1N0eWxlLkJHQ09MT1IgPSAncmVkJ1xuICAgICAgICB3aWdTdHlsZS5IRUlHSFQgPSAxMDtcbiAgICAgICAgd2lnU3R5bGUuQlVNUCA9IHRydWU7XG4gICAgICAgIHdpZ1N0eWxlLlpJTkRFWCA9IDIwO1xuICAgICAgICBzdHlsZXNoZWV0LnB1c2hTdHlsZSh7dHlwZTogJ3RyYW5zbGF0aW9uJ30sIG51bGwsIHdpZ1N0eWxlKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgdmFyIHRzU3R5bGUgPSBuZXcgREFTU3R5bGUoKTtcbiAgICAgICAgdHNTdHlsZS5nbHlwaCA9ICdCT1gnO1xuICAgICAgICB0c1N0eWxlLkZHQ09MT1IgPSAnYmxhY2snO1xuICAgICAgICB0c1N0eWxlLkJHQ09MT1IgPSAnd2hpdGUnO1xuICAgICAgICB0c1N0eWxlLkhFSUdIVCA9IDEwO1xuICAgICAgICB0c1N0eWxlLlpJTkRFWCA9IDEwO1xuICAgICAgICB0c1N0eWxlLkJVTVAgPSB0cnVlO1xuICAgICAgICB0c1N0eWxlLkxBQkVMID0gdHJ1ZTtcbiAgICAgICAgc3R5bGVzaGVldC5wdXNoU3R5bGUoe3R5cGU6ICd0cmFuc2NyaXB0J30sIG51bGwsIHRzU3R5bGUpO1xuXG4gICAgICAgIHZhciBkZW5zU3R5bGUgPSBuZXcgREFTU3R5bGUoKTtcbiAgICAgICAgZGVuc1N0eWxlLmdseXBoID0gJ0hJU1RPR1JBTSc7XG4gICAgICAgIGRlbnNTdHlsZS5DT0xPUjEgPSAnd2hpdGUnO1xuICAgICAgICBkZW5zU3R5bGUuQ09MT1IyID0gJ2JsYWNrJztcbiAgICAgICAgZGVuc1N0eWxlLkhFSUdIVD0zMDtcbiAgICAgICAgc3R5bGVzaGVldC5wdXNoU3R5bGUoe3R5cGU6ICdkZW5zaXR5J30sIG51bGwsIGRlbnNTdHlsZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNhbGxiYWNrKHN0eWxlc2hlZXQpO1xufVxuXG5kYWxsaWFuY2VfcmVnaXN0ZXJQYXJzZXJGYWN0b3J5KCdiZWQnLCBmdW5jdGlvbih0KSB7cmV0dXJuIG5ldyBCZWRXaWdQYXJzZXIodCl9KTtcbmRhbGxpYW5jZV9yZWdpc3RlclBhcnNlckZhY3RvcnkoJ3dpZycsIGZ1bmN0aW9uKHQpIHtyZXR1cm4gbmV3IEJlZFdpZ1BhcnNlcih0KX0pO1xuIiwiLyogLSotIG1vZGU6IGphdmFzY3JpcHQ7IGMtYmFzaWMtb2Zmc2V0OiA0OyBpbmRlbnQtdGFicy1tb2RlOiBuaWwgLSotICovXG5cbi8vIFxuLy8gRGFsbGlhbmNlIEdlbm9tZSBFeHBsb3JlclxuLy8gKGMpIFRob21hcyBEb3duIDIwMDYtMjAxMFxuLy9cbi8vIGJpZ3dpZy5qczogaW5kZXhlZCBiaW5hcnkgV0lHIChhbmQgQkVEKSBmaWxlc1xuLy9cblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuaWYgKHR5cGVvZihyZXF1aXJlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB2YXIgc3BhbnMgPSByZXF1aXJlKCcuL3NwYW5zJyk7XG4gICAgdmFyIFJhbmdlID0gc3BhbnMuUmFuZ2U7XG4gICAgdmFyIHVuaW9uID0gc3BhbnMudW5pb247XG4gICAgdmFyIGludGVyc2VjdGlvbiA9IHNwYW5zLmludGVyc2VjdGlvbjtcblxuICAgIHZhciBkYXMgPSByZXF1aXJlKCcuL2RhcycpO1xuICAgIHZhciBEQVNGZWF0dXJlID0gZGFzLkRBU0ZlYXR1cmU7XG4gICAgdmFyIERBU0dyb3VwID0gZGFzLkRBU0dyb3VwO1xuXG4gICAgdmFyIHV0aWxzID0gcmVxdWlyZSgnLi91dGlscycpO1xuICAgIHZhciBzaGFsbG93Q29weSA9IHV0aWxzLnNoYWxsb3dDb3B5O1xuXG4gICAgdmFyIGJpbiA9IHJlcXVpcmUoJy4vYmluJyk7XG4gICAgdmFyIHJlYWRJbnQgPSBiaW4ucmVhZEludDtcblxuICAgIHZhciBqc3psaWIgPSByZXF1aXJlKCdqc3psaWInKTtcbiAgICB2YXIganN6bGliX2luZmxhdGVfYnVmZmVyID0ganN6bGliLmluZmxhdGVCdWZmZXI7XG4gICAgdmFyIGFycmF5Q29weSA9IGpzemxpYi5hcnJheUNvcHk7XG59XG5cbnZhciBCSUdfV0lHX01BR0lDID0gMHg4ODhGRkMyNjtcbnZhciBCSUdfV0lHX01BR0lDX0JFID0gMHgyNkZDOEY4ODtcbnZhciBCSUdfQkVEX01BR0lDID0gMHg4Nzg5RjJFQjtcbnZhciBCSUdfQkVEX01BR0lDX0JFID0gMHhFQkYyODk4NztcblxuXG52YXIgQklHX1dJR19UWVBFX0dSQVBIID0gMTtcbnZhciBCSUdfV0lHX1RZUEVfVlNURVAgPSAyO1xudmFyIEJJR19XSUdfVFlQRV9GU1RFUCA9IDM7XG4gIFxudmFyIE0xID0gMjU2O1xudmFyIE0yID0gMjU2KjI1NjtcbnZhciBNMyA9IDI1NioyNTYqMjU2O1xudmFyIE00ID0gMjU2KjI1NioyNTYqMjU2O1xuXG52YXIgQkVEX0NPTE9SX1JFR0VYUCA9IG5ldyBSZWdFeHAoXCJeWzAtOV0rLFswLTldKyxbMC05XStcIik7XG5cbmZ1bmN0aW9uIGJ3Z19yZWFkT2Zmc2V0KGJhLCBvKSB7XG4gICAgdmFyIG9mZnNldCA9IGJhW29dICsgYmFbbysxXSpNMSArIGJhW28rMl0qTTIgKyBiYVtvKzNdKk0zICsgYmFbbys0XSpNNDtcbiAgICByZXR1cm4gb2Zmc2V0O1xufVxuXG5mdW5jdGlvbiBCaWdXaWcoKSB7XG59XG5cbkJpZ1dpZy5wcm90b3R5cGUucmVhZENocm9tVHJlZSA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgdmFyIHRoaXNCID0gdGhpcztcbiAgICB0aGlzLmNocm9tc1RvSURzID0ge307XG4gICAgdGhpcy5pZHNUb0Nocm9tcyA9IHt9O1xuICAgIHRoaXMubWF4SUQgPSAwO1xuXG4gICAgdmFyIHVkbyA9IHRoaXMudW56b29tZWREYXRhT2Zmc2V0O1xuICAgIHZhciBlYiA9ICh1ZG8gLSB0aGlzLmNocm9tVHJlZU9mZnNldCkgJiAzO1xuICAgIHVkbyA9IHVkbyArIDQgLSBlYjtcblxuICAgIHRoaXMuZGF0YS5zbGljZSh0aGlzLmNocm9tVHJlZU9mZnNldCwgdWRvIC0gdGhpcy5jaHJvbVRyZWVPZmZzZXQpLmZldGNoKGZ1bmN0aW9uKGJwdCkge1xuICAgICAgICB2YXIgYmEgPSBuZXcgVWludDhBcnJheShicHQpO1xuICAgICAgICB2YXIgc2EgPSBuZXcgSW50MTZBcnJheShicHQpO1xuICAgICAgICB2YXIgbGEgPSBuZXcgSW50MzJBcnJheShicHQpO1xuICAgICAgICB2YXIgYnB0TWFnaWMgPSBsYVswXTtcbiAgICAgICAgdmFyIGJsb2NrU2l6ZSA9IGxhWzFdO1xuICAgICAgICB2YXIga2V5U2l6ZSA9IGxhWzJdO1xuICAgICAgICB2YXIgdmFsU2l6ZSA9IGxhWzNdO1xuICAgICAgICB2YXIgaXRlbUNvdW50ID0gYndnX3JlYWRPZmZzZXQoYmEsIDE2KTtcbiAgICAgICAgdmFyIHJvb3ROb2RlT2Zmc2V0ID0gMzI7XG5cbiAgICAgICAgdmFyIGJwdFJlYWROb2RlID0gZnVuY3Rpb24ob2Zmc2V0KSB7XG4gICAgICAgICAgICB2YXIgbm9kZVR5cGUgPSBiYVtvZmZzZXRdO1xuICAgICAgICAgICAgdmFyIGNudCA9IHNhWyhvZmZzZXQvMikgKyAxXTtcbiAgICAgICAgICAgIG9mZnNldCArPSA0O1xuICAgICAgICAgICAgZm9yICh2YXIgbiA9IDA7IG4gPCBjbnQ7ICsrbikge1xuICAgICAgICAgICAgICAgIGlmIChub2RlVHlwZSA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIG9mZnNldCArPSBrZXlTaXplO1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2hpbGRPZmZzZXQgPSBid2dfcmVhZE9mZnNldChiYSwgb2Zmc2V0KTtcbiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDg7XG4gICAgICAgICAgICAgICAgICAgIGNoaWxkT2Zmc2V0IC09IHRoaXNCLmNocm9tVHJlZU9mZnNldDtcbiAgICAgICAgICAgICAgICAgICAgYnB0UmVhZE5vZGUoY2hpbGRPZmZzZXQpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBrZXkgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIga2kgPSAwOyBraSA8IGtleVNpemU7ICsra2kpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjaGFyQ29kZSA9IGJhW29mZnNldCsrXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjaGFyQ29kZSAhPSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoY2hhckNvZGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHZhciBjaHJvbUlkID0gKGJhW29mZnNldCszXTw8MjQpIHwgKGJhW29mZnNldCsyXTw8MTYpIHwgKGJhW29mZnNldCsxXTw8OCkgfCAoYmFbb2Zmc2V0KzBdKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNocm9tU2l6ZSA9IChiYVtvZmZzZXQgKyA3XTw8MjQpIHwgKGJhW29mZnNldCs2XTw8MTYpIHwgKGJhW29mZnNldCs1XTw8OCkgfCAoYmFbb2Zmc2V0KzRdKTtcbiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDg7XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpc0IuY2hyb21zVG9JRHNba2V5XSA9IGNocm9tSWQ7XG4gICAgICAgICAgICAgICAgICAgIGlmIChrZXkuaW5kZXhPZignY2hyJykgPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpc0IuY2hyb21zVG9JRHNba2V5LnN1YnN0cigzKV0gPSBjaHJvbUlkO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXNCLmlkc1RvQ2hyb21zW2Nocm9tSWRdID0ga2V5O1xuICAgICAgICAgICAgICAgICAgICB0aGlzQi5tYXhJRCA9IE1hdGgubWF4KHRoaXNCLm1heElELCBjaHJvbUlkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGJwdFJlYWROb2RlKHJvb3ROb2RlT2Zmc2V0KTtcblxuICAgICAgICBjYWxsYmFjayh0aGlzQik7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIEJpZ1dpZ1ZpZXcoYndnLCBjaXJUcmVlT2Zmc2V0LCBjaXJUcmVlTGVuZ3RoLCBpc1N1bW1hcnkpIHtcbiAgICB0aGlzLmJ3ZyA9IGJ3ZztcbiAgICB0aGlzLmNpclRyZWVPZmZzZXQgPSBjaXJUcmVlT2Zmc2V0O1xuICAgIHRoaXMuY2lyVHJlZUxlbmd0aCA9IGNpclRyZWVMZW5ndGg7XG4gICAgdGhpcy5pc1N1bW1hcnkgPSBpc1N1bW1hcnk7XG59XG5cblxuXG5CaWdXaWdWaWV3LnByb3RvdHlwZS5yZWFkV2lnRGF0YSA9IGZ1bmN0aW9uKGNock5hbWUsIG1pbiwgbWF4LCBjYWxsYmFjaykge1xuICAgIHZhciBjaHIgPSB0aGlzLmJ3Zy5jaHJvbXNUb0lEc1tjaHJOYW1lXTtcbiAgICBpZiAoY2hyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgLy8gTm90IGFuIGVycm9yIGJlY2F1c2Ugc29tZSAuYndncyB3b24ndCBoYXZlIGRhdGEgZm9yIGFsbCBjaHJvbW9zb21lcy5cbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKFtdKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnJlYWRXaWdEYXRhQnlJZChjaHIsIG1pbiwgbWF4LCBjYWxsYmFjayk7XG4gICAgfVxufVxuXG5CaWdXaWdWaWV3LnByb3RvdHlwZS5yZWFkV2lnRGF0YUJ5SWQgPSBmdW5jdGlvbihjaHIsIG1pbiwgbWF4LCBjYWxsYmFjaykge1xuICAgIHZhciB0aGlzQiA9IHRoaXM7XG4gICAgaWYgKCF0aGlzLmNpckhlYWRlcikge1xuICAgICAgICB0aGlzLmJ3Zy5kYXRhLnNsaWNlKHRoaXMuY2lyVHJlZU9mZnNldCwgNDgpLmZldGNoKGZ1bmN0aW9uKHJlc3VsdCkge1xuICAgICAgICAgICAgdGhpc0IuY2lySGVhZGVyID0gcmVzdWx0O1xuICAgICAgICAgICAgdmFyIGxhID0gbmV3IEludDMyQXJyYXkodGhpc0IuY2lySGVhZGVyKTtcbiAgICAgICAgICAgIHRoaXNCLmNpckJsb2NrU2l6ZSA9IGxhWzFdO1xuICAgICAgICAgICAgdGhpc0IucmVhZFdpZ0RhdGFCeUlkKGNociwgbWluLCBtYXgsIGNhbGxiYWNrKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgYmxvY2tzVG9GZXRjaCA9IFtdO1xuICAgIHZhciBvdXRzdGFuZGluZyA9IDA7XG5cbiAgICB2YXIgYmVmb3JlQldHID0gRGF0ZS5ub3coKTtcblxuICAgIHZhciBmaWx0ZXIgPSBmdW5jdGlvbihjaHJvbUlkLCBmbWluLCBmbWF4LCB0b2tzKSB7XG4gICAgICAgIHJldHVybiAoKGNociA8IDAgfHwgY2hyb21JZCA9PSBjaHIpICYmIGZtaW4gPD0gbWF4ICYmIGZtYXggPj0gbWluKTtcbiAgICB9XG5cbiAgICB2YXIgY2lyRm9iUmVjdXIgPSBmdW5jdGlvbihvZmZzZXQsIGxldmVsKSB7XG4gICAgICAgIGlmICh0aGlzQi5id2cuaW5zdHJ1bWVudClcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdsZXZlbD0nICsgbGV2ZWwgKyAnOyBvZmZzZXQ9JyArIG9mZnNldCArICc7IHRpbWU9JyArIChEYXRlLm5vdygpfDApKTtcblxuICAgICAgICBvdXRzdGFuZGluZyArPSBvZmZzZXQubGVuZ3RoO1xuXG4gICAgICAgIGlmIChvZmZzZXQubGVuZ3RoID09IDEgJiYgb2Zmc2V0WzBdIC0gdGhpc0IuY2lyVHJlZU9mZnNldCA9PSA0OCAmJiB0aGlzQi5jYWNoZWRDaXJSb290KSB7XG4gICAgICAgICAgICBjaXJGb2JSZWN1cjIodGhpc0IuY2FjaGVkQ2lyUm9vdCwgMCwgbGV2ZWwpO1xuICAgICAgICAgICAgLS1vdXRzdGFuZGluZztcbiAgICAgICAgICAgIGlmIChvdXRzdGFuZGluZyA9PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhpc0IuZmV0Y2hGZWF0dXJlcyhmaWx0ZXIsIGJsb2Nrc1RvRmV0Y2gsIGNhbGxiYWNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBtYXhDaXJCbG9ja1NwYW4gPSA0ICsgICh0aGlzQi5jaXJCbG9ja1NpemUgKiAzMik7ICAgLy8gVXBwZXIgYm91bmQgb24gc2l6ZSwgYmFzZWQgb24gYSBjb21wbGV0ZWx5IGZ1bGwgbGVhZiBub2RlLlxuICAgICAgICB2YXIgc3BhbnM7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2Zmc2V0Lmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICB2YXIgYmxvY2tTcGFuID0gbmV3IFJhbmdlKG9mZnNldFtpXSwgb2Zmc2V0W2ldICsgbWF4Q2lyQmxvY2tTcGFuKTtcbiAgICAgICAgICAgIHNwYW5zID0gc3BhbnMgPyB1bmlvbihzcGFucywgYmxvY2tTcGFuKSA6IGJsb2NrU3BhbjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdmFyIGZldGNoUmFuZ2VzID0gc3BhbnMucmFuZ2VzKCk7XG4gICAgICAgIGZvciAodmFyIHIgPSAwOyByIDwgZmV0Y2hSYW5nZXMubGVuZ3RoOyArK3IpIHtcbiAgICAgICAgICAgIHZhciBmciA9IGZldGNoUmFuZ2VzW3JdO1xuICAgICAgICAgICAgY2lyRm9iU3RhcnRGZXRjaChvZmZzZXQsIGZyLCBsZXZlbCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgY2lyRm9iU3RhcnRGZXRjaCA9IGZ1bmN0aW9uKG9mZnNldCwgZnIsIGxldmVsLCBhdHRlbXB0cykge1xuICAgICAgICB2YXIgbGVuZ3RoID0gZnIubWF4KCkgLSBmci5taW4oKTtcbiAgICAgICAgdGhpc0IuYndnLmRhdGEuc2xpY2UoZnIubWluKCksIGZyLm1heCgpIC0gZnIubWluKCkpLmZldGNoKGZ1bmN0aW9uKHJlc3VsdEJ1ZmZlcikge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvZmZzZXQubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICBpZiAoZnIuY29udGFpbnMob2Zmc2V0W2ldKSkge1xuICAgICAgICAgICAgICAgICAgICBjaXJGb2JSZWN1cjIocmVzdWx0QnVmZmVyLCBvZmZzZXRbaV0gLSBmci5taW4oKSwgbGV2ZWwpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChvZmZzZXRbaV0gLSB0aGlzQi5jaXJUcmVlT2Zmc2V0ID09IDQ4ICYmIG9mZnNldFtpXSAtIGZyLm1pbigpID09IDApXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzQi5jYWNoZWRDaXJSb290ID0gcmVzdWx0QnVmZmVyO1xuXG4gICAgICAgICAgICAgICAgICAgIC0tb3V0c3RhbmRpbmc7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvdXRzdGFuZGluZyA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzQi5mZXRjaEZlYXR1cmVzKGZpbHRlciwgYmxvY2tzVG9GZXRjaCwgY2FsbGJhY2spO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICB2YXIgY2lyRm9iUmVjdXIyID0gZnVuY3Rpb24oY2lyQmxvY2tEYXRhLCBvZmZzZXQsIGxldmVsKSB7XG4gICAgICAgIHZhciBiYSA9IG5ldyBVaW50OEFycmF5KGNpckJsb2NrRGF0YSk7XG4gICAgICAgIHZhciBzYSA9IG5ldyBJbnQxNkFycmF5KGNpckJsb2NrRGF0YSk7XG4gICAgICAgIHZhciBsYSA9IG5ldyBJbnQzMkFycmF5KGNpckJsb2NrRGF0YSk7XG5cbiAgICAgICAgdmFyIGlzTGVhZiA9IGJhW29mZnNldF07XG4gICAgICAgIHZhciBjbnQgPSBzYVtvZmZzZXQvMiArIDFdO1xuICAgICAgICBvZmZzZXQgKz0gNDtcblxuICAgICAgICBpZiAoaXNMZWFmICE9IDApIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY250OyArK2kpIHtcbiAgICAgICAgICAgICAgICB2YXIgbG8gPSBvZmZzZXQvNDtcbiAgICAgICAgICAgICAgICB2YXIgc3RhcnRDaHJvbSA9IGxhW2xvXTtcbiAgICAgICAgICAgICAgICB2YXIgc3RhcnRCYXNlID0gbGFbbG8gKyAxXTtcbiAgICAgICAgICAgICAgICB2YXIgZW5kQ2hyb20gPSBsYVtsbyArIDJdO1xuICAgICAgICAgICAgICAgIHZhciBlbmRCYXNlID0gbGFbbG8gKyAzXTtcbiAgICAgICAgICAgICAgICB2YXIgYmxvY2tPZmZzZXQgPSBid2dfcmVhZE9mZnNldChiYSwgb2Zmc2V0KzE2KTtcbiAgICAgICAgICAgICAgICB2YXIgYmxvY2tTaXplID0gYndnX3JlYWRPZmZzZXQoYmEsIG9mZnNldCsyNCk7XG4gICAgICAgICAgICAgICAgaWYgKCgoY2hyIDwgMCB8fCBzdGFydENocm9tIDwgY2hyKSB8fCAoc3RhcnRDaHJvbSA9PSBjaHIgJiYgc3RhcnRCYXNlIDw9IG1heCkpICYmXG4gICAgICAgICAgICAgICAgICAgICgoY2hyIDwgMCB8fCBlbmRDaHJvbSAgID4gY2hyKSB8fCAoZW5kQ2hyb20gPT0gY2hyICYmIGVuZEJhc2UgPj0gbWluKSkpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBibG9ja3NUb0ZldGNoLnB1c2goe29mZnNldDogYmxvY2tPZmZzZXQsIHNpemU6IGJsb2NrU2l6ZX0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBvZmZzZXQgKz0gMzI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgcmVjdXJPZmZzZXRzID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNudDsgKytpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGxvID0gb2Zmc2V0LzQ7XG4gICAgICAgICAgICAgICAgdmFyIHN0YXJ0Q2hyb20gPSBsYVtsb107XG4gICAgICAgICAgICAgICAgdmFyIHN0YXJ0QmFzZSA9IGxhW2xvICsgMV07XG4gICAgICAgICAgICAgICAgdmFyIGVuZENocm9tID0gbGFbbG8gKyAyXTtcbiAgICAgICAgICAgICAgICB2YXIgZW5kQmFzZSA9IGxhW2xvICsgM107XG4gICAgICAgICAgICAgICAgdmFyIGJsb2NrT2Zmc2V0ID0gYndnX3JlYWRPZmZzZXQoYmEsIG9mZnNldCsxNik7XG4gICAgICAgICAgICAgICAgaWYgKChjaHIgPCAwIHx8IHN0YXJ0Q2hyb20gPCBjaHIgfHwgKHN0YXJ0Q2hyb20gPT0gY2hyICYmIHN0YXJ0QmFzZSA8PSBtYXgpKSAmJlxuICAgICAgICAgICAgICAgICAgICAoY2hyIDwgMCB8fCBlbmRDaHJvbSAgID4gY2hyIHx8IChlbmRDaHJvbSA9PSBjaHIgJiYgZW5kQmFzZSA+PSBtaW4pKSlcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHJlY3VyT2Zmc2V0cy5wdXNoKGJsb2NrT2Zmc2V0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDI0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlY3VyT2Zmc2V0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgY2lyRm9iUmVjdXIocmVjdXJPZmZzZXRzLCBsZXZlbCArIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcblxuICAgIGNpckZvYlJlY3VyKFt0aGlzQi5jaXJUcmVlT2Zmc2V0ICsgNDhdLCAxKTtcbn1cblxuXG5CaWdXaWdWaWV3LnByb3RvdHlwZS5mZXRjaEZlYXR1cmVzID0gZnVuY3Rpb24oZmlsdGVyLCBibG9ja3NUb0ZldGNoLCBjYWxsYmFjaykge1xuICAgIHZhciB0aGlzQiA9IHRoaXM7XG5cbiAgICBibG9ja3NUb0ZldGNoLnNvcnQoZnVuY3Rpb24oYjAsIGIxKSB7XG4gICAgICAgIHJldHVybiAoYjAub2Zmc2V0fDApIC0gKGIxLm9mZnNldHwwKTtcbiAgICB9KTtcblxuICAgIGlmIChibG9ja3NUb0ZldGNoLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgIGNhbGxiYWNrKFtdKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgZmVhdHVyZXMgPSBbXTtcbiAgICAgICAgdmFyIGNyZWF0ZUZlYXR1cmUgPSBmdW5jdGlvbihjaHIsIGZtaW4sIGZtYXgsIG9wdHMpIHtcbiAgICAgICAgICAgIGlmICghb3B0cykge1xuICAgICAgICAgICAgICAgIG9wdHMgPSB7fTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgICAgICB2YXIgZiA9IG5ldyBEQVNGZWF0dXJlKCk7XG4gICAgICAgICAgICBmLl9jaHJvbUlkID0gY2hyO1xuICAgICAgICAgICAgZi5zZWdtZW50ID0gdGhpc0IuYndnLmlkc1RvQ2hyb21zW2Nocl07XG4gICAgICAgICAgICBmLm1pbiA9IGZtaW47XG4gICAgICAgICAgICBmLm1heCA9IGZtYXg7XG4gICAgICAgICAgICBmLnR5cGUgPSB0aGlzQi5id2cudHlwZTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZm9yICh2YXIgayBpbiBvcHRzKSB7XG4gICAgICAgICAgICAgICAgZltrXSA9IG9wdHNba107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGZlYXR1cmVzLnB1c2goZik7XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIHRyYW1wID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoYmxvY2tzVG9GZXRjaC5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgICAgIHZhciBhZnRlckJXRyA9IERhdGUubm93KCk7XG4gICAgICAgICAgICAgICAgLy8gZGxvZygnQldHIGZldGNoIHRvb2sgJyArIChhZnRlckJXRyAtIGJlZm9yZUJXRykgKyAnbXMnKTtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhmZWF0dXJlcyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuOyAgLy8ganVzdCBpbiBjYXNlLi4uXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBibG9jayA9IGJsb2Nrc1RvRmV0Y2hbMF07XG4gICAgICAgICAgICAgICAgaWYgKGJsb2NrLmRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpc0IucGFyc2VGZWF0dXJlcyhibG9jay5kYXRhLCBjcmVhdGVGZWF0dXJlLCBmaWx0ZXIpO1xuICAgICAgICAgICAgICAgICAgICBibG9ja3NUb0ZldGNoLnNwbGljZSgwLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgdHJhbXAoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZmV0Y2hTdGFydCA9IGJsb2NrLm9mZnNldDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZldGNoU2l6ZSA9IGJsb2NrLnNpemU7XG4gICAgICAgICAgICAgICAgICAgIHZhciBiaSA9IDE7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChiaSA8IGJsb2Nrc1RvRmV0Y2gubGVuZ3RoICYmIGJsb2Nrc1RvRmV0Y2hbYmldLm9mZnNldCA9PSAoZmV0Y2hTdGFydCArIGZldGNoU2l6ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZldGNoU2l6ZSArPSBibG9ja3NUb0ZldGNoW2JpXS5zaXplO1xuICAgICAgICAgICAgICAgICAgICAgICAgKytiaTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHRoaXNCLmJ3Zy5kYXRhLnNsaWNlKGZldGNoU3RhcnQsIGZldGNoU2l6ZSkuZmV0Y2goZnVuY3Rpb24ocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgb2Zmc2V0ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiaSA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAob2Zmc2V0IDwgZmV0Y2hTaXplKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZiID0gYmxvY2tzVG9GZXRjaFtiaV07XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpc0IuYndnLnVuY29tcHJlc3NCdWZTaXplID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0ganN6bGliX2luZmxhdGVfYnVmZmVyKHJlc3VsdCwgb2Zmc2V0ICsgMiwgZmIuc2l6ZSAtIDIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0bXAgPSBuZXcgVWludDhBcnJheShmYi5zaXplKTsgICAgLy8gRklYTUUgaXMgdGhpcyByZWFsbHkgdGhlIGJlc3Qgd2UgY2FuIGRvP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcnJheUNvcHkobmV3IFVpbnQ4QXJyYXkocmVzdWx0LCBvZmZzZXQsIGZiLnNpemUpLCAwLCB0bXAsIDAsIGZiLnNpemUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gdG1wLmJ1ZmZlcjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmIuZGF0YSA9IGRhdGE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ICs9IGZiLnNpemU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKytiaTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW1wKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0cmFtcCgpO1xuICAgIH1cbn1cblxuQmlnV2lnVmlldy5wcm90b3R5cGUucGFyc2VGZWF0dXJlcyA9IGZ1bmN0aW9uKGRhdGEsIGNyZWF0ZUZlYXR1cmUsIGZpbHRlcikge1xuICAgIHZhciBiYSA9IG5ldyBVaW50OEFycmF5KGRhdGEpO1xuXG4gICAgaWYgKHRoaXMuaXNTdW1tYXJ5KSB7XG4gICAgICAgIHZhciBzYSA9IG5ldyBJbnQxNkFycmF5KGRhdGEpO1xuICAgICAgICB2YXIgbGEgPSBuZXcgSW50MzJBcnJheShkYXRhKTtcbiAgICAgICAgdmFyIGZhID0gbmV3IEZsb2F0MzJBcnJheShkYXRhKTtcblxuICAgICAgICB2YXIgaXRlbUNvdW50ID0gZGF0YS5ieXRlTGVuZ3RoLzMyO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGl0ZW1Db3VudDsgKytpKSB7XG4gICAgICAgICAgICB2YXIgY2hyb21JZCA9ICAgbGFbKGkqOCldO1xuICAgICAgICAgICAgdmFyIHN0YXJ0ID0gICAgIGxhWyhpKjgpKzFdO1xuICAgICAgICAgICAgdmFyIGVuZCA9ICAgICAgIGxhWyhpKjgpKzJdO1xuICAgICAgICAgICAgdmFyIHZhbGlkQ250ID0gIGxhWyhpKjgpKzNdO1xuICAgICAgICAgICAgdmFyIG1pblZhbCAgICA9IGZhWyhpKjgpKzRdO1xuICAgICAgICAgICAgdmFyIG1heFZhbCAgICA9IGZhWyhpKjgpKzVdO1xuICAgICAgICAgICAgdmFyIHN1bURhdGEgICA9IGZhWyhpKjgpKzZdO1xuICAgICAgICAgICAgdmFyIHN1bVNxRGF0YSA9IGZhWyhpKjgpKzddO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoZmlsdGVyKGNocm9tSWQsIHN0YXJ0ICsgMSwgZW5kKSkge1xuICAgICAgICAgICAgICAgIHZhciBzdW1tYXJ5T3B0cyA9IHt0eXBlOiAnYmlnd2lnJywgc2NvcmU6IHN1bURhdGEvdmFsaWRDbnQsIG1heFNjb3JlOiBtYXhWYWx9O1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmJ3Zy50eXBlID09ICdiaWdiZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgIHN1bW1hcnlPcHRzLnR5cGUgPSAnZGVuc2l0eSc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNyZWF0ZUZlYXR1cmUoY2hyb21JZCwgc3RhcnQgKyAxLCBlbmQsIHN1bW1hcnlPcHRzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGhpcy5id2cudHlwZSA9PSAnYmlnd2lnJykge1xuICAgICAgICB2YXIgc2EgPSBuZXcgSW50MTZBcnJheShkYXRhKTtcbiAgICAgICAgdmFyIGxhID0gbmV3IEludDMyQXJyYXkoZGF0YSk7XG4gICAgICAgIHZhciBmYSA9IG5ldyBGbG9hdDMyQXJyYXkoZGF0YSk7XG5cbiAgICAgICAgdmFyIGNocm9tSWQgPSBsYVswXTtcbiAgICAgICAgdmFyIGJsb2NrU3RhcnQgPSBsYVsxXTtcbiAgICAgICAgdmFyIGJsb2NrRW5kID0gbGFbMl07XG4gICAgICAgIHZhciBpdGVtU3RlcCA9IGxhWzNdO1xuICAgICAgICB2YXIgaXRlbVNwYW4gPSBsYVs0XTtcbiAgICAgICAgdmFyIGJsb2NrVHlwZSA9IGJhWzIwXTtcbiAgICAgICAgdmFyIGl0ZW1Db3VudCA9IHNhWzExXTtcbiAgICAgICAgXG4gICAgICAgIGlmIChibG9ja1R5cGUgPT0gQklHX1dJR19UWVBFX0ZTVEVQKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGl0ZW1Db3VudDsgKytpKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNjb3JlID0gZmFbaSArIDZdO1xuICAgICAgICAgICAgICAgIHZhciBmbWluID0gYmxvY2tTdGFydCArIChpKml0ZW1TdGVwKSArIDEsIGZtYXggPSBibG9ja1N0YXJ0ICsgKGkqaXRlbVN0ZXApICsgaXRlbVNwYW47XG4gICAgICAgICAgICAgICAgaWYgKGZpbHRlcihjaHJvbUlkLCBmbWluLCBmbWF4KSlcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlRmVhdHVyZShjaHJvbUlkLCBmbWluLCBmbWF4LCB7c2NvcmU6IHNjb3JlfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoYmxvY2tUeXBlID09IEJJR19XSUdfVFlQRV9WU1RFUCkge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpdGVtQ291bnQ7ICsraSkge1xuICAgICAgICAgICAgICAgIHZhciBzdGFydCA9IGxhWyhpKjIpICsgNl0gKyAxO1xuICAgICAgICAgICAgICAgIHZhciBlbmQgPSBzdGFydCArIGl0ZW1TcGFuIC0gMTtcbiAgICAgICAgICAgICAgICB2YXIgc2NvcmUgPSBmYVsoaSoyKSArIDddO1xuICAgICAgICAgICAgICAgIGlmIChmaWx0ZXIoY2hyb21JZCwgc3RhcnQsIGVuZCkpXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZUZlYXR1cmUoY2hyb21JZCwgc3RhcnQsIGVuZCwge3Njb3JlOiBzY29yZX0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGJsb2NrVHlwZSA9PSBCSUdfV0lHX1RZUEVfR1JBUEgpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaXRlbUNvdW50OyArK2kpIHtcbiAgICAgICAgICAgICAgICB2YXIgc3RhcnQgPSBsYVsoaSozKSArIDZdICsgMTtcbiAgICAgICAgICAgICAgICB2YXIgZW5kICAgPSBsYVsoaSozKSArIDddO1xuICAgICAgICAgICAgICAgIHZhciBzY29yZSA9IGZhWyhpKjMpICsgOF07XG4gICAgICAgICAgICAgICAgaWYgKHN0YXJ0ID4gZW5kKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0ID0gZW5kO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZmlsdGVyKGNocm9tSWQsIHN0YXJ0LCBlbmQpKVxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVGZWF0dXJlKGNocm9tSWQsIHN0YXJ0LCBlbmQsIHtzY29yZTogc2NvcmV9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdDdXJyZW50bHkgbm90IGhhbmRsaW5nIGJ3Z1R5cGU9JyArIGJsb2NrVHlwZSk7XG4gICAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRoaXMuYndnLnR5cGUgPT0gJ2JpZ2JlZCcpIHtcbiAgICAgICAgdmFyIG9mZnNldCA9IDA7XG4gICAgICAgIHZhciBkZmMgPSB0aGlzLmJ3Zy5kZWZpbmVkRmllbGRDb3VudDtcbiAgICAgICAgdmFyIHNjaGVtYSA9IHRoaXMuYndnLnNjaGVtYTtcblxuICAgICAgICB3aGlsZSAob2Zmc2V0IDwgYmEubGVuZ3RoKSB7XG4gICAgICAgICAgICB2YXIgY2hyb21JZCA9IChiYVtvZmZzZXQrM108PDI0KSB8IChiYVtvZmZzZXQrMl08PDE2KSB8IChiYVtvZmZzZXQrMV08PDgpIHwgKGJhW29mZnNldCswXSk7XG4gICAgICAgICAgICB2YXIgc3RhcnQgPSAoYmFbb2Zmc2V0KzddPDwyNCkgfCAoYmFbb2Zmc2V0KzZdPDwxNikgfCAoYmFbb2Zmc2V0KzVdPDw4KSB8IChiYVtvZmZzZXQrNF0pO1xuICAgICAgICAgICAgdmFyIGVuZCA9IChiYVtvZmZzZXQrMTFdPDwyNCkgfCAoYmFbb2Zmc2V0KzEwXTw8MTYpIHwgKGJhW29mZnNldCs5XTw8OCkgfCAoYmFbb2Zmc2V0KzhdKTtcbiAgICAgICAgICAgIG9mZnNldCArPSAxMjtcbiAgICAgICAgICAgIHZhciByZXN0ID0gJyc7XG4gICAgICAgICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICAgICAgICAgIHZhciBjaCA9IGJhW29mZnNldCsrXTtcbiAgICAgICAgICAgICAgICBpZiAoY2ggIT0gMCkge1xuICAgICAgICAgICAgICAgICAgICByZXN0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoY2gpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIGZlYXR1cmVPcHRzID0ge307XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZhciBiZWRDb2x1bW5zO1xuICAgICAgICAgICAgaWYgKHJlc3QubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGJlZENvbHVtbnMgPSByZXN0LnNwbGl0KCdcXHQnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgYmVkQ29sdW1ucyA9IFtdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGJlZENvbHVtbnMubGVuZ3RoID4gMCAmJiBkZmMgPiAzKSB7XG4gICAgICAgICAgICAgICAgZmVhdHVyZU9wdHMubGFiZWwgPSBiZWRDb2x1bW5zWzBdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGJlZENvbHVtbnMubGVuZ3RoID4gMSAmJiBkZmMgPiA0KSB7XG4gICAgICAgICAgICAgICAgdmFyIHNjb3JlID0gcGFyc2VJbnQoYmVkQ29sdW1uc1sxXSk7XG4gICAgICAgICAgICAgICAgaWYgKCFpc05hTihzY29yZSkpXG4gICAgICAgICAgICAgICAgICAgIGZlYXR1cmVPcHRzLnNjb3JlID0gc2NvcmU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYmVkQ29sdW1ucy5sZW5ndGggPiAyICYmIGRmYyA+IDUpIHtcbiAgICAgICAgICAgICAgICBmZWF0dXJlT3B0cy5vcmllbnRhdGlvbiA9IGJlZENvbHVtbnNbMl07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYmVkQ29sdW1ucy5sZW5ndGggPiA1ICYmIGRmYyA+IDgpIHtcbiAgICAgICAgICAgICAgICB2YXIgY29sb3IgPSBiZWRDb2x1bW5zWzVdO1xuICAgICAgICAgICAgICAgIGlmIChCRURfQ09MT1JfUkVHRVhQLnRlc3QoY29sb3IpKSB7XG4gICAgICAgICAgICAgICAgICAgIGZlYXR1cmVPcHRzLml0ZW1SZ2IgPSAncmdiKCcgKyBjb2xvciArICcpJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChiZWRDb2x1bW5zLmxlbmd0aCA+IGRmYy0zICYmIHNjaGVtYSkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGNvbCA9IGRmYyAtIDM7IGNvbCA8IGJlZENvbHVtbnMubGVuZ3RoOyArK2NvbCkge1xuICAgICAgICAgICAgICAgICAgICBmZWF0dXJlT3B0c1tzY2hlbWEuZmllbGRzW2NvbCszXS5uYW1lXSA9IGJlZENvbHVtbnNbY29sXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChmaWx0ZXIoY2hyb21JZCwgc3RhcnQgKyAxLCBlbmQsIGJlZENvbHVtbnMpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGRmYyA8IDEyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZUZlYXR1cmUoY2hyb21JZCwgc3RhcnQgKyAxLCBlbmQsIGZlYXR1cmVPcHRzKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGhpY2tTdGFydCA9IGJlZENvbHVtbnNbM118MDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRoaWNrRW5kICAgPSBiZWRDb2x1bW5zWzRdfDA7XG4gICAgICAgICAgICAgICAgICAgIHZhciBibG9ja0NvdW50ID0gYmVkQ29sdW1uc1s2XXwwO1xuICAgICAgICAgICAgICAgICAgICB2YXIgYmxvY2tTaXplcyA9IGJlZENvbHVtbnNbN10uc3BsaXQoJywnKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJsb2NrU3RhcnRzID0gYmVkQ29sdW1uc1s4XS5zcGxpdCgnLCcpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChmZWF0dXJlT3B0cy5leG9uRnJhbWVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXhvbkZyYW1lcyA9IGZlYXR1cmVPcHRzLmV4b25GcmFtZXMuc3BsaXQoJywnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZlYXR1cmVPcHRzLmV4b25GcmFtZXMgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGZlYXR1cmVPcHRzLnR5cGUgPSAndHJhbnNjcmlwdCdcbiAgICAgICAgICAgICAgICAgICAgdmFyIGdycCA9IG5ldyBEQVNHcm91cCgpO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrIGluIGZlYXR1cmVPcHRzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBncnBba10gPSBmZWF0dXJlT3B0c1trXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBncnAuaWQgPSBiZWRDb2x1bW5zWzBdO1xuICAgICAgICAgICAgICAgICAgICBncnAuc2VnbWVudCA9IHRoaXMuYndnLmlkc1RvQ2hyb21zW2Nocm9tSWRdO1xuICAgICAgICAgICAgICAgICAgICBncnAubWluID0gc3RhcnQgKyAxO1xuICAgICAgICAgICAgICAgICAgICBncnAubWF4ID0gZW5kO1xuICAgICAgICAgICAgICAgICAgICBncnAubm90ZXMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgZmVhdHVyZU9wdHMuZ3JvdXBzID0gW2dycF07XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gTW92aW5nIHRvd2FyZHMgdXNpbmcgYmlnR2VuZVByZWQgbW9kZWwsIGJ1dCB3aWxsXG4gICAgICAgICAgICAgICAgICAgIC8vIHN0aWxsIHN1cHBvcnQgb2xkIERhbGxpYW5jZS1zdHlsZSBCRUQxMitnZW5lLW5hbWUgZm9yIHRoZVxuICAgICAgICAgICAgICAgICAgICAvLyBmb3Jlc2VlYWJsZSBmdXR1cmUuXG4gICAgICAgICAgICAgICAgICAgIGlmIChiZWRDb2x1bW5zLmxlbmd0aCA+IDkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBnZW5lSWQgPSBmZWF0dXJlT3B0cy5nZW5lTmFtZSB8fCBiZWRDb2x1bW5zWzldO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGdlbmVOYW1lID0gZ2VuZUlkO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJlZENvbHVtbnMubGVuZ3RoID4gMTApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZW5lTmFtZSA9IGJlZENvbHVtbnNbMTBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZlYXR1cmVPcHRzLmdlbmVOYW1lMilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZW5lTmFtZSA9IGZlYXR1cmVPcHRzLmdlbmVOYW1lMjtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGdnID0gc2hhbGxvd0NvcHkoZ3JwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdnLmlkID0gZ2VuZUlkO1xuICAgICAgICAgICAgICAgICAgICAgICAgZ2cubGFiZWwgPSBnZW5lTmFtZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdnLnR5cGUgPSAnZ2VuZSc7XG4gICAgICAgICAgICAgICAgICAgICAgICBmZWF0dXJlT3B0cy5ncm91cHMucHVzaChnZyk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB2YXIgc3Bhbkxpc3QgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgYiA9IDA7IGIgPCBibG9ja0NvdW50OyArK2IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBibWluID0gKGJsb2NrU3RhcnRzW2JdfDApICsgc3RhcnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYm1heCA9IGJtaW4gKyAoYmxvY2tTaXplc1tiXXwwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzcGFuID0gbmV3IFJhbmdlKGJtaW4sIGJtYXgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3Bhbkxpc3QucHVzaChzcGFuKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB2YXIgc3BhbnMgPSB1bmlvbihzcGFuTGlzdCk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB2YXIgdHNMaXN0ID0gc3BhbnMucmFuZ2VzKCk7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHMgPSAwOyBzIDwgdHNMaXN0Lmxlbmd0aDsgKytzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdHMgPSB0c0xpc3Rbc107XG4gICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVGZWF0dXJlKGNocm9tSWQsIHRzLm1pbigpICsgMSwgdHMubWF4KCksIGZlYXR1cmVPcHRzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlja0VuZCA+IHRoaWNrU3RhcnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb2RpbmdSZWdpb24gPSAoZmVhdHVyZU9wdHMub3JpZW50YXRpb24gPT0gJysnKSA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IFJhbmdlKHRoaWNrU3RhcnQsIHRoaWNrRW5kICsgMykgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBSYW5nZSh0aGlja1N0YXJ0IC0gMywgdGhpY2tFbmQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICsvLSAzIHRvIGFjY291bnQgZm9yIHN0b3AgY29kb25cblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRsID0gaW50ZXJzZWN0aW9uKHNwYW5zLCBjb2RpbmdSZWdpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmVhdHVyZU9wdHMudHlwZSA9ICd0cmFuc2xhdGlvbic7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRsTGlzdCA9IHRsLnJhbmdlcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZWFkaW5nRnJhbWUgPSAwO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRsT2Zmc2V0ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAodGxMaXN0WzBdLm1pbigpID4gdHNMaXN0W3RsT2Zmc2V0XS5tYXgoKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGxPZmZzZXQrKztcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHMgPSAwOyBzIDwgdGxMaXN0Lmxlbmd0aDsgKytzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlY29yZCByZWFkaW5nIGZyYW1lIGZvciBldmVyeSBleG9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IHM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmZWF0dXJlT3B0cy5vcmllbnRhdGlvbiA9PSAnLScpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleCA9IHRsTGlzdC5sZW5ndGggLSBzIC0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRzID0gdGxMaXN0W2luZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmVhdHVyZU9wdHMucmVhZGZyYW1lID0gcmVhZGluZ0ZyYW1lO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXhvbkZyYW1lcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJyZiA9IHBhcnNlSW50KGV4b25GcmFtZXNbaW5kZXggKyB0bE9mZnNldF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZihicmYpID09PSAnbnVtYmVyJyAmJiBicmYgPj0gMCAmJiBicmYgPD0gMikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZlYXR1cmVPcHRzLnJlYWRmcmFtZSA9IGJyZjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZWF0dXJlT3B0cy5yZWFkZnJhbWVFeHBsaWNpdCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxlbmd0aCA9IHRzLm1heCgpIC0gdHMubWluKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlYWRpbmdGcmFtZSA9IChyZWFkaW5nRnJhbWUgKyBsZW5ndGgpICUgMztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRlRmVhdHVyZShjaHJvbUlkLCB0cy5taW4oKSArIDEsIHRzLm1heCgpLCBmZWF0dXJlT3B0cyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgRXJyb3IoXCJEb24ndCBrbm93IHdoYXQgdG8gZG8gd2l0aCBcIiArIHRoaXMuYndnLnR5cGUpO1xuICAgIH1cbn1cblxuLy9cbi8vIG5hc3R5IGN1dC9wYXN0ZSwgc2hvdWxkIHJvbGwgYmFjayBpbiFcbi8vXG5cbkJpZ1dpZ1ZpZXcucHJvdG90eXBlLmdldEZpcnN0QWRqYWNlbnQgPSBmdW5jdGlvbihjaHJOYW1lLCBwb3MsIGRpciwgY2FsbGJhY2spIHtcbiAgICB2YXIgY2hyID0gdGhpcy5id2cuY2hyb21zVG9JRHNbY2hyTmFtZV07XG4gICAgaWYgKGNociA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIC8vIE5vdCBhbiBlcnJvciBiZWNhdXNlIHNvbWUgLmJ3Z3Mgd29uJ3QgaGF2ZSBkYXRhIGZvciBhbGwgY2hyb21vc29tZXMuXG4gICAgICAgIHJldHVybiBjYWxsYmFjayhbXSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5nZXRGaXJzdEFkamFjZW50QnlJZChjaHIsIHBvcywgZGlyLCBjYWxsYmFjayk7XG4gICAgfVxufVxuXG5CaWdXaWdWaWV3LnByb3RvdHlwZS5nZXRGaXJzdEFkamFjZW50QnlJZCA9IGZ1bmN0aW9uKGNociwgcG9zLCBkaXIsIGNhbGxiYWNrKSB7XG4gICAgdmFyIHRoaXNCID0gdGhpcztcbiAgICBpZiAoIXRoaXMuY2lySGVhZGVyKSB7XG4gICAgICAgIHRoaXMuYndnLmRhdGEuc2xpY2UodGhpcy5jaXJUcmVlT2Zmc2V0LCA0OCkuZmV0Y2goZnVuY3Rpb24ocmVzdWx0KSB7XG4gICAgICAgICAgICB0aGlzQi5jaXJIZWFkZXIgPSByZXN1bHQ7XG4gICAgICAgICAgICB2YXIgbGEgPSBuZXcgSW50MzJBcnJheSh0aGlzQi5jaXJIZWFkZXIpO1xuICAgICAgICAgICAgdGhpc0IuY2lyQmxvY2tTaXplID0gbGFbMV07XG4gICAgICAgICAgICB0aGlzQi5nZXRGaXJzdEFkamFjZW50QnlJZChjaHIsIHBvcywgZGlyLCBjYWxsYmFjayk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIGJsb2NrVG9GZXRjaCA9IG51bGw7XG4gICAgdmFyIGJlc3RCbG9ja0NociA9IC0xO1xuICAgIHZhciBiZXN0QmxvY2tPZmZzZXQgPSAtMTtcblxuICAgIHZhciBvdXRzdGFuZGluZyA9IDA7XG5cbiAgICB2YXIgYmVmb3JlQldHID0gRGF0ZS5ub3coKTtcblxuICAgIHZhciBjaXJGb2JSZWN1ciA9IGZ1bmN0aW9uKG9mZnNldCwgbGV2ZWwpIHtcbiAgICAgICAgb3V0c3RhbmRpbmcgKz0gb2Zmc2V0Lmxlbmd0aDtcblxuICAgICAgICB2YXIgbWF4Q2lyQmxvY2tTcGFuID0gNCArICAodGhpc0IuY2lyQmxvY2tTaXplICogMzIpOyAgIC8vIFVwcGVyIGJvdW5kIG9uIHNpemUsIGJhc2VkIG9uIGEgY29tcGxldGVseSBmdWxsIGxlYWYgbm9kZS5cbiAgICAgICAgdmFyIHNwYW5zO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9mZnNldC5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgdmFyIGJsb2NrU3BhbiA9IG5ldyBSYW5nZShvZmZzZXRbaV0sIG9mZnNldFtpXSArIG1heENpckJsb2NrU3Bhbik7XG4gICAgICAgICAgICBzcGFucyA9IHNwYW5zID8gdW5pb24oc3BhbnMsIGJsb2NrU3BhbikgOiBibG9ja1NwYW47XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHZhciBmZXRjaFJhbmdlcyA9IHNwYW5zLnJhbmdlcygpO1xuICAgICAgICBmb3IgKHZhciByID0gMDsgciA8IGZldGNoUmFuZ2VzLmxlbmd0aDsgKytyKSB7XG4gICAgICAgICAgICB2YXIgZnIgPSBmZXRjaFJhbmdlc1tyXTtcbiAgICAgICAgICAgIGNpckZvYlN0YXJ0RmV0Y2gob2Zmc2V0LCBmciwgbGV2ZWwpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdmFyIGNpckZvYlN0YXJ0RmV0Y2ggPSBmdW5jdGlvbihvZmZzZXQsIGZyLCBsZXZlbCwgYXR0ZW1wdHMpIHtcbiAgICAgICAgdmFyIGxlbmd0aCA9IGZyLm1heCgpIC0gZnIubWluKCk7XG4gICAgICAgIHRoaXNCLmJ3Zy5kYXRhLnNsaWNlKGZyLm1pbigpLCBmci5tYXgoKSAtIGZyLm1pbigpKS5mZXRjaChmdW5jdGlvbihyZXN1bHRCdWZmZXIpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2Zmc2V0Lmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGZyLmNvbnRhaW5zKG9mZnNldFtpXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY2lyRm9iUmVjdXIyKHJlc3VsdEJ1ZmZlciwgb2Zmc2V0W2ldIC0gZnIubWluKCksIGxldmVsKTtcbiAgICAgICAgICAgICAgICAgICAgLS1vdXRzdGFuZGluZztcbiAgICAgICAgICAgICAgICAgICAgaWYgKG91dHN0YW5kaW5nID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghYmxvY2tUb0ZldGNoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRpciA+IDAgJiYgKGNociAhPSAwIHx8IHBvcyA+IDApKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzQi5nZXRGaXJzdEFkamFjZW50QnlJZCgwLCAwLCBkaXIsIGNhbGxiYWNrKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGRpciA8IDAgJiYgKGNociAhPSB0aGlzQi5id2cubWF4SUQgfHwgcG9zIDwgMTAwMDAwMDAwMCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXNCLmdldEZpcnN0QWRqYWNlbnRCeUlkKHRoaXNCLmJ3Zy5tYXhJRCwgMTAwMDAwMDAwMCwgZGlyLCBjYWxsYmFjayk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhbXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNCLmZldGNoRmVhdHVyZXMoZnVuY3Rpb24oY2hyeCwgZm1pbiwgZm1heCwgdG9rcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoZGlyIDwgMCAmJiAoY2hyeCA8IGNociB8fCBmbWF4IDwgcG9zKSkgfHwgKGRpciA+IDAgJiYgKGNocnggPiBjaHIgfHwgZm1pbiA+IHBvcykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSwgW2Jsb2NrVG9GZXRjaF0sIGZ1bmN0aW9uKGZlYXR1cmVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJlc3RGZWF0dXJlID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYmVzdENociA9IC0xO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiZXN0UG9zID0gLTE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgZmkgPSAwOyBmaSA8IGZlYXR1cmVzLmxlbmd0aDsgKytmaSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZiA9IGZlYXR1cmVzW2ZpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNocnggPSBmLl9jaHJvbUlkLCBmbWluID0gZi5taW4sIGZtYXggPSBmLm1heDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJlc3RGZWF0dXJlID09IG51bGwgfHwgKChkaXIgPCAwKSAmJiAoY2hyeCA+IGJlc3RDaHIgfHwgZm1heCA+IGJlc3RQb3MpKSB8fCAoKGRpciA+IDApICYmIChjaHJ4IDwgYmVzdENociB8fCBmbWluIDwgYmVzdFBvcykpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZXN0RmVhdHVyZSA9IGY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZXN0UG9zID0gKGRpciA8IDApID8gZm1heCA6IGZtaW47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZXN0Q2hyID0gY2hyeDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChiZXN0RmVhdHVyZSAhPSBudWxsKSBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKFtiZXN0RmVhdHVyZV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKFtdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICB2YXIgY2lyRm9iUmVjdXIyID0gZnVuY3Rpb24oY2lyQmxvY2tEYXRhLCBvZmZzZXQsIGxldmVsKSB7XG4gICAgICAgIHZhciBiYSA9IG5ldyBVaW50OEFycmF5KGNpckJsb2NrRGF0YSk7XG4gICAgICAgIHZhciBzYSA9IG5ldyBJbnQxNkFycmF5KGNpckJsb2NrRGF0YSk7XG4gICAgICAgIHZhciBsYSA9IG5ldyBJbnQzMkFycmF5KGNpckJsb2NrRGF0YSk7XG5cbiAgICAgICAgdmFyIGlzTGVhZiA9IGJhW29mZnNldF07XG4gICAgICAgIHZhciBjbnQgPSBzYVtvZmZzZXQvMiArIDFdO1xuICAgICAgICBvZmZzZXQgKz0gNDtcblxuICAgICAgICBpZiAoaXNMZWFmICE9IDApIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY250OyArK2kpIHtcbiAgICAgICAgICAgICAgICB2YXIgbG8gPSBvZmZzZXQvNDtcbiAgICAgICAgICAgICAgICB2YXIgc3RhcnRDaHJvbSA9IGxhW2xvXTtcbiAgICAgICAgICAgICAgICB2YXIgc3RhcnRCYXNlID0gbGFbbG8gKyAxXTtcbiAgICAgICAgICAgICAgICB2YXIgZW5kQ2hyb20gPSBsYVtsbyArIDJdO1xuICAgICAgICAgICAgICAgIHZhciBlbmRCYXNlID0gbGFbbG8gKyAzXTtcbiAgICAgICAgICAgICAgICB2YXIgYmxvY2tPZmZzZXQgPSBid2dfcmVhZE9mZnNldChiYSwgb2Zmc2V0KzE2KTtcbiAgICAgICAgICAgICAgICB2YXIgYmxvY2tTaXplID0gYndnX3JlYWRPZmZzZXQoYmEsIG9mZnNldCsyNCk7XG4gICAgICAgICAgICAgICAgaWYgKChkaXIgPCAwICYmICgoc3RhcnRDaHJvbSA8IGNociB8fCAoc3RhcnRDaHJvbSA9PSBjaHIgJiYgc3RhcnRCYXNlIDw9IHBvcykpKSkgfHxcbiAgICAgICAgICAgICAgICAgICAgKGRpciA+IDAgJiYgKChlbmRDaHJvbSA+IGNociB8fCAoZW5kQ2hyb20gPT0gY2hyICYmIGVuZEJhc2UgPj0gcG9zKSkpKSlcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdHb3QgYW4gaW50ZXJlc3RpbmcgYmxvY2s6IHN0YXJ0QmFzZT0nICsgc3RhcnRDaHJvbSArICc6JyArIHN0YXJ0QmFzZSArICc7IGVuZEJhc2U9JyArIGVuZENocm9tICsgJzonICsgZW5kQmFzZSArICc7IG9mZnNldD0nICsgYmxvY2tPZmZzZXQgKyAnOyBzaXplPScgKyBibG9ja1NpemUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoL19yYW5kb20vLmV4ZWModGhpc0IuYndnLmlkc1RvQ2hyb21zW3N0YXJ0Q2hyb21dKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGxvZygnc2tpcHBpbmcgcmFuZG9tOiAnICsgdGhpc0IuYndnLmlkc1RvQ2hyb21zW3N0YXJ0Q2hyb21dKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChibG9ja1RvRmV0Y2ggPT0gbnVsbCB8fCAoKGRpciA8IDApICYmIChlbmRDaHJvbSA+IGJlc3RCbG9ja0NociB8fCAoZW5kQ2hyb20gPT0gYmVzdEJsb2NrQ2hyICYmIGVuZEJhc2UgPiBiZXN0QmxvY2tPZmZzZXQpKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkaXIgPiAwKSAmJiAoc3RhcnRDaHJvbSA8IGJlc3RCbG9ja0NociB8fCAoc3RhcnRDaHJvbSA9PSBiZXN0QmxvY2tDaHIgJiYgc3RhcnRCYXNlIDwgYmVzdEJsb2NrT2Zmc2V0KSkpKVxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgIGRsb2coJ2Jlc3QgaXM6IHN0YXJ0QmFzZT0nICsgc3RhcnRDaHJvbSArICc6JyArIHN0YXJ0QmFzZSArICc7IGVuZEJhc2U9JyArIGVuZENocm9tICsgJzonICsgZW5kQmFzZSArICc7IG9mZnNldD0nICsgYmxvY2tPZmZzZXQgKyAnOyBzaXplPScgKyBibG9ja1NpemUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tUb0ZldGNoID0ge29mZnNldDogYmxvY2tPZmZzZXQsIHNpemU6IGJsb2NrU2l6ZX07XG4gICAgICAgICAgICAgICAgICAgICAgICBiZXN0QmxvY2tPZmZzZXQgPSAoZGlyIDwgMCkgPyBlbmRCYXNlIDogc3RhcnRCYXNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYmVzdEJsb2NrQ2hyID0gKGRpciA8IDApID8gZW5kQ2hyb20gOiBzdGFydENocm9tO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG9mZnNldCArPSAzMjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciBiZXN0UmVjdXIgPSAtMTtcbiAgICAgICAgICAgIHZhciBiZXN0UG9zID0gLTE7XG4gICAgICAgICAgICB2YXIgYmVzdENociA9IC0xO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjbnQ7ICsraSkge1xuICAgICAgICAgICAgICAgIHZhciBsbyA9IG9mZnNldC80O1xuICAgICAgICAgICAgICAgIHZhciBzdGFydENocm9tID0gbGFbbG9dO1xuICAgICAgICAgICAgICAgIHZhciBzdGFydEJhc2UgPSBsYVtsbyArIDFdO1xuICAgICAgICAgICAgICAgIHZhciBlbmRDaHJvbSA9IGxhW2xvICsgMl07XG4gICAgICAgICAgICAgICAgdmFyIGVuZEJhc2UgPSBsYVtsbyArIDNdO1xuICAgICAgICAgICAgICAgIHZhciBibG9ja09mZnNldCA9IChsYVtsbyArIDRdPDwzMikgfCAobGFbbG8gKyA1XSk7XG4gICAgICAgICAgICAgICAgaWYgKChkaXIgPCAwICYmICgoc3RhcnRDaHJvbSA8IGNociB8fCAoc3RhcnRDaHJvbSA9PSBjaHIgJiYgc3RhcnRCYXNlIDw9IHBvcykpICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZW5kQ2hyb20gICA+PSBjaHIpKSkgfHxcbiAgICAgICAgICAgICAgICAgICAgIChkaXIgPiAwICYmICgoZW5kQ2hyb20gPiBjaHIgfHwgKGVuZENocm9tID09IGNociAmJiBlbmRCYXNlID49IHBvcykpICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHN0YXJ0Q2hyb20gPD0gY2hyKSkpKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGJlc3RSZWN1ciA8IDAgfHwgZW5kQmFzZSA+IGJlc3RQb3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJlc3RSZWN1ciA9IGJsb2NrT2Zmc2V0O1xuICAgICAgICAgICAgICAgICAgICAgICAgYmVzdFBvcyA9IChkaXIgPCAwKSA/IGVuZEJhc2UgOiBzdGFydEJhc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBiZXN0Q2hyID0gKGRpciA8IDApID8gZW5kQ2hyb20gOiBzdGFydENocm9tO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG9mZnNldCArPSAyNDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChiZXN0UmVjdXIgPj0gMCkge1xuICAgICAgICAgICAgICAgIGNpckZvYlJlY3VyKFtiZXN0UmVjdXJdLCBsZXZlbCArIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBcblxuICAgIGNpckZvYlJlY3VyKFt0aGlzQi5jaXJUcmVlT2Zmc2V0ICsgNDhdLCAxKTtcbn1cblxuQmlnV2lnLnByb3RvdHlwZS5yZWFkV2lnRGF0YSA9IGZ1bmN0aW9uKGNock5hbWUsIG1pbiwgbWF4LCBjYWxsYmFjaykge1xuICAgIHRoaXMuZ2V0VW56b29tZWRWaWV3KCkucmVhZFdpZ0RhdGEoY2hyTmFtZSwgbWluLCBtYXgsIGNhbGxiYWNrKTtcbn1cblxuQmlnV2lnLnByb3RvdHlwZS5nZXRVbnpvb21lZFZpZXcgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoIXRoaXMudW56b29tZWRWaWV3KSB7XG4gICAgICAgIHZhciBjaXJMZW4gPSA0MDAwO1xuICAgICAgICB2YXIgbnpsID0gdGhpcy56b29tTGV2ZWxzWzBdO1xuICAgICAgICBpZiAobnpsKSB7XG4gICAgICAgICAgICBjaXJMZW4gPSB0aGlzLnpvb21MZXZlbHNbMF0uZGF0YU9mZnNldCAtIHRoaXMudW56b29tZWRJbmRleE9mZnNldDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnVuem9vbWVkVmlldyA9IG5ldyBCaWdXaWdWaWV3KHRoaXMsIHRoaXMudW56b29tZWRJbmRleE9mZnNldCwgY2lyTGVuLCBmYWxzZSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnVuem9vbWVkVmlldztcbn1cblxuQmlnV2lnLnByb3RvdHlwZS5nZXRab29tZWRWaWV3ID0gZnVuY3Rpb24oeikge1xuICAgIHZhciB6aCA9IHRoaXMuem9vbUxldmVsc1t6XTtcbiAgICBpZiAoIXpoLnZpZXcpIHtcbiAgICAgICAgemgudmlldyA9IG5ldyBCaWdXaWdWaWV3KHRoaXMsIHpoLmluZGV4T2Zmc2V0LCAvKiB0aGlzLnpvb21MZXZlbHNbeiArIDFdLmRhdGFPZmZzZXQgLSB6aC5pbmRleE9mZnNldCAqLyA0MDAwLCB0cnVlKTtcbiAgICB9XG4gICAgcmV0dXJuIHpoLnZpZXc7XG59XG5cbmZ1bmN0aW9uIG1ha2VCd2coZGF0YSwgY2FsbGJhY2ssIG5hbWUpIHtcbiAgICB2YXIgYndnID0gbmV3IEJpZ1dpZygpO1xuICAgIGJ3Zy5kYXRhID0gZGF0YTtcbiAgICBid2cubmFtZSA9IG5hbWU7XG4gICAgYndnLmRhdGEuc2xpY2UoMCwgNTEyKS5zYWx0ZWQoKS5mZXRjaChmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgICAgaWYgKCFyZXN1bHQpIHtcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsLCBcIkNvdWxkbid0IGZldGNoIGZpbGVcIik7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgaGVhZGVyID0gcmVzdWx0O1xuICAgICAgICB2YXIgYmEgPSBuZXcgVWludDhBcnJheShoZWFkZXIpO1xuICAgICAgICB2YXIgc2EgPSBuZXcgSW50MTZBcnJheShoZWFkZXIpO1xuICAgICAgICB2YXIgbGEgPSBuZXcgSW50MzJBcnJheShoZWFkZXIpO1xuICAgICAgICB2YXIgbWFnaWMgPSBiYVswXSArIChNMSAqIGJhWzFdKSArIChNMiAqIGJhWzJdKSArIChNMyAqIGJhWzNdKTtcbiAgICAgICAgaWYgKG1hZ2ljID09IEJJR19XSUdfTUFHSUMpIHtcbiAgICAgICAgICAgIGJ3Zy50eXBlID0gJ2JpZ3dpZyc7XG4gICAgICAgIH0gZWxzZSBpZiAobWFnaWMgPT0gQklHX0JFRF9NQUdJQykge1xuICAgICAgICAgICAgYndnLnR5cGUgPSAnYmlnYmVkJztcbiAgICAgICAgfSBlbHNlIGlmIChtYWdpYyA9PSBCSUdfV0lHX01BR0lDX0JFIHx8IG1hZ2ljID09IEJJR19CRURfTUFHSUNfQkUpIHtcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsLCBcIkN1cnJlbnRseSBkb24ndCBzdXBwb3J0IGJpZy1lbmRpYW4gQkJJIGZpbGVzXCIpO1xuICAgICAgICAgICAgXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCwgXCJOb3QgYSBzdXBwb3J0ZWQgZm9ybWF0LCBtYWdpYz0weFwiICsgbWFnaWMudG9TdHJpbmcoMTYpKTtcbiAgICAgICAgICAgIFxuICAgICAgICB9XG5cbiAgICAgICAgYndnLnZlcnNpb24gPSBzYVsyXTsgICAgICAgICAgICAgLy8gNFxuICAgICAgICBid2cubnVtWm9vbUxldmVscyA9IHNhWzNdOyAgICAgICAvLyA2XG4gICAgICAgIGJ3Zy5jaHJvbVRyZWVPZmZzZXQgPSBid2dfcmVhZE9mZnNldChiYSwgOCk7XG4gICAgICAgIGJ3Zy51bnpvb21lZERhdGFPZmZzZXQgPSBid2dfcmVhZE9mZnNldChiYSwgMTYpO1xuICAgICAgICBid2cudW56b29tZWRJbmRleE9mZnNldCA9IGJ3Z19yZWFkT2Zmc2V0KGJhLCAyNCk7XG4gICAgICAgIGJ3Zy5maWVsZENvdW50ID0gc2FbMTZdOyAgICAgICAgIC8vIDMyXG4gICAgICAgIGJ3Zy5kZWZpbmVkRmllbGRDb3VudCA9IHNhWzE3XTsgIC8vIDM0XG4gICAgICAgIGJ3Zy5hc09mZnNldCA9IGJ3Z19yZWFkT2Zmc2V0KGJhLCAzNik7XG4gICAgICAgIGJ3Zy50b3RhbFN1bW1hcnlPZmZzZXQgPSBid2dfcmVhZE9mZnNldChiYSwgNDQpO1xuICAgICAgICBid2cudW5jb21wcmVzc0J1ZlNpemUgPSBsYVsxM107ICAvLyA1MlxuICAgICAgICBid2cuZXh0SGVhZGVyT2Zmc2V0ID0gYndnX3JlYWRPZmZzZXQoYmEsIDU2KTtcblxuICAgICAgICBid2cuem9vbUxldmVscyA9IFtdO1xuICAgICAgICBmb3IgKHZhciB6bCA9IDA7IHpsIDwgYndnLm51bVpvb21MZXZlbHM7ICsremwpIHtcbiAgICAgICAgICAgIHZhciB6bFJlZHVjdGlvbiA9IGxhW3psKjYgKyAxNl1cbiAgICAgICAgICAgIHZhciB6bERhdGEgPSBid2dfcmVhZE9mZnNldChiYSwgemwqMjQgKyA3Mik7XG4gICAgICAgICAgICB2YXIgemxJbmRleCA9IGJ3Z19yZWFkT2Zmc2V0KGJhLCB6bCoyNCArIDgwKTtcbiAgICAgICAgICAgIGJ3Zy56b29tTGV2ZWxzLnB1c2goe3JlZHVjdGlvbjogemxSZWR1Y3Rpb24sIGRhdGFPZmZzZXQ6IHpsRGF0YSwgaW5kZXhPZmZzZXQ6IHpsSW5kZXh9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGJ3Zy5yZWFkQ2hyb21UcmVlKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgYndnLmdldEF1dG9TUUwoZnVuY3Rpb24oYXMpIHtcbiAgICAgICAgICAgICAgICBid2cuc2NoZW1hID0gYXM7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGJ3Zyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfSwge3RpbWVvdXQ6IDUwMDB9KTsgICAgLy8gUG90ZW50aWFsIHRpbWVvdXQgb24gZmlyc3QgcmVxdWVzdCB0byBjYXRjaCBtaXhlZC1jb250ZW50IGVycm9ycyBvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENocm9taXVtLlxufVxuXG5cbkJpZ1dpZy5wcm90b3R5cGUuX3RzRmV0Y2ggPSBmdW5jdGlvbih6b29tLCBjaHIsIG1pbiwgbWF4LCBjYWxsYmFjaykge1xuICAgIHZhciBid2cgPSB0aGlzO1xuICAgIGlmICh6b29tID49IHRoaXMuem9vbUxldmVscy5sZW5ndGggLSAxKSB7XG4gICAgICAgIGlmICghdGhpcy50b3BMZXZlbFJlZHVjdGlvbkNhY2hlKSB7XG4gICAgICAgICAgICB0aGlzLmdldFpvb21lZFZpZXcodGhpcy56b29tTGV2ZWxzLmxlbmd0aCAtIDEpLnJlYWRXaWdEYXRhQnlJZCgtMSwgMCwgMzAwMDAwMDAwLCBmdW5jdGlvbihmZWF0cykge1xuICAgICAgICAgICAgICAgIGJ3Zy50b3BMZXZlbFJlZHVjdGlvbkNhY2hlID0gZmVhdHM7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGJ3Zy5fdHNGZXRjaCh6b29tLCBjaHIsIG1pbiwgbWF4LCBjYWxsYmFjayk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciBmID0gW107XG4gICAgICAgICAgICB2YXIgYyA9IHRoaXMudG9wTGV2ZWxSZWR1Y3Rpb25DYWNoZTtcbiAgICAgICAgICAgIGZvciAodmFyIGZpID0gMDsgZmkgPCBjLmxlbmd0aDsgKytmaSkge1xuICAgICAgICAgICAgICAgIGlmIChjW2ZpXS5fY2hyb21JZCA9PSBjaHIpIHtcbiAgICAgICAgICAgICAgICAgICAgZi5wdXNoKGNbZmldKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soZik7XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgdmlldztcbiAgICAgICAgaWYgKHpvb20gPCAwKSB7XG4gICAgICAgICAgICB2aWV3ID0gdGhpcy5nZXRVbnpvb21lZFZpZXcoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZpZXcgPSB0aGlzLmdldFpvb21lZFZpZXcoem9vbSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZpZXcucmVhZFdpZ0RhdGFCeUlkKGNociwgbWluLCBtYXgsIGNhbGxiYWNrKTtcbiAgICB9XG59XG5cbkJpZ1dpZy5wcm90b3R5cGUudGhyZXNob2xkU2VhcmNoID0gZnVuY3Rpb24oY2hyTmFtZSwgcmVmZXJlbmNlUG9pbnQsIGRpciwgdGhyZXNob2xkLCBjYWxsYmFjaykge1xuICAgIGRpciA9IChkaXI8MCkgPyAtMSA6IDE7XG4gICAgdmFyIGJ3ZyA9IHRoaXM7XG4gICAgdmFyIGluaXRpYWxDaHIgPSB0aGlzLmNocm9tc1RvSURzW2Nock5hbWVdO1xuICAgIHZhciBjYW5kaWRhdGVzID0gW3tjaHJPcmQ6IDAsIGNocjogaW5pdGlhbENociwgem9vbTogYndnLnpvb21MZXZlbHMubGVuZ3RoIC0gNCwgbWluOiAwLCBtYXg6IDMwMDAwMDAwMCwgZnJvbVJlZjogdHJ1ZX1dXG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPD0gdGhpcy5tYXhJRCArIDE7ICsraSkge1xuICAgICAgICB2YXIgY2hySWQgPSAoaW5pdGlhbENociArIChkaXIqaSkpICUgKHRoaXMubWF4SUQgKyAxKTtcbiAgICAgICAgaWYgKGNocklkIDwgMCkgXG4gICAgICAgICAgICBjaHJJZCArPSAodGhpcy5tYXhJRCArIDEpO1xuICAgICAgICBjYW5kaWRhdGVzLnB1c2goe2Nock9yZDogaSwgY2hyOiBjaHJJZCwgem9vbTogYndnLnpvb21MZXZlbHMubGVuZ3RoIC0gMSwgbWluOiAwLCBtYXg6IDMwMDAwMDAwMH0pXG4gICAgfVxuICAgICAgIFxuICAgIGZ1bmN0aW9uIGZiVGhyZXNob2xkU2VhcmNoUmVjdXIoKSB7XG4gICAgXHRpZiAoY2FuZGlkYXRlcy5sZW5ndGggPT0gMCkge1xuICAgIFx0ICAgIHJldHVybiBjYWxsYmFjayhudWxsKTtcbiAgICBcdH1cbiAgICBcdGNhbmRpZGF0ZXMuc29ydChmdW5jdGlvbihjMSwgYzIpIHtcbiAgICBcdCAgICB2YXIgZCA9IGMxLnpvb20gLSBjMi56b29tO1xuICAgIFx0ICAgIGlmIChkICE9IDApXG4gICAgXHRcdCAgICByZXR1cm4gZDtcblxuICAgICAgICAgICAgZCA9IGMxLmNock9yZCAtIGMyLmNock9yZDtcbiAgICAgICAgICAgIGlmIChkICE9IDApXG4gICAgICAgICAgICAgICAgcmV0dXJuIGQ7XG4gICAgXHQgICAgZWxzZVxuICAgIFx0XHQgICAgcmV0dXJuIGMxLm1pbiAtIGMyLm1pbiAqIGRpcjtcbiAgICBcdH0pO1xuXG5cdCAgICB2YXIgY2FuZGlkYXRlID0gY2FuZGlkYXRlcy5zcGxpY2UoMCwgMSlbMF07XG4gICAgICAgIGJ3Zy5fdHNGZXRjaChjYW5kaWRhdGUuem9vbSwgY2FuZGlkYXRlLmNociwgY2FuZGlkYXRlLm1pbiwgY2FuZGlkYXRlLm1heCwgZnVuY3Rpb24oZmVhdHMpIHtcbiAgICAgICAgICAgIHZhciBycCA9IGRpciA+IDAgPyAwIDogMzAwMDAwMDAwO1xuICAgICAgICAgICAgaWYgKGNhbmRpZGF0ZS5mcm9tUmVmKVxuICAgICAgICAgICAgICAgIHJwID0gcmVmZXJlbmNlUG9pbnQ7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGZvciAodmFyIGZpID0gMDsgZmkgPCBmZWF0cy5sZW5ndGg7ICsrZmkpIHtcbiAgICBcdCAgICAgICAgdmFyIGYgPSBmZWF0c1tmaV07XG4gICAgICAgICAgICAgICAgdmFyIHNjb3JlO1xuICAgICAgICAgICAgICAgIGlmIChmLm1heFNjb3JlICE9IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICAgICAgc2NvcmUgPSBmLm1heFNjb3JlO1xuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgc2NvcmUgPSBmLnNjb3JlO1xuXG4gICAgICAgICAgICAgICAgaWYgKGRpciA+IDApIHtcbiAgICBcdCAgICAgICAgICAgIGlmIChzY29yZSA+IHRocmVzaG9sZCkge1xuICAgICAgICBcdFx0ICAgICAgICBpZiAoY2FuZGlkYXRlLnpvb20gPCAwKSB7XG4gICAgICAgIFx0XHQgICAgICAgICAgICBpZiAoZi5taW4gPiBycClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGYpO1xuICAgICAgICBcdFx0ICAgICAgICB9IGVsc2UgaWYgKGYubWF4ID4gcnApIHtcbiAgICAgICAgXHRcdCAgICAgICAgICAgIGNhbmRpZGF0ZXMucHVzaCh7Y2hyOiBjYW5kaWRhdGUuY2hyLCBjaHJPcmQ6IGNhbmRpZGF0ZS5jaHJPcmQsIHpvb206IGNhbmRpZGF0ZS56b29tIC0gMiwgbWluOiBmLm1pbiwgbWF4OiBmLm1heCwgZnJvbVJlZjogY2FuZGlkYXRlLmZyb21SZWZ9KTtcbiAgICAgICAgXHRcdCAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNjb3JlID4gdGhyZXNob2xkKSB7XG4gICAgICAgICAgICBcdFx0ICAgIGlmIChjYW5kaWRhdGUuem9vbSA8IDApIHtcbiAgICAgICAgICAgICAgICBcdCAgICAgICAgaWYgKGYubWF4IDwgcnApXG4gICAgICAgICAgICAgICAgXHRcdFx0ICAgIHJldHVybiBjYWxsYmFjayhmKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZi5taW4gPCBycCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbmRpZGF0ZXMucHVzaCh7Y2hyOiBjYW5kaWRhdGUuY2hyLCBjaHJPcmQ6IGNhbmRpZGF0ZS5jaHJPcmQsIHpvb206IGNhbmRpZGF0ZS56b29tIC0gMiwgbWluOiBmLm1pbiwgbWF4OiBmLm1heCwgZnJvbVJlZjogY2FuZGlkYXRlLmZyb21SZWZ9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICBcdCAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgXHQgICAgfVxuICAgICAgICAgICAgZmJUaHJlc2hvbGRTZWFyY2hSZWN1cigpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgZmJUaHJlc2hvbGRTZWFyY2hSZWN1cigpO1xufVxuXG5CaWdXaWcucHJvdG90eXBlLmdldEF1dG9TUUwgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgIHZhciB0aGlzQiA9IHRoaXM7XG4gICAgaWYgKCF0aGlzLmFzT2Zmc2V0KVxuICAgICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCk7XG5cblxuICAgIHRoaXMuZGF0YS5zbGljZSh0aGlzLmFzT2Zmc2V0LCAyMDQ4KS5mZXRjaChmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgICAgdmFyIGJhID0gbmV3IFVpbnQ4QXJyYXkocmVzdWx0KTtcbiAgICAgICAgdmFyIHMgPSAnJztcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBiYS5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgaWYgKGJhW2ldID09IDApXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBzICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYmFbaV0pO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvKiBcbiAgICAgICAgICogUXVpY2snbidkaXJ0eSBhdHRlbXB0IHRvIHBhcnNlIGF1dG9TcWwgZm9ybWF0LlxuICAgICAgICAgKiBTZWU6IGh0dHA6Ly93d3cubGludXhqb3VybmFsLmNvbS9maWxlcy9saW51eGpvdXJuYWwuY29tL2xpbnV4am91cm5hbC9hcnRpY2xlcy8wNTkvNTk0OS81OTQ5bDIuaHRtbFxuICAgICAgICAgKi9cblxuICAgICAgICB2YXIgaGVhZGVyX3JlID0gLyhcXHcrKVxccysoXFx3KylcXHMrKFwiKFteXCJdKylcIik/XFxzK1xcKFxccyovO1xuICAgICAgICB2YXIgZmllbGRfcmUgPSAvKFtcXHdcXFtcXF1dKylcXHMrKFxcdyspXFxzKjtcXHMqKFwiKFteXCJdKylcIik/XFxzKi9nO1xuXG4gICAgICAgIHZhciBoZWFkZXJNYXRjaCA9IGhlYWRlcl9yZS5leGVjKHMpO1xuICAgICAgICBpZiAoaGVhZGVyTWF0Y2gpIHtcbiAgICAgICAgICAgIHZhciBhcyA9IHtcbiAgICAgICAgICAgICAgICBkZWNsVHlwZTogaGVhZGVyTWF0Y2hbMV0sXG4gICAgICAgICAgICAgICAgbmFtZTogaGVhZGVyTWF0Y2hbMl0sXG4gICAgICAgICAgICAgICAgY29tbWVudDogaGVhZGVyTWF0Y2hbNF0sXG5cbiAgICAgICAgICAgICAgICBmaWVsZHM6IFtdXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBzID0gcy5zdWJzdHJpbmcoaGVhZGVyTWF0Y2hbMF0pO1xuICAgICAgICAgICAgZm9yICh2YXIgbSA9IGZpZWxkX3JlLmV4ZWMocyk7IG0gIT0gbnVsbDsgbSA9IGZpZWxkX3JlLmV4ZWMocykpIHtcbiAgICAgICAgICAgICAgICBhcy5maWVsZHMucHVzaCh7dHlwZTogbVsxXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogbVsyXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tbWVudDogbVs0XX0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soYXMpO1xuICAgICAgICB9XG4gICAgfSk7XG59XG5cbkJpZ1dpZy5wcm90b3R5cGUuZ2V0RXh0cmFJbmRpY2VzID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICB2YXIgdGhpc0IgPSB0aGlzO1xuICAgIGlmICh0aGlzLnZlcnNpb24gPCA0IHx8IHRoaXMuZXh0SGVhZGVyT2Zmc2V0ID09IDAgfHwgdGhpcy50eXBlICE9ICdiaWdiZWQnKSB7XG4gICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmRhdGEuc2xpY2UodGhpcy5leHRIZWFkZXJPZmZzZXQsIDY0KS5mZXRjaChmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgICAgICAgIGlmICghcmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwsIFwiQ291bGRuJ3QgZmV0Y2ggZXh0ZW5zaW9uIGhlYWRlclwiKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIGJhID0gbmV3IFVpbnQ4QXJyYXkocmVzdWx0KTtcbiAgICAgICAgICAgIHZhciBzYSA9IG5ldyBJbnQxNkFycmF5KHJlc3VsdCk7XG4gICAgICAgICAgICB2YXIgbGEgPSBuZXcgSW50MzJBcnJheShyZXN1bHQpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB2YXIgZXh0SGVhZGVyU2l6ZSA9IHNhWzBdO1xuICAgICAgICAgICAgdmFyIGV4dHJhSW5kZXhDb3VudCA9IHNhWzFdO1xuICAgICAgICAgICAgdmFyIGV4dHJhSW5kZXhMaXN0T2Zmc2V0ID0gYndnX3JlYWRPZmZzZXQoYmEsIDQpO1xuXG4gICAgICAgICAgICBpZiAoZXh0cmFJbmRleENvdW50ID09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEZJWE1FIDIwYnl0ZSByZWNvcmRzIG9ubHkgbWFrZSBzZW5zZSBmb3Igc2luZ2xlLWZpZWxkIGluZGljZXMuXG4gICAgICAgICAgICAvLyBSaWdodCBub3csIHRoZXNlIHNlZW0gdG8gYmUgdGhlIG9ubHkgdGhpbmdzIGFyb3VuZCwgYnV0IHRoZSBmb3JtYXRcbiAgICAgICAgICAgIC8vIGlzIGFjdHVhbGx5IG1vcmUgZ2VuZXJhbC5cbiAgICAgICAgICAgIHRoaXNCLmRhdGEuc2xpY2UoZXh0cmFJbmRleExpc3RPZmZzZXQsIGV4dHJhSW5kZXhDb3VudCAqIDIwKS5mZXRjaChmdW5jdGlvbihlaWwpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWVpbCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCwgXCJDb3VsZG4ndCBmZXRjaCBpbmRleCBpbmZvXCIpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciBiYSA9IG5ldyBVaW50OEFycmF5KGVpbCk7XG4gICAgICAgICAgICAgICAgdmFyIHNhID0gbmV3IEludDE2QXJyYXkoZWlsKTtcbiAgICAgICAgICAgICAgICB2YXIgbGEgPSBuZXcgSW50MzJBcnJheShlaWwpO1xuXG4gICAgICAgICAgICAgICAgdmFyIGluZGljZXMgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpaSA9IDA7IGlpIDwgZXh0cmFJbmRleENvdW50OyArK2lpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlaVR5cGUgPSBzYVtpaSoxMF07XG4gICAgICAgICAgICAgICAgICAgIHZhciBlaUZpZWxkQ291bnQgPSBzYVtpaSoxMCArIDFdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZWlPZmZzZXQgPSBid2dfcmVhZE9mZnNldChiYSwgaWkqMjAgKyA0KTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVpRmllbGQgPSBzYVtpaSoxMCArIDhdXG4gICAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IG5ldyBCQklFeHRyYUluZGV4KHRoaXNCLCBlaVR5cGUsIGVpRmllbGRDb3VudCwgZWlPZmZzZXQsIGVpRmllbGQpO1xuICAgICAgICAgICAgICAgICAgICBpbmRpY2VzLnB1c2goaW5kZXgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYWxsYmFjayhpbmRpY2VzKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIEJCSUV4dHJhSW5kZXgoYmJpLCB0eXBlLCBmaWVsZENvdW50LCBvZmZzZXQsIGZpZWxkKSB7XG4gICAgdGhpcy5iYmkgPSBiYmk7XG4gICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICB0aGlzLmZpZWxkQ291bnQgPSBmaWVsZENvdW50O1xuICAgIHRoaXMub2Zmc2V0ID0gb2Zmc2V0O1xuICAgIHRoaXMuZmllbGQgPSBmaWVsZDtcbn1cblxuQkJJRXh0cmFJbmRleC5wcm90b3R5cGUubG9va3VwID0gZnVuY3Rpb24obmFtZSwgY2FsbGJhY2spIHtcbiAgICB2YXIgdGhpc0IgPSB0aGlzO1xuXG4gICAgdGhpcy5iYmkuZGF0YS5zbGljZSh0aGlzLm9mZnNldCwgMzIpLmZldGNoKGZ1bmN0aW9uKGJwdCkge1xuICAgICAgICB2YXIgYmEgPSBuZXcgVWludDhBcnJheShicHQpO1xuICAgICAgICB2YXIgc2EgPSBuZXcgSW50MTZBcnJheShicHQpO1xuICAgICAgICB2YXIgbGEgPSBuZXcgSW50MzJBcnJheShicHQpO1xuICAgICAgICB2YXIgYnB0TWFnaWMgPSBsYVswXTtcbiAgICAgICAgdmFyIGJsb2NrU2l6ZSA9IGxhWzFdO1xuICAgICAgICB2YXIga2V5U2l6ZSA9IGxhWzJdO1xuICAgICAgICB2YXIgdmFsU2l6ZSA9IGxhWzNdO1xuICAgICAgICB2YXIgaXRlbUNvdW50ID0gYndnX3JlYWRPZmZzZXQoYmEsIDE2KTtcbiAgICAgICAgdmFyIHJvb3ROb2RlT2Zmc2V0ID0gMzI7XG5cbiAgICAgICAgZnVuY3Rpb24gYnB0UmVhZE5vZGUobm9kZU9mZnNldCkge1xuICAgICAgICAgICAgdGhpc0IuYmJpLmRhdGEuc2xpY2Uobm9kZU9mZnNldCwgNCArIChibG9ja1NpemUgKiAoa2V5U2l6ZSArIHZhbFNpemUpKSkuZmV0Y2goZnVuY3Rpb24obm9kZSkge1xuICAgICAgICAgICAgICAgIHZhciBiYSA9IG5ldyBVaW50OEFycmF5KG5vZGUpO1xuICAgICAgICAgICAgICAgIHZhciBzYSA9IG5ldyBVaW50MTZBcnJheShub2RlKTtcbiAgICAgICAgICAgICAgICB2YXIgbGEgPSBuZXcgVWludDMyQXJyYXkobm9kZSk7XG5cbiAgICAgICAgICAgICAgICB2YXIgbm9kZVR5cGUgPSBiYVswXTtcbiAgICAgICAgICAgICAgICB2YXIgY250ID0gc2FbMV07XG5cbiAgICAgICAgICAgICAgICB2YXIgb2Zmc2V0ID0gNDtcbiAgICAgICAgICAgICAgICBpZiAobm9kZVR5cGUgPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbGFzdENoaWxkT2Zmc2V0ID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbiA9IDA7IG4gPCBjbnQ7ICsrbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGtleSA9ICcnO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIga2kgPSAwOyBraSA8IGtleVNpemU7ICsra2kpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2hhckNvZGUgPSBiYVtvZmZzZXQrK107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNoYXJDb2RlICE9IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoY2hhckNvZGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNoaWxkT2Zmc2V0ID0gYndnX3JlYWRPZmZzZXQoYmEsIG9mZnNldCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgKz0gODtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5hbWUubG9jYWxlQ29tcGFyZShrZXkpIDwgMCAmJiBsYXN0Q2hpbGRPZmZzZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicHRSZWFkTm9kZShsYXN0Q2hpbGRPZmZzZXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RDaGlsZE9mZnNldCA9IGNoaWxkT2Zmc2V0O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJwdFJlYWROb2RlKGxhc3RDaGlsZE9mZnNldCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbiA9IDA7IG4gPCBjbnQ7ICsrbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGtleSA9ICcnO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIga2kgPSAwOyBraSA8IGtleVNpemU7ICsra2kpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2hhckNvZGUgPSBiYVtvZmZzZXQrK107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNoYXJDb2RlICE9IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoY2hhckNvZGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3BlY2lmaWMgZm9yIEVJIGNhc2UuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoa2V5ID09IG5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3RhcnQgPSBid2dfcmVhZE9mZnNldChiYSwgb2Zmc2V0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGVuZ3RoID0gcmVhZEludChiYSwgb2Zmc2V0ICsgOCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpc0IuYmJpLmdldFVuem9vbWVkVmlldygpLmZldGNoRmVhdHVyZXMoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKGNociwgbWluLCBtYXgsIHRva3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0b2tzICYmIHRva3MubGVuZ3RoID4gdGhpc0IuZmllbGQgLSAzKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0b2tzW3RoaXNCLmZpZWxkIC0gM10gPT0gbmFtZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFt7b2Zmc2V0OiBzdGFydCwgc2l6ZTogbGVuZ3RofV0sIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgKz0gdmFsU2l6ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soW10pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgYnB0UmVhZE5vZGUodGhpc0Iub2Zmc2V0ICsgcm9vdE5vZGVPZmZzZXQpO1xuICAgIH0pO1xufVxuXG5pZiAodHlwZW9mKG1vZHVsZSkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgICAgIG1ha2VCd2c6IG1ha2VCd2csXG4gICAgICAgIEJJR19CRURfTUFHSUM6IEJJR19CRURfTUFHSUMsXG4gICAgICAgIEJJR19XSUdfTUFHSUM6IEJJR19XSUdfTUFHSUNcbiAgICB9XG59XG4iLCIvKiAtKi0gbW9kZTogamF2YXNjcmlwdDsgYy1iYXNpYy1vZmZzZXQ6IDQ7IGluZGVudC10YWJzLW1vZGU6IG5pbCAtKi0gKi9cblxuLy8gXG4vLyBEYWxsaWFuY2UgR2Vub21lIEV4cGxvcmVyXG4vLyAoYykgVGhvbWFzIERvd24gMjAwNi0yMDExXG4vL1xuLy8gYmluLmpzIGdlbmVyYWwgYmluYXJ5IGRhdGEgc3VwcG9ydFxuLy9cblxuXCJ1c2Ugc3RyaWN0XCI7XG5cbmlmICh0eXBlb2YocmVxdWlyZSkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgdmFyIHV0aWxzID0gcmVxdWlyZSgnLi91dGlscycpO1xuICAgIHZhciBzaGFsbG93Q29weSA9IHV0aWxzLnNoYWxsb3dDb3B5O1xuXG4gICAgdmFyIHNoYTEgPSByZXF1aXJlKCcuL3NoYTEnKTtcbiAgICB2YXIgYjY0X3NoYTEgPSBzaGExLmI2NF9zaGExO1xuXG4gICAgdmFyIFByb21pc2UgPSByZXF1aXJlKCdlczYtcHJvbWlzZScpLlByb21pc2U7XG59XG5cbmZ1bmN0aW9uIEJsb2JGZXRjaGFibGUoYikge1xuICAgIHRoaXMuYmxvYiA9IGI7XG59XG5cbkJsb2JGZXRjaGFibGUucHJvdG90eXBlLnNsaWNlID0gZnVuY3Rpb24oc3RhcnQsIGxlbmd0aCkge1xuICAgIHZhciBiO1xuXG4gICAgaWYgKHRoaXMuYmxvYi5zbGljZSkge1xuICAgICAgICBpZiAobGVuZ3RoKSB7XG4gICAgICAgICAgICBiID0gdGhpcy5ibG9iLnNsaWNlKHN0YXJ0LCBzdGFydCArIGxlbmd0aCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBiID0gdGhpcy5ibG9iLnNsaWNlKHN0YXJ0KTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChsZW5ndGgpIHtcbiAgICAgICAgICAgIGIgPSB0aGlzLmJsb2Iud2Via2l0U2xpY2Uoc3RhcnQsIHN0YXJ0ICsgbGVuZ3RoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGIgPSB0aGlzLmJsb2Iud2Via2l0U2xpY2Uoc3RhcnQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBuZXcgQmxvYkZldGNoYWJsZShiKTtcbn1cblxuQmxvYkZldGNoYWJsZS5wcm90b3R5cGUuc2FsdGVkID0gZnVuY3Rpb24oKSB7cmV0dXJuIHRoaXM7fVxuXG5pZiAodHlwZW9mKEZpbGVSZWFkZXIpICE9PSAndW5kZWZpbmVkJykge1xuICAgIC8vIGNvbnNvbGUubG9nKCdkZWZpbmluZyBhc3luYyBCbG9iRmV0Y2hhYmxlLmZldGNoJyk7XG5cbiAgICBCbG9iRmV0Y2hhYmxlLnByb3RvdHlwZS5mZXRjaCA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuICAgICAgICByZWFkZXIub25sb2FkZW5kID0gZnVuY3Rpb24oZXYpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKGJzdHJpbmdUb0J1ZmZlcihyZWFkZXIucmVzdWx0KSk7XG4gICAgICAgIH07XG4gICAgICAgIHJlYWRlci5yZWFkQXNCaW5hcnlTdHJpbmcodGhpcy5ibG9iKTtcbiAgICB9XG5cbn0gZWxzZSB7XG4gICAgLy8gaWYgKGNvbnNvbGUgJiYgY29uc29sZS5sb2cpXG4gICAgLy8gICAgY29uc29sZS5sb2coJ2RlZmluaW5nIHN5bmMgQmxvYkZldGNoYWJsZS5mZXRjaCcpO1xuXG4gICAgQmxvYkZldGNoYWJsZS5wcm90b3R5cGUuZmV0Y2ggPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgICAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXJTeW5jKCk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB2YXIgcmVzID0gcmVhZGVyLnJlYWRBc0FycmF5QnVmZmVyKHRoaXMuYmxvYik7XG4gICAgICAgICAgICBjYWxsYmFjayhyZXMpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCBlKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gVVJMRmV0Y2hhYmxlKHVybCwgc3RhcnQsIGVuZCwgb3B0cykge1xuICAgIGlmICghb3B0cykge1xuICAgICAgICBpZiAodHlwZW9mIHN0YXJ0ID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgb3B0cyA9IHN0YXJ0O1xuICAgICAgICAgICAgc3RhcnQgPSB1bmRlZmluZWQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBvcHRzID0ge307XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLnVybCA9IHVybDtcbiAgICB0aGlzLnN0YXJ0ID0gc3RhcnQgfHwgMDtcbiAgICBpZiAoZW5kKSB7XG4gICAgICAgIHRoaXMuZW5kID0gZW5kO1xuICAgIH1cbiAgICB0aGlzLm9wdHMgPSBvcHRzO1xufVxuXG5VUkxGZXRjaGFibGUucHJvdG90eXBlLnNsaWNlID0gZnVuY3Rpb24ocywgbCkge1xuICAgIGlmIChzIDwgMCkge1xuICAgICAgICB0aHJvdyAnQmFkIHNsaWNlICcgKyBzO1xuICAgIH1cblxuICAgIHZhciBucyA9IHRoaXMuc3RhcnQsIG5lID0gdGhpcy5lbmQ7XG4gICAgaWYgKG5zICYmIHMpIHtcbiAgICAgICAgbnMgPSBucyArIHM7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgbnMgPSBzIHx8IG5zO1xuICAgIH1cbiAgICBpZiAobCAmJiBucykge1xuICAgICAgICBuZSA9IG5zICsgbCAtIDE7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgbmUgPSBuZSB8fCBsIC0gMTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBVUkxGZXRjaGFibGUodGhpcy51cmwsIG5zLCBuZSwgdGhpcy5vcHRzKTtcbn1cblxudmFyIHNlZWQ9MDtcbnZhciBpc1NhZmFyaSA9IHR5cGVvZihuYXZpZ2F0b3IpICE9PSAndW5kZWZpbmVkJyAmJlxuICAgIG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZignU2FmYXJpJykgPj0gMCAmJlxuICAgIG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZignQ2hyb21lJykgPCAwIDtcblxuVVJMRmV0Y2hhYmxlLnByb3RvdHlwZS5mZXRjaEFzVGV4dCA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgdmFyIHRoaXNCID0gdGhpcztcblxuICAgIHRoaXMuZ2V0VVJMKCkudGhlbihmdW5jdGlvbih1cmwpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHZhciByZXEgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgICAgICAgIHZhciBsZW5ndGg7XG4gICAgICAgICAgICBpZiAoKGlzU2FmYXJpIHx8IHRoaXNCLm9wdHMuc2FsdCkgJiYgdXJsLmluZGV4T2YoJz8nKSA8IDApIHtcbiAgICAgICAgICAgICAgICB1cmwgPSB1cmwgKyAnP3NhbHQ9JyArIGI2NF9zaGExKCcnICsgRGF0ZS5ub3coKSArICcsJyArICgrK3NlZWQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlcS5vcGVuKCdHRVQnLCB1cmwsIHRydWUpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAodGhpc0IuZW5kKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXNCLmVuZCAtIHRoaXNCLnN0YXJ0ID4gMTAwMDAwMDAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93ICdNb25zdGVyIGZldGNoISc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJlcS5zZXRSZXF1ZXN0SGVhZGVyKCdSYW5nZScsICdieXRlcz0nICsgdGhpc0Iuc3RhcnQgKyAnLScgKyB0aGlzQi5lbmQpO1xuICAgICAgICAgICAgICAgIGxlbmd0aCA9IHRoaXNCLmVuZCAtIHRoaXNCLnN0YXJ0ICsgMTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmVxLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGlmIChyZXEucmVhZHlTdGF0ZSA9PSA0KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXEuc3RhdHVzID09IDIwMCB8fCByZXEuc3RhdHVzID09IDIwNikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKHJlcS5yZXNwb25zZVRleHQpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmICh0aGlzQi5vcHRzLmNyZWRlbnRpYWxzKSB7XG4gICAgICAgICAgICAgICAgcmVxLndpdGhDcmVkZW50aWFscyA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXEuc2VuZCgpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCk7XG4gICAgICAgIH1cbiAgICB9KS5jYXRjaChmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwsIGVycik7XG4gICAgfSk7XG59XG5cblVSTEZldGNoYWJsZS5wcm90b3R5cGUuc2FsdGVkID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG8gPSBzaGFsbG93Q29weSh0aGlzLm9wdHMpO1xuICAgIG8uc2FsdCA9IHRydWU7XG4gICAgcmV0dXJuIG5ldyBVUkxGZXRjaGFibGUodGhpcy51cmwsIHRoaXMuc3RhcnQsIHRoaXMuZW5kLCBvKTtcbn1cblxuVVJMRmV0Y2hhYmxlLnByb3RvdHlwZS5nZXRVUkwgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAodGhpcy5vcHRzLnJlc29sdmVyKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9wdHMucmVzb2x2ZXIodGhpcy51cmwpLnRoZW4oZnVuY3Rpb24gKHVybE9yT2JqKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHVybE9yT2JqID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHJldHVybiB1cmxPck9iajtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVybE9yT2JqLnVybDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLnVybCk7XG4gICAgfVxufVxuXG5VUkxGZXRjaGFibGUucHJvdG90eXBlLmZldGNoID0gZnVuY3Rpb24oY2FsbGJhY2ssIG9wdHMpIHtcbiAgICB2YXIgdGhpc0IgPSB0aGlzO1xuIFxuICAgIG9wdHMgPSBvcHRzIHx8IHt9O1xuICAgIHZhciBhdHRlbXB0ID0gb3B0cy5hdHRlbXB0IHx8IDE7XG4gICAgdmFyIHRydW5jYXRlZExlbmd0aCA9IG9wdHMudHJ1bmNhdGVkTGVuZ3RoO1xuICAgIGlmIChhdHRlbXB0ID4gMykge1xuICAgICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCk7XG4gICAgfVxuXG4gICAgdGhpcy5nZXRVUkwoKS50aGVuKGZ1bmN0aW9uKHVybCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdmFyIHRpbWVvdXQ7XG4gICAgICAgICAgICBpZiAob3B0cy50aW1lb3V0ICYmICF0aGlzQi5vcHRzLmNyZWRlbnRpYWxzKSB7XG4gICAgICAgICAgICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQoXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3RpbWluZyBvdXQgJyArIHVybCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXEuYWJvcnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsLCAnVGltZW91dCcpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBvcHRzLnRpbWVvdXRcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB2YXIgcmVxID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICAgICAgICB2YXIgbGVuZ3RoO1xuICAgICAgICAgICAgaWYgKChpc1NhZmFyaSB8fCB0aGlzQi5vcHRzLnNhbHQpICYmIHVybC5pbmRleE9mKCc/JykgPCAwKSB7XG4gICAgICAgICAgICAgICAgdXJsID0gdXJsICsgJz9zYWx0PScgKyBiNjRfc2hhMSgnJyArIERhdGUubm93KCkgKyAnLCcgKyAoKytzZWVkKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXEub3BlbignR0VUJywgdXJsLCB0cnVlKTtcbiAgICAgICAgICAgIHJlcS5vdmVycmlkZU1pbWVUeXBlKCd0ZXh0L3BsYWluOyBjaGFyc2V0PXgtdXNlci1kZWZpbmVkJyk7XG4gICAgICAgICAgICBpZiAodGhpc0IuZW5kKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXNCLmVuZCAtIHRoaXNCLnN0YXJ0ID4gMTAwMDAwMDAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93ICdNb25zdGVyIGZldGNoISc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJlcS5zZXRSZXF1ZXN0SGVhZGVyKCdSYW5nZScsICdieXRlcz0nICsgdGhpc0Iuc3RhcnQgKyAnLScgKyB0aGlzQi5lbmQpO1xuICAgICAgICAgICAgICAgIGxlbmd0aCA9IHRoaXNCLmVuZCAtIHRoaXNCLnN0YXJ0ICsgMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlcS5yZXNwb25zZVR5cGUgPSAnYXJyYXlidWZmZXInO1xuICAgICAgICAgICAgcmVxLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGlmIChyZXEucmVhZHlTdGF0ZSA9PSA0KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aW1lb3V0KVxuICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVxLnN0YXR1cyA9PSAyMDAgfHwgcmVxLnN0YXR1cyA9PSAyMDYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXEucmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYmwgPSByZXEucmVzcG9uc2UuYnl0ZUxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobGVuZ3RoICYmIGxlbmd0aCAhPSBibCAmJiAoIXRydW5jYXRlZExlbmd0aCB8fCBibCAhPSB0cnVuY2F0ZWRMZW5ndGgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzQi5mZXRjaChjYWxsYmFjaywge2F0dGVtcHQ6IGF0dGVtcHQgKyAxLCB0cnVuY2F0ZWRMZW5ndGg6IGJsfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKHJlcS5yZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXEubW96UmVzcG9uc2VBcnJheUJ1ZmZlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhyZXEubW96UmVzcG9uc2VBcnJheUJ1ZmZlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gcmVxLnJlc3BvbnNlVGV4dDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobGVuZ3RoICYmIGxlbmd0aCAhPSByLmxlbmd0aCAmJiAoIXRydW5jYXRlZExlbmd0aCB8fCByLmxlbmd0aCAhPSB0cnVuY2F0ZWRMZW5ndGgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzQi5mZXRjaChjYWxsYmFjaywge2F0dGVtcHQ6IGF0dGVtcHQgKyAxLCB0cnVuY2F0ZWRMZW5ndGg6IHIubGVuZ3RofSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGJzdHJpbmdUb0J1ZmZlcihyZXEucmVzcG9uc2VUZXh0KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXNCLmZldGNoKGNhbGxiYWNrLCB7YXR0ZW1wdDogYXR0ZW1wdCArIDF9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAodGhpc0Iub3B0cy5jcmVkZW50aWFscykge1xuICAgICAgICAgICAgICAgIHJlcS53aXRoQ3JlZGVudGlhbHMgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVxLnNlbmQoKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwpO1xuICAgICAgICB9XG4gICAgfSkuY2F0Y2goZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsLCBlcnIpO1xuICAgIH0pO1xufVxuICAgICAgICAgICAgICAgICAgICAgICBcbmZ1bmN0aW9uIGJzdHJpbmdUb0J1ZmZlcihyZXN1bHQpIHtcbiAgICBpZiAoIXJlc3VsdCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICB2YXIgYmEgPSBuZXcgVWludDhBcnJheShyZXN1bHQubGVuZ3RoKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGJhLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIGJhW2ldID0gcmVzdWx0LmNoYXJDb2RlQXQoaSk7XG4gICAgfVxuICAgIHJldHVybiBiYS5idWZmZXI7XG59XG5cbi8vIFJlYWQgZnJvbSBVaW50OEFycmF5XG5cbnZhciBjb252ZXJ0QnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKDgpO1xudmFyIGJhID0gbmV3IFVpbnQ4QXJyYXkoY29udmVydEJ1ZmZlcik7XG52YXIgZmEgPSBuZXcgRmxvYXQzMkFycmF5KGNvbnZlcnRCdWZmZXIpO1xuXG5mdW5jdGlvbiByZWFkRmxvYXQoYnVmLCBvZmZzZXQpIHtcbiAgICBiYVswXSA9IGJ1ZltvZmZzZXRdO1xuICAgIGJhWzFdID0gYnVmW29mZnNldCsxXTtcbiAgICBiYVsyXSA9IGJ1ZltvZmZzZXQrMl07XG4gICAgICAgIGJhWzNdID0gYnVmW29mZnNldCszXTtcbiAgICByZXR1cm4gZmFbMF07XG59XG5cbmZ1bmN0aW9uIHJlYWRJbnQ2NChiYSwgb2Zmc2V0KSB7XG4gICAgcmV0dXJuIChiYVtvZmZzZXQgKyA3XSA8PCAyNCkgfCAoYmFbb2Zmc2V0ICsgNl0gPDwgMTYpIHwgKGJhW29mZnNldCArIDVdIDw8IDgpIHwgKGJhW29mZnNldCArIDRdKTtcbn1cblxuZnVuY3Rpb24gcmVhZEludChiYSwgb2Zmc2V0KSB7XG4gICAgcmV0dXJuIChiYVtvZmZzZXQgKyAzXSA8PCAyNCkgfCAoYmFbb2Zmc2V0ICsgMl0gPDwgMTYpIHwgKGJhW29mZnNldCArIDFdIDw8IDgpIHwgKGJhW29mZnNldF0pO1xufVxuXG5mdW5jdGlvbiByZWFkU2hvcnQoYmEsIG9mZnNldCkge1xuICAgIHJldHVybiAoYmFbb2Zmc2V0ICsgMV0gPDwgOCkgfCAoYmFbb2Zmc2V0XSk7XG59XG5cbmZ1bmN0aW9uIHJlYWRCeXRlKGJhLCBvZmZzZXQpIHtcbiAgICByZXR1cm4gYmFbb2Zmc2V0XTtcbn1cblxuZnVuY3Rpb24gcmVhZEludEJFKGJhLCBvZmZzZXQpIHtcbiAgICByZXR1cm4gKGJhW29mZnNldF0gPDwgMjQpIHwgKGJhW29mZnNldCArIDFdIDw8IDE2KSB8IChiYVtvZmZzZXQgKyAyXSA8PCA4KSB8IChiYVtvZmZzZXQgKyAzXSk7XG59XG5cbi8vIEV4cG9ydHMgaWYgd2UgYXJlIGJlaW5nIHVzZWQgYXMgYSBtb2R1bGVcblxuaWYgKHR5cGVvZihtb2R1bGUpICE9PSAndW5kZWZpbmVkJykge1xuICAgIG1vZHVsZS5leHBvcnRzID0ge1xuICAgICAgICBCbG9iRmV0Y2hhYmxlOiBCbG9iRmV0Y2hhYmxlLFxuICAgICAgICBVUkxGZXRjaGFibGU6IFVSTEZldGNoYWJsZSxcblxuICAgICAgICByZWFkSW50OiByZWFkSW50LFxuICAgICAgICByZWFkSW50QkU6IHJlYWRJbnRCRSxcbiAgICAgICAgcmVhZEludDY0OiByZWFkSW50NjQsXG4gICAgICAgIHJlYWRTaG9ydDogcmVhZFNob3J0LFxuICAgICAgICByZWFkQnl0ZTogcmVhZEJ5dGUsXG4gICAgICAgIHJlYWRGbG9hdDogcmVhZEZsb2F0XG4gICAgfVxufVxuIiwiLyogLSotIG1vZGU6IGphdmFzY3JpcHQ7IGMtYmFzaWMtb2Zmc2V0OiA0OyBpbmRlbnQtdGFicy1tb2RlOiBuaWwgLSotICovXG5cbi8vXG4vLyBEYWxsaWFuY2UgR2Vub21lIEV4cGxvcmVyXG4vLyAoYykgVGhvbWFzIERvd24gMjAwNi0yMDEzXG4vL1xuLy8gYnJvd3Nlci11cy5qczogc3RhbmRhcmQgVUkgd2lyaW5nXG4vL1xuXG5cInVzZSBzdHJpY3RcIjtcblxuaWYgKHR5cGVvZihyZXF1aXJlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB2YXIgYnJvd3NlciA9IHJlcXVpcmUoJy4vY2Jyb3dzZXInKTtcbiAgICB2YXIgQnJvd3NlciA9IGJyb3dzZXIuQnJvd3NlcjtcblxuICAgIHZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcbiAgICB2YXIgbWFrZUVsZW1lbnQgPSB1dGlscy5tYWtlRWxlbWVudDtcbiAgICB2YXIgcmVtb3ZlQ2hpbGRyZW4gPSB1dGlscy5yZW1vdmVDaGlsZHJlbjtcblxuICAgIHZhciBuZiA9IHJlcXVpcmUoJy4vbnVtZm9ybWF0cycpO1xuICAgIHZhciBmb3JtYXRMb25nSW50ID0gbmYuZm9ybWF0TG9uZ0ludDtcblxuICAgIHZhciBtYWtlWm9vbVNsaWRlciA9IHJlcXVpcmUoJy4vem9vbXNsaWRlcicpO1xuXG4gICAgLy8gRm9yIHNpZGUgZWZmZWN0c1xuXG4gICAgcmVxdWlyZSgnLi90aWVyLWVkaXQnKTtcbiAgICByZXF1aXJlKCcuL2V4cG9ydC1jb25maWcnKTtcbiAgICByZXF1aXJlKCcuL2V4cG9ydC11aScpO1xuICAgIHJlcXVpcmUoJy4vZXhwb3J0LWltYWdlJyk7XG4gICAgcmVxdWlyZSgnLi9zdmctZXhwb3J0Jyk7XG4gICAgcmVxdWlyZSgnLi9zZXNzaW9uJyk7XG59XG5cbi8qXG4gKiBRdWl0ZSBhIGJpdCBvZiB0aGlzIG91Z2h0IHRvIGJlIGRvbmUgdXNpbmcgYSB0ZW1wbGF0aW5nIHN5c3RlbSwgYnV0XG4gKiBzaW5jZSB3ZWItY29tcG9uZW50cyBpc24ndCBxdWl0ZSByZWFkeSBmb3IgcHJpbWUgdGltZSB5ZXQgd2UnbGwgc3RpY2tcbiAqIHdpdGggY29uc3RydWN0aW5nIGl0IGFsbCBpbiBKYXZhc2NyaXB0IGZvciBub3cuLi5cbiAqL1xuXG5Ccm93c2VyLnByb3RvdHlwZS5pbml0VUkgPSBmdW5jdGlvbihob2xkZXIsIGdlbm9tZVBhbmVsKSB7XG4gICAgaWYgKCF0aGlzLm5vU291cmNlQ1NTKSB7XG4gICAgICBbJ2Jvb3RzdHJhcC1zY29wZWQuY3NzJywgJ2RhbGxpYW5jZS1zY29wZWQuY3NzJywgJ2ZvbnQtYXdlc29tZS5taW4uY3NzJ10uZm9yRWFjaChmdW5jdGlvbihwYXRoKSB7XG4gICAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ2xpbmsnLCAnJywge1xuICAgICAgICAgIHJlbDogJ3N0eWxlc2hlZXQnLFxuICAgICAgICAgIGhyZWY6IHRoaXMucmVzb2x2ZVVSTCgnJCRjc3MvJyArIHBhdGgpXG4gICAgICAgIH0pKTtcbiAgICAgIH0uYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgdmFyIGIgPSB0aGlzO1xuXG4gICAgaWYgKCFiLmRpc2FibGVEZWZhdWx0RmVhdHVyZVBvcHVwKSB7XG4gICAgICAgIHRoaXMuYWRkRmVhdHVyZUxpc3RlbmVyKGZ1bmN0aW9uKGV2LCBmZWF0dXJlLCBoaXQsIHRpZXIpIHtcbiAgICAgICAgICAgIGIuZmVhdHVyZVBvcHVwKGV2LCBmZWF0dXJlLCBoaXQsIHRpZXIpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBob2xkZXIuY2xhc3NMaXN0LmFkZCgnZGFsbGlhbmNlJyk7XG4gICAgdmFyIHRvb2xiYXIgPSBiLnRvb2xiYXIgPSBtYWtlRWxlbWVudCgnZGl2JywgbnVsbCwge2NsYXNzTmFtZTogJ2J0bi10b29sYmFyIHRvb2xiYXInfSk7XG5cbiAgICB2YXIgdGl0bGUgPSBiLmNvb3JkU3lzdGVtLnNwZWNpZXNOYW1lICsgJyAnICsgYi5uYW1lRm9yQ29vcmRTeXN0ZW0oYi5jb29yZFN5c3RlbSk7XG4gICAgaWYgKHRoaXMuc2V0RG9jdW1lbnRUaXRsZSkge1xuICAgICAgICBkb2N1bWVudC50aXRsZSA9IHRpdGxlICsgJyA6OiBkYWxsaWFuY2UnO1xuICAgIH1cblxuICAgIHZhciBsb2NGaWVsZCA9IG1ha2VFbGVtZW50KCdpbnB1dCcsICcnLCB7Y2xhc3NOYW1lOiAnbG9jLWZpZWxkJ30pO1xuICAgIGIubWFrZVRvb2x0aXAobG9jRmllbGQsICdFbnRlciBhIGdlbm9taWMgbG9jYXRpb24gb3IgZ2VuZSBuYW1lJyk7XG4gICAgdmFyIGxvY1N0YXR1c0ZpZWxkID0gbWFrZUVsZW1lbnQoJ3AnLCAnJywge2NsYXNzTmFtZTogJ2xvYy1zdGF0dXMnfSk7XG5cbiAgICB2YXIgem9vbUluQnRuID0gbWFrZUVsZW1lbnQoJ2EnLCBbbWFrZUVsZW1lbnQoJ2knLCBudWxsLCB7Y2xhc3NOYW1lOiAnZmEgZmEtc2VhcmNoLXBsdXMnfSldLCB7Y2xhc3NOYW1lOiAnYnRuJ30pO1xuICAgIHZhciB6b29tU2xpZGVyID0gbmV3IG1ha2Vab29tU2xpZGVyKHt3aWR0aDogYi56b29tU2xpZGVyV2lkdGh9KTtcbiAgICBiLm1ha2VUb29sdGlwKHpvb21TbGlkZXIsIFwiSGlnaGxpZ2h0ZWQgYnV0dG9uIHNob3dzIGN1cnJlbnQgem9vbSBsZXZlbCwgZ3JheSBidXR0b24gc2hvd3MgaW5hY3RpdmUgem9vbSBsZXZlbCAoY2xpY2sgb3IgdGFwIFNQQUNFIHRvIHRvZ2dsZSkuXCIpXG5cbiAgICB2YXIgem9vbU91dEJ0biA9IG1ha2VFbGVtZW50KCdhJywgW21ha2VFbGVtZW50KCdpJywgbnVsbCwge2NsYXNzTmFtZTogJ2ZhIGZhLXNlYXJjaC1taW51cyd9KV0sIHtjbGFzc05hbWU6ICdidG4nfSk7XG5cbiAgICB2YXIgY2xlYXJIaWdobGlnaHRzQnV0dG9uID0gbWFrZUVsZW1lbnQoJ2EnLCBbbWFrZUVsZW1lbnQoJ2knLCBudWxsLCB7Y2xhc3NOYW1lOiAnZmEgZmEtZXJhc2VyJ30pXSwge2NsYXNzTmFtZTogJ2J0bid9KTtcblxuICAgIHZhciBhZGRUcmFja0J0biA9IG1ha2VFbGVtZW50KCdhJywgW21ha2VFbGVtZW50KCdpJywgbnVsbCwge2NsYXNzTmFtZTogJ2ZhIGZhLXBsdXMnfSldLCB7Y2xhc3NOYW1lOiAnYnRuJ30pO1xuICAgIHZhciBmYXZCdG4gPSBtYWtlRWxlbWVudCgnYScsIFttYWtlRWxlbWVudCgnaScsIG51bGwsIHtjbGFzc05hbWU6ICdmYSBmYS1ib29rbWFyayd9KV0sIHtjbGFzc05hbWU6ICdidG4nfSk7XG4gICAgdmFyIHN2Z0J0biA9IG1ha2VFbGVtZW50KCdhJywgW21ha2VFbGVtZW50KCdpJywgbnVsbCwge2NsYXNzTmFtZTogJ2ZhIGZhLXByaW50J30pXSwge2NsYXNzTmFtZTogJ2J0bid9KTtcbiAgICB2YXIgcmVzZXRCdG4gPSBtYWtlRWxlbWVudCgnYScsIFttYWtlRWxlbWVudCgnaScsIG51bGwsIHtjbGFzc05hbWU6ICdmYSBmYS1yZWZyZXNoJ30pXSwge2NsYXNzTmFtZTogJ2J0bid9KTtcbiAgICB2YXIgb3B0c0J1dHRvbiA9IG1ha2VFbGVtZW50KCdhJywgW21ha2VFbGVtZW50KCdpJywgbnVsbCwge2NsYXNzTmFtZTogJ2ZhIGZhLWNvZ3MnfSldLCB7Y2xhc3NOYW1lOiAnYnRuJ30pO1xuICAgIHZhciBoZWxwQnV0dG9uID0gbWFrZUVsZW1lbnQoJ2EnLCBbbWFrZUVsZW1lbnQoJ2knLCBudWxsLCB7Y2xhc3NOYW1lOiAnZmEgZmEtcXVlc3Rpb24nfSldLCB7Y2xhc3NOYW1lOiAnYnRuJ30pO1xuXG4gICAgdmFyIHRpZXJFZGl0QnV0dG9uID0gbWFrZUVsZW1lbnQoJ2EnLCBbbWFrZUVsZW1lbnQoJ2knLCBudWxsLCB7Y2xhc3NOYW1lOiAnZmEgZmEtcm9hZCd9KV0sIHtjbGFzc05hbWU6ICdidG4nfSk7XG4gICAgYi5tYWtlVG9vbHRpcCh0aWVyRWRpdEJ1dHRvbiwgJ0NvbmZpZ3VyZSBjdXJyZW50bHkgc2VsZWN0ZWQgdHJhY2socykgKEUpJylcblxuICAgIHZhciBsZWFwTGVmdEJ1dHRvbiA9IG1ha2VFbGVtZW50KCdhJywgW21ha2VFbGVtZW50KCdpJywgbnVsbCwge2NsYXNzTmFtZTogJ2ZhIGZhLWFuZ2xlLWxlZnQnfSldLCB7Y2xhc3NOYW1lOiAnYnRuJ30sIHt3aWR0aDogJzVweCd9KTtcbiAgICB2YXIgbGVhcFJpZ2h0QnV0dG9uID0gbWFrZUVsZW1lbnQoJ2EnLCBbbWFrZUVsZW1lbnQoJ2knLCBudWxsLCB7Y2xhc3NOYW1lOiAnZmEgZmEtYW5nbGUtcmlnaHQnfSldLCB7Y2xhc3NOYW1lOiAnYnRuIHB1bGwtcmlnaHQnfSwge3dpZHRoOiAnNXB4J30pO1xuXG4gICAgdmFyIG1vZGVCdXR0b25zID0gbWFrZUVsZW1lbnQoJ2RpdicsIG51bGwsIHtjbGFzc05hbWU6ICdidG4tZ3JvdXAgcHVsbC1yaWdodCd9KTtcbiAgICBpZiAoIXRoaXMubm9UcmFja0FkZGVyKVxuICAgICAgICBtb2RlQnV0dG9ucy5hcHBlbmRDaGlsZChhZGRUcmFja0J0bik7XG4gICAgaWYgKCF0aGlzLm5vVHJhY2tFZGl0b3IpXG4gICAgICAgIG1vZGVCdXR0b25zLmFwcGVuZENoaWxkKHRpZXJFZGl0QnV0dG9uKTtcbiAgICBpZiAoIXRoaXMubm9FeHBvcnQpXG4gICAgICAgIG1vZGVCdXR0b25zLmFwcGVuZENoaWxkKHN2Z0J0bik7XG4gICAgaWYgKCF0aGlzLm5vT3B0aW9ucylcbiAgICAgICAgbW9kZUJ1dHRvbnMuYXBwZW5kQ2hpbGQob3B0c0J1dHRvbik7XG4gICAgaWYgKCF0aGlzLm5vSGVscClcbiAgICAgICAgbW9kZUJ1dHRvbnMuYXBwZW5kQ2hpbGQoaGVscEJ1dHRvbik7XG5cbiAgICB0aGlzLnNldFVpTW9kZSA9IGZ1bmN0aW9uKG0pIHtcbiAgICAgICAgdGhpcy51aU1vZGUgPSBtO1xuICAgICAgICB2YXIgbWIgPSB7aGVscDogaGVscEJ1dHRvbiwgYWRkOiBhZGRUcmFja0J0biwgb3B0czogb3B0c0J1dHRvbiwgJ2V4cG9ydCc6IHN2Z0J0biwgdGllcjogdGllckVkaXRCdXR0b259O1xuICAgICAgICBmb3IgKHZhciB4IGluIG1iKSB7XG4gICAgICAgICAgICBpZiAoeCA9PSBtKVxuICAgICAgICAgICAgICAgIG1iW3hdLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIG1iW3hdLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLm5vTGVhcEJ1dHRvbnMpXG4gICAgICAgIHRvb2xiYXIuYXBwZW5kQ2hpbGQobGVhcFJpZ2h0QnV0dG9uKTtcblxuICAgIGlmIChtb2RlQnV0dG9ucy5maXJzdENoaWxkKVxuICAgICAgICB0b29sYmFyLmFwcGVuZENoaWxkKG1vZGVCdXR0b25zKTtcbiAgICBcbiAgICBpZiAoIXRoaXMubm9MZWFwQnV0dG9ucylcbiAgICAgICAgdG9vbGJhci5hcHBlbmRDaGlsZChsZWFwTGVmdEJ1dHRvbik7XG4gICAgaWYgKCF0aGlzLm5vVGl0bGUpIHtcbiAgICAgICAgdG9vbGJhci5hcHBlbmRDaGlsZChtYWtlRWxlbWVudCgnZGl2JywgbWFrZUVsZW1lbnQoJ2g0JywgdGl0bGUsIHt9LCB7bWFyZ2luOiAnMHB4J30pLCB7Y2xhc3NOYW1lOiAnYnRuLWdyb3VwIHRpdGxlJ30pKTtcbiAgICB9XG4gICAgaWYgKCF0aGlzLm5vTG9jYXRpb25GaWVsZClcbiAgICAgICAgdG9vbGJhci5hcHBlbmRDaGlsZChtYWtlRWxlbWVudCgnZGl2JywgW2xvY0ZpZWxkLCBsb2NTdGF0dXNGaWVsZF0sIHtjbGFzc05hbWU6ICdidG4tZ3JvdXAgbG9jLWdyb3VwJ30pKTtcbiAgICBpZiAoIXRoaXMubm9DbGVhckhpZ2hsaWdodHNCdXR0b24pXG4gICAgICAgIHRvb2xiYXIuYXBwZW5kQ2hpbGQoY2xlYXJIaWdobGlnaHRzQnV0dG9uKTtcblxuICAgIGlmICghdGhpcy5ub1pvb21TbGlkZXIpIHtcbiAgICAgICAgdG9vbGJhci5hcHBlbmRDaGlsZChtYWtlRWxlbWVudCgnZGl2JywgW3pvb21JbkJ0bixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VFbGVtZW50KCdzcGFuJywgem9vbVNsaWRlciwge2NsYXNzTmFtZTogJ2J0bid9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHpvb21PdXRCdG5dLCB7Y2xhc3NOYW1lOiAnYnRuLWdyb3VwJ30pKTtcbiAgICB9XG4gICAgXG4gICAgaWYgKHRoaXMudG9vbGJhckJlbG93KSB7XG4gICAgICAgIGhvbGRlci5hcHBlbmRDaGlsZChnZW5vbWVQYW5lbCk7XG4gICAgICAgIGhvbGRlci5hcHBlbmRDaGlsZCh0b29sYmFyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBob2xkZXIuYXBwZW5kQ2hpbGQodG9vbGJhcik7XG4gICAgICAgIGhvbGRlci5hcHBlbmRDaGlsZChnZW5vbWVQYW5lbCk7XG4gICAgfVxuXG5cbiAgICB2YXIgbHQyID0gTWF0aC5sb2coMikgLyBNYXRoLmxvZygxMCk7XG4gICAgdmFyIGx0NSA9IE1hdGgubG9nKDUpIC8gTWF0aC5sb2coMTApO1xuICAgIHZhciByb3VuZFNsaWRlclZhbHVlID0gZnVuY3Rpb24oeCkge1xuICAgICAgICB2YXIgbHR4ID0gKHggLyBiLnpvb21FeHB0ICsgTWF0aC5sb2coYi56b29tQmFzZSkpIC8gTWF0aC5sb2coMTApO1xuICAgICAgICBcbiAgICAgICAgdmFyIHdob2xlID0gbHR4fDBcbiAgICAgICAgdmFyIGZyYWMgPSBsdHggLSB3aG9sZTtcbiAgICAgICAgdmFyIHJvdW5kZWRcblxuICAgICAgICBpZiAoZnJhYyA8IDAuMDEpXG4gICAgICAgICAgICByb3VuZGVkID0gd2hvbGU7XG4gICAgICAgIGVsc2UgaWYgKGZyYWMgPD0gKGx0MiArIDAuMDEpKVxuICAgICAgICAgICAgcm91bmRlZCA9IHdob2xlICsgbHQyO1xuICAgICAgICBlbHNlIGlmIChmcmFjIDw9IChsdDUgKyAwLjAxKSlcbiAgICAgICAgICAgIHJvdW5kZWQgPSB3aG9sZSArIGx0NTtcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByb3VuZGVkID0gd2hvbGUgKyAxO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIChyb3VuZGVkICogTWF0aC5sb2coMTApIC1NYXRoLmxvZyhiLnpvb21CYXNlKSkgKiBiLnpvb21FeHB0O1xuICAgIH1cblxuICAgIHZhciBtYXJrU2xpZGVyID0gZnVuY3Rpb24oeCkge1xuICAgICAgICB6b29tU2xpZGVyLmFkZExhYmVsKHgsIGh1bWFuUmVhZGFibGVTY2FsZShNYXRoLmV4cCh4IC8gYi56b29tRXhwdCkgKiBiLnpvb21CYXNlKSk7XG4gICAgfVxuXG4gICAgdGhpcy5hZGRWaWV3TGlzdGVuZXIoZnVuY3Rpb24oY2hyLCBtaW4sIG1heCwgX29sZFpvb20sIHpvb20pIHtcbiAgICAgICAgbG9jRmllbGQudmFsdWUgPSAoY2hyICsgJzonICsgZm9ybWF0TG9uZ0ludChtaW4pICsgJy4uJyArIGZvcm1hdExvbmdJbnQobWF4KSk7XG4gICAgICAgIHpvb21TbGlkZXIubWluID0gem9vbS5taW58MDtcbiAgICAgICAgem9vbVNsaWRlci5tYXggPSB6b29tLm1heHwwO1xuICAgICAgICBpZiAoem9vbS5pc1NuYXBab29taW5nKSB7XG4gICAgICAgICAgICB6b29tU2xpZGVyLnZhbHVlID0gem9vbS5hbHRlcm5hdGVcbiAgICAgICAgICAgIHpvb21TbGlkZXIudmFsdWUyID0gem9vbS5jdXJyZW50O1xuICAgICAgICAgICAgem9vbVNsaWRlci5hY3RpdmUgPSAyO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgem9vbVNsaWRlci52YWx1ZSA9IHpvb20uY3VycmVudDtcbiAgICAgICAgICAgIHpvb21TbGlkZXIudmFsdWUyID0gem9vbS5hbHRlcm5hdGU7XG4gICAgICAgICAgICB6b29tU2xpZGVyLmFjdGl2ZSA9IDE7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoem9vbS5jdXJyZW50ID09IHpvb20ubWluKVxuICAgICAgICAgICAgem9vbUluQnRuLmNsYXNzTGlzdC5hZGQoJ2Rpc2FibGVkJyk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHpvb21JbkJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdkaXNhYmxlZCcpO1xuXG4gICAgICAgIGlmICh6b29tLmN1cnJlbnQgPT0gem9vbS5tYXgpXG4gICAgICAgICAgICB6b29tT3V0QnRuLmNsYXNzTGlzdC5hZGQoJ2Rpc2FibGVkJyk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHpvb21PdXRCdG4uY2xhc3NMaXN0LnJlbW92ZSgnZGlzYWJsZWQnKTtcblxuICAgICAgICB6b29tU2xpZGVyLnJlbW92ZUxhYmVscygpO1xuICAgICAgICB2YXIgem1pbiA9IHpvb20ubWluO1xuICAgICAgICB2YXIgem1heCA9IHpvb20ubWF4O1xuICAgICAgICB2YXIgenJhbmdlID0gem1heCAtIHptaW47XG5cbiAgICAgICAgXG4gICAgICAgIHZhciBudW1TbGlkZXJUaWNrcyA9IDQ7XG4gICAgICAgIGlmIChiLnpvb21TbGlkZXJXaWR0aCAmJiBiLnpvb21TbGlkZXJXaWR0aCA8IDE1MClcbiAgICAgICAgICAgIG51bVNsaWRlclRpY2tzID0gMztcbiAgICAgICAgbWFya1NsaWRlcihyb3VuZFNsaWRlclZhbHVlKHptaW4pKTtcbiAgICAgICAgZm9yICh2YXIgc3RpID0gMTsgc3RpIDwgbnVtU2xpZGVyVGlja3MgLSAxOyArK3N0aSkge1xuICAgICAgICAgICAgbWFya1NsaWRlcihyb3VuZFNsaWRlclZhbHVlKHptaW4gKyAoMS4wICogc3RpICogenJhbmdlIC8gKG51bVNsaWRlclRpY2tzIC0xKSkpKTtcbiAgICAgICAgfVxuICAgICAgICBtYXJrU2xpZGVyKHJvdW5kU2xpZGVyVmFsdWUoem1heCkpO1xuXG4gICAgICAgIGlmIChiLnN0b3JlU3RhdHVzKSB7XG4gICAgICAgICAgICBiLnN0b3JlVmlld1N0YXR1cygpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGIuaGlnaGxpZ2h0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjbGVhckhpZ2hsaWdodHNCdXR0b24uc3R5bGUuZGlzcGxheSA9ICdpbmxpbmUtYmxvY2snO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2xlYXJIaWdobGlnaHRzQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIHRoaXMuYWRkVGllckxpc3RlbmVyKGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoYi5zdG9yZVN0YXR1cykge1xuICAgICAgICAgICAgYi5zdG9yZVRpZXJTdGF0dXMoKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgbG9jRmllbGQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgIGlmIChldi5rZXlDb2RlID09IDQwKSB7XG4gICAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpOyBldi5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgIGIuc2V0U2VsZWN0ZWRUaWVyKDApO1xuICAgICAgICB9IGlmIChldi5rZXlDb2RlID09IDEwIHx8IGV2LmtleUNvZGUgPT0gMTMpIHtcbiAgICAgICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XG5cblxuICAgICAgICAgICAgdmFyIGcgPSBsb2NGaWVsZC52YWx1ZTtcbiAgICAgICAgICAgIGIuc2VhcmNoKGcsIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9jU3RhdHVzRmllbGQudGV4dENvbnRlbnQgPSAnJyArIGVycjtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsb2NTdGF0dXNGaWVsZC50ZXh0Q29udGVudCA9ICcnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSwgZmFsc2UpO1xuICAgIFxuICAgIHZhciB0cmFja0FkZFBvcHVwO1xuICAgIGFkZFRyYWNrQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXYpIHtcbiAgICAgICAgaWYgKHRyYWNrQWRkUG9wdXAgJiYgdHJhY2tBZGRQb3B1cC5kaXNwbGF5ZWQpIHtcbiAgICAgICAgICAgIGIucmVtb3ZlQWxsUG9wdXBzKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0cmFja0FkZFBvcHVwID0gYi5zaG93VHJhY2tBZGRlcihldik7XG4gICAgICAgIH1cbiAgICB9LCBmYWxzZSk7XG4gICAgYi5tYWtlVG9vbHRpcChhZGRUcmFja0J0biwgJ0FkZCBhIG5ldyB0cmFjayBmcm9tIHRoZSByZWdpc3RyeSBvciBhbiBpbmRleGVkIGZpbGUuIChBKScpO1xuXG4gICAgem9vbUluQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXYpIHtcbiAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpOyBldi5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICBiLnpvb21TdGVwKC0xMCk7XG4gICAgfSwgZmFsc2UpO1xuICAgIGIubWFrZVRvb2x0aXAoem9vbUluQnRuLCAnWm9vbSBpbiAoKyknKTtcblxuICAgIHpvb21PdXRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldikge1xuICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7IGV2LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgIGIuem9vbVN0ZXAoMTApO1xuICAgIH0sIGZhbHNlKTtcbiAgICBiLm1ha2VUb29sdGlwKHpvb21PdXRCdG4sICdab29tIG91dCAoLSknKTtcblxuICAgIHpvb21TbGlkZXIuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZnVuY3Rpb24oZXYpIHtcbiAgICAgICAgdmFyIHdhbnRTbmFwID0gem9vbVNsaWRlci5hY3RpdmUgPT0gMjtcbiAgICAgICAgaWYgKHdhbnRTbmFwICE9IGIuaXNTbmFwWm9vbWluZykge1xuICAgICAgICAgICAgYi5zYXZlZFpvb20gPSBiLnpvb21TbGlkZXJWYWx1ZSAgLSBiLnpvb21NaW47XG4gICAgICAgICAgICBiLmlzU25hcFpvb21pbmcgPSB3YW50U25hcDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgYWN0aXZlWlNWID0gem9vbVNsaWRlci5hY3RpdmUgPT0gMSA/IHpvb21TbGlkZXIudmFsdWUgOiB6b29tU2xpZGVyLnZhbHVlMjtcblxuICAgIFx0Yi56b29tU2xpZGVyVmFsdWUgPSAoMS4wICogYWN0aXZlWlNWKTtcbiAgICBcdGIuem9vbShNYXRoLmV4cCgoMS4wICogYWN0aXZlWlNWKSAvIGIuem9vbUV4cHQpKTtcbiAgICB9LCBmYWxzZSk7XG5cbiAgICBmYXZCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldikge1xuICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpOyBldi5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0sIGZhbHNlKTtcbiAgICBiLm1ha2VUb29sdGlwKGZhdkJ0biwgJ0Zhdm91cml0ZSByZWdpb25zJyk7XG5cbiAgICBzdmdCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldikge1xuICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpOyBldi5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBiLm9wZW5FeHBvcnRQYW5lbCgpO1xuICAgIH0sIGZhbHNlKTtcbiAgICBiLm1ha2VUb29sdGlwKHN2Z0J0biwgJ0V4cG9ydCBwdWJsaWNhdGlvbi1xdWFsaXR5IFNWRy4gKFgpJyk7XG5cbiAgICB2YXIgb3B0c1BvcHVwO1xuICAgIG9wdHNCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldikge1xuICAgICAgICBldi5zdG9wUHJvcGFnYXRpb24oKTsgZXYucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICBiLnRvZ2dsZU9wdHNQb3B1cChldik7XG4gICAgfSwgZmFsc2UpO1xuICAgIGIubWFrZVRvb2x0aXAob3B0c0J1dHRvbiwgJ0NvbmZpZ3VyZSBvcHRpb25zLicpO1xuXG4gICAgaGVscEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpOyBldi5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBiLnRvZ2dsZUhlbHBQb3B1cChldik7XG4gICAgfSk7XG4gICAgYi5tYWtlVG9vbHRpcChoZWxwQnV0dG9uLCAnSGVscDsgS2V5Ym9hcmQgc2hvcnRjdXRzLiAoSCknKTtcblxuICAgIHRpZXJFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXYpIHtcbiAgICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7IGV2LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGlmIChiLnNlbGVjdGVkVGllcnMubGVuZ3RoID09IDEpIHtcbiAgICAgICAgICAgIGIub3BlblRpZXJQYW5lbChiLnRpZXJzW2Iuc2VsZWN0ZWRUaWVyc1swXV0pO1xuICAgICAgICB9XG4gICAgfSwgZmFsc2UpO1xuXG4gICAgbGVhcExlZnRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldikge1xuICAgICAgICBiLmxlYXAoYi5yZXZlcnNlS2V5U2Nyb2xsaW5nID8gLTEgOiAxLCBmYWxzZSk7XG4gICAgfSwgZmFsc2UpO1xuICAgIGIubWFrZVRvb2x0aXAobGVhcExlZnRCdXR0b24sIGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgIHZhciBzdCA9IGIuZ2V0U2VsZWN0ZWRUaWVyKCk7XG4gICAgICAgIHZhciB0aWVyO1xuICAgICAgICBpZiAoc3QgPj0gMClcbiAgICAgICAgICAgIHRpZXIgPSBiLnRpZXJzW3N0XTtcblxuICAgICAgICBpZiAodGllciAmJiB0aWVyLmZlYXR1cmVTb3VyY2UgJiYgYi5zb3VyY2VBZGFwdGVySXNDYXBhYmxlKHRpZXIuZmVhdHVyZVNvdXJjZSwgJ3F1YW50TGVhcCcpICYmIHR5cGVvZih0aWVyLnF1YW50TGVhcFRocmVzaG9sZCkgPT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIHJldHVybiAnSnVtcCB0byB0aGUgbmV4dCByZWdpb24gd2l0aCBhIHNjb3JlIGFib3ZlIHRoZSB0aHJlc2hvbGQgaW4gdGhlIHNlbGVjdGVkIHRyYWNrIFwiJyArICh0aWVyLmNvbmZpZy5uYW1lIHx8IHRpZXIuZGFzU291cmNlLm5hbWUpICsgJ1wiXCIgKGN0cmwrTEVGVCknO1xuICAgICAgICB9IGVsc2UgaWYgKHRpZXIgJiYgdGllci5mZWF0dXJlU291cmNlICYmIGIuc291cmNlQWRhcHRlcklzQ2FwYWJsZSh0aWVyLmZlYXR1cmVTb3VyY2UsICdsZWFwJykpIHtcbiAgICAgICAgICAgIHJldHVybiAnSnVtcCB0byB0aGUgbmV4dCBmZWF0dXJlIGluIHRoZSBzZWxlY3RlZCB0cmFjayBcIicgKyAodGllci5jb25maWcubmFtZSB8fCB0aWVyLmRhc1NvdXJjZS5uYW1lKSArICdcIiAoY3RybCtMRUZUKSc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gJ0p1bXAgbGVmdCAoc2hpZnQrTEVGVCknO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICBsZWFwUmlnaHRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldikge1xuICAgICAgICBiLmxlYXAoYi5yZXZlcnNlS2V5U2Nyb2xsaW5nID8gMSA6IC0xLCBmYWxzZSk7XG4gICAgfSwgZmFsc2UpO1xuICAgIGIubWFrZVRvb2x0aXAobGVhcFJpZ2h0QnV0dG9uLCBmdW5jdGlvbihldikge1xuICAgICAgICB2YXIgc3QgPSBiLmdldFNlbGVjdGVkVGllcigpO1xuICAgICAgICB2YXIgdGllcjtcbiAgICAgICAgaWYgKHN0ID49IDApXG4gICAgICAgICAgICB0aWVyID0gYi50aWVyc1tzdF07XG5cbiAgICAgICAgaWYgKHRpZXIgJiYgdGllci5mZWF0dXJlU291cmNlICYmIGIuc291cmNlQWRhcHRlcklzQ2FwYWJsZSh0aWVyLmZlYXR1cmVTb3VyY2UsICdxdWFudExlYXAnKSAmJiB0eXBlb2YodGllci5xdWFudExlYXBUaHJlc2hvbGQpID09ICdudW1iZXInKSB7XG4gICAgICAgICAgICByZXR1cm4gJ0p1bXAgdG8gdGhlIG5leHQgcmVnaW9uIHdpdGggYSBzY29yZSBhYm92ZSB0aGUgdGhyZXNob2xkIGluIHRoZSBzZWxlY3RlZCB0cmFjayBcIicgKyAodGllci5jb25maWcubmFtZSB8fCB0aWVyLmRhc1NvdXJjZS5uYW1lKSArICdcIlwiIChjdHJsK1JJR0hUKSc7XG4gICAgICAgIH0gZWxzZSBpZiAodGllciAmJiB0aWVyLmZlYXR1cmVTb3VyY2UgJiYgYi5zb3VyY2VBZGFwdGVySXNDYXBhYmxlKHRpZXIuZmVhdHVyZVNvdXJjZSwgJ2xlYXAnKSkge1xuICAgICAgICAgICAgcmV0dXJuICdKdW1wIHRvIHRoZSBuZXh0IGZlYXR1cmUgaW4gdGhlIHNlbGVjdGVkIHRyYWNrIFwiJyArICh0aWVyLmNvbmZpZy5uYW1lIHx8IHRpZXIuZGFzU291cmNlLm5hbWUpICsgJ1wiIChjdHJsK1JJR0hUKSc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gJ0p1bXAgcmlnaHQgKHNoaWZ0K1JJR0hUKSc7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBiLmFkZFRpZXJTZWxlY3Rpb25MaXN0ZW5lcihmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHN0ID0gYi5nZXRTZWxlY3RlZFRpZXIoKTtcbiAgICAgICAgdmFyIHRpZXI7XG4gICAgICAgIGlmIChzdCA+PSAwKVxuICAgICAgICAgICAgdGllciA9IGIudGllcnNbc3RdO1xuXG4gICAgICAgIHZhciBjYW5MZWFwID0gZmFsc2U7XG4gICAgICAgIGlmICh0aWVyICYmIHRpZXIuZmVhdHVyZVNvdXJjZSkge1xuICAgICAgICAgICAgaWYgKGIuc291cmNlQWRhcHRlcklzQ2FwYWJsZSh0aWVyLmZlYXR1cmVTb3VyY2UsICdxdWFudExlYXAnKSAmJiB0eXBlb2YodGllci5xdWFudExlYXBUaHJlc2hvbGQpID09ICdudW1iZXInKVxuICAgICAgICAgICAgICAgIGNhbkxlYXAgPSB0cnVlO1xuICAgICAgICAgICAgZWxzZSBpZiAoYi5zb3VyY2VBZGFwdGVySXNDYXBhYmxlKHRpZXIuZmVhdHVyZVNvdXJjZSwgJ2xlYXAnKSlcbiAgICAgICAgICAgICAgICBjYW5MZWFwID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxlYXBMZWZ0QnV0dG9uLmZpcnN0Q2hpbGQuY2xhc3NOYW1lID0gY2FuTGVhcCA/ICdmYSBmYS1hbmdsZS1kb3VibGUtbGVmdCcgOiAnZmEgZmEtYW5nbGUtbGVmdCc7XG4gICAgICAgIGxlYXBSaWdodEJ1dHRvbi5maXJzdENoaWxkLmNsYXNzTmFtZSA9IGNhbkxlYXAgPyAnZmEgZmEtYW5nbGUtZG91YmxlLXJpZ2h0JyA6ICdmYSBmYS1hbmdsZS1yaWdodCc7XG4gICAgfSk7XG5cbiAgICBjbGVhckhpZ2hsaWdodHNCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldikge1xuICAgICAgICBiLmNsZWFySGlnaGxpZ2h0cygpO1xuICAgIH0sIGZhbHNlKTtcbiAgICBiLm1ha2VUb29sdGlwKGNsZWFySGlnaGxpZ2h0c0J1dHRvbiwgJ0NsZWFyIGhpZ2hsaWdodHMgKEMpJyk7XG5cbiAgICBiLmFkZFRpZXJTZWxlY3Rpb25XcmFwTGlzdGVuZXIoZnVuY3Rpb24oZGlyKSB7XG4gICAgICAgIGlmIChkaXIgPCAwKSB7XG4gICAgICAgICAgICBiLnNldFNlbGVjdGVkVGllcihudWxsKTtcbiAgICAgICAgICAgIGxvY0ZpZWxkLmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIGIuYWRkVGllclNlbGVjdGlvbkxpc3RlbmVyKGZ1bmN0aW9uKHNlbCkge1xuICAgICAgICBpZiAoYi51aU1vZGUgPT09ICd0aWVyJykge1xuICAgICAgICAgICAgaWYgKHNlbC5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgICAgIGIuaGlkZVRvb2xQYW5lbCgpO1xuICAgICAgICAgICAgICAgIGIubWFuaXB1bGF0aW5nVGllciA9IG51bGw7XG4gICAgICAgICAgICAgICAgYi51aU1vZGUgPSAnbm9uZSc7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBmdCA9IGIudGllcnNbc2VsWzBdXTtcbiAgICAgICAgICAgICAgICBpZiAoZnQgIT0gYi5tYW5pcHVsYXRpbmdUaWVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGIub3BlblRpZXJQYW5lbChmdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICB2YXIgdWlLZXlIYW5kbGVyID0gZnVuY3Rpb24oZXYpIHtcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ2J1a2g6ICcgKyBldi5rZXlDb2RlKTtcbiAgICAgICAgaWYgKGV2LmtleUNvZGUgPT0gNjUgfHwgZXYua2V5Q29kZSA9PSA5NykgeyAgLy8gYVxuICAgICAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTsgZXYuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICBiLnNob3dUcmFja0FkZGVyKCk7XG4gICAgICAgIH0gZWxzZSBpZiAoZXYua2V5Q29kZSA9PSA3MiB8fCBldi5rZXlDb2RlID09IDEwNCkgeyAvLyBoXG4gICAgICAgICAgICBldi5zdG9wUHJvcGFnYXRpb24oKTsgZXYucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGIudG9nZ2xlSGVscFBvcHVwKGV2KTtcbiAgICAgICAgfSBlbHNlIGlmIChldi5rZXlDb2RlID09IDY5IHx8IGV2LmtleUNvZGUgPT0gMTAxKSB7IC8vZVxuICAgICAgICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7IGV2LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBpZiAoYi5zZWxlY3RlZFRpZXJzLmxlbmd0aCA9PSAxKSB7XG4gICAgICAgICAgICAgICAgYi5vcGVuVGllclBhbmVsKGIudGllcnNbYi5zZWxlY3RlZFRpZXJzWzBdXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoZXYua2V5Q29kZSA9PSA4OCB8fCBldi5rZXlDb2RlID09IDEyMCkgeyAvLyB4XG4gICAgICAgICAgICBldi5zdG9wUHJvcGFnYXRpb24oKTsgZXYucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGIub3BlbkV4cG9ydFBhbmVsKCk7XG4gICAgICAgIH0gZWxzZSBpZiAoZXYua2V5Q29kZSA9PSA2NyB8fCBldi5rZXlDb2RlID09IDk5KSB7IC8vIGNcbiAgICAgICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpOyBldi5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgYi5jbGVhckhpZ2hsaWdodHMoKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBob2xkZXIuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCBmdW5jdGlvbihldikge1xuICAgICAgICBob2xkZXIuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHVpS2V5SGFuZGxlciwgZmFsc2UpO1xuICAgIH0sIGZhbHNlKTtcbiAgICBob2xkZXIuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgIGhvbGRlci5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdWlLZXlIYW5kbGVyLCBmYWxzZSk7XG4gICAgfSwgZmFsc2UpO1xuXG4gICAgaG9sZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBmdW5jdGlvbihldikge1xuICAgICAgICBpZiAoZXYua2V5Q29kZSA9PT0gMjcpIHtcbiAgICAgICAgICAgIGlmIChiLnVpTW9kZSAhPT0gJ25vbmUnKSB7XG4gICAgICAgICAgICAgICAgLy8gT25seSBjb25zdW1lIGV2ZW50IGlmIHRvb2wgcGFuZWwgaXMgb3Blbi5cbiAgICAgICAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgIGIuc2V0VWlNb2RlKCdub25lJyk7XG4gICAgICAgICAgICAgICAgYi5oaWRlVG9vbFBhbmVsKCk7XG5cbiAgICAgICAgICAgICAgICBpZiAoYi5zZWxlY3RlZFRpZXJzICYmIGIuc2VsZWN0ZWRUaWVycy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGIuYnJvd3NlckhvbGRlci5mb2N1cygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sIGZhbHNlKTtcbn1cblxuQnJvd3Nlci5wcm90b3R5cGUuc2hvd1Rvb2xQYW5lbCA9IGZ1bmN0aW9uKHBhbmVsLCBub3dyYXApIHtcbiAgICB2YXIgdGhpc0IgPSB0aGlzO1xuXG4gICAgaWYgKHRoaXMuYWN0aXZlVG9vbFBhbmVsKSB7XG4gICAgICAgIHRoaXMuYWN0aXZlVG9vbFBhbmVsLnBhcmVudEVsZW1lbnQucmVtb3ZlQ2hpbGQodGhpcy5hY3RpdmVUb29sUGFuZWwpO1xuICAgIH1cblxuICAgIHZhciBjb250ZW50O1xuICAgIGlmIChub3dyYXApXG4gICAgICAgIGNvbnRlbnQgPSBwYW5lbDtcbiAgICBlbHNlXG4gICAgICAgIGNvbnRlbnQgPSBtYWtlRWxlbWVudCgnZGl2JywgcGFuZWwsIHt9LCB7b3ZlcmZsb3dZOiAnYXV0bycsIHdpZHRoOiAnMTAwJSd9KTtcblxuXG4gICAgdmFyIGRpdmlkZXIgPSBtYWtlRWxlbWVudCgnZGl2JywgbWFrZUVsZW1lbnQoJ2knLCBudWxsLCB7Y2xhc3NOYW1lOiAnZmEgZmEtY2FyZXQtcmlnaHQnfSksIHtjbGFzc05hbWU6ICd0b29sLWRpdmlkZXInfSk7XG4gICAgZGl2aWRlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgIHRoaXNCLmhpZGVUb29sUGFuZWwoKTtcbiAgICAgICAgdGhpc0Iuc2V0VWlNb2RlKCdub25lJyk7XG4gICAgfSwgZmFsc2UpO1xuICAgIHRoaXMubWFrZVRvb2x0aXAoZGl2aWRlciwgJ0Nsb3NlIHRvb2wgcGFuZWwgKEVTQyknKTtcbiAgICB0aGlzLmFjdGl2ZVRvb2xQYW5lbCA9IG1ha2VFbGVtZW50KCdkaXYnLCBbZGl2aWRlciwgY29udGVudF0sIHtjbGFzc05hbWU6ICd0b29sLWhvbGRlcid9KTtcbiAgICB0aGlzLnN2Z0hvbGRlci5hcHBlbmRDaGlsZCh0aGlzLmFjdGl2ZVRvb2xQYW5lbCk7XG4gICAgdGhpcy5yZXNpemVWaWV3ZXIoKTtcblxuICAgIHZhciB0aGlzQiA9IHRoaXM7XG59XG5cbkJyb3dzZXIucHJvdG90eXBlLmhpZGVUb29sUGFuZWwgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAodGhpcy5hY3RpdmVUb29sUGFuZWwpIHtcbiAgICAgICAgdGhpcy5hY3RpdmVUb29sUGFuZWwucGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZCh0aGlzLmFjdGl2ZVRvb2xQYW5lbCk7XG4gICAgfVxuICAgIHRoaXMuc3ZnSG9sZGVyLnN0eWxlLndpZHRoID0gJzEwMCUnO1xuICAgIHRoaXMuYWN0aXZlVG9vbFBhbmVsID0gbnVsbDtcbiAgICB0aGlzLnJlc2l6ZVZpZXdlcigpO1xufVxuXG5Ccm93c2VyLnByb3RvdHlwZS50b2dnbGVIZWxwUG9wdXAgPSBmdW5jdGlvbihldikge1xuICAgIGlmICh0aGlzLnVpTW9kZSA9PT0gJ2hlbHAnKSB7XG4gICAgICAgIHRoaXMuaGlkZVRvb2xQYW5lbCgpO1xuICAgICAgICB0aGlzLnNldFVpTW9kZSgnbm9uZScpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBoZWxwRnJhbWUgPSBtYWtlRWxlbWVudCgnaWZyYW1lJywgbnVsbCwge3Njcm9sbGluZzogJ3llcycsIHNlYW1sZXNzOiAnc2VhbWxlc3MnLCBzcmM6IHRoaXMucmVzb2x2ZVVSTCgnJCRoZWxwL2luZGV4Lmh0bWwnKSwgY2xhc3NOYW1lOiAnaGVscC1wYW5lbCd9KTtcbiAgICAgICAgdGhpcy5zaG93VG9vbFBhbmVsKGhlbHBGcmFtZSwgZmFsc2UpO1xuICAgICAgICB0aGlzLnNldFVpTW9kZSgnaGVscCcpO1xuICAgIH1cbn1cblxuQnJvd3Nlci5wcm90b3R5cGUudG9nZ2xlT3B0c1BvcHVwID0gZnVuY3Rpb24oZXYpIHtcbiAgICB2YXIgYiA9IHRoaXM7XG5cbiAgICBpZiAodGhpcy51aU1vZGUgPT09ICdvcHRzJykge1xuICAgICAgICB0aGlzLmhpZGVUb29sUGFuZWwoKTtcbiAgICAgICAgdGhpcy5zZXRVaU1vZGUoJ25vbmUnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgb3B0c0Zvcm0gPSBtYWtlRWxlbWVudCgnZGl2JywgbnVsbCwge2NsYXNzTmFtZTogJ2Zvcm0taG9yaXpvbnRhbCd9LCB7Ym94U2l6aW5nOiAnYm9yZGVyLWJveCcsIE1vekJveFNpemluZzogJ2JvcmRlci1ib3gnLCBkaXNwbGF5OiAnaW5saW5lLWJsb2NrJywgdmVydGljYWxBbGlnbjogJ3RvcCd9KTtcbiAgICAgICAgdmFyIG9wdHNUYWJsZSA9IG1ha2VFbGVtZW50KCd0YWJsZScpO1xuICAgICAgICBvcHRzVGFibGUuY2VsbFBhZGRpbmcgPSA1O1xuXG4gICAgICAgIHZhciBzY3JvbGxNb2RlQnV0dG9uID0gbWFrZUVsZW1lbnQoJ2lucHV0JywgJycsIHt0eXBlOiAnY2hlY2tib3gnLCBjaGVja2VkOiBiLnJldmVyc2VTY3JvbGxpbmd9KTtcbiAgICAgICAgc2Nyb2xsTW9kZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbihldikge1xuICAgICAgICAgICAgYi5yZXZlcnNlU2Nyb2xsaW5nID0gc2Nyb2xsTW9kZUJ1dHRvbi5jaGVja2VkO1xuICAgICAgICAgICAgYi5zdG9yZVN0YXR1cygpO1xuICAgICAgICB9LCBmYWxzZSk7XG4gICAgICAgIG9wdHNUYWJsZS5hcHBlbmRDaGlsZChtYWtlRWxlbWVudCgndHInLCBbbWFrZUVsZW1lbnQoJ3RkJywgJ1JldmVyc2UgdHJhY2twYWQgc2Nyb2xsaW5nJywge2FsaWduOiAncmlnaHQnfSksIG1ha2VFbGVtZW50KCd0ZCcsIHNjcm9sbE1vZGVCdXR0b24pXSkpO1xuXG4gICAgICAgIHZhciBzY3JvbGxLZXlCdXR0b24gPSBtYWtlRWxlbWVudCgnaW5wdXQnLCAnJywge3R5cGU6ICdjaGVja2JveCcsIGNoZWNrZWQ6IGIucmV2ZXJzZUtleVNjcm9sbGluZ30pO1xuICAgICAgICBzY3JvbGxLZXlCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZnVuY3Rpb24oZXYpIHtcbiAgICAgICAgICAgIGIucmV2ZXJzZUtleVNjcm9sbGluZyA9IHNjcm9sbEtleUJ1dHRvbi5jaGVja2VkO1xuICAgICAgICAgICAgYi5zdG9yZVN0YXR1cygpO1xuICAgICAgICB9LCBmYWxzZSk7XG4gICAgICAgIG9wdHNUYWJsZS5hcHBlbmRDaGlsZChtYWtlRWxlbWVudCgndHInLCBbbWFrZUVsZW1lbnQoJ3RkJywgJ1JldmVyc2Ugc2Nyb2xsaW5nIGJ1dHRvbnMgYW5kIGtleXMnLCB7YWxpZ246ICdyaWdodCd9KSwgbWFrZUVsZW1lbnQoJ3RkJywgc2Nyb2xsS2V5QnV0dG9uKV0pKTtcblxuXG4gICAgICAgIHZhciBydWxlclNlbGVjdCA9IG1ha2VFbGVtZW50KCdzZWxlY3QnKTtcbiAgICAgICAgcnVsZXJTZWxlY3QuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ29wdGlvbicsICdMZWZ0Jywge3ZhbHVlOiAnbGVmdCd9KSk7XG4gICAgICAgIHJ1bGVyU2VsZWN0LmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCdvcHRpb24nLCAnQ2VudGVyJywge3ZhbHVlOiAnY2VudGVyJ30pKTtcbiAgICAgICAgcnVsZXJTZWxlY3QuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ29wdGlvbicsICdSaWdodCcsIHt2YWx1ZTogJ3JpZ2h0J30pKTtcbiAgICAgICAgcnVsZXJTZWxlY3QuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ29wdGlvbicsICdOb25lJywge3ZhbHVlOiAnbm9uZSd9KSk7XG4gICAgICAgIHJ1bGVyU2VsZWN0LnZhbHVlID0gYi5ydWxlckxvY2F0aW9uO1xuICAgICAgICBydWxlclNlbGVjdC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbihldikge1xuICAgICAgICAgICAgYi5ydWxlckxvY2F0aW9uID0gcnVsZXJTZWxlY3QudmFsdWU7XG4gICAgICAgICAgICBiLnBvc2l0aW9uUnVsZXIoKTtcbiAgICAgICAgICAgIGZvciAodmFyIHRpID0gMDsgdGkgPCBiLnRpZXJzLmxlbmd0aDsgKyt0aSkge1xuICAgICAgICAgICAgICAgIGIudGllcnNbdGldLnBhaW50UXVhbnQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGIuc3RvcmVTdGF0dXMoKTtcbiAgICAgICAgfSwgZmFsc2UpO1xuICAgICAgICBvcHRzVGFibGUuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ3RyJywgW21ha2VFbGVtZW50KCd0ZCcsICdWZXJ0aWNhbCBndWlkZWxpbmUnLCB7YWxpZ246ICdyaWdodCd9KSwgbWFrZUVsZW1lbnQoJ3RkJywgcnVsZXJTZWxlY3QpXSkpO1xuICAgICAgICBcbiAgICAgICAgdmFyIHNpbmdsZUJhc2VIaWdobGlnaHRCdXR0b24gPSBtYWtlRWxlbWVudCgnaW5wdXQnLCAnJywge3R5cGU6ICdjaGVja2JveCcsIGNoZWNrZWQ6IGIuc2luZ2xlQmFzZUhpZ2hsaWdodH0pOyBcbiAgICAgICAgc2luZ2xlQmFzZUhpZ2hsaWdodEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbihldikge1xuICAgICAgICAgICAgYi5zaW5nbGVCYXNlSGlnaGxpZ2h0ID0gc2luZ2xlQmFzZUhpZ2hsaWdodEJ1dHRvbi5jaGVja2VkO1xuICAgICAgICAgICAgYi5wb3NpdGlvblJ1bGVyKCk7XG4gICAgICAgICAgICBiLnN0b3JlU3RhdHVzKCk7XG4gICAgICAgIH0sIGZhbHNlKTtcbiAgICAgICAgc2luZ2xlQmFzZUhpZ2hsaWdodEJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2lkJywnc2luZ2xlQmFzZUhpZ2h0bGlnaHRCdXR0b24nKTsgLy8gbWFraW5nIHRoaXMgYmVjYXVzZSBhY2Nlc3MgaXMgcmVxdWlyZWQgd2hlbiB0aGUga2V5ICd1JyBpcyBwcmVzc2VkIGFuZCB0aGUgb3B0aW9ucyBhcmUgdmlzaWJsZVxuICAgICAgICBvcHRzVGFibGUuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ3RyJywgW21ha2VFbGVtZW50KCd0ZCcsICdEaXNwbGF5IGFuZCBoaWdobGlnaHQgY3VycmVudCBnZW5vbWUgbG9jYXRpb24nLCB7YWxpZ246ICdyaWdodCd9KSwgbWFrZUVsZW1lbnQoJ3RkJywgc2luZ2xlQmFzZUhpZ2hsaWdodEJ1dHRvbildKSk7XG4gICAgICAgIFxuICAgICAgICBvcHRzRm9ybS5hcHBlbmRDaGlsZChvcHRzVGFibGUpO1xuXG4gICAgICAgIHZhciByZXNldEJ1dHRvbiA9IG1ha2VFbGVtZW50KCdidXR0b24nLCAnUmVzZXQgYnJvd3NlcicsIHtjbGFzc05hbWU6ICdidG4nfSwge21hcmdpbkxlZnQ6ICdhdXRvJywgbWFyZ2luUmlnaHQ6ICdhdXRvJywgZGlzcGxheTogJ2Jsb2NrJ30pO1xuICAgICAgICByZXNldEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgICAgICBiLnJlc2V0KCk7XG4gICAgICAgIH0sIGZhbHNlKTtcbiAgICAgICAgb3B0c0Zvcm0uYXBwZW5kQ2hpbGQocmVzZXRCdXR0b24pO1xuXG4gICAgICAgIHRoaXMuc2hvd1Rvb2xQYW5lbChvcHRzRm9ybSk7XG4gICAgICAgIHRoaXMuc2V0VWlNb2RlKCdvcHRzJyk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBodW1hblJlYWRhYmxlU2NhbGUoeCkge1xuICAgIHZhciBzdWZmaXggPSAnYnAnO1xuICAgIGlmICh4ID4gMTAwMDAwMDAwMCkge1xuICAgICAgICB4IC89IDEwMDAwMDAwMDA7XG4gICAgICAgIHN1ZmZpeCA9ICdHYic7XG4gICAgfSBlbHNlIGlmICh4ID4gMTAwMDAwMCkge1xuICAgICAgICB4IC89IDEwMDAwMDBcbiAgICAgICAgc3VmZml4ID0gJ01iJztcbiAgICB9IGVsc2UgaWYgKHggPiAxMDAwKSB7XG4gICAgICAgIHggLz0gMTAwMDtcbiAgICAgICAgc3VmZml4ID0gJ2tiJztcbiAgICB9XG4gICAgcmV0dXJuICcnICsgTWF0aC5yb3VuZCh4KSArIHN1ZmZpeDtcbn1cbiIsIi8qIC0qLSBtb2RlOiBqYXZhc2NyaXB0OyBjLWJhc2ljLW9mZnNldDogNDsgaW5kZW50LXRhYnMtbW9kZTogbmlsIC0qLSAqL1xuXG4vL1xuLy8gRGFsbGlhbmNlIEdlbm9tZSBFeHBsb3JlclxuLy8gKGMpIFRob21hcyBEb3duIDIwMDYtMjAxMVxuLy9cbi8vIGNicm93c2VyLmpzOiBjYW52YXMgYnJvd3NlciBjb250YWluZXJcbi8vXG5cblwidXNlIHN0cmljdFwiO1xuXG5pZiAodHlwZW9mKHJlcXVpcmUpICE9PSAndW5kZWZpbmVkJykge1xuICAgIHZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcbiAgICB2YXIgT2JzZXJ2ZWQgPSB1dGlscy5PYnNlcnZlZDtcbiAgICB2YXIgQXdhaXRlZCA9IHV0aWxzLkF3YWl0ZWQ7XG4gICAgdmFyIG1ha2VFbGVtZW50ID0gdXRpbHMubWFrZUVsZW1lbnQ7XG4gICAgdmFyIHJlbW92ZUNoaWxkcmVuID0gdXRpbHMucmVtb3ZlQ2hpbGRyZW47XG4gICAgdmFyIG1pbmlKU09OaWZ5ID0gdXRpbHMubWluaUpTT05pZnk7XG4gICAgdmFyIHNoYWxsb3dDb3B5ID0gdXRpbHMuc2hhbGxvd0NvcHk7XG4gICAgdmFyIHRleHRYSFIgPSB1dGlscy50ZXh0WEhSO1xuXG4gICAgdmFyIHRpZXIgPSByZXF1aXJlKCcuL3RpZXInKTtcbiAgICB2YXIgRGFzVGllciA9IHRpZXIuRGFzVGllcjtcblxuICAgIHZhciBzaGExID0gcmVxdWlyZSgnLi9zaGExJyk7XG4gICAgdmFyIGhleF9zaGExID0gc2hhMS5oZXhfc2hhMTtcblxuICAgIHZhciB0aHViID0gcmVxdWlyZSgnLi90aHViJyk7XG4gICAgdmFyIGNvbm5lY3RUcmFja0h1YiA9IHRodWIuY29ubmVjdFRyYWNrSHViO1xuXG4gICAgdmFyIFZFUlNJT04gPSByZXF1aXJlKCcuL3ZlcnNpb24nKTtcblxuICAgIHZhciBuZiA9IHJlcXVpcmUoJy4vbnVtZm9ybWF0cycpO1xuICAgIHZhciBmb3JtYXRRdWFudExhYmVsID0gbmYuZm9ybWF0UXVhbnRMYWJlbDtcbiAgICB2YXIgZm9ybWF0TG9uZ0ludCA9IG5mLmZvcm1hdExvbmdJbnQ7XG5cbiAgICB2YXIgQ2hhaW5zZXQgPSByZXF1aXJlKCcuL2NoYWluc2V0JykuQ2hhaW5zZXQ7XG5cbiAgICB2YXIgUHJvbWlzZSA9IHJlcXVpcmUoJ2VzNi1wcm9taXNlJykuUHJvbWlzZTtcblxuICAgIHZhciBzb3VyY2Vjb21wYXJlID0gcmVxdWlyZSgnLi9zb3VyY2Vjb21wYXJlJyk7XG4gICAgdmFyIHNvdXJjZXNBcmVFcXVhbCA9IHNvdXJjZWNvbXBhcmUuc291cmNlc0FyZUVxdWFsO1xuICAgIHZhciBzb3VyY2VzQXJlRXF1YWxNb2R1bG9TdHlsZSA9IHNvdXJjZWNvbXBhcmUuc291cmNlc0FyZUVxdWFsTW9kdWxvU3R5bGU7XG4gICAgdmFyIHNvdXJjZURhdGFVUkkgPSBzb3VyY2Vjb21wYXJlLnNvdXJjZURhdGFVUkk7XG4gICAgdmFyIHNvdXJjZVN0eWxlVVJJID0gc291cmNlY29tcGFyZS5zb3VyY2VTdHlsZVVSSTtcblxuICAgIHZhciBEZWZhdWx0UmVuZGVyZXIgPSByZXF1aXJlKCcuL2RlZmF1bHQtcmVuZGVyZXInKTtcblxuICAgIHZhciBNdWx0aVJlbmRlcmVyID0gcmVxdWlyZSgnLi9tdWx0aS1yZW5kZXJlcicpO1xuICAgIHZhciBTdWJSZW5kZXJlciA9IHJlcXVpcmUoJy4vc3ViLXJlbmRlcmVyJyk7XG5cbiAgICB2YXIgRHVtbXlSZW5kZXJlciA9IHJlcXVpcmUoJy4vZHVtbXktcmVuZGVyZXInKTtcbn1cblxuZnVuY3Rpb24gUmVnaW9uKGNociwgbWluLCBtYXgpIHtcbiAgICB0aGlzLm1pbiA9IG1pbjtcbiAgICB0aGlzLm1heCA9IG1heDtcbiAgICB0aGlzLmNociA9IGNocjtcbn1cblxuZnVuY3Rpb24gQnJvd3NlcihvcHRzKSB7XG4gICAgaWYgKCFvcHRzKSB7XG4gICAgICAgIG9wdHMgPSB7fTtcbiAgICB9XG5cbiAgICB0aGlzLnJlbmRlcmVycyA9XG4gICAgICAgIHsgJ2RlZmF1bHQnOiBEZWZhdWx0UmVuZGVyZXIsXG4gICAgICAgICAgJ2R1bW15JzogRHVtbXlSZW5kZXJlcixcbiAgICAgICAgICAnbXVsdGknOiBNdWx0aVJlbmRlcmVyLFxuICAgICAgICAgICdzdWInOiBTdWJSZW5kZXJlclxuICAgICAgICB9O1xuXG4gICAgdGhpcy5kZWZhdWx0UmVuZGVyZXIgPSBvcHRzLnJlbmRlcmVyIHx8IERlZmF1bHRSZW5kZXJlcjtcblxuICAgIHRoaXMucHJlZml4ID0gJy8vd3d3LmJpb2RhbGxpYW5jZS5vcmcvcmVsZWFzZS0wLjE0Lyc7XG5cbiAgICB0aGlzLnNvdXJjZXMgPSBbXTtcbiAgICB0aGlzLnRpZXJzID0gW107XG4gICAgdGhpcy50aWVyR3JvdXBzID0ge307XG5cbiAgICB0aGlzLnNlYXJjaE9ubHlTb3VyY2VzID0gW107XG4gICAgdGhpcy5zZWFyY2hPbmx5U291cmNlSG9sZGVycyA9IFtdO1xuXG4gICAgdGhpcy5mZWF0dXJlTGlzdGVuZXJzID0gW107XG4gICAgdGhpcy5mZWF0dXJlSG92ZXJMaXN0ZW5lcnMgPSBbXTtcbiAgICB0aGlzLnZpZXdMaXN0ZW5lcnMgPSBbXTtcbiAgICB0aGlzLnJlZ2lvblNlbGVjdExpc3RlbmVycyA9IFtdO1xuICAgIHRoaXMudGllckxpc3RlbmVycyA9IFtdO1xuICAgIHRoaXMudGllclNlbGVjdGlvbkxpc3RlbmVycyA9IFtdO1xuICAgIHRoaXMudGllclNlbGVjdGlvbldyYXBMaXN0ZW5lcnMgPSBbXTtcblxuICAgIHRoaXMuY29va2llS2V5ID0gJ2Jyb3dzZXInO1xuXG4gICAgdGhpcy5jaGFpbnMgPSB7fTtcblxuICAgIHRoaXMucGFnZU5hbWUgPSAnc3ZnSG9sZGVyJ1xuICAgIHRoaXMuem9vbUZhY3RvciA9IDEuMDtcbiAgICB0aGlzLm1heFBpeGVsc1BlckJhc2UgPSAxMDtcbiAgICB0aGlzLm9yaWdpbiA9IDA7XG4gICAgdGhpcy50YXJnZXRRdWFudFJlcyA9IDEuMDtcbiAgICB0aGlzLmZlYXR1cmVQYW5lbFdpZHRoID0gNzUwO1xuICAgIHRoaXMuem9vbUJhc2UgPSAxMDA7XG4gICAgdGhpcy56b29tRXhwdCA9IDMwLjA7IC8vIEJhY2sgdG8gYmVpbmcgZml4ZWQuLi4uXG4gICAgdGhpcy56b29tU2xpZGVyVmFsdWUgPSAxMDA7XG4gICAgdGhpcy5lbnRyeVBvaW50cyA9IG51bGw7XG4gICAgdGhpcy5jdXJyZW50U2VxTWF4ID0gLTE7IC8vIGluaXQgb25jZSBFUHMgYXJlIGZldGNoZWQuXG5cbiAgICB0aGlzLmhpZ2hsaWdodHMgPSBbXTtcbiAgICB0aGlzLnNlbGVjdGVkVGllcnMgPSBbMV07XG5cbiAgICB0aGlzLm1heFZpZXdXaWR0aCA9IDUwMDAwMDtcbiAgICB0aGlzLmRlZmF1bHRTdWJ0aWVyTWF4ID0gMTAwO1xuXG4gICAgdGhpcy5oaWdoWm9vbVRocmVzaG9sZCA9IDAuMjtcbiAgICB0aGlzLm1lZGl1bVpvb21UaHJlc2hvbGQgPSAwLjAxXG5cbiAgICB0aGlzLm1pbkV4dHJhV2lkdGggPSAxMDAuMDtcbiAgICB0aGlzLm1heEV4dHJhV2lkdGggPSAxMDAwLjA7XG4gICAgXG4gICAgLy8gT3B0aW9ucy5cblxuICAgIHRoaXMucmV2ZXJzZVNjcm9sbGluZyA9IGZhbHNlO1xuICAgIHRoaXMucnVsZXJMb2NhdGlvbiA9ICdjZW50ZXInO1xuICAgIHRoaXMuZGVmYXVsdEhpZ2hsaWdodEZpbGwgPSAncmVkJztcbiAgICB0aGlzLmRlZmF1bHRIaWdobGlnaHRBbHBoYSA9IDAuMztcbiAgICB0aGlzLmV4cG9ydEhpZ2hsaWdodHMgPSB0cnVlO1xuICAgIHRoaXMuZXhwb3J0UnVsZXIgPSB0cnVlO1xuICAgIHRoaXMuZXhwb3J0QmFubmVyID0gdHJ1ZTtcbiAgICB0aGlzLmV4cG9ydFJlZ2lvbiA9IHRydWU7XG4gICAgdGhpcy5zaW5nbGVCYXNlSGlnaGxpZ2h0ID0gdHJ1ZTtcblxuICAgIC8vIFZpc3VhbCBjb25maWcuXG5cbiAgICAvLyB0aGlzLnRpZXJCYWNrZ3JvdW5kQ29sb3JzID0gW1wicmdiKDI0NSwyNDUsMjQ1KVwiLCBcInJnYigyMzAsMjMwLDI1MClcIiAvKiAnd2hpdGUnICovXTtcbiAgICB0aGlzLnRpZXJCYWNrZ3JvdW5kQ29sb3JzID0gW1wicmdiKDI0NSwyNDUsMjQ1KVwiLCAnd2hpdGUnXTtcbiAgICB0aGlzLm1pblRpZXJIZWlnaHQgPSAyMDtcbiAgICB0aGlzLm5vRGVmYXVsdExhYmVscyA9IGZhbHNlO1xuXG4gICAgLy8gUmVnaXN0cnlcblxuICAgIHRoaXMuYXZhaWxhYmxlU291cmNlcyA9IG5ldyBPYnNlcnZlZCgpO1xuICAgIHRoaXMuZGVmYXVsdFNvdXJjZXMgPSBbXTtcbiAgICB0aGlzLm1hcHBhYmxlU291cmNlcyA9IHt9O1xuXG4gICAgLy8gQ2VudHJhbCBEQVMgUmVnaXN0cnkgbm8gbG9uZ2VyIGF2YWlsYWJsZSAyMDE1LTA1XG5cbiAgICB0aGlzLnJlZ2lzdHJ5ID0gbnVsbDsgLy8gJy8vd3d3LmRhc3JlZ2lzdHJ5Lm9yZy9kYXMvc291cmNlcyc7XG4gICAgdGhpcy5ub1JlZ2lzdHJ5VGFicyA9IHRydWU7XG5cbiAgICB0aGlzLmRlZmF1bHRUcmFja0FkZGVyVGFiID0gbnVsbDtcblxuICAgIHRoaXMuaHVicyA9IFtdO1xuICAgIHRoaXMuaHViT2JqZWN0cyA9IFtdO1xuXG4gICAgdGhpcy5zb3VyY2VDYWNoZSA9IG5ldyBTb3VyY2VDYWNoZSgpO1xuXG4gICAgdGhpcy5yZXRpbmEgPSB0cnVlO1xuXG4gICAgdGhpcy51c2VGZXRjaFdvcmtlcnMgPSB0cnVlO1xuICAgIHRoaXMubWF4V29ya2VycyA9IDI7XG4gICAgdGhpcy53b3JrZXJQYXRoID0gJyQkd29ya2VyLWFsbC5qcyc7XG4gICAgdGhpcy5yZXNvbHZlcnMgPSB7fTtcbiAgICB0aGlzLnJlc29sdmVyU2VlZCA9IDE7XG5cbiAgICB0aGlzLmFzc2VtYmx5TmFtZVByaW1hcnkgPSB0cnVlO1xuICAgIHRoaXMuYXNzZW1ibHlOYW1lVWNzYyA9IHRydWU7XG5cbiAgICB0aGlzLmRlZmF1bHRTZWFyY2hSZWdpb25QYWRkaW5nID0gMTAwMDA7XG5cbiAgICAvLyBIVFRQIHdhcm5pbmcgc3VwcG9ydFxuXG4gICAgdGhpcy5odHRwQ2FuYXJ5VVJMID0gJ2h0dHA6Ly93d3cuYmlvZGFsbGlhbmNlLm9yZy9odHRwLWNhbmFyeS50eHQnO1xuICAgIHRoaXMuaHR0cFdhcm5pbmdVUkwgPSAnLy93d3cuYmlvZGFsbGlhbmNlLm9yZy9odHRwcy5odG1sJztcblxuICAgIHRoaXMuaW5pdExpc3RlbmVycyA9IFtdO1xuXG4gICAgaWYgKG9wdHMuYmFzZUNvbG9ycykge1xuICAgICAgICB0aGlzLmJhc2VDb2xvcnMgPSBvcHRzLmJhc2VDb2xvcnNcbiAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmJhc2VDb2xvcnMgPSB7XG4gICAgICAgICAgICBBOiAnZ3JlZW4nLFxuICAgICAgICAgICAgQzogJ2JsdWUnLFxuICAgICAgICAgICAgRzogJ29yYW5nZScsXG4gICAgICAgICAgICBUOiAncmVkJyxcbiAgICAgICAgICAgICctJyA6ICdob3RwaW5rJywgLy8gZGVsZXRpb25cbiAgICAgICAgICAgICdJJyA6ICdyZWQnIC8vIGluc2VydGlvblxuICAgICAgICB9O1xuICAgIH1cblxuICAgIGlmIChvcHRzLnZpZXdTdGFydCAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZihvcHRzLnZpZXdTdGFydCkgIT09ICdudW1iZXInKSB7XG4gICAgICAgIHRocm93IEVycm9yKCd2aWV3U3RhcnQgbXVzdCBiZSBhbiBpbnRlZ2VyJyk7XG4gICAgfVxuICAgIGlmIChvcHRzLnZpZXdFbmQgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2Yob3B0cy52aWV3RW5kKSAhPT0gJ251bWJlcicpIHtcbiAgICAgICAgdGhyb3cgRXJyb3IoJ3ZpZXdFbmQgbXVzdCBiZSBhbiBpbnRlZ2VyJyk7XG4gICAgfVxuICAgIGlmIChvcHRzLm9mZnNjcmVlbkluaXRXaWR0aCAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZihvcHRzLm9mZnNjcmVlbkluaXRXaWR0aCkgIT09ICdudW1iZXInKSB7XG4gICAgICAgIHRocm93IEVycm9yKCdvZmZzY3JlZW5Jbml0V2lkdGggbXVzdCBiZSBhbiBpbnRlZ2VyJyk7XG4gICAgfVxuXG4gICAgZm9yICh2YXIgayBpbiBvcHRzKSB7XG4gICAgICAgIHRoaXNba10gPSBvcHRzW2tdO1xuICAgIH1cbiAgICBcbiAgICBpZiAodHlwZW9mKG9wdHMudWlQcmVmaXgpID09PSAnc3RyaW5nJyAmJiB0eXBlb2Yob3B0cy5wcmVmaXgpICE9PSAnc3RyaW5nJykge1xuICAgICAgICB0aGlzLnByZWZpeCA9IG9wdHMudWlQcmVmaXg7XG4gICAgfVxuICAgIC8vIElmIHRoZSBwcmVmaXggb25seSBzdGFydHMgd2l0aCBhIHNpbmdsZSAnLycgdGhpcyBpcyByZWxhdGl2ZSB0byB0aGUgY3VycmVudFxuICAgIC8vIHNpdGUsIHNvIHdlIG5lZWQgdG8gcHJlZml4IHRoZSBwcmVmaXggd2l0aCAvL3tob3N0bmFtZX1cbiAgICBpZiAodGhpcy5wcmVmaXguaW5kZXhPZignLy8nKSA8IDAgJiYgdGhpcy5wcmVmaXguaW5kZXhPZignLycpID09PSAwKSB7XG4gICAgICAgIHZhciBsb2NhdGlvbiA9IHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZTtcbiAgICAgICAgaWYgKHdpbmRvdy5sb2NhdGlvbi5wb3J0KSB7XG4gICAgICAgICAgICBsb2NhdGlvbiArPSAnOicgKyB3aW5kb3cubG9jYXRpb24ucG9ydFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLnByZWZpeCA9ICcvLycgKyBsb2NhdGlvbiArIHRoaXMucHJlZml4O1xuICAgIH1cbiAgICBpZiAodGhpcy5wcmVmaXguaW5kZXhPZignLy8nKSA9PT0gMCkge1xuICAgICAgICB2YXIgcHJvdG8gPSB3aW5kb3cubG9jYXRpb24ucHJvdG9jb2w7XG4gICAgICAgIGlmIChwcm90byA9PSAnaHR0cDonIHx8IHByb3RvID09ICdodHRwczonKSB7XG4gICAgICAgICAgICAvLyBQcm90b2NvbC1yZWxhdGl2ZSBVUkxzIG9rYXkuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyh3aW5kb3cubG9jYXRpb24ucHJvdG9jb2wpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1dBUk5JTkc6IHByZWZpeCBpcyBzZXQgdG8gYSBwcm90b2NvbC1yZWxhdGl2ZSBVUkwgKCcgKyB0aGlzLnByZWZpeCArICcgd2hlbiBsb2FkaW5nIGZyb20gYSBub24tSFRUUCBzb3VyY2UnKTtcbiAgICAgICAgICAgIHRoaXMucHJlZml4ID0gJ2h0dHA6JyArIHRoaXMucHJlZml4O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLmNvb3JkU3lzdGVtKSB7XG4gICAgICAgIHRocm93IEVycm9yKCdDb29yZGluYXRlIHN5c3RlbSBtdXN0IGJlIGNvbmZpZ3VyZWQnKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5jaHIgPT09IHVuZGVmaW5lZCB8fCB0aGlzLnZpZXdTdGFydCA9PT0gdW5kZWZpbmVkIHx8IHRoaXMudmlld0VuZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRocm93IEVycm9yKCdWaWV3ZWQgcmVnaW9uIChjaHI6c3RhcnQuLmVuZCkgbXVzdCBiZSBkZWZpbmVkJyk7XG4gICAgfVxuXG4gICAgdmFyIHRoaXNCID0gdGhpcztcblxuICAgIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlID09PSAnY29tcGxldGUnKSB7XG4gICAgICAgIHRoaXNCLnJlYWxJbml0KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGxvYWRMaXN0ZW5lciA9IGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbG9hZCcsIGxvYWRMaXN0ZW5lciwgZmFsc2UpO1xuICAgICAgICAgICAgdGhpc0IucmVhbEluaXQoKTtcbiAgICAgICAgfVxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGxvYWRMaXN0ZW5lciwgZmFsc2UpO1xuICAgIH1cbn1cblxuQnJvd3Nlci5wcm90b3R5cGUucmVzb2x2ZVVSTCA9IGZ1bmN0aW9uKHVybCkge1xuICAgIHJldHVybiB1cmwucmVwbGFjZSgnJCQnLCB0aGlzLnByZWZpeCk7XG59XG5cbkJyb3dzZXIucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbigpIHtcbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5yZXNpemVMaXN0ZW5lciwgZmFsc2UpO1xuICAgIGlmICh0aGlzLmZldGNoV29ya2Vycykge1xuICAgICAgICBmb3IgKGNvbnN0IHdvcmtlciBvZiB0aGlzLmZldGNoV29ya2Vycykge1xuICAgICAgICAgICAgd29ya2VyLnRlcm1pbmF0ZSgpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5Ccm93c2VyLnByb3RvdHlwZS5yZWFsSW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgdGhpc0IgPSB0aGlzO1xuXG4gICAgaWYgKHRoaXMud2FzSW5pdGlhbGl6ZWQpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ0F0dGVtcGluZyB0byBjYWxsIHJlYWxJbml0IG9uIGFuIGFscmVhZHktaW5pdGlhbGl6ZWQgRGFsbGlhbmNlIGluc3RhbmNlJyk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLndhc0luaXRpYWxpemVkID0gdHJ1ZTtcblxuICAgIGlmICh0eXBlb2YobmF2aWdhdG9yKSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgdmFyIHVhID0gbmF2aWdhdG9yLnVzZXJBZ2VudCB8fCAnZHVtbXknO1xuICAgICAgICBpZiAodWEuaW5kZXhPZignVHJpZGVudCcpID49IDAgJiYgdWEuaW5kZXhPZigncnY6MTEnKSA+PSAwKSB7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnRGV0ZWN0ZWQgSUUxMSwgZGlzYWJsaW5nIHRpZXIgcGlubmluZy4nKTtcbiAgICAgICAgICAgIHRoaXMuZGlzYWJsZVBpbm5pbmcgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5kZWZhdWx0Q2hyID0gdGhpcy5jaHI7XG4gICAgdGhpcy5kZWZhdWx0U3RhcnQgPSB0aGlzLnZpZXdTdGFydDtcbiAgICB0aGlzLmRlZmF1bHRFbmQgPSB0aGlzLnZpZXdFbmQ7XG4gICAgdGhpcy5kZWZhdWx0U291cmNlcyA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5zb3VyY2VzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIHZhciBzID0gdGhpcy5zb3VyY2VzW2ldO1xuICAgICAgICBpZiAocylcbiAgICAgICAgICAgIHRoaXMuZGVmYXVsdFNvdXJjZXMucHVzaChzKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5yZXN0b3JlU3RhdHVzKSB7XG4gICAgICAgIHRoaXMuc3RhdHVzUmVzdG9yZWQgPSB0aGlzLnJlc3RvcmVTdGF0dXMoKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5pbmplY3Rpb25Qb2ludCAmJiB0aGlzLmluamVjdGlvblBvaW50IGluc3RhbmNlb2YgRWxlbWVudCkge1xuICAgICAgICB0aGlzLmJyb3dzZXJIb2xkZXJIb2xkZXIgPSB0aGlzLmluamVjdGlvblBvaW50O1xuICAgIH0gZWxzZSBpZiAodGhpcy5pbmplY3Rpb25Qb2ludCkge1xuICAgICAgICB0aGlzLmJyb3dzZXJIb2xkZXJIb2xkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmluamVjdGlvblBvaW50KTtcbiAgICAgICAgaWYgKCF0aGlzLmJyb3dzZXJIb2xkZXJIb2xkZXIpIHtcbiAgICAgICAgICAgIHRocm93IEVycm9yKCdpbmplY3Rpb25Qb2ludCBtdXN0IHBvaW50IHRvIGEgdmFsaWQgRE9NIGVsZW1lbnQgb2YgZWxlbWVudCBJRCcpO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5icm93c2VySG9sZGVySG9sZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5wYWdlTmFtZSk7XG4gICAgICAgIGlmICghdGhpcy5icm93c2VySG9sZGVySG9sZGVyKSB7XG4gICAgICAgICAgICB0aHJvdyBFcnJvcigncGFnZU5hbWUgbXVzdCBiZSBhIHZhbGlkIGVsZW1lbnQgSUQgKG9yIHVzZSB0aGUgaW5qZWN0aW9uUG9pbnQgb3B0aW9uIGluc3RlYWQpJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgdGhpcy5icm93c2VySG9sZGVySG9sZGVyLmNsYXNzTGlzdC5hZGQoJ2RhbGxpYW5jZS1pbmplY3Rpb24tcG9pbnQnKTtcbiAgICB0aGlzLmJyb3dzZXJIb2xkZXIgPSBtYWtlRWxlbWVudCgnZGl2JywgbnVsbCwge2NsYXNzTmFtZTogJ2RhbGxpYW5jZSBkYWxsaWFuY2Utcm9vdCcsIHRhYkluZGV4OiAtMX0pO1xuICAgIGlmICh0aGlzLm1heEhlaWdodCkge1xuICAgICAgICB0aGlzLmJyb3dzZXJIb2xkZXIuc3R5bGUubWF4SGVpZ2h0ID0gdGhpcy5tYXhIZWlnaHQgKyAncHgnO1xuICAgIH0gZWxzZSBpZiAodGhpcy5tYXhIZWlnaHQgIT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRoaXMuYnJvd3NlckhvbGRlci5zdHlsZS5tYXhIZWlnaHQgPSBudWxsO1xuICAgIH1cbiAgICByZW1vdmVDaGlsZHJlbih0aGlzLmJyb3dzZXJIb2xkZXJIb2xkZXIpO1xuICAgIHRoaXMuYnJvd3NlckhvbGRlckhvbGRlci5hcHBlbmRDaGlsZCh0aGlzLmJyb3dzZXJIb2xkZXIpO1xuICAgIHRoaXMuc3ZnSG9sZGVyID0gbWFrZUVsZW1lbnQoJ2RpdicsIG51bGwsIHtjbGFzc05hbWU6ICdtYWluLWhvbGRlcid9KTtcblxuICAgIHRoaXMuaW5pdFVJKHRoaXMuYnJvd3NlckhvbGRlciwgdGhpcy5zdmdIb2xkZXIpO1xuXG4gICAgdGhpcy5waW5uZWRUaWVySG9sZGVyID0gbWFrZUVsZW1lbnQoJ2RpdicsIG51bGwsIHtjbGFzc05hbWU6ICd0aWVyLWhvbGRlciB0aWVyLWhvbGRlci1waW5uZWQnfSk7XG4gICAgdGhpcy50aWVySG9sZGVyID0gbWFrZUVsZW1lbnQoJ2RpdicsIHRoaXMubWFrZUxvYWRlcigyNCksIHtjbGFzc05hbWU6ICd0aWVyLWhvbGRlciB0aWVyLWhvbGRlci1yZXN0J30pO1xuXG4gICAgdGhpcy5sb2NTaW5nbGVCYXNlID0gbWFrZUVsZW1lbnQoJ3NwYW4nLCAnJywge2NsYXNzTmFtZTogJ2xvYy1zaW5nbGUtYmFzZSd9KTtcbiAgICB2YXIgbG9jU2luZ2xlQmFzZUhvbGRlciA9IG1ha2VFbGVtZW50KCdkaXYnLCB0aGlzLmxvY1NpbmdsZUJhc2Use2NsYXNzTmFtZTogJ2xvYy1zaW5nbGUtYmFzZS1ob2xkZXInfSk7XG4gICAgLy8gQWRkIGxpc3RlbmVyIHRvIHVwZGF0ZSBzaW5nbGUgYmFzZSBsb2NhdGlvblxuICAgIHRoaXMuYWRkVmlld0xpc3RlbmVyKGZ1bmN0aW9uKGNociwgbWluRmxvb3IsIG1heEZsb29yLCB6b29tU2xpZGVyVmFsdWUsIHpvb21TbGlkZXJEaWN0LCBtaW4sIG1heCkge1xuICAgICAgICAvLyBKdXN0IHNldHRpbmcgdGV4dENvbnRlbnQgY2F1c2VzIGxheW91dCBmbGlja2VyaW5nIGluIEJsaW5rLlxuICAgICAgICAvLyBUaGlzIGFwcHJvYWNoIG1lYW5zIHRoYXQgdGhlIGVsZW1lbnQgaXMgbmV2ZXIgZW1wdHkuXG4gICAgICAgIHZhciBsb2MgPSBNYXRoLnJvdW5kKChtYXggKyBtaW4pIC8gMik7XG4gICAgICAgIHNlbGYubG9jU2luZ2xlQmFzZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjaHIgKyAnOicgKyBmb3JtYXRMb25nSW50KGxvYykpKTtcbiAgICAgICAgc2VsZi5sb2NTaW5nbGVCYXNlLnJlbW92ZUNoaWxkKHNlbGYubG9jU2luZ2xlQmFzZS5maXJzdENoaWxkKTtcbiAgICB9KTtcblxuICAgIGlmICh0aGlzLmRpc2FibGVQaW5uaW5nKSB7XG4gICAgICAgIHRoaXMudGllckhvbGRlckhvbGRlciA9IHRoaXMudGllckhvbGRlcjtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnRpZXJIb2xkZXJIb2xkZXIgPSBtYWtlRWxlbWVudCgnZGl2JywgW2xvY1NpbmdsZUJhc2VIb2xkZXIsIHRoaXMucGlubmVkVGllckhvbGRlciwgdGhpcy50aWVySG9sZGVyXSwge2NsYXNzTmFtZTogJ3RpZXItaG9sZGVyLWhvbGRlcid9KTtcbiAgICAgICAgdGhpcy5zdmdIb2xkZXIuYXBwZW5kQ2hpbGQodGhpcy50aWVySG9sZGVySG9sZGVyKTtcbiAgICB9XG4gICAgdGhpcy5zdmdIb2xkZXIuYXBwZW5kQ2hpbGQodGhpcy50aWVySG9sZGVySG9sZGVyKTtcblxuICAgIHRoaXMuYmh0bWxSb290ID0gbWFrZUVsZW1lbnQoJ2RpdicpO1xuICAgIGlmICghdGhpcy5kaXNhYmxlUG93ZXJlZEJ5KSB7XG4gICAgICAgIHRoaXMuYmh0bWxSb290LmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCdzcGFuJywgWydQb3dlcmVkIGJ5ICcsIG1ha2VFbGVtZW50KCdhJywgJ0Jpb2RhbGxpYW5jZScsIHtocmVmOiAnaHR0cDovL3d3dy5iaW9kYWxsaWFuY2Uub3JnLyd9KSwgJyAnICsgVkVSU0lPTl0sIHtjbGFzc05hbWU6ICdwb3dlcmVkLWJ5J30pKTtcbiAgICB9XG4gICAgdGhpcy5icm93c2VySG9sZGVyLmFwcGVuZENoaWxkKHRoaXMuYmh0bWxSb290KTtcblxuICAgIHRoaXMucmVzaXplTGlzdGVuZXIgPSBmdW5jdGlvbihldikge1xuICAgICAgICB0aGlzQi5yZXNpemVWaWV3ZXIoKTtcbiAgICB9O1xuXG4gICAgdGhpcy5ydWxlciA9IG1ha2VFbGVtZW50KCdkaXYnLCBudWxsLCB7Y2xhc3NOYW1lOiAnZ3VpZGVsaW5lJ30pXG4gICAgdGhpcy5ydWxlcjIgPSBtYWtlRWxlbWVudCgnZGl2JywgbnVsbCwge2NsYXNzTmFtZTogJ3NpbmdsZS1iYXNlLWd1aWRlbGluZSd9KTtcbiAgICB0aGlzLnRpZXJIb2xkZXJIb2xkZXIuYXBwZW5kQ2hpbGQodGhpcy5ydWxlcik7XG4gICAgdGhpcy50aWVySG9sZGVySG9sZGVyLmFwcGVuZENoaWxkKHRoaXMucnVsZXIyKTtcbiAgICB0aGlzLmNoYWluQ29uZmlncyA9IHRoaXMuY2hhaW5zIHx8IHt9O1xuICAgIHRoaXMuY2hhaW5zID0ge307XG4gICAgZm9yICh2YXIgayBpbiB0aGlzLmNoYWluQ29uZmlncykge1xuICAgICAgICB2YXIgY2MgPSB0aGlzLmNoYWluQ29uZmlnc1trXTtcbiAgICAgICAgaWYgKGNjIGluc3RhbmNlb2YgQ2hhaW5zZXQpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdXQVJOSU5HOiBTaG91bGQgbm8gbG9uZ2VyIHVzZSBcIm5ldyBDaGFpbnNldFwiIGluIEJpb2RhbGxpYW5jZSBjb25maWd1cmF0aW9ucy4nKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNoYWluc1trXSA9IG5ldyBDaGFpbnNldChjYyk7XG4gICAgfVxuXG4gICAgdmFyIHByb21pc2VkV29ya2VycztcbiAgICBpZiAodGhpcy5tYXhXb3JrZXJzID4gMCkge1xuICAgICAgICB2YXIgcHcgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgZmkgPSAwOyBmaSA8IHRoaXMubWF4V29ya2VyczsgKytmaSlcbiAgICAgICAgICAgIHB3LnB1c2gobWFrZUZldGNoV29ya2VyKHRoaXMpKTtcbiAgICAgICAgcHJvbWlzZWRXb3JrZXJzID0gUHJvbWlzZS5hbGwocHcpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHByb21pc2VkV29ya2VycyA9IFByb21pc2UucmVzb2x2ZShbXSk7XG4gICAgfVxuXG4gICAgdGhpcy5mZXRjaFdvcmtlcnMgPSBudWxsO1xuICAgIHRoaXMubmV4dFdvcmtlciA9IDA7XG4gICAgcHJvbWlzZWRXb3JrZXJzLnRoZW4oZnVuY3Rpb24odikge1xuICAgICAgICBjb25zb2xlLmxvZygnQm9vdGVkICcgKyB2Lmxlbmd0aCArICcgd29ya2VycycpO1xuICAgICAgICB0aGlzQi5mZXRjaFdvcmtlcnMgPSB2O1xuICAgIH0sIGZ1bmN0aW9uKHYpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ0ZhaWxlZCB0byBib290IHdvcmtlcnMnLCB2KTtcbiAgICB9KS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoc2VsZi5vZmZzY3JlZW5Jbml0V2lkdGggfHwgKHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRoaXNCLmJyb3dzZXJIb2xkZXJIb2xkZXIpLmRpc3BsYXkgIT0gJ25vbmUnICYmXG4gICAgICAgICAgICB0aGlzQi50aWVySG9sZGVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoID4gMCkpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7dGhpc0IucmVhbEluaXQyKCl9LCAxKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciBwb2xsSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBpZiAod2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpc0IuYnJvd3NlckhvbGRlckhvbGRlcikuZGlzcGxheSAhPSAnbm9uZScgJiZcbiAgICAgICAgICAgICAgICAgICAgdGhpc0IudGllckhvbGRlci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCA+IDApXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHBvbGxJbnRlcnZhbCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXNCLnJlYWxJbml0MigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIDMwMCk7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuQnJvd3Nlci5wcm90b3R5cGUucmVhbEluaXQyID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHRoaXNCID0gdGhpcztcblxuICAgIC8vIFJlbW92ZSB0aGUgbG9hZGVyIGljb24sIGlmIG5lZWRlZFxuICAgIHJlbW92ZUNoaWxkcmVuKHRoaXMudGllckhvbGRlcik7XG4gICAgcmVtb3ZlQ2hpbGRyZW4odGhpcy5waW5uZWRUaWVySG9sZGVyKTtcblxuICAgIHRoaXMuZmVhdHVyZVBhbmVsV2lkdGggPSB0aGlzLnRpZXJIb2xkZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGggfCB0aGlzQi5vZmZzY3JlZW5Jbml0V2lkdGggfCAwO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLnJlc2l6ZUxpc3RlbmVyLCBmYWxzZSk7XG5cbiAgICB0aGlzLnNjYWxlID0gdGhpcy5mZWF0dXJlUGFuZWxXaWR0aCAvICh0aGlzLnZpZXdFbmQgLSB0aGlzLnZpZXdTdGFydCk7XG4gICAgaWYgKCF0aGlzLnpvb21NYXgpIHtcbiAgICAgICAgdGhpcy56b29tTWF4ID0gdGhpcy56b29tRXhwdCAqIE1hdGgubG9nKHRoaXMubWF4Vmlld1dpZHRoIC8gdGhpcy56b29tQmFzZSk7XG4gICAgICAgIHRoaXMuem9vbU1pbiA9IHRoaXMuem9vbUV4cHQgKiBNYXRoLmxvZyh0aGlzLmZlYXR1cmVQYW5lbFdpZHRoIC8gdGhpcy5tYXhQaXhlbHNQZXJCYXNlIC8gdGhpcy56b29tQmFzZSk7XG4gICAgfVxuICAgIHRoaXMuem9vbVNsaWRlclZhbHVlID0gdGhpcy56b29tRXhwdCAqIE1hdGgubG9nKCh0aGlzLnZpZXdFbmQgLSB0aGlzLnZpZXdTdGFydCArIDEpIC8gdGhpcy56b29tQmFzZSk7XG5cbiAgICAvLyBFdmVudCBoYW5kbGVyc1xuXG4gICAgdGhpcy50aWVySG9sZGVySG9sZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNld2hlZWwnLCBmdW5jdGlvbihldikge1xuICAgICAgICBldi5zdG9wUHJvcGFnYXRpb24oKTsgZXYucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICBpZiAoZXYud2hlZWxEZWx0YVgpIHtcbiAgICAgICAgICAgIHZhciBkZWx0YSA9IGV2LndoZWVsRGVsdGFYLzU7XG4gICAgICAgICAgICBpZiAoIXRoaXNCLnJldmVyc2VTY3JvbGxpbmcpIHtcbiAgICAgICAgICAgICAgICBkZWx0YSA9IC1kZWx0YTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXNCLm1vdmUoZGVsdGEpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGV2LndoZWVsRGVsdGFZKSB7XG4gICAgICAgICAgICB2YXIgZGVsdGEgPSBldi53aGVlbERlbHRhWTtcbiAgICAgICAgICAgIGlmICh0aGlzQi5yZXZlcnNlU2Nyb2xsaW5nKSB7XG4gICAgICAgICAgICAgICAgZGVsdGEgPSAtZGVsdGE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzQi50aWVySG9sZGVyLnNjcm9sbFRvcCArPSBkZWx0YTtcbiAgICAgICAgfVxuICAgIH0sIGZhbHNlKTtcblxuICAgIHRoaXMudGllckhvbGRlckhvbGRlci5hZGRFdmVudExpc3RlbmVyKCdNb3pNb3VzZVBpeGVsU2Nyb2xsJywgZnVuY3Rpb24oZXYpIHtcbiAgICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7IGV2LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGlmIChldi5heGlzID09IDEpIHtcbiAgICAgICAgICAgIGlmIChldi5kZXRhaWwgIT0gMCkge1xuICAgICAgICAgICAgICAgIHZhciBkZWx0YSA9IGV2LmRldGFpbC80O1xuICAgICAgICAgICAgICAgIGlmICh0aGlzQi5yZXZlcnNlU2Nyb2xsaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlbHRhID0gLWRlbHRhO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzQi5tb3ZlKGRlbHRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciBkZWx0YSA9IGV2LmRldGFpbDtcbiAgICAgICAgICAgIGlmICghdGhpc0IucmV2ZXJzZVNjcm9sbGluZykge1xuICAgICAgICAgICAgICBkZWx0YSA9IC1kZWx0YTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpc0IudGllckhvbGRlci5zY3JvbGxUb3AgKz0gZGVsdGE7XG4gICAgICAgIH1cbiAgICB9LCBmYWxzZSk7XG5cbiAgICB0aGlzLnRpZXJIb2xkZXJIb2xkZXIuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIGZ1bmN0aW9uKGV2KSB7cmV0dXJuIHRoaXNCLnRvdWNoU3RhcnRIYW5kbGVyKGV2KX0sIGZhbHNlKTtcbiAgICB0aGlzLnRpZXJIb2xkZXJIb2xkZXIuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgZnVuY3Rpb24oZXYpIHtyZXR1cm4gdGhpc0IudG91Y2hNb3ZlSGFuZGxlcihldil9LCBmYWxzZSk7XG4gICAgdGhpcy50aWVySG9sZGVySG9sZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgZnVuY3Rpb24oZXYpIHtyZXR1cm4gdGhpc0IudG91Y2hFbmRIYW5kbGVyKGV2KX0sIGZhbHNlKTtcbiAgICB0aGlzLnRpZXJIb2xkZXJIb2xkZXIuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hjYW5jZWwnLCBmdW5jdGlvbihldikge3JldHVybiB0aGlzQi50b3VjaENhbmNlbEhhbmRsZXIoZXYpfSwgZmFsc2UpO1xuXG4gICAgdmFyIGtleUhhbmRsZXIgPSBmdW5jdGlvbihldikge1xuICAgICAgICAvLyBjb25zb2xlLmxvZygnY2JraDogJyArIGV2LmtleUNvZGUpO1xuICAgICAgICBpZiAoZXYua2V5Q29kZSA9PSAxMykgeyAvLyBlbnRlclxuICAgICAgICAgICAgdmFyIGxheW91dHNDaGFuZ2VkID0gZmFsc2U7XG4gICAgICAgICAgICBmb3IgKHZhciB0aSA9IDA7IHRpIDwgdGhpc0IudGllcnMubGVuZ3RoOyArK3RpKSB7XG4gICAgICAgICAgICAgICAgdmFyIHQgPSB0aGlzQi50aWVyc1t0aV07XG4gICAgICAgICAgICAgICAgaWYgKHQud2FudGVkTGF5b3V0SGVpZ2h0ICYmIHQud2FudGVkTGF5b3V0SGVpZ2h0ICE9IHQubGF5b3V0SGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgICAgIHQubGF5b3V0SGVpZ2h0ID0gdC53YW50ZWRMYXlvdXRIZWlnaHQ7XG4gICAgICAgICAgICAgICAgICAgIHQuY2xpcFRpZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgbGF5b3V0c0NoYW5nZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChsYXlvdXRzQ2hhbmdlZCkge1xuICAgICAgICAgICAgICAgIHRoaXNCLmFycmFuZ2VUaWVycygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGV2LmtleUNvZGUgPT0gMzIgfHwgZXYuY2hhckNvZGUgPT0gMzIpIHsgLy8gc3BhY2VcbiAgICAgICAgICAgIGlmICghdGhpc0IuaXNTbmFwWm9vbWluZykge1xuICAgICAgICAgICAgICAgIHRoaXNCLmlzU25hcFpvb21pbmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHZhciBuZXdab29tID0gKHRoaXNCLnNhdmVkWm9vbSB8fCAwLjApICsgdGhpc0Iuem9vbU1pbjtcbiAgICAgICAgICAgICAgICB0aGlzQi5zYXZlZFpvb20gPSB0aGlzQi56b29tU2xpZGVyVmFsdWUgLSB0aGlzQi56b29tTWluO1xuICAgICAgICAgICAgICAgIHRoaXNCLnpvb21TbGlkZXJWYWx1ZSA9IG5ld1pvb207XG4gICAgICAgICAgICAgICAgdGhpc0Iuem9vbShNYXRoLmV4cCgoMS4wICogbmV3Wm9vbSkgLyB0aGlzQi56b29tRXhwdCkpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzQi5pc1NuYXBab29taW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdmFyIG5ld1pvb20gPSAodGhpc0Iuc2F2ZWRab29tIHx8IDIwLjApICsgdGhpc0Iuem9vbU1pbjtcbiAgICAgICAgICAgICAgICB0aGlzQi5zYXZlZFpvb20gPSB0aGlzQi56b29tU2xpZGVyVmFsdWUgLSB0aGlzQi56b29tTWluO1xuICAgICAgICAgICAgICAgIHRoaXNCLnpvb21TbGlkZXJWYWx1ZSA9IG5ld1pvb207XG4gICAgICAgICAgICAgICAgdGhpc0Iuem9vbShNYXRoLmV4cCgoMS4wICogbmV3Wm9vbSkgLyB0aGlzQi56b29tRXhwdCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7IGV2LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH0gZWxzZSBpZiAoZXYua2V5Q29kZSA9PSA4NSkgeyAvLyB1XG4gICAgICAgICAgICBpZiAodGhpc0IudWlNb2RlID09PSAnb3B0cycpIHsgLy8gaWYgdGhlIG9wdGlvbnMgYXJlIHZpc2libGUsIHRvZ2dsZSB0aGUgY2hlY2tib3ggdG9vXG4gICAgICAgICAgICAgICAgdmFyIGNoZWNrID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzaW5nbGVCYXNlSGlnaHRsaWdodEJ1dHRvblwiKS5jaGVja2VkO1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2luZ2xlQmFzZUhpZ2h0bGlnaHRCdXR0b25cIikuY2hlY2tlZCA9ICFjaGVjaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXNCLnNpbmdsZUJhc2VIaWdobGlnaHQgPSAhdGhpc0Iuc2luZ2xlQmFzZUhpZ2hsaWdodDtcbiAgICAgICAgICAgIHRoaXNCLnBvc2l0aW9uUnVsZXIoKTtcbiAgICAgICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpOyBldi5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9IGVsc2UgaWYgKGV2LmtleUNvZGUgPT0gMzkpIHsgLy8gcmlnaHQgYXJyb3dcbiAgICAgICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpOyBldi5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdGhpc0Iuc2Nyb2xsQXJyb3dLZXkoZXYsIC0xKTtcbiAgICAgICAgfSBlbHNlIGlmIChldi5rZXlDb2RlID09IDM3KSB7IC8vIGxlZnQgYXJyb3dcbiAgICAgICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpOyBldi5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdGhpc0Iuc2Nyb2xsQXJyb3dLZXkoZXYsIDEpO1xuICAgICAgICB9IGVsc2UgaWYgKGV2LmtleUNvZGUgPT0gMzggfHwgZXYua2V5Q29kZSA9PSA4NykgeyAvLyB1cCBhcnJvdyB8IHdcbiAgICAgICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpOyBldi5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICAgICBpZiAoZXYuc2hpZnRLZXkpIHtcbiAgICAgICAgICAgICAgICB2YXIgc3QgPSB0aGlzQi5nZXRTZWxlY3RlZFRpZXIoKTtcbiAgICAgICAgICAgICAgICBpZiAoc3QgPCAwKSByZXR1cm47XG4gICAgICAgICAgICAgICAgdmFyIHR0ID0gdGhpc0IudGllcnNbc3RdO1xuICAgICAgICAgICAgICAgIHZhciBjaCA9IHR0LmZvcmNlSGVpZ2h0IHx8IHR0LnN1YnRpZXJzWzBdLmhlaWdodDtcbiAgICAgICAgICAgICAgICBpZiAoY2ggPj0gNDApIHtcbiAgICAgICAgICAgICAgICAgICAgdHQubWVyZ2VDb25maWcoe2hlaWdodDogY2gtMTB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV2LmN0cmxLZXkgfHwgZXYubWV0YUtleSkge1xuICAgICAgICAgICAgICAgIHZhciBzdCA9IHRoaXNCLmdldFNlbGVjdGVkVGllcigpO1xuICAgICAgICAgICAgICAgIGlmIChzdCA8IDApIHJldHVybjtcbiAgICAgICAgICAgICAgICB2YXIgdHQgPSB0aGlzQi50aWVyc1tzdF07XG5cbiAgICAgICAgICAgICAgICBpZiAodHQucXVhbnRMZWFwVGhyZXNob2xkKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0aCA9IHR0LnN1YnRpZXJzWzBdLmhlaWdodDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRxID0gdHQuc3VidGllcnNbMF0ucXVhbnQ7XG4gICAgICAgICAgICAgICAgICAgIGlmICghdHEpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHFtaW4gPSAxLjAgKiB0cS5taW47XG4gICAgICAgICAgICAgICAgICAgIHZhciBxbWF4ID0gMS4wICogdHEubWF4O1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBxc2NhbGUgPSAocW1heCAtIHFtaW4pIC8gdGg7XG4gICAgICAgICAgICAgICAgICAgIHR0Lm1lcmdlQ29uZmlnKHtxdWFudExlYXBUaHJlc2hvbGQ6IHFtaW4gKyAoKE1hdGgucm91bmQoKHR0LnF1YW50TGVhcFRocmVzaG9sZCAtIHFtaW4pL3FzY2FsZSl8MCkrMSkqcXNjYWxlfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgdHQubm90aWZ5KCdUaHJlc2hvbGQ6ICcgKyBmb3JtYXRRdWFudExhYmVsKHR0LnF1YW50TGVhcFRocmVzaG9sZCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXYuYWx0S2V5KSB7XG4gICAgICAgICAgICAgICAgdmFyIGNudCA9IHRoaXNCLnNlbGVjdGVkVGllcnMubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGlmIChjbnQgPT0gMClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgICAgICAgICAgdmFyIHN0ID0gdGhpc0Iuc2VsZWN0ZWRUaWVyc1swXTtcbiAgICAgICAgICAgICAgICB2YXIgY29udGlndW91cyA9IHRydWU7XG4gICAgICAgICAgICAgICAgdmFyIG10ID0gW107XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgc2kgPSAwOyBzaSA8IHRoaXNCLnNlbGVjdGVkVGllcnMubGVuZ3RoOyArK3NpKSB7XG4gICAgICAgICAgICAgICAgICAgIG10LnB1c2godGhpc0IudGllcnNbdGhpc0Iuc2VsZWN0ZWRUaWVyc1tzaV1dKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNpID4gMCAmJiB0aGlzQi5zZWxlY3RlZFRpZXJzW3NpXSAtIHRoaXNCLnNlbGVjdGVkVGllcnNbc2kgLSAxXSAhPSAxKVxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGlndW91cyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChjb250aWd1b3VzICYmIHN0IDw9IDApXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICAgICAgICAgIGZvciAodmFyIHNpID0gdGhpc0Iuc2VsZWN0ZWRUaWVycy5sZW5ndGggLSAxOyBzaSA+PSAwOyAtLXNpKVxuICAgICAgICAgICAgICAgICAgICB0aGlzQi50aWVycy5zcGxpY2UodGhpc0Iuc2VsZWN0ZWRUaWVyc1tzaV0sIDEpO1xuXG4gICAgICAgICAgICAgICAgdGhpc0Iuc2VsZWN0ZWRUaWVycy5zcGxpY2UoMCwgY250KTtcblxuICAgICAgICAgICAgICAgIHZhciBpcCA9IGNvbnRpZ3VvdXMgPyBzdCAtIDEgOiBzdDtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBzaSA9IDA7IHNpIDwgbXQubGVuZ3RoOyArK3NpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXNCLnRpZXJzLnNwbGljZShpcCtzaSwgMCwgbXRbc2ldKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpc0Iuc2VsZWN0ZWRUaWVycy5wdXNoKGlwICsgc2kpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXNCLndpdGhQcmVzZXJ2ZWRTZWxlY3Rpb24odGhpc0IuX2Vuc3VyZVRpZXJzR3JvdXBlZCk7XG4gICAgICAgICAgICAgICAgdGhpc0IubWFya1NlbGVjdGVkVGllcnMoKTtcbiAgICAgICAgICAgICAgICB0aGlzQi5ub3RpZnlUaWVyU2VsZWN0aW9uKCk7XG4gICAgICAgICAgICAgICAgdGhpc0IucmVvcmRlclRpZXJzKCk7XG4gICAgICAgICAgICAgICAgdGhpc0Iubm90aWZ5VGllcihcInNlbGVjdGVkXCIsIHN0KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIHN0ID0gdGhpc0IuZ2V0U2VsZWN0ZWRUaWVyKCk7XG4gICAgICAgICAgICAgICAgaWYgKHN0ID4gMCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzQi5zZXRTZWxlY3RlZFRpZXIoc3QgLSAxKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5zdCA9IHRoaXNCLnRpZXJzW3RoaXNCLmdldFNlbGVjdGVkVGllcigpXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRvcCA9IG5zdC5yb3cub2Zmc2V0VG9wLCBib3R0b20gPSB0b3AgKyBuc3Qucm93Lm9mZnNldEhlaWdodDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRvcCA8IHRoaXNCLnRpZXJIb2xkZXIuc2Nyb2xsVG9wIHx8IGJvdHRvbSA+IHRoaXNCLnRpZXJIb2xkZXIuc2Nyb2xsVG9wICsgdGhpc0IudGllckhvbGRlci5vZmZzZXRIZWlnaHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNCLnRpZXJIb2xkZXIuc2Nyb2xsVG9wID0gdG9wO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpc0Iubm90aWZ5VGllclNlbGVjdGlvbldyYXAoLTEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChldi5rZXlDb2RlID09IDQwIHx8IGV2LmtleUNvZGUgPT0gODMpIHsgLy8gZG93biBhcnJvdyB8IHNcbiAgICAgICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpOyBldi5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICAgICBpZiAoZXYuc2hpZnRLZXkpIHtcbiAgICAgICAgICAgICAgICB2YXIgc3QgPSB0aGlzQi5nZXRTZWxlY3RlZFRpZXIoKTtcbiAgICAgICAgICAgICAgICBpZiAoc3QgPCAwKSByZXR1cm47XG4gICAgICAgICAgICAgICAgdmFyIHR0ID0gdGhpc0IudGllcnNbc3RdO1xuICAgICAgICAgICAgICAgIHZhciBjaCA9IHR0LmZvcmNlSGVpZ2h0IHx8IHR0LnN1YnRpZXJzWzBdLmhlaWdodDtcbiAgICAgICAgICAgICAgICB0dC5tZXJnZUNvbmZpZyh7aGVpZ2h0OiBjaCsxMH0pO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChldi5jdHJsS2V5IHx8IGV2Lm1ldGFLZXkpIHtcbiAgICAgICAgICAgICAgICB2YXIgc3QgPSB0aGlzQi5nZXRTZWxlY3RlZFRpZXIoKTtcbiAgICAgICAgICAgICAgICBpZiAoc3QgPCAwKSByZXR1cm47XG4gICAgICAgICAgICAgICAgdmFyIHR0ID0gdGhpc0IudGllcnNbc3RdO1xuXG4gICAgICAgICAgICAgICAgaWYgKHR0LnF1YW50TGVhcFRocmVzaG9sZCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGggPSB0dC5zdWJ0aWVyc1swXS5oZWlnaHQ7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0cSA9IHR0LnN1YnRpZXJzWzBdLnF1YW50O1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXRxKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBxbWluID0gMS4wICogdHEubWluO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcW1heCA9IDEuMCAqIHRxLm1heDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHFzY2FsZSA9IChxbWF4IC0gcW1pbikgLyB0aDtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgaXQgPSBNYXRoLnJvdW5kKCh0dC5xdWFudExlYXBUaHJlc2hvbGQgLSBxbWluKS9xc2NhbGUpfDA7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpdCA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR0Lm1lcmdlQ29uZmlnKHtxdWFudExlYXBUaHJlc2hvbGQ6IHFtaW4gKyAoaXQtMSkqcXNjYWxlfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0dC5ub3RpZnkoJ1RocmVzaG9sZDogJyArIGZvcm1hdFF1YW50TGFiZWwodHQucXVhbnRMZWFwVGhyZXNob2xkKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV2LmFsdEtleSkge1xuICAgICAgICAgICAgICAgIHZhciBjbnQgPSB0aGlzQi5zZWxlY3RlZFRpZXJzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBpZiAoY250ID09IDApXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICAgICAgICAgIHZhciBzdCA9IHRoaXNCLnNlbGVjdGVkVGllcnNbMF07XG4gICAgICAgICAgICAgICAgdmFyIGRpc2NvbnRpZyA9IDA7XG4gICAgICAgICAgICAgICAgdmFyIG10ID0gW107XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgc2kgPSAwOyBzaSA8IHRoaXNCLnNlbGVjdGVkVGllcnMubGVuZ3RoOyArK3NpKSB7XG4gICAgICAgICAgICAgICAgICAgIG10LnB1c2godGhpc0IudGllcnNbdGhpc0Iuc2VsZWN0ZWRUaWVyc1tzaV1dKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNpID4gMClcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2NvbnRpZyArPSAodGhpc0Iuc2VsZWN0ZWRUaWVyc1tzaV0gLSB0aGlzQi5zZWxlY3RlZFRpZXJzW3NpIC0gMV0gLSAxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGNvbnRpZ3VvdXMgPSBkaXNjb250aWcgPT0gMDtcblxuICAgICAgICAgICAgICAgIGlmIChjb250aWd1b3VzICYmIHN0ICsgY250ID49IHRoaXNCLnRpZXJzLmxlbmd0aClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgc2kgPSB0aGlzQi5zZWxlY3RlZFRpZXJzLmxlbmd0aCAtIDE7IHNpID49IDA7IC0tc2kpXG4gICAgICAgICAgICAgICAgICAgIHRoaXNCLnRpZXJzLnNwbGljZSh0aGlzQi5zZWxlY3RlZFRpZXJzW3NpXSwgMSk7XG5cbiAgICAgICAgICAgICAgICB0aGlzQi5zZWxlY3RlZFRpZXJzLnNwbGljZSgwLCBjbnQpO1xuXG4gICAgICAgICAgICAgICAgdmFyIGlwID0gY29udGlndW91cyA/IHN0ICsgMSA6IHN0ICsgZGlzY29udGlnO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIHNpID0gMDsgc2kgPCBtdC5sZW5ndGg7ICsrc2kpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpc0IudGllcnMuc3BsaWNlKGlwK3NpLCAwLCBtdFtzaV0pO1xuICAgICAgICAgICAgICAgICAgICB0aGlzQi5zZWxlY3RlZFRpZXJzLnB1c2goaXAgKyBzaSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdGhpc0Iud2l0aFByZXNlcnZlZFNlbGVjdGlvbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpc0IuX2Vuc3VyZVRpZXJzR3JvdXBlZCh0cnVlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzQi5tYXJrU2VsZWN0ZWRUaWVycygpO1xuICAgICAgICAgICAgICAgIHRoaXNCLm5vdGlmeVRpZXJTZWxlY3Rpb24oKTtcbiAgICAgICAgICAgICAgICB0aGlzQi5yZW9yZGVyVGllcnMoKTtcbiAgICAgICAgICAgICAgICB0aGlzQi5ub3RpZnlUaWVyKFwic2VsZWN0ZWRcIiwgc3QpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgc3QgPSB0aGlzQi5nZXRTZWxlY3RlZFRpZXIoKTtcbiAgICAgICAgICAgICAgICBpZiAoc3QgPCB0aGlzQi50aWVycy5sZW5ndGggLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpc0Iuc2V0U2VsZWN0ZWRUaWVyKHN0ICsgMSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBuc3QgPSB0aGlzQi50aWVyc1t0aGlzQi5nZXRTZWxlY3RlZFRpZXIoKV07XG4gICAgICAgICAgICAgICAgICAgIHZhciB0b3AgPSBuc3Qucm93Lm9mZnNldFRvcCwgYm90dG9tID0gdG9wICsgbnN0LnJvdy5vZmZzZXRIZWlnaHQ7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0b3AgPCB0aGlzQi50aWVySG9sZGVyLnNjcm9sbFRvcCB8fCBib3R0b20gPiB0aGlzQi50aWVySG9sZGVyLnNjcm9sbFRvcCArIHRoaXNCLnRpZXJIb2xkZXIub2Zmc2V0SGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzQi50aWVySG9sZGVyLnNjcm9sbFRvcCA9IE1hdGgubWluKHRvcCwgYm90dG9tIC0gdGhpc0IudGllckhvbGRlci5vZmZzZXRIZWlnaHQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGV2LmtleUNvZGUgPT0gMTg3IHx8IGV2LmtleUNvZGUgPT0gNjEpIHsgLy8gK1xuICAgICAgICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7IGV2LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB0aGlzQi56b29tU3RlcCgtMTApO1xuICAgICAgICB9IGVsc2UgaWYgKGV2LmtleUNvZGUgPT0gMTg5IHx8IGV2LmtleUNvZGUgPT0gMTczKSB7IC8vIC1cbiAgICAgICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpOyBldi5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdGhpc0Iuem9vbVN0ZXAoMTApO1xuICAgICAgICB9IGVsc2UgaWYgKGV2LmtleUNvZGUgPT0gNzMgfHwgZXYua2V5Q29kZSA9PSAxMDUpIHsgLy8gaVxuICAgICAgICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7IGV2LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB2YXIgc3QgPSB0aGlzQi5nZXRTZWxlY3RlZFRpZXIoKTtcbiAgICAgICAgICAgIGlmIChzdCA8IDApIHJldHVybjtcbiAgICAgICAgICAgIHZhciB0ID0gdGhpc0IudGllcnNbc3RdO1xuICAgICAgICAgICAgaWYgKCF0LmluZm9WaXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgdC5pbmZvRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICAgICAgICB0LnVwZGF0ZUhlaWdodCgpO1xuICAgICAgICAgICAgICAgIHQuaW5mb1Zpc2libGUgPSB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0LmluZm9FbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgdC51cGRhdGVIZWlnaHQoKTtcbiAgICAgICAgICAgICAgICB0LmluZm9WaXNpYmxlID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoZXYua2V5Q29kZSA9PSA4NCB8fCBldi5rZXlDb2RlID09IDExNikgeyAvLyB0XG4gICAgICAgICAgICB2YXIgYnVtcFN0YXR1cztcbiAgICAgICAgICAgIGlmKCBldi5zaGlmdEtleSApe1xuICAgICAgICAgICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpOyBldi5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIHRpID0gMDsgdGkgPCB0aGlzQi50aWVycy5sZW5ndGg7ICsrdGkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSB0aGlzQi50aWVyc1t0aV07XG4gICAgICAgICAgICAgICAgICAgIGlmICh0LmRhc1NvdXJjZS5jb2xsYXBzZVN1cGVyR3JvdXBzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYnVtcFN0YXR1cyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVtcFN0YXR1cyA9ICF0LmJ1bXBlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHQubWVyZ2VDb25maWcoe2J1bXBlZDogYnVtcFN0YXR1c30pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmICghZXYuY3RybEtleSAmJiAhZXYubWV0YUtleSkge1xuICAgICAgICAgICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpOyBldi5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHZhciBzdCA9IHRoaXNCLmdldFNlbGVjdGVkVGllcigpO1xuICAgICAgICAgICAgICAgIGlmIChzdCA8IDApIHJldHVybjtcbiAgICAgICAgICAgICAgICB2YXIgdCA9IHRoaXNCLnRpZXJzW3N0XTtcblxuICAgICAgICAgICAgICAgIGlmICh0LmRhc1NvdXJjZS5jb2xsYXBzZVN1cGVyR3JvdXBzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChidW1wU3RhdHVzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1bXBTdGF0dXMgPSAhdC5idW1wZWQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdC5tZXJnZUNvbmZpZyh7YnVtcGVkOiBidW1wU3RhdHVzfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGV2LmtleUNvZGUgPT0gNzcgfHwgZXYua2V5Q29kZSA9PSAxMDkpIHsgLy8gbVxuICAgICAgICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7IGV2LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBpZiAoKGV2LmN0cmxLZXkgfHwgZXYubWV0YUtleSkgJiYgdGhpc0Iuc2VsZWN0ZWRUaWVycy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgdGhpc0IubWVyZ2VTZWxlY3RlZFRpZXJzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoZXYua2V5Q29kZSA9PSA2OCB8fCBldi5rZXlDb2RlID09IDEwMCkgeyAvLyBkXG4gICAgICAgICAgICBldi5zdG9wUHJvcGFnYXRpb24oKTsgZXYucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGlmIChldi5jdHJsS2V5IHx8IGV2Lm1ldGFLZXkpIHtcbiAgICAgICAgICAgICAgICB2YXIgc3QgPSB0aGlzQi5nZXRTZWxlY3RlZFRpZXIoKTtcbiAgICAgICAgICAgICAgICBpZiAoc3QgPCAwKSByZXR1cm47XG4gICAgICAgICAgICAgICAgdGhpc0IuYWRkVGllcih0aGlzQi50aWVyc1tzdF0uZGFzU291cmNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChldi5rZXlDb2RlID09IDgwIHx8IGV2LmtleUNvZGUgPT0gMTEyKSB7IC8vIHBcbiAgICAgICAgICAgIGlmIChldi5jdHJsS2V5IHx8IGV2Lm1ldGFLZXkpIHtcbiAgICAgICAgICAgICAgICAvLyBOZWVkIHRvIGJlIGNhcmVmdWwgYmVjYXVzZSBvcmRlciBvZiB0aWVycyBjb3VsZCBjaGFuZ2VcbiAgICAgICAgICAgICAgICAvLyBvbmNlIHdlIHN0YXJ0IHVwZGF0aW5nIHBpbm5pbmcuXG4gICAgICAgICAgICAgICAgdmFyIHR0ID0gW107XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgc3QgPSAwOyBzdCA8IHRoaXNCLnNlbGVjdGVkVGllcnMubGVuZ3RoOyArK3N0KSB7XG4gICAgICAgICAgICAgICAgICAgIHR0LnB1c2godGhpc0IudGllcnNbdGhpc0Iuc2VsZWN0ZWRUaWVyc1tzdF1dKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgdGkgPSAwOyB0aSA8IHR0Lmxlbmd0aDsgKyt0aSkge1xuICAgICAgICAgICAgICAgICAgICB0dFt0aV0ubWVyZ2VDb25maWcoe3Bpbm5lZDogIXR0W3RpXS5waW5uZWR9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygna2V5OiAnICsgZXYua2V5Q29kZSArICc7IGNoYXI6ICcgKyBldi5jaGFyQ29kZSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5icm93c2VySG9sZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgZnVuY3Rpb24oZXYpIHtcbiAgICAgICAgdGhpc0IuYnJvd3NlckhvbGRlci5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywga2V5SGFuZGxlciwgZmFsc2UpO1xuICAgIH0sIGZhbHNlKTtcbiAgICB0aGlzLmJyb3dzZXJIb2xkZXIuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgIHRoaXNCLmJyb3dzZXJIb2xkZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGtleUhhbmRsZXIsIGZhbHNlKTtcbiAgICB9LCBmYWxzZSk7XG5cbiAgICAvLyBQb3B1cCBzdXBwb3J0IChkb2VzIHRoaXMgcmVhbGx5IGJlbG9uZyBoZXJlPyBGSVhNRSlcbiAgICB0aGlzLmhQb3B1cEhvbGRlciA9IG1ha2VFbGVtZW50KCdkaXYnKTtcbiAgICB0aGlzLmhQb3B1cEhvbGRlci5zdHlsZVsnZm9udC1mYW1pbHknXSA9ICdoZWx2ZXRpY2EnO1xuICAgIHRoaXMuaFBvcHVwSG9sZGVyLnN0eWxlWydmb250LXNpemUnXSA9ICcxMnB0JztcbiAgICB0aGlzLmhQb3B1cEhvbGRlci5jbGFzc0xpc3QuYWRkKCdkYWxsaWFuY2UnKTtcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMuaFBvcHVwSG9sZGVyKTtcblxuICAgIGZvciAodmFyIHQgPSAwOyB0IDwgdGhpcy5zb3VyY2VzLmxlbmd0aDsgKyt0KSB7XG4gICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLnNvdXJjZXNbdF07XG4gICAgICAgIGlmICghc291cmNlKVxuICAgICAgICAgICAgY29udGludWU7XG5cbiAgICAgICAgdmFyIGNvbmZpZyA9IHt9O1xuICAgICAgICBpZiAodGhpcy5yZXN0b3JlZENvbmZpZ3MpIHtcbiAgICAgICAgICAgIGNvbmZpZyA9IHRoaXMucmVzdG9yZWRDb25maWdzW3RdO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFzb3VyY2UuZGlzYWJsZWQpIHtcbiAgICAgICAgICAgIHRoaXMubWFrZVRpZXIoc291cmNlLCBjb25maWcpLnRoZW4oZnVuY3Rpb24odGllcikge1xuICAgICAgICAgICAgICAgIHRoaXNCLnJlZnJlc2hUaWVyKHRpZXIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IHNvdXJjZSBvZiB0aGlzLnNlYXJjaE9ubHlTb3VyY2VzKSB7XG4gICAgICAgIGlmICghc291cmNlLmRpc2FibGVkKSB7XG4gICAgICAgICAgICBjb25zdCB7ZmVhdHVyZXN9ID0gdGhpcy5jcmVhdGVTb3VyY2VzKHNvdXJjZSk7XG5cbiAgICAgICAgICAgIGlmIChmZWF0dXJlcykge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VhcmNoT25seVNvdXJjZUhvbGRlcnMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIGRhc1NvdXJjZTogc291cmNlLFxuICAgICAgICAgICAgICAgICAgICBmZWF0dXJlU291cmNlOiBmZWF0dXJlc1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMub25GaXJzdFJlbmRlcikge1xuICAgICAgICBQcm9taXNlLmFsbCh0aGlzLnRpZXJzLm1hcCh0ID0+IHQuZmlyc3RSZW5kZXJQcm9taXNlKSlcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHRoaXMub25GaXJzdFJlbmRlcigpKVxuICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpO1xuICAgIH1cblxuICAgIHRoaXNCLl9lbnN1cmVUaWVyc0dyb3VwZWQoKTtcbiAgICB0aGlzQi5hcnJhbmdlVGllcnMoKTtcbiAgICB0aGlzQi5yZW9yZGVyVGllcnMoKTtcblxuXG4gICAgdmFyIHNzID0gdGhpcy5nZXRTZXF1ZW5jZVNvdXJjZSgpO1xuICAgIGlmIChzcykge1xuICAgICAgICBzcy5nZXRTZXFJbmZvKHRoaXMuY2hyLCBmdW5jdGlvbihzaSkge1xuICAgICAgICAgICAgaWYgKHNpKVxuICAgICAgICAgICAgICAgIHRoaXNCLmN1cnJlbnRTZXFNYXggPSBzaS5sZW5ndGg7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgdGhpc0IuY3VycmVudFNlcU1heCA9IC0xO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICB0aGlzLnF1ZXJ5UmVnaXN0cnkoKTtcbiAgICBmb3IgKHZhciBtIGluIHRoaXMuY2hhaW5zKSB7XG4gICAgICAgIHRoaXMucXVlcnlSZWdpc3RyeShtLCB0cnVlKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5odWJzKSB7XG4gICAgICAgIGZvciAodmFyIGhpID0gMDsgaGkgPCB0aGlzLmh1YnMubGVuZ3RoOyArK2hpKSB7XG4gICAgICAgICAgICB2YXIgaGMgPSB0aGlzLmh1YnNbaGldO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBoYyA9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIGhjID0ge3VybDogaGN9O1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgKGZ1bmN0aW9uKGhjKSB7XG4gICAgICAgICAgICAgICAgY29ubmVjdFRyYWNrSHViKGhjLnVybCwgZnVuY3Rpb24oaHViLCBlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZGI7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGMuZ2Vub21lKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRkYiA9IGh1Yi5nZW5vbWVzW2hjLmdlbm9tZV07XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGRiID0gaHViLmdlbm9tZXNbdGhpc0IuY29vcmRTeXN0ZW0udWNzY05hbWVdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGRiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGhjLm1hcHBpbmcpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRkYi5tYXBwaW5nID0gaGMubWFwcGluZztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGMubGFiZWwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRkYi5odWIuYWx0TGFiZWwgPSBoYy5sYWJlbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNCLmh1Yk9iamVjdHMucHVzaCh0ZGIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwgaGMpO1xuICAgICAgICAgICAgfSkoaGMpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZnVsbFNjcmVlbikge1xuICAgICAgICB0aGlzLnNldEZ1bGxTY3JlZW5IZWlnaHQoKTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuc3RhdHVzUmVzdG9yZWQgJiYgdGhpcy5zdG9yZVN0YXR1cykge1xuICAgICAgICB0aGlzLnN0b3JlU3RhdHVzKCk7XG4gICAgfVxuXG4gICAgdGhpc0Iuc2V0TG9jYXRpb24odGhpcy5jaHIsIHRoaXMudmlld1N0YXJ0LCB0aGlzLnZpZXdFbmQsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpc0Iuc2V0U2VsZWN0ZWRUaWVyKDEpO1xuICAgICAgICAvLyBQaW5nIGFueSBpbml0IGxpc3RlbmVycy5cbiAgICAgICAgZm9yICh2YXIgaWkgPSAwOyBpaSA8IHRoaXNCLmluaXRMaXN0ZW5lcnMubGVuZ3RoOyArK2lpKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHRoaXNCLmluaXRMaXN0ZW5lcnNbaWldLmNhbGwodGhpc0IpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG59XG5cbi8vXG4vLyBUb3VjaCBldmVudCBzdXBwb3J0XG4vL1xuXG5Ccm93c2VyLnByb3RvdHlwZS50b3VjaFN0YXJ0SGFuZGxlciA9IGZ1bmN0aW9uKGV2KSB7XG4gICAgLy8gRXZlbnRzIG5vdCBjb25zdW1lZCBzbyB0aGV5IGNhbiBiZSBpbnRlcnByZXR0ZWQgYXMgY2xpY2tzIGFzIHdlbGwuXG5cbiAgICB0aGlzLnRvdWNoT3JpZ2luWCA9IGV2LnRvdWNoZXNbMF0ucGFnZVg7XG4gICAgdGhpcy50b3VjaE9yaWdpblkgPSBldi50b3VjaGVzWzBdLnBhZ2VZO1xuICAgIGlmIChldi50b3VjaGVzLmxlbmd0aCA9PSAyKSB7XG4gICAgICAgIHZhciBzZXAgPSBNYXRoLmFicyhldi50b3VjaGVzWzBdLnBhZ2VYIC0gZXYudG91Y2hlc1sxXS5wYWdlWCk7XG4gICAgICAgIHRoaXMuem9vbWluZyA9IHRydWU7XG4gICAgICAgIHRoaXMuem9vbUxhc3RTZXAgPSB0aGlzLnpvb21Jbml0aWFsU2VwID0gc2VwO1xuICAgICAgICB0aGlzLnpvb21Jbml0aWFsU2NhbGUgPSB0aGlzLnNjYWxlO1xuICAgIH1cbn1cblxuQnJvd3Nlci5wcm90b3R5cGUudG91Y2hNb3ZlSGFuZGxlciA9IGZ1bmN0aW9uKGV2KSB7XG4gICAgLy8gVGhlc2UgZXZlbnRzICphcmUqIGNvbnN1bWVkIHRvIGVuc3VyZSB3ZSBuZXZlciBnZXQgYW55IGRyYWdnaW5nIHRoYXRcbiAgICAvLyB3ZSBkb24ndCBtYW5hZ2Ugb3Vyc2VsdmVzLlxuXG4gICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7IGV2LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICBpZiAoZXYudG91Y2hlcy5sZW5ndGggPT0gMSkge1xuICAgICAgICB2YXIgdG91Y2hYID0gZXYudG91Y2hlc1swXS5wYWdlWDtcbiAgICAgICAgdmFyIHRvdWNoWSA9IGV2LnRvdWNoZXNbMF0ucGFnZVk7XG4gICAgICAgIGlmICh0aGlzLnRvdWNoT3JpZ2luWCAmJiB0b3VjaFggIT0gdGhpcy50b3VjaE9yaWdpblgpIHtcbiAgICAgICAgICAgIHRoaXMubW92ZSh0b3VjaFggLSB0aGlzLnRvdWNoT3JpZ2luWCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMudG91Y2hPcmlnaW5ZICYmIHRvdWNoWSAhPSB0aGlzLnRvdWNoT3JpZ2luWSkge1xuICAgICAgICAgICAgdGhpcy50aWVySG9sZGVyLnNjcm9sbFRvcCAtPSAodG91Y2hZIC0gdGhpcy50b3VjaE9yaWdpblkpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudG91Y2hPcmlnaW5YID0gdG91Y2hYO1xuICAgICAgICB0aGlzLnRvdWNoT3JpZ2luWSA9IHRvdWNoWTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuem9vbWluZyAmJiBldi50b3VjaGVzLmxlbmd0aCA9PSAyKSB7XG4gICAgICAgIHZhciBzZXAgPSBNYXRoLmFicyhldi50b3VjaGVzWzBdLnBhZ2VYIC0gZXYudG91Y2hlc1sxXS5wYWdlWCk7XG4gICAgICAgIGlmIChzZXAgIT0gdGhpcy56b29tTGFzdFNlcCkge1xuICAgICAgICAgICAgdmFyIGNwID0gKGV2LnRvdWNoZXNbMF0ucGFnZVggKyBldi50b3VjaGVzWzFdLnBhZ2VYKS8yO1xuICAgICAgICAgICAgdmFyIHNjcCA9IHRoaXMudmlld1N0YXJ0ICsgKGNwL3RoaXMuc2NhbGUpfDBcbiAgICAgICAgICAgIHRoaXMuc2NhbGUgPSB0aGlzLnpvb21Jbml0aWFsU2NhbGUgKiAoc2VwL3RoaXMuem9vbUluaXRpYWxTZXApO1xuICAgICAgICAgICAgdGhpcy52aWV3U3RhcnQgPSBzY3AgLSAoY3AvdGhpcy5zY2FsZSl8MDtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy50aWVycy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgIHRpZXJzW2ldLmdldFJlbmRlcmVyKCkuZHJhd1RpZXIodGllcnNbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuem9vbUxhc3RTZXAgPSBzZXA7XG4gICAgfVxufVxuXG5Ccm93c2VyLnByb3RvdHlwZS50b3VjaEVuZEhhbmRsZXIgPSBmdW5jdGlvbihldikge1xufVxuXG5Ccm93c2VyLnByb3RvdHlwZS50b3VjaENhbmNlbEhhbmRsZXIgPSBmdW5jdGlvbihldikge1xufVxuXG5cbkJyb3dzZXIucHJvdG90eXBlLm1ha2VUaWVyID0gZnVuY3Rpb24oc291cmNlLCBjb25maWcpIHtcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZWFsTWFrZVRpZXIoc291cmNlLCBjb25maWcpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ0Vycm9yIGluaXRpYWxpemluZycsIHNvdXJjZSk7XG4gICAgICAgIGNvbnNvbGUubG9nKGUuc3RhY2sgfHwgZSk7XG4gICAgfVxufVxuXG5Ccm93c2VyLnByb3RvdHlwZS5yZWFsTWFrZVRpZXIgPSBmdW5jdGlvbihzb3VyY2UsIGNvbmZpZykge1xuICAgIHZhciB0aGlzQiA9IHRoaXM7XG4gICAgdmFyIGJhY2tncm91bmQgPSBudWxsO1xuICAgIGlmICh0aGlzLnRpZXJCYWNrZ3JvdW5kQ29sb3JzKSB7XG4gICAgICAgIGJhY2tncm91bmQgPSB0aGlzLnRpZXJCYWNrZ3JvdW5kQ29sb3JzW3RoaXMudGllcnMubGVuZ3RoICUgdGhpcy50aWVyQmFja2dyb3VuZENvbG9ycy5sZW5ndGhdO1xuICAgIH1cblxuICAgIHZhciB0aWVyID0gbmV3IERhc1RpZXIodGhpcywgc291cmNlLCBjb25maWcsIGJhY2tncm91bmQpO1xuICAgIHRpZXIub29yaWdpbiA9IHRoaXMudmlld1N0YXJ0XG5cbiAgICB2YXIgaXNEcmFnZ2luZyA9IGZhbHNlO1xuICAgIHZhciBkcmFnT3JpZ2luLCBkcmFnTW92ZU9yaWdpbjtcbiAgICB2YXIgaG92ZXJUaW1lb3V0O1xuXG4gICAgdmFyIGZlYXR1cmVMb29rdXAgPSBmdW5jdGlvbihyeCwgcnkpIHtcbiAgICAgICAgdmFyIHN0ID0gdGllci5zdWJ0aWVycztcbiAgICAgICAgaWYgKCFzdCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHN0aSA9IDA7XG4gICAgICAgIHJ5IC09IHRpZXIucGFkZGluZzs7XG4gICAgICAgIHdoaWxlIChzdGkgPCBzdC5sZW5ndGggJiYgcnkgPiBzdFtzdGldLmhlaWdodCAmJiBzdGkgPCAoc3QubGVuZ3RoIC0gMSkpIHtcbiAgICAgICAgICAgIHJ5ID0gcnkgLSBzdFtzdGldLmhlaWdodCAtIHRpZXIucGFkZGluZztcbiAgICAgICAgICAgICsrc3RpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzdGkgPj0gc3QubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZ2x5cGhzID0gc3Rbc3RpXS5nbHlwaHM7XG4gICAgICAgIHZhciB2aWV3Q2VudGVyID0gKHRoaXNCLnZpZXdTdGFydCArIHRoaXNCLnZpZXdFbmQpLzI7XG4gICAgICAgIHZhciBvZmZzZXQgPSAodGllci5nbHlwaENhY2hlT3JpZ2luIC0gdGhpc0Iudmlld1N0YXJ0KSp0aGlzQi5zY2FsZTtcbiAgICAgICAgcnggLT0gb2Zmc2V0O1xuXG4gICAgICAgIHJldHVybiBnbHlwaExvb2t1cChnbHlwaHMsIHJ4LCByeSk7XG4gICAgfVxuXG4gICAgdmFyIGRyYWdNb3ZlSGFuZGxlciA9IGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7IGV2LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICB2YXIgcnggPSBldi5jbGllbnRYO1xuICAgICAgICBpZiAocnggIT0gZHJhZ01vdmVPcmlnaW4pIHtcbiAgICAgICAgICAgIHRoaXNCLm1vdmUoKHJ4IC0gZHJhZ01vdmVPcmlnaW4pLCB0cnVlKTtcbiAgICAgICAgICAgIGRyYWdNb3ZlT3JpZ2luID0gcng7XG4gICAgICAgIH1cbiAgICAgICAgdGhpc0IuaXNEcmFnZ2luZyA9IHRydWU7XG4gICAgfVxuXG4gICAgdmFyIGRyYWdVcEhhbmRsZXIgPSBmdW5jdGlvbihldikge1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgZHJhZ01vdmVIYW5kbGVyLCB0cnVlKTtcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBkcmFnVXBIYW5kbGVyLCB0cnVlKTtcbiAgICAgICAgdGhpc0IubW92ZSgoZXYuY2xpZW50WCAtIGRyYWdNb3ZlT3JpZ2luKSk7IC8vIFNuYXAgYmFjayAoRklYTUU6IGNvbnNpZGVyIGFuaW1hdGlvbilcbiAgICB9XG5cblxuICAgIHRpZXIudmlld3BvcnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgZnVuY3Rpb24oZXYpIHtcbiAgICAgICAgdGhpc0IuYnJvd3NlckhvbGRlci5mb2N1cygpO1xuICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB2YXIgYnIgPSB0aWVyLnJvdy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgdmFyIHJ4ID0gZXYuY2xpZW50WCwgcnkgPSBldi5jbGllbnRZO1xuXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBkcmFnTW92ZUhhbmRsZXIsIHRydWUpO1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIGRyYWdVcEhhbmRsZXIsIHRydWUpO1xuICAgICAgICBkcmFnT3JpZ2luID0gZHJhZ01vdmVPcmlnaW4gPSByeDtcbiAgICAgICAgdGhpc0IuaXNEcmFnZ2luZyA9IGZhbHNlOyAvLyBOb3QgZHJhZ2dpbmcgdW50aWwgYSBtb3ZlbWVudCBldmVudCBhcnJpdmVzLlxuICAgIH0sIGZhbHNlKTtcblxuICAgIHRpZXIudmlld3BvcnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgZnVuY3Rpb24oZXYpIHtcbiAgICAgICAgdmFyIGJyID0gdGllci5yb3cuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIHZhciByeCA9IGV2LmNsaWVudFggLSBici5sZWZ0LCByeSA9IGV2LmNsaWVudFkgLSBici50b3A7XG5cbiAgICAgICAgdmFyIGhpdCA9IGZlYXR1cmVMb29rdXAocngsIHJ5KTtcbiAgICAgICAgaWYgKGhpdCAmJiBoaXQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdGllci5yb3cuc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGllci5yb3cuc3R5bGUuY3Vyc29yID0gJ2RlZmF1bHQnO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGhvdmVyVGltZW91dCkge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGhvdmVyVGltZW91dCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNEcmFnZ2luZykge1xuICAgICAgICAgICAgLy8gaWYgKHRpZXIuZGFzU291cmNlLnRpZXJfdHlwZSAhPT0gJ3NlcXVlbmNlJyAmJiByeCAhPSBkcmFnTW92ZU9yaWdpbikge1xuICAgICAgICAgICAgLy8gICAgdGhpc0IubW92ZSgocnggLSBkcmFnTW92ZU9yaWdpbikpO1xuICAgICAgICAgICAgLy8gICAgZHJhZ01vdmVPcmlnaW4gPSByeDtcbiAgICAgICAgICAgIC8vIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGhvdmVyVGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdmFyIGhpdCA9IGZlYXR1cmVMb29rdXAocngsIHJ5KTtcbiAgICAgICAgICAgICAgICBpZiAoaGl0ICYmIGhpdC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXNCLm5vdGlmeUZlYXR1cmVIb3ZlcihldiwgaGl0W2hpdC5sZW5ndGggLSAxXSwgaGl0LCB0aWVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCAxMDAwKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgdmFyIGRvdWJsZUNsaWNrVGltZW91dCA9IG51bGw7XG4gICAgdGllci52aWV3cG9ydC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgZnVuY3Rpb24oZXYpIHtcbiAgICAgICAgdmFyIGJyID0gdGllci5yb3cuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIHZhciByeCA9IGV2LmNsaWVudFggLSBici5sZWZ0LCByeSA9IGV2LmNsaWVudFkgLSBici50b3A7XG5cbiAgICAgICAgdmFyIGhpdCA9IGZlYXR1cmVMb29rdXAocngsIHJ5KTtcbiAgICAgICAgaWYgKGhpdCAmJiBoaXQubGVuZ3RoID4gMCAmJiAhdGhpc0IuaXNEcmFnZ2luZykge1xuICAgICAgICAgICAgaWYgKGRvdWJsZUNsaWNrVGltZW91dCkge1xuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChkb3VibGVDbGlja1RpbWVvdXQpO1xuICAgICAgICAgICAgICAgIGRvdWJsZUNsaWNrVGltZW91dCA9IG51bGw7XG4gICAgICAgICAgICAgICAgdGhpc0IuZmVhdHVyZURvdWJsZUNsaWNrKGhpdCwgcngsIHJ5KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZG91YmxlQ2xpY2tUaW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgZG91YmxlQ2xpY2tUaW1lb3V0ID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgdGhpc0Iubm90aWZ5RmVhdHVyZShldiwgaGl0W2hpdC5sZW5ndGgtMV0sIGhpdCwgdGllcik7XG4gICAgICAgICAgICAgICAgfSwgNTAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzQi5pc0RyYWdnaW5nICYmIHJ4ICE9IGRyYWdPcmlnaW4gJiYgdGllci5zZXF1ZW5jZVNvdXJjZSkge1xuICAgICAgICAgICAgdmFyIGEgPSB0aGlzQi52aWV3U3RhcnQgKyAocngvdGhpc0Iuc2NhbGUpO1xuICAgICAgICAgICAgdmFyIGIgPSB0aGlzQi52aWV3U3RhcnQgKyAoZHJhZ09yaWdpbi90aGlzQi5zY2FsZSk7XG5cbiAgICAgICAgICAgIHZhciBtaW4sIG1heDtcbiAgICAgICAgICAgIGlmIChhIDwgYikge1xuICAgICAgICAgICAgICAgIG1pbiA9IGF8MDsgbWF4ID0gYnwwO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBtaW4gPSBifDA7IG1heCA9IGF8MDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpc0Iubm90aWZ5UmVnaW9uU2VsZWN0KHRoaXNCLmNociwgbWluLCBtYXgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXNCLmlzRHJhZ2dpbmcgPSBmYWxzZTtcbiAgICB9LCBmYWxzZSk7XG5cbiAgICB0aWVyLnZpZXdwb3J0LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3V0JywgZnVuY3Rpb24oZXYpIHtcbiAgICAgICAgaXNEcmFnZ2luZyA9IGZhbHNlO1xuICAgIH0pO1xuXG4gICAgdGllci5yZW1vdmVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldikge1xuICAgICAgICBldi5zdG9wUHJvcGFnYXRpb24oKTsgZXYucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZm9yICh2YXIgdGkgPSAwOyB0aSA8IHRoaXNCLnRpZXJzLmxlbmd0aDsgKyt0aSkge1xuICAgICAgICAgICAgaWYgKHRoaXNCLnRpZXJzW3RpXSA9PT0gdGllcikge1xuICAgICAgICAgICAgICAgIHRoaXNCLnJlbW92ZVRpZXIoe2luZGV4OiB0aX0pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSwgZmFsc2UpO1xuICAgIHRpZXIubmFtZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpOyBldi5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgIGlmIChldi5zaGlmdEtleSkge1xuICAgICAgICAgICAgdmFyIGhpdFRpZXIgPSAtMTtcbiAgICAgICAgICAgIGZvciAodmFyIHRpID0gMDsgdGkgPCB0aGlzQi50aWVycy5sZW5ndGg7ICsrdGkpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpc0IudGllcnNbdGldID09PSB0aWVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGhpdFRpZXIgPSB0aTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGhpdFRpZXIgPj0gMCkge1xuICAgICAgICAgICAgICAgIHZhciBpID0gdGhpc0Iuc2VsZWN0ZWRUaWVycy5pbmRleE9mKGhpdFRpZXIpO1xuICAgICAgICAgICAgICAgIGlmIChpID49IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpc0Iuc2VsZWN0ZWRUaWVycy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpc0Iuc2VsZWN0ZWRUaWVycy5wdXNoKGhpdFRpZXIpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzQi5zZWxlY3RlZFRpZXJzLnNvcnQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpc0IubWFya1NlbGVjdGVkVGllcnMoKTtcbiAgICAgICAgICAgICAgICB0aGlzQi5ub3RpZnlUaWVyU2VsZWN0aW9uKCk7XG5cbiAgICAgICAgICAgICAgICBpZiAodGhpc0Iuc2VsZWN0ZWRUaWVycy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXNCLmJyb3dzZXJIb2xkZXIuZm9jdXMoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzQi5ub3RpZnlUaWVyU2VsZWN0aW9uV3JhcCgtMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZm9yICh2YXIgdGkgPSAwOyB0aSA8IHRoaXNCLnRpZXJzLmxlbmd0aDsgKyt0aSkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzQi50aWVyc1t0aV0gPT09IHRpZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpc0IuYnJvd3NlckhvbGRlci5mb2N1cygpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpc0Iuc2VsZWN0ZWRUaWVycy5sZW5ndGggIT0gMSB8fCB0aGlzQi5zZWxlY3RlZFRpZXJzWzBdICE9IHRpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzQi5zZXRTZWxlY3RlZFRpZXIodGkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIXRpZXIuaW5mb1Zpc2libGUpIHtcbiAgICAgICAgICAgICAgICB0aWVyLmluZm9FbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICAgICAgICAgIHRpZXIudXBkYXRlSGVpZ2h0KCk7XG4gICAgICAgICAgICAgICAgdGllci5pbmZvVmlzaWJsZSA9IHRydWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRpZXIuaW5mb0VsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICB0aWVyLnVwZGF0ZUhlaWdodCgpO1xuICAgICAgICAgICAgICAgIHRpZXIuaW5mb1Zpc2libGUgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sIGZhbHNlKTtcbiAgICB0aWVyLmJ1bXBCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldikge1xuICAgICAgICBldi5zdG9wUHJvcGFnYXRpb24oKTsgZXYucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdmFyIGJ1bXBTdGF0dXM7XG4gICAgICAgIHZhciB0ID0gdGllcjtcbiAgICAgICAgaWYgKHQuZGFzU291cmNlLmNvbGxhcHNlU3VwZXJHcm91cHMpIHtcbiAgICAgICAgICAgIGlmIChidW1wU3RhdHVzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBidW1wU3RhdHVzID0gIXQuYnVtcGVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdC5tZXJnZUNvbmZpZyh7YnVtcGVkOiBidW1wU3RhdHVzfSk7XG4gICAgICAgIH1cbiAgICB9LCBmYWxzZSk7XG5cblxuICAgIHZhciBkcmFnTGFiZWw7XG4gICAgdmFyIGRyYWdUaWVySG9sZGVyO1xuICAgIHZhciBkcmFnVGllckhvbGRlclNjcm9sbExpbWl0O1xuICAgIHZhciB0aWVyT3JkaW5hbDtcbiAgICB2YXIgeUF0TGFzdFJlb3JkZXI7XG4gICAgdmFyIHRpZXJzV2VyZVJlb3JkZXJlZCA9IGZhbHNlO1xuXG4gICAgdmFyIGxhYmVsRHJhZ0hhbmRsZXIgPSBmdW5jdGlvbihldikge1xuICAgICAgICB2YXIgbGFiZWwgPSB0aWVyLmxhYmVsO1xuXG4gICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpOyBldi5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBpZiAoIWRyYWdMYWJlbCkge1xuICAgICAgICAgICAgaWYgKHRpZXIucGlubmVkKSB7XG4gICAgICAgICAgICAgICAgZHJhZ1RpZXJIb2xkZXIgPSB0aGlzQi5waW5uZWRUaWVySG9sZGVyO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBkcmFnVGllckhvbGRlciA9IHRoaXNCLnRpZXJIb2xkZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkcmFnVGllckhvbGRlclNjcm9sbExpbWl0ID0gZHJhZ1RpZXJIb2xkZXIuc2Nyb2xsSGVpZ2h0IC0gZHJhZ1RpZXJIb2xkZXIub2Zmc2V0SGVpZ2h0O1xuXG4gICAgICAgICAgICBkcmFnTGFiZWwgPSBsYWJlbC5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgICAgICAgICBkcmFnTGFiZWwuc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInO1xuICAgICAgICAgICAgZHJhZ1RpZXJIb2xkZXIuYXBwZW5kQ2hpbGQoZHJhZ0xhYmVsKTtcbiAgICAgICAgICAgIGxhYmVsLnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJztcblxuICAgICAgICAgICAgZm9yICh2YXIgdGkgPSAwOyB0aSA8IHRoaXNCLnRpZXJzLmxlbmd0aDsgKyt0aSkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzQi50aWVyc1t0aV0gPT09IHRpZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGllck9yZGluYWwgPSB0aTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB5QXRMYXN0UmVvcmRlciA9IGV2LmNsaWVudFk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgaG9sZGVyQkNSID0gZHJhZ1RpZXJIb2xkZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIGRyYWdMYWJlbC5zdHlsZS5sZWZ0ID0gKGxhYmVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQgLSBob2xkZXJCQ1IubGVmdCkgKyAncHgnO1xuICAgICAgICBkcmFnTGFiZWwuc3R5bGUudG9wID0gKGV2LmNsaWVudFkgLSBob2xkZXJCQ1IudG9wICsgZHJhZ1RpZXJIb2xkZXIuc2Nyb2xsVG9wIC0gMTApICsgJ3B4JztcblxuICAgICAgICB2YXIgcHR5ID0gZXYuY2xpZW50WSAtIGhvbGRlckJDUi50b3AgKyBkcmFnVGllckhvbGRlci5zY3JvbGxUb3A7XG4gICAgICAgIGZvciAodmFyIHRpID0gMDsgdGkgPCB0aGlzQi50aWVycy5sZW5ndGg7ICsrdGkpIHtcbiAgICAgICAgICAgIHZhciB0dCA9IHRoaXNCLnRpZXJzW3RpXTtcbiAgICAgICAgICAgIGlmICh0dC5waW5uZWQgXiB0aWVyLnBpbm5lZClcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcblxuICAgICAgICAgICAgdmFyIHR0ciA9IHR0LnJvdy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgIHB0eSAtPSAodHRyLmJvdHRvbSAtIHR0ci50b3ApO1xuICAgICAgICAgICAgaWYgKHB0eSA8IDApIHtcbiAgICAgICAgICAgICAgICBpZiAodGkgPCB0aWVyT3JkaW5hbCAmJiBldi5jbGllbnRZIDwgeUF0TGFzdFJlb3JkZXIgfHwgdGkgPiB0aWVyT3JkaW5hbCAmJiBldi5jbGllbnRZID4geUF0TGFzdFJlb3JkZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpc0Iud2l0aFByZXNlcnZlZFNlbGVjdGlvbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNCLnRpZXJzLnNwbGljZSh0aWVyT3JkaW5hbCwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzQi50aWVycy5zcGxpY2UodGksIDAsIHRpZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpc0IuX2Vuc3VyZVRpZXJzR3JvdXBlZCh0aSA+IHRpZXJPcmRpbmFsKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgdGl4ID0gMDsgdGl4IDwgdGhpc0IudGllcnMubGVuZ3RoOyArK3RpeClcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzQi50aWVyc1t0aXhdID09IHRpZXIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGllck9yZGluYWwgPSB0aXg7XG5cbiAgICAgICAgICAgICAgICAgICAgeUF0TGFzdFJlb3JkZXIgPSBldi5jbGllbnRZO1xuICAgICAgICAgICAgICAgICAgICB0aGlzQi5yZW9yZGVyVGllcnMoKTtcbiAgICAgICAgICAgICAgICAgICAgZHJhZ1RpZXJIb2xkZXIuYXBwZW5kQ2hpbGQoZHJhZ0xhYmVsKTsgLy8gQmVjYXVzZSByZW9yZGVyVGllcnMgcmVtb3ZlcyBhbGwgY2hpbGRyZW4uXG4gICAgICAgICAgICAgICAgICAgIHRpZXJzV2VyZVJlb3JkZXJlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGRyYWdMYWJlbC5vZmZzZXRUb3AgPCBkcmFnVGllckhvbGRlci5zY3JvbGxUb3ApIHtcbiAgICAgICAgICAgIGRyYWdUaWVySG9sZGVyLnNjcm9sbFRvcCAtPSAoZHJhZ1RpZXJIb2xkZXIuc2Nyb2xsVG9wIC0gZHJhZ0xhYmVsLm9mZnNldFRvcCk7XG4gICAgICAgIH0gZWxzZSBpZiAoKGRyYWdMYWJlbC5vZmZzZXRUb3AgKyBkcmFnTGFiZWwub2Zmc2V0SGVpZ2h0KSA+IChkcmFnVGllckhvbGRlci5zY3JvbGxUb3AgKyBkcmFnVGllckhvbGRlci5vZmZzZXRIZWlnaHQpKSB7XG4gICAgICAgICAgICBkcmFnVGllckhvbGRlci5zY3JvbGxUb3AgPSBNYXRoLm1pbihkcmFnVGllckhvbGRlci5zY3JvbGxUb3AgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRyYWdMYWJlbC5vZmZzZXRUb3AgKyBkcmFnTGFiZWwub2Zmc2V0SGVpZ2h0KSAtXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZHJhZ1RpZXJIb2xkZXIuc2Nyb2xsVG9wICsgZHJhZ1RpZXJIb2xkZXIub2Zmc2V0SGVpZ2h0KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdUaWVySG9sZGVyU2Nyb2xsTGltaXQpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHZhciBsYWJlbFJlbGVhc2VIYW5kbGVyID0gZnVuY3Rpb24oZXYpIHtcbiAgICAgICAgdmFyIGxhYmVsID0gdGllci5sYWJlbDtcblxuICAgICAgICBldi5zdG9wUHJvcGFnYXRpb24oKTsgZXYucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgaWYgKGRyYWdMYWJlbCkge1xuICAgICAgICAgICAgZHJhZ0xhYmVsLnN0eWxlLmN1cnNvciA9ICdhdXRvJztcbiAgICAgICAgICAgIGRyYWdUaWVySG9sZGVyLnJlbW92ZUNoaWxkKGRyYWdMYWJlbCk7XG4gICAgICAgICAgICBkcmFnTGFiZWwgPSBudWxsO1xuICAgICAgICAgICAgbGFiZWwuc3R5bGUudmlzaWJpbGl0eSA9ICd2aXNpYmxlJztcbiAgICAgICAgfVxuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBsYWJlbERyYWdIYW5kbGVyLCBmYWxzZSk7XG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBsYWJlbFJlbGVhc2VIYW5kbGVyLCBmYWxzZSk7XG5cbiAgICAgICAgaWYgKHRpZXJzV2VyZVJlb3JkZXJlZCkge1xuICAgICAgICAgICAgZm9yICh2YXIgdGkgPSAwOyB0aSA8IHRoaXNCLnRpZXJzLmxlbmd0aDsgKyt0aSkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzQi50aWVyc1t0aV0gPT0gdGllcikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzQi5zZXRTZWxlY3RlZFRpZXIodGkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzQi5ub3RpZnlUaWVyKFwicmVvcmRlcmVkXCIsIHRpZXIpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHRpZXIubGFiZWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgZnVuY3Rpb24oZXYpIHtcbiAgICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7IGV2LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHRpZXJzV2VyZVJlb3JkZXJlZCA9IGZhbHNlO1xuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBsYWJlbERyYWdIYW5kbGVyLCBmYWxzZSk7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBsYWJlbFJlbGVhc2VIYW5kbGVyLCBmYWxzZSk7XG4gICAgfSwgZmFsc2UpO1xuXG4gICAgdGhpcy50aWVycy5wdXNoKHRpZXIpOyAgLy8gTkIgdGhpcyBjdXJyZW50bHkgdGVsbHMgYW55IGV4dGFudCBrbm93blNwYWNlIGFib3V0IHRoZSBuZXcgdGllci5cblxuIC8vIGZldGNoZXMgc3R5bGVzaGVldFxuICAgIHJldHVybiB0aWVyLmluaXQoKS50aGVuKGZ1bmN0aW9uICh1cGRhdGVkVGllcikge1xuICAgICAgICB1cGRhdGVkVGllci5jdXJyZW50bHlIZWlnaHQgPSA1MDtcbiAgICAgICAgdGhpc0IudXBkYXRlSGVpZ2h0KCk7XG4gICAgICAgIHVwZGF0ZWRUaWVyLnVwZGF0ZUxhYmVsKCk7XG5cbiAgICAgICAgdGhpc0Iud2l0aFByZXNlcnZlZFNlbGVjdGlvbih0aGlzQi5fZW5zdXJlVGllcnNHcm91cGVkKTtcbiAgICAgICAgdXBkYXRlZFRpZXIuX3VwZGF0ZUZyb21Db25maWcoKTtcbiAgICAgICAgdGhpc0IucmVvcmRlclRpZXJzKCk7XG5cbiAgICAgICAgcmV0dXJuIHVwZGF0ZWRUaWVyO1xuICAgIH0pO1xufVxuXG5Ccm93c2VyLnByb3RvdHlwZS5yZW9yZGVyVGllcnMgPSBmdW5jdGlvbigpIHtcbiAgICByZW1vdmVDaGlsZHJlbih0aGlzLnRpZXJIb2xkZXIpO1xuICAgIHJlbW92ZUNoaWxkcmVuKHRoaXMucGlubmVkVGllckhvbGRlcik7XG4gICAgaWYgKHRoaXMuZGlzYWJsZVBpbm5pbmcpIHtcbiAgICAgICAgdGhpcy50aWVySG9sZGVyLmFwcGVuZENoaWxkKHRoaXMucnVsZXIpO1xuICAgICAgICB0aGlzLnRpZXJIb2xkZXIuYXBwZW5kQ2hpbGQodGhpcy5ydWxlcjIpO1xuICAgIH1cbiAgICB2YXIgaGFzUGlubmVkID0gZmFsc2U7XG4gICAgdmFyIHBpbm5lZFRpZXJzID0gW10sIHVucGlubmVkVGllcnMgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMudGllcnMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdmFyIHQgPSB0aGlzLnRpZXJzW2ldO1xuICAgICAgICB2YXIgdmlzaWJsZSA9IFsnc3ViJywnZHVtbXknXS5pbmRleE9mKHRoaXMudGllcnNbaV0uZGFzU291cmNlLnJlbmRlcmVyKSA9PT0gLTE7XG4gICAgICAgIGlmICh0LnBpbm5lZCAmJiAhdGhpcy5kaXNhYmxlUGlubmluZykge1xuICAgICAgICAgICAgcGlubmVkVGllcnMucHVzaCh0KTtcbiAgICAgICAgICAgIGlmICh2aXNpYmxlKVxuICAgICAgICAgICAgICAgIHRoaXMucGlubmVkVGllckhvbGRlci5hcHBlbmRDaGlsZCh0aGlzLnRpZXJzW2ldLnJvdyk7XG4gICAgICAgICAgICBoYXNQaW5uZWQgPSB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdW5waW5uZWRUaWVycy5wdXNoKHQpO1xuICAgICAgICAgICAgaWYgKHZpc2libGUpXG4gICAgICAgICAgICAgICAgdGhpcy50aWVySG9sZGVyLmFwcGVuZENoaWxkKHRoaXMudGllcnNbaV0ucm93KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMud2l0aFByZXNlcnZlZFNlbGVjdGlvbihmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy50aWVycy5zcGxpY2UoMCwgdGhpcy50aWVycy5sZW5ndGgpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBpbm5lZFRpZXJzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgdGhpcy50aWVycy5wdXNoKHBpbm5lZFRpZXJzW2ldKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB1bnBpbm5lZFRpZXJzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgdGhpcy50aWVycy5wdXNoKHVucGlubmVkVGllcnNbaV0pO1xuICAgIH0pO1xuXG4gICAgaWYgKGhhc1Bpbm5lZClcbiAgICAgICAgdGhpcy5waW5uZWRUaWVySG9sZGVyLmNsYXNzTGlzdC5hZGQoJ3RpZXItaG9sZGVyLXBpbm5lZC1mdWxsJyk7XG4gICAgZWxzZVxuICAgICAgICB0aGlzLnBpbm5lZFRpZXJIb2xkZXIuY2xhc3NMaXN0LnJlbW92ZSgndGllci1ob2xkZXItcGlubmVkLWZ1bGwnKTtcblxuICAgIHRoaXMuYXJyYW5nZVRpZXJzKCk7XG59XG5cbkJyb3dzZXIucHJvdG90eXBlLndpdGhQcmVzZXJ2ZWRTZWxlY3Rpb24gPSBmdW5jdGlvbihmKSB7XG4gICAgdmFyIHN0ID0gW107XG4gICAgZm9yICh2YXIgeGkgPSAwOyB4aSA8IHRoaXMuc2VsZWN0ZWRUaWVycy5sZW5ndGg7ICsreGkpIHtcbiAgICAgICAgc3QucHVzaCh0aGlzLnRpZXJzW3RoaXMuc2VsZWN0ZWRUaWVyc1t4aV1dKTtcbiAgICB9XG5cbiAgICBmLmNhbGwodGhpcyk7XG5cbiAgICB0aGlzLnNlbGVjdGVkVGllcnMgPSBbXTtcbiAgICBmb3IgKHZhciBzdGkgPSAwOyBzdGkgPCB0aGlzLnRpZXJzLmxlbmd0aDsgKytzdGkpIHtcbiAgICAgICAgaWYgKHN0LmluZGV4T2YodGhpcy50aWVyc1tzdGldKSA+PSAwKVxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZFRpZXJzLnB1c2goc3RpKTtcbiAgICB9XG59XG5cbkJyb3dzZXIucHJvdG90eXBlLnJlZnJlc2hUaWVyID0gZnVuY3Rpb24odGllciwgdGllckNhbGxiYWNrKSB7XG4gICAgdmFyIHJlbmRlcmVyID0gdGhpcy5nZXRUaWVyUmVuZGVyZXIodGllcik7XG4gICAgaWYgKHRpZXIuZGFzU291cmNlLnJlbmRlcmVyID09PSAnbXVsdGknKSB7XG4gICAgICAgIHJlbmRlcmVyLmRyYXdUaWVyKHRpZXIpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciByZW5kZXJDYWxsYmFjayA9IHRpZXJDYWxsYmFjayB8fCByZW5kZXJlci5yZW5kZXJUaWVyO1xuICAgICAgICBpZiAodGhpcy5rbm93blNwYWNlKSB7XG4gICAgICAgICAgICB0aGlzLmtub3duU3BhY2UuaW52YWxpZGF0ZSh0aWVyLCByZW5kZXJDYWxsYmFjayk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbkJyb3dzZXIucHJvdG90eXBlLmdldFRpZXJSZW5kZXJlciA9IGZ1bmN0aW9uKHRpZXIpIHtcbiAgICB2YXIgcmVuZGVyZXIgPSB0aWVyLmRhc1NvdXJjZS5yZW5kZXJlciB8fCB0aGlzLmRlZmF1bHRSZW5kZXJlcjtcbiAgICBpZiAodHlwZW9mKHJlbmRlcmVyKSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyZXJzW3JlbmRlcmVyXTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZihyZW5kZXJlci5yZW5kZXJUaWVyKSA9PT0gJ2Z1bmN0aW9uJyAmJlxuICAgICAgICAgICAgICAgdHlwZW9mKHJlbmRlcmVyLmRyYXdUaWVyKSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm4gcmVuZGVyZXI7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJUaWVyIGRvZXNuJ3QgaGF2ZSBhIHJlbmRlcmVyXCIpO1xuICAgIH1cbn1cblxuLyogSW50ZXJuYWwgdXNlIG9ubHksIGFzc3VtZXMgc2VsZWN0aW9uIGlzIGJlaW5nIG1hbmFnZWQgZWxzZXdoZXJlLi4uICovXG5cbkJyb3dzZXIucHJvdG90eXBlLl9lbnN1cmVUaWVyc0dyb3VwZWQgPSBmdW5jdGlvbihkb3duKSB7XG4gICAgdmFyIGdyb3VwZWRUaWVycyA9IHt9O1xuICAgIGZvciAodmFyIHRpID0gMDsgdGkgPCB0aGlzLnRpZXJzLmxlbmd0aDsgKyt0aSkge1xuICAgICAgICB2YXIgdCA9IHRoaXMudGllcnNbdGldO1xuICAgICAgICBpZiAodC5kYXNTb3VyY2UudGllckdyb3VwKSB7XG4gICAgICAgICAgICBwdXNobyhncm91cGVkVGllcnMsIHQuZGFzU291cmNlLnRpZXJHcm91cCwgdCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgbmV3VGllcnMgPSBbXTtcbiAgICBpZiAoZG93bilcbiAgICAgICAgdGhpcy50aWVycy5yZXZlcnNlKCk7XG4gICAgZm9yICh2YXIgdGkgPSAwOyB0aSA8IHRoaXMudGllcnMubGVuZ3RoOyArK3RpKSB7XG4gICAgICAgIHZhciB0ID0gdGhpcy50aWVyc1t0aV07XG4gICAgICAgIGlmICh0LmRhc1NvdXJjZS50aWVyR3JvdXApIHtcbiAgICAgICAgICAgIHZhciBudCA9IGdyb3VwZWRUaWVyc1t0LmRhc1NvdXJjZS50aWVyR3JvdXBdO1xuICAgICAgICAgICAgaWYgKG50KSB7XG4gICAgICAgICAgICAgICAgaWYgKGRvd24pXG4gICAgICAgICAgICAgICAgICAgIG50LnJldmVyc2UoKTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBudGkgPSAwOyBudGkgPCBudC5sZW5ndGg7ICsrbnRpKVxuICAgICAgICAgICAgICAgICAgICBuZXdUaWVycy5wdXNoKG50W250aV0pO1xuICAgICAgICAgICAgICAgIGdyb3VwZWRUaWVyc1t0LmRhc1NvdXJjZS50aWVyR3JvdXBdID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5ld1RpZXJzLnB1c2godCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGRvd24pXG4gICAgICAgIG5ld1RpZXJzLnJldmVyc2UoKTtcbiAgICB0aGlzLnRpZXJzLnNwbGljZSgwLCB0aGlzLnRpZXJzLmxlbmd0aCk7XG4gICAgZm9yICh2YXIgbnRpID0gMDsgbnRpIDwgbmV3VGllcnMubGVuZ3RoOyArK250aSlcbiAgICAgICAgdGhpcy50aWVycy5wdXNoKG5ld1RpZXJzW250aV0pO1xufVxuXG5Ccm93c2VyLnByb3RvdHlwZS5hcnJhbmdlVGllcnMgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgYXJyYW5nZWRUaWVycyA9IFtdO1xuICAgIHZhciBncm91cGVkVGllcnMgPSB7fTtcblxuICAgIGZvciAodmFyIHRpID0gMDsgdGkgPCB0aGlzLnRpZXJzLmxlbmd0aDsgKyt0aSkge1xuICAgICAgICB2YXIgdCA9IHRoaXMudGllcnNbdGldO1xuICAgICAgICBpZiAodC5waW5uZWQpIHtcbiAgICAgICAgICAgIGFycmFuZ2VkVGllcnMucHVzaCh0KTtcbiAgICAgICAgICAgIGlmICh0LmRhc1NvdXJjZS50aWVyR3JvdXApIHtcbiAgICAgICAgICAgICAgICBwdXNobyhncm91cGVkVGllcnMsIHQuZGFzU291cmNlLnRpZXJHcm91cCwgdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgIH1cbiAgICBmb3IgKHZhciB0aSA9IDA7IHRpIDwgdGhpcy50aWVycy5sZW5ndGg7ICsrdGkpIHtcbiAgICAgICAgdmFyIHQgPSB0aGlzLnRpZXJzW3RpXTtcbiAgICAgICAgaWYgKCF0LnBpbm5lZCkge1xuICAgICAgICAgICAgYXJyYW5nZWRUaWVycy5wdXNoKHQpO1xuICAgICAgICAgICAgaWYgKHQuZGFzU291cmNlLnRpZXJHcm91cCkge1xuICAgICAgICAgICAgICAgIHB1c2hvKGdyb3VwZWRUaWVycywgdC5kYXNTb3VyY2UudGllckdyb3VwLCB0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZvciAodmFyIGcgaW4gZ3JvdXBlZFRpZXJzKSB7XG4gICAgICAgIHZhciB0aWVycyA9IGdyb3VwZWRUaWVyc1tnXTtcbiAgICAgICAgdmFyIHRpZXJHcm91cCA9IHRoaXMudGllckdyb3Vwc1tnXTtcbiAgICAgICAgaWYgKCF0aWVyR3JvdXApIHtcbiAgICAgICAgICAgIHRpZXJHcm91cCA9IHtcbiAgICAgICAgICAgICAgICBlbGVtZW50OiBtYWtlRWxlbWVudChcbiAgICAgICAgICAgICAgICAgICAgJ2RpdicsXG4gICAgICAgICAgICAgICAgICAgIG1ha2VFbGVtZW50KCdzcGFuJywgZywge2NsYXNzTmFtZTogJ3RpZXItZ3JvdXAtbGFiZWwnfSksXG4gICAgICAgICAgICAgICAgICAgIHtjbGFzc05hbWU6IFwidGllci1ncm91cFwifSlcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLnRpZXJHcm91cHNbZ10gPSB0aWVyR3JvdXA7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGllckdyb3VwLmVsZW1lbnQucGFyZW50Tm9kZSlcbiAgICAgICAgICAgIHRpZXJHcm91cC5lbGVtZW50LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGllckdyb3VwLmVsZW1lbnQpO1xuXG4gICAgICAgIHZhciBob2xkZXIgPSB0aWVyc1swXS5waW5uZWQgPyB0aGlzLnBpbm5lZFRpZXJIb2xkZXIgOiB0aGlzLnRpZXJIb2xkZXI7XG4gICAgICAgIHZhciBtaW4gPSAxMDAwMDAwMCwgbWF4ID0gMDtcbiAgICAgICAgZm9yICh2YXIgdGkgPSAwOyB0aSA8IHRpZXJzLmxlbmd0aDsgKyt0aSkge1xuICAgICAgICAgICAgdmFyIHJvdyA9IHRpZXJzW3RpXS5yb3c7XG4gICAgICAgICAgICBtaW4gPSBNYXRoLm1pbihtaW4sIHJvdy5vZmZzZXRUb3ApO1xuICAgICAgICAgICAgbWF4ID0gTWF0aC5tYXgobWF4LCByb3cub2Zmc2V0VG9wICsgcm93Lm9mZnNldEhlaWdodCk7XG4gICAgICAgIH1cbiAgICAgICAgdGllckdyb3VwLmVsZW1lbnQuc3R5bGUudG9wID0gbWluICsgJ3B4JztcbiAgICAgICAgdGllckdyb3VwLmVsZW1lbnQuc3R5bGUubGVmdCA9ICcwcHgnO1xuICAgICAgICB0aWVyR3JvdXAuZWxlbWVudC5zdHlsZS5oZWlnaHQgPSAobWF4LW1pbikgKyAncHgnO1xuICAgICAgICBob2xkZXIuYXBwZW5kQ2hpbGQodGllckdyb3VwLmVsZW1lbnQpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnRpZXJCYWNrZ3JvdW5kQ29sb3JzKSB7XG4gICAgICAgIGZvciAodmFyIHRpID0gMDsgdGkgPCBhcnJhbmdlZFRpZXJzLmxlbmd0aDsgKyt0aSkge1xuICAgICAgICAgICAgdmFyIHQgPSBhcnJhbmdlZFRpZXJzW3RpXTtcbiAgICAgICAgICAgIHQuc2V0QmFja2dyb3VuZCh0aGlzLnRpZXJCYWNrZ3JvdW5kQ29sb3JzW3RpICUgdGhpcy50aWVyQmFja2dyb3VuZENvbG9ycy5sZW5ndGhdKTtcbiAgICAgICAgICAgIGlmICh0LmRhc1NvdXJjZS50aWVyR3JvdXApXG4gICAgICAgICAgICAgICAgdC5sYWJlbC5zdHlsZS5sZWZ0ID0gJzE4cHgnO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHQubGFiZWwuc3R5bGUubGVmdCA9ICcycHgnO1xuICAgICAgICAgICAgdC5iYWNrZ3JvdW5kID0gdGhpcy50aWVyQmFja2dyb3VuZENvbG9yc1t0aSAlIHRoaXMudGllckJhY2tncm91bmRDb2xvcnMubGVuZ3RoXTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuQnJvd3Nlci5wcm90b3R5cGUucmVmcmVzaCA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMucmV0cmlldmVUaWVyRGF0YSh0aGlzLnRpZXJzKTtcbiAgICB0aGlzLmRyYXdPdmVybGF5cygpO1xuICAgIHRoaXMucG9zaXRpb25SdWxlcigpO1xufTtcblxudmFyIGRlZmF1bHRUaWVyUmVuZGVyZXIgPSBmdW5jdGlvbihzdGF0dXMsIHRpZXIpIHtcbiAgICBjb25zb2xlLmxvZyhcIkRFUFJFQ0FURUQhXCIpO1xufVxuXG5Ccm93c2VyLnByb3RvdHlwZS5yZXRyaWV2ZVRpZXJEYXRhID0gZnVuY3Rpb24odGllcnMpIHtcbiAgICB0aGlzLm5vdGlmeUxvY2F0aW9uKCk7XG4gICAgdmFyIHdpZHRoID0gKHRoaXMudmlld0VuZCAtIHRoaXMudmlld1N0YXJ0KSArIDE7XG4gICAgdmFyIG1pbkV4dHJhVyA9ICh0aGlzLm1pbkV4dHJhV2lkdGggLyB0aGlzLnNjYWxlKXwwO1xuICAgIHZhciBtYXhFeHRyYVcgPSAodGhpcy5tYXhFeHRyYVdpZHRoIC8gdGhpcy5zY2FsZSl8MDtcblxuICAgIHZhciBuZXdPcmlnaW4gPSAodGhpcy52aWV3U3RhcnQgKyB0aGlzLnZpZXdFbmQpIC8gMjtcbiAgICB2YXIgb2ggPSBuZXdPcmlnaW4gLSB0aGlzLm9yaWdpbjtcbiAgICB0aGlzLm9yaWdpbiA9IG5ld09yaWdpbjtcbiAgICB0aGlzLnNjYWxlQXRMYXN0UmVkcmF3ID0gdGhpcy5zY2FsZTtcbiAgICBmb3IgKHZhciB0ID0gMDsgdCA8IHRpZXJzLmxlbmd0aDsgKyt0KSB7XG4gICAgICAgIHZhciBvZCA9IG9oO1xuICAgICAgICBpZiAodGllcnNbdF0ub3JpZ2luSGF4eCkge1xuICAgICAgICAgICAgb2QgKz0gdGllcnNbdF0ub3JpZ2luSGF4eDtcbiAgICAgICAgfVxuICAgICAgICB0aWVyc1t0XS5vcmlnaW5IYXh4ID0gb2Q7XG4gICAgfVxuXG4gICAgdmFyIHNjYWxlZFF1YW50UmVzID0gdGhpcy50YXJnZXRRdWFudFJlcyAvIHRoaXMuc2NhbGU7XG5cbiAgICB2YXIgaW5uZXJEcmF3blN0YXJ0ID0gTWF0aC5tYXgoMSwgKHRoaXMudmlld1N0YXJ0fDApIC0gbWluRXh0cmFXKTtcbiAgICB2YXIgaW5uZXJEcmF3bkVuZCA9IE1hdGgubWluKCh0aGlzLnZpZXdFbmR8MCkgKyBtaW5FeHRyYVcsICgodGhpcy5jdXJyZW50U2VxTWF4fDApID4gMCA/ICh0aGlzLmN1cnJlbnRTZXFNYXh8MCkgOiAxMDAwMDAwMDAwKSlcbiAgICB2YXIgb3V0ZXJEcmF3blN0YXJ0ID0gTWF0aC5tYXgoMSwgKHRoaXMudmlld1N0YXJ0fDApIC0gbWF4RXh0cmFXKTtcbiAgICB2YXIgb3V0ZXJEcmF3bkVuZCA9IE1hdGgubWluKCh0aGlzLnZpZXdFbmR8MCkgKyBtYXhFeHRyYVcsICgodGhpcy5jdXJyZW50U2VxTWF4fDApID4gMCA/ICh0aGlzLmN1cnJlbnRTZXFNYXh8MCkgOiAxMDAwMDAwMDAwKSk7XG5cbiAgICBpZiAoIXRoaXMua25vd25TcGFjZSB8fCB0aGlzLmtub3duU3BhY2UuY2hyICE9PSB0aGlzLmNocikge1xuICAgICAgICB2YXIgc3MgPSB0aGlzLmdldFNlcXVlbmNlU291cmNlKCk7XG4gICAgICAgIGlmICh0aGlzLmtub3duU3BhY2UpXG4gICAgICAgICAgICB0aGlzLmtub3duU3BhY2UuY2FuY2VsKCk7XG4gICAgICAgIC8vIGtub3duIHNwYWNlIGlzIGNyZWF0ZWQgYmFzZWQgb24gdGhlIGVudGlyZSB0aWVyIGxpc3QsIGZvciBmdXR1cmUgY2FjaGluZyBwdXJwb3NlcywgZXZlbiBpZiBvbmx5IGEgc3Vic2V0IG9mIHRoZSB0aWVycyBhcmUgbmVlZGVkIHRvIGJlIHJlbmRlcmVkIG5vdy5cbiAgICAgICAgdGhpcy5rbm93blNwYWNlID0gbmV3IEtub3duU3BhY2UodGhpcy50aWVycywgdGhpcy5jaHIsIG91dGVyRHJhd25TdGFydCwgb3V0ZXJEcmF3bkVuZCwgc2NhbGVkUXVhbnRSZXMsIHNzKTtcbiAgICB9XG5cbiAgICB2YXIgc2VnID0gdGhpcy5rbm93blNwYWNlLmJlc3RDYWNoZU92ZXJsYXBwaW5nKHRoaXMuY2hyLCBpbm5lckRyYXduU3RhcnQsIGlubmVyRHJhd25FbmQpO1xuICAgIGlmIChzZWcgJiYgc2VnLm1pbiA8PSBpbm5lckRyYXduU3RhcnQgJiYgc2VnLm1heCA+PSBpbm5lckRyYXduRW5kKSB7XG4gICAgICAgIHRoaXMuZHJhd25TdGFydCA9IE1hdGgubWF4KHNlZy5taW4sIG91dGVyRHJhd25TdGFydCk7XG4gICAgICAgIHRoaXMuZHJhd25FbmQgPSBNYXRoLm1pbihzZWcubWF4LCBvdXRlckRyYXduRW5kKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmRyYXduU3RhcnQgPSBvdXRlckRyYXduU3RhcnQ7XG4gICAgICAgIHRoaXMuZHJhd25FbmQgPSBvdXRlckRyYXduRW5kO1xuICAgIH1cbiAgICAvLyBzZW5kIGluIHRoZSBzdWJzZXQgb2YgdGllcnMgdG8gcmV0cmlldmUuXG4gICAgdGhpcy5rbm93blNwYWNlLnJldHJpZXZlRmVhdHVyZXModGllcnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jaHIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kcmF3blN0YXJ0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZHJhd25FbmQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NhbGVkUXVhbnRSZXMpO1xufVxuXG5mdW5jdGlvbiBzZXRTb3VyY2VzKG1zaCwgYXZhaWxhYmxlU291cmNlcywgbWF5YmVNYXBwaW5nKSB7XG4gICAgaWYgKG1heWJlTWFwcGluZykge1xuICAgICAgICBmb3IgKHZhciBzID0gMDsgcyA8IGF2YWlsYWJsZVNvdXJjZXMubGVuZ3RoOyArK3MpIHtcbiAgICAgICAgICAgIGF2YWlsYWJsZVNvdXJjZXNbc10ubWFwcGluZyA9IG1heWJlTWFwcGluZztcbiAgICAgICAgfVxuICAgIH1cbiAgICBtc2guc2V0KGF2YWlsYWJsZVNvdXJjZXMpO1xufVxuXG5Ccm93c2VyLnByb3RvdHlwZS5xdWVyeVJlZ2lzdHJ5ID0gZnVuY3Rpb24obWF5YmVNYXBwaW5nLCB0cnlDYWNoZSkge1xuICAgIGlmICghdGhpcy5yZWdpc3RyeSlcbiAgICAgICAgcmV0dXJuO1xuXG4gICAgdmFyIHRoaXNCID0gdGhpcztcbiAgICB2YXIgY29vcmRzLCBtc2g7XG4gICAgaWYgKG1heWJlTWFwcGluZykge1xuICAgICAgICBjb29yZHMgPSB0aGlzLmNoYWluc1ttYXliZU1hcHBpbmddLmNvb3JkcztcbiAgICAgICAgaWYgKCF0aGlzQi5tYXBwYWJsZVNvdXJjZXNbbWF5YmVNYXBwaW5nXSkge1xuICAgICAgICAgICAgdGhpc0IubWFwcGFibGVTb3VyY2VzW21heWJlTWFwcGluZ10gPSBuZXcgT2JzZXJ2ZWQoKTtcbiAgICAgICAgfVxuICAgICAgICBtc2ggPSB0aGlzQi5tYXBwYWJsZVNvdXJjZXNbbWF5YmVNYXBwaW5nXTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBjb29yZHMgPSB0aGlzLmNvb3JkU3lzdGVtO1xuICAgICAgICBtc2ggPSB0aGlzLmF2YWlsYWJsZVNvdXJjZXM7XG4gICAgfVxuICAgIHZhciBjYWNoZUhhc2ggPSBoZXhfc2hhMShtaW5pSlNPTmlmeShjb29yZHMpKTtcbiAgICBpZiAodHJ5Q2FjaGUpIHtcbiAgICAgICAgdmFyIGNhY2hlVGltZSA9IGxvY2FsU3RvcmFnZVsnZGFsbGlhbmNlLnJlZ2lzdHJ5LicgKyBjYWNoZUhhc2ggKyAnLmxhc3RfcXVlcmllZCddO1xuICAgICAgICBpZiAoY2FjaGVUaW1lKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHNldFNvdXJjZXMobXNoLCBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZVsnZGFsbGlhbmNlLnJlZ2lzdHJ5LicgKyBjYWNoZUhhc2ggKyAnLnNvdXJjZXMnXSksIG1heWJlTWFwcGluZyk7XG4gICAgICAgICAgICAgICAgdmFyIGNhY2hlQWdlID0gKERhdGUubm93KCl8MCkgLSAoY2FjaGVUaW1lfDApO1xuICAgICAgICAgICAgICAgIGlmIChjYWNoZUFnZSA8ICgxMiAqIDYwICogNjAgKiAxMDAwKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBjYXRjaCAocmV4KSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0JhZCByZWdpc3RyeSBjYWNoZTogJyArIHJleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgcnVybCA9IHRoaXMucmVnaXN0cnk7XG4gICAgaWYgKHJ1cmwuaW5kZXhPZignLy8nKSA9PSAwKSB7XG4gICAgICAgIHZhciBwcm90byA9IHdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbDtcbiAgICAgICAgaWYgKHByb3RvICE9ICdodHRwczonICYmIHByb3RvICE9ICdodHRwOicpXG4gICAgICAgICAgICBydXJsID0gJ2h0dHA6JyArIHJ1cmw7XG4gICAgfVxuICAgIG5ldyBEQVNSZWdpc3RyeShydXJsKS5zb3VyY2VzKGZ1bmN0aW9uKHNvdXJjZXMpIHtcbiAgICAgICAgdmFyIGF2YWlsYWJsZVNvdXJjZXMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgcyA9IDA7IHMgPCBzb3VyY2VzLmxlbmd0aDsgKytzKSB7XG4gICAgICAgICAgICB2YXIgc291cmNlID0gc291cmNlc1tzXTtcbiAgICAgICAgICAgIGlmICghc291cmNlLmNvb3JkcyB8fCBzb3VyY2UuY29vcmRzLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgc2Nvb3JkcyA9IHNvdXJjZS5jb29yZHNbMF07XG4gICAgICAgICAgICBpZiAoc2Nvb3Jkcy50YXhvbiAhPSBjb29yZHMudGF4b24gfHwgc2Nvb3Jkcy5hdXRoICE9IGNvb3Jkcy5hdXRoIHx8IHNjb29yZHMudmVyc2lvbiAhPSBjb29yZHMudmVyc2lvbikge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXZhaWxhYmxlU291cmNlcy5wdXNoKHNvdXJjZSk7XG4gICAgICAgIH1cblxuICAgICAgICBsb2NhbFN0b3JhZ2VbJ2RhbGxpYW5jZS5yZWdpc3RyeS4nICsgY2FjaGVIYXNoICsgJy5zb3VyY2VzJ10gPSBKU09OLnN0cmluZ2lmeShhdmFpbGFibGVTb3VyY2VzKTtcbiAgICAgICAgbG9jYWxTdG9yYWdlWydkYWxsaWFuY2UucmVnaXN0cnkuJyArIGNhY2hlSGFzaCArICcubGFzdF9xdWVyaWVkJ10gPSAnJyArIERhdGUubm93KCk7XG5cbiAgICAgICAgc2V0U291cmNlcyhtc2gsIGF2YWlsYWJsZVNvdXJjZXMsIG1heWJlTWFwcGluZyk7XG4gICAgfSwgZnVuY3Rpb24oZXJyb3IpIHtcbiAgICAgICAgLy8gbXNoLnNldChudWxsKTtcbiAgICB9LCBjb29yZHMpO1xufVxuXG4vL1xuLy8gTmF2aWdhdGlvblxuLy9cblxuQnJvd3Nlci5wcm90b3R5cGUubW92ZSA9IGZ1bmN0aW9uKHBvcywgc29mdClcbntcbiAgICB2YXIgd2lkID0gdGhpcy52aWV3RW5kIC0gdGhpcy52aWV3U3RhcnQ7XG4gICAgdmFyIG5TdGFydCA9IHRoaXMudmlld1N0YXJ0IC0gKCgxLjAgKiBwb3MpIC8gdGhpcy5zY2FsZSk7XG4gICAgdmFyIG5FbmQgPSBuU3RhcnQgKyB3aWQ7XG5cbiAgICBpZiAoIXNvZnQpIHtcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudFNlcU1heCA+IDAgJiYgbkVuZCA+IHRoaXMuY3VycmVudFNlcU1heCkge1xuICAgICAgICAgICAgbkVuZCA9IHRoaXMuY3VycmVudFNlcU1heDtcbiAgICAgICAgICAgIG5TdGFydCA9IHRoaXMudmlld0VuZCAtIHdpZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoblN0YXJ0IDwgMSkge1xuICAgICAgICAgICAgblN0YXJ0ID0gMTtcbiAgICAgICAgICAgIG5FbmQgPSBuU3RhcnQgKyB3aWQ7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLnNldExvY2F0aW9uKG51bGwsIG5TdGFydCwgbkVuZCwgbnVsbCwgc29mdCk7XG59XG5cbkJyb3dzZXIucHJvdG90eXBlLnpvb21TdGVwID0gZnVuY3Rpb24oZGVsdGEpIHtcbiAgICB2YXIgb3ogPSAxLjAgKiB0aGlzLnpvb21TbGlkZXJWYWx1ZTtcbiAgICB2YXIgbnogPSBveiArIGRlbHRhO1xuICAgIGlmIChueiA8IHRoaXMuem9vbU1pbikge1xuICAgICAgICBuej0gdGhpcy56b29tTWluO1xuICAgIH1cbiAgICBpZiAobnogPiB0aGlzLnpvb21NYXgpIHtcbiAgICAgICAgbnogPSB0aGlzLnpvb21NYXg7XG4gICAgfVxuXG4gICAgaWYgKG56ICE9IG96KSB7XG4gICAgICAgIHRoaXMuem9vbVNsaWRlclZhbHVlID0gbno7IC8vIEZJWE1FIG1heWJlIG91Z2h0IHRvIHNldCBpbnNpZGUgem9vbSFcbiAgICAgICAgdGhpcy56b29tKE1hdGguZXhwKCgxLjAgKiBueikgLyB0aGlzLnpvb21FeHB0KSk7XG4gICAgfVxufVxuXG5Ccm93c2VyLnByb3RvdHlwZS56b29tID0gZnVuY3Rpb24oZmFjdG9yKSB7XG4gICAgdGhpcy56b29tRmFjdG9yID0gZmFjdG9yO1xuICAgIHZhciB2aWV3Q2VudGVyID0gTWF0aC5yb3VuZCgodGhpcy52aWV3U3RhcnQgKyB0aGlzLnZpZXdFbmQpIC8gMi4wKXwwO1xuICAgIHRoaXMudmlld1N0YXJ0ID0gdmlld0NlbnRlciAtIHRoaXMuem9vbUJhc2UgKiB0aGlzLnpvb21GYWN0b3IgLyAyO1xuICAgIHRoaXMudmlld0VuZCA9IHZpZXdDZW50ZXIgKyB0aGlzLnpvb21CYXNlICogdGhpcy56b29tRmFjdG9yIC8gMjtcbiAgICBpZiAodGhpcy5jdXJyZW50U2VxTWF4ID4gMCAmJiAodGhpcy52aWV3RW5kID4gdGhpcy5jdXJyZW50U2VxTWF4ICsgNSkpIHtcbiAgICAgICAgdmFyIGxlbiA9IHRoaXMudmlld0VuZCAtIHRoaXMudmlld1N0YXJ0ICsgMTtcbiAgICAgICAgdGhpcy52aWV3RW5kID0gdGhpcy5jdXJyZW50U2VxTWF4O1xuICAgICAgICB0aGlzLnZpZXdTdGFydCA9IHRoaXMudmlld0VuZCAtIGxlbiArIDE7XG4gICAgfVxuICAgIGlmICh0aGlzLnZpZXdTdGFydCA8IDEpIHtcbiAgICAgICAgdmFyIGxlbiA9IHRoaXMudmlld0VuZCAtIHRoaXMudmlld1N0YXJ0ICsgMTtcbiAgICAgICAgdGhpcy52aWV3U3RhcnQgPSAxO1xuICAgICAgICB0aGlzLnZpZXdFbmQgPSB0aGlzLnZpZXdTdGFydCArIGxlbiAtIDE7XG4gICAgfVxuICAgIHRoaXMuc2NhbGUgPSB0aGlzLmZlYXR1cmVQYW5lbFdpZHRoIC8gKHRoaXMudmlld0VuZCAtIHRoaXMudmlld1N0YXJ0KVxuICAgIHZhciB3aWR0aCA9IHRoaXMudmlld0VuZCAtIHRoaXMudmlld1N0YXJ0ICsgMTtcblxuICAgIHZhciBzY2FsZVJhdCA9ICh0aGlzLnNjYWxlIC8gdGhpcy5zY2FsZUF0TGFzdFJlZHJhdyk7XG5cbiAgICB0aGlzLm5vdGlmeUxvY2F0aW9uKCk7XG4gICAgdGhpcy5yZWZyZXNoKCk7XG59XG5cbkJyb3dzZXIucHJvdG90eXBlLnNwYWNlQ2hlY2sgPSBmdW5jdGlvbihkb250UmVmcmVzaCkge1xuICAgIGlmICghdGhpcy5rbm93blNwYWNlIHx8IHRoaXMua25vd25TcGFjZS5jaHIgIT09IHRoaXMuY2hyKSB7XG4gICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIHdpZHRoID0gKCh0aGlzLnZpZXdFbmQgLSB0aGlzLnZpZXdTdGFydCl8MCkgKyAxO1xuICAgIHZhciBtaW5FeHRyYVcgPSAodGhpcy5taW5FeHRyYVdpZHRoIC8gdGhpcy5zY2FsZSl8MDtcbiAgICB2YXIgbWF4RXh0cmFXID0gKHRoaXMubWF4RXh0cmFXaWR0aCAvIHRoaXMuc2NhbGUpfDA7XG5cbiAgICBpZiAoKHRoaXMuZHJhd25TdGFydHwwKSA+IE1hdGgubWF4KDEsICgodGhpcy52aWV3U3RhcnR8MCkgLSBtaW5FeHRyYVcpfDApICB8fCAodGhpcy5kcmF3bkVuZHwwKSA8IE1hdGgubWluKCh0aGlzLnZpZXdFbmR8MCkgKyBtaW5FeHRyYVcsICgodGhpcy5jdXJyZW50U2VxTWF4fDApID4gMCA/ICh0aGlzLmN1cnJlbnRTZXFNYXh8MCkgOiAxMDAwMDAwMDAwKSkpICB7XG4gICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgIH1cbn1cblxuQnJvd3Nlci5wcm90b3R5cGUucmVzaXplVmlld2VyID0gZnVuY3Rpb24oc2tpcFJlZnJlc2gpIHtcbiAgICB2YXIgd2lkdGggPSB0aGlzLnRpZXJIb2xkZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGggfCAwO1xuICAgIGlmICh3aWR0aCA9PSAwKVxuICAgICAgICByZXR1cm47XG5cbiAgICB2YXIgb2xkRlBXID0gTWF0aC5tYXgodGhpcy5mZWF0dXJlUGFuZWxXaWR0aCwgMzAwKTsgLy8gQ2FuIGdldCBzaWxseSB2YWx1ZXMgc3RvcmVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdoZW4gdGhlIGJyb3dzZXIgaXMgaGlkZGVuLlxuICAgIHRoaXMuZmVhdHVyZVBhbmVsV2lkdGggPSB3aWR0aHwwO1xuXG4gICAgaWYgKG9sZEZQVyAhPSB0aGlzLmZlYXR1cmVQYW5lbFdpZHRoKSB7XG4gICAgICAgIHRoaXMuem9vbU1heCA9IHRoaXMuem9vbUV4cHQgKiBNYXRoLmxvZyh0aGlzLm1heFZpZXdXaWR0aCAvIHRoaXMuem9vbUJhc2UpO1xuICAgICAgICB0aGlzLnpvb21NaW4gPSB0aGlzLnpvb21FeHB0ICogTWF0aC5sb2codGhpcy5mZWF0dXJlUGFuZWxXaWR0aCAvIHRoaXMubWF4UGl4ZWxzUGVyQmFzZSAvIHRoaXMuem9vbUJhc2UpOyAgIC8vIEZJWE1FIGhhcmQtY29kZWQgbWluaW11bS5cbiAgICAgICAgdGhpcy56b29tU2xpZGVyVmFsdWUgPSB0aGlzLnpvb21FeHB0ICogTWF0aC5sb2coKHRoaXMudmlld0VuZCAtIHRoaXMudmlld1N0YXJ0ICsgMSkgLyB0aGlzLnpvb21CYXNlKTtcblxuICAgICAgICB2YXIgdmlld1dpZHRoID0gdGhpcy52aWV3RW5kIC0gdGhpcy52aWV3U3RhcnQ7XG4gICAgICAgIHZhciBudmUgPSB0aGlzLnZpZXdTdGFydCArICh2aWV3V2lkdGggKiB0aGlzLmZlYXR1cmVQYW5lbFdpZHRoKSAvIG9sZEZQVztcblxuICAgICAgICB0aGlzLnZpZXdFbmQgPSBudmU7XG5cbiAgICAgICAgdmFyIHdpZCA9IHRoaXMudmlld0VuZCAtIHRoaXMudmlld1N0YXJ0ICsgMTtcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudFNlcU1heCA+IDAgJiYgdGhpcy52aWV3RW5kID4gdGhpcy5jdXJyZW50U2VxTWF4KSB7XG4gICAgICAgICAgICB0aGlzLnZpZXdFbmQgPSB0aGlzLmN1cnJlbnRTZXFNYXg7XG4gICAgICAgICAgICB0aGlzLnZpZXdTdGFydCA9IHRoaXMudmlld0VuZCAtIHdpZCArIDE7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMudmlld1N0YXJ0IDwgMSkge1xuICAgICAgICAgICAgdGhpcy52aWV3U3RhcnQgPSAxO1xuICAgICAgICAgICAgdGhpcy52aWV3RW5kID0gdGhpcy52aWV3U3RhcnQgKyB3aWQgLSAxO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5wb3NpdGlvblJ1bGVyKCk7XG5cbiAgICAgICAgaWYgKCFza2lwUmVmcmVzaCkge1xuICAgICAgICAgICAgdGhpcy5zcGFjZUNoZWNrKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5ub3RpZnlMb2NhdGlvbigpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmZ1bGxTY3JlZW4pIHtcbiAgICAgICAgdGhpcy5zZXRGdWxsU2NyZWVuSGVpZ2h0KCk7XG4gICAgfVxufVxuXG5Ccm93c2VyLnByb3RvdHlwZS5zZXRGdWxsU2NyZWVuSGVpZ2h0ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHJlc3QgPSBkb2N1bWVudC5ib2R5Lm9mZnNldEhlaWdodCAtIHRoaXMuYnJvd3NlckhvbGRlci5vZmZzZXRIZWlnaHQ7XG4gICAgdGhpcy5icm93c2VySG9sZGVyLnN0eWxlLm1heEhlaWdodCA9IE1hdGgubWF4KDMwMCwgd2luZG93LmlubmVySGVpZ2h0IC0gcmVzdCAtIDIwKSArICdweCdcbn1cblxuQnJvd3Nlci5wcm90b3R5cGUuYWRkVGllciA9IGZ1bmN0aW9uKGNvbmYpIHtcbiAgICB2YXIgdGhpc0IgPSB0aGlzO1xuICAgIGNvbmYgPSBzaGFsbG93Q29weShjb25mKTtcbiAgICBjb25mLmRpc2FibGVkID0gZmFsc2U7XG5cbiAgICByZXR1cm4gdGhpcy5tYWtlVGllcihjb25mKS50aGVuKGZ1bmN0aW9uICh0aWVyKSB7XG4gICAgICAgIHRoaXNCLnJlZnJlc2hUaWVyKHRpZXIpO1xuICAgICAgICB0aGlzQi5tYXJrU2VsZWN0ZWRUaWVycygpO1xuICAgICAgICB0aGlzQi5wb3NpdGlvblJ1bGVyKCk7XG4gICAgICAgIHRoaXNCLm5vdGlmeVRpZXIoXCJhZGRlZFwiLCB0aWVyKTtcbiAgICAgICAgcmV0dXJuIHRpZXI7XG4gICAgfSlcbn07XG5cblxuQnJvd3Nlci5wcm90b3R5cGUucmVtb3ZlVGllciA9IGZ1bmN0aW9uKGNvbmYsIGZvcmNlKSB7XG4gICAgdmFyIHRhcmdldCA9IC0xO1xuXG4gICAgaWYgKHR5cGVvZiBjb25mLmluZGV4ICE9PSAndW5kZWZpbmVkJyAmJiBjb25mLmluZGV4ID49MCAmJiBjb25mLmluZGV4IDwgdGhpcy50aWVycy5sZW5ndGgpIHtcbiAgICAgICAgdGFyZ2V0ID0gY29uZi5pbmRleDtcbiAgICB9IGVsc2Uge1xuICAgICAgICBmb3IgKHZhciB0aSA9IDA7IHRpIDwgdGhpcy50aWVycy5sZW5ndGg7ICsrdGkpIHtcbiAgICAgICAgICAgIHZhciB0cyA9IHRoaXMudGllcnNbdGldLmRhc1NvdXJjZTtcblxuICAgICAgICAgICAgaWYgKHNvdXJjZXNBcmVFcXVhbChjb25mLCB0cykpIHtcbiAgICAgICAgICAgICAgICB0YXJnZXQgPSB0aTsgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGFyZ2V0IDwgMCkge1xuICAgICAgICB0aHJvdyBcIkNvdWxkbid0IGZpbmQgcmVxdWVzdGVkIHRpZXJcIjtcbiAgICB9XG5cbiAgICB2YXIgdGFyZ2V0VGllciA9IHRoaXMudGllcnNbdGFyZ2V0XTtcbiAgICB0aGlzLnRpZXJzLnNwbGljZSh0YXJnZXQsIDEpO1xuXG4gICAgdmFyIG5zdCA9IFtdO1xuICAgIGZvciAodmFyIHN0aSA9IDA7IHN0aSA8IHRoaXMuc2VsZWN0ZWRUaWVycy5sZW5ndGg7ICsrc3RpKSB7XG4gICAgICAgIHZhciBzdCA9IHRoaXMuc2VsZWN0ZWRUaWVyc1tzdGldO1xuICAgICAgICBpZiAoc3QgPCB0YXJnZXQpIHtcbiAgICAgICAgICAgIG5zdC5wdXNoKHN0KTtcbiAgICAgICAgfSBlbHNlIGlmIChzdCA+IHRhcmdldCkge1xuICAgICAgICAgICAgbnN0LnB1c2goc3QgLSAxKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0aGlzLnNlbGVjdGVkVGllcnMgPSBuc3Q7XG4gICAgdGhpcy5tYXJrU2VsZWN0ZWRUaWVycygpO1xuXG4gICAgdGFyZ2V0VGllci5kZXN0cm95KCk7XG4gICAgaWYgKHRoaXMua25vd25TcGFjZSkge1xuICAgICAgICB0aGlzLmtub3duU3BhY2UuZmVhdHVyZUNhY2hlW3RhcmdldFRpZXJdID0gbnVsbDtcbiAgICB9XG5cbiAgICB0aGlzLnJlb3JkZXJUaWVycygpO1xuICAgIHRoaXMubm90aWZ5VGllcihcInJlbW92ZWRcIiwgdGFyZ2V0VGllcik7XG59XG5cbkJyb3dzZXIucHJvdG90eXBlLnJlbW92ZUFsbFRpZXJzID0gZnVuY3Rpb24oKSB7XG5cdHZhciB0aGlzQiA9IHRoaXM7XG4gICAgdGhpcy5zZWxlY3RlZFRpZXJzID0gW107XG4gICAgdGhpcy5tYXJrU2VsZWN0ZWRUaWVycygpO1xuICAgIHRoaXMudGllcnMuZm9yRWFjaChmdW5jdGlvbiAodGFyZ2V0VGllcikge1xuICAgICAgICB0YXJnZXRUaWVyLmRlc3Ryb3koKTtcbiAgICAgICAgaWYgKHRoaXNCLmtub3duU3BhY2UpIHtcbiAgICAgICAgICAgIHRoaXNCLmtub3duU3BhY2UuZmVhdHVyZUNhY2hlW3RhcmdldFRpZXJdID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHRoaXMudGllcnMubGVuZ3RoID0gMDtcbiAgICB0aGlzLnJlb3JkZXJUaWVycygpO1xuICAgIHRoaXMubm90aWZ5VGllcihcInJlbW92ZWRBbGxcIiwgbnVsbCk7XG59XG5cbkJyb3dzZXIucHJvdG90eXBlLmdldFNlcXVlbmNlU291cmNlID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMuX3NlcXVlbmNlU291cmNlID09PSB1bmRlZmluZWQpXG4gICAgICAgIHRoaXMuX3NlcXVlbmNlU291cmNlID0gdGhpcy5fZ2V0U2VxdWVuY2VTb3VyY2UoKTtcbiAgICByZXR1cm4gdGhpcy5fc2VxdWVuY2VTb3VyY2U7XG59XG5cbkJyb3dzZXIucHJvdG90eXBlLl9nZXRTZXF1ZW5jZVNvdXJjZSA9IGZ1bmN0aW9uKCkge1xuICAgIGZvciAodmFyIHRpID0gMDsgdGkgPCB0aGlzLnRpZXJzLmxlbmd0aDsgKyt0aSkge1xuICAgICAgICBpZiAodGhpcy50aWVyc1t0aV0uc2VxdWVuY2VTb3VyY2UpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRpZXJzW3RpXS5zZXF1ZW5jZVNvdXJjZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZvciAodmFyIHNpID0gMDsgc2kgPCB0aGlzLmRlZmF1bHRTb3VyY2VzLmxlbmd0aDsgKytzaSkge1xuICAgICAgICB2YXIgcyA9IHRoaXMuZGVmYXVsdFNvdXJjZXNbc2ldO1xuICAgICAgICBpZiAocy5wcm92aWRlc19lbnRyeXBvaW50cyB8fCBzLnRpZXJfdHlwZSA9PSAnc2VxdWVuY2UnIHx8IHMudHdvQml0VVJJIHx8IHMudHdvQml0QmxvYikge1xuICAgICAgICAgICAgaWYgKHMudHdvQml0VVJJIHx8IHMudHdvQml0QmxvYikge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgVHdvQml0U2VxdWVuY2VTb3VyY2Uocyk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHMuZW5zZW1ibFVSSSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRW5zZW1ibFNlcXVlbmNlU291cmNlKHMpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IERBU1NlcXVlbmNlU291cmNlKHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuXG5Ccm93c2VyLnByb3RvdHlwZS5zZXRMb2NhdGlvbiA9IGZ1bmN0aW9uKG5ld0NociwgbmV3TWluLCBuZXdNYXgsIGNhbGxiYWNrLCBzb2Z0KSB7XG4gICAgaWYgKHR5cGVvZihuZXdNaW4pICE9PSAnbnVtYmVyJykge1xuICAgICAgICB0aHJvdyBFcnJvcignbWluaW11bSBtdXN0IGJlIGEgbnVtYmVyIChnb3QgJyArIEpTT04uc3RyaW5naWZ5KG5ld01pbikgKyAnKScpO1xuICAgIH1cbiAgICBpZiAodHlwZW9mKG5ld01heCkgIT09ICdudW1iZXInKSB7XG4gICAgICAgIHRocm93IEVycm9yKCdtYXhpbXVtIG11c3QgYmUgYSBudW1iZXIgKGdvdCAnICsgSlNPTi5zdHJpbmdpZnkobmV3TWF4KSArICcpJyk7XG4gICAgfVxuXG4gICAgaWYgKG5ld01pbiA+IG5ld01heCkge1xuICAgICAgICB2YXIgb2xkTmV3TWluID0gbmV3TWluO1xuICAgICAgICBuZXdNaW4gPSBuZXdNYXg7XG4gICAgICAgIG5ld01heCA9IG9sZE5ld01pbjtcbiAgICB9IGVsc2UgaWYgKG5ld01pbiA9PT0gbmV3TWF4KSB7XG4gICAgICAgIG5ld01heCArPSAxO1xuICAgIH1cblxuICAgIGlmICghY2FsbGJhY2spIHtcbiAgICAgICAgY2FsbGJhY2sgPSBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgdmFyIHRoaXNCID0gdGhpcztcblxuICAgIGlmICgoIW5ld0NociB8fCBuZXdDaHIgPT0gdGhpcy5jaHIpICYmIHRoaXMuY3VycmVudFNlcU1heCA+IDApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NldExvY2F0aW9uKG51bGwsIG5ld01pbiwgbmV3TWF4LCBudWxsLCBjYWxsYmFjaywgc29mdCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHNzID0gdGhpcy5nZXRTZXF1ZW5jZVNvdXJjZSgpO1xuICAgICAgICBpZiAoIXNzKSB7XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soJ05lZWQgYSBzZXF1ZW5jZSBzb3VyY2UnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBmaW5kQ2hyID0gbmV3Q2hyIHx8IHRoaXMuY2hyO1xuICAgICAgICBzcy5nZXRTZXFJbmZvKGZpbmRDaHIsIGZ1bmN0aW9uKHNpKSB7XG4gICAgICAgICAgICBpZiAoIXNpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGFsdENocjtcbiAgICAgICAgICAgICAgICBpZiAoZmluZENoci5pbmRleE9mKCdjaHInKSA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGFsdENociA9IGZpbmRDaHIuc3Vic3RyKDMpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGFsdENociA9ICdjaHInICsgZmluZENocjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc3MuZ2V0U2VxSW5mbyhhbHRDaHIsIGZ1bmN0aW9uKHNpMikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXNpMiAmJiBuZXdDaHIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhcIkNvdWxkbid0IGZpbmQgc2VxdWVuY2UgJ1wiICsgbmV3Q2hyICsgXCInXCIpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCFzaTIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzQi5fc2V0TG9jYXRpb24obnVsbCwgbmV3TWluLCBuZXdNYXgsIG51bGwsIGNhbGxiYWNrLCBzb2Z0KTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzQi5fc2V0TG9jYXRpb24oYWx0Q2hyLCBuZXdNaW4sIG5ld01heCwgc2kyLCBjYWxsYmFjaywgc29mdCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXNCLl9zZXRMb2NhdGlvbihuZXdDaHIsIG5ld01pbiwgbmV3TWF4LCBzaSwgY2FsbGJhY2ssIHNvZnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59XG5cbkJyb3dzZXIucHJvdG90eXBlLl9zZXRMb2NhdGlvbiA9IGZ1bmN0aW9uKG5ld0NociwgbmV3TWluLCBuZXdNYXgsIG5ld0NockluZm8sIGNhbGxiYWNrLCBzb2Z0KSB7XG4gICAgdmFyIGNockNoYW5nZWQgPSBmYWxzZTtcbiAgICBpZiAobmV3Q2hyKSB7XG4gICAgICAgIGlmIChuZXdDaHIuaW5kZXhPZignY2hyJykgPT0gMClcbiAgICAgICAgICAgIG5ld0NociA9IG5ld0Noci5zdWJzdHJpbmcoMyk7XG5cbiAgICAgICAgaWYgKHRoaXMuY2hyICE9IG5ld0NocilcbiAgICAgICAgICAgIGNockNoYW5nZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLmNociA9IG5ld0NocjtcbiAgICAgICAgdGhpcy5jdXJyZW50U2VxTWF4ID0gbmV3Q2hySW5mby5sZW5ndGg7XG4gICAgfVxuXG4gICAgbmV3TWluID0gcGFyc2VGbG9hdChuZXdNaW4pOyBuZXdNYXg9cGFyc2VGbG9hdChuZXdNYXgpO1xuXG4gICAgdmFyIG5ld1dpZHRoID0gTWF0aC5tYXgoMTAsIG5ld01heC1uZXdNaW4rMSk7XG5cbiAgICBpZiAoIXNvZnQpIHtcbiAgICAgICAgdmFyIGNzbSA9IHRoaXMuY3VycmVudFNlcU1heDtcbiAgICAgICAgaWYgKGNzbSA8PSAwKVxuICAgICAgICAgICAgY3NtID0gMTAwMDAwMDAwMDAwMDtcbiAgICAgICAgaWYgKG5ld01pbiA8IDEpIHtcbiAgICAgICAgICAgIG5ld01pbiA9IDE7IG5ld01heCA9IG5ld01pbiArIG5ld1dpZHRoIC0gMTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobmV3TWF4ID4gY3NtKSB7XG4gICAgICAgICAgICBuZXdNYXggPSBjc207XG4gICAgICAgICAgICBuZXdNaW4gPSBNYXRoLm1heCgxLCBuZXdNYXggLSBuZXdXaWR0aCArIDEpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy52aWV3U3RhcnQgPSBuZXdNaW47XG4gICAgdGhpcy52aWV3RW5kID0gbmV3TWF4O1xuICAgIHZhciBuZXdTY2FsZSA9IE1hdGgubWF4KHRoaXMuZmVhdHVyZVBhbmVsV2lkdGggfHwgdGhpcy5vZmZzY3JlZW5Jbml0V2lkdGgsIDUwKSAvICh0aGlzLnZpZXdFbmQgLSB0aGlzLnZpZXdTdGFydCk7XG4gICAgdmFyIG9sZFNjYWxlID0gdGhpcy5zY2FsZTtcbiAgICB2YXIgc2NhbGVDaGFuZ2VkID0gKE1hdGguYWJzKG5ld1NjYWxlIC0gb2xkU2NhbGUpKSA+IDAuMDAwMDAxO1xuICAgIHRoaXMuc2NhbGUgPSBuZXdTY2FsZTtcblxuICAgIHZhciBuZXdaUywgb2xkWlM7XG4gICAgb2xkWlMgPSB0aGlzLnpvb21TbGlkZXJWYWx1ZTtcbiAgICB0aGlzLnpvb21TbGlkZXJWYWx1ZSA9IG5ld1pTID0gdGhpcy56b29tRXhwdCAqIE1hdGgubG9nKCh0aGlzLnZpZXdFbmQgLSB0aGlzLnZpZXdTdGFydCArIDEpIC8gdGhpcy56b29tQmFzZSk7XG5cbiAgICBpZiAoc2NhbGVDaGFuZ2VkIHx8IGNockNoYW5nZWQpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnRpZXJzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICB0aGlzLnRpZXJzW2ldLnZpZXdwb3J0SG9sZGVyLnN0eWxlLmxlZnQgPSAnNTAwMHB4JztcbiAgICAgICAgICAgIHRoaXMudGllcnNbaV0ub3ZlcmxheS5zdHlsZS5sZWZ0ID0gJzUwMDBweCc7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgLy8gdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICAvLyB0aGlzLnRpZXJzLmZvckVhY2goZnVuY3Rpb24odGllcikge3NlbGYucmVmcmVzaFRpZXIodGllcik7fSk7XG4gICAgICAgIC8vIHRoaXMucmVmcmVzaFRpZXJcblxuICAgICAgICBpZiAodGhpcy5zYXZlZFpvb20pIHtcbiAgICAgICAgICAgIG5ld1pTIC09IHRoaXMuem9vbU1pbjtcbiAgICAgICAgICAgIG9sZFpTIC09IHRoaXMuem9vbU1pbjtcbiAgICAgICAgICAgIHZhciBkaWZUb0FjdGl2ZSA9IG5ld1pTIC0gb2xkWlM7XG4gICAgICAgICAgICB2YXIgZGlmVG9TYXZlZCA9IG5ld1pTIC0gdGhpcy5zYXZlZFpvb207XG4gICAgICAgICAgICBpZiAoTWF0aC5hYnMoZGlmVG9BY3RpdmUpID4gTWF0aC5hYnMoZGlmVG9TYXZlZCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmlzU25hcFpvb21pbmcgPSAhdGhpcy5pc1NuYXBab29taW5nO1xuICAgICAgICAgICAgICAgIHRoaXMuc2F2ZWRab29tID0gb2xkWlM7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmlzU25hcFpvb21pbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuc2F2ZWRab29tID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciB2aWV3Q2VudGVyID0gKHRoaXMudmlld1N0YXJ0ICsgdGhpcy52aWV3RW5kKS8yO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy50aWVycy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgdmFyIG9mZnNldCA9ICh0aGlzLnZpZXdTdGFydCAtIHRoaXMudGllcnNbaV0ubm9yaWdpbikqdGhpcy5zY2FsZTtcbiAgICAgICAgICAgIHRoaXMudGllcnNbaV0udmlld3BvcnRIb2xkZXIuc3R5bGUubGVmdCA9ICcnICsgKCgtb2Zmc2V0fDApIC0gMTAwMCkgKyAncHgnO1xuICAgICAgICAgICAgdGhpcy50aWVyc1tpXS5kcmF3T3ZlcmxheSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5ub3RpZnlMb2NhdGlvbigpO1xuXG4gICAgdGhpcy5zcGFjZUNoZWNrKCk7XG4gICAgaWYgKHRoaXMuaW5zdHJ1bWVudEFjdGl2aXR5KVxuICAgICAgICB0aGlzLmFjdGl2aXR5U3RhcnRUaW1lID0gRGF0ZS5ub3coKXwwO1xuICAgIHJldHVybiBjYWxsYmFjaygpO1xufVxuXG5Ccm93c2VyLnByb3RvdHlwZS5zZXRDZW50ZXJMb2NhdGlvbiA9IGZ1bmN0aW9uKG5ld0NociwgbmV3Q2VudGVyTG9jKSB7XG4gICAgdmFyIGhhbGZXaWR0aCA9ICh0aGlzLnZpZXdFbmQgLSB0aGlzLnZpZXdTdGFydCkvMixcbiAgICBuZXdNaW4gPSBuZXdDZW50ZXJMb2MgLSBoYWxmV2lkdGgsXG4gICAgbmV3TWF4ID0gbmV3Q2VudGVyTG9jICsgaGFsZldpZHRoO1xuICAgIHRoaXMuc2V0TG9jYXRpb24obmV3Q2hyLCBuZXdNaW4sIG5ld01heCk7XG59XG5cbkJyb3dzZXIucHJvdG90eXBlLnBpbmdBY3Rpdml0eSA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICghdGhpcy5pbnN0cnVtZW50QWN0aXZpdHkgfHwgIXRoaXMuYWN0aXZpdHlTdGFydFRpbWUpXG4gICAgICAgIHJldHVybjtcblxuICAgIHZhciBhY3Rpdml0eSA9IDA7XG4gICAgZm9yICh2YXIgdGkgPSAwOyB0aSA8IHRoaXMudGllcnMubGVuZ3RoOyArK3RpKSB7XG4gICAgICAgIGlmICh0aGlzLnRpZXJzW3RpXS5sb2FkZXJCdXR0b24uc3R5bGUuZGlzcGxheSAhPT0gJ25vbmUnKVxuICAgICAgICAgICAgKythY3Rpdml0eTtcbiAgICB9XG5cbiAgICBpZiAoYWN0aXZpdHkgPT0gMCkge1xuICAgICAgICB2YXIgbm93ID0gRGF0ZS5ub3coKXwwO1xuICAgICAgICBjb25zb2xlLmxvZygnTG9hZGluZyB0b29rICcgKyAobm93LXRoaXMuYWN0aXZpdHlTdGFydFRpbWUpICsgJ21zJyk7XG4gICAgICAgIHRoaXMuYWN0aXZpdHlTdGFydFRpbWUgPSBudWxsO1xuICAgIH1cbn1cblxuQnJvd3Nlci5wcm90b3R5cGUuYWRkSW5pdExpc3RlbmVyID0gZnVuY3Rpb24oaGFuZGxlcikge1xuICAgIHRoaXMuaW5pdExpc3RlbmVycy5wdXNoKGhhbmRsZXIpO1xufVxuXG5Ccm93c2VyLnByb3RvdHlwZS5hZGRGZWF0dXJlTGlzdGVuZXIgPSBmdW5jdGlvbihoYW5kbGVyLCBvcHRzKSB7XG4gICAgb3B0cyA9IG9wdHMgfHwge307XG4gICAgdGhpcy5mZWF0dXJlTGlzdGVuZXJzLnB1c2goaGFuZGxlcik7XG59XG5cbkJyb3dzZXIucHJvdG90eXBlLnJlbW92ZUZlYXR1cmVMaXN0ZW5lciA9IGZ1bmN0aW9uKGhhbmRsZXIsIG9wdHMpIHtcbiAgICB2YXIgaWR4ID0gYXJyYXlJbmRleE9mKHRoaXMuZmVhdHVyZUxpc3RlbmVycywgaGFuZGxlcik7XG4gICAgaWYgKGlkeCA+PSAwKSB7XG4gICAgICAgIHRoaXMuZmVhdHVyZUxpc3RlbmVycy5zcGxpY2UoaWR4LCAxKTtcbiAgICB9XG59XG5cbkJyb3dzZXIucHJvdG90eXBlLm5vdGlmeUZlYXR1cmUgPSBmdW5jdGlvbihldiwgZmVhdHVyZSwgaGl0LCB0aWVyKSB7XG4gIGZvciAodmFyIGZsaSA9IDA7IGZsaSA8IHRoaXMuZmVhdHVyZUxpc3RlbmVycy5sZW5ndGg7ICsrZmxpKSB7XG4gICAgICB0cnkge1xuICAgICAgICAgIGlmICh0aGlzLmZlYXR1cmVMaXN0ZW5lcnNbZmxpXShldiwgZmVhdHVyZSwgaGl0LCB0aWVyKSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgIH0gY2F0Y2ggKGV4KSB7XG4gICAgICAgICAgY29uc29sZS5sb2coZXguc3RhY2spO1xuICAgICAgfVxuICB9XG59XG5cbkJyb3dzZXIucHJvdG90eXBlLmFkZEZlYXR1cmVIb3Zlckxpc3RlbmVyID0gZnVuY3Rpb24oaGFuZGxlciwgb3B0cykge1xuICAgIG9wdHMgPSBvcHRzIHx8IHt9O1xuICAgIHRoaXMuZmVhdHVyZUhvdmVyTGlzdGVuZXJzLnB1c2goaGFuZGxlcik7XG59XG5cbkJyb3dzZXIucHJvdG90eXBlLnJlbW92ZUZlYXR1cmVIb3Zlckxpc3RlbmVyID0gZnVuY3Rpb24oaGFuZGxlciwgb3B0cykge1xuICAgIHZhciBpZHggPSBhcnJheUluZGV4T2YodGhpcy5mZWF0dXJlSG92ZXJMaXN0ZW5lcnMsIGhhbmRsZXIpO1xuICAgIGlmIChpZHggPj0gMCkge1xuICAgICAgICB0aGlzLmZlYXR1cmVIb3Zlckxpc3RlbmVycy5zcGxpY2UoaWR4LCAxKTtcbiAgICB9XG59XG5cbkJyb3dzZXIucHJvdG90eXBlLm5vdGlmeUZlYXR1cmVIb3ZlciA9IGZ1bmN0aW9uKGV2LCBmZWF0dXJlLCBoaXQsIHRpZXIpIHtcbiAgICBmb3IgKHZhciBmbGkgPSAwOyBmbGkgPCB0aGlzLmZlYXR1cmVIb3Zlckxpc3RlbmVycy5sZW5ndGg7ICsrZmxpKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLmZlYXR1cmVIb3Zlckxpc3RlbmVyc1tmbGldKGV2LCBmZWF0dXJlLCBoaXQsIHRpZXIpO1xuICAgICAgICB9IGNhdGNoIChleCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZXguc3RhY2spO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5Ccm93c2VyLnByb3RvdHlwZS5hZGRWaWV3TGlzdGVuZXIgPSBmdW5jdGlvbihoYW5kbGVyLCBvcHRzKSB7XG4gICAgb3B0cyA9IG9wdHMgfHwge307XG4gICAgdGhpcy52aWV3TGlzdGVuZXJzLnB1c2goaGFuZGxlcik7XG59XG5cbkJyb3dzZXIucHJvdG90eXBlLnJlbW92ZVZpZXdMaXN0ZW5lciA9IGZ1bmN0aW9uKGhhbmRsZXIsIG9wdHMpIHtcbiAgICB2YXIgaWR4ID0gYXJyYXlJbmRleE9mKHRoaXMudmlld0xpc3RlbmVycywgaGFuZGxlcik7XG4gICAgaWYgKGlkeCA+PSAwKSB7XG4gICAgICAgIHRoaXMudmlld0xpc3RlbmVycy5zcGxpY2UoaWR4LCAxKTtcbiAgICB9XG59XG5cbkJyb3dzZXIucHJvdG90eXBlLm5vdGlmeUxvY2F0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG52cyA9IE1hdGgubWF4KDEsIHRoaXMudmlld1N0YXJ0fDApO1xuICAgIHZhciBudmUgPSB0aGlzLnZpZXdFbmR8MDtcbiAgICBpZiAodGhpcy5jdXJyZW50U2VxTWF4ID4gMCAmJiBudmUgPiB0aGlzLmN1cnJlbnRTZXFNYXgpXG4gICAgICAgIG52ZSA9IHRoaXMuY3VycmVudFNlcU1heDtcblxuICAgIGZvciAodmFyIGxsaSA9IDA7IGxsaSA8IHRoaXMudmlld0xpc3RlbmVycy5sZW5ndGg7ICsrbGxpKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLnZpZXdMaXN0ZW5lcnNbbGxpXShcbiAgICAgICAgICAgICAgICB0aGlzLmNocixcbiAgICAgICAgICAgICAgICBudnMsXG4gICAgICAgICAgICAgICAgbnZlLFxuICAgICAgICAgICAgICAgIHRoaXMuem9vbVNsaWRlclZhbHVlLFxuICAgICAgICAgICAgICAgIHtjdXJyZW50OiB0aGlzLnpvb21TbGlkZXJWYWx1ZSxcbiAgICAgICAgICAgICAgICAgYWx0ZXJuYXRlOiAodGhpcy5zYXZlZFpvb20rdGhpcy56b29tTWluKSB8fCB0aGlzLnpvb21NaW4sXG4gICAgICAgICAgICAgICAgIGlzU25hcFpvb21pbmc6IHRoaXMuaXNTbmFwWm9vbWluZyxcbiAgICAgICAgICAgICAgICAgbWluOiB0aGlzLnpvb21NaW4sXG4gICAgICAgICAgICAgICAgIG1heDogdGhpcy56b29tTWF4fSxcbiAgICAgICAgICAgICAgICAgdGhpcy52aWV3U3RhcnQsXG4gICAgICAgICAgICAgICAgIHRoaXMudmlld0VuZCk7XG4gICAgICAgIH0gY2F0Y2ggKGV4KSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhleC5zdGFjayk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbkJyb3dzZXIucHJvdG90eXBlLmFkZFRpZXJMaXN0ZW5lciA9IGZ1bmN0aW9uKGhhbmRsZXIpIHtcbiAgICB0aGlzLnRpZXJMaXN0ZW5lcnMucHVzaChoYW5kbGVyKTtcbn1cblxuQnJvd3Nlci5wcm90b3R5cGUucmVtb3ZlVGllckxpc3RlbmVyID0gZnVuY3Rpb24oaGFuZGxlcikge1xuICAgIHZhciBpZHggPSBhcnJheUluZGV4T2YodGhpcy50aWVyTGlzdGVuZXJzLCBoYW5kbGVyKTtcbiAgICBpZiAoaWR4ID49IDApIHtcbiAgICAgICAgdGhpcy50aWVyTGlzdGVuZXJzLnNwbGljZShpZHgsIDEpO1xuICAgIH1cbn1cblxuQnJvd3Nlci5wcm90b3R5cGUubm90aWZ5VGllciA9IGZ1bmN0aW9uKHN0YXR1cywgdGllcikge1xuICAgIGZvciAodmFyIHRsaSA9IDA7IHRsaSA8IHRoaXMudGllckxpc3RlbmVycy5sZW5ndGg7ICsrdGxpKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLnRpZXJMaXN0ZW5lcnNbdGxpXShzdGF0dXMsIHRpZXIpO1xuICAgICAgICB9IGNhdGNoIChleCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZXguc3RhY2spO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5Ccm93c2VyLnByb3RvdHlwZS5hZGRSZWdpb25TZWxlY3RMaXN0ZW5lciA9IGZ1bmN0aW9uKGhhbmRsZXIpIHtcbiAgICB0aGlzLnJlZ2lvblNlbGVjdExpc3RlbmVycy5wdXNoKGhhbmRsZXIpO1xufVxuXG5Ccm93c2VyLnByb3RvdHlwZS5yZW1vdmVSZWdpb25TZWxlY3RMaXN0ZW5lciA9IGZ1bmN0aW9uKGhhbmRsZXIpIHtcbiAgICB2YXIgaWR4ID0gYXJyYXlJbmRleE9mKHRoaXMucmVnaW9uU2VsZWN0TGlzdGVuZXJzLCBoYW5kbGVyKTtcbiAgICBpZiAoaWR4ID49IDApIHtcbiAgICAgICAgdGhpcy5yZWdpb25TZWxlY3RMaXN0ZW5lcnMuc3BsaWNlKGlkeCwgMSk7XG4gICAgfVxufVxuXG5Ccm93c2VyLnByb3RvdHlwZS5ub3RpZnlSZWdpb25TZWxlY3QgPSBmdW5jdGlvbihjaHIsIG1pbiwgbWF4KSB7XG4gICAgZm9yICh2YXIgcmxpID0gMDsgcmxpIDwgdGhpcy5yZWdpb25TZWxlY3RMaXN0ZW5lcnMubGVuZ3RoOyArK3JsaSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5yZWdpb25TZWxlY3RMaXN0ZW5lcnNbcmxpXShjaHIsIG1pbiwgbWF4KTtcbiAgICAgICAgfSBjYXRjaCAoZXgpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGV4LnN0YWNrKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuXG5Ccm93c2VyLnByb3RvdHlwZS5oaWdobGlnaHRSZWdpb24gPSBmdW5jdGlvbihjaHIsIG1pbiwgbWF4KSB7XG4gICAgdmFyIHRoaXNCID0gdGhpcztcblxuICAgIGlmIChjaHIgPT0gdGhpcy5jaHIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2hpZ2hsaWdodFJlZ2lvbihjaHIsIG1pbiwgbWF4KTtcbiAgICB9XG5cbiAgICB2YXIgc3MgPSB0aGlzLmdldFNlcXVlbmNlU291cmNlKCk7XG4gICAgaWYgKCFzcykge1xuICAgICAgICB0aHJvdyAnTmVlZCBhIHNlcXVlbmNlIHNvdXJjZSc7XG4gICAgfVxuXG4gICAgc3MuZ2V0U2VxSW5mbyhjaHIsIGZ1bmN0aW9uKHNpKSB7XG4gICAgICAgIGlmICghc2kpIHtcbiAgICAgICAgICAgIHZhciBhbHRDaHI7XG4gICAgICAgICAgICBpZiAoY2hyLmluZGV4T2YoJ2NocicpID09IDApIHtcbiAgICAgICAgICAgICAgICBhbHRDaHIgPSBjaHIuc3Vic3RyKDMpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBhbHRDaHIgPSAnY2hyJyArIGNocjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNzLmdldFNlcUluZm8oYWx0Q2hyLCBmdW5jdGlvbihzaTIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXNpMikge1xuICAgICAgICAgICAgICAgICAgICAvLyBGYWlsIHNpbGVudGx5LlxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzQi5faGlnaGxpZ2h0UmVnaW9uKGFsdENociwgbWluLCBtYXgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXNCLl9oaWdobGlnaHRSZWdpb24oY2hyLCBtaW4sIG1heCk7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuQnJvd3Nlci5wcm90b3R5cGUuX2hpZ2hsaWdodFJlZ2lvbiA9IGZ1bmN0aW9uKGNociwgbWluLCBtYXgpIHtcbiAgICBmb3IgKHZhciBoaSA9IDA7IGhpIDwgdGhpcy5oaWdobGlnaHRzLmxlbmd0aDsgKytoaSkge1xuICAgICAgICB2YXIgaCA9IHRoaXMuaGlnaGxpZ2h0c1toaV07XG4gICAgICAgIGlmIChoLmNociA9PSBjaHIgJiYgaC5taW4gPT0gbWluICYmIGgubWF4ID09IG1heClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLmhpZ2hsaWdodHMucHVzaChuZXcgUmVnaW9uKGNociwgbWluLCBtYXgpKTtcbiAgICB2YXIgdmlzU3RhcnQgPSB0aGlzLnZpZXdTdGFydCAtICgxMDAwL3RoaXMuc2NhbGUpO1xuICAgIHZhciB2aXNFbmQgPSB0aGlzLnZpZXdFbmQgKyAoMTAwMC90aGlzLnNjYWxlKTtcbiAgICBpZiAoKGNociA9PSB0aGlzLmNociB8fCBjaHIgPT0gKCdjaHInK3RoaXMuY2hyKSkgJiYgbWluIDwgdmlzRW5kICYmIG1heCA+IHZpc1N0YXJ0KSB7XG4gICAgICAgIHRoaXMuZHJhd092ZXJsYXlzKCk7XG4gICAgfVxuXG4gICAgdGhpcy5ub3RpZnlMb2NhdGlvbigpO1xufVxuXG5Ccm93c2VyLnByb3RvdHlwZS5jbGVhckhpZ2hsaWdodHMgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmhpZ2hsaWdodHMgPSBbXTtcbiAgICB0aGlzLmRyYXdPdmVybGF5cygpO1xuICAgIHRoaXMubm90aWZ5TG9jYXRpb24oKTtcbn1cblxuQnJvd3Nlci5wcm90b3R5cGUuZHJhd092ZXJsYXlzID0gZnVuY3Rpb24oKSB7XG4gICAgZm9yICh2YXIgdGkgPSAwOyB0aSA8IHRoaXMudGllcnMubGVuZ3RoOyArK3RpKSB7XG4gICAgICAgIHRoaXMudGllcnNbdGldLmRyYXdPdmVybGF5KCk7XG4gICAgfVxufVxuXG5Ccm93c2VyLnByb3RvdHlwZS5mZWF0dXJlc0luUmVnaW9uID0gZnVuY3Rpb24oY2hyLCBtaW4sIG1heCkge1xuICAgIHZhciBmZWF0dXJlcyA9IFtdO1xuICAgIGlmIChjaHIgIT09IHRoaXMuY2hyKSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICBmb3IgKHZhciB0aSA9IDA7IHRpIDwgdGhpcy50aWVycy5sZW5ndGg7ICsrdGkpIHtcbiAgICAgICAgdmFyIGZsID0gdGhpcy50aWVyc1t0aV0uY3VycmVudEZlYXR1cmVzIHx8IFtdO1xuICAgICAgICBmb3IgKHZhciBmaSA9IDA7IGZpIDwgZmwubGVuZ3RoOyArK2ZpKSB7XG4gICAgICAgICAgICB2YXIgZiA9IGZsW2ZpXTtcbiAgICAgICAgICAgIGlmIChmLm1pbiA8PSBtYXggJiYgZi5tYXggPj0gbWluKSB7XG4gICAgICAgICAgICAgICAgZmVhdHVyZXMucHVzaChmKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmVhdHVyZXM7XG59XG5cblxuQnJvd3Nlci5wcm90b3R5cGUuZ2V0U2VsZWN0ZWRUaWVyID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMuc2VsZWN0ZWRUaWVycy5sZW5ndGggPiAwKVxuICAgICAgICByZXR1cm4gdGhpcy5zZWxlY3RlZFRpZXJzWzBdO1xuICAgIGVsc2VcbiAgICAgICAgcmV0dXJuIC0xO1xufVxuXG5Ccm93c2VyLnByb3RvdHlwZS5zZXRTZWxlY3RlZFRpZXIgPSBmdW5jdGlvbih0KSB7XG4gICAgaWYgKHQgPT0gbnVsbCkge1xuICAgICAgICB0aGlzLnNlbGVjdGVkVGllcnMgPSBbXTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnNlbGVjdGVkVGllcnMgPSBbdF07XG4gICAgfVxuICAgIHRoaXMubWFya1NlbGVjdGVkVGllcnMoKTtcbiAgICB0aGlzLm5vdGlmeVRpZXJTZWxlY3Rpb24oKTtcbn1cblxuQnJvd3Nlci5wcm90b3R5cGUubWFya1NlbGVjdGVkVGllcnMgPSBmdW5jdGlvbigpIHtcbiAgICBmb3IgKHZhciB0aSA9IDA7IHRpIDwgdGhpcy50aWVycy5sZW5ndGg7ICsrdGkpIHtcbiAgICAgICAgdmFyIGJ1dHRvbiA9IHRoaXMudGllcnNbdGldLm5hbWVCdXR0b247XG5cbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRUaWVycy5pbmRleE9mKHRpKSA+PSAwKSB7XG4gICAgICAgICAgICBidXR0b24uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBidXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRoaXMuc2VsZWN0ZWRUaWVycy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHZhciBicm93c2VyTWlkID0gdGhpcy5icm93c2VySG9sZGVyLm9mZnNldFRvcCArIHRoaXMuYnJvd3NlckhvbGRlci5vZmZzZXRIZWlnaHQvMjtcbiAgICAgICAgaWYgKGJyb3dzZXJNaWQgPiBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcCAmJiAoYnJvd3Nlck1pZCArIDEwMCkgPCBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcCArIHdpbmRvdy5pbm5lckhlaWdodClcbiAgICAgICAgICAgIHRoaXMuYnJvd3NlckhvbGRlci5mb2N1cygpO1xuICAgIH1cbn1cblxuQnJvd3Nlci5wcm90b3R5cGUuYWRkVGllclNlbGVjdGlvbkxpc3RlbmVyID0gZnVuY3Rpb24oaGFuZGxlcikge1xuICAgIHRoaXMudGllclNlbGVjdGlvbkxpc3RlbmVycy5wdXNoKGhhbmRsZXIpO1xufVxuXG5Ccm93c2VyLnByb3RvdHlwZS5yZW1vdmVUaWVyU2VsZWN0aW9uTGlzdGVuZXIgPSBmdW5jdGlvbihoYW5kbGVyKSB7XG4gICAgdmFyIGlkeCA9IGFycmF5SW5kZXhPZih0aGlzLnRpZXJTZWxlY3Rpb25MaXN0ZW5lcnMsIGhhbmRsZXIpO1xuICAgIGlmIChpZHggPj0gMCkge1xuICAgICAgICB0aGlzLnRpZXJTZWxlY3Rpb25MaXN0ZW5lcnMuc3BsaWNlKGlkeCwgMSk7XG4gICAgfVxufVxuXG5Ccm93c2VyLnByb3RvdHlwZS5ub3RpZnlUaWVyU2VsZWN0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgZm9yICh2YXIgZmxpID0gMDsgZmxpIDwgdGhpcy50aWVyU2VsZWN0aW9uTGlzdGVuZXJzLmxlbmd0aDsgKytmbGkpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMudGllclNlbGVjdGlvbkxpc3RlbmVyc1tmbGldKHRoaXMuc2VsZWN0ZWRUaWVycyk7XG4gICAgICAgIH0gY2F0Y2ggKGV4KSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhleC5zdGFjayk7XG4gICAgICAgIH1cbiAgICB9XG5cbn1cblxuQnJvd3Nlci5wcm90b3R5cGUuYWRkVGllclNlbGVjdGlvbldyYXBMaXN0ZW5lciA9IGZ1bmN0aW9uKGYpIHtcbiAgICB0aGlzLnRpZXJTZWxlY3Rpb25XcmFwTGlzdGVuZXJzLnB1c2goZik7XG59XG5cbkJyb3dzZXIucHJvdG90eXBlLnJlbW92ZVRpZXJTZWxlY3Rpb25XcmFwTGlzdGVuZXIgPSBmdW5jdGlvbihoYW5kbGVyKSB7XG4gICAgdmFyIGlkeCA9IGFycmF5SW5kZXhPZih0aGlzLnRpZXJTZWxlY3Rpb25XcmFwTGlzdGVuZXJzLCBoYW5kbGVyKTtcbiAgICBpZiAoaWR4ID49IDApIHtcbiAgICAgICAgdGhpcy50aWVyU2VsZWN0aW9uV3JhcExpc3RlbmVycy5zcGxpY2UoaWR4LCAxKTtcbiAgICB9XG59XG5cbkJyb3dzZXIucHJvdG90eXBlLm5vdGlmeVRpZXJTZWxlY3Rpb25XcmFwID0gZnVuY3Rpb24oaSkge1xuICAgIGZvciAodmFyIGZsaSA9IDA7IGZsaSA8IHRoaXMudGllclNlbGVjdGlvbldyYXBMaXN0ZW5lcnMubGVuZ3RoOyArK2ZsaSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy50aWVyU2VsZWN0aW9uV3JhcExpc3RlbmVyc1tmbGldKGkpO1xuICAgICAgICB9IGNhdGNoIChleCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZXguc3RhY2spO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5cbkJyb3dzZXIucHJvdG90eXBlLnBvc2l0aW9uUnVsZXIgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgZGlzcGxheSA9ICdub25lJztcbiAgICB2YXIgbGVmdCA9ICcnO1xuICAgIHZhciByaWdodCA9ICcnO1xuXG4gICAgaWYgKHRoaXMucnVsZXJMb2NhdGlvbiA9PSAnY2VudGVyJykge1xuICAgICAgICBkaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgbGVmdCA9ICcnICsgKCh0aGlzLmZlYXR1cmVQYW5lbFdpZHRoLzIpfDApICsgJ3B4JztcbiAgICB9IGVsc2UgaWYgKHRoaXMucnVsZXJMb2NhdGlvbiA9PSAnbGVmdCcpIHtcbiAgICAgICAgZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgIGxlZnQgPSAnMHB4JztcbiAgICB9IGVsc2UgaWYgKHRoaXMucnVsZXJMb2NhdGlvbiA9PSAncmlnaHQnKSB7XG4gICAgICAgIGRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICByaWdodCA9ICcwcHgnXG4gICAgfSBlbHNlIHtcbiAgICAgICAgZGlzcGxheSA9ICdub25lJztcbiAgICB9XG5cbiAgICB0aGlzLnJ1bGVyLnN0eWxlLmRpc3BsYXkgPSBkaXNwbGF5O1xuICAgIHRoaXMucnVsZXIuc3R5bGUubGVmdCA9IGxlZnQ7XG4gICAgdGhpcy5ydWxlci5zdHlsZS5yaWdodCA9IHJpZ2h0O1xuXG4gICAgaWYodGhpcy5zaW5nbGVCYXNlSGlnaGxpZ2h0KSB7XG4gICAgICAgIHRoaXMucnVsZXIyLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICB0aGlzLnJ1bGVyMi5zdHlsZS5ib3JkZXJXaWR0aCA9ICcxcHgnO1xuICAgICAgICBpZiAodGhpcy5zY2FsZSA8IDEpIHtcbiAgICAgICAgICAgIHRoaXMucnVsZXIyLnN0eWxlLndpZHRoID0gJzBweCc7XG4gICAgICAgICAgICB0aGlzLnJ1bGVyMi5zdHlsZS5ib3JkZXJSaWdodFdpZHRoID0gJzBweCdcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucnVsZXIyLnN0eWxlLndpZHRoID0gdGhpcy5zY2FsZSArICdweCc7XG4gICAgICAgICAgICB0aGlzLnJ1bGVyMi5zdHlsZS5ib3JkZXJSaWdodFdpZHRoID0gJzFweCdcbiAgICAgICAgfVxuICAgICAgICAvLyBQb3NpdGlvbiBhY2NvbXBhbnlpbmcgc2luZ2xlIGJhc2UgbG9jYXRpb24gdGV4dFxuICAgICAgICB0aGlzLmxvY1NpbmdsZUJhc2Uuc3R5bGUudmlzaWJpbGl0eSA9ICd2aXNpYmxlJztcbiAgICAgICAgdmFyIGNlbnRyZU9mZnNldCA9IHRoaXMuZmVhdHVyZVBhbmVsV2lkdGgvMiAtIHRoaXMubG9jU2luZ2xlQmFzZS5vZmZzZXRXaWR0aC8yICsgdGhpcy5ydWxlcjIub2Zmc2V0V2lkdGgvMjtcbiAgICAgICAgdGhpcy5sb2NTaW5nbGVCYXNlLnN0eWxlLmxlZnQgPSAnJyArIChjZW50cmVPZmZzZXR8MCkgKyAncHgnO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMubG9jU2luZ2xlQmFzZS5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbic7XG4gICAgICAgIHRoaXMucnVsZXIyLnN0eWxlLndpZHRoID0gJzFweCc7XG4gICAgICAgIHRoaXMucnVsZXIyLnN0eWxlLmJvcmRlcldpZHRoID0gJzBweCc7XG4gICAgICAgIHRoaXMucnVsZXIyLnN0eWxlLmRpc3BsYXkgPSB0aGlzLnJ1bGVyTG9jYXRpb24gPT0gJ2NlbnRlcicgPyAnbm9uZScgOiAnYmxvY2snO1xuICAgIH1cblxuICAgIHRoaXMucnVsZXIyLnN0eWxlLmxlZnQgPSAnJyArICgodGhpcy5mZWF0dXJlUGFuZWxXaWR0aC8yKXwwKSArICdweCc7XG5cbiAgICBmb3IgKHZhciB0aSA9IDA7IHRpIDwgdGhpcy50aWVycy5sZW5ndGg7ICsrdGkpIHtcbiAgICAgICAgdmFyIHRpZXIgPSB0aGlzLnRpZXJzW3RpXTtcbiAgICAgICAgdmFyIHEgPSB0aWVyLnF1YW50T3ZlcmxheTtcblxuICAgICAgICB2YXIgcXVhbnQ7XG4gICAgICAgIGlmICh0aWVyLnN1YnRpZXJzICYmIHRpZXIuc3VidGllcnMubGVuZ3RoID4gMClcbiAgICAgICAgICAgIHF1YW50ID0gdGllci5zdWJ0aWVyc1swXS5xdWFudDtcblxuICAgICAgICBpZiAocSkge1xuICAgICAgICAgICAgcS5zdHlsZS5kaXNwbGF5ID0gcXVhbnQgPyBkaXNwbGF5IDogJ25vbmUnO1xuICAgICAgICAgICAgcS5zdHlsZS5sZWZ0ID0gbGVmdDtcbiAgICAgICAgICAgIHEuc3R5bGUucmlnaHQgPSByaWdodDtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuQnJvd3Nlci5wcm90b3R5cGUuZmVhdHVyZURvdWJsZUNsaWNrID0gZnVuY3Rpb24oaGl0LCByeCwgcnkpIHtcbiAgICBpZiAoIWhpdCB8fCBoaXQubGVuZ3RoID09IDApXG4gICAgICAgIHJldHVybjtcblxuICAgIHZhciBmID0gaGl0W2hpdC5sZW5ndGggLSAxXTtcblxuICAgIGlmICghZi5taW4gfHwgIWYubWF4KSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgZnN0YXJ0ID0gKCgoZi5taW58MCkgLSAodGhpcy52aWV3U3RhcnR8MCkpICogdGhpcy5zY2FsZSk7XG4gICAgdmFyIGZ3aWR0aCA9ICgoKGYubWF4IC0gZi5taW4pICsgMSkgKiB0aGlzLnNjYWxlKTtcblxuICAgIHZhciBuZXdNaWQgPSAoKChmLm1pbnwwKSArIChmLm1heHwwKSkpLzI7XG4gICAgaWYgKGZ3aWR0aCA+IDEwKSB7XG4gICAgICAgIHZhciBmcmFjID0gKDEuMCAqIChyeCAtIGZzdGFydCkpIC8gZndpZHRoO1xuICAgICAgICBpZiAoZnJhYyA8IDAuMykge1xuICAgICAgICAgICAgbmV3TWlkID0gKGYubWlufDApO1xuICAgICAgICB9IGVsc2UgIGlmIChmcmFjID4gMC43KSB7XG4gICAgICAgICAgICBuZXdNaWQgPSAoZi5tYXh8MCkgKyAxO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdmFyIHdpZHRoID0gdGhpcy52aWV3RW5kIC0gdGhpcy52aWV3U3RhcnQ7XG4gICAgdGhpcy5zZXRMb2NhdGlvbihudWxsLCBuZXdNaWQgLSAod2lkdGgvMiksIG5ld01pZCArICh3aWR0aC8yKSk7XG59XG5cbkJyb3dzZXIucHJvdG90eXBlLnpvb21Gb3JTY2FsZSA9IGZ1bmN0aW9uKHNjYWxlKSB7XG4gICAgdmFyIHNzU2NhbGU7XG4gICAgaWYgKHNjYWxlID4gdGhpcy5oaWdoWm9vbVRocmVzaG9sZCkge1xuICAgICAgICBzc1NjYWxlID0gJ2hpZ2gnO1xuICAgIH0gZWxzZSBpZiAoc2NhbGUgPiB0aGlzLm1lZGl1bVpvb21UaHJlc2hvbGQpIHtcbiAgICAgICAgc3NTY2FsZSA9ICdtZWRpdW0nO1xuICAgIH0gZWxzZSAge1xuICAgICAgICBzc1NjYWxlID0gJ2xvdyc7XG4gICAgfVxuICAgIHJldHVybiBzc1NjYWxlO1xufVxuXG5Ccm93c2VyLnByb3RvdHlwZS56b29tRm9yQ3VycmVudFNjYWxlID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuem9vbUZvclNjYWxlKHRoaXMuc2NhbGUpO1xufVxuXG5Ccm93c2VyLnByb3RvdHlwZS51cGRhdGVIZWlnaHQgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgdGllclRvdGFsID0gMDtcbiAgICBmb3IgKHZhciB0aSA9IDA7IHRpIDwgdGhpcy50aWVycy5sZW5ndGg7ICsrdGkpXG4gICAgICAgIHRpZXJUb3RhbCArPSAodGhpcy50aWVyc1t0aV0uY3VycmVudEhlaWdodCB8fCAzMCk7XG4gICAgdGhpcy5ydWxlci5zdHlsZS5oZWlnaHQgPSAnJyArIHRpZXJUb3RhbCArICdweCc7XG4gICAgdGhpcy5ydWxlcjIuc3R5bGUuaGVpZ2h0ID0gJycgKyB0aWVyVG90YWwgKyAncHgnO1xuICAgIHRoaXMuYnJvd3NlckhvbGRlci5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICB0aGlzLmJyb3dzZXJIb2xkZXIuc3R5bGUuZGlzcGxheSA9ICctd2Via2l0LWZsZXgnO1xuICAgIHRoaXMuYnJvd3NlckhvbGRlci5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuICAgIC8vIHRoaXMuc3ZnSG9sZGVyLnN0eWxlLm1heEhlaWdodCA9ICcnICsgTWF0aC5tYXgodGllclRvdGFsLCA1MDApICsgJ3B4Jztcbn1cblxuQnJvd3Nlci5wcm90b3R5cGUuc2Nyb2xsQXJyb3dLZXkgPSBmdW5jdGlvbihldiwgZGlyKSB7XG4gICAgaWYgKHRoaXMucmV2ZXJzZUtleVNjcm9sbGluZylcbiAgICAgICAgZGlyID0gLWRpcjtcblxuICAgIGlmIChldi5jdHJsS2V5IHx8IGV2Lm1ldGFLZXkpIHtcbiAgICAgICAgdmFyIGZlZGdlID0gZmFsc2U7XG4gICAgICAgIGlmKGV2LnNoaWZ0S2V5KXtcbiAgICAgICAgICAgIGZlZGdlID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMubGVhcChkaXIsIGZlZGdlKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuc2NhbGUgPiAxKSB7XG4gICAgICAgIC8vIHBlci1iYXNlIHNjcm9sbGluZyBtb2RlLCB0cmllcyB0byBwZXJmZWN0bHkgY2VudGVyLlxuICAgICAgICB2YXIgbWlkID0gKHRoaXMudmlld1N0YXJ0ICsgdGhpcy52aWV3RW5kKS8yXG4gICAgICAgIHZhciBlcnIgPSBtaWQgLSBNYXRoLnJvdW5kKG1pZCk7XG4gICAgICAgIHZhciBuID0gMTtcbiAgICAgICAgaWYgKGV2LnNoaWZ0S2V5KVxuICAgICAgICAgICAgbiAqPSAxMDtcbiAgICAgICAgaWYgKGRpciA+IDApIHtcbiAgICAgICAgICAgIG4gPSAtbjtcbiAgICAgICAgICAgIG4gLT0gZXJyO1xuICAgICAgICAgICAgaWYgKGVyciA+IDApXG4gICAgICAgICAgICAgICAgbiArPSAxO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbiAtPSBlcnI7XG4gICAgICAgICAgICBpZiAoZXJyIDwgMClcbiAgICAgICAgICAgICAgICBuIC09IDE7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZXRMb2NhdGlvbihudWxsLCB0aGlzLnZpZXdTdGFydCArIG4sIHRoaXMudmlld0VuZCArIG4pO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMubW92ZShldi5zaGlmdEtleSA/IDEwMCpkaXIgOiAyNSpkaXIpO1xuICAgIH1cbn1cblxuQnJvd3Nlci5wcm90b3R5cGUubGVhcCA9IGZ1bmN0aW9uKGRpciwgZmVkZ2UpIHtcbiAgICB2YXIgdGhpc0IgPSB0aGlzO1xuICAgIHZhciBwb3M9KCh0aGlzQi52aWV3U3RhcnQgKyB0aGlzQi52aWV3RW5kICsgMSkvMil8MDtcbiAgICBpZiAoZGlyID4gMCAmJiB0aGlzQi52aWV3U3RhcnQgPD0gMSkge1xuICAgICAgICBwb3MgLT0gMTAwMDAwMDAwO1xuICAgIH0gZWxzZSBpZiAoZGlyIDwgMCAmJiB0aGlzQi52aWV3RW5kID49IHRoaXNCLmN1cnJlbnRTZXFNYXgpIHtcbiAgICAgICAgcG9zICs9IDEwMDAwMDAwMDtcbiAgICB9XG5cbiAgICB2YXIgc3QgPSB0aGlzQi5nZXRTZWxlY3RlZFRpZXIoKTtcbiAgICBpZiAoc3QgPCAwKSByZXR1cm47XG4gICAgdmFyIHRpZXIgPSB0aGlzQi50aWVyc1tzdF07XG5cbiAgICBpZiAodGllciAmJiAoKHRpZXIuZmVhdHVyZVNvdXJjZSAmJiB0aGlzLnNvdXJjZUFkYXB0ZXJJc0NhcGFibGUodGllci5mZWF0dXJlU291cmNlLCAncXVhbnRMZWFwJykgJiYgdHlwZW9mKHRpZXIucXVhbnRMZWFwVGhyZXNob2xkKSA9PSAnbnVtYmVyJylcbiAgICAgICAgICAgICAgICAgfHwgKHRpZXIuZmVhdHVyZVNvdXJjZSAmJiB0aGlzLnNvdXJjZUFkYXB0ZXJJc0NhcGFibGUodGllci5mZWF0dXJlU291cmNlLCAnbGVhcCcpKSkpIHtcbiAgICAgICAgdGllci5maW5kTmV4dEZlYXR1cmUoXG4gICAgICAgICAgICAgIHRoaXNCLmNocixcbiAgICAgICAgICAgICAgcG9zLFxuICAgICAgICAgICAgICAtZGlyLFxuICAgICAgICAgICAgICBmZWRnZSxcbiAgICAgICAgICAgICAgZnVuY3Rpb24obnh0KSB7XG4gICAgICAgICAgICAgICAgICBpZiAobnh0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgdmFyIG5taW4gPSBueHQubWluO1xuICAgICAgICAgICAgICAgICAgICAgIHZhciBubWF4ID0gbnh0Lm1heDtcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoZmVkZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkaXIgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChubWluPnBvcysxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBubWF4PW5taW47XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBubWF4Kys7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBubWluPW5tYXhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobm1heDxwb3MtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBubWF4Kys7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5taW49bm1heDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBubWF4PW5taW47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICB2YXIgd2lkID0gdGhpc0Iudmlld0VuZCAtIHRoaXNCLnZpZXdTdGFydCArIDE7XG4gICAgICAgICAgICAgICAgICAgICAgaWYocGFyc2VGbG9hdCh3aWQvMikgPT0gcGFyc2VJbnQod2lkLzIpKXt3aWQtLTt9XG4gICAgICAgICAgICAgICAgICAgICAgdmFyIG5ld1N0YXJ0ID0gKG5taW4gKyBubWF4IC0gd2lkKS8yICsgMTtcbiAgICAgICAgICAgICAgICAgICAgICB2YXIgbmV3RW5kID0gbmV3U3RhcnQgKyB3aWQgLSAxO1xuICAgICAgICAgICAgICAgICAgICAgIHZhciBwb3MyPXBvcztcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzQi5zZXRMb2NhdGlvbihueHQuc2VnbWVudCwgbmV3U3RhcnQsIG5ld0VuZCk7XG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KCdubyBuZXh0IGZlYXR1cmUnKTsgLy8gRklYTUUgYmV0dGVyIHJlcG9ydGluZyB3b3VsZCBiZSBuaWNlIVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLm1vdmUoMTAwKmRpcik7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBnbHlwaExvb2t1cChnbHlwaHMsIHJ4LCByeSwgbWF0Y2hlcykge1xuICAgIG1hdGNoZXMgPSBtYXRjaGVzIHx8IFtdO1xuXG4gICAgZm9yICh2YXIgZ2kgPSBnbHlwaHMubGVuZ3RoIC0gMTsgZ2kgPj0gMDsgLS1naSkge1xuICAgICAgICB2YXIgZyA9IGdseXBoc1tnaV07XG4gICAgICAgIGlmICghZy5ub3RTZWxlY3RhYmxlICYmIGcubWluKCkgPD0gcnggJiYgZy5tYXgoKSA+PSByeCkge1xuICAgICAgICAgICAgaWYgKGcubWluWSkge1xuICAgICAgICAgICAgICAgIGlmIChyeSA8IGcubWluWSgpIHx8IHJ5ID4gZy5tYXhZKCkpXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoZy5mZWF0dXJlKSB7XG4gICAgICAgICAgICAgICAgbWF0Y2hlcy5wdXNoKGcuZmVhdHVyZSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGcuZ3JvdXApIHtcbiAgICAgICAgICAgICAgICBtYXRjaGVzLnB1c2goZy5ncm91cCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChnLmdseXBocykge1xuICAgICAgICAgICAgICAgIHJldHVybiBnbHlwaExvb2t1cChnLmdseXBocywgcngsIHJ5LCBtYXRjaGVzKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZy5nbHlwaCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBnbHlwaExvb2t1cChbZy5nbHlwaF0sIHJ4LCByeSwgbWF0Y2hlcyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBtYXRjaGVzO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBtYXRjaGVzO1xufVxuXG5Ccm93c2VyLnByb3RvdHlwZS5uYW1lRm9yQ29vcmRTeXN0ZW0gPSBmdW5jdGlvbihjcykge1xuICAgIHZhciBwcmltYXJ5ID0gbnVsbCwgdWNzYyA9IG51bGw7XG4gICAgaWYgKHRoaXMuYXNzZW1ibHlOYW1lUHJpbWFyeSkge1xuICAgICAgICBwcmltYXJ5ID0gJycgKyBjcy5hdXRoO1xuICAgICAgICBpZiAodHlwZW9mKGNzLnZlcnNpb24pICE9PSAndW5kZWZpbmVkJylcbiAgICAgICAgICAgIHByaW1hcnkgKz0gY3MudmVyc2lvbjtcbiAgICB9XG4gICAgaWYgKHRoaXMuYXNzZW1ibHlOYW1lVWNzYykge1xuICAgICAgICB1Y3NjID0gY3MudWNzY05hbWU7XG4gICAgfVxuICAgIGlmIChwcmltYXJ5ICE9IG51bGwgJiYgdWNzYyAhPSBudWxsKVxuICAgICAgICByZXR1cm4gcHJpbWFyeSArICcvJyArIHVjc2M7XG4gICAgZWxzZVxuICAgICAgICByZXR1cm4gcHJpbWFyeSB8fCB1Y3NjIHx8ICd1bmtub3duJztcbn1cblxuQnJvd3Nlci5wcm90b3R5cGUubWFrZUxvYWRlciA9IGZ1bmN0aW9uKHNpemUpIHtcbiAgICBzaXplID0gc2l6ZSB8fCAxNjtcbiAgICB2YXIgcmV0aW5hID0gd2luZG93LmRldmljZVBpeGVsUmF0aW8gPiAxO1xuICAgIGlmIChzaXplIDwgMjApIHtcbiAgICAgICAgcmV0dXJuIG1ha2VFbGVtZW50KCdpbWcnLCBudWxsLCB7c3JjOiB0aGlzLnJlc29sdmVVUkwoJyQkaW1nL3NwaW5uZXJfJyArIChyZXRpbmEgPyAxNiA6IDMyKSArICcuZ2lmJyksIHdpZHRoOiAnMTYnLCBoZWlnaHQ6ICcxNid9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gbWFrZUVsZW1lbnQoJ2ltZycsIG51bGwsIHtzcmM6IHRoaXMucmVzb2x2ZVVSTCgnJCRpbWcvc3Bpbm5lcl8nICsgKHJldGluYSA/IDI0IDogNDgpICsgJy5naWYnKSwgd2lkdGg6ICcyNCcsIGhlaWdodDogJzI0J30pO1xuICAgIH1cbn1cblxuQnJvd3Nlci5wcm90b3R5cGUuY2FuRmV0Y2hQbGFpbkhUVFAgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgaWYgKCF0aGlzLl9wbGFpbkhUVFBQcm9taXNlKSB7XG4gICAgICAgIHZhciB3b3JrZXIgPSB0aGlzLmdldFdvcmtlcigpO1xuICAgICAgICBpZiAod29ya2VyKSB7XG4gICAgICAgICAgICB0aGlzLl9wbGFpbkhUVFBQcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgd29ya2VyLnBvc3RDb21tYW5kKFxuICAgICAgICAgICAgICAgICAgICB7Y29tbWFuZDogJ3RleHR4aHInLFxuICAgICAgICAgICAgICAgICAgICAgdXJpOiBzZWxmLmh0dHBDYW5hcnlVUkx9LFxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbihyZXN1bHQsIGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgdGhpcy5fcGxhaW5IVFRQUHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgIHRleHRYSFIoXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuaHR0cENhbmFyeVVSTCxcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24ocmVzdWx0LCBlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge3RpbWVvdXQ6IDIwMDB9XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9wbGFpbkhUVFBQcm9taXNlO1xufVxuXG5Ccm93c2VyLnByb3RvdHlwZS5nZXRXb3JrZXIgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoIXRoaXMudXNlRmV0Y2hXb3JrZXJzIHx8ICF0aGlzLmZldGNoV29ya2VycyB8fCB0aGlzLmZldGNoV29ya2Vycy5sZW5ndGg9PTApXG4gICAgICAgIHJldHVybiBudWxsO1xuXG4gICAgaWYgKHRoaXMubmV4dFdvcmtlciA+PSB0aGlzLmZldGNoV29ya2Vycy5sZW5ndGgpXG4gICAgICAgIHRoaXMubmV4dFdvcmtlciA9IDA7XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2hXb3JrZXJzW3RoaXMubmV4dFdvcmtlcisrXTtcbn1cblxuQnJvd3Nlci5wcm90b3R5cGUucmVnaXN0ZXJSZXNvbHZlciA9IGZ1bmN0aW9uKHJlc29sdmVyKSB7XG4gICAgdmFyIGlkID0gJ3JlcycgKyAoKyt0aGlzLnJlc29sdmVyU2VlZCk7XG4gICAgdGhpcy5yZXNvbHZlcnNbaWRdID0gcmVzb2x2ZXI7XG4gICAgcmV0dXJuIGlkO1xufVxuXG5mdW5jdGlvbiBGZXRjaFdvcmtlcihicm93c2VyLCB3b3JrZXIpIHtcbiAgICB2YXIgdGhpc0IgPSB0aGlzO1xuICAgIHRoaXMudGFnU2VlZCA9IDA7XG4gICAgdGhpcy5jYWxsYmFja3MgPSB7fTtcbiAgICB0aGlzLmJyb3dzZXIgPSBicm93c2VyO1xuICAgIHRoaXMud29ya2VyID0gd29ya2VyO1xuXG4gICAgdGhpcy53b3JrZXIub25tZXNzYWdlID0gZnVuY3Rpb24oZXYpIHtcbiAgICAgICAgdmFyIGRhdGEgPSBldi5kYXRhO1xuXG4gICAgICAgIGlmICghZGF0YS5jbWQpIHtcbiAgICAgICAgICAgIHZhciBjYiA9IHRoaXNCLmNhbGxiYWNrc1tkYXRhLnRhZ107XG4gICAgICAgICAgICBpZiAoY2IpIHtcbiAgICAgICAgICAgICAgICBjYihkYXRhLnJlc3VsdCwgZGF0YS5lcnJvcik7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXNCLmNhbGxiYWNrc1tkYXRhLnRhZ107XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoZGF0YS5jbWQgPT0gJ3Jlc29sdmUnKSB7XG4gICAgICAgICAgICB2YXIgcmVzb2x2ZXIgPSB0aGlzQi5icm93c2VyLnJlc29sdmVyc1tkYXRhLnJlc29sdmVyXTtcbiAgICAgICAgICAgIGlmIChyZXNvbHZlcikge1xuICAgICAgICAgICAgICAgIHJlc29sdmVyKGRhdGEudXJsKS50aGVuKGZ1bmN0aW9uKHVybCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzQi53b3JrZXIucG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFnOiBkYXRhLnRhZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHVybDogdXJsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uKGVycil7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgICAgICAgICAgIHRoaXNCLndvcmtlci5wb3N0TWVzc2FnZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YWc6IGRhdGEudGFnLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyOiBlcnIudG9TdHJpbmcoKVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ05vIHJlc29sdmVyICcgKyBkYXRhLnJlc29sdmVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdCYWQgd29ya2VyIGNhbGxiYWNrICcgKyBkYXRhLmNtZCk7XG4gICAgICAgIH1cbiAgICB9O1xufVxuXG5mdW5jdGlvbiBtYWtlRmV0Y2hXb3JrZXIoYnJvd3Nlcikge1xuICAgIHZhciB3dXJsID0gYnJvd3Nlci5yZXNvbHZlVVJMKGJyb3dzZXIud29ya2VyUGF0aCk7XG4gICAgaWYgKHd1cmwuaW5kZXhPZignLy8nKSA9PSAwKSB7XG4gICAgICAgIHZhciBwcm90byA9IHdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbDtcbiAgICAgICAgaWYgKHByb3RvID09ICdodHRwczonKVxuICAgICAgICAgICAgd3VybCA9ICdodHRwczonICsgd3VybDtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgd3VybCA9ICdodHRwOicgKyB3dXJsO1xuICAgIH1cblxuICAgIHZhciB3c2NyaXB0ID0gJ2ltcG9ydFNjcmlwdHMoXCInICsgd3VybCArICc/dmVyc2lvbj0nICsgVkVSU0lPTiArICdcIik7JztcbiAgICB2YXIgd2Jsb2IgPSBuZXcgQmxvYihbd3NjcmlwdF0sIHt0eXBlOiAnYXBwbGljYXRpb24vamF2YXNjcmlwdCd9KTtcblxuXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICB2YXIgd29ya2VyID0gbmV3IFdvcmtlcihVUkwuY3JlYXRlT2JqZWN0VVJMKHdibG9iKSk7XG5cbiAgICAgICAgd29ya2VyLm9ubWVzc2FnZSA9IGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgICAgICBpZiAoZXYuZGF0YS50YWcgPT09ICdpbml0Jykge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdXb3JrZXIgaW5pdGlhbGl6ZWQnKTtcbiAgICAgICAgICAgICAgICByZXNvbHZlKG5ldyBGZXRjaFdvcmtlcihicm93c2VyLCB3b3JrZXIpKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgIH1cblxuICAgICAgICB3b3JrZXIub25lcnJvciA9IGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgICAgICByZWplY3QoZXYubWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuRmV0Y2hXb3JrZXIucHJvdG90eXBlLnBvc3RDb21tYW5kID0gZnVuY3Rpb24oY21kLCBjYWxsYmFjaywgdHJhbnNmZXIpIHtcbiAgICB2YXIgdGFnID0gJ3gnICsgKCsrdGhpcy50YWdTZWVkKTtcbiAgICBjbWQudGFnID0gdGFnO1xuICAgIHRoaXMuY2FsbGJhY2tzW3RhZ10gPSBjYWxsYmFjaztcbiAgICB0aGlzLndvcmtlci5wb3N0TWVzc2FnZShjbWQsIHRyYW5zZmVyKTtcbn1cblxuRmV0Y2hXb3JrZXIucHJvdG90eXBlLnRlcm1pbmF0ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMud29ya2VyLnRlcm1pbmF0ZSgpO1xufVxuXG5pZiAodHlwZW9mKG1vZHVsZSkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgICAgIEJyb3dzZXI6IEJyb3dzZXJcbiAgICB9O1xuXG4gICAgLy8gUmVxdWlyZWQgYmVjYXVzZSB0aGV5IGFkZCBzdHVmZiB0byBCcm93c2VyLnByb3RvdHlwZVxuICAgIHJlcXVpcmUoJy4vYnJvd3Nlci11aScpO1xuICAgIHJlcXVpcmUoJy4vdHJhY2stYWRkZXInKTtcbiAgICByZXF1aXJlKCcuL2ZlYXR1cmUtcG9wdXAnKTtcbiAgICByZXF1aXJlKCcuL3RpZXItYWN0aW9ucycpO1xuICAgIHJlcXVpcmUoJy4vZG9tdWknKTtcbiAgICByZXF1aXJlKCcuL3NlYXJjaCcpO1xuXG4gICAgdmFyIHNhID0gcmVxdWlyZSgnLi9zb3VyY2VhZGFwdGVycycpO1xuICAgIHZhciBUd29CaXRTZXF1ZW5jZVNvdXJjZSA9IHNhLlR3b0JpdFNlcXVlbmNlU291cmNlO1xuICAgIHZhciBFbnNlbWJsU2VxdWVuY2VTb3VyY2UgPSBzYS5FbnNlbWJsU2VxdWVuY2VTb3VyY2U7XG4gICAgdmFyIERBU1NlcXVlbmNlU291cmNlID0gc2EuREFTU2VxdWVuY2VTb3VyY2U7XG5cbiAgICB2YXIgS25vd25TcGFjZSA9IHJlcXVpcmUoJy4va3NwYWNlJykuS25vd25TcGFjZTtcblxuICAgIHZhciBEQVNSZWdpc3RyeSA9IHJlcXVpcmUoJy4vZGFzJykuREFTUmVnaXN0cnk7XG59XG5cbmZ1bmN0aW9uIFNvdXJjZUNhY2hlKCkge1xuICAgIHRoaXMuc291cmNlc0J5VVJJID0ge31cbn1cblxuU291cmNlQ2FjaGUucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uKGNvbmYpIHtcbiAgICB2YXIgc2NiID0gdGhpcy5zb3VyY2VzQnlVUklbc291cmNlRGF0YVVSSShjb25mKV07XG4gICAgaWYgKHNjYikge1xuICAgICAgICBmb3IgKHZhciBzaSA9IDA7IHNpIDwgc2NiLmNvbmZpZ3MubGVuZ3RoOyArK3NpKSB7XG4gICAgICAgICAgICBpZiAoc291cmNlc0FyZUVxdWFsTW9kdWxvU3R5bGUoc2NiLmNvbmZpZ3Nbc2ldLCBjb25mKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBzY2Iuc291cmNlc1tzaV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5cblNvdXJjZUNhY2hlLnByb3RvdHlwZS5wdXQgPSBmdW5jdGlvbihjb25mLCBzb3VyY2UpIHtcbiAgICB2YXIgdXJpID0gc291cmNlRGF0YVVSSShjb25mKTtcbiAgICB2YXIgc2NiID0gdGhpcy5zb3VyY2VzQnlVUklbdXJpXTtcbiAgICBpZiAoIXNjYikge1xuICAgICAgICBzY2IgPSB7Y29uZmlnczogW10sIHNvdXJjZXM6IFtdfTtcbiAgICAgICAgdGhpcy5zb3VyY2VzQnlVUklbdXJpXSA9IHNjYjtcbiAgICB9XG4gICAgc2NiLmNvbmZpZ3MucHVzaChjb25mKTtcbiAgICBzY2Iuc291cmNlcy5wdXNoKHNvdXJjZSk7XG59XG4iLCIvKiAtKi0gbW9kZTogamF2YXNjcmlwdDsgYy1iYXNpYy1vZmZzZXQ6IDQ7IGluZGVudC10YWJzLW1vZGU6IG5pbCAtKi0gKi9cblxuLy8gXG4vLyBEYWxsaWFuY2UgR2Vub21lIEV4cGxvcmVyXG4vLyAoYykgVGhvbWFzIERvd24gMjAwNi0yMDEwXG4vL1xuLy8gY2hhaW5zZXQuanM6IGxpZnRvdmVyIHN1cHBvcnRcbi8vXG5cblwidXNlIHN0cmljdFwiO1xuXG5pZiAodHlwZW9mKHJlcXVpcmUpICE9PSAndW5kZWZpbmVkJykge1xuICAgIHZhciBkYXMgPSByZXF1aXJlKCcuL2RhcycpO1xuICAgIHZhciBEQVNTb3VyY2UgPSBkYXMuREFTU291cmNlO1xuICAgIHZhciBEQVNTZWdtZW50ID0gZGFzLkRBU1NlZ21lbnQ7XG5cbiAgICB2YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XG4gICAgdmFyIHB1c2hvID0gdXRpbHMucHVzaG87XG4gICAgdmFyIHNoYWxsb3dDb3B5ID0gdXRpbHMuc2hhbGxvd0NvcHk7XG5cbiAgICB2YXIgcGFyc2VDaWdhciA9IHJlcXVpcmUoJy4vY2lnYXInKS5wYXJzZUNpZ2FyO1xuXG4gICAgdmFyIGJpbiA9IHJlcXVpcmUoJy4vYmluJyk7XG4gICAgdmFyIFVSTEZldGNoYWJsZSA9IGJpbi5VUkxGZXRjaGFibGU7XG5cbiAgICB2YXIgYmJpID0gcmVxdWlyZSgnLi9iaWd3aWcnKTtcbiAgICB2YXIgbWFrZUJ3ZyA9IGJiaS5tYWtlQndnO1xuXG4gICAgdmFyIFByb21pc2UgPSByZXF1aXJlKCdlczYtcHJvbWlzZScpLlByb21pc2U7XG59XG5cbmZ1bmN0aW9uIENoYWluc2V0KGNvbmYsIHNyY1RhZywgZGVzdFRhZywgY29vcmRzKSB7XG4gICAgaWYgKHR5cGVvZihjb25mKSA9PSAnc3RyaW5nJykge1xuICAgICAgICB0aGlzLnVyaSA9IGNvbmY7XG4gICAgICAgIHRoaXMuc3JjVGFnID0gc3JjVGFnO1xuICAgICAgICB0aGlzLmRlc3RUYWcgPSBkZXN0VGFnO1xuICAgICAgICB0aGlzLmNvb3JkcyA9IGNvb3JkcztcbiAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnVyaSA9IGNvbmYudXJpO1xuICAgICAgICB0aGlzLnNyY1RhZyA9IGNvbmYuc3JjVGFnO1xuICAgICAgICB0aGlzLmRlc3RUYWcgPSBjb25mLmRlc3RUYWc7XG4gICAgICAgIHRoaXMuY29vcmRzID0gc2hhbGxvd0NvcHkoY29uZi5jb29yZHMpO1xuICAgICAgICB0aGlzLnR5cGUgPSBjb25mLnR5cGU7XG4gICAgICAgIHRoaXMuY3JlZGVudGlhbHMgPSBjb25mLmNyZWRlbnRpYWxzO1xuICAgIH1cblxuICAgIHRoaXMuY2hhaW5zQnlTcmMgPSB7fTtcbiAgICB0aGlzLmNoYWluc0J5RGVzdCA9IHt9O1xuICAgIHRoaXMucG9zdEZldGNoUXVldWVzID0ge307XG4gICAgdGhpcy5mZXRjaGVkVGlsZXMgPSB7fTtcbiAgICB0aGlzLmdyYW51bGFyaXR5ID0gMTAwMDAwMDsgIC8vIHNpemUgaW4gYmFzZXMgb2YgdGlsZSB0byBmZXRjaFxuXG4gICAgaWYgKHRoaXMudHlwZSA9PSAnYmlnYmVkJykge1xuICAgICAgICB0aGlzLmNoYWluRmV0Y2hlciA9IG5ldyBCQklDaGFpbkZldGNoZXIodGhpcy51cmksIHRoaXMuY3JlZGVudGlhbHMpO1xuICAgIH0gZWxzZSBpZiAodGhpcy50eXBlID09ICdhbGlhcycpIHtcbiAgICAgICAgdGhpcy5jaGFpbkZldGNoZXIgPSBuZXcgQWxpYXNDaGFpbkZldGNoZXIoY29uZik7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5jaGFpbkZldGNoZXIgPSBuZXcgREFTQ2hhaW5GZXRjaGVyKHRoaXMudXJpLCB0aGlzLnNyY1RhZywgdGhpcy5kZXN0VGFnKTtcbiAgICB9XG59O1xuXG5DaGFpbnNldC5wcm90b3R5cGUuZXhwb3J0Q29uZmlnID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdXJpOiB0aGlzLnVyaSxcbiAgICAgICAgc3JjVGFnOiB0aGlzLnNyY1RhZyxcbiAgICAgICAgZGVzdFRhZzogdGhpcy5kZXN0VGFnLFxuICAgICAgICBjb29yZHM6IHRoaXMuY29vcmRzLFxuICAgICAgICB0eXBlOiB0aGlzLnR5cGUsXG4gICAgICAgIGNyZWRlbnRpYWxzOiB0aGlzLmNyZWRlbnRpYWxzXG4gICAgfTtcbn1cblxuQ2hhaW5zZXQucHJvdG90eXBlLm1hcFBvaW50ID0gZnVuY3Rpb24oY2hyLCBwb3MpIHtcbiAgICB2YXIgY2hhaW5zID0gdGhpcy5jaGFpbnNCeVNyY1tjaHJdIHx8IFtdO1xuICAgIGZvciAodmFyIGNpID0gMDsgY2kgPCBjaGFpbnMubGVuZ3RoOyArK2NpKSB7XG4gICAgICAgIHZhciBjID0gY2hhaW5zW2NpXTtcbiAgICAgICAgaWYgKHBvcyA+PSBjLnNyY01pbiAmJiBwb3MgPD0gYy5zcmNNYXgpIHtcbiAgICAgICAgICAgIHZhciBjcG9zO1xuICAgICAgICAgICAgaWYgKGMuc3JjT3JpID09ICctJykge1xuICAgICAgICAgICAgICAgIGNwb3MgPSBjLnNyY01heCAtIHBvcztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY3BvcyA9IHBvcyAtIGMuc3JjTWluO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGJsb2NrcyA9IGMuYmxvY2tzO1xuICAgICAgICAgICAgZm9yICh2YXIgYmkgPSAwOyBiaSA8IGJsb2Nrcy5sZW5ndGg7ICsrYmkpIHtcbiAgICAgICAgICAgICAgICB2YXIgYiA9IGJsb2Nrc1tiaV07XG4gICAgICAgICAgICAgICAgdmFyIGJTcmMgPSBiWzBdO1xuICAgICAgICAgICAgICAgIHZhciBiRGVzdCA9IGJbMV07XG4gICAgICAgICAgICAgICAgdmFyIGJTaXplID0gYlsyXTtcbiAgICAgICAgICAgICAgICBpZiAoY3BvcyA+PSBiU3JjICYmIGNwb3MgPD0gKGJTcmMgKyBiU2l6ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFwb3MgPSBjcG9zIC0gYlNyYztcblxuICAgICAgICAgICAgICAgICAgICB2YXIgZHBvcztcbiAgICAgICAgICAgICAgICAgICAgaWYgKGMuZGVzdE9yaSA9PSAnLScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRwb3MgPSBjLmRlc3RNYXggLSBiRGVzdCAtIGFwb3M7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkcG9zID0gYXBvcyArIGJEZXN0ICsgYy5kZXN0TWluO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7c2VxOiBjLmRlc3RDaHIsIHBvczogZHBvcywgZmxpcHBlZDogKGMuc3JjT3JpICE9IGMuZGVzdE9yaSl9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufVxuXG5DaGFpbnNldC5wcm90b3R5cGUubWFwU2VnbWVudCA9IGZ1bmN0aW9uKGNociwgbWluLCBtYXgpIHtcbiAgICB2YXIgY2hhaW5zID0gdGhpcy5jaGFpbnNCeVNyY1tjaHJdIHx8IFtdO1xuICAgIHZhciBtYXBwaW5ncyA9IFtdO1xuICAgIGZvciAodmFyIGNpID0gMDsgY2kgPCBjaGFpbnMubGVuZ3RoOyArK2NpKSB7XG4gICAgICAgIHZhciBjID0gY2hhaW5zW2NpXTtcbiAgICAgICAgaWYgKG1heCA+PSBjLnNyY01pbiAmJiBtaW4gPD0gYy5zcmNNYXgpIHtcbiAgICAgICAgICAgIHZhciBjbWluLCBjbWF4O1xuICAgICAgICAgICAgaWYgKGMuc3JjT3JpID09ICctJykge1xuICAgICAgICAgICAgICAgIGNtaW4gPSBjLnNyY01heCAtIG1heDtcbiAgICAgICAgICAgICAgICBjbWF4ID0gYy5zcmNNYXggLSBtaW47XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNtaW4gPSBtaW4gLSBjLnNyY01pbjtcbiAgICAgICAgICAgICAgICBjbWF4ID0gbWF4IC0gYy5zcmNNaW47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgYmxvY2tzID0gYy5ibG9ja3M7XG4gICAgICAgICAgICBmb3IgKHZhciBiaSA9IDA7IGJpIDwgYmxvY2tzLmxlbmd0aDsgKytiaSkge1xuICAgICAgICAgICAgICAgIHZhciBiID0gYmxvY2tzW2JpXTtcbiAgICAgICAgICAgICAgICB2YXIgYlNyYyA9IGJbMF07XG4gICAgICAgICAgICAgICAgdmFyIGJEZXN0ID0gYlsxXTtcbiAgICAgICAgICAgICAgICB2YXIgYlNpemUgPSBiWzJdO1xuICAgICAgICAgICAgICAgIGlmIChjbWF4ID49IGJTcmMgJiYgY21pbiA8PSAoYlNyYyArIGJTaXplKSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlZ21lbnQ6IGMuZGVzdENocixcbiAgICAgICAgICAgICAgICAgICAgICAgIGZsaXBwZWQ6IChjLnNyY09yaSA9PSAnLScpIF4gKGMuZGVzdE9yaSA9PSAnLScpfTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoYy5kZXN0T3JpID09ICctJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNtaW4gPj0gYlNyYykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0ubWF4ID0gYy5kZXN0TWF4IC0gYkRlc3QgLSBjbWluICsgYlNyYztcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbS5tYXggPSBjLmRlc3RNYXggLSBiRGVzdDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtLnBhcnRpYWxNYXggPSBiU3JjIC0gY21pbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjbWF4IDw9IChiU3JjICsgYlNpemUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbS5taW4gPSBjLmRlc3RNYXggLSBiRGVzdCAtIGNtYXggKyBiU3JjO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtLm1pbiA9IGMuZGVzdE1heCAtIGJEZXN0IC0gYlNpemU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbS5wYXJ0aWFsTWluID0gY21heCAtIGJTcmMgLSBiU2l6ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjbWluID49IGJTcmMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtLm1pbiA9IGMuZGVzdE1pbiArIGJEZXN0ICsgY21pbiAtIGJTcmM7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0ubWluID0gYy5kZXN0TWluICsgYkRlc3Q7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbS5wYXJ0aWFsTWluID0gYlNyYyAtIGNtaW47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY21heCA8PSAoYlNyYyArIGJTaXplKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0ubWF4ID0gYy5kZXN0TWluICsgYkRlc3QgKyBjbWF4IC0gYlNyYztcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbS5tYXggPSBjLmRlc3RNaW4gKyBiRGVzdCArIGJTaXplO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0ucGFydGlhbE1heCA9IGNtYXggLSBiU3JjIC0gYlNpemU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbWFwcGluZ3MucHVzaChtKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG1hcHBpbmdzO1xufVxuXG5DaGFpbnNldC5wcm90b3R5cGUudW5tYXBQb2ludCA9IGZ1bmN0aW9uKGNociwgcG9zKSB7XG4gICAgdmFyIGNoYWlucyA9IHRoaXMuY2hhaW5zQnlEZXN0W2Nocl0gfHwgW107XG4gICAgZm9yICh2YXIgY2kgPSAwOyBjaSA8IGNoYWlucy5sZW5ndGg7ICsrY2kpIHtcbiAgICAgICAgdmFyIGMgPSBjaGFpbnNbY2ldO1xuICAgICAgICBpZiAocG9zID49IGMuZGVzdE1pbiAmJiBwb3MgPD0gYy5kZXN0TWF4KSB7XG4gICAgICAgICAgICB2YXIgY3BvcztcbiAgICAgICAgICAgIGlmIChjLnNyY09yaSA9PSAnLScpIHtcbiAgICAgICAgICAgICAgICBjcG9zID0gYy5kZXN0TWF4IC0gcG9zO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjcG9zID0gcG9zIC0gYy5kZXN0TWluO1xuICAgICAgICAgICAgfSAgICBcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdmFyIGJsb2NrcyA9IGMuYmxvY2tzO1xuICAgICAgICAgICAgZm9yICh2YXIgYmkgPSAwOyBiaSA8IGJsb2Nrcy5sZW5ndGg7ICsrYmkpIHtcbiAgICAgICAgICAgICAgICB2YXIgYiA9IGJsb2Nrc1tiaV07XG4gICAgICAgICAgICAgICAgdmFyIGJTcmMgPSBiWzBdO1xuICAgICAgICAgICAgICAgIHZhciBiRGVzdCA9IGJbMV07XG4gICAgICAgICAgICAgICAgdmFyIGJTaXplID0gYlsyXTtcblxuICAgICAgICAgICAgICAgIGlmIChjcG9zID49IGJEZXN0ICYmIGNwb3MgPD0gKGJEZXN0ICsgYlNpemUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBhcG9zID0gY3BvcyAtIGJEZXN0O1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBkcG9zID0gYXBvcyArIGJTcmMgKyBjLnNyY01pbjtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRwb3M7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjLmRlc3RPcmkgPT0gJy0nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkcG9zID0gYy5zcmNNYXggLSBiU3JjIC0gYXBvcztcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRwb3MgPSBhcG9zICsgYlNyYyArIGMuc3JjTWluO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7c2VxOiBjLnNyY0NociwgcG9zOiBkcG9zLCBmbGlwcGVkOiAoYy5zcmNPcmkgIT0gYy5kZXN0T3JpKX1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cblxuQ2hhaW5zZXQucHJvdG90eXBlLnNvdXJjZUJsb2Nrc0ZvclJhbmdlID0gZnVuY3Rpb24oY2hyLCBtaW4sIG1heCwgY2FsbGJhY2spIHtcbiAgICB2YXIgU1RBVEVfUEVORElORyA9IDE7XG4gICAgdmFyIFNUQVRFX0ZFVENIRUQgPSAyO1xuXG4gICAgdmFyIHRoaXNDUyA9IHRoaXM7XG4gICAgdmFyIG1pblRpbGUgPSAobWluL3RoaXMuZ3JhbnVsYXJpdHkpfDA7XG4gICAgdmFyIG1heFRpbGUgPSAobWF4L3RoaXMuZ3JhbnVsYXJpdHkpfDA7XG5cbiAgICB2YXIgbmVlZHNOZXdPclBlbmRpbmcgPSBmYWxzZTtcbiAgICB2YXIgbmVlZHNOZXdGZXRjaCA9IGZhbHNlO1xuICAgIGZvciAodmFyIHQgPSBtaW5UaWxlOyB0IDw9IG1heFRpbGU7ICsrdCkge1xuICAgICAgICB2YXIgdG4gPSBjaHIgKyAnXycgKyB0O1xuICAgICAgICBpZiAodGhpcy5mZXRjaGVkVGlsZXNbdG5dICE9IFNUQVRFX0ZFVENIRUQpIHtcbiAgICAgICAgICAgIG5lZWRzTmV3T3JQZW5kaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmICh0aGlzLmZldGNoZWRUaWxlc1t0bl0gIT0gU1RBVEVfUEVORElORykge1xuICAgICAgICAgICAgICAgIHRoaXMuZmV0Y2hlZFRpbGVzW3RuXSA9IFNUQVRFX1BFTkRJTkc7XG4gICAgICAgICAgICAgICAgbmVlZHNOZXdGZXRjaCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAobmVlZHNOZXdPclBlbmRpbmcpIHtcbiAgICAgICAgaWYgKCF0aGlzLnBvc3RGZXRjaFF1ZXVlc1tjaHJdKSB7XG4gICAgICAgICAgICB0aGlzLmNoYWluRmV0Y2hlci5mZXRjaENoYWlucyhcbiAgICAgICAgICAgICAgICBjaHIsIFxuICAgICAgICAgICAgICAgIG1pblRpbGUgKiB0aGlzLmdyYW51bGFyaXR5LCBcbiAgICAgICAgICAgICAgICAobWF4VGlsZSsxKSAqIHRoaXMuZ3JhbnVsYXJpdHkgLSAxKVxuICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihjaGFpbnMpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXNDUy5jaGFpbnNCeURlc3QpXG4gICAgICAgICAgICAgICAgICAgIHRoaXNDUy5jaGFpbnNCeURlc3RbY2hyXSA9IFtdO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGNpID0gMDsgY2kgPCBjaGFpbnMubGVuZ3RoOyArK2NpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjaGFpbiA9IGNoYWluc1tjaV07XG5cbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNicyA9IHRoaXNDUy5jaGFpbnNCeVNyY1tjaGFpbi5zcmNDaHJdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjYnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzQ1MuY2hhaW5zQnlTcmNbY2hhaW4uc3JjQ2hyXSA9IFtjaGFpbl07XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwcmVzZW50ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgb2NpID0gMDsgb2NpIDwgY2JzLmxlbmd0aDsgKytvY2kpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9jID0gY2JzW29jaV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvYy5zcmNNaW4gPT0gY2hhaW4uc3JjTWluICYmIG9jLnNyY01heCA9PSBjaGFpbi5zcmNNYXgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXNlbnQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFwcmVzZW50KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYnMucHVzaChjaGFpbik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2JkID0gdGhpc0NTLmNoYWluc0J5RGVzdFtjaGFpbi5kZXN0Q2hyXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY2JkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc0NTLmNoYWluc0J5RGVzdFtjaGFpbi5kZXN0Q2hyXSA9IFtjaGFpbl07XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwcmVzZW50ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgb2NpID0gMDsgb2NpIDwgY2JkLmxlbmd0aDsgKytvY2kpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9jID0gY2JkW29jaV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvYy5kZXN0TWluID09IGNoYWluLmRlc3RNaW4gJiYgb2MuZGVzdE1heCA9PSBjaGFpbi5kZXN0TWF4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmVzZW50ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcHJlc2VudClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2JkLnB1c2goY2hhaW4pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvciAodmFyIHQgPSBtaW5UaWxlOyB0IDw9IG1heFRpbGU7ICsrdCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdG4gPSBjaHIgKyAnXycgKyB0O1xuICAgICAgICAgICAgICAgICAgICB0aGlzQ1MuZmV0Y2hlZFRpbGVzW3RuXSA9IFNUQVRFX0ZFVENIRUQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0aGlzQ1MucG9zdEZldGNoUXVldWVzW2Nocl0pIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBmcSA9IHRoaXNDUy5wb3N0RmV0Y2hRdWV1ZXNbY2hyXTtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwZnEubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBmcVtpXSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXNDUy5wb3N0RmV0Y2hRdWV1ZXNbY2hyXSA9IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgICAgICAgfSk7ICAgXG4gICAgICAgIH1cblxuICAgICAgICBwdXNobyh0aGlzLnBvc3RGZXRjaFF1ZXVlcywgY2hyLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIC8vIFdpbGwgZWl0aGVyIHN1Y2NlZWQgaWYgdGhlIHRpbGVzIHRoYXQgYXJlIG5lZWRlZCBoYXZlIGFscmVhZHkgYmVlbiBmZXRjaGVkLFxuICAgICAgICAgICAgLy8gb3IgcXVldWUgdXAgYSBuZXcgZmV0Y2guXG5cbiAgICAgICAgICAgIHRoaXNDUy5zb3VyY2VCbG9ja3NGb3JSYW5nZShjaHIsIG1pbiwgbWF4LCBjYWxsYmFjayk7XG4gICAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBzcmNCbG9ja3MgPSBbXTtcbiAgICAgICAgdmFyIGNoYWlucyA9IHRoaXMuY2hhaW5zQnlEZXN0W2Nocl0gfHwgW107XG4gICAgICAgIGZvciAodmFyIGNpID0gMDsgY2kgPCBjaGFpbnMubGVuZ3RoOyArK2NpKSB7XG4gICAgICAgICAgICB2YXIgYyA9IGNoYWluc1tjaV07XG4gICAgICAgICAgICBpZiAobWluIDw9IGMuZGVzdE1heCAmJiBtYXggPj0gYy5kZXN0TWluKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNtaW4sIGNtYXg7XG4gICAgICAgICAgICAgICAgaWYgKGMuc3JjT3JpID09ICctJykge1xuICAgICAgICAgICAgICAgICAgICBjbWluID0gYy5kZXN0TWF4IC0gbWF4O1xuICAgICAgICAgICAgICAgICAgICBjbWF4ID0gYy5kZXN0TWF4IC0gbWluO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNtaW4gPSBtaW4gLSBjLmRlc3RNaW47XG4gICAgICAgICAgICAgICAgICAgIGNtYXggPSBtYXggLSBjLmRlc3RNaW47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIGJsb2NrcyA9IGMuYmxvY2tzO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGJpID0gMDsgYmkgPCBibG9ja3MubGVuZ3RoOyArK2JpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBiID0gYmxvY2tzW2JpXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJTcmMgPSBiWzBdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgYkRlc3QgPSBiWzFdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgYlNpemUgPSBiWzJdO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChjbWF4ID49IGJEZXN0ICYmIGNtaW4gPD0gKGJEZXN0ICsgYlNpemUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYW1pbiA9IE1hdGgubWF4KGNtaW4sIGJEZXN0KSAtIGJEZXN0O1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFtYXggPSBNYXRoLm1pbihjbWF4LCBiRGVzdCArIGJTaXplKSAtIGJEZXN0O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYy5kZXN0T3JpID09ICctJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNyY0Jsb2Nrcy5wdXNoKG5ldyBEQVNTZWdtZW50KGMuc3JjQ2hyLCBjLnNyY01heCAtIGJTcmMgLSBhbWF4LCBjLnNyY01heCAtIGJTcmMgLSBhbWluKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNyY0Jsb2Nrcy5wdXNoKG5ldyBEQVNTZWdtZW50KGMuc3JjQ2hyLCBjLnNyY01pbiArIGFtaW4gKyBiU3JjLCBjLnNyY01pbiArIGFtYXggKyBiU3JjKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2FsbGJhY2soc3JjQmxvY2tzKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIERBU0NoYWluRmV0Y2hlcih1cmksIHNyY1RhZywgZGVzdFRhZykge1xuICAgIHRoaXMuc291cmNlID0gbmV3IERBU1NvdXJjZSh1cmkpO1xuICAgIHRoaXMuc3JjVGFnID0gc3JjVGFnO1xuICAgIHRoaXMuZGVzdFRhZyA9ZGVzdFRhZztcbn1cblxuREFTQ2hhaW5GZXRjaGVyLnByb3RvdHlwZS5mZXRjaENoYWlucyA9IGZ1bmN0aW9uKGNociwgX21pbiwgX21heCkge1xuICAgIHZhciB0aGlzQ1MgPSB0aGlzO1xuXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICB0aGlzQ1Muc291cmNlLmFsaWdubWVudHMoY2hyLCB7fSwgZnVuY3Rpb24oYWxpZ25zKSB7XG4gICAgICAgICAgICB2YXIgY2hhaW5zID0gW107XG5cbiAgICAgICAgICAgIGZvciAodmFyIGFpID0gMDsgYWkgPCBhbGlnbnMubGVuZ3RoOyArK2FpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGFsbiA9IGFsaWduc1thaV07XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgYmkgPSAwOyBiaSA8IGFsbi5ibG9ja3MubGVuZ3RoOyArK2JpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBibG9jayA9IGFsbi5ibG9ja3NbYmldO1xuICAgICAgICAgICAgICAgICAgICB2YXIgc3JjU2VnLCBkZXN0U2VnO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBzaSA9IDA7IHNpIDwgYmxvY2suc2VnbWVudHMubGVuZ3RoOyArK3NpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2VnID0gYmxvY2suc2VnbWVudHNbc2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9iaiA9IGFsbi5vYmplY3RzW3NlZy5vYmplY3RdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9iai5kYlNvdXJjZSA9PT0gdGhpc0NTLnNyY1RhZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNyY1NlZyA9IHNlZztcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAob2JqLmRiU291cmNlID09PSB0aGlzQ1MuZGVzdFRhZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc3RTZWcgPSBzZWc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHNyY1NlZyAmJiBkZXN0U2VnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2hhaW4gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjQ2hyOiAgICAgYWxuLm9iamVjdHNbc3JjU2VnLm9iamVjdF0uYWNjZXNzaW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNyY01pbjogICAgIHNyY1NlZy5taW58MCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcmNNYXg6ICAgICBzcmNTZWcubWF4fDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjT3JpOiAgICAgc3JjU2VnLnN0cmFuZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXN0Q2hyOiAgICBhbG4ub2JqZWN0c1tkZXN0U2VnLm9iamVjdF0uYWNjZXNzaW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc3RNaW46ICAgIGRlc3RTZWcubWlufDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzdE1heDogICAgZGVzdFNlZy5tYXh8MCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXN0T3JpOiAgICBkZXN0U2VnLnN0cmFuZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3M6ICAgICBbXVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3Jjb3BzID0gcGFyc2VDaWdhcihzcmNTZWcuY2lnYXIpLCBkZXN0b3BzID0gcGFyc2VDaWdhcihkZXN0U2VnLmNpZ2FyKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNyY09mZnNldCA9IDAsIGRlc3RPZmZzZXQgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNyY2kgPSAwLCBkZXN0aSA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoc3JjaSA8IHNyY29wcy5sZW5ndGggJiYgZGVzdGkgPCBkZXN0b3BzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzcmNvcHNbc3JjaV0ub3AgPT0gJ00nICYmIGRlc3RvcHNbZGVzdGldLm9wID09ICdNJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYmxvY2tMZW4gPSBNYXRoLm1pbihzcmNvcHNbc3JjaV0uY250LCBkZXN0b3BzW2Rlc3RpXS5jbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFpbi5ibG9ja3MucHVzaChbc3JjT2Zmc2V0LCBkZXN0T2Zmc2V0LCBibG9ja0xlbl0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3Jjb3BzW3NyY2ldLmNudCA9PSBibG9ja0xlbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKytzcmNpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Jjb3BzW3NyY2ldLmNudCAtPSBibG9ja0xlbjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGVzdG9wc1tkZXN0aV0uY250ID09IGJsb2NrTGVuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArK2Rlc3RpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzdG9wc1tkZXN0aV0gLT0gYmxvY2tMZW47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjT2Zmc2V0ICs9IGJsb2NrTGVuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXN0T2Zmc2V0ICs9IGJsb2NrTGVuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc3Jjb3BzW3NyY2ldLm9wID09ICdJJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXN0T2Zmc2V0ICs9IHNyY29wc1tzcmNpKytdLmNudDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGRlc3RvcHNbZGVzdGldLm9wID09ICdJJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcmNPZmZzZXQgKz0gZGVzdG9wc1tkZXN0aSsrXS5jbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFpbnMucHVzaChjaGFpbik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXNvbHZlKGNoYWlucyk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBCQklDaGFpbkZldGNoZXIodXJpLCBjcmVkZW50aWFscykge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB0aGlzLnVyaSA9IHVyaTtcbiAgICB0aGlzLmNyZWRlbnRpYWxzID0gY3JlZGVudGlhbHM7XG5cbiAgICB0aGlzLmJ3ZyA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBtYWtlQndnKG5ldyBVUkxGZXRjaGFibGUoc2VsZi51cmksIHtjcmVkZW50aWFsczogc2VsZi5jcmVkZW50aWFscywgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmVyOiBzZWxmLnJlc29sdmVyfSksIFxuICAgICAgICAgIGZ1bmN0aW9uKGJ3ZywgZXJyKSB7XG4gICAgICAgICAgICBpZiAoYndnKSB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZShid2cpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZWplY3QoZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIHRoaXMuYndnLnRoZW4oZnVuY3Rpb24oYndnLCBlcnIpIHtcbiAgICAgICAgaWYgKGVycilcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIHBpKHgpIHtcbiAgICByZXR1cm4gcGFyc2VJbnQoeCk7XG59XG5cbmZ1bmN0aW9uIGNsZWFuQ2hyKGMpIHtcbiAgICBpZiAoYy5pbmRleE9mKCdjaHInKSA9PSAwKVxuICAgICAgICByZXR1cm4gYy5zdWJzdHIoMyk7XG4gICAgZWxzZVxuICAgICAgICByZXR1cm4gYztcbn1cblxuZnVuY3Rpb24gYmJpRmVhdHVyZVRvQ2hhaW4oZmVhdHVyZSkge1xuICAgIHZhciBjaGFpbiA9IHtcbiAgICAgICAgc3JjQ2hyOiAgICAgY2xlYW5DaHIoZmVhdHVyZS5zcmNDaHJvbSksXG4gICAgICAgIHNyY01pbjogICAgIHBhcnNlSW50KGZlYXR1cmUuc3JjU3RhcnQpLFxuICAgICAgICBzcmNNYXg6ICAgICBwYXJzZUludChmZWF0dXJlLnNyY0VuZCksXG4gICAgICAgIHNyY09yaTogICAgIGZlYXR1cmUuc3JjT3JpLFxuICAgICAgICBkZXN0Q2hyOiAgICBjbGVhbkNocihmZWF0dXJlLnNlZ21lbnQpLFxuICAgICAgICBkZXN0TWluOiAgICBmZWF0dXJlLm1pbiAtIDEsICAgICAvLyBDb252ZXJ0IGJhY2sgZnJvbSBiaWdiZWQgcGFyc2VyXG4gICAgICAgIGRlc3RNYXg6ICAgIGZlYXR1cmUubWF4LFxuICAgICAgICBkZXN0T3JpOiAgICBmZWF0dXJlLm9yaSxcbiAgICAgICAgYmxvY2tzOiAgICAgW11cbiAgICB9O1xuICAgIHZhciBzcmNTdGFydHMgPSBmZWF0dXJlLnNyY1N0YXJ0cy5zcGxpdCgnLCcpLm1hcChwaSk7XG4gICAgdmFyIGRlc3RTdGFydHMgPSBmZWF0dXJlLmRlc3RTdGFydHMuc3BsaXQoJywnKS5tYXAocGkpO1xuICAgIHZhciBibG9ja0xlbmd0aHMgPSBmZWF0dXJlLmJsb2NrTGVucy5zcGxpdCgnLCcpLm1hcChwaSk7XG4gICAgZm9yICh2YXIgYmkgPSAwOyBiaSA8IHNyY1N0YXJ0cy5sZW5ndGg7ICsrYmkpIHtcbiAgICAgICAgY2hhaW4uYmxvY2tzLnB1c2goW3NyY1N0YXJ0c1tiaV0sIGRlc3RTdGFydHNbYmldLCBibG9ja0xlbmd0aHNbYmldXSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNoYWluO1xufVxuXG5CQklDaGFpbkZldGNoZXIucHJvdG90eXBlLmZldGNoQ2hhaW5zID0gZnVuY3Rpb24oY2hyLCBtaW4sIG1heCkge1xuICAgIHJldHVybiB0aGlzLmJ3Zy50aGVuKGZ1bmN0aW9uKGJ3ZywgZXJyKSB7XG4gICAgICAgIGlmICghYndnKVxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoXCJObyBCV0dcIik7XG5cbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgYndnLmdldFVuem9vbWVkVmlldygpLnJlYWRXaWdEYXRhKGNociwgbWluLCBtYXgsIGZ1bmN0aW9uKGZlYXRzKSB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZShmZWF0cy5tYXAoYmJpRmVhdHVyZVRvQ2hhaW4pKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn07XG5cbmZ1bmN0aW9uIEFsaWFzQ2hhaW5GZXRjaGVyKGNvbmYpIHtcbiAgICB0aGlzLmNvbmYgPSBjb25mO1xuICAgIHRoaXMuZm9yd2FyZEFsaWFzZXMgPSB7fTtcbiAgICB2YXIgc2EgPSBjb25mLnNlcXVlbmNlQWxpYXNlcyB8fCBbXTtcbiAgICBmb3IgKHZhciBhaSA9IDA7IGFpIDwgc2EubGVuZ3RoOyArK2FpKSB7XG4gICAgICAgIHZhciBhbCA9IHNhW2FpXTtcbiAgICAgICAgaWYgKGFsLmxlbmd0aCA8IDIpXG4gICAgICAgICAgICBjb250aW51ZTtcblxuICAgICAgICB2YXIgZmEgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhbC5sZW5ndGggLSAxOyArK2kpXG4gICAgICAgICAgICBmYS5wdXNoKGFsW2ldKTtcbiAgICAgICAgdGhpcy5mb3J3YXJkQWxpYXNlc1thbFthbC5sZW5ndGggLSAxXV0gPSBmYTtcbiAgICB9XG59XG5cbkFsaWFzQ2hhaW5GZXRjaGVyLnByb3RvdHlwZS5mZXRjaENoYWlucyA9IGZ1bmN0aW9uKGNociwgbWluLCBtYXgpIHtcbiAgICB2YXIgcmVzcCA9IFtdO1xuICAgIHZhciBmYSA9IHRoaXMuZm9yd2FyZEFsaWFzZXNbY2hyXSB8fCBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGZhLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIHJlc3AucHVzaChcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBzcmNDaHI6ICAgICAgICAgZmFbaV0sXG4gICAgICAgICAgICAgICAgc3JjTWluOiAgICAgICAgIDEsXG4gICAgICAgICAgICAgICAgc3JjTWF4OiAgICAgICAgIDEwMDAwMDAwMDAsXG4gICAgICAgICAgICAgICAgc3JjT3JpOiAgICAgICAgICcrJyxcbiAgICAgICAgICAgICAgICBkZXN0Q2hyOiAgICAgICAgY2hyLFxuICAgICAgICAgICAgICAgIGRlc3RNaW46ICAgICAgICAxLFxuICAgICAgICAgICAgICAgIGRlc3RNYXg6ICAgICAgICAxMDAwMDAwMDAwLFxuICAgICAgICAgICAgICAgIGRlc3RPcmk6ICAgICAgICAnKycsXG4gICAgICAgICAgICAgICAgYmxvY2tzOiBbWzEsIDEsIDEwMDAwMDAwMDBdXVxuICAgICAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShyZXNwKTtcbn1cblxuaWYgKHR5cGVvZihtb2R1bGUpICE9PSAndW5kZWZpbmVkJykge1xuICAgIG1vZHVsZS5leHBvcnRzID0ge1xuICAgICAgICBDaGFpbnNldDogQ2hhaW5zZXRcbiAgICB9O1xufVxuIiwiXG4vLyBcbi8vIERhbGxpYW5jZSBHZW5vbWUgRXhwbG9yZXJcbi8vIChjKSBUaG9tYXMgRG93biAyMDA2LTIwMTBcbi8vXG4vLyBjaGFpbnNldC5qczogbGlmdG92ZXIgc3VwcG9ydFxuLy9cblxudmFyIENJR0FSX1JFR0VYUCA9IG5ldyBSZWdFeHAoJyhbMC05XSopKFtNSURTXSknLCAnZycpO1xuXG5mdW5jdGlvbiBwYXJzZUNpZ2FyKGNpZ2FyKVxue1xuICAgIHZhciBjaWdvcHMgPSBbXTtcbiAgICB2YXIgbWF0Y2g7XG4gICAgd2hpbGUgKChtYXRjaCA9IENJR0FSX1JFR0VYUC5leGVjKGNpZ2FyKSkgIT0gbnVsbCkge1xuICAgICAgICB2YXIgY291bnQgPSBtYXRjaFsxXTtcbiAgICAgICAgaWYgKGNvdW50Lmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICBjb3VudCA9IDE7XG4gICAgICAgIH1cbiAgICAgICAgY2lnb3BzLnB1c2goe2NudDogY291bnR8MCwgb3A6IG1hdGNoWzJdfSk7XG4gICAgfVxuICAgIHJldHVybiBjaWdvcHM7XG59XG5cbmlmICh0eXBlb2YobW9kdWxlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IHtcbiAgICAgICAgcGFyc2VDaWdhcjogcGFyc2VDaWdhclxuICAgIH07XG59IiwiLyogLSotIG1vZGU6IGphdmFzY3JpcHQ7IGMtYmFzaWMtb2Zmc2V0OiA0OyBpbmRlbnQtdGFicy1tb2RlOiBuaWwgLSotICovXG5cbi8vIFxuLy8gRGFsbGlhbmNlIEdlbm9tZSBFeHBsb3JlclxuLy8gKGMpIFRob21hcyBEb3duIDIwMDYtMjAxMFxuLy9cbi8vIGNvbG9yLmpzXG4vL1xuXG5cInVzZSBzdHJpY3RcIjtcblxuZnVuY3Rpb24gRENvbG91cihyZWQsIGdyZWVuLCBibHVlLCBuYW1lKSB7XG4gICAgdGhpcy5yZWQgPSByZWR8MDtcbiAgICB0aGlzLmdyZWVuID0gZ3JlZW58MDtcbiAgICB0aGlzLmJsdWUgPSBibHVlfDA7XG4gICAgaWYgKG5hbWUpIHtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICB9XG59XG5cbkRDb2xvdXIucHJvdG90eXBlLnRvU3ZnU3RyaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKCF0aGlzLm5hbWUpIHtcbiAgICAgICAgdGhpcy5uYW1lID0gXCJyZ2IoXCIgKyB0aGlzLnJlZCArIFwiLFwiICsgdGhpcy5ncmVlbiArIFwiLFwiICsgdGhpcy5ibHVlICsgXCIpXCI7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMubmFtZTtcbn1cblxuZnVuY3Rpb24gaGV4Mih4KSB7XG4gICAgdmFyIHkgPSAnMDAnICsgeC50b1N0cmluZygxNik7XG4gICAgcmV0dXJuIHkuc3Vic3RyaW5nKHkubGVuZ3RoIC0gMik7XG59XG5cbkRDb2xvdXIucHJvdG90eXBlLnRvSGV4U3RyaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuICcjJyArIGhleDIodGhpcy5yZWQpICsgaGV4Mih0aGlzLmdyZWVuKSArIGhleDIodGhpcy5ibHVlKTtcbn1cblxudmFyIHBhbGV0dGUgPSB7XG4gICAgcmVkOiBuZXcgRENvbG91cigyNTUsIDAsIDAsICdyZWQnKSxcbiAgICBncmVlbjogbmV3IERDb2xvdXIoMCwgMjU1LCAwLCAnZ3JlZW4nKSxcbiAgICBibHVlOiBuZXcgRENvbG91cigwLCAwLCAyNTUsICdibHVlJyksXG4gICAgeWVsbG93OiBuZXcgRENvbG91cigyNTUsIDI1NSwgMCwgJ3llbGxvdycpLFxuICAgIHdoaXRlOiBuZXcgRENvbG91cigyNTUsIDI1NSwgMjU1LCAnd2hpdGUnKSxcbiAgICBibGFjazogbmV3IERDb2xvdXIoMCwgMCwgMCwgJ2JsYWNrJyksXG4gICAgZ3JheTogbmV3IERDb2xvdXIoMTgwLCAxODAsIDE4MCwgJ2dyYXknKSxcbiAgICBncmV5OiBuZXcgRENvbG91cigxODAsIDE4MCwgMTgwLCAnZ3JleScpLFxuICAgIGxpZ2h0c2t5Ymx1ZTogbmV3IERDb2xvdXIoMTM1LCAyMDYsIDI1MCwgJ2xpZ2h0c2t5Ymx1ZScpLFxuICAgIGxpZ2h0c2FsbW9uOiBuZXcgRENvbG91cigyNTUsIDE2MCwgMTIyLCAnbGlnaHRzYWxtb24nKSxcbiAgICBob3RwaW5rOiBuZXcgRENvbG91cigyNTUsIDEwNSwgMTgwLCAnaG90cGluaycpXG59O1xuXG52YXIgQ09MT1JfUkUgPSBuZXcgUmVnRXhwKCdeIyhbMC05QS1GYS1mXXsyfSkoWzAtOUEtRmEtZl17Mn0pKFswLTlBLUZhLWZdezJ9KSQnKTtcbnZhciBDU1NfQ09MT1JfUkUgPSAvcmdiXFwoKFswLTldKyksKFswLTldKyksKFswLTldKylcXCkvXG5cbmZ1bmN0aW9uIGRhc0NvbG91ckZvck5hbWUobmFtZSkge1xuICAgIHZhciBjID0gcGFsZXR0ZVtuYW1lXTtcbiAgICBpZiAoIWMpIHtcbiAgICAgICAgdmFyIG1hdGNoID0gQ09MT1JfUkUuZXhlYyhuYW1lKTtcbiAgICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgICAgICBjID0gbmV3IERDb2xvdXIoKCcweCcgKyBtYXRjaFsxXSl8MCwgKCcweCcgKyBtYXRjaFsyXSl8MCwgKCcweCcgKyBtYXRjaFszXSl8MCwgbmFtZSk7XG4gICAgICAgICAgICBwYWxldHRlW25hbWVdID0gYztcbiAgICAgICAgfSBlbHNlIHtcbiAgICBcdCAgICBtYXRjaCA9IENTU19DT0xPUl9SRS5leGVjKG5hbWUpO1xuICAgIFx0ICAgIGlmIChtYXRjaCkge1xuICAgICAgICBcdFx0YyA9IG5ldyBEQ29sb3VyKG1hdGNoWzFdfDAsIG1hdGNoWzJdfDAsIG1hdGNoWzNdfDAsIG5hbWUpO1xuICAgICAgICBcdFx0cGFsZXR0ZVtuYW1lXSA9IGM7XG5cdCAgICAgICB9IGVsc2Uge1xuXHRcdCAgICAgIGNvbnNvbGUubG9nKFwiY291bGRuJ3QgaGFuZGxlIGNvbG9yOiBcIiArIG5hbWUpO1xuXHRcdCAgICAgIGMgPSBwYWxldHRlLmJsYWNrO1xuXHRcdCAgICAgIHBhbGV0dGVbbmFtZV0gPSBjO1xuXHQgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBjO1xufVxuXG5mdW5jdGlvbiBtYWtlQ29sb3VyU3RlcHMoc3RlcHMsIHN0b3BzLCBjb2xvdXJzKSB7XG4gICAgdmFyIGRjb2xvdXJzID0gW107XG4gICAgZm9yICh2YXIgY2kgPSAwOyBjaSA8IGNvbG91cnMubGVuZ3RoOyArK2NpKSB7XG4gICAgICAgIGRjb2xvdXJzLnB1c2goZGFzQ29sb3VyRm9yTmFtZShjb2xvdXJzW2NpXSkpO1xuICAgIH1cblxuICAgIHZhciBncmFkID0gW107XG4gIFNURVBfTE9PUDpcbiAgICBmb3IgKHZhciBzaSA9IDA7IHNpIDwgc3RlcHM7ICsrc2kpIHtcbiAgICAgICAgdmFyIHJzID0gKDEuMCAqIHNpKSAvIChzdGVwcy0xKTtcbiAgICAgICAgdmFyIHNjb3JlID0gc3RvcHNbMF0gKyAoc3RvcHNbc3RvcHMubGVuZ3RoIC0xXSAtIHN0b3BzWzBdKSAqIHJzO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0b3BzLmxlbmd0aCAtIDE7ICsraSkge1xuICAgICAgICAgICAgaWYgKHNjb3JlID49IHN0b3BzW2ldICYmIHNjb3JlIDw9IHN0b3BzW2krMV0pIHtcbiAgICAgICAgICAgICAgICB2YXIgZnJhYyA9IChzY29yZSAtIHN0b3BzW2ldKSAvIChzdG9wc1tpKzFdIC0gc3RvcHNbaV0pO1xuICAgICAgICAgICAgICAgIHZhciBjYSA9IGRjb2xvdXJzW2ldO1xuICAgICAgICAgICAgICAgIHZhciBjYiA9IGRjb2xvdXJzW2krMV07XG5cbiAgICAgICAgICAgICAgICB2YXIgZmlsbCA9IG5ldyBEQ29sb3VyKFxuICAgICAgICAgICAgICAgICAgICAoKGNhLnJlZCAqICgxLjAgLSBmcmFjKSkgKyAoY2IucmVkICogZnJhYykpfDAsXG4gICAgICAgICAgICAgICAgICAgICgoY2EuZ3JlZW4gKiAoMS4wIC0gZnJhYykpICsgKGNiLmdyZWVuICogZnJhYykpfDAsXG4gICAgICAgICAgICAgICAgICAgICgoY2EuYmx1ZSAqICgxLjAgLSBmcmFjKSkgKyAoY2IuYmx1ZSAqIGZyYWMpKXwwXG4gICAgICAgICAgICAgICAgKS50b1N2Z1N0cmluZygpO1xuICAgICAgICAgICAgICAgIGdyYWQucHVzaChmaWxsKTtcblxuICAgICAgICAgICAgICAgIGNvbnRpbnVlIFNURVBfTE9PUDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aHJvdyAnQmFkIHN0ZXAnO1xuICAgIH1cblxuICAgIHJldHVybiBncmFkO1xufVxuXG5mdW5jdGlvbiBtYWtlR3JhZGllbnQoc3RlcHMsIGNvbG9yMSwgY29sb3IyLCBjb2xvcjMpIHtcbiAgICBpZiAoY29sb3IzKSB7XG4gICAgICAgIHJldHVybiBtYWtlQ29sb3VyU3RlcHMoc3RlcHMsIFswLCAwLjUsIDFdLCBbY29sb3IxLCBjb2xvcjIsIGNvbG9yM10pO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBtYWtlQ29sb3VyU3RlcHMoc3RlcHMsIFswLCAxXSwgW2NvbG9yMSwgY29sb3IyXSk7XG4gICAgfVxufVxuXG5pZiAodHlwZW9mKG1vZHVsZSkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgICAgIG1ha2VDb2xvdXJTdGVwczogbWFrZUNvbG91clN0ZXBzLFxuICAgICAgICBtYWtlR3JhZGllbnQ6IG1ha2VHcmFkaWVudCxcbiAgICAgICAgZGFzQ29sb3VyRm9yTmFtZTogZGFzQ29sb3VyRm9yTmFtZVxuICAgIH07XG59XG4iLCIvKiAtKi0gbW9kZTogamF2YXNjcmlwdDsgYy1iYXNpYy1vZmZzZXQ6IDQ7IGluZGVudC10YWJzLW1vZGU6IG5pbCAtKi0gKi9cblxuLy8gXG4vLyBEYWxsaWFuY2UgR2Vub21lIEV4cGxvcmVyXG4vLyAoYykgVGhvbWFzIERvd24gMjAwNi0yMDEwXG4vL1xuLy8gZGFzLmpzOiBxdWVyaWVzIGFuZCBsb3ctbGV2ZWwgZGF0YSBtb2RlbC5cbi8vXG5cblwidXNlIHN0cmljdFwiO1xuXG5pZiAodHlwZW9mKHJlcXVpcmUpICE9PSAndW5kZWZpbmVkJykge1xuICAgIHZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcbiAgICB2YXIgc2hhbGxvd0NvcHkgPSB1dGlscy5zaGFsbG93Q29weTtcbiAgICB2YXIgcHVzaG8gPSB1dGlscy5wdXNobztcblxuICAgIHZhciBjb2xvciA9IHJlcXVpcmUoJy4vY29sb3InKTtcbiAgICB2YXIgbWFrZUNvbG91clN0ZXBzID0gY29sb3IubWFrZUNvbG91clN0ZXBzO1xufVxuXG52YXIgZGFzTGliRXJyb3JIYW5kbGVyID0gZnVuY3Rpb24oZXJyTXNnKSB7XG4gICAgYWxlcnQoZXJyTXNnKTtcbn1cbnZhciBkYXNMaWJSZXF1ZXN0UXVldWUgPSBuZXcgQXJyYXkoKTtcblxuZnVuY3Rpb24gREFTU2VnbWVudChuYW1lLCBzdGFydCwgZW5kLCBkZXNjcmlwdGlvbikge1xuICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgdGhpcy5zdGFydCA9IHN0YXJ0O1xuICAgIHRoaXMuZW5kID0gZW5kO1xuICAgIHRoaXMuZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcbn1cbkRBU1NlZ21lbnQucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMubmFtZSArICc6JyArIHRoaXMuc3RhcnQgKyAnLi4nICsgdGhpcy5lbmQ7XG59O1xuREFTU2VnbWVudC5wcm90b3R5cGUuaXNCb3VuZGVkID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RhcnQgJiYgdGhpcy5lbmQ7XG59XG5EQVNTZWdtZW50LnByb3RvdHlwZS50b0RBU1F1ZXJ5ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHEgPSAnc2VnbWVudD0nICsgdGhpcy5uYW1lO1xuICAgIGlmICh0aGlzLnN0YXJ0ICYmIHRoaXMuZW5kKSB7XG4gICAgICAgIHEgKz0gKCc6JyArIHRoaXMuc3RhcnQgKyAnLCcgKyB0aGlzLmVuZCk7XG4gICAgfVxuICAgIHJldHVybiBxO1xufVxuXG5cbmZ1bmN0aW9uIERBU1NvdXJjZShhMSwgYTIpIHtcbiAgICB2YXIgb3B0aW9ucztcbiAgICBpZiAodHlwZW9mIGExID09ICdzdHJpbmcnKSB7XG4gICAgICAgIHRoaXMudXJpID0gYTE7XG4gICAgICAgIG9wdGlvbnMgPSBhMiB8fCB7fTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBvcHRpb25zID0gYTEgfHwge307XG4gICAgfVxuICAgIGZvciAodmFyIGsgaW4gb3B0aW9ucykge1xuICAgICAgICB0aGlzW2tdID0gb3B0aW9uc1trXTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuY29vcmRzKSB7XG4gICAgICAgIHRoaXMuY29vcmRzID0gW107XG4gICAgfVxuICAgIGlmICghdGhpcy5wcm9wcykge1xuICAgICAgICB0aGlzLnByb3BzID0ge307XG4gICAgfVxuXG4gICAgdGhpcy5kYXNCYXNlVVJJID0gdGhpcy51cmk7XG4gICAgaWYgKHRoaXMuZGFzQmFzZVVSSSAmJiB0aGlzLmRhc0Jhc2VVUkkuc3Vic3RyKHRoaXMudXJpLmxlbmd0aCAtIDEpICE9ICcvJykge1xuICAgICAgICB0aGlzLmRhc0Jhc2VVUkkgPSB0aGlzLmRhc0Jhc2VVUkkgKyAnLyc7XG4gICAgfVxufVxuXG5EQVNTb3VyY2UucHJvdG90eXBlLmdldFVSSSA9IGZ1bmN0aW9uKHVyaSkge1xuICAgIGlmICh0aGlzLnJlc29sdmVyKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlc29sdmVyKHVyaSkudGhlbihmdW5jdGlvbiAodXJsT3JPYmopIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdXJsT3JPYmogPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVybE9yT2JqO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdXJsT3JPYmoudXJsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHVyaSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBEQVNDb29yZHMoKSB7XG59XG5cbmZ1bmN0aW9uIGNvb3Jkc01hdGNoKGMxLCBjMikge1xuICAgIHJldHVybiBjMS50YXhvbiA9PSBjMi50YXhvbiAmJiBjMS5hdXRoID09IGMyLmF1dGggJiYgYzEudmVyc2lvbiA9PSBjMi52ZXJzaW9uO1xufVxuXG4vL1xuLy8gREFTIDEuNiBlbnRyeV9wb2ludHMgY29tbWFuZFxuLy9cblxuREFTU291cmNlLnByb3RvdHlwZS5lbnRyeVBvaW50cyA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgdmFyIGRhc1VSSSA9IHRoaXMuZGFzQmFzZVVSSSArICdlbnRyeV9wb2ludHMnO1xuICAgIHRoaXMuZG9Dcm9zc0RvbWFpblJlcXVlc3QoZGFzVVJJLCBmdW5jdGlvbihyZXNwb25zZVhNTCkge1xuICAgICAgICAgICAgaWYgKCFyZXNwb25zZVhNTCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhbXSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgZW50cnlQb2ludHMgPSBuZXcgQXJyYXkoKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB2YXIgc2VncyA9IHJlc3BvbnNlWE1MLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdTRUdNRU5UJyk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWdzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzZWcgPSBzZWdzW2ldO1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2VnSWQgPSBzZWcuZ2V0QXR0cmlidXRlKCdpZCcpO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNlZ1NpemUgPSBzZWcuZ2V0QXR0cmlidXRlKCdzaXplJyk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzZWdNaW4sIHNlZ01heDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlZ1NpemUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlZ01pbiA9IDE7IHNlZ01heCA9IHNlZ1NpemV8MDtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlZ01pbiA9IHNlZy5nZXRBdHRyaWJ1dGUoJ3N0YXJ0Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VnTWluKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VnTWluIHw9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWdNYXggPSBzZWcuZ2V0QXR0cmlidXRlKCdzdG9wJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VnTWF4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VnTWF4IHw9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdmFyIHNlZ0Rlc2MgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2VnLmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlZ0Rlc2MgPSBzZWcuZmlyc3RDaGlsZC5ub2RlVmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZW50cnlQb2ludHMucHVzaChuZXcgREFTU2VnbWVudChzZWdJZCwgc2VnTWluLCBzZWdNYXgsIHNlZ0Rlc2MpKTtcbiAgICAgICAgICAgICAgICB9ICAgICAgICAgIFxuICAgICAgICAgICAgICAgY2FsbGJhY2soZW50cnlQb2ludHMpO1xuICAgIH0pOyAgICAgICAgIFxufVxuXG4vL1xuLy8gREFTIDEuNiBzZXF1ZW5jZSBjb21tYW5kXG4vLyBEbyB3ZSBuZWVkIGFuIG9wdGlvbiB0byBmYWxsIGJhY2sgdG8gdGhlIGRuYSBjb21tYW5kP1xuLy9cblxuZnVuY3Rpb24gREFTU2VxdWVuY2UobmFtZSwgc3RhcnQsIGVuZCwgYWxwaGEsIHNlcSkge1xuICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgdGhpcy5zdGFydCA9IHN0YXJ0O1xuICAgIHRoaXMuZW5kID0gZW5kO1xuICAgIHRoaXMuYWxwaGFiZXQgPSBhbHBoYTtcbiAgICB0aGlzLnNlcSA9IHNlcTtcbn1cblxuREFTU291cmNlLnByb3RvdHlwZS5zZXF1ZW5jZSA9IGZ1bmN0aW9uKHNlZ21lbnQsIGNhbGxiYWNrKSB7XG4gICAgdmFyIGRhc1VSSSA9IHRoaXMuZGFzQmFzZVVSSSArICdzZXF1ZW5jZT8nICsgc2VnbWVudC50b0RBU1F1ZXJ5KCk7XG4gICAgdGhpcy5kb0Nyb3NzRG9tYWluUmVxdWVzdChkYXNVUkksIGZ1bmN0aW9uKHJlc3BvbnNlWE1MKSB7XG4gICAgICAgIGlmICghcmVzcG9uc2VYTUwpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKFtdKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgc2VxcyA9IG5ldyBBcnJheSgpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHZhciBzZWdzID0gcmVzcG9uc2VYTUwuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ1NFUVVFTkNFJyk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWdzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzZWcgPSBzZWdzW2ldO1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2VnSWQgPSBzZWcuZ2V0QXR0cmlidXRlKCdpZCcpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2VnTWluID0gc2VnLmdldEF0dHJpYnV0ZSgnc3RhcnQnKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNlZ01heCA9IHNlZy5nZXRBdHRyaWJ1dGUoJ3N0b3AnKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNlZ0FscGhhID0gJ0ROQSc7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzZWdTZXEgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2VnLmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByYXdTZXEgPSBzZWcuZmlyc3RDaGlsZC5ub2RlVmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWdTZXEgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpZHggPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3BhY2UgPSByYXdTZXEuaW5kZXhPZignXFxuJywgaWR4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3BhY2UgPj0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWdTZXEgKz0gcmF3U2VxLnN1YnN0cmluZyhpZHgsIHNwYWNlKS50b1VwcGVyQ2FzZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHggPSBzcGFjZSArIDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VnU2VxICs9IHJhd1NlcS5zdWJzdHJpbmcoaWR4KS50b1VwcGVyQ2FzZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgc2Vxcy5wdXNoKG5ldyBEQVNTZXF1ZW5jZShzZWdJZCwgc2VnTWluLCBzZWdNYXgsIHNlZ0FscGhhLCBzZWdTZXEpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgY2FsbGJhY2soc2Vxcyk7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuLy9cbi8vIERBUyAxLjYgZmVhdHVyZXMgY29tbWFuZFxuLy9cblxuZnVuY3Rpb24gREFTRmVhdHVyZSgpIHtcbn1cblxuZnVuY3Rpb24gREFTR3JvdXAoaWQpIHtcbiAgICBpZiAoaWQpXG4gICAgICAgIHRoaXMuaWQgPSBpZDtcbn1cblxuZnVuY3Rpb24gREFTTGluayhkZXNjLCB1cmkpIHtcbiAgICB0aGlzLmRlc2MgPSBkZXNjO1xuICAgIHRoaXMudXJpID0gdXJpO1xufVxuXG5EQVNTb3VyY2UucHJvdG90eXBlLmZlYXR1cmVzID0gZnVuY3Rpb24oc2VnbWVudCwgb3B0aW9ucywgY2FsbGJhY2spIHtcbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICB2YXIgdGhpc0IgPSB0aGlzO1xuXG4gICAgdmFyIGRhc1VSSTtcbiAgICBpZiAodGhpcy5mZWF0dXJlc191cmkpIHtcbiAgICAgICAgZGFzVVJJID0gdGhpcy5mZWF0dXJlc191cmk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGZpbHRlcnMgPSBbXTtcblxuICAgICAgICBpZiAoc2VnbWVudCkge1xuICAgICAgICAgICAgZmlsdGVycy5wdXNoKHNlZ21lbnQudG9EQVNRdWVyeSgpKTtcbiAgICAgICAgfSBlbHNlIGlmIChvcHRpb25zLmdyb3VwKSB7XG4gICAgICAgICAgICB2YXIgZyA9IG9wdGlvbnMuZ3JvdXA7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGcgPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICBmaWx0ZXJzLnB1c2goJ2dyb3VwX2lkPScgKyBnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgZ2kgPSAwOyBnaSA8IGcubGVuZ3RoOyArK2dpKSB7XG4gICAgICAgICAgICAgICAgICAgIGZpbHRlcnMucHVzaCgnZ3JvdXBfaWQ9JyArIGdbZ2ldKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAob3B0aW9ucy5hZGphY2VudCkge1xuICAgICAgICAgICAgdmFyIGFkaiA9IG9wdGlvbnMuYWRqYWNlbnQ7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGFkaiA9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIGFkaiA9IFthZGpdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIgYWkgPSAwOyBhaSA8IGFkai5sZW5ndGg7ICsrYWkpIHtcbiAgICAgICAgICAgICAgICBmaWx0ZXJzLnB1c2goJ2FkamFjZW50PScgKyBhZGpbYWldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChvcHRpb25zLnR5cGUpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy50eXBlID09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgZmlsdGVycy5wdXNoKCd0eXBlPScgKyBvcHRpb25zLnR5cGUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciB0aSA9IDA7IHRpIDwgb3B0aW9ucy50eXBlLmxlbmd0aDsgKyt0aSkge1xuICAgICAgICAgICAgICAgICAgICBmaWx0ZXJzLnB1c2goJ3R5cGU9JyArIG9wdGlvbnMudHlwZVt0aV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKG9wdGlvbnMubWF4Ymlucykge1xuICAgICAgICAgICAgZmlsdGVycy5wdXNoKCdtYXhiaW5zPScgKyBvcHRpb25zLm1heGJpbnMpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAoZmlsdGVycy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBkYXNVUkkgPSB0aGlzLmRhc0Jhc2VVUkkgKyAnZmVhdHVyZXM/JyArIGZpbHRlcnMuam9pbignOycpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FsbGJhY2soW10sICdObyBmaWx0ZXJzIHNwZWNpZmllZCcpO1xuICAgICAgICB9XG4gICAgfSBcbiAgIFxuXG4gICAgdGhpcy5kb0Nyb3NzRG9tYWluUmVxdWVzdChkYXNVUkksIGZ1bmN0aW9uKHJlc3BvbnNlWE1MLCByZXEpIHtcbiAgICAgICAgaWYgKCFyZXNwb25zZVhNTCkge1xuICAgICAgICAgICAgdmFyIG1zZztcbiAgICAgICAgICAgIGlmIChyZXEuc3RhdHVzID09IDApIHtcbiAgICAgICAgICAgICAgICBtc2cgPSAnc2VydmVyIG1heSBub3Qgc3VwcG9ydCBDT1JTJztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbXNnID0gJ3N0YXR1cz0nICsgcmVxLnN0YXR1cztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhbGxiYWNrKFtdLCAnRmFpbGVkIHJlcXVlc3Q6ICcgKyBtc2cpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4vKiAgICAgIGlmIChyZXEpIHtcbiAgICAgICAgICAgIHZhciBjYXBzID0gcmVxLmdldFJlc3BvbnNlSGVhZGVyKCdYLURBUy1DYXBhYmlsdGllcycpO1xuICAgICAgICAgICAgaWYgKGNhcHMpIHtcbiAgICAgICAgICAgICAgICBhbGVydChjYXBzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSAqL1xuXG4gICAgICAgIHZhciBmZWF0dXJlcyA9IG5ldyBBcnJheSgpO1xuICAgICAgICB2YXIgc2VnbWVudE1hcCA9IHt9O1xuXG4gICAgICAgIHZhciBzZWdzID0gcmVzcG9uc2VYTUwuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ1NFR01FTlQnKTtcbiAgICAgICAgZm9yICh2YXIgc2kgPSAwOyBzaSA8IHNlZ3MubGVuZ3RoOyArK3NpKSB7XG4gICAgICAgICAgICB2YXIgc2VnbWVudFhNTCA9IHNlZ3Nbc2ldO1xuICAgICAgICAgICAgdmFyIHNlZ21lbnRJRCA9IHNlZ21lbnRYTUwuZ2V0QXR0cmlidXRlKCdpZCcpO1xuICAgICAgICAgICAgc2VnbWVudE1hcFtzZWdtZW50SURdID0ge1xuICAgICAgICAgICAgICAgIG1pbjogc2VnbWVudFhNTC5nZXRBdHRyaWJ1dGUoJ3N0YXJ0JyksXG4gICAgICAgICAgICAgICAgbWF4OiBzZWdtZW50WE1MLmdldEF0dHJpYnV0ZSgnc3RvcCcpXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB2YXIgZmVhdHVyZVhNTHMgPSBzZWdtZW50WE1MLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdGRUFUVVJFJyk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGZlYXR1cmVYTUxzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGZlYXR1cmUgPSBmZWF0dXJlWE1Mc1tpXTtcbiAgICAgICAgICAgICAgICB2YXIgZGFzRmVhdHVyZSA9IG5ldyBEQVNGZWF0dXJlKCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgZGFzRmVhdHVyZS5zZWdtZW50ID0gc2VnbWVudElEO1xuICAgICAgICAgICAgICAgIGRhc0ZlYXR1cmUuaWQgPSBmZWF0dXJlLmdldEF0dHJpYnV0ZSgnaWQnKTtcbiAgICAgICAgICAgICAgICBkYXNGZWF0dXJlLmxhYmVsID0gZmVhdHVyZS5nZXRBdHRyaWJ1dGUoJ2xhYmVsJyk7XG5cblxuLypcbiAgICAgICAgICAgICAgICB2YXIgY2hpbGROb2RlcyA9IGZlYXR1cmUuY2hpbGROb2RlcztcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBjID0gMDsgYyA8IGNoaWxkTm9kZXMubGVuZ3RoOyArK2MpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNuID0gY2hpbGROb2Rlc1tjXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNuLm5vZGVUeXBlID09IE5vZGUuRUxFTUVOVF9OT0RFKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIga2V5ID0gY24udGFnTmFtZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vdmFyIHZhbCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL2lmIChjbi5maXJzdENoaWxkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgIHZhbCA9IGNuLmZpcnN0Q2hpbGQubm9kZVZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy99XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXNGZWF0dXJlW2tleV0gPSAneCc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICovXG5cblxuICAgICAgICAgICAgICAgIHZhciBzcG9zID0gZWxlbWVudFZhbHVlKGZlYXR1cmUsIFwiU1RBUlRcIik7XG4gICAgICAgICAgICAgICAgdmFyIGVwb3MgPSBlbGVtZW50VmFsdWUoZmVhdHVyZSwgXCJFTkRcIik7XG4gICAgICAgICAgICAgICAgaWYgKChzcG9zfDApID4gKGVwb3N8MCkpIHtcbiAgICAgICAgICAgICAgICAgICAgZGFzRmVhdHVyZS5taW4gPSBlcG9zfDA7XG4gICAgICAgICAgICAgICAgICAgIGRhc0ZlYXR1cmUubWF4ID0gc3Bvc3wwO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGRhc0ZlYXR1cmUubWluID0gc3Bvc3wwO1xuICAgICAgICAgICAgICAgICAgICBkYXNGZWF0dXJlLm1heCA9IGVwb3N8MDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGVjID0gZmVhdHVyZS5nZXRFbGVtZW50c0J5VGFnTmFtZSgnVFlQRScpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGVjLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZSA9IHRlY1swXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ZS5maXJzdENoaWxkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGFzRmVhdHVyZS50eXBlID0gdGUuZmlyc3RDaGlsZC5ub2RlVmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXNGZWF0dXJlLnR5cGVJZCA9IHRlLmdldEF0dHJpYnV0ZSgnaWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhc0ZlYXR1cmUudHlwZUN2ID0gdGUuZ2V0QXR0cmlidXRlKCdjdklkJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZGFzRmVhdHVyZS50eXBlID0gZWxlbWVudFZhbHVlKGZlYXR1cmUsIFwiVFlQRVwiKTtcbiAgICAgICAgICAgICAgICBpZiAoIWRhc0ZlYXR1cmUudHlwZSAmJiBkYXNGZWF0dXJlLnR5cGVJZCkge1xuICAgICAgICAgICAgICAgICAgICBkYXNGZWF0dXJlLnR5cGUgPSBkYXNGZWF0dXJlLnR5cGVJZDsgLy8gRklYTUU/XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGRhc0ZlYXR1cmUubWV0aG9kID0gZWxlbWVudFZhbHVlKGZlYXR1cmUsIFwiTUVUSE9EXCIpO1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG9yaSA9IGVsZW1lbnRWYWx1ZShmZWF0dXJlLCBcIk9SSUVOVEFUSU9OXCIpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIW9yaSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3JpID0gJzAnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGRhc0ZlYXR1cmUub3JpZW50YXRpb24gPSBvcmk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGRhc0ZlYXR1cmUuc2NvcmUgPSBlbGVtZW50VmFsdWUoZmVhdHVyZSwgXCJTQ09SRVwiKTtcbiAgICAgICAgICAgICAgICBkYXNGZWF0dXJlLmxpbmtzID0gZGFzTGlua3NPZihmZWF0dXJlKTtcbiAgICAgICAgICAgICAgICBkYXNGZWF0dXJlLm5vdGVzID0gZGFzTm90ZXNPZihmZWF0dXJlKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB2YXIgZ3JvdXBzID0gZmVhdHVyZS5nZXRFbGVtZW50c0J5VGFnTmFtZShcIkdST1VQXCIpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGdpICA9IDA7IGdpIDwgZ3JvdXBzLmxlbmd0aDsgKytnaSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZ3JvdXBYTUwgPSBncm91cHNbZ2ldO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGFzR3JvdXAgPSBuZXcgREFTR3JvdXAoKTtcbiAgICAgICAgICAgICAgICAgICAgZGFzR3JvdXAudHlwZSA9IGdyb3VwWE1MLmdldEF0dHJpYnV0ZSgndHlwZScpO1xuICAgICAgICAgICAgICAgICAgICBkYXNHcm91cC5pZCA9IGdyb3VwWE1MLmdldEF0dHJpYnV0ZSgnaWQnKTtcbiAgICAgICAgICAgICAgICAgICAgZGFzR3JvdXAubGlua3MgPSBkYXNMaW5rc09mKGdyb3VwWE1MKTtcbiAgICAgICAgICAgICAgICAgICAgZGFzR3JvdXAubm90ZXMgPSBkYXNOb3Rlc09mKGdyb3VwWE1MKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFkYXNGZWF0dXJlLmdyb3Vwcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGFzRmVhdHVyZS5ncm91cHMgPSBuZXcgQXJyYXkoZGFzR3JvdXApO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGFzRmVhdHVyZS5ncm91cHMucHVzaChkYXNHcm91cCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBNYWdpYyBub3Rlcy4gIENoZWNrIHdpdGggVEFEIGJlZm9yZSBjaGFuZ2luZyB0aGlzLlxuICAgICAgICAgICAgICAgIGlmIChkYXNGZWF0dXJlLm5vdGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG5pID0gMDsgbmkgPCBkYXNGZWF0dXJlLm5vdGVzLmxlbmd0aDsgKytuaSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSBkYXNGZWF0dXJlLm5vdGVzW25pXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuLmluZGV4T2YoJ0dlbmVuYW1lPScpID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZ2cgPSBuZXcgREFTR3JvdXAoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZy50eXBlPSdnZW5lJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZy5pZCA9IG4uc3Vic3RyaW5nKDkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZGFzRmVhdHVyZS5ncm91cHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGFzRmVhdHVyZS5ncm91cHMgPSBuZXcgQXJyYXkoZ2cpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhc0ZlYXR1cmUuZ3JvdXBzLnB1c2goZ2cpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwZWMgPSBmZWF0dXJlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdQQVJUJyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwZWMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBhcnRzID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBwaSA9IDA7IHBpIDwgcGVjLmxlbmd0aDsgKytwaSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnRzLnB1c2gocGVjW3BpXS5nZXRBdHRyaWJ1dGUoJ2lkJykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZGFzRmVhdHVyZS5wYXJ0cyA9IHBhcnRzO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBlYyA9IGZlYXR1cmUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ1BBUkVOVCcpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocGVjLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwYXJlbnRzID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBwaSA9IDA7IHBpIDwgcGVjLmxlbmd0aDsgKytwaSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudHMucHVzaChwZWNbcGldLmdldEF0dHJpYnV0ZSgnaWQnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXNGZWF0dXJlLnBhcmVudHMgPSBwYXJlbnRzO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGZlYXR1cmVzLnB1c2goZGFzRmVhdHVyZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgY2FsbGJhY2soZmVhdHVyZXMsIHVuZGVmaW5lZCwgc2VnbWVudE1hcCk7XG4gICAgfSxcbiAgICBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIGNhbGxiYWNrKFtdLCBlcnIpO1xuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBEQVNBbGlnbm1lbnQodHlwZSkge1xuICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gICAgdGhpcy5vYmplY3RzID0ge307XG4gICAgdGhpcy5ibG9ja3MgPSBbXTtcbn1cblxuREFTU291cmNlLnByb3RvdHlwZS5hbGlnbm1lbnRzID0gZnVuY3Rpb24oc2VnbWVudCwgb3B0aW9ucywgY2FsbGJhY2spIHtcbiAgICB2YXIgZGFzVVJJID0gdGhpcy5kYXNCYXNlVVJJICsgJ2FsaWdubWVudD9xdWVyeT0nICsgc2VnbWVudDtcbiAgICB0aGlzLmRvQ3Jvc3NEb21haW5SZXF1ZXN0KGRhc1VSSSwgZnVuY3Rpb24ocmVzcG9uc2VYTUwpIHtcbiAgICAgICAgaWYgKCFyZXNwb25zZVhNTCkge1xuICAgICAgICAgICAgY2FsbGJhY2soW10sICdGYWlsZWQgcmVxdWVzdCAnICsgZGFzVVJJKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBhbGlnbm1lbnRzID0gW107XG4gICAgICAgIHZhciBhbGlYTUxzID0gcmVzcG9uc2VYTUwuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2FsaWdubWVudCcpO1xuICAgICAgICBmb3IgKHZhciBhaSA9IDA7IGFpIDwgYWxpWE1Mcy5sZW5ndGg7ICsrYWkpIHtcbiAgICAgICAgICAgIHZhciBhbGlYTUwgPSBhbGlYTUxzW2FpXTtcbiAgICAgICAgICAgIHZhciBhbGkgPSBuZXcgREFTQWxpZ25tZW50KGFsaVhNTC5nZXRBdHRyaWJ1dGUoJ2FsaWduVHlwZScpKTtcbiAgICAgICAgICAgIHZhciBvYmpYTUxzID0gYWxpWE1MLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdhbGlnbk9iamVjdCcpO1xuICAgICAgICAgICAgZm9yICh2YXIgb2kgPSAwOyBvaSA8IG9ialhNTHMubGVuZ3RoOyArK29pKSB7XG4gICAgICAgICAgICAgICAgdmFyIG9ialhNTCA9IG9ialhNTHNbb2ldO1xuICAgICAgICAgICAgICAgIHZhciBvYmogPSB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiAgICAgICAgICBvYmpYTUwuZ2V0QXR0cmlidXRlKCdpbnRPYmplY3RJZCcpLFxuICAgICAgICAgICAgICAgICAgICBhY2Nlc3Npb246ICAgb2JqWE1MLmdldEF0dHJpYnV0ZSgnZGJBY2Nlc3Npb25JZCcpLFxuICAgICAgICAgICAgICAgICAgICB2ZXJzaW9uOiAgICAgb2JqWE1MLmdldEF0dHJpYnV0ZSgnb2JqZWN0VmVyc2lvbicpLFxuICAgICAgICAgICAgICAgICAgICBkYlNvdXJjZTogICAgb2JqWE1MLmdldEF0dHJpYnV0ZSgnZGJTb3VyY2UnKSxcbiAgICAgICAgICAgICAgICAgICAgZGJWZXJzaW9uOiAgIG9ialhNTC5nZXRBdHRyaWJ1dGUoJ2RiVmVyc2lvbicpXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBhbGkub2JqZWN0c1tvYmouaWRdID0gb2JqO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB2YXIgYmxvY2tYTUxzID0gYWxpWE1MLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdibG9jaycpO1xuICAgICAgICAgICAgZm9yICh2YXIgYmkgPSAwOyBiaSA8IGJsb2NrWE1Mcy5sZW5ndGg7ICsrYmkpIHtcbiAgICAgICAgICAgICAgICB2YXIgYmxvY2tYTUwgPSBibG9ja1hNTHNbYmldO1xuICAgICAgICAgICAgICAgIHZhciBibG9jayA9IHtcbiAgICAgICAgICAgICAgICAgICAgb3JkZXI6ICAgICAgYmxvY2tYTUwuZ2V0QXR0cmlidXRlKCdibG9ja09yZGVyJyksXG4gICAgICAgICAgICAgICAgICAgIHNlZ21lbnRzOiAgIFtdXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB2YXIgc2VnWE1McyA9IGJsb2NrWE1MLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdzZWdtZW50Jyk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgc2kgPSAwOyBzaSA8IHNlZ1hNTHMubGVuZ3RoOyArK3NpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzZWdYTUwgPSBzZWdYTUxzW3NpXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNlZyA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdDogICAgICBzZWdYTUwuZ2V0QXR0cmlidXRlKCdpbnRPYmplY3RJZCcpLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWluOiAgICAgICAgIHNlZ1hNTC5nZXRBdHRyaWJ1dGUoJ3N0YXJ0JyksXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXg6ICAgICAgICAgc2VnWE1MLmdldEF0dHJpYnV0ZSgnZW5kJyksXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHJhbmQ6ICAgICAgc2VnWE1MLmdldEF0dHJpYnV0ZSgnc3RyYW5kJyksXG4gICAgICAgICAgICAgICAgICAgICAgICBjaWdhcjogICAgICAgZWxlbWVudFZhbHVlKHNlZ1hNTCwgJ2NpZ2FyJylcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgYmxvY2suc2VnbWVudHMucHVzaChzZWcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBhbGkuYmxvY2tzLnB1c2goYmxvY2spO1xuICAgICAgICAgICAgfSAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICBhbGlnbm1lbnRzLnB1c2goYWxpKTtcbiAgICAgICAgfVxuICAgICAgICBjYWxsYmFjayhhbGlnbm1lbnRzKTtcbiAgICB9KTtcbn1cblxuXG5mdW5jdGlvbiBEQVNTdHlsZXNoZWV0KCkge1xuICAgIHRoaXMuc3R5bGVzID0gW107XG59XG5cbkRBU1N0eWxlc2hlZXQucHJvdG90eXBlLnB1c2hTdHlsZSA9IGZ1bmN0aW9uKGZpbHRlcnMsIHpvb20sIHN0eWxlKSB7XG4gICAgaWYgKCFmaWx0ZXJzKSB7XG4gICAgICAgIGZpbHRlcnMgPSB7dHlwZTogJ2RlZmF1bHQnfTtcbiAgICB9XG4gICAgdmFyIHN0eWxlSG9sZGVyID0gc2hhbGxvd0NvcHkoZmlsdGVycyk7XG4gICAgaWYgKHpvb20pIHtcbiAgICAgICAgc3R5bGVIb2xkZXIuem9vbSA9IHpvb207XG4gICAgfVxuICAgIHN0eWxlSG9sZGVyLnN0eWxlID0gc3R5bGU7XG4gICAgdGhpcy5zdHlsZXMucHVzaChzdHlsZUhvbGRlcik7XG59XG5cbmZ1bmN0aW9uIERBU1N0eWxlKCkge1xufVxuXG5mdW5jdGlvbiBwYXJzZUdyYWRpZW50KGdyYWQpIHtcbiAgICB2YXIgc3RlcHMgPSBncmFkLmdldEF0dHJpYnV0ZSgnc3RlcHMnKTtcbiAgICBpZiAoc3RlcHMpIHtcbiAgICAgICAgc3RlcHMgPSBzdGVwc3wwO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHN0ZXBzID0gNTA7XG4gICAgfVxuXG4gICAgdmFyIHN0b3BzID0gW107XG4gICAgdmFyIGNvbG9ycyA9IFtdO1xuICAgIHZhciBzZSA9IGdyYWQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ1NUT1AnKTtcbiAgICBmb3IgKHZhciBzaSA9IDA7IHNpIDwgc2UubGVuZ3RoOyArK3NpKSB7XG4gICAgICAgIHZhciBzdG9wID0gc2Vbc2ldO1xuICAgICAgICBzdG9wcy5wdXNoKDEuMCAqIHN0b3AuZ2V0QXR0cmlidXRlKCdzY29yZScpKTtcbiAgICAgICAgY29sb3JzLnB1c2goc3RvcC5maXJzdENoaWxkLm5vZGVWYWx1ZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG1ha2VDb2xvdXJTdGVwcyhzdGVwcywgc3RvcHMsIGNvbG9ycyk7XG59XG5cbkRBU1NvdXJjZS5wcm90b3R5cGUuc3R5bGVzaGVldCA9IGZ1bmN0aW9uKHN1Y2Nlc3NDQiwgZmFpbHVyZUNCKSB7XG4gICAgdmFyIGRhc1VSSSwgY3JlZHMgPSB0aGlzLmNyZWRlbnRpYWxzO1xuICAgIGlmICh0aGlzLnN0eWxlc2hlZXRfdXJpKSB7XG4gICAgICAgIGRhc1VSSSA9IHRoaXMuc3R5bGVzaGVldF91cmk7XG4gICAgICAgIGNyZWRzID0gZmFsc2U7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZGFzVVJJID0gdGhpcy5kYXNCYXNlVVJJICsgJ3N0eWxlc2hlZXQnO1xuICAgIH1cblxuICAgIHRoaXMuZ2V0VVJJKGRhc1VSSSkudGhlbihmdW5jdGlvbihkYXNVUkkpIHtcbiAgICAgICAgZG9Dcm9zc0RvbWFpblJlcXVlc3QoZGFzVVJJLCBmdW5jdGlvbihyZXNwb25zZVhNTCkge1xuICAgICAgICAgICAgaWYgKCFyZXNwb25zZVhNTCkge1xuICAgICAgICAgICAgICAgIGlmIChmYWlsdXJlQ0IpIHtcbiAgICAgICAgICAgICAgICAgICAgZmFpbHVyZUNCKCk7XG4gICAgICAgICAgICAgICAgfSBcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgc3R5bGVzaGVldCA9IG5ldyBEQVNTdHlsZXNoZWV0KCk7XG4gICAgICAgICAgICB2YXIgdHlwZVhNTHMgPSByZXNwb25zZVhNTC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnVFlQRScpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0eXBlWE1Mcy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgIHZhciB0eXBlU3R5bGUgPSB0eXBlWE1Mc1tpXTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHZhciBmaWx0ZXIgPSB7fTtcbiAgICAgICAgICAgICAgICBmaWx0ZXIudHlwZSA9IHR5cGVTdHlsZS5nZXRBdHRyaWJ1dGUoJ2lkJyk7IC8vIEFtIEkgcmlnaHQgaW4gdGhpbmtpbmcgdGhhdCB0aGlzIG1ha2VzIERBU1NUWUxFIFhNTCBpbnZhbGlkPyAgVWdoLlxuICAgICAgICAgICAgICAgIGZpbHRlci5sYWJlbCA9IHR5cGVTdHlsZS5nZXRBdHRyaWJ1dGUoJ2xhYmVsJyk7XG4gICAgICAgICAgICAgICAgZmlsdGVyLm1ldGhvZCA9IHR5cGVTdHlsZS5nZXRBdHRyaWJ1dGUoJ21ldGhvZCcpO1xuICAgICAgICAgICAgICAgIHZhciBnbHlwaFhNTHMgPSB0eXBlU3R5bGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ0dMWVBIJyk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgZ2kgPSAwOyBnaSA8IGdseXBoWE1Mcy5sZW5ndGg7ICsrZ2kpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGdseXBoWE1MID0gZ2x5cGhYTUxzW2dpXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHpvb20gPSBnbHlwaFhNTC5nZXRBdHRyaWJ1dGUoJ3pvb20nKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGdseXBoID0gY2hpbGRFbGVtZW50T2YoZ2x5cGhYTUwpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgc3R5bGUgPSBuZXcgREFTU3R5bGUoKTtcbiAgICAgICAgICAgICAgICAgICAgc3R5bGUuZ2x5cGggPSBnbHlwaC5sb2NhbE5hbWU7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZCA9IGdseXBoLmZpcnN0Q2hpbGQ7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoY2hpbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjaGlsZC5ub2RlVHlwZSA9PSBOb2RlLkVMRU1FTlRfTk9ERSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjaGlsZC5sb2NhbE5hbWUgPT0gJ0JHR1JBRCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGVbY2hpbGQubG9jYWxOYW1lXSA9IHBhcnNlR3JhZGllbnQoY2hpbGQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7ICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlW2NoaWxkLmxvY2FsTmFtZV0gPSBjaGlsZC5maXJzdENoaWxkLm5vZGVWYWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjaGlsZCA9IGNoaWxkLm5leHRTaWJsaW5nO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlc2hlZXQucHVzaFN0eWxlKGZpbHRlciwgem9vbSwgc3R5bGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN1Y2Nlc3NDQihzdHlsZXNoZWV0KTtcbiAgICAgICAgfSwgY3JlZHMpO1xuICAgIH0pLmNhdGNoKGZ1bmN0aW9uKGVycikge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICBmYWlsdXJlQ0IoKTtcbiAgICB9KTtcbn1cblxuLy9cbi8vIHNvdXJjZXMgY29tbWFuZFxuLy8gXG5cbmZ1bmN0aW9uIERBU1JlZ2lzdHJ5KHVyaSwgb3B0cylcbntcbiAgICBvcHRzID0gb3B0cyB8fCB7fTtcbiAgICB0aGlzLnVyaSA9IHVyaTtcbiAgICB0aGlzLm9wdHMgPSBvcHRzOyAgIFxufVxuXG5EQVNSZWdpc3RyeS5wcm90b3R5cGUuc291cmNlcyA9IGZ1bmN0aW9uKGNhbGxiYWNrLCBmYWlsdXJlLCBvcHRzKVxue1xuICAgIGlmICghb3B0cykge1xuICAgICAgICBvcHRzID0ge307XG4gICAgfVxuXG4gICAgdmFyIGZpbHRlcnMgPSBbXTtcbiAgICBpZiAob3B0cy50YXhvbikge1xuICAgICAgICBmaWx0ZXJzLnB1c2goJ29yZ2FuaXNtPScgKyBvcHRzLnRheG9uKTtcbiAgICB9XG4gICAgaWYgKG9wdHMuYXV0aCkge1xuICAgICAgICBmaWx0ZXJzLnB1c2goJ2F1dGhvcml0eT0nICsgb3B0cy5hdXRoKTtcbiAgICB9XG4gICAgaWYgKG9wdHMudmVyc2lvbikge1xuICAgICAgICBmaWx0ZXJzLnB1c2goJ3ZlcnNpb249JyArIG9wdHMudmVyc2lvbik7XG4gICAgfVxuICAgIHZhciBxdXJpID0gdGhpcy51cmk7XG4gICAgaWYgKGZpbHRlcnMubGVuZ3RoID4gMCkge1xuICAgICAgICBxdXJpID0gcXVyaSArICc/JyArIGZpbHRlcnMuam9pbignJicpOyAgIC8vICcmJyBhcyBhIHNlcGFyYXRvciB0byBoYWNrIGFyb3VuZCBkYXNyZWdpc3RyeS5vcmcgYnVnLlxuICAgIH1cblxuICAgIGRvQ3Jvc3NEb21haW5SZXF1ZXN0KHF1cmksIGZ1bmN0aW9uKHJlc3BvbnNlWE1MKSB7XG4gICAgICAgIGlmICghcmVzcG9uc2VYTUwgJiYgZmFpbHVyZSkge1xuICAgICAgICAgICAgZmFpbHVyZSgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHNvdXJjZXMgPSBbXTsgICAgICAgXG4gICAgICAgIHZhciBzb3VyY2VYTUxzID0gcmVzcG9uc2VYTUwuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ1NPVVJDRScpO1xuICAgICAgICBmb3IgKHZhciBzaSA9IDA7IHNpIDwgc291cmNlWE1Mcy5sZW5ndGg7ICsrc2kpIHtcbiAgICAgICAgICAgIHZhciBzb3VyY2VYTUwgPSBzb3VyY2VYTUxzW3NpXTtcbiAgICAgICAgICAgIHZhciB2ZXJzaW9uWE1McyA9IHNvdXJjZVhNTC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnVkVSU0lPTicpO1xuICAgICAgICAgICAgaWYgKHZlcnNpb25YTUxzLmxlbmd0aCA8IDEpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB2ZXJzaW9uWE1MID0gdmVyc2lvblhNTHNbMF07XG5cbiAgICAgICAgICAgIHZhciBjb29yZFhNTHMgPSB2ZXJzaW9uWE1MLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdDT09SRElOQVRFUycpO1xuICAgICAgICAgICAgdmFyIGNvb3JkcyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgY2kgPSAwOyBjaSA8IGNvb3JkWE1Mcy5sZW5ndGg7ICsrY2kpIHtcbiAgICAgICAgICAgICAgICB2YXIgY29vcmRYTUwgPSBjb29yZFhNTHNbY2ldO1xuICAgICAgICAgICAgICAgIHZhciBjb29yZCA9IG5ldyBEQVNDb29yZHMoKTtcbiAgICAgICAgICAgICAgICBjb29yZC5hdXRoID0gY29vcmRYTUwuZ2V0QXR0cmlidXRlKCdhdXRob3JpdHknKTtcbiAgICAgICAgICAgICAgICBjb29yZC50YXhvbiA9IGNvb3JkWE1MLmdldEF0dHJpYnV0ZSgndGF4aWQnKTtcbiAgICAgICAgICAgICAgICBjb29yZC52ZXJzaW9uID0gY29vcmRYTUwuZ2V0QXR0cmlidXRlKCd2ZXJzaW9uJyk7XG4gICAgICAgICAgICAgICAgY29vcmRzLnB1c2goY29vcmQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB2YXIgY2FwcyA9IFtdO1xuICAgICAgICAgICAgdmFyIGNhcFhNTHMgPSB2ZXJzaW9uWE1MLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdDQVBBQklMSVRZJyk7XG4gICAgICAgICAgICB2YXIgdXJpO1xuICAgICAgICAgICAgZm9yICh2YXIgY2kgPSAwOyBjaSA8IGNhcFhNTHMubGVuZ3RoOyArK2NpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNhcFhNTCA9IGNhcFhNTHNbY2ldO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGNhcHMucHVzaChjYXBYTUwuZ2V0QXR0cmlidXRlKCd0eXBlJykpO1xuXG4gICAgICAgICAgICAgICAgaWYgKGNhcFhNTC5nZXRBdHRyaWJ1dGUoJ3R5cGUnKSA9PSAnZGFzMTpmZWF0dXJlcycpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZlcCA9IGNhcFhNTC5nZXRBdHRyaWJ1dGUoJ3F1ZXJ5X3VyaScpO1xuICAgICAgICAgICAgICAgICAgICB1cmkgPSBmZXAuc3Vic3RyaW5nKDAsIGZlcC5sZW5ndGggLSAoJ2ZlYXR1cmVzJy5sZW5ndGgpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBwcm9wcyA9IHt9O1xuICAgICAgICAgICAgdmFyIHByb3BYTUxzID0gdmVyc2lvblhNTC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnUFJPUCcpO1xuICAgICAgICAgICAgZm9yICh2YXIgcGkgPSAwOyBwaSA8IHByb3BYTUxzLmxlbmd0aDsgKytwaSkge1xuICAgICAgICAgICAgICAgIHB1c2hvKHByb3BzLCBwcm9wWE1Mc1twaV0uZ2V0QXR0cmlidXRlKCduYW1lJyksIHByb3BYTUxzW3BpXS5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAodXJpKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNvdXJjZSA9IG5ldyBEQVNTb3VyY2UodXJpLCB7XG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZV91cmk6IHNvdXJjZVhNTC5nZXRBdHRyaWJ1dGUoJ3VyaScpLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiAgc291cmNlWE1MLmdldEF0dHJpYnV0ZSgndGl0bGUnKSxcbiAgICAgICAgICAgICAgICAgICAgZGVzYzogIHNvdXJjZVhNTC5nZXRBdHRyaWJ1dGUoJ2Rlc2NyaXB0aW9uJyksXG4gICAgICAgICAgICAgICAgICAgIGNvb3JkczogY29vcmRzLFxuICAgICAgICAgICAgICAgICAgICBwcm9wczogcHJvcHMsXG4gICAgICAgICAgICAgICAgICAgIGNhcGFiaWxpdGllczogY2Fwc1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHNvdXJjZXMucHVzaChzb3VyY2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBjYWxsYmFjayhzb3VyY2VzKTtcbiAgICB9KTtcbn1cblxuXG4vL1xuLy8gVXRpbGl0eSBmdW5jdGlvbnNcbi8vXG5cbmZ1bmN0aW9uIGVsZW1lbnRWYWx1ZShlbGVtZW50LCB0YWcpXG57XG4gICAgdmFyIGNoaWxkcmVuID0gZWxlbWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSh0YWcpO1xuICAgIGlmIChjaGlsZHJlbi5sZW5ndGggPiAwICYmIGNoaWxkcmVuWzBdLmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgdmFyIGMgPSBjaGlsZHJlblswXTtcbiAgICAgICAgaWYgKGMuY2hpbGROb2Rlcy5sZW5ndGggPT0gMSkge1xuICAgICAgICAgICAgcmV0dXJuIGMuZmlyc3RDaGlsZC5ub2RlVmFsdWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgcyA9ICcnO1xuICAgICAgICAgICAgZm9yICh2YXIgbmkgPSAwOyBuaSA8IGMuY2hpbGROb2Rlcy5sZW5ndGg7ICsrbmkpIHtcbiAgICAgICAgICAgICAgICBzICs9IGMuY2hpbGROb2Rlc1tuaV0ubm9kZVZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHM7XG4gICAgICAgIH1cblxuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gY2hpbGRFbGVtZW50T2YoZWxlbWVudClcbntcbiAgICBpZiAoZWxlbWVudC5oYXNDaGlsZE5vZGVzKCkpIHtcbiAgICAgICAgdmFyIGNoaWxkID0gZWxlbWVudC5maXJzdENoaWxkO1xuICAgICAgICBkbyB7XG4gICAgICAgICAgICBpZiAoY2hpbGQubm9kZVR5cGUgPT0gTm9kZS5FTEVNRU5UX05PREUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2hpbGQ7XG4gICAgICAgICAgICB9IFxuICAgICAgICAgICAgY2hpbGQgPSBjaGlsZC5uZXh0U2libGluZztcbiAgICAgICAgfSB3aGlsZSAoY2hpbGQgIT0gbnVsbCk7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufVxuXG5cbmZ1bmN0aW9uIGRhc0xpbmtzT2YoZWxlbWVudClcbntcbiAgICB2YXIgbGlua3MgPSBuZXcgQXJyYXkoKTtcbiAgICB2YXIgbWF5YmVMaW5rQ2hpbGRlbiA9IGVsZW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ0xJTksnKTtcbiAgICBmb3IgKHZhciBjaSA9IDA7IGNpIDwgbWF5YmVMaW5rQ2hpbGRlbi5sZW5ndGg7ICsrY2kpIHtcbiAgICAgICAgdmFyIGxpbmtYTUwgPSBtYXliZUxpbmtDaGlsZGVuW2NpXTtcbiAgICAgICAgaWYgKGxpbmtYTUwucGFyZW50Tm9kZSA9PSBlbGVtZW50KSB7XG4gICAgICAgICAgICBsaW5rcy5wdXNoKG5ldyBEQVNMaW5rKGxpbmtYTUwuZmlyc3RDaGlsZCA/IGxpbmtYTUwuZmlyc3RDaGlsZC5ub2RlVmFsdWUgOiAnVW5rbm93bicsIGxpbmtYTUwuZ2V0QXR0cmlidXRlKCdocmVmJykpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICByZXR1cm4gbGlua3M7XG59XG5cbmZ1bmN0aW9uIGRhc05vdGVzT2YoZWxlbWVudClcbntcbiAgICB2YXIgbm90ZXMgPSBbXTtcbiAgICB2YXIgbWF5YmVOb3RlcyA9IGVsZW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ05PVEUnKTtcbiAgICBmb3IgKHZhciBuaSA9IDA7IG5pIDwgbWF5YmVOb3Rlcy5sZW5ndGg7ICsrbmkpIHtcbiAgICAgICAgaWYgKG1heWJlTm90ZXNbbmldLmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgICAgIG5vdGVzLnB1c2gobWF5YmVOb3Rlc1tuaV0uZmlyc3RDaGlsZC5ub2RlVmFsdWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBub3Rlcztcbn1cblxuZnVuY3Rpb24gZG9Dcm9zc0RvbWFpblJlcXVlc3QodXJsLCBoYW5kbGVyLCBjcmVkZW50aWFscywgY3VzdEF1dGgpIHtcbiAgICAvLyBUT0RPOiBleHBsaWNpdCBlcnJvciBoYW5kbGVycz9cblxuICAgIGlmICh3aW5kb3cuWERvbWFpblJlcXVlc3QpIHtcbiAgICAgICAgdmFyIHJlcSA9IG5ldyBYRG9tYWluUmVxdWVzdCgpO1xuICAgICAgICByZXEub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgZG9tID0gbmV3IEFjdGl2ZVhPYmplY3QoXCJNaWNyb3NvZnQuWE1MRE9NXCIpO1xuICAgICAgICAgICAgZG9tLmFzeW5jID0gZmFsc2U7XG4gICAgICAgICAgICBkb20ubG9hZFhNTChyZXEucmVzcG9uc2VUZXh0KTtcbiAgICAgICAgICAgIGhhbmRsZXIoZG9tKTtcbiAgICAgICAgfVxuICAgICAgICByZXEub3BlbihcImdldFwiLCB1cmwpO1xuICAgICAgICByZXEuc2VuZCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB2YXIgcmVxID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICAgICAgICB2YXIgdGltZW91dCA9IHNldFRpbWVvdXQoXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCd0aW1pbmcgb3V0ICcgICsgdXJsKTtcbiAgICAgICAgICAgICAgICAgICAgcmVxLmFib3J0KCk7XG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZXIobnVsbCwgcmVxKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIDUwMDBcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIHJlcS5vbnRpbWVvdXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygndGltZW91dCBvbiAnICsgdXJsKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHJlcS5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVxLnJlYWR5U3RhdGUgPT0gNCkge1xuICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXEuc3RhdHVzID49IDIwMCB8fCByZXEuc3RhdHVzID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZXIocmVxLnJlc3BvbnNlWE1MLCByZXEpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJlcS5vcGVuKFwiZ2V0XCIsIHVybCwgdHJ1ZSk7XG4gICAgICAgICAgICAvLyBJRTEwLzExIGZpeDogVGhlIHRpbWVvdXQgcHJvcGVydHkgbWF5IGJlIHNldCBvbmx5IGluIHRoZSB0aW1lIGludGVydmFsIGJldHdlZW4gYSBjYWxsIHRvIHRoZSBvcGVuIG1ldGhvZFxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgIGFuZCB0aGUgZmlyc3QgY2FsbCB0byB0aGUgc2VuZCBtZXRob2QuXG4gICAgICAgICAgICByZXEudGltZW91dCA9IDUwMDA7XG4gICAgICAgICAgICBpZiAoY3JlZGVudGlhbHMpIHtcbiAgICAgICAgICAgICAgICByZXEud2l0aENyZWRlbnRpYWxzID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjdXN0QXV0aCkge1xuICAgICAgICAgICAgICAgIHJlcS5zZXRSZXF1ZXN0SGVhZGVyKCdYLURBUy1BdXRob3Jpc2F0aW9uJywgY3VzdEF1dGgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVxLm92ZXJyaWRlTWltZVR5cGUoJ3RleHQveG1sJyk7XG4gICAgICAgICAgICByZXEuc2V0UmVxdWVzdEhlYWRlcignQWNjZXB0JywgJ2FwcGxpY2F0aW9uL3htbCwqLyonKTtcbiAgICAgICAgICAgIHJlcS5zZW5kKCk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGhhbmRsZXIobnVsbCwgcmVxLCBlKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuREFTU291cmNlLnByb3RvdHlwZS5kb0Nyb3NzRG9tYWluUmVxdWVzdCA9IGZ1bmN0aW9uKHVybCwgaGFuZGxlciwgZXJySGFuZGxlcikge1xuICAgIHZhciBjdXN0QXV0aDtcbiAgICBpZiAodGhpcy54VXNlcikge1xuICAgICAgICBjdXN0QXV0aCA9ICdCYXNpYyAnICsgYnRvYSh0aGlzLnhVc2VyICsgJzonICsgdGhpcy54UGFzcyk7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIGRvQ3Jvc3NEb21haW5SZXF1ZXN0KHVybCwgaGFuZGxlciwgdGhpcy5jcmVkZW50aWFscywgY3VzdEF1dGgpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBpZiAoZXJySGFuZGxlcikge1xuICAgICAgICAgICAgZXJySGFuZGxlcihlcnIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiBpc0Rhc0Jvb2xlYW5UcnVlKHMpIHtcbiAgICBzID0gKCcnICsgcykudG9Mb3dlckNhc2UoKTtcbiAgICByZXR1cm4gcz09PSd5ZXMnIHx8IHM9PT0ndHJ1ZSc7XG59XG5cbmZ1bmN0aW9uIGlzRGFzQm9vbGVhbk5vdEZhbHNlKHMpIHtcbiAgICBpZiAoIXMpXG4gICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgIHMgPSAoJycgKyBzKS50b0xvd2VyQ2FzZSgpO1xuICAgIHJldHVybiBzIT09J25vJyB8fCBzIT09J2ZhbHNlJztcbn1cblxuZnVuY3Rpb24gY29weVN0eWxlc2hlZXQoc3MpIHtcbiAgICB2YXIgbnNzID0gc2hhbGxvd0NvcHkoc3MpO1xuICAgIG5zcy5zdHlsZXMgPSBbXTtcbiAgICBmb3IgKHZhciBzaSA9IDA7IHNpIDwgc3Muc3R5bGVzLmxlbmd0aDsgKytzaSkge1xuICAgICAgICB2YXIgc2ggPSBuc3Muc3R5bGVzW3NpXSA9IHNoYWxsb3dDb3B5KHNzLnN0eWxlc1tzaV0pO1xuICAgICAgICBzaC5fbWV0aG9kUkUgPSBzaC5fbGFiZWxSRSA9IHNoLl90eXBlUkUgPSB1bmRlZmluZWQ7XG4gICAgICAgIHNoLnN0eWxlID0gc2hhbGxvd0NvcHkoc2guc3R5bGUpO1xuICAgICAgICBzaC5zdHlsZS5pZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgc2guc3R5bGUuX2dyYWRpZW50ID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgICByZXR1cm4gbnNzO1xufVxuXG5pZiAodHlwZW9mKG1vZHVsZSkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgICAgIERBU0dyb3VwOiBEQVNHcm91cCxcbiAgICAgICAgREFTRmVhdHVyZTogREFTRmVhdHVyZSxcbiAgICAgICAgREFTU3R5bGVzaGVldDogREFTU3R5bGVzaGVldCxcbiAgICAgICAgREFTU3R5bGU6IERBU1N0eWxlLFxuICAgICAgICBEQVNTb3VyY2U6IERBU1NvdXJjZSxcbiAgICAgICAgREFTU2VnbWVudDogREFTU2VnbWVudCxcbiAgICAgICAgREFTUmVnaXN0cnk6IERBU1JlZ2lzdHJ5LFxuICAgICAgICBEQVNTZXF1ZW5jZTogREFTU2VxdWVuY2UsXG4gICAgICAgIERBU0xpbms6IERBU0xpbmssXG5cbiAgICAgICAgaXNEYXNCb29sZWFuVHJ1ZTogaXNEYXNCb29sZWFuVHJ1ZSxcbiAgICAgICAgaXNEYXNCb29sZWFuTm90RmFsc2U6IGlzRGFzQm9vbGVhbk5vdEZhbHNlLFxuICAgICAgICBjb3B5U3R5bGVzaGVldDogY29weVN0eWxlc2hlZXQsXG4gICAgICAgIGNvb3Jkc01hdGNoOiBjb29yZHNNYXRjaFxuICAgIH07XG59XG4iLCIvKiBqc2hpbnQgZXN2ZXJzaW9uOiA2ICovXG5cInVzZSBzdHJpY3RcIjtcblxuaW1wb3J0IHsgU3ViVGllciB9IGZyb20gXCIuL2ZlYXR1cmUtZHJhdy5qc1wiO1xuXG5pbXBvcnQgeyBkcmF3U2VxVGllciB9IGZyb20gXCIuL3NlcXVlbmNlLWRyYXcuanNcIjtcblxuXG5pbXBvcnQgeyBSYW5nZSwgdW5pb24gfSBmcm9tIFwiLi9zcGFucy5qc1wiO1xuXG5pbXBvcnQgeyBzaGFsbG93Q29weSwgcHVzaG8gfSBmcm9tIFwiLi91dGlscy5qc1wiO1xuXG5cbmltcG9ydCAqIGFzIEdseXBocyBmcm9tIFwiLi9nbHlwaHMuanNcIjtcblxuaW1wb3J0IHsgaXNEYXNCb29sZWFuVHJ1ZSxcbiAgICAgICAgIGlzRGFzQm9vbGVhbk5vdEZhbHNlLFxuICAgICAgICAgREFTRmVhdHVyZSB9IGZyb20gXCIuL2Rhcy5qc1wiO1xuXG5pbXBvcnQgeyBtYWtlR3JhZGllbnQgfSBmcm9tIFwiLi9jb2xvci5qc1wiO1xuXG5pbXBvcnQgeyBwYXJzZUNpZ2FyIH0gZnJvbSBcIi4vY2lnYXIuanNcIjtcblxuaW1wb3J0IHsgZm9ybWF0UXVhbnRMYWJlbCB9IGZyb20gXCIuL251bWZvcm1hdHNcIjtcblxuaW1wb3J0ICogYXMgUiBmcm9tIFwicmFtZGFcIjtcblxuLy8gVGhlIG9ubHkgZnVuY3Rpb25zIHRoYXQgbXVzdCBiZSBleHBvcnRlZCBieSBhIHJlbmRlcmVyIGFyZSByZW5kZXJUaWVyXG4vLyBhbmQgZHJhd1RpZXIsIHRoZSByZXN0IGFyZSBleHBvcnRlZCBmb3IgdXNlIGluIG90aGVyIHJlbmRlcmVycy5cbmV4cG9ydCB7IHJlbmRlclRpZXIsXG4gICAgICAgICBkcmF3VGllcixcbiAgICAgICAgIHByZXBhcmVTdWJ0aWVycyxcbiAgICAgICAgIHByZXBhcmVWaWV3cG9ydCxcbiAgICAgICAgIHBhaW50LFxuICAgICAgICAgZHJhd1VubWFwcGVkLFxuICAgICAgICAgY2xlYXJWaWV3cG9ydCxcbiAgICAgICAgIGNyZWF0ZVF1YW50T3ZlcmxheSxcbiAgICAgICAgIHBhaW50UXVhbnRcbiAgICAgICB9O1xuXG5mdW5jdGlvbiByZW5kZXJUaWVyKHN0YXR1cywgdGllcikge1xuICAgIGRyYXdUaWVyKHRpZXIpO1xuICAgIHRpZXIudXBkYXRlU3RhdHVzKHN0YXR1cyk7XG59XG5cbmZ1bmN0aW9uIGRyYXdUaWVyKHRpZXIpIHtcbiAgICBsZXQgY2FudmFzID0gdGllci52aWV3cG9ydC5nZXRDb250ZXh0KFwiMmRcIik7XG4gICAgbGV0IHJldGluYSA9IHRpZXIuYnJvd3Nlci5yZXRpbmEgJiYgd2luZG93LmRldmljZVBpeGVsUmF0aW8gPiAxO1xuXG4gICAgaWYgKHRpZXIuc2VxdWVuY2VTb3VyY2UpIHtcbiAgICAgICAgbGV0IHNlcXVlbmNlID0gdGllci5jdXJyZW50U2VxdWVuY2U7XG4gICAgICAgIGRyYXdTZXFUaWVyKHRpZXIsIHNlcXVlbmNlKTtcbiAgICB9IGVsc2UgaWYgKHRpZXIuY3VycmVudEZlYXR1cmVzKSB7XG4gICAgICAgIHByZXBhcmVTdWJ0aWVycyh0aWVyLCBjYW52YXMpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiTm8gc2VxdWVuY2Ugb3IgZmVhdHVyZXMgaW4gdGllciFcIik7XG4gICAgfVxuXG4gICAgaWYgKHRpZXIuc3VidGllcnMpIHtcbiAgICAgICAgbGV0IHZPZmZzZXQgPSBSLmRlZmF1bHRUbygwLCB0aWVyLmRhc1NvdXJjZS52T2Zmc2V0KTtcblxuICAgICAgICBwcmVwYXJlVmlld3BvcnQodGllciwgY2FudmFzLCByZXRpbmEsIHRydWUsIHZPZmZzZXQpOyAgIC8vIE5CIGNhbGxzIGNhbnZhcy5zYXZlXG4gICAgICAgIHBhaW50KHRpZXIsIGNhbnZhcywgdk9mZnNldCk7XG4gICAgICAgIGNhbnZhcy5yZXN0b3JlKCk7XG4gICAgfVxuXG4gICAgdGllci5kcmF3T3ZlcmxheSgpO1xuICAgIHRpZXIucGFpbnRRdWFudCgpO1xuXG4gICAgaWYgKHR5cGVvZih0aWVyLmRhc1NvdXJjZS5kcmF3Q2FsbGJhY2spID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgdGllci5kYXNTb3VyY2UuZHJhd0NhbGxiYWNrKGNhbnZhcywgdGllcik7XG4gICAgfVxuXG4gICAgdGllci5vcmlnaW5IYXh4ID0gMDtcbiAgICB0aWVyLmJyb3dzZXIuYXJyYW5nZVRpZXJzKCk7XG59XG5cbmZ1bmN0aW9uIGdseXBoc0Zvckdyb3VwKGNhbnZhcywgZmVhdHVyZXMsIHksIGdyb3VwRWxlbWVudCwgdGllcikge1xuICAgIGxldCBnc3R5bGUgPSB0aWVyLnN0eWxlRm9yRmVhdHVyZShncm91cEVsZW1lbnQpO1xuICAgIGxldCBsYWJlbDtcbiAgICBsZXQgbGFiZWxXYW50ZWQgPSBmYWxzZTtcblxuICAgIGxldCBnbHlwaHMgPSBbXTtcbiAgICBsZXQgc3RyYW5kID0gbnVsbDtcblxuICAgIGZlYXR1cmVzLmZvckVhY2goZiA9PiB7XG4gICAgICAgIGlmIChmLm9yaWVudGF0aW9uICYmIHN0cmFuZCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgc3RyYW5kID0gZi5vcmllbnRhdGlvbjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghbGFiZWwgJiYgZi5sYWJlbCkge1xuICAgICAgICAgICAgbGFiZWwgPSBmLmxhYmVsO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHN0eWxlID0gdGllci5zdHlsZUZvckZlYXR1cmUoZik7XG4gICAgICAgIGlmIChzdHlsZSAmJiAhZi5wYXJ0cykge1xuICAgICAgICAgICAgaWYgKGlzRGFzQm9vbGVhblRydWUoc3R5bGUuTEFCRUwpKVxuICAgICAgICAgICAgICAgIGxhYmVsV2FudGVkID0gdHJ1ZTtcblxuICAgICAgICAgICAgbGV0IGdseXBoID0gZ2x5cGhGb3JGZWF0dXJlKGNhbnZhcywgZiwgeSwgc3R5bGUsIHRpZXIsIG51bGwsIHRydWUpO1xuICAgICAgICAgICAgaWYgKGdseXBoKVxuICAgICAgICAgICAgICAgIGdseXBocy5wdXNoKGdseXBoKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgaWYgKGdseXBocy5sZW5ndGggPT09IDApXG4gICAgICAgIHJldHVybiBudWxsO1xuXG4gICAgbGV0IGNvbm5lY3RvciA9ICdmbGF0JztcbiAgICBpZiAoZ3N0eWxlICYmIGdzdHlsZS5nbHlwaCA9PT0gJ0xJTkUnKSB7XG4gICAgICAgIC8vIFN0aWNrIHdpdGggZmxhdC4uLlxuICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICh0aWVyLmRhc1NvdXJjZS5jb2xsYXBzZVN1cGVyR3JvdXBzICYmICF0aWVyLmJ1bXBlZCkge1xuICAgICAgICAgICAgaWYgKHN0cmFuZCA9PT0gJysnIHx8IHN0cmFuZCA9PT0gJy0nKSB7XG4gICAgICAgICAgICAgICAgY29ubmVjdG9yID0gJ2NvbGxhcHNlZCcgKyBzdHJhbmQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoc3RyYW5kID09PSAnKycgfHwgc3RyYW5kID09PSAnLScpIHtcbiAgICAgICAgICAgICAgICBjb25uZWN0b3IgPSAnaGF0JyArIHN0cmFuZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGxldCBsYWJlbFRleHQgPSBudWxsO1xuICAgIGlmICgobGFiZWwgJiYgbGFiZWxXYW50ZWQpIHx8XG4gICAgICAgIChnc3R5bGUgJiYgKGlzRGFzQm9vbGVhblRydWUoZ3N0eWxlLkxBQkVMKSB8fFxuICAgICAgICAgICAgICAgICAgICBpc0Rhc0Jvb2xlYW5UcnVlKGdzdHlsZS5MQUJFTFMpKSkpIHsgIC8vIEhBQ0ssIExBQkVMUyBzaG91bGQgd29yay5cbiAgICAgICAgbGFiZWxUZXh0ID0gZ3JvdXBFbGVtZW50LmxhYmVsIHx8IGxhYmVsO1xuICAgIH1cblxuICAgIGdseXBocy5zb3J0KChnMSwgZzIpID0+IChnMS56aW5kZXggfHwgMCkgLSAoZzIuemluZGV4IHx8IDApKTtcblxuICAgIGxldCBncm91cEdseXBoID0gbmV3IEdseXBocy5Hcm91cEdseXBoKGdseXBocywgY29ubmVjdG9yKTtcbiAgICBpZiAobGFiZWxUZXh0KSB7XG4gICAgICAgIGlmIChzdHJhbmQgPT09ICcrJykge1xuICAgICAgICAgICAgbGFiZWxUZXh0ID0gJz4nICsgbGFiZWxUZXh0O1xuICAgICAgICB9IGVsc2UgaWYgKHN0cmFuZCA9PT0gJy0nKSB7XG4gICAgICAgICAgICBsYWJlbFRleHQgPSAnPCcgKyBsYWJlbFRleHQ7XG4gICAgICAgIH1cbiAgICAgICAgZ3JvdXBHbHlwaCA9IG5ldyBHbHlwaHMuTGFiZWxsZWRHbHlwaChjYW52YXMsIGdyb3VwR2x5cGgsIGxhYmVsVGV4dCwgZmFsc2UpO1xuICAgIH1cbiAgICBncm91cEdseXBoLmJ1bXAgPSB0cnVlO1xuICAgIHJldHVybiBncm91cEdseXBoO1xufVxuXG5mdW5jdGlvbiBnbHlwaEZvckZlYXR1cmUoY2FudmFzLCBmZWF0dXJlLCB5LCBzdHlsZSwgdGllciwgZm9yY2VIZWlnaHQsIG5vTGFiZWwpIHtcbiAgICBsZXQgc2NhbGUgPSB0aWVyLmJyb3dzZXIuc2NhbGU7XG4gICAgbGV0IG9yaWdpbiA9IHRpZXIuYnJvd3Nlci52aWV3U3RhcnQ7XG4gICAgbGV0IGdseXBoVHlwZSA9IHN0eWxlLmdseXBoIHx8ICdCT1gnO1xuXG4gICAgbGV0IG1pbiA9IGZlYXR1cmUubWluO1xuICAgIGxldCBtYXggPSBmZWF0dXJlLm1heDtcbiAgICBsZXQgc3RyYW5kID0gZmVhdHVyZS5vcmllbnRhdGlvbjtcbiAgICBsZXQgc2NvcmUgPSBmZWF0dXJlLnNjb3JlO1xuICAgIGxldCBsYWJlbCA9IGZlYXR1cmUubGFiZWwgfHwgZmVhdHVyZS5pZDtcblxuICAgIC8vIEhpZGUgZ2x5cGhzIHRoYXQgYXJlIHNtYWxsZXIgdGhhbiBhIHBpeGVsIGluIHdpZHRoLlxuICAgIGlmICh0aWVyLmRhc1NvdXJjZS5oaWRlU3VicGl4ZWxHbHlwaHMgJiYgKG1heCAtIG1pbikgKiBzY2FsZSA8IDEpIHJldHVybiBudWxsO1xuXG4gICAgbGV0IG1pblBvcyA9IChtaW4gLSBvcmlnaW4pICogc2NhbGU7XG4gICAgbGV0IHJhd01heFBvcyA9ICgobWF4IC0gb3JpZ2luICsgMSkgKiBzY2FsZSk7XG4gICAgbGV0IG1heFBvcyA9IE1hdGgubWF4KHJhd01heFBvcywgbWluUG9zICsgMSk7XG5cbiAgICBmb3JjZUhlaWdodCA9IGZvcmNlSGVpZ2h0ICogMS4wO1xuICAgIGxldCBoZWlnaHQgPSAodGllci5mb3JjZUhlaWdodCB8fCBzdHlsZS5IRUlHSFQgfHwgZm9yY2VIZWlnaHQgfHwgMTIpICogMS4wO1xuICAgIGhlaWdodCA9IGhlaWdodCAqIDEuMDtcbiAgICBsZXQgYnVtcCA9IHN0eWxlLkJVTVAgJiYgaXNEYXNCb29sZWFuVHJ1ZShzdHlsZS5CVU1QKTtcblxuICAgIGxldCBnbHlwaDtcbiAgICBsZXQgcXVhbnQ7XG5cbiAgICAvLyBDcmVhdGUgdGhlIGdseXBoXG4gICAgaWYgKGdseXBoVHlwZSA9PT0gJ0NST1NTJyB8fFxuICAgICAgICBnbHlwaFR5cGUgPT09ICdFWCcgfHxcbiAgICAgICAgZ2x5cGhUeXBlID09PSAnVFJJQU5HTEUnIHx8XG4gICAgICAgIGdseXBoVHlwZSA9PT0gJ0RPVCcgfHxcbiAgICAgICAgZ2x5cGhUeXBlID09PSAnU1FVQVJFJyB8fFxuICAgICAgICBnbHlwaFR5cGUgPT09ICdTVEFSJyB8fFxuICAgICAgICBnbHlwaFR5cGUgPT09ICdQTElNU09MTCcpIHtcbiAgICAgICAgY29uc3QgZ2x5cGhIb2xkZXIgPSBmZWF0dXJlVG9Dcm9zc0xpa2VHbHlwaChjYW52YXMsIHRpZXIsIGZlYXR1cmUsIHksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2x5cGhUeXBlLCBzdHlsZSwgZm9yY2VIZWlnaHQsIG5vTGFiZWwpO1xuICAgICAgICBpZiAoZ2x5cGhIb2xkZXIpIHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICBbZ2x5cGgsIHF1YW50XSA9IGdseXBoSG9sZGVyO1xuICAgICAgICB9XG4gICAgfSBlbHNlIGlmIChnbHlwaFR5cGUgPT09ICdISVNUT0dSQU0nIHx8IGdseXBoVHlwZSA9PT0gJ0dSQURJRU5UJyAmJiBzY29yZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgW2dseXBoLCBxdWFudF0gPSBmZWF0dXJlVG9HcmFkaWVudExpa2VHbHlwaChjYW52YXMsIHRpZXIsIGZlYXR1cmUsIHksIGdseXBoVHlwZSwgc3R5bGUsIGZvcmNlSGVpZ2h0KTtcblxuICAgIH0gZWxzZSBpZiAoZ2x5cGhUeXBlID09PSAnSElEREVOJykge1xuICAgICAgICBnbHlwaCA9IG5ldyBHbHlwaHMuUGFkZGVkR2x5cGgobnVsbCwgbWluUG9zLCBtYXhQb3MpO1xuICAgICAgICBub0xhYmVsID0gdHJ1ZTtcblxuICAgIH0gZWxzZSBpZiAoZ2x5cGhUeXBlID09PSAnQVJST1cnKSB7XG4gICAgICAgIGxldCBjb2xvciA9IHN0eWxlLkZHQ09MT1IgfHwgJ3B1cnBsZSc7XG4gICAgICAgIGxldCBwYXJhbGxlbCA9IGlzRGFzQm9vbGVhblRydWUoc3R5bGUuUEFSQUxMRUwpO1xuICAgICAgICBsZXQgc3cgPSBpc0Rhc0Jvb2xlYW5UcnVlKHN0eWxlLlNPVVRIV0VTVCk7XG4gICAgICAgIGxldCBuZSA9IGlzRGFzQm9vbGVhblRydWUoc3R5bGUuTk9SVEhFQVNUKTtcbiAgICAgICAgZ2x5cGggPSBuZXcgR2x5cGhzLkFycm93R2x5cGgobWluUG9zLCBtYXhQb3MsIGhlaWdodCwgY29sb3IsIHBhcmFsbGVsLCBzdywgbmUpO1xuXG4gICAgfSBlbHNlIGlmIChnbHlwaFR5cGUgPT09ICdBTkNIT1JFRF9BUlJPVycpIHtcbiAgICAgICAgbGV0IHN0cm9rZSA9IHN0eWxlLkZHQ09MT1IgfHwgJ25vbmUnO1xuICAgICAgICBsZXQgZmlsbCA9IHN0eWxlLkJHQ09MT1IgfHwgJ2dyZWVuJztcbiAgICAgICAgZ2x5cGggPSBuZXcgR2x5cGhzLkFBcnJvd0dseXBoKG1pblBvcywgbWF4UG9zLCBoZWlnaHQsIGZpbGwsIHN0cm9rZSwgc3RyYW5kKTtcbiAgICAgICAgZ2x5cGguYnVtcCA9IHRydWU7XG5cbiAgICB9IGVsc2UgaWYgKGdseXBoVHlwZSA9PT0gJ1NQQU4nKSB7XG4gICAgICAgIGxldCBzdHJva2UgPSBzdHlsZS5GR0NPTE9SIHx8ICdibGFjayc7XG4gICAgICAgIGdseXBoID0gbmV3IEdseXBocy5TcGFuR2x5cGgobWluUG9zLCBtYXhQb3MsIGhlaWdodCwgc3Ryb2tlKTtcblxuICAgIH0gZWxzZSBpZiAoZ2x5cGhUeXBlID09PSAnTElORScpIHtcbiAgICAgICAgbGV0IHN0cm9rZSA9IHN0eWxlLkZHQ09MT1IgfHwgJ2JsYWNrJztcbiAgICAgICAgbGV0IGxpbmVTdHlsZSA9IHN0eWxlLlNUWUxFIHx8ICdzb2xpZCc7XG4gICAgICAgIGdseXBoID0gbmV3IEdseXBocy5MaW5lR2x5cGgobWluUG9zLCBtYXhQb3MsIGhlaWdodCwgbGluZVN0eWxlLCBzdHJhbmQsIHN0cm9rZSk7XG5cbiAgICB9IGVsc2UgaWYgKGdseXBoVHlwZSA9PT0gJ1BSSU1FUlMnKSB7XG4gICAgICAgIGxldCBzdHJva2UgPSBzdHlsZS5GR0NPTE9SIHx8ICdibGFjayc7XG4gICAgICAgIGxldCBmaWxsID0gc3R5bGUuQkdDT0xPUiB8fCAncmVkJztcbiAgICAgICAgZ2x5cGggPSBuZXcgR2x5cGhzLlByaW1lcnNHbHlwaChtaW5Qb3MsIG1heFBvcywgaGVpZ2h0LCBmaWxsLCBzdHJva2UpO1xuXG4gICAgfSBlbHNlIGlmIChnbHlwaFR5cGUgPT09ICdURVhUJykge1xuICAgICAgICBsZXQgc3RyaW5nID0gc3R5bGUuU1RSSU5HIHx8ICd0ZXh0JztcbiAgICAgICAgbGV0IGZpbGwgPSBzdHlsZS5GR0NPTE9SIHx8ICdibGFjayc7XG4gICAgICAgIGdseXBoID0gbmV3IEdseXBocy5UZXh0R2x5cGgoY2FudmFzLCBtaW5Qb3MsIG1heFBvcywgaGVpZ2h0LCBmaWxsLCBzdHJpbmcpO1xuXG4gICAgfSBlbHNlIGlmIChnbHlwaFR5cGUgPT09ICdUT09NQU5ZJykge1xuICAgICAgICBsZXQgc3Ryb2tlID0gc3R5bGUuRkdDT0xPUiB8fCAnZ3JheSc7XG4gICAgICAgIGxldCBmaWxsID0gc3R5bGUuQkdDT0xPUiB8fCAnb3JhbmdlJztcbiAgICAgICAgZ2x5cGggPSBuZXcgR2x5cGhzLlRvb01hbnlHbHlwaChtaW5Qb3MsIG1heFBvcywgaGVpZ2h0LCBmaWxsLCBzdHJva2UpO1xuXG4gICAgfSBlbHNlIGlmIChnbHlwaFR5cGUgPT09ICdQT0lOVCcpIHtcbiAgICAgICAgW2dseXBoLCBxdWFudF0gPSBmZWF0dXJlVG9Qb2ludEdseXBoKHRpZXIsIGZlYXR1cmUsIHN0eWxlKTtcblxuICAgIH0gZWxzZSBpZiAoZ2x5cGhUeXBlID09PSAnX19TRVFVRU5DRScpIHtcbiAgICAgICAgZ2x5cGggPSBzZXF1ZW5jZUdseXBoKGNhbnZhcywgdGllciwgZmVhdHVyZSwgc3R5bGUsIGZvcmNlSGVpZ2h0KTtcblxuICAgIH0gZWxzZSBpZiAoZ2x5cGhUeXBlID09PSAnX19JTlNFUlRJT04nKSB7XG4gICAgICAgIGxldCBpbnNlcnRpb25MYWJlbHMgPSB0cnVlO1xuICAgICAgICBpZiAoc3R5bGUuX19JTlNFUlRJT05TICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICBpbnNlcnRpb25MYWJlbHMgPSBpc0Rhc0Jvb2xlYW5Ob3RGYWxzZShzdHlsZS5fX0lOU0VSVElPTlMpXG4gICAgICAgIGdseXBoID0gbmV3IEdseXBocy5UcmlhbmdsZUdseXBoKG1pblBvcywgNSwgJ1MnLCA1LCB0aWVyLmJyb3dzZXIuYmFzZUNvbG9yc1snSSddKTtcbiAgICAgICAgaWYgKGluc2VydGlvbkxhYmVscylcbiAgICAgICAgICAgIGdseXBoID0gbmV3IEdseXBocy5MYWJlbGxlZEdseXBoKGNhbnZhcywgZ2x5cGgsIGZlYXR1cmUuaW5zZXJ0aW9uIHx8IGZlYXR1cmUuYWx0QWxsZWxlc1swXSwgZmFsc2UsICdjZW50ZXInLCAnYWJvdmUnLCAnN3B4IHNhbnMtc2VyaWYnKTtcblxuICAgICAgICBpZiAoKG1heFBvcyAtIG1pblBvcykgPiAxKSB7XG4gICAgICAgICAgICBsZXQgc3Ryb2tlID0gc3R5bGUuRkdDT0xPUiB8fCAncmVkJztcbiAgICAgICAgICAgIGxldCBmaWxsID0gc3R5bGUuQkdDT0xPUiB8fCBzdHlsZS5DT0xPUjEgfHwgJ2dyZWVuJztcbiAgICAgICAgICAgIGxldCBiZyA9IG5ldyBHbHlwaHMuQm94R2x5cGgobWluUG9zLCA1LCAobWF4UG9zIC0gbWluUG9zKSwgaGVpZ2h0LCBmaWxsLCBzdHJva2UpO1xuICAgICAgICAgICAgZ2x5cGggPSBuZXcgR2x5cGhzLkdyb3VwR2x5cGgoW2JnLCBnbHlwaF0pO1xuICAgICAgICB9XG5cbiAgICB9IGVsc2UgaWYgKGdseXBoVHlwZSA9PT0gJ19fTk9ORScpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG5cbiAgICB9IGVsc2UgaWYgKGdseXBoVHlwZSA9PT0gJ0JPWCcpIHtcbiAgICAgICAgbGV0IHN0cm9rZSA9IHN0eWxlLkZHQ09MT1IgfHwgbnVsbDtcbiAgICAgICAgbGV0IGZpbGwgPSBzdHlsZS5CR0NPTE9SIHx8IHN0eWxlLkNPTE9SMSB8fCAnZ3JlZW4nO1xuICAgICAgICBpZiAoc3R5bGUuQkdJVEVNICYmIGZlYXR1cmUuaXRlbVJnYilcbiAgICAgICAgICAgIGZpbGwgPSBmZWF0dXJlLml0ZW1SZ2I7XG4gICAgICAgIGxldCBzY2FsZSA9IChtYXhQb3MgLSBtaW5Qb3MpIC8gKG1heCAtIG1pbik7XG4gICAgICAgIGlmIChmZWF0dXJlLnR5cGUgPT0gJ3RyYW5zbGF0aW9uJyAmJlxuICAgICAgICAgICAgKGZlYXR1cmUubWV0aG9kID09ICdwcm90ZWluX2NvZGluZycgfHwgZmVhdHVyZS5yZWFkZnJhbWVFeHBsaWNpdCkgJiZcbiAgICAgICAgICAgICghZmVhdHVyZS50YWdzIHx8IGZlYXR1cmUudGFncy5pbmRleE9mKCdjZHNfc3RhcnRfTkYnKSA8IDAgfHwgZmVhdHVyZS5yZWFkZnJhbWVFeHBsaWNpdCkgJiZcbiAgICAgICAgICAgICghdGllci5kYXNTb3VyY2UuY29sbGFwc2VTdXBlckdyb3VwcyB8fCB0aWVyLmJ1bXBlZCkgJiZcbiAgICAgICAgICAgIHNjYWxlID49IDAuNSkge1xuICAgICAgICAgICAgbGV0IHJlZlNlcSA9IGdldFJlZlNlcSh0aWVyLCBtaW4sIG1heCk7XG4gICAgICAgICAgICBnbHlwaCA9IG5ldyBHbHlwaHMuQW1pbm9BY2lkR2x5cGgobWluUG9zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heFBvcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWZTZXEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmVhdHVyZS5vcmllbnRhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZWF0dXJlLnJlYWRmcmFtZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBnbHlwaCA9IG5ldyBHbHlwaHMuQm94R2x5cGgobWluUG9zLCAwLCAobWF4UG9zIC0gbWluUG9zKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQsIGZpbGwsIHN0cm9rZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIWdseXBoKVxuICAgICAgICByZXR1cm47XG4gICAgXG4gICAgaWYgKChpc0Rhc0Jvb2xlYW5UcnVlKHN0eWxlLkxBQkVMKSB8fCBmZWF0dXJlLmZvcmNlTGFiZWwpICYmXG4gICAgICAgIGxhYmVsICYmICFub0xhYmVsKSB7XG4gICAgICAgIGdseXBoID0gbmV3IEdseXBocy5MYWJlbGxlZEdseXBoKGNhbnZhcywgZ2x5cGgsIGxhYmVsLCBmYWxzZSk7XG4gICAgfVxuXG4gICAgaWYgKGJ1bXApIHtcbiAgICAgICAgZ2x5cGguYnVtcCA9IHRydWU7XG4gICAgfVxuXG4gICAgZ2x5cGguZmVhdHVyZSA9IGZlYXR1cmU7XG5cbiAgICBpZiAoaXNEYXNCb29sZWFuVHJ1ZShzdHlsZVtcIkhJREVBWElTTEFCRUxcIl0pKVxuICAgICAgICBxdWFudCA9IG51bGw7XG5cbiAgICBpZiAocXVhbnQpIHtcbiAgICAgICAgZ2x5cGgucXVhbnQgPSBxdWFudDtcbiAgICB9XG5cbiAgICBpZiAoc3R5bGUuWklOREVYKSB7XG4gICAgICAgIGdseXBoLnppbmRleCA9IHN0eWxlLlpJTkRFWCB8IDA7XG4gICAgfVxuXG4gICAgcmV0dXJuIGdseXBoO1xufVxuXG5cbmZ1bmN0aW9uIGdyb3VwRmVhdHVyZXModGllciwgY2FudmFzLCB5KSB7XG4gICAgbGV0IGdseXBocyA9IFtdO1xuICAgIGxldCBnYnNGZWF0dXJlcyA9IHt9O1xuICAgIGxldCBnYnNTdHlsZXMgPSB7fTtcbiAgICBsZXQgc3RhY2tlZEZlYXR1cmVzID0gW107XG5cbiAgICBSLm1hcChmZWF0dXJlcyA9PiB7XG4gICAgICAgIGZlYXR1cmVzLmZvckVhY2goZmVhdHVyZSA9PiB7XG4gICAgICAgICAgICBsZXQgc3R5bGUgPSB0aWVyLnN0eWxlRm9yRmVhdHVyZShmZWF0dXJlKTtcblxuICAgICAgICAgICAgaWYgKGZlYXR1cmUucGFydHMgfHwgIXN0eWxlKVxuICAgICAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICAgICAgaWYgKHN0eWxlLmdseXBoID09PSAnTElORVBMT1QnKSB7XG4gICAgICAgICAgICAgICAgcHVzaG8oZ2JzRmVhdHVyZXMsIHN0eWxlLmlkLCBmZWF0dXJlKTtcbiAgICAgICAgICAgICAgICBnYnNTdHlsZXNbc3R5bGUuaWRdID0gc3R5bGU7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHN0eWxlLmdseXBoID09PSAnU1RBQ0tFRCcpIHtcbiAgICAgICAgICAgICAgICBzdGFja2VkRmVhdHVyZXMucHVzaChmZWF0dXJlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbGV0IGdseXBoID0gZ2x5cGhGb3JGZWF0dXJlKGNhbnZhcywgZmVhdHVyZSwgeSwgc3R5bGUsIHRpZXIpO1xuICAgICAgICAgICAgICAgIGlmIChnbHlwaClcbiAgICAgICAgICAgICAgICAgICAgZ2x5cGhzLnB1c2goZ2x5cGgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9LCB0aWVyLnVuZ3JvdXBlZEZlYXR1cmVzKTtcblxuICAgIGlmIChzdGFja2VkRmVhdHVyZXMubGVuZ3RoID4gMCkge1xuICAgICAgICBnbHlwaHMgPSBnbHlwaHMuY29uY2F0KG1ha2VTdGFja2VkQmFycyhzdGFja2VkRmVhdHVyZXMsIHRpZXIpKTtcbiAgICB9XG4gICAgXG4gICAgZm9yIChsZXQgZ2JzIGluIGdic0ZlYXR1cmVzKSB7XG4gICAgICAgIGxldCBnZiA9IGdic0ZlYXR1cmVzW2dic107XG4gICAgICAgIGxldCBzdHlsZSA9IGdic1N0eWxlc1tnYnNdO1xuICAgICAgICBpZiAoc3R5bGUuZ2x5cGggPT09ICdMSU5FUExPVCcpIHtcbiAgICAgICAgICAgIGxldCBsaW5lR3JhcGhHbHlwaHMgPSBtYWtlTGluZVBsb3QoZ2YsIHN0eWxlLCB0aWVyLCB5KTtcbiAgICAgICAgICAgIGxpbmVHcmFwaEdseXBocy5mb3JFYWNoKGcgPT4gZ2x5cGhzLnB1c2goZykpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGdseXBocztcbn1cblxuZnVuY3Rpb24gZ2x5cGhpZnlHcm91cHModGllciwgY2FudmFzLCBnbHlwaHMsIHkpIHtcbiAgICBsZXQgZ3JvdXBJZHMgPSBPYmplY3Qua2V5cyh0aWVyLmdyb3VwZWRGZWF0dXJlcyk7XG4gICAgbGV0IGdyb3VwR2x5cGhzID0ge307XG5cbiAgICBncm91cElkcy5zb3J0KChnMSwgZzIpID0+XG4gICAgICAgICAgICAgICAgICB0aWVyLmdyb3VwZWRGZWF0dXJlc1tnMl1bMF0uc2NvcmUgLSB0aWVyLmdyb3VwZWRGZWF0dXJlc1tnMV1bMF0uc2NvcmUpO1xuXG5cbiAgICBncm91cElkcy5mb3JFYWNoKGdJZCA9PiB7XG4gICAgICAgIGxldCBnbHlwaHMgPSBnbHlwaHNGb3JHcm91cChjYW52YXMsIHRpZXIuZ3JvdXBlZEZlYXR1cmVzW2dJZF0sIHksIHRpZXIuZ3JvdXBzW2dJZF0sIHRpZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGllci5kYXNTb3VyY2UuY29sbGFwc2VTdXBlckdyb3VwcyAmJiAhdGllci5idW1wZWQpID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdjb2xsYXBzZWRfZ2VuZScgOiAndGVudCcpO1xuXG4gICAgICAgIGlmIChnbHlwaHMpIHtcbiAgICAgICAgICAgIGdseXBocy5ncm91cCA9IHRpZXIuZ3JvdXBzW2dJZF07XG4gICAgICAgICAgICBncm91cEdseXBoc1tnSWRdID0gZ2x5cGhzO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gZ3JvdXBHbHlwaHM7XG59XG5cbmZ1bmN0aW9uIGJ1bXBTdWJ0aWVycyh0aWVyLCBnbHlwaHMsIGdyaWQsIGdyaWRPZmZzZXQsIGdyaWRTcGFjaW5nKSB7XG4gICAgbGV0IHN1YnRpZXJNYXggPVxuICAgICAgICAgICAgdGllci5zdWJ0aWVyTWF4IHx8XG4gICAgICAgICAgICB0aWVyLmRhc1NvdXJjZS5zdWJ0aWVyTWF4IHx8XG4gICAgICAgICAgICB0aWVyLmJyb3dzZXIuZGVmYXVsdFN1YnRpZXJNYXg7XG5cbiAgICBsZXQgc3VidGllcnNFeGNlZWRlZCA9IGZhbHNlO1xuXG4gICAgbGV0IHVuYnVtcGVkU1QgPSBuZXcgU3ViVGllcigpO1xuICAgIGxldCBidW1wZWRTVHMgPSBbXTtcblxuICAgIC8vIFdlIHdhbnQgdG8gYWRkIGVhY2ggZ2x5cGggdG8gZWl0aGVyIHRoZSBzdWJ0aWVyXG4gICAgLy8gY29udGFpbmluZyB1bmJ1bXBlZCBzdWJ0aWVycywgb3IgdG8gdGhlIGZpcnN0IGJ1bXBlZCBzdWJ0aWVyLlxuICAgIGdseXBocy5mb3JFYWNoKGdseXBoID0+IHtcbiAgICAgICAgLy8gaWYgdGhlIGdseXBoIGlzIHRvIGJlIGJ1bXBlZC4uLlxuICAgICAgICBpZiAoZ2x5cGguYnVtcCAmJlxuICAgICAgICAgICAgKHRpZXIuYnVtcGVkIHx8XG4gICAgICAgICAgICB0aWVyLmRhc1NvdXJjZS5jb2xsYXBzZVN1cGVyR3JvdXBzKSkge1xuXG4gICAgICAgICAgICBsZXQgZ2x5cGhUaWVyID0gYnVtcGVkU1RzLmZpbmQoc3QgPT4gc3QuaGFzU3BhY2VGb3IoZ2x5cGgpKTtcblxuICAgICAgICAgICAgaWYgKGdseXBoVGllcikge1xuICAgICAgICAgICAgICAgIGdseXBoVGllci5hZGQoZ2x5cGgpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChidW1wZWRTVHMubGVuZ3RoID49IHN1YnRpZXJNYXgpIHtcbiAgICAgICAgICAgICAgICBzdWJ0aWVyc0V4Y2VlZGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbGV0IHN1YnRpZXIgPSBuZXcgU3ViVGllcigpO1xuICAgICAgICAgICAgICAgIHN1YnRpZXIuYWRkKGdseXBoKTtcbiAgICAgICAgICAgICAgICBidW1wZWRTVHMucHVzaChzdWJ0aWVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHVuYnVtcGVkU1QuYWRkKGdseXBoKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgaWYgKHVuYnVtcGVkU1QuZ2x5cGhzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgYnVtcGVkU1RzID0gW3VuYnVtcGVkU1RdLmNvbmNhdChidW1wZWRTVHMpO1xuICAgIH1cblxuICAgIC8vIFNpbXBsZSBoYWNrIHRvIG1ha2UgdGhlIGhvcml6b250YWwgZ3JpZCBpbiBidW1wZWQgc3VidGllcnMgKGUuZy4gbGluZXBsb3RzKVxuICAgIC8vIG9wdGlvbmFsIGFuZCBjb25maWd1cmFibGUuXG4gICAgaWYgKGdyaWQpIHtcbiAgICAgICAgYnVtcGVkU1RzLmZvckVhY2goc3VidGllciA9PiB7XG4gICAgICAgICAgICBpZiAoc3VidGllci5xdWFudCkge1xuICAgICAgICAgICAgICAgIHN1YnRpZXIuZ2x5cGhzLnVuc2hpZnQobmV3IEdseXBocy5HcmlkR2x5cGgoc3VidGllci5oZWlnaHQsIGdyaWRPZmZzZXQsIGdyaWRTcGFjaW5nKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGJ1bXBlZFNUcy5mb3JFYWNoKHN1YnRpZXIgPT4ge1xuICAgICAgICBzdWJ0aWVyLmdseXBocy5zb3J0KChnMSwgZzIpID0+IChnMS56aW5kZXggfHwgMCkgLSAoZzIuemluZGV4IHx8IDApKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBbYnVtcGVkU1RzLCBzdWJ0aWVyc0V4Y2VlZGVkXTtcbn1cblxuLy8gVGhlIHdob2xlIHRpZXIgaXMgdHJhbnNsYXRlZCBkb3dud2FyZCBvbiBpdHMgY2FudmFzIGJ5IHkgcGl4ZWxzXG5mdW5jdGlvbiBwcmVwYXJlU3VidGllcnModGllciwgY2FudmFzLCB5PTAsIGdyaWQ9dHJ1ZSkge1xuXG4gICAgbGV0IE1JTl9QQURESU5HID0gMztcbiAgICB0aWVyLnBhZGRpbmcgPSB0eXBlb2YodGllci5kYXNTb3VyY2UucGFkZGluZykgPT09ICdudW1iZXInID9cbiAgICAgICAgdGllci5kYXNTb3VyY2UucGFkZGluZyA6IE1JTl9QQURESU5HO1xuXG4gICAgdGllci5zY2FsZVZlcnRpY2FsID0gdHlwZW9mKHRpZXIuZGFzU291cmNlLnNjYWxlVmVydGljYWwpID09PSAnYm9vbGVhbicgP1xuICAgICAgICB0aWVyLmRhc1NvdXJjZS5zY2FsZVZlcnRpY2FsIDogZmFsc2U7XG5cbiAgICBsZXQgZ2x5cGhzID0gZ3JvdXBGZWF0dXJlcyh0aWVyLCBjYW52YXMsIHkpO1xuXG4gICAgLy8gTWVyZ2Ugc3VwZXJncm91cHNcbiAgICBpZiAodGllci5kYXNTb3VyY2UuY29sbGFwc2VTdXBlckdyb3VwcyAmJiAhdGllci5idW1wZWQpIHtcbiAgICAgICAgZm9yIChsZXQgc2dJZCBpbiB0aWVyLnN1cGVyR3JvdXBzKSB7XG4gICAgICAgICAgICBsZXQgc2dHcm91cCA9IHRpZXIuc3VwZXJHcm91cHNbc2dJZF07XG4gICAgICAgICAgICB0aWVyLmdyb3Vwc1tzZ0lkXSA9IHNoYWxsb3dDb3B5KHRpZXIuZ3JvdXBzW3NnSWRdKTtcbiAgICAgICAgICAgIGxldCBncm91cCA9IHRpZXIuZ3JvdXBzW3NnSWRdO1xuICAgICAgICAgICAgZ3JvdXAuaXNTdXBlckdyb3VwID0gdHJ1ZTtcbiAgICAgICAgICAgIGxldCBmZWF0dXJlc0J5VHlwZSA9IHt9O1xuXG4gICAgICAgICAgICBsZXQgc2dNaW4gPSAxMDAwMDAwMDAwMCwgc2dNYXggPSAtMTAwMDAwMDAwMDA7XG4gICAgICAgICAgICBsZXQgc2dTZWcgPSBudWxsO1xuXG4gICAgICAgICAgICBzZ0dyb3VwLmZvckVhY2goKGcsIGkpID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgZ3JvdXBlZEZlYXR1cmUgPSB0aWVyLmdyb3VwZWRGZWF0dXJlc1tzZ0dyb3VwW2ldXTtcbiAgICAgICAgICAgICAgICBpZiAoIWdyb3VwZWRGZWF0dXJlKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgICAgICAgICBncm91cGVkRmVhdHVyZS5mb3JFYWNoKGZlYXR1cmUgPT4ge1xuICAgICAgICAgICAgICAgICAgICBwdXNobyhmZWF0dXJlc0J5VHlwZSwgZmVhdHVyZS50eXBlLCBmZWF0dXJlKTtcbiAgICAgICAgICAgICAgICAgICAgc2dNaW4gPSBNYXRoLm1pbihmZWF0dXJlLm1pbiwgc2dNaW4pO1xuICAgICAgICAgICAgICAgICAgICBzZ01heCA9IE1hdGgubWF4KGZlYXR1cmUubWF4LCBzZ01heCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmZWF0dXJlLnNlZ21lbnQgJiYgIXNnU2VnKVxuICAgICAgICAgICAgICAgICAgICAgICAgc2dTZWcgPSBmZWF0dXJlLnNlZ21lbnQ7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBpZiAoZ3JvdXAgJiYgIWdyb3VwLmxpbmtzIHx8IGdyb3VwLmxpbmtzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBncm91cC5saW5rcyA9IHRpZXIuZ3JvdXBzW3NnR3JvdXBbMF1dLmxpbmtzO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aWVyLmdyb3VwZWRGZWF0dXJlc1tzZ0dyb3VwW2ldXTtcblxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRpZXIuZ3JvdXBzW3NnSWRdLm1heCA9IHNnTWF4O1xuICAgICAgICAgICAgdGllci5ncm91cHNbc2dJZF0ubWluID0gc2dNaW47XG4gICAgICAgICAgICB0aWVyLmdyb3Vwc1tzZ0lkXS5zZWdtZW50ID0gc2dTZWc7XG5cbiAgICAgICAgICAgIFIubWFwKGZlYXR1cmVzID0+IHtcblxuICAgICAgICAgICAgICAgIGxldCB0ZW1wbGF0ZSA9IGZlYXR1cmVzWzBdO1xuICAgICAgICAgICAgICAgIGxldCBsb2MgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgZmVhdHVyZXMuZm9yRWFjaChmZWF0dXJlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGZsID0gbmV3IFJhbmdlKGZlYXR1cmUubWluLCBmZWF0dXJlLm1heCk7XG4gICAgICAgICAgICAgICAgICAgIGxvYyA9IGxvYyA/IHVuaW9uKGxvYywgZmwpIDogZmw7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBsZXQgbWVyZ2VkUmFuZ2VzID0gbG9jLnJhbmdlcygpO1xuXG4gICAgICAgICAgICAgICAgbWVyZ2VkUmFuZ2VzLmZvckVhY2gocmFuZ2UgPT4ge1xuICAgICAgICAgICAgICAgICAgICBsZXQgcG9zQ292ZXJhZ2UgPSAoKHJhbmdlLm1heCgpIHwgMCkgLSAocmFuZ2UubWluKCkgfCAwKSArIDEpICogc2dHcm91cC5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIGxldCBhY3RDb3ZlcmFnZSA9IDA7XG5cbiAgICAgICAgICAgICAgICAgICAgZmVhdHVyZXMuZm9yRWFjaChmZWF0dXJlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmbWluID0gZmVhdHVyZS5taW4gfHwgMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmbWF4ID0gZmVhdHVyZS5tYXggfHwgMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmbWluIDw9IHJhbmdlLm1heCgpICYmIGZtYXggPj0gcmFuZ2UubWluKCkpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdENvdmVyYWdlICs9IChNYXRoLm1pbihmbWF4LCByYW5nZS5tYXgoKSkgLVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNYXRoLm1heChmbWluLCByYW5nZS5taW4oKSkgKyAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgbGV0IG5ld0ZlYXR1cmUgPSBuZXcgREFTRmVhdHVyZSgpO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBrZXkgaW4gdGVtcGxhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld0ZlYXR1cmVba2V5XSA9IHRlbXBsYXRlW2tleV07XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBuZXdGZWF0dXJlLm1pbiA9IHJhbmdlLm1pbigpO1xuICAgICAgICAgICAgICAgICAgICBuZXdGZWF0dXJlLm1heCA9IHJhbmdlLm1heCgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobmV3RmVhdHVyZS5sYWJlbCAmJiBzZ0dyb3VwLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld0ZlYXR1cmUubGFiZWwgKz0gJyAoJyArIHNnR3JvdXAubGVuZ3RoICsgJyB2YXJzKSc7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBuZXdGZWF0dXJlLnZpc3VhbFdlaWdodCA9ICgoMS4wICogYWN0Q292ZXJhZ2UpIC8gcG9zQ292ZXJhZ2UpO1xuXG4gICAgICAgICAgICAgICAgICAgIHB1c2hvKHRpZXIuZ3JvdXBlZEZlYXR1cmVzLCBzZ0lkLCBuZXdGZWF0dXJlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sIGZlYXR1cmVzQnlUeXBlKTtcblxuICAgICAgICAgICAgZGVsZXRlIHRpZXIuc3VwZXJHcm91cHNbc2dJZF07IC8vIERvIHdlIHdhbnQgdGhpcz9cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIEdseXBoaWZ5IGdyb3Vwcy5cbiAgICBsZXQgZ3JvdXBHbHlwaHMgPSBnbHlwaGlmeUdyb3Vwcyh0aWVyLCBjYW52YXMsIGdseXBocywgeSk7XG5cbiAgICBSLm1hcChzdXBlckdyb3VwID0+IHtcbiAgICAgICAgbGV0IHNnR2x5cGhzID0gW107XG4gICAgICAgIGxldCBzZ01pbiA9IDEwMDAwMDAwMDAwO1xuICAgICAgICBsZXQgc2dNYXggPSAtMTAwMDAwMDAwMDA7XG5cbiAgICAgICAgc3VwZXJHcm91cC5mb3JFYWNoKGdseXBocyA9PiB7XG4gICAgICAgICAgICBsZXQgZ0dseXBocyA9IGdyb3VwR2x5cGhzW2dseXBoc107XG4gICAgICAgICAgICBpZiAoZ0dseXBocykge1xuICAgICAgICAgICAgICAgIHNnR2x5cGhzLnB1c2goZ0dseXBocyk7XG4gICAgICAgICAgICAgICAgc2dNaW4gPSBNYXRoLm1pbihzZ01pbiwgZ0dseXBocy5taW4oKSk7XG4gICAgICAgICAgICAgICAgc2dNYXggPSBNYXRoLm1heChzZ01heCwgZ0dseXBocy5tYXgoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHNnR2x5cGhzLmZvckVhY2goZ2x5cGggPT4ge1xuICAgICAgICAgICAgZ2x5cGhzLnB1c2gobmV3IEdseXBocy5QYWRkZWRHbHlwaChnbHlwaCwgc2dNaW4sIHNnTWF4KSk7XG4gICAgICAgIH0pO1xuICAgIH0sIHRpZXIuc3VwZXJHcm91cHMpO1xuXG4gICAgUi5tYXAoZ2x5cGggPT4gZ2x5cGhzLnB1c2goZ2x5cGgpLCBncm91cEdseXBocyk7XG5cbiAgICBsZXQgW3N1YnRpZXJzLCBzdWJ0aWVyc0V4Y2VlZGVkXSA9IGJ1bXBTdWJ0aWVycyh0aWVyLCBnbHlwaHMsIGdyaWQsIHkpO1xuXG4gICAgdGllci5nbHlwaENhY2hlT3JpZ2luID0gdGllci5icm93c2VyLnZpZXdTdGFydDtcblxuICAgIGlmIChzdWJ0aWVyc0V4Y2VlZGVkKVxuICAgICAgICB0aWVyLnVwZGF0ZVN0YXR1cygnQnVtcGluZyBsaW1pdCBleGNlZWRlZCwgdXNlIHRoZSB0cmFjayBlZGl0b3IgdG8gc2VlIG1vcmUgZmVhdHVyZXMnKTtcbiAgICBlbHNlXG4gICAgICAgIHRpZXIudXBkYXRlU3RhdHVzKCk7XG5cbiAgICB0aWVyLnN1YnRpZXJzID0gc3VidGllcnM7XG59XG5cbi8vIEZpbGxzIG91dCBhcmVhcyB0aGF0IGhhdmVuJ3QgYmVlbiBmZXRjaGVkIGFzIGdyYXkgYmxvY2tzXG5mdW5jdGlvbiBkcmF3VW5tYXBwZWQodGllciwgY2FudmFzLCBwYWRkaW5nKSB7XG4gICAgbGV0IGRyYXdTdGFydCA9ICB0aWVyLmJyb3dzZXIudmlld1N0YXJ0IC0gMTAwMC4wL3RpZXIuYnJvd3Nlci5zY2FsZTtcbiAgICBsZXQgZHJhd0VuZCA9IHRpZXIuYnJvd3Nlci52aWV3RW5kICsgMTAwMC4wL3RpZXIuYnJvd3Nlci5zY2FsZTtcbiAgICBsZXQgdW5tYXBwZWRCbG9ja3MgPSBbXTtcbiAgICBpZiAodGllci5rbm93bkNvdmVyYWdlKSB7XG4gICAgICAgIGxldCBrbm93blJhbmdlcyA9IHRpZXIua25vd25Db3ZlcmFnZS5yYW5nZXMoKTtcbiAgICAgICAga25vd25SYW5nZXMuZm9yRWFjaCgocmFuZ2UsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICBpZiAoaW5kZXggPT09IDApIHtcbiAgICAgICAgICAgICAgICBpZiAocmFuZ2UubWluKCkgPiBkcmF3U3RhcnQpXG4gICAgICAgICAgICAgICAgICAgIHVubWFwcGVkQmxvY2tzLnB1c2goe21pbjogZHJhd1N0YXJ0LCBtYXg6IHJhbmdlLm1pbigpIC0gMX0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB1bm1hcHBlZEJsb2Nrcy5wdXNoKHttaW46IGtub3duUmFuZ2VzW2luZGV4LTFdLm1heCgpICsgMSwgbWF4OiByYW5nZS5taW4oKSAtIDF9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGluZGV4ID09IGtub3duUmFuZ2VzLmxlbmd0aCAtIDEgJiYgcmFuZ2UubWF4KCkgPCBkcmF3RW5kKSB7XG4gICAgICAgICAgICAgICAgdW5tYXBwZWRCbG9ja3MucHVzaCh7bWluOiByYW5nZS5tYXgoKSArIDEsIG1heDogZHJhd0VuZH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgaWYgKHVubWFwcGVkQmxvY2tzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY2FudmFzLmZpbGxTdHlsZSA9ICdncmF5JztcbiAgICAgICAgdW5tYXBwZWRCbG9ja3MuZm9yRWFjaChibG9jayA9PiB7XG4gICAgICAgICAgICBsZXQgbWluID0gKGJsb2NrLm1pbiAtIHRpZXIuYnJvd3Nlci52aWV3U3RhcnQpICogdGllci5icm93c2VyLnNjYWxlICsgMTAwMDtcbiAgICAgICAgICAgIGxldCBtYXggPSAoYmxvY2subWF4IC0gdGllci5icm93c2VyLnZpZXdTdGFydCkgKiB0aWVyLmJyb3dzZXIuc2NhbGUgKyAxMDAwO1xuICAgICAgICAgICAgY2FudmFzLmZpbGxSZWN0KG1pbiwgMCwgbWF4IC0gbWluLCBwYWRkaW5nKTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBjbGVhclZpZXdwb3J0KGNhbnZhcywgd2lkdGgsIGhlaWdodCkge1xuICAgIGNhbnZhcy5jbGVhclJlY3QoMCwgMCwgd2lkdGgsIGhlaWdodCk7XG59XG5cbi8vIE1ha2UgdGhlIHZpZXdwb3J0ICYgY2FudmFzIHRoZSBjb3JyZWN0IHNpemUgZm9yIHRoZSB0aWVyXG5mdW5jdGlvbiBwcmVwYXJlVmlld3BvcnQodGllciwgY2FudmFzLCByZXRpbmEsIGNsZWFyPXRydWUsIHZPZmZzZXQ9MCkge1xuICAgIGxldCBkZXNpcmVkV2lkdGggPSB0aWVyLmJyb3dzZXIuZmVhdHVyZVBhbmVsV2lkdGggKyAyMDAwO1xuICAgIGlmIChyZXRpbmEpIHtcbiAgICAgICAgZGVzaXJlZFdpZHRoICo9IDI7XG4gICAgfVxuXG4gICAgbGV0IGZwdyA9IHRpZXIudmlld3BvcnQud2lkdGh8MDtcbiAgICBpZiAoZnB3IDwgZGVzaXJlZFdpZHRoIC0gNTApIHtcbiAgICAgICAgdGllci52aWV3cG9ydC53aWR0aCA9IGZwdyA9IGRlc2lyZWRXaWR0aDtcbiAgICB9XG5cbiAgICBsZXQgbGggPSB0aWVyLnBhZGRpbmcgKyB2T2Zmc2V0O1xuXG4gICAgdGllci5zdWJ0aWVycy5mb3JFYWNoKHMgPT4gbGggKz0gcy5oZWlnaHQgKyB0aWVyLnBhZGRpbmcpO1xuXG4gICAgbGggKz0gNjtcbiAgICBsaCA9IE1hdGgubWF4KGxoLCB0aWVyLmJyb3dzZXIubWluVGllckhlaWdodCk7XG5cbiAgICBsZXQgY2FudmFzSGVpZ2h0ID0gbGg7XG4gICAgaWYgKHJldGluYSkge1xuICAgICAgICBjYW52YXNIZWlnaHQgKj0gMjtcbiAgICB9XG5cbiAgICBpZiAoY2FudmFzSGVpZ2h0ICE9IHRpZXIudmlld3BvcnQuaGVpZ2h0KSB7XG4gICAgICAgIHRpZXIudmlld3BvcnQuaGVpZ2h0ID0gY2FudmFzSGVpZ2h0O1xuICAgIH1cblxuICAgIHRpZXIudmlld3BvcnRIb2xkZXIuc3R5bGUubGVmdCA9ICctMTAwMHB4JztcbiAgICB0aWVyLnZpZXdwb3J0LnN0eWxlLndpZHRoID0gcmV0aW5hID8gKCcnICsgKGZwdy8yKSArICdweCcpIDogKCcnICsgZnB3ICsgJ3B4Jyk7XG4gICAgdGllci52aWV3cG9ydC5zdHlsZS5oZWlnaHQgPSAnJyArIGxoICsgJ3B4JztcbiAgICB0aWVyLmxheW91dEhlaWdodCA9ICBNYXRoLm1heChsaCwgdGllci5icm93c2VyLm1pblRpZXJIZWlnaHQpO1xuXG4gICAgdGllci51cGRhdGVIZWlnaHQoKTtcbiAgICB0aWVyLm5vcmlnaW4gPSB0aWVyLmJyb3dzZXIudmlld1N0YXJ0O1xuXG4gICAgY2FudmFzLnNhdmUoKTtcbiAgICBpZiAocmV0aW5hKSB7XG4gICAgICAgIGNhbnZhcy5zY2FsZSgyLCAyKTtcbiAgICB9XG5cbiAgICBpZiAoY2xlYXIpIHtcbiAgICAgICAgY2xlYXJWaWV3cG9ydChjYW52YXMsIGZwdywgY2FudmFzSGVpZ2h0KTtcbiAgICB9XG5cbiAgICBkcmF3VW5tYXBwZWQodGllciwgY2FudmFzLCBsaCk7XG5cbn1cblxuZnVuY3Rpb24gcGFpbnQodGllciwgY2FudmFzLCB2T2Zmc2V0PTApIHtcbiAgICBsZXQgb3ZlcmxheUxhYmVsQ2FudmFzID0gbmV3IEdseXBocy5PdmVybGF5TGFiZWxDYW52YXMoKTtcbiAgICBsZXQgb2Zmc2V0ID0gKCh0aWVyLmdseXBoQ2FjaGVPcmlnaW4gLSB0aWVyLmJyb3dzZXIudmlld1N0YXJ0KSp0aWVyLmJyb3dzZXIuc2NhbGUpKzEwMDA7XG4gICAgY2FudmFzLnRyYW5zbGF0ZShvZmZzZXQsIHZPZmZzZXQgKyB0aWVyLnBhZGRpbmcpO1xuICAgIG92ZXJsYXlMYWJlbENhbnZhcy50cmFuc2xhdGUoMCwgdGllci5wYWRkaW5nKTtcblxuICAgIHRpZXIucGFpbnRUb0NvbnRleHQoY2FudmFzLCBvdmVybGF5TGFiZWxDYW52YXMsIG9mZnNldCk7XG5cbiAgICBpZiAob3ZlcmxheUxhYmVsQ2FudmFzLmdseXBocy5sZW5ndGggPiAwKVxuICAgICAgICB0aWVyLm92ZXJsYXlMYWJlbENhbnZhcyA9IG92ZXJsYXlMYWJlbENhbnZhcztcbiAgICBlbHNlXG4gICAgICAgIHRpZXIub3ZlcmxheUxhYmVsQ2FudmFzID0gbnVsbDtcblxuICAgIGNhbnZhcy5yZXN0b3JlKCk7XG59XG5cbmZ1bmN0aW9uIGdldFNjb3JlTWluTWF4KHRpZXIsIHN0eWxlKSB7XG4gICAgbGV0IHNtaW4gPSB0aWVyLnF1YW50TWluKHN0eWxlKTtcbiAgICBsZXQgc21heCA9IHRpZXIucXVhbnRNYXgoc3R5bGUpO1xuXG4gICAgaWYgKCFzbWF4KSB7XG4gICAgICAgIGlmIChzbWluIDwgMCkge1xuICAgICAgICAgICAgc21heCA9IDA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzbWF4ID0gMTA7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKCFzbWluKSB7XG4gICAgICAgIHNtaW4gPSAwO1xuICAgIH1cbiAgICByZXR1cm4gW3NtaW4sIHNtYXhdO1xufVxuXG5mdW5jdGlvbiByZWxTY29yZU9yaWdpbihzY29yZSwgc21pbiwgc21heCkge1xuICAgIGxldCByZWxTY29yZSA9ICgoMS4wICogc2NvcmUpIC0gc21pbikgLyAoc21heC1zbWluKTtcbiAgICBsZXQgcmVsT3JpZ2luID0gKC0xLjAgKiBzbWluKSAvIChzbWF4IC0gc21pbik7XG5cbiAgICByZXR1cm4gW3JlbFNjb3JlLCByZWxPcmlnaW5dO1xufVxuXG5mdW5jdGlvbiBnZXRSZWZTZXEodGllciwgbWluLCBtYXgpIHtcbiAgICBsZXQgcmVmU2VxID0gbnVsbDtcbiAgICBpZiAodGllci5jdXJyZW50U2VxdWVuY2UpIHtcbiAgICAgICAgbGV0IGNzU3RhcnQgPSB0aWVyLmN1cnJlbnRTZXF1ZW5jZS5zdGFydHwwO1xuICAgICAgICBsZXQgY3NFbmQgPSB0aWVyLmN1cnJlbnRTZXF1ZW5jZS5lbmR8MDtcbiAgICAgICAgaWYgKGNzU3RhcnQgPD0gbWF4ICYmIGNzRW5kID49IG1pbikge1xuICAgICAgICAgICAgbGV0IHNmTWluID0gTWF0aC5tYXgobWluLCBjc1N0YXJ0KTtcbiAgICAgICAgICAgIGxldCBzZk1heCA9IE1hdGgubWluKG1heCwgY3NFbmQpO1xuXG4gICAgICAgICAgICByZWZTZXEgPSB0aWVyLmN1cnJlbnRTZXF1ZW5jZS5zZXEuc3Vic3RyKHNmTWluIC0gY3NTdGFydCwgc2ZNYXggLSBzZk1pbiArIDEpO1xuICAgICAgICAgICAgd2hpbGUgKG1pbiA8IHNmTWluKSB7XG4gICAgICAgICAgICAgICAgcmVmU2VxID0gJ04nICsgcmVmU2VxO1xuICAgICAgICAgICAgICAgIHNmTWluLS07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB3aGlsZSAobWF4ID4gc2ZNYXgpIHtcbiAgICAgICAgICAgICAgICByZWZTZXEgPSByZWZTZXEgKyAnTic7XG4gICAgICAgICAgICAgICAgc2ZNYXgrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVmU2VxO1xufVxuXG5mdW5jdGlvbiBmZWF0dXJlVG9Dcm9zc0xpa2VHbHlwaChjYW52YXMsIHRpZXIsIGZlYXR1cmUsIHksIGdseXBoVHlwZSwgc3R5bGUsIGZvcmNlSGVpZ2h0LCBub0xhYmVsKSB7XG4gICAgbGV0IHNjYWxlID0gdGllci5icm93c2VyLnNjYWxlO1xuICAgIGxldCBvcmlnaW4gPSB0aWVyLmJyb3dzZXIudmlld1N0YXJ0O1xuXG4gICAgbGV0IHNjb3JlID0gZmVhdHVyZS5zY29yZTtcbiAgICBsZXQgbGFiZWwgPSBmZWF0dXJlLmxhYmVsIHx8IGZlYXR1cmUuaWQ7XG5cbiAgICBsZXQgbWluUG9zID0gKGZlYXR1cmUubWluIC0gb3JpZ2luKSAqIHNjYWxlO1xuICAgIGxldCBtYXhQb3MgPSBNYXRoLm1heCgoZmVhdHVyZS5tYXggLSBvcmlnaW4gKyAxKSAqIHNjYWxlLCBtaW5Qb3MgKyAxKTtcblxuICAgIGxldCBoZWlnaHQgPSAodGllci5mb3JjZUhlaWdodCB8fCBzdHlsZS5IRUlHSFQgfHwgZm9yY2VIZWlnaHQgfHwgMTIpICogMS4wO1xuICAgIGxldCByZXF1aXJlZEhlaWdodCA9IGhlaWdodDtcblxuICAgIGxldCBnbHlwaCA9IG51bGw7XG4gICAgbGV0IHF1YW50ID0gbnVsbDtcblxuICAgIGxldCBzdHJva2UgPSBzdHlsZS5GR0NPTE9SIHx8ICdibGFjayc7XG4gICAgbGV0IGZpbGwgPSBzdHlsZS5CR0NPTE9SIHx8ICdub25lJztcbiAgICBsZXQgb3V0bGluZSA9IHN0eWxlLlNUUk9LRUNPTE9SO1xuXG4gICAgaWYgKHN0eWxlLkJHSVRFTSAmJiBmZWF0dXJlLml0ZW1SZ2IpIHtcbiAgICAgICAgc3Ryb2tlID0gZmVhdHVyZS5pdGVtUmdiO1xuXG4gICAgfSBlbHNlIGlmIChpc0Rhc0Jvb2xlYW5UcnVlKHN0eWxlLkNPTE9SX0JZX1NDT1JFMikpIHtcbiAgICAgICAgbGV0IGdyYWQgPSBzdHlsZS5CR0dSQUQgfHwgc3R5bGUuX2dyYWRpZW50O1xuICAgICAgICBpZiAoIWdyYWQpIHtcbiAgICAgICAgICAgIGdyYWQgPSBtYWtlR3JhZGllbnQoNTAsIHN0eWxlLkNPTE9SMSwgc3R5bGUuQ09MT1IyLCBzdHlsZS5DT0xPUjMpO1xuICAgICAgICAgICAgc3R5bGUuX2dyYWRpZW50ID0gZ3JhZDtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBzY29yZTIgPSBmZWF0dXJlLnNjb3JlMjtcbiAgICAgICAgaWYgKHNjb3JlMiAhPT0gdW5kZWZpbmVkIHx8ICFzdHJva2UpIHtcbiAgICAgICAgICAgIHNjb3JlMiA9IHNjb3JlMiB8fCAwO1xuXG4gICAgICAgICAgICBsZXQgc21pbjIgPSBzdHlsZS5NSU4yID8gKDEuMCAqIHN0eWxlLk1JTjIpIDogMC4wO1xuICAgICAgICAgICAgbGV0IHNtYXgyID0gc3R5bGUuTUFYMiA/ICgxLjAgKiBzdHlsZS5NQVgyKSA6IDEuMDtcbiAgICAgICAgICAgIGxldCByZWxTY29yZTIgPSAoKDEuMCAqIHNjb3JlMikgLSBzbWluMikgLyAoc21heDItc21pbjIpO1xuXG4gICAgICAgICAgICBsZXQgc3RlcCA9IChyZWxTY29yZTIqZ3JhZC5sZW5ndGgpIHwgMDtcbiAgICAgICAgICAgIFIuY2xhbXAoMCwgc3RlcCwgZ3JhZC5sZW5ndGggLSAxKTtcbiAgICAgICAgICAgIHN0cm9rZSA9IGdyYWRbc3RlcF07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBsZXQgc2l6ZSA9IHN0eWxlLlNJWkUgfHwgaGVpZ2h0O1xuICAgIGlmIChzdHlsZS5SU0laRSkge1xuICAgICAgICBzaXplID0gKDEuMCAqIHN0eWxlLlJTSVpFKSAqIGhlaWdodDtcbiAgICB9XG5cbiAgICBpZiAoc3R5bGUuU1RST0tFVEhSRVNIT0xEKSB7XG4gICAgICAgIGlmIChzaXplIDwgKDEuMCAqIHN0eWxlLlNUUk9LRVRIUkVTSE9MRCkpXG4gICAgICAgICAgICBvdXRsaW5lID0gbnVsbDtcbiAgICB9XG5cbiAgICBsZXQgbWlkID0gKG1pblBvcyArIG1heFBvcykvMjtcblxuICAgIGlmIChnbHlwaFR5cGUgPT09ICdFWCcpIHtcbiAgICAgICAgZ2x5cGggPSBuZXcgR2x5cGhzLkV4R2x5cGgobWlkLCBzaXplLCBzdHJva2UpO1xuXG4gICAgfSBlbHNlIGlmIChnbHlwaFR5cGUgPT09ICdUUklBTkdMRScpIHtcbiAgICAgICAgbGV0IGRpciA9IHN0eWxlLkRJUkVDVElPTiB8fCAnTic7XG4gICAgICAgIGxldCB3aWR0aCA9IHN0eWxlLkxJTkVXSURUSCB8fCBzaXplO1xuICAgICAgICBnbHlwaCA9IG5ldyBHbHlwaHMuVHJpYW5nbGVHbHlwaChtaWQsIHNpemUsIGRpciwgd2lkdGgsIHN0cm9rZSwgb3V0bGluZSk7XG5cbiAgICB9IGVsc2UgaWYgKGdseXBoVHlwZSA9PT0gJ0RPVCcpIHtcbiAgICAgICAgZ2x5cGggPSBuZXcgR2x5cGhzLkRvdEdseXBoKG1pZCwgc2l6ZSwgc3Ryb2tlLCBvdXRsaW5lKTtcblxuICAgIH0gZWxzZSBpZiAoZ2x5cGhUeXBlID09PSAnUExJTVNPTEwnKSB7XG4gICAgICAgIGdseXBoID0gbmV3IEdseXBocy5QbGltc29sbEdseXBoKG1pZCwgc2l6ZSwgMC4yICogc2l6ZSwgc3Ryb2tlLCBvdXRsaW5lKTtcblxuICAgIH0gZWxzZSBpZiAoZ2x5cGhUeXBlID09PSAnU1FVQVJFJykge1xuICAgICAgICBnbHlwaCA9IG5ldyBHbHlwaHMuQm94R2x5cGgobWlkIC0gc2l6ZS8yLCAwLCBzaXplLCBzaXplLCBzdHJva2UsIG91dGxpbmUpO1xuXG4gICAgfSBlbHNlIGlmIChnbHlwaFR5cGUgPT09ICdTVEFSJykge1xuICAgICAgICBsZXQgcG9pbnRzID0gc3R5bGUuUE9JTlRTIHx8IDU7XG4gICAgICAgIGdseXBoID0gbmV3IEdseXBocy5TdGFyR2x5cGgobWlkLCBzaXplLzIsIHBvaW50cywgc3Ryb2tlLCBvdXRsaW5lKTtcblxuICAgIH0gZWxzZSB7XG4gICAgICAgIGdseXBoID0gbmV3IEdseXBocy5Dcm9zc0dseXBoKG1pZCwgc2l6ZSwgc3Ryb2tlKTtcblxuICAgIH1cblxuICAgIGlmIChmaWxsICYmIGZpbGwgIT09ICdub25lJyAmJiAobWF4UG9zIC0gbWluUG9zKSA+IDUpIHtcbiAgICAgICAgbGV0IGJveEdseXBoID0gbmV3IEdseXBocy5Cb3hHbHlwaChtaW5Qb3MsIDAsIChtYXhQb3MgLSBtaW5Qb3MpLCBzaXplLCBmaWxsKTtcbiAgICAgICAgZ2x5cGggPSBuZXcgR2x5cGhzLkdyb3VwR2x5cGgoW2JveEdseXBoLCBnbHlwaF0pO1xuICAgIH1cblxuICAgIGlmIChpc0Rhc0Jvb2xlYW5UcnVlKHN0eWxlLlNDQVRURVIpKSB7XG4gICAgICAgIGxldCBbc21pbiwgc21heF0gPSBnZXRTY29yZU1pbk1heCh0aWVyLCBzdHlsZSk7XG5cbiAgICAgICAgbGV0IFtyZWxTY29yZSwgcmVsT3JpZ2luXSA9IHJlbFNjb3JlT3JpZ2luKHNjb3JlLCBzbWluLCBzbWF4KTtcblxuICAgICAgICBpZiAocmVsU2NvcmUgPCAwLjAgfHwgcmVsU2NvcmUgPiAxLjApIHtcbiAgICAgICAgICAgIC8vIEdseXBoIGlzIG91dCBvZiBib3VuZHMuXG4gICAgICAgICAgICAvLyBTaG91bGQgd2UgYWxsb3cgZm9yIFwicGFydGlhbGx5IHNob3dpbmdcIiBnbHlwaHM/XG5cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGV0IG9yaWdpblNoaWZ0ID0geCA9PiAoeCAtIHJlbE9yaWdpbikgKiByZXF1aXJlZEhlaWdodDtcbiAgICAgICAgICAgIGhlaWdodCA9IE1hdGgubWF4KDEsIG9yaWdpblNoaWZ0KHJlbFNjb3JlKSk7XG4gICAgICAgICAgICB5ID0geSArIG9yaWdpblNoaWZ0KDEpO1xuXG4gICAgICAgICAgICBpZiAocmVsU2NvcmUgPj0gcmVsT3JpZ2luKVxuICAgICAgICAgICAgICAgIHkgPSB5IC0gaGVpZ2h0O1xuXG4gICAgICAgICAgICBxdWFudCA9IHttaW46IHNtaW4sIG1heDogc21heH07XG5cbiAgICAgICAgICAgIGxldCBoZWlnaHRGdWRnZSA9IDA7XG4gICAgICAgICAgICBsZXQgZmVhdHVyZUxhYmVsID0gUi5kZWZhdWx0VG8oc3R5bGUuTEFCRUwsIGZlYXR1cmUuZm9yY2VMYWJlbCk7XG5cbiAgICAgICAgICAgIGlmIChpc0Rhc0Jvb2xlYW5Ob3RGYWxzZShmZWF0dXJlTGFiZWwpICYmIGxhYmVsICYmICFub0xhYmVsKSB7XG4gICAgICAgICAgICAgICAgZ2x5cGggPSBuZXcgR2x5cGhzLkxhYmVsbGVkR2x5cGgoY2FudmFzLCBnbHlwaCwgbGFiZWwsIHRydWUsIG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmVhdHVyZUxhYmVsID09ICdhYm92ZScgPyAnYWJvdmUnIDogJ2JlbG93Jyk7XG4gICAgICAgICAgICAgICAgaWYgKGZlYXR1cmVMYWJlbCA9PT0gJ2Fib3ZlJykge1xuICAgICAgICAgICAgICAgICAgICBoZWlnaHRGdWRnZSA9IGdseXBoLnRleHRIZWlnaHQgKyAyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBub0xhYmVsID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGdseXBoID0gbmV3IEdseXBocy5UcmFuc2xhdGVkR2x5cGgoZ2x5cGgsIDAsIHkgLSAoc2l6ZSAvIDIpIC0gaGVpZ2h0RnVkZ2UsIHJlcXVpcmVkSGVpZ2h0KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBbZ2x5cGgsIHF1YW50XTtcbn1cblxuZnVuY3Rpb24gZmVhdHVyZVRvR3JhZGllbnRMaWtlR2x5cGgoY2FudmFzLCB0aWVyLCBmZWF0dXJlLCB5LCBnbHlwaFR5cGUsIHN0eWxlLCBmb3JjZUhlaWdodCkge1xuICAgIGxldCBzY2FsZSA9IHRpZXIuYnJvd3Nlci5zY2FsZTtcbiAgICBsZXQgb3JpZ2luID0gdGllci5icm93c2VyLnZpZXdTdGFydDtcblxuICAgIGxldCBzY29yZSA9IGZlYXR1cmUuc2NvcmU7XG5cbiAgICBsZXQgbWluUG9zID0gKGZlYXR1cmUubWluIC0gb3JpZ2luKSAqIHNjYWxlO1xuICAgIGxldCBtYXhQb3MgPSBNYXRoLm1heCgoZmVhdHVyZS5tYXggLSBvcmlnaW4gKyAxKSAqIHNjYWxlLCBtaW5Qb3MgKyAxKTtcblxuICAgIGxldCBoZWlnaHQgPSAodGllci5mb3JjZUhlaWdodCB8fCBzdHlsZS5IRUlHSFQgfHwgZm9yY2VIZWlnaHQgfHwgMTIpICogMS4wO1xuICAgIGxldCByZXF1aXJlZEhlaWdodCA9IGhlaWdodCAqIDEuMDtcblxuICAgIGxldCBnbHlwaCA9IG51bGw7XG4gICAgbGV0IHF1YW50ID0gbnVsbDtcblxuICAgIGxldCBjZW50ZXJPbkF4aXMgPSBpc0Rhc0Jvb2xlYW5UcnVlKHN0eWxlW1wiQVhJU0NFTlRFUlwiXSk7XG5cblxuICAgIGxldCBbc21pbiwgc21heF0gPSBnZXRTY29yZU1pbk1heCh0aWVyLCBzdHlsZSk7XG5cbiAgICAvLyBBVVRPTUlOICYgQVVUT01BWCByZXNwZWN0aXZlbHkgc2V0IHRoZSBsb3dlciBhbmQgdXBwZXIgYm91bmRzXG4gICAgaWYgKGlzRGFzQm9vbGVhblRydWUoc3R5bGUuQVVUT01JTikpIHtcbiAgICAgICAgc21pbiA9IHRpZXIuY3VycmVudEZlYXR1cmVzTWluU2NvcmUqMC45NTtcbiAgICAgICAgY29uc29sZS5sb2coXCJzbWluOlxcdFwiICsgc21pbik7XG4gICAgfVxuICAgIGlmIChpc0Rhc0Jvb2xlYW5UcnVlKHN0eWxlLkFVVE9NQVgpKSB7XG4gICAgICAgIHNtYXggPSB0aWVyLmN1cnJlbnRGZWF0dXJlc01heFNjb3JlKjEuMDU7XG4gICAgICAgIGNvbnNvbGUubG9nKFwic21heDpcXHRcIiArIHNtYXgpO1xuICAgIH1cblxuICAgIGlmICgoMS4wICogc2NvcmUpIDwgKDEuMCAqIHNtaW4pKSB7XG4gICAgICAgIHNjb3JlID0gc21pbjtcbiAgICB9XG4gICAgaWYgKCgxLjAgKiBzY29yZSkgPiAoMS4wICogc21heCkpIHtcbiAgICAgICAgc2NvcmUgPSBzbWF4O1xuICAgIH1cblxuICAgIC8vIFNoaWZ0IHNtaW4vc21heCBpbiBjYXNlIHdlIHdhbnQgdG8gY2VudGVyIHRoZSBoaXN0b2dyYW1cbiAgICAvLyBvbiB0aGUgaG9yaXpvbnRhbCBheGlzXG4gICAgaWYgKGNlbnRlck9uQXhpcykge1xuICAgICAgICBsZXQgdG1pbiA9IHRpZXIucXVhbnRNaW4oc3R5bGUpO1xuICAgICAgICBsZXQgdG1heCA9IHRpZXIucXVhbnRNYXgoc3R5bGUpO1xuXG4gICAgICAgIGlmIChpc0Rhc0Jvb2xlYW5UcnVlKHN0eWxlLkFVVE9NSU4pKSB7XG4gICAgICAgICAgICB0bWluID0gdGllci5jdXJyZW50RmVhdHVyZXNNaW5TY29yZSowLjk1O1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc0Rhc0Jvb2xlYW5UcnVlKHN0eWxlLkFVVE9NQVgpKSB7XG4gICAgICAgICAgICB0bWF4ID0gdGllci5jdXJyZW50RmVhdHVyZXNNYXhTY29yZSoxLjA1O1xuICAgICAgICB9XG5cbiAgICAgICAgc21pbiA9IHRtaW4gLSAoKHRtYXggLSB0bWluKSAvIDIpO1xuICAgICAgICBzbWF4ID0gdG1heCAtICgodG1heCAtIHRtaW4pIC8gMik7XG4gICAgfVxuXG4gICAgbGV0IFtyZWxTY29yZSwgcmVsT3JpZ2luXSA9IHJlbFNjb3JlT3JpZ2luKHNjb3JlLCBzbWluLCBzbWF4KTtcblxuICAgIGlmIChnbHlwaFR5cGUgPT09ICdISVNUT0dSQU0nKSB7XG4gICAgICAgIGxldCBvcmlnaW5TaGlmdCA9IHggPT4geCAtIE1hdGgubWF4KDAsIHJlbE9yaWdpbik7XG4gICAgICAgIGhlaWdodCA9IE1hdGguYWJzKG9yaWdpblNoaWZ0KHJlbFNjb3JlKSkgKiByZXF1aXJlZEhlaWdodDtcbiAgICAgICAgeSA9IHkgKyBvcmlnaW5TaGlmdCgxLjApICogcmVxdWlyZWRIZWlnaHQ7XG5cbiAgICAgICAgaWYgKHJlbFNjb3JlID49IHJlbE9yaWdpbilcbiAgICAgICAgICAgIHkgLT0gaGVpZ2h0O1xuXG4gICAgICAgIGlmIChjZW50ZXJPbkF4aXMpXG4gICAgICAgICAgICB5ICs9IGhlaWdodCAvIDI7XG5cbiAgICAgICAgaWYgKGlzRGFzQm9vbGVhblRydWUoc3R5bGVbXCJISURFQVhJU0xBQkVMXCJdKSlcbiAgICAgICAgICAgIHF1YW50ID0gbnVsbDtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgcXVhbnQgPSB7bWluOiBzbWluLCBtYXg6IHNtYXh9O1xuICAgIH1cblxuICAgIGxldCBzdHJva2UgPSBzdHlsZS5GR0NPTE9SIHx8IG51bGw7XG4gICAgbGV0IGZpbGwgPSBzdHlsZS5CR0NPTE9SIHx8IHN0eWxlLkNPTE9SMSB8fCAnZ3JlZW4nO1xuICAgIGlmIChzdHlsZS5CR0lURU0gJiYgZmVhdHVyZS5pdGVtUmdiKVxuICAgICAgICBmaWxsID0gZmVhdHVyZS5pdGVtUmdiO1xuICAgIGxldCBhbHBoYSA9IHN0eWxlLkFMUEhBID8gKDEuMCAqIHN0eWxlLkFMUEhBKSA6IG51bGw7XG5cbiAgICBpZiAoc3R5bGUuQkdHUkFEKSB7XG4gICAgICAgIGxldCBncmFkID0gc3R5bGUuQkdHUkFEO1xuICAgICAgICBsZXQgc3RlcCA9IChyZWxTY29yZSpncmFkLmxlbmd0aCl8MDtcbiAgICAgICAgc3RlcCA9IFIuY2xhbXAoMCwgc3RlcCwgZ3JhZC5sZW5ndGggLSAxKTtcbiAgICAgICAgZmlsbCA9IGdyYWRbc3RlcF07XG4gICAgfVxuXG4gICAgaWYgKHN0eWxlLkNPTE9SMikge1xuICAgICAgICBsZXQgZ3JhZCA9IHN0eWxlLl9ncmFkaWVudDtcbiAgICAgICAgaWYgKCFncmFkKSB7XG4gICAgICAgICAgICBncmFkID0gbWFrZUdyYWRpZW50KDUwLCBzdHlsZS5DT0xPUjEsIHN0eWxlLkNPTE9SMiwgc3R5bGUuQ09MT1IzKTtcbiAgICAgICAgICAgIHN0eWxlLl9ncmFkaWVudCA9IGdyYWQ7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgc3RlcCA9IChyZWxTY29yZSpncmFkLmxlbmd0aCkgfCAwO1xuICAgICAgICBzdGVwID0gUi5jbGFtcCgwLCBzdGVwLCBncmFkLmxlbmd0aCAtIDEpO1xuICAgICAgICBmaWxsID0gZ3JhZFtzdGVwXTtcbiAgICB9XG5cbiAgICBsZXQgdGVtcEdseXBoID0gbmV3IEdseXBocy5Cb3hHbHlwaChtaW5Qb3MsIHksIChtYXhQb3MgLSBtaW5Qb3MpLCBoZWlnaHQsIGZpbGwsIHN0cm9rZSwgYWxwaGEpO1xuICAgIGdseXBoID0gbmV3IEdseXBocy5UcmFuc2xhdGVkR2x5cGgodGVtcEdseXBoLCAwLCAwLCByZXF1aXJlZEhlaWdodCk7XG5cbiAgICByZXR1cm4gW2dseXBoLCBxdWFudF07XG59XG5cbmZ1bmN0aW9uIGZlYXR1cmVUb1BvaW50R2x5cGgodGllciwgZmVhdHVyZSwgc3R5bGUpIHtcbiAgICBsZXQgc2NhbGUgPSB0aWVyLmJyb3dzZXIuc2NhbGU7XG4gICAgbGV0IG9yaWdpbiA9IHRpZXIuYnJvd3Nlci52aWV3U3RhcnQ7XG5cbiAgICBsZXQgc2NvcmUgPSBmZWF0dXJlLnNjb3JlO1xuXG4gICAgbGV0IG1pblBvcyA9IChmZWF0dXJlLm1pbiAtIG9yaWdpbikgKiBzY2FsZTtcbiAgICBsZXQgbWF4UG9zID0gTWF0aC5tYXgoKGZlYXR1cmUubWF4IC0gb3JpZ2luICsgMSkgKiBzY2FsZSwgbWluUG9zICsgMSk7XG5cbiAgICBsZXQgaGVpZ2h0ID0gdGllci5mb3JjZUhlaWdodCB8fCBzdHlsZS5IRUlHSFQgfHwgMzA7XG5cbiAgICBsZXQgZ2x5cGggPSBudWxsO1xuICAgIGxldCBxdWFudCA9IG51bGw7XG5cbiAgICBsZXQgW3NtaW4sIHNtYXhdID0gZ2V0U2NvcmVNaW5NYXgodGllciwgc3R5bGUpO1xuICAgIGxldCB5c2NhbGUgPSAoKDEuMCAqIGhlaWdodCkgLyAoc21heCAtIHNtaW4pKTtcbiAgICBsZXQgcmVsU2NvcmUgPSAoKDEuMCAqIHNjb3JlKSAtIHNtaW4pIC8gKHNtYXgtc21pbik7XG4gICAgbGV0IHNjID0gKChzY29yZSAtICgxLjAqc21pbikpICogeXNjYWxlKXwwO1xuICAgIHF1YW50ID0ge21pbjogc21pbiwgbWF4OiBzbWF4fTtcblxuICAgIGxldCBmaWxsID0gc3R5bGUuRkdDT0xPUiB8fCBzdHlsZS5DT0xPUjEgfHwgJ2JsYWNrJztcbiAgICBpZiAoc3R5bGUuQ09MT1IyKSB7XG4gICAgICAgIGxldCBncmFkID0gc3R5bGUuX2dyYWRpZW50O1xuICAgICAgICBpZiAoIWdyYWQpIHtcbiAgICAgICAgICAgIGdyYWQgPSBtYWtlR3JhZGllbnQoNTAsIHN0eWxlLkNPTE9SMSwgc3R5bGUuQ09MT1IyLCBzdHlsZS5DT0xPUjMpO1xuICAgICAgICAgICAgc3R5bGUuX2dyYWRpZW50ID0gZ3JhZDtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBzdGVwID0gKHJlbFNjb3JlKmdyYWQubGVuZ3RoKXwwO1xuICAgICAgICBzdGVwID0gUi5jbGFtcCgwLCBzdGVwLCBncmFkLmxlbmd0aCAtIDEpO1xuICAgICAgICBmaWxsID0gZ3JhZFtzdGVwXTtcbiAgICB9XG5cbiAgICBnbHlwaCA9IG5ldyBHbHlwaHMuUG9pbnRHbHlwaCgobWluUG9zICsgbWF4UG9zKS8yLCBoZWlnaHQtc2MsIGhlaWdodCwgZmlsbCk7XG5cbiAgICByZXR1cm4gW2dseXBoLCBxdWFudF07XG59XG5cbmZ1bmN0aW9uIHNlcXVlbmNlR2x5cGgoY2FudmFzLCB0aWVyLCBmZWF0dXJlLCBzdHlsZSwgZm9yY2VIZWlnaHQpIHtcbiAgICBsZXQgc2NhbGUgPSB0aWVyLmJyb3dzZXIuc2NhbGU7XG4gICAgbGV0IG9yaWdpbiA9IHRpZXIuYnJvd3Nlci52aWV3U3RhcnQ7XG5cbiAgICBsZXQgbWluID0gZmVhdHVyZS5taW47XG4gICAgbGV0IG1heCA9IGZlYXR1cmUubWF4O1xuICAgIGxldCBtaW5Qb3MgPSAoZmVhdHVyZS5taW4gLSBvcmlnaW4pICogc2NhbGU7XG4gICAgbGV0IG1heFBvcyA9IE1hdGgubWF4KChmZWF0dXJlLm1heCAtIG9yaWdpbiArIDEpICogc2NhbGUsIG1pblBvcyArIDEpO1xuXG4gICAgbGV0IGhlaWdodCA9ICh0aWVyLmZvcmNlSGVpZ2h0IHx8IHN0eWxlLkhFSUdIVCB8fCBmb3JjZUhlaWdodCB8fCAxMikgKiAxLjA7XG5cbiAgICBsZXQgZ2x5cGggPSBudWxsO1xuXG4gICAgbGV0IHJhd3NlcSA9IGZlYXR1cmUuc2VxO1xuICAgIGxldCBzZXEgPSByYXdzZXE7XG4gICAgbGV0IHJhd3F1YWxzID0gZmVhdHVyZS5xdWFscztcbiAgICBsZXQgcXVhbHMgPSByYXdxdWFscztcbiAgICBsZXQgaW5zZXJ0aW9uTGFiZWxzID0gaXNEYXNCb29sZWFuVHJ1ZShzdHlsZS5fX0lOU0VSVElPTlMpO1xuXG4gICAgbGV0IGluZGVscyA9IFtdO1xuICAgIGlmIChmZWF0dXJlLmNpZ2FyKSB7XG4gICAgICAgIGxldCBvcHMgPSBwYXJzZUNpZ2FyKGZlYXR1cmUuY2lnYXIpO1xuICAgICAgICBzZXEgPSAnJztcbiAgICAgICAgcXVhbHMgPSAnJztcbiAgICAgICAgbGV0IGN1cnNvciA9IDA7XG5cbiAgICAgICAgb3BzLmZvckVhY2goY28gPT4ge1xuICAgICAgICAgICAgaWYgKGNvLm9wID09PSAnTScpIHtcbiAgICAgICAgICAgICAgICBzZXEgKz0gcmF3c2VxLnN1YnN0cihjdXJzb3IsIGNvLmNudCk7XG4gICAgICAgICAgICAgICAgcXVhbHMgKz0gcmF3cXVhbHMuc3Vic3RyKGN1cnNvciwgY28uY250KTtcbiAgICAgICAgICAgICAgICBjdXJzb3IgKz0gY28uY250O1xuICAgICAgICAgICAgfSBlbHNlIGlmIChjby5vcCA9PT0gJ0QnKSB7XG4gICAgICAgICAgICAgICAgc2VxICs9IFwiLVwiLnJlcGVhdChjby5jbnQpO1xuICAgICAgICAgICAgICAgIHF1YWxzICs9IFwiWlwiLnJlcGVhdChjby5jbnQpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChjby5vcCA9PT0gJ0knKSB7XG4gICAgICAgICAgICAgICAgbGV0IGluc2VxID0gcmF3c2VxLnN1YnN0cihjdXJzb3IsIGNvLmNudCk7XG4gICAgICAgICAgICAgICAgbGV0IGlnID0gbmV3IEdseXBocy5UcmFuc2xhdGVkR2x5cGgoXG4gICAgICAgICAgICAgICAgICAgIG5ldyBHbHlwaHMuVHJpYW5nbGVHbHlwaChtaW5Qb3MgKyAoc2VxLmxlbmd0aCpzY2FsZSksIDYsICdTJywgNSwgdGllci5icm93c2VyLmJhc2VDb2xvcnNbJ0knXSksXG4gICAgICAgICAgICAgICAgICAgIDAsIC0yLCAwXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBpZiAoaW5zZXJ0aW9uTGFiZWxzKVxuICAgICAgICAgICAgICAgICAgICBpZyA9IG5ldyBHbHlwaHMuTGFiZWxsZWRHbHlwaChjYW52YXMsIGlnLCBpbnNlcSwgZmFsc2UsICdjZW50ZXInLCAnYWJvdmUnLCAnN3B4IHNhbnMtc2VyaWYnKTtcbiAgICAgICAgICAgICAgICBpZy5mZWF0dXJlID0ge2xhYmVsOiAnSW5zZXJ0aW9uOiAnICsgaW5zZXEsIHR5cGU6ICdpbnNlcnRpb24nLCBtZXRob2Q6ICdpbnNlcnRpb24nfTtcbiAgICAgICAgICAgICAgICBpbmRlbHMucHVzaChpZyk7XG5cbiAgICAgICAgICAgICAgICBjdXJzb3IgKz0gY28uY250O1xuICAgICAgICAgICAgfSBlbHNlIGlmIChjby5vcCA9PT0gJ1MnKSB7XG4gICAgICAgICAgICAgICAgY3Vyc29yICs9IGNvLmNudDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3Vua25vd24gY2lnb3AnICsgY28ub3ApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBsZXQgcmVmU2VxID0gZ2V0UmVmU2VxKHRpZXIsIG1pbiwgbWF4KTtcbiAgICBpZiAoc2VxICYmIHJlZlNlcSAmJlxuICAgICAgICAoc3R5bGUuX19TRVFDT0xPUiA9PT0gJ21pc21hdGNoJyB8fFxuICAgICAgICAgc3R5bGUuX19TRVFDT0xPUiA9PT0gJ21pc21hdGNoLWFsbCcpKSB7XG4gICAgICAgIGxldCBtaXNtYXRjaFNlcSA9IFtdO1xuICAgICAgICBsZXQgbWF0Y2ggPSBmZWF0dXJlLm9yaWVudGF0aW9uID09PSAnLScgPyAnLCcgOiAnLic7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2VxLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICBtaXNtYXRjaFNlcS5wdXNoKHNlcVtpXSA9PSByZWZTZXFbaV0gPyBtYXRjaCA6IHNlcVtpXSk7XG4gICAgICAgIH1cbiAgICAgICAgc2VxID0gbWlzbWF0Y2hTZXEuam9pbignJyk7XG4gICAgfVxuXG4gICAgbGV0IHN0cmFuZENvbG9yID0gZmVhdHVyZS5vcmllbnRhdGlvbiA9PT0gJy0nID9cbiAgICAgICAgICAgICAgc3R5bGUuX21pbnVzQ29sb3IgfHwgJ2xpZ2h0c2t5Ymx1ZSdcbiAgICAgICAgICAgIDogc3R5bGUuX3BsdXNDb2xvciB8fCAnbGlnaHRzYWxtb24nO1xuXG4gICAgaWYgKHN0eWxlLl9fZGlzYWJsZVF1YWxzKVxuICAgICAgICBxdWFscyA9IGZhbHNlO1xuXG4gICAgZ2x5cGggPSBuZXcgR2x5cGhzLlNlcXVlbmNlR2x5cGgoXG4gICAgICAgIHRpZXIuYnJvd3Nlci5iYXNlQ29sb3JzLFxuICAgICAgICBzdHJhbmRDb2xvcixcbiAgICAgICAgbWluUG9zLFxuICAgICAgICBtYXhQb3MsXG4gICAgICAgIGhlaWdodCxcbiAgICAgICAgc2VxLFxuICAgICAgICByZWZTZXEsXG4gICAgICAgIHN0eWxlLl9fU0VRQ09MT1IsXG4gICAgICAgIHF1YWxzLFxuICAgICAgICAhaXNEYXNCb29sZWFuVHJ1ZShzdHlsZS5fX0NMRUFSQkcpLFxuICAgICAgICB0aWVyLnNjYWxlVmVydGljYWxcbiAgICApO1xuXG4gICAgaWYgKGluc2VydGlvbkxhYmVscylcbiAgICAgICAgZ2x5cGggPSBuZXcgR2x5cGhzLlRyYW5zbGF0ZWRHbHlwaChnbHlwaCwgMCwgNyk7XG5cbiAgICBpZiAoaW5kZWxzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgaW5kZWxzLnNwbGljZSgwLCAwLCBnbHlwaCk7XG4gICAgICAgIGdseXBoID0gbmV3IEdseXBocy5Hcm91cEdseXBoKGluZGVscyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGdseXBoO1xufVxuXG5mdW5jdGlvbiBtYWtlTGluZVBsb3QoZmVhdHVyZXMsIHN0eWxlLCB0aWVyLCB5c2hpZnQpIHtcbiAgICB5c2hpZnQgPSB5c2hpZnQgfHwgMDtcblxuICAgIGxldCBvcmlnaW4gPSB0aWVyLmJyb3dzZXIudmlld1N0YXJ0LCBzY2FsZSA9IHRpZXIuYnJvd3Nlci5zY2FsZTtcbiAgICBsZXQgaGVpZ2h0ID0gdGllci5mb3JjZUhlaWdodCB8fCBzdHlsZS5IRUlHSFQgfHwgMzA7XG4gICAgbGV0IG1pbiA9IHRpZXIucXVhbnRNaW4oc3R5bGUpO1xuICAgIGxldCBtYXggPSB0aWVyLnF1YW50TWF4KHN0eWxlKTtcblxuICAgIC8vIEFVVE9NSU4gJiBBVVRPTUFYIHJlc3BlY3RpdmVseSBzZXQgdGhlIGxvd2VyIGFuZCB1cHBlciBib3VuZHNcbiAgICBpZiAoaXNEYXNCb29sZWFuVHJ1ZShzdHlsZS5BVVRPTUlOKSkge1xuICAgICAgICAvLyBhZGQgc29tZSBiYXNpY2FsbHkgYXJiaXRyYXJ5IHBhZGRpbmdcbiAgICAgICAgbWluID0gdGllci5jdXJyZW50RmVhdHVyZXNNaW5TY29yZSowLjk1O1xuICAgIH1cbiAgICBpZiAoaXNEYXNCb29sZWFuVHJ1ZShzdHlsZS5BVVRPTUFYKSkge1xuICAgICAgICBtYXggPSB0aWVyLmN1cnJlbnRGZWF0dXJlc01heFNjb3JlKjEuMDU7XG4gICAgfVxuXG4gICAgbGV0IHlzY2FsZSA9ICgoMS4wICogaGVpZ2h0KSAvIChtYXggLSBtaW4pKTtcbiAgICBsZXQgY29sb3IgPSBzdHlsZS5GR0NPTE9SIHx8IHN0eWxlLkNPTE9SMSB8fCAnYmxhY2snO1xuXG4gICAgbGV0IHByZXZTaWduID0gMTtcbiAgICBsZXQgY3VyU2lnbiA9IG51bGw7XG5cbiAgICBsZXQgY3VyR2x5cGhQb2ludHMgPSBbXTtcbiAgICBsZXQgZ2x5cGhTZXF1ZW5jZXMgPSBbXTtcblxuICAgIGxldCBwcmV2UG9pbnQgPSBudWxsO1xuXG4gICAgZmVhdHVyZXMuZm9yRWFjaChmID0+IHtcbiAgICAgICAgbGV0IHB4ID0gKCgoKGYubWlufDApICsgKGYubWF4fDApKSAvIDIpIC0gb3JpZ2luKSAqIHNjYWxlO1xuICAgICAgICBsZXQgc2MgPSAoKGYuc2NvcmUgLSAoMS4wKm1pbikpICogeXNjYWxlKXwwO1xuXG4gICAgICAgIC8vIEFkZGl0aXZlIHRyYWNrcyBhcmUgYWx3YXlzIGFib3ZlIHRoZSB4LWF4aXMsIGFuZCBhcmUgY29sb3JlZFxuICAgICAgICAvLyBkZXBlbmRpbmcgb24gd2hldGhlciB0aGUgc2NvcmUgaXMgcG9zaXRpdmUgb3IgbmVnYXRpdmUuXG4gICAgICAgIGlmIChpc0Rhc0Jvb2xlYW5UcnVlKHN0eWxlLkFERElUSVZFKSkge1xuICAgICAgICAgICAgY3VyU2lnbiA9IGYuc2NvcmUgPCAwID8gLTEgOiAxO1xuXG4gICAgICAgICAgICBpZiAoY3VyU2lnbiAhPT0gcHJldlNpZ24pIHtcbiAgICAgICAgICAgICAgICBnbHlwaFNlcXVlbmNlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgcG9pbnRzOiBjdXJHbHlwaFBvaW50cyxcbiAgICAgICAgICAgICAgICAgICAgY29sb3I6IHByZXZTaWduID09PSAxID9cbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlLlBPU0NPTE9SXG4gICAgICAgICAgICAgICAgICAgICAgICA6IHN0eWxlLk5FR0NPTE9SXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY3VyR2x5cGhQb2ludHMgPSBbXTtcbiAgICAgICAgICAgICAgICAvLyBOZWVkIHRvIGFkZCB0aGUgcHJldmlvdXMgcG9pbnQgdG8gdGhpcyBzZXF1ZW5jZSxcbiAgICAgICAgICAgICAgICAvLyBvdGhlcndpc2UgdGhlcmUgaXMgYSBnYXAgaW4gdGhlIHJlc3VsdGluZyBwbG90XG4gICAgICAgICAgICAgICAgY3VyR2x5cGhQb2ludHMucHVzaChwcmV2UG9pbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcHJldlNpZ24gPSBjdXJTaWduO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY3VyU2lnbiA9IDE7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgcHkgPSAoaGVpZ2h0IC0gKHNjICogY3VyU2lnbikpICsgeXNoaWZ0O1xuICAgICAgICBwcmV2UG9pbnQgPSB7eDogcHgsIHk6IHB5fTtcbiAgICAgICAgY3VyR2x5cGhQb2ludHMucHVzaChwcmV2UG9pbnQpO1xuICAgIH0pO1xuXG5cbiAgICAvLyBOZWVkIHRvIGFkZCB0aGUgZmluYWwgc2VxdWVuY2Ugb2YgcG9pbnRzIGFzIHdlbGwuXG4gICAgaWYgKGlzRGFzQm9vbGVhblRydWUoc3R5bGUuQURESVRJVkUpKSB7XG4gICAgICAgIGNvbG9yID0gY3VyU2lnbiA9PT0gMSA/IHN0eWxlLlBPU0NPTE9SIDogc3R5bGUuTkVHQ09MT1I7XG4gICAgfVxuICAgIGdseXBoU2VxdWVuY2VzLnB1c2goe1xuICAgICAgICBwb2ludHM6IGN1ckdseXBoUG9pbnRzLFxuICAgICAgICBjb2xvcjogY29sb3JcbiAgICB9KTtcblxuXG4gICAgbGV0IGxnZ3MgPSBnbHlwaFNlcXVlbmNlcy5tYXAoZ3MgPT4ge1xuICAgICAgICBsZXQgbGdnID0gbmV3IEdseXBocy5MaW5lR3JhcGhHbHlwaChncy5wb2ludHMsIGdzLmNvbG9yLCBoZWlnaHQpO1xuICAgICAgICBsZ2cucXVhbnQgPSB7bWluLCBtYXh9O1xuXG4gICAgICAgIGlmIChzdHlsZS5aSU5ERVgpXG4gICAgICAgICAgICBsZ2cuemluZGV4ID0gc3R5bGUuWklOREVYfDA7XG5cbiAgICAgICAgcmV0dXJuIGxnZztcbiAgICB9KTtcblxuICAgIHJldHVybiBsZ2dzO1xufVxuXG5mdW5jdGlvbiBtYWtlU3RhY2tlZEJhcnMoZmVhdHVyZXMsIHRpZXIpIHtcbiAgICBsZXQgZ2x5cGhzID0gW107XG5cbiAgICBsZXQgcG9zU3RhY2tzID0gW10sXG4gICAgICAgIG5lZ1N0YWNrcyA9IFtdO1xuXG4gICAgY29uc3Qgc2NhbGUgPSB0aWVyLmJyb3dzZXIuc2NhbGUsIG9yaWdpbiA9IHRpZXIuYnJvd3Nlci52aWV3U3RhcnQ7XG4gICAgZm9yICh2YXIgZmkgPSAwOyBmaSA8IGZlYXR1cmVzLmxlbmd0aDsgKytmaSkge1xuICAgICAgICBjb25zdCBmZWF0dXJlID0gZmVhdHVyZXNbZmldO1xuICAgICAgICBjb25zdCBzdHlsZSA9IHRpZXIuc3R5bGVGb3JGZWF0dXJlKGZlYXR1cmUpO1xuICAgICAgICBsZXQgc2NvcmUgPSBmZWF0dXJlLnNjb3JlICogMS4wO1xuXG4gICAgICAgIGxldCBoZWlnaHQgPSB0aWVyLmZvcmNlSGVpZ2h0IHx8IHN0eWxlLkhFSUdIVCB8fCAxMjtcbiAgICAgICAgY29uc3QgcmVxdWlyZWRIZWlnaHQgPSBoZWlnaHQgPSAxLjAgKiBoZWlnaHQ7XG5cbiAgICAgICAgY29uc3QgbWluID0gZmVhdHVyZS5taW47XG4gICAgICAgIGNvbnN0IG1heCA9IGZlYXR1cmUubWF4O1xuXG4gICAgICAgIGNvbnN0IG1pblBvcyA9IChtaW4gLSBvcmlnaW4pICogc2NhbGU7XG4gICAgICAgIGNvbnN0IHJhd01heFBvcyA9ICgobWF4IC0gb3JpZ2luICsgMSkgKiBzY2FsZSk7XG4gICAgICAgIGNvbnN0IG1heFBvcyA9IE1hdGgubWF4KHJhd01heFBvcywgbWluUG9zICsgMSk7XG5cbiAgICAgICAgLy8gVGhpcyBzaG91bGQgc29tZXdoYXQgbWF0Y2ggdGhlICdISVNUT0dSQU0nIHBhdGguXG5cbiAgICAgICAgdmFyIHNtaW4gPSB0aWVyLnF1YW50TWluKHN0eWxlKTtcbiAgICAgICAgdmFyIHNtYXggPSB0aWVyLnF1YW50TWF4KHN0eWxlKTtcblxuICAgICAgICBpZiAoIXNtYXgpIHtcbiAgICAgICAgICAgIGlmIChzbWluIDwgMCkge1xuICAgICAgICAgICAgICAgIHNtYXggPSAwO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzbWF4ID0gMTA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzbWF4ID0gc21heCAqIDEuMDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghc21pbikge1xuICAgICAgICAgICAgc21pbiA9IDA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzbWluID0gc21pbiAqIDEuMDtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBzdGFja09yaWdpbjtcbiAgICAgICAgaWYgKHNjb3JlID49IDApIHtcbiAgICAgICAgICAgIHN0YWNrT3JpZ2luID0gcG9zU3RhY2tzW21pbl0gfHwgMDtcbiAgICAgICAgICAgIHBvc1N0YWNrc1ttaW5dID0gc3RhY2tPcmlnaW4gKyBzY29yZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHN0YWNrT3JpZ2luID0gbmVnU3RhY2tzW21pbl0gfHwgMDtcbiAgICAgICAgICAgIG5lZ1N0YWNrc1ttaW5dID0gc3RhY2tPcmlnaW4gKyBzY29yZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzdGFja09yaWdpbiA+IHNtYXggfHwgc3RhY2tPcmlnaW4gPCBzbWluKSB7XG4gICAgICAgICAgICAvLyBTdGFjayBoYXMgZXh0ZW5kZWQgb3V0c2lkZSBvZiByYW5nZS5cbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHN0YWNrT3JpZ2luICsgc2NvcmUgPCBzbWluKSB7XG4gICAgICAgICAgICBzY29yZSA9IHNtaW4gLSBzdGFja09yaWdpbjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3RhY2tPcmlnaW4gKyBzY29yZSA+IHNtYXgpIHtcbiAgICAgICAgICAgIHNjb3JlID0gc21heCAtIHN0YWNrT3JpZ2luO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHJlbFNjb3JlRW5kID0gKHNjb3JlICsgc3RhY2tPcmlnaW4gLSBzbWluKSAvIChzbWF4IC0gc21pbik7XG4gICAgICAgIHZhciByZWxTY29yZVN0YXJ0ID0gKHN0YWNrT3JpZ2luIC0gc21pbikgLyAoc21heCAtIHNtaW4pXG4gICAgICAgIHZhciByZWxTY29yZU1heCA9IE1hdGgubWF4KHJlbFNjb3JlU3RhcnQsIHJlbFNjb3JlRW5kKTtcbiAgICAgICAgdmFyIHJlbFNjb3JlTWluID0gTWF0aC5taW4ocmVsU2NvcmVTdGFydCwgcmVsU2NvcmVFbmQpO1xuXG4gICAgICAgIGhlaWdodCA9IChyZWxTY29yZU1heCAtIHJlbFNjb3JlTWluKSAqIHJlcXVpcmVkSGVpZ2h0O1xuICAgICAgICB2YXIgeSA9ICgxLjAgLSByZWxTY29yZU1heCkgKiByZXF1aXJlZEhlaWdodDtcblxuICAgICAgICBsZXQgc3Ryb2tlID0gc3R5bGUuRkdDT0xPUiB8fCBudWxsO1xuICAgICAgICBsZXQgZmlsbCA9IHN0eWxlLkJHQ09MT1IgfHwgc3R5bGUuQ09MT1IxIHx8ICdncmVlbic7XG4gICAgICAgIGlmIChzdHlsZS5CR0lURU0gJiYgZmVhdHVyZS5pdGVtUmdiKVxuICAgICAgICAgICAgZmlsbCA9IGZlYXR1cmUuaXRlbVJnYjtcbiAgICAgICAgY29uc3QgYWxwaGEgPSBzdHlsZS5BTFBIQSA/ICgxLjAgKiBzdHlsZS5BTFBIQSkgOiBudWxsO1xuXG4gICAgICAgIGxldCBnZyA9IG5ldyBHbHlwaHMuQm94R2x5cGgobWluUG9zLCB5LCAobWF4UG9zIC0gbWluUG9zKSwgaGVpZ2h0LCBmaWxsLCBzdHJva2UsIGFscGhhKTtcbiAgICAgICAgZ2cgPSBuZXcgR2x5cGhzLlRyYW5zbGF0ZWRHbHlwaChnZywgMCwgMCwgcmVxdWlyZWRIZWlnaHQpO1xuICAgICAgICBnZy5mZWF0dXJlID0gZmVhdHVyZTtcbiAgICAgICAgZ2cucXVhbnQgPSB7XG4gICAgICAgICAgICBtaW46IHNtaW4sIG1heDogc21heFxuICAgICAgICB9O1xuICAgICAgICBpZiAoc3R5bGUuWklOREVYKSB7XG4gICAgICAgICAgICBnZy56aW5kZXggPSBzdHlsZS5aSU5ERVggfCAwO1xuICAgICAgICB9XG4gICAgICAgIGdseXBocy5wdXNoKGdnKTtcblxuICAgIH1cbiAgICByZXR1cm4gZ2x5cGhzO1xufVxuXG4vLyBoZWlnaHQgaXMgc3VidGllciBoZWlnaHRcbmZ1bmN0aW9uIGNyZWF0ZVF1YW50T3ZlcmxheSh0aWVyLCBoZWlnaHQsIHJldGluYT1mYWxzZSkge1xuICAgIGxldCB3aWR0aCA9IDUwO1xuXG4gICAgdGllci5xdWFudE92ZXJsYXkuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgIHRpZXIucXVhbnRPdmVybGF5LndpZHRoID0gcmV0aW5hID8gd2lkdGgqMiA6IHdpZHRoO1xuICAgIHRpZXIucXVhbnRPdmVybGF5LnN0eWxlLmhlaWdodCA9ICcnICsgKHJldGluYSA/IGhlaWdodC8yIDogaGVpZ2h0KSArICdweCc7XG4gICAgdGllci5xdWFudE92ZXJsYXkuc3R5bGUud2lkdGggPSAnJyArIHdpZHRoICsgJ3B4JztcbiAgICB0aWVyLnF1YW50T3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcblxuICAgIGxldCBjYW52YXMgPSB0aWVyLnF1YW50T3ZlcmxheS5nZXRDb250ZXh0KCcyZCcpO1xuXG4gICAgaWYgKHJldGluYSkge1xuICAgICAgICBjYW52YXMuc2NhbGUoMiwgMik7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNhbnZhcztcbn1cblxuZnVuY3Rpb24gcGFpbnRRdWFudChjYW52YXMsIHRpZXIsIHF1YW50LCB0aWNzKSB7XG4gICAgY2FudmFzLnNhdmUoKTtcblxuICAgIGxldCBoID0gdGllci5xdWFudE92ZXJsYXkuaGVpZ2h0O1xuICAgIGxldCB3ID0gMTAwO1xuXG4gICAgbGV0IHRpY1NwYWNpbmcgPSAoaCArIHRpZXIucGFkZGluZyoyKSAvIHRpY3M7XG4gICAgbGV0IHRpY0ludGVydmFsID0gKHF1YW50Lm1heCAtIHF1YW50Lm1pbikgLyB0aWNzO1xuXG4gICAgY2FudmFzLmZpbGxTdHlsZSA9ICd3aGl0ZSc7XG4gICAgY2FudmFzLmdsb2JhbEFscGhhID0gMC42O1xuICAgIGlmICh0aWVyLmJyb3dzZXIucnVsZXJMb2NhdGlvbiA9PSAncmlnaHQnKSB7XG4gICAgICAgIGNhbnZhcy5maWxsUmVjdCh3LTMwLCAwLCAzMCwgaCArIHRpZXIucGFkZGluZyoyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBjYW52YXMuZmlsbFJlY3QoMCwgMCwgMzAsIGggKyB0aWVyLnBhZGRpbmcqMik7XG4gICAgfVxuICAgIGNhbnZhcy5nbG9iYWxBbHBoYSA9IDEuMDtcblxuICAgIGNhbnZhcy5zdHJva2VTdHlsZSA9ICdibGFjayc7XG4gICAgY2FudmFzLmxpbmVXaWR0aCA9IDE7XG4gICAgY2FudmFzLmJlZ2luUGF0aCgpO1xuICAgIGlmICh0aWVyLmJyb3dzZXIucnVsZXJMb2NhdGlvbiA9PSAncmlnaHQnKSB7XG4gICAgICAgIGNhbnZhcy5tb3ZlVG8odyAtIDgsIHRpZXIucGFkZGluZyk7XG4gICAgICAgIGNhbnZhcy5saW5lVG8odywgdGllci5wYWRkaW5nKTtcbiAgICAgICAgY2FudmFzLmxpbmVUbyh3LCBoICsgdGllci5wYWRkaW5nKTtcbiAgICAgICAgY2FudmFzLmxpbmVUbyh3IC0gOCwgaCArIHRpZXIucGFkZGluZyk7XG5cbiAgICAgICAgZm9yIChsZXQgdCA9IDE7IHQgPCB0aWNzLTE7IHQrKykge1xuICAgICAgICAgICAgbGV0IHR5ID0gdCp0aWNTcGFjaW5nO1xuICAgICAgICAgICAgY2FudmFzLm1vdmVUbyh3LCB0eSk7XG4gICAgICAgICAgICBjYW52YXMubGluZVRvKHcgLSA1LCB0eSk7XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICBjYW52YXMubW92ZVRvKDgsIHRpZXIucGFkZGluZyk7XG4gICAgICAgIGNhbnZhcy5saW5lVG8oMCwgdGllci5wYWRkaW5nKTtcbiAgICAgICAgY2FudmFzLmxpbmVUbygwLCBoICsgdGllci5wYWRkaW5nKTtcbiAgICAgICAgY2FudmFzLmxpbmVUbyg4LCBoICsgdGllci5wYWRkaW5nKTtcblxuICAgICAgICBmb3IgKGxldCB0ID0gMTsgdCA8IHRpY3MtMTsgdCsrKSB7XG4gICAgICAgICAgICBsZXQgdHkgPSB0KnRpY1NwYWNpbmc7XG4gICAgICAgICAgICBjYW52YXMubW92ZVRvKDAsIHR5KTtcbiAgICAgICAgICAgIGNhbnZhcy5saW5lVG8oNSwgdHkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNhbnZhcy5zdHJva2UoKTtcblxuICAgIGNhbnZhcy5maWxsU3R5bGUgPSAnYmxhY2snO1xuXG4gICAgaWYgKHRpZXIuYnJvd3Nlci5ydWxlckxvY2F0aW9uID09ICdyaWdodCcpIHtcbiAgICAgICAgY2FudmFzLnRleHRBbGlnbiA9ICdyaWdodCc7XG4gICAgICAgIGNhbnZhcy5maWxsVGV4dChmb3JtYXRRdWFudExhYmVsKHF1YW50Lm1heCksIHctOSwgOCk7XG4gICAgICAgIGNhbnZhcy5maWxsVGV4dChmb3JtYXRRdWFudExhYmVsKHF1YW50Lm1pbiksIHctOSwgaCArIHRpZXIucGFkZGluZyk7XG5cbiAgICAgICAgZm9yIChsZXQgdCA9IDE7IHQgPCB0aWNzLTE7IHQrKykge1xuICAgICAgICAgICAgbGV0IHR5ID0gdCp0aWNTcGFjaW5nO1xuICAgICAgICAgICAgY2FudmFzLmZpbGxUZXh0KGZvcm1hdFF1YW50TGFiZWwoKDEuMCpxdWFudC5tYXgpIC0gKHQqdGljSW50ZXJ2YWwpKSwgdyAtIDksIHR5ICsgMyk7XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICBjYW52YXMudGV4dEFsaWduID0gJ2xlZnQnO1xuICAgICAgICBjYW52YXMuZmlsbFRleHQoZm9ybWF0UXVhbnRMYWJlbChxdWFudC5tYXgpLCA5LCA4KTtcbiAgICAgICAgY2FudmFzLmZpbGxUZXh0KGZvcm1hdFF1YW50TGFiZWwocXVhbnQubWluKSwgOSwgaCArIHRpZXIucGFkZGluZyk7XG5cbiAgICAgICAgZm9yIChsZXQgdCA9IDE7IHQgPCB0aWNzLTE7IHQrKykge1xuICAgICAgICAgICAgbGV0IHR5ID0gdCp0aWNTcGFjaW5nO1xuICAgICAgICAgICAgY2FudmFzLmZpbGxUZXh0KGZvcm1hdFF1YW50TGFiZWwoKDEuMCpxdWFudC5tYXgpIC0gKHQqdGljSW50ZXJ2YWwpKSwgOSwgdHkgKyAzKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNhbnZhcy5yZXN0b3JlKCk7XG59XG4iLCIvKiAtKi0gbW9kZTogamF2YXNjcmlwdDsgYy1iYXNpYy1vZmZzZXQ6IDQ7IGluZGVudC10YWJzLW1vZGU6IG5pbCAtKi0gKi9cblxuLy8gXG4vLyBEYWxsaWFuY2UgR2Vub21lIEV4cGxvcmVyXG4vLyAoYykgVGhvbWFzIERvd24gMjAwNi0yMDEwXG4vL1xuLy8gZG9tdWkuanM6IFNWRyBVSSBjb21wb25lbnRzXG4vL1xuXG5cInVzZSBzdHJpY3RcIjtcblxuaWYgKHR5cGVvZihyZXF1aXJlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB2YXIgYnJvd3NlciA9IHJlcXVpcmUoJy4vY2Jyb3dzZXInKTtcbiAgICB2YXIgQnJvd3NlciA9IGJyb3dzZXIuQnJvd3NlcjtcblxuICAgIHZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcbiAgICB2YXIgbWFrZUVsZW1lbnQgPSB1dGlscy5tYWtlRWxlbWVudDtcbiAgICB2YXIgcmVtb3ZlQ2hpbGRyZW4gPSB1dGlscy5yZW1vdmVDaGlsZHJlbjtcbn1cblxuQnJvd3Nlci5wcm90b3R5cGUucmVtb3ZlQWxsUG9wdXBzID0gZnVuY3Rpb24oKSB7XG4gICAgcmVtb3ZlQ2hpbGRyZW4odGhpcy5oUG9wdXBIb2xkZXIpO1xuICAgIHJlbW92ZUNoaWxkcmVuKHRoaXMucG9wdXBIb2xkZXIpO1xufVxuXG5Ccm93c2VyLnByb3RvdHlwZS5tYWtlVG9vbHRpcCA9IGZ1bmN0aW9uKGVsZSwgdGV4dClcbntcbiAgICB2YXIgaXNpbiA9IGZhbHNlO1xuICAgIHZhciB0aGlzQiA9IHRoaXM7XG4gICAgdmFyIHRpbWVyID0gbnVsbDtcbiAgICB2YXIgb3V0bGlzdGVuZXI7XG4gICAgb3V0bGlzdGVuZXIgPSBmdW5jdGlvbihldikge1xuICAgICAgICBpc2luID0gZmFsc2U7XG4gICAgICAgIGlmICh0aW1lcikge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVyKTtcbiAgICAgICAgICAgIHRpbWVyID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBlbGUucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2VvdXQnLCBvdXRsaXN0ZW5lciwgZmFsc2UpO1xuICAgIH07XG5cbiAgICB2YXIgc2V0dXAgPSBmdW5jdGlvbihldikge1xuICAgICAgICB2YXIgbXggPSBldi5jbGllbnRYICsgd2luZG93LnNjcm9sbFgsIG15ID0gZXYuY2xpZW50WSArIHdpbmRvdy5zY3JvbGxZO1xuICAgICAgICBpZiAoIXRpbWVyKSB7XG4gICAgICAgICAgICB0aW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdmFyIHR0dDtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mKHRleHQpID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIHR0dCA9IHRleHQoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0dHQgPSB0ZXh0O1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciBwb3B1cCA9IG1ha2VFbGVtZW50KCdkaXYnLFxuICAgICAgICAgICAgICAgICAgICBbbWFrZUVsZW1lbnQoJ2RpdicsIG51bGwsIHtjbGFzc05hbWU6ICd0b29sdGlwLWFycm93J30pLFxuICAgICAgICAgICAgICAgICAgICAgbWFrZUVsZW1lbnQoJ2RpdicsIHR0dCwge2NsYXNzTmFtZTogJ3Rvb2x0aXAtaW5uZXInfSldLCBcbiAgICAgICAgICAgICAgICAgICAge2NsYXNzTmFtZTogJ3Rvb2x0aXAgYm90dG9tIGluJ30sIHtcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogJ2Jsb2NrJyxcbiAgICAgICAgICAgICAgICAgICAgdG9wOiAnJyArIChteSArIDIwKSArICdweCcsXG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6ICcnICsgTWF0aC5tYXgobXggLSAzMCwgMjApICsgJ3B4J1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXNCLmhQb3B1cEhvbGRlci5hcHBlbmRDaGlsZChwb3B1cCk7XG4gICAgICAgICAgICAgICAgdmFyIG1vdmVIYW5kbGVyO1xuICAgICAgICAgICAgICAgIG1vdmVIYW5kbGVyID0gZnVuY3Rpb24oZXYpIHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNCLmhQb3B1cEhvbGRlci5yZW1vdmVDaGlsZChwb3B1cCk7XG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1heSBoYXZlIGJlZW4gcmVtb3ZlZCBieSBvdGhlciBjb2RlIHdoaWNoIGNsZWFycyB0aGUgcG9wdXAgbGF5ZXIuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIG1vdmVIYW5kbGVyLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc2luKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWxlLm9mZnNldFBhcmVudCA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHVwKGV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgbW92ZUhhbmRsZXIsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICB0aW1lciA9IG51bGw7XG4gICAgICAgICAgICB9LCAxMDAwKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBlbGUuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJywgZnVuY3Rpb24oZXYpIHtcbiAgICAgICAgaXNpbiA9IHRydWVcbiAgICAgICAgZWxlLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3V0Jywgb3V0bGlzdGVuZXIsIGZhbHNlKTtcbiAgICAgICAgc2V0dXAoZXYpO1xuICAgIH0sIGZhbHNlKTtcbiAgICBlbGUuYWRkRXZlbnRMaXN0ZW5lcignRE9NTm9kZVJlbW92ZWRGcm9tRG9jdW1lbnQnLCBmdW5jdGlvbihldikge1xuICAgICAgICBpc2luID0gZmFsc2U7XG4gICAgICAgIGlmICh0aW1lcikge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVyKTtcbiAgICAgICAgICAgIHRpbWVyID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH0sIGZhbHNlKTtcbn1cblxuQnJvd3Nlci5wcm90b3R5cGUucG9waXQgPSBmdW5jdGlvbihldiwgbmFtZSwgZWxlLCBvcHRzKVxue1xuICAgIHZhciB0aGlzQiA9IHRoaXM7XG4gICAgaWYgKCFvcHRzKSBcbiAgICAgICAgb3B0cyA9IHt9O1xuICAgIGlmICghZXYpIFxuICAgICAgICBldiA9IHt9O1xuXG4gICAgdmFyIHdpZHRoID0gb3B0cy53aWR0aCB8fCAyMDA7XG5cbiAgICB2YXIgbXgsIG15O1xuXG4gICAgaWYgKGV2LmNsaWVudFgpIHtcbiAgICAgICAgdmFyIG14ID0gIGV2LmNsaWVudFgsIG15ID0gZXYuY2xpZW50WTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBteCA9IDUwMDsgbXk9IDUwO1xuICAgIH1cbiAgICBteCArPSAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnQgfHwgZG9jdW1lbnQuYm9keS5zY3JvbGxMZWZ0O1xuICAgIG15ICs9ICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wIHx8IGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wO1xuICAgIHZhciB3aW5XaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xuXG4gICAgdmFyIHRvcCA9IG15O1xuICAgIHZhciBsZWZ0ID0gTWF0aC5taW4obXggLSAod2lkdGgvMikgLSA0LCAod2luV2lkdGggLSB3aWR0aCAtIDMwKSk7XG5cbiAgICB2YXIgcG9wdXAgPSBtYWtlRWxlbWVudCgnZGl2Jyk7XG4gICAgcG9wdXAuY2xhc3NOYW1lID0gJ3BvcG92ZXIgZmFkZSAnICsgKGV2LmNsaWVudFggPyAnYm90dG9tICcgOiAnJykgKyAnaW4nO1xuICAgIHBvcHVwLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgIHBvcHVwLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcbiAgICBwb3B1cC5zdHlsZS50b3AgPSAnJyArIHRvcCArICdweCc7XG4gICAgcG9wdXAuc3R5bGUubGVmdCA9ICcnICsgbGVmdCArICdweCc7XG4gICAgcG9wdXAuc3R5bGUud2lkdGggPSB3aWR0aCArICdweCc7XG4gICAgaWYgKHdpZHRoID4gMjc2KSB7XG4gICAgICAgIC8vIEhBQ0sgQm9vdHN0cmFwcGlmaWNhdGlvbi4uLlxuICAgICAgICBwb3B1cC5zdHlsZS5tYXhXaWR0aCA9IHdpZHRoICsgJ3B4JztcbiAgICB9XG5cbiAgICBwb3B1cC5hcHBlbmRDaGlsZChtYWtlRWxlbWVudCgnZGl2JywgbnVsbCwge2NsYXNzTmFtZTogJ2Fycm93J30pKTtcblxuICAgIGlmIChuYW1lKSB7XG4gICAgICAgIHZhciBjbG9zZUJ1dHRvbiA9IG1ha2VFbGVtZW50KCdidXR0b24nLCAnJywge2NsYXNzTmFtZTogJ2Nsb3NlJ30pO1xuICAgICAgICBjbG9zZUJ1dHRvbi5pbm5lckhUTUwgPSAnJnRpbWVzOydcblxuICAgICAgICBjbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLCBmdW5jdGlvbihldikge1xuICAgICAgICAgICAgY2xvc2VCdXR0b24uc3R5bGUuY29sb3IgPSAncmVkJztcbiAgICAgICAgfSwgZmFsc2UpO1xuICAgICAgICBjbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW91dCcsIGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgICAgICBjbG9zZUJ1dHRvbi5zdHlsZS5jb2xvciA9ICdibGFjayc7XG4gICAgICAgIH0sIGZhbHNlKTtcbiAgICAgICAgY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldikge1xuICAgICAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTsgZXYuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICB0aGlzQi5yZW1vdmVBbGxQb3B1cHMoKTtcbiAgICAgICAgfSwgZmFsc2UpO1xuICAgICAgICB2YXIgdGJhciA9IG1ha2VFbGVtZW50KCdoNCcsIFttYWtlRWxlbWVudCgnc3BhbicsIG5hbWUsIG51bGwsIHttYXhXaWR0aDogJzIwMHB4J30pLCBjbG9zZUJ1dHRvbl0sIHsvKmNsYXNzTmFtZTogJ3BvcG92ZXItdGl0bGUnICovfSwge3BhZGRpbmdMZWZ0OiAnMTBweCcsIHBhZGRpbmdSaWdodDogJzEwcHgnfSk7XG5cbiAgICAgICAgdmFyIGRyYWdPWCwgZHJhZ09ZO1xuICAgICAgICB2YXIgbW92ZUhhbmRsZXIsIHVwSGFuZGxlcjtcbiAgICAgICAgbW92ZUhhbmRsZXIgPSBmdW5jdGlvbihldikge1xuICAgICAgICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7IGV2LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBsZWZ0ID0gbGVmdCArIChldi5jbGllbnRYIC0gZHJhZ09YKTtcbiAgICAgICAgICAgIGlmIChsZWZ0IDwgOCkge1xuICAgICAgICAgICAgICAgIGxlZnQgPSA4O1xuICAgICAgICAgICAgfSBpZiAobGVmdCA+ICh3aW5XaWR0aCAtIHdpZHRoIC0gMzIpKSB7XG4gICAgICAgICAgICAgICAgbGVmdCA9ICh3aW5XaWR0aCAtIHdpZHRoIC0gMjYpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdG9wID0gdG9wICsgKGV2LmNsaWVudFkgLSBkcmFnT1kpO1xuICAgICAgICAgICAgdG9wID0gTWF0aC5tYXgoMTAsIHRvcCk7XG4gICAgICAgICAgICBwb3B1cC5zdHlsZS50b3AgPSAnJyArIHRvcCArICdweCc7XG4gICAgICAgICAgICBwb3B1cC5zdHlsZS5sZWZ0ID0gJycgKyBNYXRoLm1pbihsZWZ0LCAod2luV2lkdGggLSB3aWR0aCAtIDEwKSkgKyAncHgnO1xuICAgICAgICAgICAgZHJhZ09YID0gZXYuY2xpZW50WDsgZHJhZ09ZID0gZXYuY2xpZW50WTtcbiAgICAgICAgfVxuICAgICAgICB1cEhhbmRsZXIgPSBmdW5jdGlvbihldikge1xuICAgICAgICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7IGV2LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgbW92ZUhhbmRsZXIsIGZhbHNlKTtcbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdXBIYW5kbGVyLCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGJhci5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBmdW5jdGlvbihldikge1xuICAgICAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTsgZXYuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICBkcmFnT1ggPSBldi5jbGllbnRYOyBkcmFnT1kgPSBldi5jbGllbnRZO1xuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIG1vdmVIYW5kbGVyLCBmYWxzZSk7XG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHVwSGFuZGxlciwgZmFsc2UpO1xuICAgICAgICB9LCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcblxuICAgICAgICBwb3B1cC5hcHBlbmRDaGlsZCh0YmFyKTtcbiAgICB9XG5cbiAgICBwb3B1cC5hcHBlbmRDaGlsZChtYWtlRWxlbWVudCgnZGl2JywgZWxlLCB7Y2xhc3NOYW1lOiAncG9wb3Zlci1jb250ZW50J30sIHtcbiAgICAgICAgcGFkZGluZzogJzBweCdcbiAgICB9KSk7XG4gICAgdGhpcy5oUG9wdXBIb2xkZXIuYXBwZW5kQ2hpbGQocG9wdXApO1xuXG4gICAgdmFyIHBvcHVwSGFuZGxlID0ge1xuICAgICAgICBub2RlOiBwb3B1cCxcbiAgICAgICAgZGlzcGxheWVkOiB0cnVlXG4gICAgfTtcbiAgICBwb3B1cC5hZGRFdmVudExpc3RlbmVyKCdET01Ob2RlUmVtb3ZlZCcsIGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgIGlmIChldi50YXJnZXQgPT0gcG9wdXApIHtcbiAgICAgICAgICAgIHBvcHVwSGFuZGxlLmRpc3BsYXllZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfSwgZmFsc2UpO1xuICAgIHJldHVybiBwb3B1cEhhbmRsZTtcbn1cblxuZnVuY3Rpb24gbWFrZVRyZWVUYWJsZVNlY3Rpb24odGl0bGUsIGNvbnRlbnQsIHZpc2libGUpIHtcbiAgICB2YXIgdHRCdXR0b24gPSBtYWtlRWxlbWVudCgnaScpO1xuICAgIGZ1bmN0aW9uIHVwZGF0ZSgpIHtcbiAgICAgICAgaWYgKHZpc2libGUpIHtcbiAgICAgICAgICAgIHR0QnV0dG9uLmNsYXNzTmFtZSA9ICdmYSBmYS1jYXJldC1kb3duJztcbiAgICAgICAgICAgIGNvbnRlbnQuc3R5bGUuZGlzcGxheSA9ICd0YWJsZSc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0dEJ1dHRvbi5jbGFzc05hbWUgPSAnZmEgZmEtY2FyZXQtcmlnaHQnO1xuICAgICAgICAgICAgY29udGVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICB9XG4gICAgfVxuICAgIHVwZGF0ZSgpO1xuXG4gICAgdHRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldikge1xuICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpOyBldi5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgdmlzaWJsZSA9ICF2aXNpYmxlO1xuICAgICAgICB1cGRhdGUoKTtcbiAgICB9LCBmYWxzZSk7XG5cbiAgICB2YXIgaGVhZGluZyA9IG1ha2VFbGVtZW50KCdoNicsIFt0dEJ1dHRvbiwgJyAnLCB0aXRsZV0sIHt9LCB7ZGlzcGxheTogJ2Jsb2NrJywgYmFja2dyb3VuZDogJ2dyYXknLCBjb2xvcjogJ3doaXRlJywgd2lkdGg6ICcxMDAlJywgcGFkZGluZzogJzVweCAycHgnLCBtYXJnaW46ICcwcHgnfSk7XG4gICAgcmV0dXJuIG1ha2VFbGVtZW50KCdkaXYnLCBbaGVhZGluZywgY29udGVudF0sIHt9KTtcbn1cblxuaWYgKHR5cGVvZihtb2R1bGUpICE9PSAndW5kZWZpbmVkJykge1xuICAgIG1vZHVsZS5leHBvcnRzID0ge1xuICAgICAgICBtYWtlVHJlZVRhYmxlU2VjdGlvbjogbWFrZVRyZWVUYWJsZVNlY3Rpb25cbiAgICB9O1xufVxuIiwiLyoganNoaW50IGVzdmVyc2lvbjogNiAqL1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbmltcG9ydCAqIGFzIERlZmF1bHRSZW5kZXJlciBmcm9tIFwiLi9kZWZhdWx0LXJlbmRlcmVyXCI7XG5cbmV4cG9ydCB7IHJlbmRlclRpZXIsIGRyYXdUaWVyIH07XG5cbmZ1bmN0aW9uIHJlbmRlclRpZXIoc3RhdHVzLCB0aWVyKSB7XG4gICAgZHJhd1RpZXIodGllcik7XG4gICAgdGllci51cGRhdGVTdGF0dXMoc3RhdHVzKTtcbn1cblxuZnVuY3Rpb24gZHJhd1RpZXIodGllcikge1xuICAgIGxldCBjYW52YXMgPSB0aWVyLnZpZXdwb3J0LmdldENvbnRleHQoXCIyZFwiKTtcbiAgICBsZXQgcmV0aW5hID0gdGllci5icm93c2VyLnJldGluYSAmJiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyA+IDE7XG4gICAgaWYgKHJldGluYSkge1xuICAgICAgICBjYW52YXMuc2NhbGUoMiwgMik7XG4gICAgfVxuXG4gICAgbGV0IGZlYXR1cmVzID0gdGllci5jdXJyZW50RmVhdHVyZXM7XG4gICAgbGV0IHNlcXVlbmNlID0gdGllci5jdXJyZW50U2VxdWVuY2U7XG4gICAgaWYgKHRpZXIuc2VxdWVuY2VTb3VyY2UpIHtcbiAgICAgICAgRGVmYXVsdFJlbmRlcmVyLmRyYXdTZXFUaWVyKHRpZXIsIHNlcXVlbmNlKTtcbiAgICB9IGVsc2UgaWYgKGZlYXR1cmVzKSB7XG4gICAgICAgIERlZmF1bHRSZW5kZXJlci5wcmVwYXJlU3VidGllcnModGllciwgY2FudmFzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmxvZyhcIk5vIHNlcXVlbmNlIG9yIGZlYXR1cmVzIGluIHRpZXIhXCIpO1xuICAgIH1cblxuICAgIGlmICh0aWVyLnN1YnRpZXJzKSB7XG4gICAgICAgIERlZmF1bHRSZW5kZXJlci5wcmVwYXJlVmlld3BvcnQodGllciwgY2FudmFzLCByZXRpbmEsIHRydWUpO1xuICAgIH1cblxuICAgIHRpZXIuZHJhd092ZXJsYXkoKTtcbiAgICB0aWVyLnBhaW50UXVhbnQoKTtcblxuICAgIGlmICh0eXBlb2YodGllci5kYXNTb3VyY2UuZHJhd0NhbGxiYWNrKSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHRpZXIuZGFzU291cmNlLmRyYXdDYWxsYmFjayhjYW52YXMsIHRpZXIpO1xuICAgIH1cblxuICAgIHRpZXIub3JpZ2luSGF4eCA9IDA7XG4gICAgdGllci5icm93c2VyLmFycmFuZ2VUaWVycygpO1xufVxuIiwiLyogLSotIG1vZGU6IGphdmFzY3JpcHQ7IGMtYmFzaWMtb2Zmc2V0OiA0OyBpbmRlbnQtdGFicy1tb2RlOiBuaWwgLSotICovXG5cbi8vIFxuLy8gRGFsbGlhbmNlIEdlbm9tZSBFeHBsb3JlclxuLy8gKGMpIFRob21hcyBEb3duIDIwMDYtMjAxNFxuLy9cbi8vIGVuY29kZS5qczogaW50ZXJmYWNlIGZvciBFTkNPREUgRENDIHNlcnZpY2VzXG4vL1xuXG5cInVzZSBzdHJpY3RcIjtcblxuaWYgKHR5cGVvZihyZXF1aXJlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB2YXIgUHJvbWlzZSA9IHJlcXVpcmUoJ2VzNi1wcm9taXNlJykuUHJvbWlzZTtcbn1cblxuZnVuY3Rpb24gbG9va3VwRW5jb2RlVVJJKHVyaSwganNvbikge1xuICAgIGlmICh1cmkuaW5kZXhPZignPycpIDwgMClcbiAgICAgICAgdXJpID0gdXJpICsgJz9zb2Z0PXRydWUnO1xuXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKGFjY2VwdCwgcmVqZWN0KSB7XG4gICAgICAgIHZhciByZXEgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgICAgcmVxLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKHJlcS5yZWFkeVN0YXRlID09IDQpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVxLnN0YXR1cyA+PSAzMDApIHtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KCdFcnJvciBjb2RlICcgKyByZXEuc3RhdHVzKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzcCA9IEpTT04ucGFyc2UocmVxLnJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAgICAgYWNjZXB0KGpzb24gPyByZXNwIDogcmVzcC5sb2NhdGlvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIFxuICAgICAgICByZXEub3BlbignR0VUJywgdXJpLCB0cnVlKTtcbiAgICAgICAgcmVxLnNldFJlcXVlc3RIZWFkZXIoJ0FjY2VwdCcsICdhcHBsaWNhdGlvbi9qc29uJyk7XG4gICAgICAgIHJlcS5yZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgICAgIHJlcS5zZW5kKCk7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIEVuY29kZVVSTEhvbGRlcih1cmwpIHtcbiAgICB0aGlzLnJhd3VybCA9IHVybDtcbn1cblxuRW5jb2RlVVJMSG9sZGVyLnByb3RvdHlwZS5nZXRVUkxQcm9taXNlID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMudXJsUHJvbWlzZSAmJiB0aGlzLnVybFByb21pc2VWYWxpZGl0eSA+IERhdGUubm93KCkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudXJsUHJvbWlzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnVybFByb21pc2UgPSBsb29rdXBFbmNvZGVVUkkodGhpcy5yYXd1cmwsIHRydWUpLnRoZW4oZnVuY3Rpb24ocmVzcCkge1xuICAgICAgICAgICAgcmV0dXJuIHJlc3AubG9jYXRpb247XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnVybFByb21pc2VWYWxpZGl0eSA9IERhdGUubm93KCkgKyAoMTIgKiAzNjAwICogMTAwMCk7XG4gICAgICAgIHJldHVybiB0aGlzLnVybFByb21pc2U7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBFbmNvZGVGZXRjaGFibGUodXJsLCBzdGFydCwgZW5kLCBvcHRzKSB7XG4gICAgaWYgKCFvcHRzKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc3RhcnQgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICBvcHRzID0gc3RhcnQ7XG4gICAgICAgICAgICBzdGFydCA9IHVuZGVmaW5lZDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG9wdHMgPSB7fTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMudXJsID0gKHR5cGVvZiB1cmwgPT09ICdzdHJpbmcnID8gbmV3IEVuY29kZVVSTEhvbGRlcih1cmwpIDogdXJsKTtcbiAgICB0aGlzLnN0YXJ0ID0gc3RhcnQgfHwgMDtcbiAgICBpZiAoZW5kKSB7XG4gICAgICAgIHRoaXMuZW5kID0gZW5kO1xuICAgIH1cbiAgICB0aGlzLm9wdHMgPSBvcHRzO1xufVxuXG5cblxuRW5jb2RlRmV0Y2hhYmxlLnByb3RvdHlwZS5zbGljZSA9IGZ1bmN0aW9uKHMsIGwpIHtcbiAgICBpZiAocyA8IDApIHtcbiAgICAgICAgdGhyb3cgJ0JhZCBzbGljZSAnICsgcztcbiAgICB9XG5cbiAgICB2YXIgbnMgPSB0aGlzLnN0YXJ0LCBuZSA9IHRoaXMuZW5kO1xuICAgIGlmIChucyAmJiBzKSB7XG4gICAgICAgIG5zID0gbnMgKyBzO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIG5zID0gcyB8fCBucztcbiAgICB9XG4gICAgaWYgKGwgJiYgbnMpIHtcbiAgICAgICAgbmUgPSBucyArIGwgLSAxO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIG5lID0gbmUgfHwgbCAtIDE7XG4gICAgfVxuICAgIHJldHVybiBuZXcgRW5jb2RlRmV0Y2hhYmxlKHRoaXMudXJsLCBucywgbmUsIHRoaXMub3B0cyk7XG59XG5cbkVuY29kZUZldGNoYWJsZS5wcm90b3R5cGUuZmV0Y2hBc1RleHQgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgcmVxID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgdmFyIGxlbmd0aDtcbiAgICBzZWxmLnVybC5nZXRVUkxQcm9taXNlKCkudGhlbihmdW5jdGlvbih1cmwpIHtcbiAgICAgICAgcmVxLm9wZW4oJ0dFVCcsIHVybCwgdHJ1ZSk7XG5cbiAgICAgICAgaWYgKHNlbGYuZW5kKSB7XG4gICAgICAgICAgICBpZiAoc2VsZi5lbmQgLSBzZWxmLnN0YXJ0ID4gMTAwMDAwMDAwKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgJ01vbnN0ZXIgZmV0Y2ghJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlcS5zZXRSZXF1ZXN0SGVhZGVyKCdSYW5nZScsICdieXRlcz0nICsgc2VsZi5zdGFydCArICctJyArIHNlbGYuZW5kKTtcbiAgICAgICAgICAgIGxlbmd0aCA9IHNlbGYuZW5kIC0gc2VsZi5zdGFydCArIDE7XG4gICAgICAgIH1cblxuICAgICAgICByZXEub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAocmVxLnJlYWR5U3RhdGUgPT0gNCkge1xuICAgICAgICAgICAgICAgIGlmIChyZXEuc3RhdHVzID09IDIwMCB8fCByZXEuc3RhdHVzID09IDIwNikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2socmVxLnJlc3BvbnNlVGV4dCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHNlbGYub3B0cy5jcmVkZW50aWFscykge1xuICAgICAgICAgICAgcmVxLndpdGhDcmVkZW50aWFscyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmVxLnNlbmQoKTtcbiAgICB9KS5jYXRjaChmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwpO1xuICAgIH0pO1xufVxuXG5FbmNvZGVGZXRjaGFibGUucHJvdG90eXBlLnNhbHRlZCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzO1xufVxuXG5FbmNvZGVGZXRjaGFibGUucHJvdG90eXBlLmZldGNoID0gZnVuY3Rpb24oY2FsbGJhY2ssIGF0dGVtcHQsIHRydW5jYXRlZExlbmd0aCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIGF0dGVtcHQgPSBhdHRlbXB0IHx8IDE7XG4gICAgaWYgKGF0dGVtcHQgPiAzKSB7XG4gICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsKTtcbiAgICB9XG5cbiAgICBzZWxmLnVybC5nZXRVUkxQcm9taXNlKCkudGhlbihmdW5jdGlvbiAodXJsKSB7XG4gICAgICAgIHZhciByZXEgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgICAgdmFyIGxlbmd0aDtcbiAgICAgICAgcmVxLm9wZW4oJ0dFVCcsIHVybCwgdHJ1ZSk7XG4gICAgICAgIHJlcS5vdmVycmlkZU1pbWVUeXBlKCd0ZXh0L3BsYWluOyBjaGFyc2V0PXgtdXNlci1kZWZpbmVkJyk7XG4gICAgICAgIGlmIChzZWxmLmVuZCkge1xuICAgICAgICAgICAgaWYgKHNlbGYuZW5kIC0gc2VsZi5zdGFydCA+IDEwMDAwMDAwMCkge1xuICAgICAgICAgICAgICAgIHRocm93ICdNb25zdGVyIGZldGNoISc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXEuc2V0UmVxdWVzdEhlYWRlcignUmFuZ2UnLCAnYnl0ZXM9JyArIHNlbGYuc3RhcnQgKyAnLScgKyBzZWxmLmVuZCk7XG4gICAgICAgICAgICBsZW5ndGggPSBzZWxmLmVuZCAtIHNlbGYuc3RhcnQgKyAxO1xuICAgICAgICB9XG4gICAgICAgIHJlcS5yZXNwb25zZVR5cGUgPSAnYXJyYXlidWZmZXInO1xuICAgICAgICByZXEub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAocmVxLnJlYWR5U3RhdGUgPT0gNCkge1xuICAgICAgICAgICAgICAgIGlmIChyZXEuc3RhdHVzID09IDIwMCB8fCByZXEuc3RhdHVzID09IDIwNikge1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVxLnJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYmwgPSByZXEucmVzcG9uc2UuYnl0ZUxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsZW5ndGggJiYgbGVuZ3RoICE9IGJsICYmICghdHJ1bmNhdGVkTGVuZ3RoIHx8IGJsICE9IHRydW5jYXRlZExlbmd0aCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi5mZXRjaChjYWxsYmFjaywgYXR0ZW1wdCArIDEsIGJsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKHJlcS5yZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVxLm1velJlc3BvbnNlQXJyYXlCdWZmZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhyZXEubW96UmVzcG9uc2VBcnJheUJ1ZmZlcik7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IHJlcS5yZXNwb25zZVRleHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobGVuZ3RoICYmIGxlbmd0aCAhPSByLmxlbmd0aCAmJiAoIXRydW5jYXRlZExlbmd0aCB8fCByLmxlbmd0aCAhPSB0cnVuY2F0ZWRMZW5ndGgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYuZmV0Y2goY2FsbGJhY2ssIGF0dGVtcHQgKyAxLCByLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhic3RyaW5nVG9CdWZmZXIocmVxLnJlc3BvbnNlVGV4dCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYuZmV0Y2goY2FsbGJhY2ssIGF0dGVtcHQgKyAxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGlmIChzZWxmLm9wdHMuY3JlZGVudGlhbHMpIHtcbiAgICAgICAgICAgIHJlcS53aXRoQ3JlZGVudGlhbHMgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJlcS5zZW5kKCk7XG4gICAgfSkuY2F0Y2goZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGJzdHJpbmdUb0J1ZmZlcihyZXN1bHQpIHtcbiAgICBpZiAoIXJlc3VsdCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICB2YXIgYmEgPSBuZXcgVWludDhBcnJheShyZXN1bHQubGVuZ3RoKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGJhLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIGJhW2ldID0gcmVzdWx0LmNoYXJDb2RlQXQoaSk7XG4gICAgfVxuICAgIHJldHVybiBiYS5idWZmZXI7XG59XG5cbmlmICh0eXBlb2YobW9kdWxlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IHtcbiAgICAgICAgbG9va3VwRW5jb2RlVVJJOiBsb29rdXBFbmNvZGVVUkksXG4gICAgICAgIEVuY29kZUZldGNoYWJsZTogRW5jb2RlRmV0Y2hhYmxlXG4gICAgfTtcbn1cbiIsIi8qIC0qLSBtb2RlOiBqYXZhc2NyaXB0OyBjLWJhc2ljLW9mZnNldDogNDsgaW5kZW50LXRhYnMtbW9kZTogbmlsIC0qLSAqL1xuXG4vLyBcbi8vIERhbGxpYW5jZSBHZW5vbWUgRXhwbG9yZXJcbi8vIChjKSBUaG9tYXMgRG93biAyMDA2LTIwMTNcbi8vXG4vLyBlbnNlbWJsanNvbi5qcyAtLSBxdWVyeSB0aGUgRW5zZW1ibCBSRVNUIEFQSS5cbi8vXG5cblwidXNlIHN0cmljdFwiO1xuXG5pZiAodHlwZW9mKHJlcXVpcmUpICE9PSAndW5kZWZpbmVkJykge1xuICAgIHZhciBzYSA9IHJlcXVpcmUoJy4vc291cmNlYWRhcHRlcnMnKTtcbiAgICB2YXIgZGFsbGlhbmNlX3JlZ2lzdGVyU291cmNlQWRhcHRlckZhY3RvcnkgPSBzYS5yZWdpc3RlclNvdXJjZUFkYXB0ZXJGYWN0b3J5O1xuICAgIHZhciBGZWF0dXJlU291cmNlQmFzZSA9IHNhLkZlYXR1cmVTb3VyY2VCYXNlO1xuXG4gICAgdmFyIGRhcyA9IHJlcXVpcmUoJy4vZGFzJyk7XG4gICAgdmFyIERBU1N0eWxlc2hlZXQgPSBkYXMuREFTU3R5bGVzaGVldDtcbiAgICB2YXIgREFTU3R5bGUgPSBkYXMuREFTU3R5bGU7XG4gICAgdmFyIERBU0ZlYXR1cmUgPSBkYXMuREFTRmVhdHVyZTtcbiAgICB2YXIgREFTR3JvdXAgPSBkYXMuREFTR3JvdXA7XG59XG5cbmZ1bmN0aW9uIEVuc2VtYmxGZWF0dXJlU291cmNlKHNvdXJjZSkge1xuICAgIEZlYXR1cmVTb3VyY2VCYXNlLmNhbGwodGhpcyk7XG4gICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgdGhpcy5iYXNlID0gc291cmNlLnVyaSB8fCAnLy9yZXN0LmVuc2VtYmwub3JnJztcbiAgICBpZiAodGhpcy5iYXNlLmluZGV4T2YoJy8vJykgPT09IDApIHtcbiAgICAgICAgdmFyIHByb3RvID0gd2luZG93LmxvY2F0aW9uLnByb3RvY29sO1xuICAgICAgICBpZiAocHJvdG8gPT0gJ2h0dHA6JyB8fCBwcm90byA9PSAnaHR0cHM6Jykge1xuICAgICAgICAgICAgLy8gUHJvdG9jb2wtcmVsYXRpdmUgVVJMcyBva2F5LlxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5iYXNlID0gJ2h0dHA6JyArIHRoaXMuYmFzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0aGlzLnNwZWNpZXMgPSBzb3VyY2Uuc3BlY2llcyB8fCAnaHVtYW4nO1xuXG4gICAgaWYgKHR5cGVvZiBzb3VyY2UudHlwZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgdGhpcy50eXBlID0gW3NvdXJjZS50eXBlXTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnR5cGUgPSBzb3VyY2UudHlwZSB8fCBbJ3JlZ3VsYXRvcnknXTtcbiAgICB9XG59XG5cbkVuc2VtYmxGZWF0dXJlU291cmNlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoRmVhdHVyZVNvdXJjZUJhc2UucHJvdG90eXBlKTtcbkVuc2VtYmxGZWF0dXJlU291cmNlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEVuc2VtYmxGZWF0dXJlU291cmNlO1xuXG5FbnNlbWJsRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuZ2V0U3R5bGVTaGVldCA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgdmFyIHN0eWxlc2hlZXQgPSBuZXcgREFTU3R5bGVzaGVldCgpO1xuXG4gICAgdmFyIHRzU3R5bGUgPSBuZXcgREFTU3R5bGUoKTtcbiAgICB0c1N0eWxlLmdseXBoID0gJ19fTk9ORSc7XG4gICAgaWYgKHRoaXMudHlwZS5pbmRleE9mKCdleG9uJykgPj0gMClcbiAgICAgICAgc3R5bGVzaGVldC5wdXNoU3R5bGUoe3R5cGU6ICd0cmFuc2NyaXB0J30sIG51bGwsIHRzU3R5bGUpO1xuICAgIGlmICh0aGlzLnR5cGUuaW5kZXhPZignZXhvbicpID49IDAgfHwgdGhpcy50eXBlLmluZGV4T2YoJ3RyYW5zY3JpcHQnKSA+PSAwKVxuICAgICAgICBzdHlsZXNoZWV0LnB1c2hTdHlsZSh7dHlwZTogJ2dlbmUnfSwgbnVsbCwgdHNTdHlsZSk7XG5cbiAgICB2YXIgY2RzU3R5bGUgPSBuZXcgREFTU3R5bGUoKTtcbiAgICBjZHNTdHlsZS5nbHlwaCA9ICdCT1gnO1xuICAgIGNkc1N0eWxlLkZHQ09MT1IgPSAnYmxhY2snO1xuICAgIGNkc1N0eWxlLkJHQ09MT1IgPSAncmVkJ1xuICAgIGNkc1N0eWxlLkhFSUdIVCA9IDg7XG4gICAgY2RzU3R5bGUuQlVNUCA9IHRydWU7XG4gICAgY2RzU3R5bGUuTEFCRUwgPSB0cnVlO1xuICAgIGNkc1N0eWxlLlpJTkRFWCA9IDEwO1xuICAgIHN0eWxlc2hlZXQucHVzaFN0eWxlKHt0eXBlOiAnY2RzJ30sIG51bGwsIGNkc1N0eWxlKTtcblxuICAgIHtcbiAgICAgICAgdmFyIHZhclN0eWxlID0gbmV3IERBU1N0eWxlKCk7XG4gICAgICAgIHZhclN0eWxlLmdseXBoID0gJ1NRVUFSRSc7XG4gICAgICAgIHZhclN0eWxlLkJVTVAgPSAneWVzJztcbiAgICAgICAgdmFyU3R5bGUuTEFCRUwgPSAnbm8nO1xuICAgICAgICAvLyB2YXJTdHlsZS5CR0NPTE9SID0gJyM4ODg4ODgnO1xuICAgICAgICB2YXJTdHlsZS5GR0NPTE9SID0gJ2JsdWUnO1xuICAgICAgICBzdHlsZXNoZWV0LnB1c2hTdHlsZSh7dHlwZTogJ3ZhcmlhdGlvbicsIG1ldGhvZDogJy4rX1VUUl92YXJpYW50J30sIG51bGwsIHZhclN0eWxlKTtcbiAgICB9XG4gICAge1xuICAgICAgICB2YXIgdmFyU3R5bGUgPSBuZXcgREFTU3R5bGUoKTtcbiAgICAgICAgdmFyU3R5bGUuZ2x5cGggPSAnVFJJQU5HTEUnO1xuICAgICAgICB2YXJTdHlsZS5ESVJFQ1RJT04gPSAnUyc7XG4gICAgICAgIHZhclN0eWxlLkJVTVAgPSAneWVzJztcbiAgICAgICAgdmFyU3R5bGUuTEFCRUwgPSAnbm8nO1xuICAgICAgICAvLyB2YXJTdHlsZS5CR0NPTE9SID0gJyM4ODg4ODgnO1xuICAgICAgICB2YXJTdHlsZS5GR0NPTE9SID0gJ2JsdWUnO1xuICAgICAgICBzdHlsZXNoZWV0LnB1c2hTdHlsZSh7dHlwZTogJ3ZhcmlhdGlvbicsIG1ldGhvZDogJ21pc3NlbnNlX3ZhcmlhbnQnfSwgbnVsbCwgdmFyU3R5bGUpO1xuICAgIH1cbiAgICB7XG4gICAgICAgIHZhciB2YXJTdHlsZSA9IG5ldyBEQVNTdHlsZSgpO1xuICAgICAgICB2YXJTdHlsZS5nbHlwaCA9ICdUUklBTkdMRSc7XG4gICAgICAgIHZhclN0eWxlLkRJUkVDVElPTiA9ICdOJztcbiAgICAgICAgdmFyU3R5bGUuQlVNUCA9ICd5ZXMnO1xuICAgICAgICB2YXJTdHlsZS5MQUJFTCA9ICdubyc7XG4gICAgICAgIC8vIHZhclN0eWxlLkJHQ09MT1IgPSAnIzg4ODg4OCc7XG4gICAgICAgIHZhclN0eWxlLkZHQ09MT1IgPSAnYmx1ZSc7XG4gICAgICAgIHN0eWxlc2hlZXQucHVzaFN0eWxlKHt0eXBlOiAndmFyaWF0aW9uJywgbWV0aG9kOiAnc3BsaWNlXy4rX3ZhcmlhbnQnfSwgbnVsbCwgdmFyU3R5bGUpO1xuICAgIH1cbiAgICB7XG4gICAgICAgIHZhciB2YXJTdHlsZSA9IG5ldyBEQVNTdHlsZSgpO1xuICAgICAgICB2YXJTdHlsZS5nbHlwaCA9ICdTVEFSJztcbiAgICAgICAgdmFyU3R5bGUuUE9JTlRTID0gNjtcbiAgICAgICAgdmFyU3R5bGUuQlVNUCA9ICd5ZXMnO1xuICAgICAgICB2YXJTdHlsZS5MQUJFTCA9ICdubyc7XG4gICAgICAgIC8vIHZhclN0eWxlLkJHQ09MT1IgPSAnIzg4ODg4OCc7XG4gICAgICAgIHZhclN0eWxlLkZHQ09MT1IgPSAnYmx1ZSc7XG4gICAgICAgIHN0eWxlc2hlZXQucHVzaFN0eWxlKHt0eXBlOiAndmFyaWF0aW9uJywgbWV0aG9kOiAncmVndWxhdG9yeV9yZWdpb25fdmFyaWFudCd9LCBudWxsLCB2YXJTdHlsZSk7XG4gICAgfVxuICAgIHtcbiAgICAgICAgdmFyIHZhclN0eWxlID0gbmV3IERBU1N0eWxlKCk7XG4gICAgICAgIHZhclN0eWxlLmdseXBoID0gJ1BMSU1TT0xMJztcbiAgICAgICAgdmFyU3R5bGUuQlVNUCA9ICd5ZXMnO1xuICAgICAgICB2YXJTdHlsZS5MQUJFTCA9ICdubyc7XG4gICAgICAgIC8vIHZhclN0eWxlLkJHQ09MT1IgPSAnIzg4ODg4OCc7XG4gICAgICAgIHZhclN0eWxlLkZHQ09MT1IgPSAncmdiKDUwLDgwLDI1NSknO1xuICAgICAgICB2YXJTdHlsZS5TVFJPS0VDT0xPUiA9ICdibGFjayc7XG4gICAgICAgIHN0eWxlc2hlZXQucHVzaFN0eWxlKHt0eXBlOiAndmFyaWF0aW9uJ30sIG51bGwsIHZhclN0eWxlKTtcbiAgICB9XG4gICAgICAgIHtcbiAgICAgICAgdmFyIHZhclN0eWxlID0gbmV3IERBU1N0eWxlKCk7XG4gICAgICAgIHZhclN0eWxlLmdseXBoID0gJ1NRVUFSRSc7XG4gICAgICAgIHZhclN0eWxlLkJVTVAgPSAneWVzJztcbiAgICAgICAgdmFyU3R5bGUuTEFCRUwgPSAnbm8nO1xuICAgICAgICB2YXJTdHlsZS5CR0NPTE9SID0gJyM4ODg4ODgnO1xuICAgICAgICB2YXJTdHlsZS5GR0NPTE9SID0gJ3JlZCc7XG4gICAgICAgIHN0eWxlc2hlZXQucHVzaFN0eWxlKHt0eXBlOiAnaW5kZWwnLCBtZXRob2Q6ICcuK19VVFJfdmFyaWFudCd9LCBudWxsLCB2YXJTdHlsZSk7XG4gICAgfVxuICAgIHtcbiAgICAgICAgdmFyIHZhclN0eWxlID0gbmV3IERBU1N0eWxlKCk7XG4gICAgICAgIHZhclN0eWxlLmdseXBoID0gJ1RSSUFOR0xFJztcbiAgICAgICAgdmFyU3R5bGUuRElSRUNUSU9OID0gJ1MnO1xuICAgICAgICB2YXJTdHlsZS5CVU1QID0gJ3llcyc7XG4gICAgICAgIHZhclN0eWxlLkxBQkVMID0gJ25vJztcbiAgICAgICAgdmFyU3R5bGUuQkdDT0xPUiA9ICcjODg4ODg4JztcbiAgICAgICAgdmFyU3R5bGUuRkdDT0xPUiA9ICdyZWQnO1xuICAgICAgICBzdHlsZXNoZWV0LnB1c2hTdHlsZSh7dHlwZTogJ2luZGVsJywgbWV0aG9kOiAnbWlzc2Vuc2VfdmFyaWFudCd9LCBudWxsLCB2YXJTdHlsZSk7XG4gICAgfVxuICAgIHtcbiAgICAgICAgdmFyIHZhclN0eWxlID0gbmV3IERBU1N0eWxlKCk7XG4gICAgICAgIHZhclN0eWxlLmdseXBoID0gJ1RSSUFOR0xFJztcbiAgICAgICAgdmFyU3R5bGUuRElSRUNUSU9OID0gJ04nO1xuICAgICAgICB2YXJTdHlsZS5CVU1QID0gJ3llcyc7XG4gICAgICAgIHZhclN0eWxlLkxBQkVMID0gJ25vJztcbiAgICAgICAgdmFyU3R5bGUuQkdDT0xPUiA9ICcjODg4ODg4JztcbiAgICAgICAgdmFyU3R5bGUuRkdDT0xPUiA9ICdyZWQnO1xuICAgICAgICBzdHlsZXNoZWV0LnB1c2hTdHlsZSh7dHlwZTogJ2luZGVsJywgbWV0aG9kOiAnc3BsaWNlXy4rX3ZhcmlhbnQnfSwgbnVsbCwgdmFyU3R5bGUpO1xuICAgIH1cbiAgICB7XG4gICAgICAgIHZhciB2YXJTdHlsZSA9IG5ldyBEQVNTdHlsZSgpO1xuICAgICAgICB2YXJTdHlsZS5nbHlwaCA9ICdTVEFSJztcbiAgICAgICAgdmFyU3R5bGUuUE9JTlRTID0gNjtcbiAgICAgICAgdmFyU3R5bGUuQlVNUCA9ICd5ZXMnO1xuICAgICAgICB2YXJTdHlsZS5MQUJFTCA9ICdubyc7XG4gICAgICAgIHZhclN0eWxlLkJHQ09MT1IgPSAnIzg4ODg4OCc7XG4gICAgICAgIHZhclN0eWxlLkZHQ09MT1IgPSAncmVkJztcbiAgICAgICAgc3R5bGVzaGVldC5wdXNoU3R5bGUoe3R5cGU6ICdpbmRlbCcsIG1ldGhvZDogJ3JlZ3VsYXRvcnlfcmVnaW9uX3ZhcmlhbnQnfSwgbnVsbCwgdmFyU3R5bGUpO1xuICAgIH1cbiAgICB7XG4gICAgICAgIHZhciB2YXJTdHlsZSA9IG5ldyBEQVNTdHlsZSgpO1xuICAgICAgICB2YXJTdHlsZS5nbHlwaCA9ICdQTElNU09MTCc7XG4gICAgICAgIHZhclN0eWxlLkJVTVAgPSAneWVzJztcbiAgICAgICAgdmFyU3R5bGUuTEFCRUwgPSAnbm8nO1xuICAgICAgICB2YXJTdHlsZS5CR0NPTE9SID0gJyM4ODg4ODgnO1xuICAgICAgICB2YXJTdHlsZS5GR0NPTE9SID0gJ3JlZCc7XG4gICAgICAgIHZhclN0eWxlLlNUUk9LRUNPTE9SID0gJ2JsYWNrJztcbiAgICAgICAgc3R5bGVzaGVldC5wdXNoU3R5bGUoe3R5cGU6ICdpbmRlbCd9LCBudWxsLCB2YXJTdHlsZSk7XG4gICAgfVxuXG4gICAgdmFyIHdpZ1N0eWxlID0gbmV3IERBU1N0eWxlKCk7XG4gICAgd2lnU3R5bGUuZ2x5cGggPSAnQk9YJztcbiAgICB3aWdTdHlsZS5GR0NPTE9SID0gJ2JsYWNrJztcbiAgICB3aWdTdHlsZS5CR0NPTE9SID0gJ29yYW5nZSdcbiAgICB3aWdTdHlsZS5IRUlHSFQgPSA4O1xuICAgIHdpZ1N0eWxlLkJVTVAgPSB0cnVlO1xuICAgIHdpZ1N0eWxlLkxBQkVMID0gdHJ1ZTtcbiAgICB3aWdTdHlsZS5aSU5ERVggPSAyMDtcbiAgICBzdHlsZXNoZWV0LnB1c2hTdHlsZSh7dHlwZTogJ2RlZmF1bHQnfSwgbnVsbCwgd2lnU3R5bGUpO1xuICAgIHJldHVybiBjYWxsYmFjayhzdHlsZXNoZWV0KTtcbn1cblxuXG5FbnNlbWJsRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuZ2V0U2NhbGVzID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIFtdO1xufVxuXG5FbnNlbWJsRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuZmV0Y2ggPSBmdW5jdGlvbihjaHIsIG1pbiwgbWF4LCBzY2FsZSwgdHlwZXMsIHBvb2wsIGNhbGxiYWNrKSB7XG4gICAgdmFyIHRoaXNCID0gdGhpcztcbiAgICB2YXIgdXJsID0gdGhpcy5iYXNlICsgJy9vdmVybGFwL3JlZ2lvbi8nICsgdGhpcy5zcGVjaWVzICsgJy8nICsgY2hyICsgJzonICsgbWluICsgJy0nICsgbWF4O1xuXG4gICAgdmFyIGZpbHRlcnMgPSBbXTtcbiAgICBmb3IgKHZhciB0aSA9IDA7IHRpIDwgdGhpcy50eXBlLmxlbmd0aDsgKyt0aSkge1xuICAgICAgICBmaWx0ZXJzLnB1c2goJ2ZlYXR1cmU9JyArIHRoaXMudHlwZVt0aV0pO1xuICAgIH1cbiAgICBmaWx0ZXJzLnB1c2goJ2NvbnRlbnQtdHlwZT1hcHBsaWNhdGlvbi9qc29uJyk7XG4gICAgdXJsID0gdXJsICsgJz8nICsgZmlsdGVycy5qb2luKCc7Jyk7XG5cbiAgICB2YXIgcmVxID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgcmVxLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkge1xuICAgIFx0aWYgKHJlcS5yZWFkeVN0YXRlID09IDQpIHtcbiAgICAgICAgICAgIHRoaXNCLmJ1c3ktLTtcbiAgICAgICAgICAgIHRoaXNCLm5vdGlmeUFjdGl2aXR5KCk7XG5cbiAgICBcdCAgICBpZiAocmVxLnN0YXR1cyA+PSAzMDApIHtcbiAgICAgICAgICAgICAgICB2YXIgZXJyID0gJ0Vycm9yIGNvZGUgJyArIHJlcS5zdGF0dXM7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGpyID0gSlNPTi5wYXJzZShyZXEucmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoanIuZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVyciA9IGpyLmVycm9yO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXgpIHt9O1xuXG4gICAgXHRcdCAgICBjYWxsYmFjayhlcnIsIG51bGwpO1xuICAgIFx0ICAgIH0gZWxzZSB7XG4gICAgICAgIFx0XHR2YXIgamYgPSBKU09OLnBhcnNlKHJlcS5yZXNwb25zZSk7XG4gICAgICAgIFx0XHR2YXIgZmVhdHVyZXMgPSBbXTtcbiAgICAgICAgXHRcdGZvciAodmFyIGZpID0gMDsgZmkgPCBqZi5sZW5ndGg7ICsrZmkpIHtcbiAgICAgICAgXHRcdCAgICB2YXIgaiA9IGpmW2ZpXTtcblxuICAgICAgICBcdFx0ICAgIHZhciBub3RlcyA9IFtdO1xuICAgICAgICBcdFx0ICAgIHZhciBmID0gbmV3IERBU0ZlYXR1cmUoKTtcbiAgICAgICAgXHRcdCAgICBmLnNlZ21lbnQgPSBjaHI7XG4gICAgICAgIFx0XHQgICAgZi5taW4gPSBqWydzdGFydCddIHwgMDtcbiAgICAgICAgXHRcdCAgICBmLm1heCA9IGpbJ2VuZCddIHwgMDtcbiAgICAgICAgXHRcdCAgICBmLnR5cGUgPSBqLmZlYXR1cmVfdHlwZSB8fCAndW5rbm93bic7XG4gICAgICAgIFx0XHQgICAgZi5pZCA9IGouSUQ7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGouUGFyZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZ3JwID0gbmV3IERBU0dyb3VwKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBncnAuaWQgPSBqLlBhcmVudDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGYuZ3JvdXBzID0gW2dycF07XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAoai5zdHJhbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqLnN0cmFuZCA8IDApIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYub3JpZW50YXRpb24gPSAnLSc7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChqLnN0cmFuZCA+IDApIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYub3JpZW50YXRpb24gPSAnKyc7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAoai5jb25zZXF1ZW5jZV90eXBlKVxuICAgICAgICAgICAgICAgICAgICAgICAgZi5tZXRob2QgPSBqLmNvbnNlcXVlbmNlX3R5cGU7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGouYWx0X2FsbGVsZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vdGVzLnB1c2goJ0FsbGVsZXM9JyArIGouYWx0X2FsbGVsZXMuam9pbignLycpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqLmFsdF9hbGxlbGVzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoai5hbHRfYWxsZWxlc1sxXS5sZW5ndGggIT0gai5hbHRfYWxsZWxlc1swXS5sZW5ndGggfHwgai5hbHRfYWxsZWxlc1sxXSA9PSAnLScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZi50eXBlID0gJ2luZGVsJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgXHRcdCAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5vdGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGYubm90ZXMgPSBub3RlcztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICBcdFx0ICAgIGZlYXR1cmVzLnB1c2goZik7XG4gICAgICAgIFx0XHR9XG4gICAgICAgIFx0XHRjYWxsYmFjayhudWxsLCBmZWF0dXJlcyk7XG4gICAgXHQgICAgfVxuICAgIFx0fVxuXHRcbiAgICB9O1xuICAgIFxuICAgIHRoaXNCLmJ1c3krKztcbiAgICB0aGlzQi5ub3RpZnlBY3Rpdml0eSgpO1xuXG4gICAgcmVxLm9wZW4oJ0dFVCcsIHVybCwgdHJ1ZSk7XG4gICAgcmVxLnJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICByZXEuc2VuZCgpO1xufVxuXG5FbnNlbWJsRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuY2FwYWJpbGl0aWVzID0gZnVuY3Rpb24oKSB7XG4gICAgY29uc3QgY2FwcyA9IHt9O1xuICAgIGlmICh0aGlzLnR5cGUgJiYgdGhpcy50eXBlLmluZGV4T2YoJ3RyYW5zY3JpcHQnKSA+PSAwKSB7XG4gICAgICAgIGNhcHMuc2VhcmNoID0gWydnZW5lJ107XG4gICAgfVxuICAgIHJldHVybiBjYXBzO1xufVxuXG5FbnNlbWJsRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuc2VhcmNoID0gZnVuY3Rpb24ocXVlcnksIGNhbGxiYWNrKSB7XG4gICAgY29uc3QgdXJsID0gYCR7dGhpcy5iYXNlfS9sb29rdXAvc3ltYm9sLyR7dGhpcy5zcGVjaWVzfS8ke3F1ZXJ5fT9jb250ZW50LXR5cGU9YXBwbGljYXRpb24vanNvbmA7XG4gICAgY29uc3QgcmVxID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgcmVxLm9ucmVhZHlzdGF0ZWNoYW5nZSA9ICgpID0+IHtcbiAgICAgICAgaWYgKHJlcS5yZWFkeVN0YXRlID09IDQpXG4gICAgICAgICAgICBpZiAocmVxLnN0YXR1cyA+PSAzMDAgfHwgcmVxLnN0YXR1cyA8IDIwMCkge1xuICAgICAgICAgICAgICAgIGxldCBlcnIgPSAnRXJyb3IgY29kZSAnICsgcmVxLnN0YXR1cztcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICB2YXIganIgPSBKU09OLnBhcnNlKHJlcS5yZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChqci5lcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXJyID0ganIuZXJyb3I7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGNhdGNoIChleCkge307XG5cbiAgICAgICAgICAgICAgICBpZiAocmVxLnN0YXR1cyA9PSA0MDApICAgIC8vIEUhIHJldHVybnMgYW4gZXJyb3IgaWYgdGhlIGxvb2t1cCBmYWlscy4gIFdobyBrbm93cz9cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKFtdKTtcbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsLCBlcnIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXNwID0gSlNPTi5wYXJzZShyZXEucmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IFtdO1xuXG4gICAgICAgICAgICAgICAgaWYgKHJlc3AgJiYgcmVzcC5zZXFfcmVnaW9uX25hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VnbWVudDogcmVzcC5zZXFfcmVnaW9uX25hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBtaW46IHJlc3Auc3RhcnQsXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXg6IHJlc3AuZW5kXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2socmVzdWx0KTtcbiAgICAgICAgICAgIH1cbiAgICB9O1xuXG4gICAgcmVxLm9wZW4oJ0dFVCcsIHVybCwgdHJ1ZSk7XG4gICAgcmVxLnJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICByZXEuc2VuZCgpO1xufVxuXG5kYWxsaWFuY2VfcmVnaXN0ZXJTb3VyY2VBZGFwdGVyRmFjdG9yeSgnZW5zZW1ibCcsIGZ1bmN0aW9uKHNvdXJjZSkge1xuICAgIHJldHVybiB7ZmVhdHVyZXM6IG5ldyBFbnNlbWJsRmVhdHVyZVNvdXJjZShzb3VyY2UpfTtcbn0pO1xuIiwiLyogLSotIG1vZGU6IGphdmFzY3JpcHQ7IGMtYmFzaWMtb2Zmc2V0OiA0OyBpbmRlbnQtdGFicy1tb2RlOiBuaWwgLSotICovXG5cbi8vIFxuLy8gRGFsbGlhbmNlIEdlbm9tZSBFeHBsb3JlclxuLy8gKGMpIFRob21hcyBEb3duIDIwMDYtMjAxNFxuLy9cbi8vIGV4cG9ydC1jb25maWcuanNcbi8vXG5cbmlmICh0eXBlb2YocmVxdWlyZSkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgdmFyIGJyb3dzZXIgPSByZXF1aXJlKCcuL2Nicm93c2VyJyk7XG4gICAgdmFyIEJyb3dzZXIgPSBicm93c2VyLkJyb3dzZXI7XG5cbiAgICB2YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XG4gICAgdmFyIHNoYWxsb3dDb3B5ID0gdXRpbHMuc2hhbGxvd0NvcHk7XG5cbiAgICB2YXIgc2hhMSA9IHJlcXVpcmUoJy4vc2hhMScpO1xuICAgIHZhciBoZXhfc2hhMSA9IHNoYTEuaGV4X3NoYTE7XG5cbiAgICB2YXIgZGFzID0gcmVxdWlyZSgnLi9kYXMnKTtcbiAgICB2YXIgY29weVN0eWxlc2hlZXQgPSBkYXMuY29weVN0eWxlc2hlZXQ7XG59XG5cbkJyb3dzZXIucHJvdG90eXBlLmV4cG9ydEZ1bGxDb25maWcgPSBmdW5jdGlvbihvcHRzKSB7XG4gICAgb3B0cyA9IG9wdHMgfHwge307XG5cbiAgICB2YXIgY29uZmlnID0ge1xuICAgICAgICBjaHI6IHRoaXMuY2hyLFxuICAgICAgICB2aWV3U3RhcnQ6IHRoaXMudmlld1N0YXJ0fDAsXG4gICAgICAgIHZpZXdFbmQ6IHRoaXMudmlld0VuZHwwLFxuICAgICAgICBjb29raWVLZXk6ICdkYWxsaWFuY2VfJyArIGhleF9zaGExKERhdGUubm93KCkpLFxuXG4gICAgICAgIGNvb3JkU3lzdGVtOiB0aGlzLmNvb3JkU3lzdGVtLFxuXG4gICAgICAgIHNvdXJjZXM6IHRoaXMuZXhwb3J0U291cmNlQ29uZmlnKCksXG5cbiAgICAgICAgY2hhaW5zOiB0aGlzLmV4cG9ydENoYWlucygpXG4gICAgfTtcblxuICAgIGlmICh0aGlzLnByZWZpeClcbiAgICAgICAgY29uZmlnLnByZWZpeCA9IHRoaXMucHJlZml4O1xuXG4gICAgcmV0dXJuIGNvbmZpZztcbn1cblxuQnJvd3Nlci5wcm90b3R5cGUuZXhwb3J0Q2hhaW5zID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGNjID0ge307XG4gICAgdmFyIGNzID0gdGhpcy5jaGFpbnMgfHwge307XG4gICAgZm9yICh2YXIgayBpbiBjcykge1xuICAgICAgICBjY1trXSA9IGNzW2tdLmV4cG9ydENvbmZpZygpO1xuICAgIH1cbiAgICByZXR1cm4gY2M7XG59XG5cbkJyb3dzZXIucHJvdG90eXBlLmV4cG9ydFNvdXJjZUNvbmZpZyA9IGZ1bmN0aW9uKG9wdHMpIHtcbiAgICBvcHRzID0gb3B0cyB8fCB7fTtcblxuICAgIHZhciBzb3VyY2VDb25maWcgPSBbXTtcbiAgICBmb3IgKHZhciB0aSA9IDA7IHRpIDwgdGhpcy50aWVycy5sZW5ndGg7ICsrdGkpIHtcbiAgICAgICAgdmFyIHRpZXIgPSB0aGlzLnRpZXJzW3RpXTtcbiAgICAgICAgdmFyIHNvdXJjZSA9IHNoYWxsb3dDb3B5KHRpZXIuZGFzU291cmNlKTtcblxuICAgICAgICBpZiAoc291cmNlLm5vUGVyc2lzdClcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuXG4gICAgICAgIHNvdXJjZS5jb29yZHMgPSB1bmRlZmluZWQ7XG4gICAgICAgIHNvdXJjZS5wcm9wcyA9IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKCFzb3VyY2UuZGlzYWJsZWQpXG4gICAgICAgICAgICBzb3VyY2UuZGlzYWJsZWQgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgaWYgKHRpZXIuY29uZmlnLnN0eWxlc2hlZXQpIHtcbiAgICAgICAgICAgIHNvdXJjZS5zdHlsZSA9IGNvcHlTdHlsZXNoZWV0KHRpZXIuY29uZmlnLnN0eWxlc2hlZXQpLnN0eWxlcztcbiAgICAgICAgICAgIHNvdXJjZS5zdHlsZXNoZWV0X3VyaSA9IHVuZGVmaW5lZDtcbiAgICAgICAgfSBlbHNlIGlmIChzb3VyY2Uuc3R5bGUpIHtcbiAgICAgICAgICAgIHNvdXJjZS5zdHlsZSA9IGNvcHlTdHlsZXNoZWV0KHtzdHlsZXM6IHNvdXJjZS5zdHlsZX0pLnN0eWxlcztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0eXBlb2YodGllci5jb25maWcubmFtZSkgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBzb3VyY2UubmFtZSA9IHRpZXIuY29uZmlnLm5hbWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGllci5jb25maWcuaGVpZ2h0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHNvdXJjZS5mb3JjZUhlaWdodCA9IHRpZXIuY29uZmlnLmhlaWdodDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGllci5jb25maWcuZm9yY2VNaW4gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgc291cmNlLmZvcmNlTWluID0gdGllci5jb25maWcuZm9yY2VNaW47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRpZXIuY29uZmlnLmZvcmNlTWluRHluYW1pYylcbiAgICAgICAgICAgIHNvdXJjZS5mb3JjZU1pbkR5bmFtaWMgPSB0aWVyLmNvbmZpZy5mb3JjZU1pbkR5bmFtaWM7XG4gICAgICAgIGlmICh0aWVyLmNvbmZpZy5mb3JjZU1heCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBzb3VyY2UuZm9yY2VNYXggPSB0aWVyLmNvbmZpZy5mb3JjZU1heDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGllci5jb25maWcuYnVtcGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHNvdXJjZS5idW1wZWQgPSB0aWVyLmNvbmZpZy5idW1wZWQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRpZXIuY29uZmlnLmZvcmNlTWF4RHluYW1pYylcbiAgICAgICAgICAgIHNvdXJjZS5mb3JjZU1heER5bmFtaWMgPSB0aWVyLmNvbmZpZy5mb3JjZU1heER5bmFtaWM7XG5cbiAgICAgICAgc291cmNlQ29uZmlnLnB1c2goc291cmNlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gc291cmNlQ29uZmlnO1xufVxuXG5Ccm93c2VyLnByb3RvdHlwZS5leHBvcnRQYWdlVGVtcGxhdGUgPSBmdW5jdGlvbihvcHRzKSB7XG4gICAgb3B0cyA9IG9wdHMgfHwge307XG4gICAgdmFyIHRlbXBsYXRlID0gJzxodG1sPlxcbicgK1xuICAgICAgICAgICAgICAgICAgICcgIDxoZWFkPlxcbicgK1xuICAgICAgICAgICAgICAgICAgICcgICAgPHNjcmlwdCBsYW5ndWFnZT1cImphdmFzY3JpcHRcIiBzcmM9XCInICsgdGhpcy5yZXNvbHZlVVJMKCckJGRhbGxpYW5jZS1jb21waWxlZC5qcycpICsgJ1wiPjwvc2NyaXB0PlxcbicgK1xuICAgICAgICAgICAgICAgICAgICcgICAgPHNjcmlwdCBsYW5ndWFnZT1cImphdmFzY3JpcHRcIj5cXG4nICtcbiAgICAgICAgICAgICAgICAgICAnICAgICAgdmFyIGRhbGxpYW5jZV9icm93c2VyID0gbmV3IEJyb3dzZXIoJyArIEpTT04uc3RyaW5naWZ5KHRoaXMuZXhwb3J0RnVsbENvbmZpZyhvcHRzKSwgbnVsbCwgMikgKyAnKTtcXG4nICtcbiAgICAgICAgICAgICAgICAgICAnICAgIDwvc2NyaXB0PlxcbicgKyAgXG4gICAgICAgICAgICAgICAgICAgJyAgPC9oZWFkPlxcbicgK1xuICAgICAgICAgICAgICAgICAgICcgIDxib2R5PlxcbicgK1xuICAgICAgICAgICAgICAgICAgICcgICAgPGRpdiBpZD1cInN2Z0hvbGRlclwiPkRhbGxpYW5jZSBnb2VzIGhlcmU8L2Rpdj5cXG4nICtcbiAgICAgICAgICAgICAgICAgICAnICA8L2JvZHk+XFxuJyArXG4gICAgICAgICAgICAgICAgICAgJzxodG1sPlxcbic7XG5cbiAgICByZXR1cm4gdGVtcGxhdGU7XG59IiwiLyogLSotIG1vZGU6IGphdmFzY3JpcHQ7IGMtYmFzaWMtb2Zmc2V0OiA0OyBpbmRlbnQtdGFicy1tb2RlOiBuaWwgLSotICovXG5cbi8vIFxuLy8gRGFsbGlhbmNlIEdlbm9tZSBFeHBsb3JlclxuLy8gKGMpIFRob21hcyBEb3duIDIwMDYtMjAxNFxuLy9cbi8vIGV4cG9ydC1pbWFnZS5qc1xuLy9cblxuXCJ1c2Ugc3RyaWN0XCI7XG5cbmlmICh0eXBlb2YocmVxdWlyZSkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgdmFyIGJyb3dzZXIgPSByZXF1aXJlKCcuL2Nicm93c2VyJyk7XG4gICAgdmFyIEJyb3dzZXIgPSBicm93c2VyLkJyb3dzZXI7XG5cbiAgICB2YXIgZyA9IHJlcXVpcmUoJy4vZ2x5cGhzJyk7XG4gICAgdmFyIE92ZXJsYXlMYWJlbENhbnZhcyA9IGcuT3ZlcmxheUxhYmVsQ2FudmFzO1xuXG4gICAgdmFyIG5mID0gcmVxdWlyZSgnLi9udW1mb3JtYXRzJyk7XG4gICAgdmFyIGZvcm1hdFF1YW50TGFiZWwgPSBuZi5mb3JtYXRRdWFudExhYmVsO1xuICAgIHZhciBmb3JtYXRMb25nSW50ID0gbmYuZm9ybWF0TG9uZ0ludDtcblxuICAgIHZhciBWRVJTSU9OID0gcmVxdWlyZSgnLi92ZXJzaW9uJyk7XG5cbiAgICB2YXIgZHJhd1NlcVRpZXJHQyA9IHJlcXVpcmUoJy4vc2VxdWVuY2UtZHJhdycpLmRyYXdTZXFUaWVyR0M7XG59XG5cbmZ1bmN0aW9uIGZpbGxUZXh0UmlnaHRKdXN0aWZpZWQoZywgdGV4dCwgeCwgeSkge1xuICAgIGcuZmlsbFRleHQodGV4dCwgeCAtIGcubWVhc3VyZVRleHQodGV4dCkud2lkdGgsIHkpO1xufVxuXG5Ccm93c2VyLnByb3RvdHlwZS5leHBvcnRJbWFnZSA9IGZ1bmN0aW9uKG9wdHMpIHtcbiAgICBvcHRzID0gb3B0cyB8fCB7fTtcblxuICAgIHZhciBmcHcgPSBvcHRzLndpZHRoIHx8IHRoaXMuZmVhdHVyZVBhbmVsV2lkdGg7XG4gICAgdmFyIHBhZGRpbmcgPSAzO1xuICAgIHZhciB5cG9zID0gMDtcbiAgICBpZiAob3B0cy5iYW5uZXIgfHwgb3B0cy5yZWdpb24pIHtcbiAgICAgICAgeXBvcyA9IDQwO1xuICAgIH1cblxuICAgIHZhciBiYWNrdXBGUFcgPSB0aGlzLmZlYXR1cmVQYW5lbFdpZHRoO1xuICAgIHZhciBiYWNrdXBTY2FsZSA9IHRoaXMuc2NhbGU7XG4gICAgdGhpcy5mZWF0dXJlUGFuZWxXaWR0aCA9IGZwdztcbiAgICB0aGlzLnNjYWxlID0gdGhpcy5mZWF0dXJlUGFuZWxXaWR0aCAvICh0aGlzLnZpZXdFbmQgLSB0aGlzLnZpZXdTdGFydCk7XG4gICAgXG4gICAgdmFyIHRvdEhlaWdodCA9IHlwb3M7XG4gICAgZm9yICh2YXIgdGkgPSAwOyB0aSA8IHRoaXMudGllcnMubGVuZ3RoOyArK3RpKSB7XG4gICAgICAgIGlmICh0aSA+IDApXG4gICAgICAgICAgICB0b3RIZWlnaHQgKz0gcGFkZGluZztcbiAgICAgICAgdmFyIHRpZXIgPSB0aGlzLnRpZXJzW3RpXTtcblxuICAgICAgICB0aWVyLmJhY2t1cFN1YnRpZXJzID0gdGllci5zdWJ0aWVycztcbiAgICAgICAgdGllci5iYWNrdXBPcmlnaW5IYXh4ID0gdGllci5vcmlnaW5IYXh4O1xuICAgICAgICB0aWVyLmJhY2t1cExheW91dEhlaWdodCA9IHRpZXIubGF5b3V0SGVpZ2h0O1xuXG4gICAgICAgIGlmICh0aWVyLnN1YnRpZXJzKSB7XG4gICAgICAgICAgICBjb25zdCByZW5kZXJlciA9IHRoaXMuZ2V0VGllclJlbmRlcmVyKHRpZXIpO1xuICAgICAgICAgICAgaWYgKHJlbmRlcmVyICYmIHJlbmRlcmVyLnByZXBhcmVTdWJ0aWVycykge1xuICAgICAgICAgICAgICAgIHJlbmRlcmVyLnByZXBhcmVTdWJ0aWVycyh0aWVyLCB0aWVyLnZpZXdwb3J0LmdldENvbnRleHQoJzJkJykpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodGllci5zdWJ0aWVycykge1xuICAgICAgICAgICAgICAgIHZhciBsaCA9IHRpZXIucGFkZGluZztcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBzID0gMDsgcyA8IHRpZXIuc3VidGllcnMubGVuZ3RoOyArK3MpIHtcbiAgICAgICAgICAgICAgICAgICAgbGggPSBsaCArIHRpZXIuc3VidGllcnNbc10uaGVpZ2h0ICsgdGllci5wYWRkaW5nO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsaCArPSA2XG4gICAgICAgICAgICAgICAgdGllci5sYXlvdXRIZWlnaHQgPSBNYXRoLm1heChsaCwgdGhpcy5taW5UaWVySGVpZ2h0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aWVyLmxheW91dEhlaWdodCAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgIHRvdEhlaWdodCArPSB0aWVyLmxheW91dEhlaWdodDtcbiAgICB9XG4gICAgdmFyIG11bHQgPSBvcHRzLnJlc29sdXRpb25NdWx0aXBsaWVyIHx8IDEuMDtcbiAgICB2YXIgbWFyZ2luID0gMjAwO1xuXG4gICAgdmFyIGN3ID0gKChmcHcgKyBtYXJnaW4pICogbXVsdCl8MDtcbiAgICB2YXIgY2ggPSAodG90SGVpZ2h0ICogbXVsdCl8MDtcbiAgICB2YXIgYyA9IG1ha2VFbGVtZW50KCdjYW52YXMnLCBudWxsLCB7d2lkdGg6IGN3LCBoZWlnaHQ6IGNofSk7XG4gICAgdmFyIGcgPSBjLmdldENvbnRleHQoJzJkJyk7XG4gICAgZy5maWxsU3R5bGUgPSAnd2hpdGUnO1xuICAgIGcuZmlsbFJlY3QoMCwgMCwgY3csIGNoKTtcblxuICAgIGcuc2NhbGUobXVsdCwgbXVsdCk7XG5cbiAgICBpZiAob3B0cy5yZWdpb24pIHtcbiAgICAgICAgZy5zYXZlKCk7XG4gICAgICAgIGcuZmlsbFN0eWxlID0gJ2JsYWNrJztcbiAgICAgICAgZy5mb250ID0gJzEycHQgc2Fucy1zZXJpZic7XG4gICAgICAgIGcuZmlsbFRleHQoXG4gICAgICAgICAgICB0aGlzLmNociArICc6JyArIGZvcm1hdExvbmdJbnQodGhpcy52aWV3U3RhcnQpICsgJy4uJyArIGZvcm1hdExvbmdJbnQodGhpcy52aWV3RW5kKSxcbiAgICAgICAgICAgIG1hcmdpbiArIDEwMCxcbiAgICAgICAgICAgIDI4XG4gICAgICAgICk7XG4gICAgICAgIGcucmVzdG9yZSgpO1xuICAgIH1cblxuICAgIGlmIChvcHRzLmJhbm5lcikge1xuICAgICAgICBnLnNhdmUoKTtcbiAgICAgICAgZy5maWxsU3R5bGUgPSAnYmxhY2snO1xuICAgICAgICBnLmZvbnQgPSAnMTJwdCBzYW5zLXNlcmlmJztcbiAgICAgICAgZmlsbFRleHRSaWdodEp1c3RpZmllZChnLCAnR3JhcGhpY3MgZnJvbSBCaW9kYWxsaWFuY2UgJyArIFZFUlNJT04sIG1hcmdpbiArIGZwdyAtIDEwMCwgMjgpO1xuICAgICAgICBnLnJlc3RvcmUoKTtcbiAgICB9XG5cbiAgICBnLmZvbnQgPSAnMTBweCBzYW5zLXNlcmlmJztcbiAgICBcbiAgICBmb3IgKHZhciB0aSA9IDA7IHRpIDwgdGhpcy50aWVycy5sZW5ndGg7ICsrdGkpIHtcbiAgICAgICAgdmFyIHRpZXIgPSB0aGlzLnRpZXJzW3RpXTtcbiAgICAgICAgdmFyIG9mZnNldCA9ICgodGllci5nbHlwaENhY2hlT3JpZ2luIC0gdGhpcy52aWV3U3RhcnQpKnRoaXMuc2NhbGUpO1xuXG4gICAgICAgIHZhciBvYyA9IG5ldyBPdmVybGF5TGFiZWxDYW52YXMoKTtcbiAgICAgICAgZy5zYXZlKCk7ICAgICAgIC8vIDFcbiAgICAgICAgZy50cmFuc2xhdGUoMCwgeXBvcyk7XG5cbiAgICAgICAgZy5zYXZlKCk7ICAgICAgIC8vIDJcbiAgICAgICAgZy5iZWdpblBhdGgoKTtcbiAgICAgICAgZy5tb3ZlVG8obWFyZ2luLCAwKTtcbiAgICAgICAgZy5saW5lVG8obWFyZ2luICsgZnB3LCAwKTtcbiAgICAgICAgZy5saW5lVG8obWFyZ2luICsgZnB3LCB0aWVyLmxheW91dEhlaWdodCk7XG4gICAgICAgIGcubGluZVRvKG1hcmdpbiwgdGllci5sYXlvdXRIZWlnaHQpO1xuICAgICAgICBnLmNsb3NlUGF0aCgpO1xuICAgICAgICBnLmNsaXAoKTtcbiAgICAgICAgZy50cmFuc2xhdGUobWFyZ2luLCAwKTtcblxuICAgICAgICBnLnNhdmUoKTsgICAgICAvLyAzXG4gICAgICAgIGcudHJhbnNsYXRlKG9mZnNldCwgMCk7XG4gICAgICAgIGlmICh0aWVyLnN1YnRpZXJzKSB7XG4gICAgICAgICAgICB0aWVyLnBhaW50VG9Db250ZXh0KGcsIG9jLCBvZmZzZXQgKyAxMDAwKTtcbiAgICAgICAgICAgIFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZHJhd1NlcVRpZXJHQyh0aWVyLCB0aWVyLmN1cnJlbnRTZXF1ZW5jZSwgZyk7XG4gICAgICAgIH1cbiAgICAgICAgZy5yZXN0b3JlKCk7ICAgLy8gMlxuICAgICAgICBcbiAgICAgICAgZy5zYXZlKCkgICAgICAgLy8gM1xuICAgICAgICBnLnRyYW5zbGF0ZShvZmZzZXQsIDApO1xuICAgICAgICBvYy5kcmF3KGcsIC1vZmZzZXQsIGZwdyAtIG9mZnNldCk7XG4gICAgICAgIGcucmVzdG9yZSgpOyAgIC8vIDJcbiAgICAgICAgZy5yZXN0b3JlKCk7ICAgLy8gMVxuXG4gICAgICAgIHZhciBoYXNRdWFudCA9IGZhbHNlO1xuICAgICAgICB2YXIgcG9zID0gMDtcbiAgICAgICAgdmFyIHN1YnRpZXJzID0gdGllci5zdWJ0aWVycyB8fCBbXTtcbiAgICAgICAgZm9yICh2YXIgc3RpID0gMDsgc3RpIDwgc3VidGllcnMubGVuZ3RoOyArK3N0aSkge1xuICAgICAgICAgICAgdmFyIHN1YnRpZXIgPSBzdWJ0aWVyc1tzdGldO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChzdWJ0aWVyLnF1YW50KSB7XG4gICAgICAgICAgICAgICAgaGFzUXVhbnQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHZhciBxID0gc3VidGllci5xdWFudDtcbiAgICAgICAgICAgICAgICB2YXIgaCA9IHN1YnRpZXIuaGVpZ2h0O1xuXG4gICAgICAgICAgICAgICAgdmFyIG51bVRpY3MgPSAyO1xuICAgICAgICAgICAgICAgIGlmIChoID4gNDApIHtcbiAgICAgICAgICAgICAgICAgICAgbnVtVGljcyA9IDEgKyAoKGgvMjApIHwgMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciB0aWNTcGFjaW5nID0gaCAvIChudW1UaWNzIC0gMSk7XG4gICAgICAgICAgICAgICAgdmFyIHRpY0ludGVydmFsID0gKHEubWF4IC0gcS5taW4pIC8gKG51bVRpY3MgLSAxKTtcblxuICAgICAgICAgICAgICAgIGcuYmVnaW5QYXRoKCk7XG4gICAgICAgICAgICAgICAgZy5tb3ZlVG8obWFyZ2luICsgNSwgcG9zKTtcbiAgICAgICAgICAgICAgICBnLmxpbmVUbyhtYXJnaW4sIHBvcyk7XG4gICAgICAgICAgICAgICAgZy5saW5lVG8obWFyZ2luLCBwb3MgKyBzdWJ0aWVyLmhlaWdodCk7XG4gICAgICAgICAgICAgICAgZy5saW5lVG8obWFyZ2luICsgNSwgcG9zICsgc3VidGllci5oZWlnaHQpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIHQgPSAxOyB0IDwgbnVtVGljcy0xOyArK3QpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHR5ID0gdCp0aWNTcGFjaW5nO1xuICAgICAgICAgICAgICAgICAgICBnLm1vdmVUbyhtYXJnaW4sIHBvcyArIHR5KTtcbiAgICAgICAgICAgICAgICAgICAgZy5saW5lVG8obWFyZ2luKzMsIHBvcyArIHR5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZy5zdHJva2VTdHlsZSA9ICdibGFjayc7XG4gICAgICAgICAgICAgICAgZy5zdHJva2VXaWR0aCA9IDI7XG4gICAgICAgICAgICAgICAgZy5zdHJva2UoKTtcblxuICAgICAgICAgICAgICAgIGcuZmlsbFN0eWxlID0gJ2JsYWNrJztcbiAgICAgICAgICAgICAgICBmaWxsVGV4dFJpZ2h0SnVzdGlmaWVkKGcsIGZvcm1hdFF1YW50TGFiZWwocS5tYXgpLCBtYXJnaW4gLSAzLCBwb3MgKyA3KTtcbiAgICAgICAgICAgICAgICBmaWxsVGV4dFJpZ2h0SnVzdGlmaWVkKGcsIGZvcm1hdFF1YW50TGFiZWwocS5taW4pLCBtYXJnaW4gLSAzLCBwb3MgKyBzdWJ0aWVyLmhlaWdodCk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgdCA9IDE7IHQgPCBudW1UaWNzLTE7ICsrdCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdHkgPSB0KnRpY1NwYWNpbmc7XG4gICAgICAgICAgICAgICAgICAgIGZpbGxUZXh0UmlnaHRKdXN0aWZpZWQoZywgZm9ybWF0UXVhbnRMYWJlbCgoMS4wKnEubWF4KSAtICh0KnRpY0ludGVydmFsKSksIG1hcmdpbiAtIDMsIHBvcyArIHR5ICsgMyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBwb3MgKz0gc3VidGllci5oZWlnaHQgKyBwYWRkaW5nO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGxhYmVsTmFtZTtcbiAgICAgICAgaWYgKHR5cGVvZiB0aWVyLmNvbmZpZy5uYW1lID09PSAnc3RyaW5nJylcbiAgICAgICAgICAgIGxhYmVsTmFtZSA9IHRpZXIuY29uZmlnLm5hbWU7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGxhYmVsTmFtZSA9IHRpZXIuZGFzU291cmNlLm5hbWU7XG4gICAgICAgIHZhciBsYWJlbFdpZHRoID0gZy5tZWFzdXJlVGV4dChsYWJlbE5hbWUpLndpZHRoO1xuICAgICAgICBnLmZpbGxTdHlsZSA9ICdibGFjayc7XG4gICAgICAgIGcuZmlsbFRleHQobGFiZWxOYW1lLCBtYXJnaW4gLSAoaGFzUXVhbnQgPyAyOCA6IDEyKSAtIGxhYmVsV2lkdGgsICh0aWVyLmxheW91dEhlaWdodCArIDMpIC8gMik7XG5cbiAgICAgICAgZy5yZXN0b3JlKCk7IC8vIDBcblxuICAgICAgICB5cG9zICs9IHRpZXIubGF5b3V0SGVpZ2h0ICsgcGFkZGluZztcblxuICAgICAgICB0aWVyLnN1YnRpZXJzID0gdGllci5iYWNrdXBTdWJ0aWVycztcbiAgICAgICAgdGllci5vcmlnaW5IYXh4ID0gdGllci5iYWNrdXBPcmlnaW5IYXh4O1xuICAgICAgICB0aWVyLmxheW91dEhlaWdodCA9IHRpZXIuYmFja3VwTGF5b3V0SGVpZ2h0O1xuICAgIH1cblxuICAgIGlmIChvcHRzLmhpZ2hsaWdodHMpIHtcbiAgICAgICAgZy5zYXZlKCk7XG5cbiAgICAgICAgZy5iZWdpblBhdGgoKTtcbiAgICAgICAgZy5tb3ZlVG8obWFyZ2luLCAwKTtcbiAgICAgICAgZy5saW5lVG8obWFyZ2luICsgZnB3LCAwKTtcbiAgICAgICAgZy5saW5lVG8obWFyZ2luICsgZnB3LCB5cG9zKTtcbiAgICAgICAgZy5saW5lVG8obWFyZ2luLCB5cG9zKTtcbiAgICAgICAgZy5jbG9zZVBhdGgoKTtcbiAgICAgICAgZy5jbGlwKCk7XG5cbiAgICAgICAgZy50cmFuc2xhdGUobWFyZ2luICsgb2Zmc2V0LCAwKTtcbiAgICAgICAgdmFyIG9yaWdpbiA9IHRoaXMudmlld1N0YXJ0O1xuICAgICAgICB2YXIgdmlzU3RhcnQgPSB0aGlzLnZpZXdTdGFydDtcbiAgICAgICAgdmFyIHZpc0VuZCA9IHRoaXMudmlld0VuZDtcblxuICAgICAgICBmb3IgKHZhciBoaSA9IDA7IGhpIDwgdGhpcy5oaWdobGlnaHRzLmxlbmd0aDsgKytoaSkge1xuICAgICAgICAgICAgdmFyIGggPSB0aGlzLmhpZ2hsaWdodHNbaGldO1xuICAgICAgICAgICAgaWYgKCgoaC5jaHIgPT09IHRoaXMuY2hyKSB8fCAoaC5jaHIgPT09ICgnY2hyJyArIHRoaXMuY2hyKSkpICYmIGgubWluIDwgdmlzRW5kICYmIGgubWF4ID4gdmlzU3RhcnQpIHtcbiAgICAgICAgICAgICAgICBnLmdsb2JhbEFscGhhID0gdGhpcy5kZWZhdWx0SGlnaGxpZ2h0QWxwaGE7XG4gICAgICAgICAgICAgICAgZy5maWxsU3R5bGUgPSB0aGlzLmRlZmF1bHRIaWdobGlnaHRGaWxsO1xuICAgICAgICAgICAgICAgIGcuZmlsbFJlY3QoKGgubWluIC0gb3JpZ2luKSAqIHRoaXMuc2NhbGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgKGgubWF4IC0gaC5taW4pICogdGhpcy5zY2FsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHlwb3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IFxuICAgICAgICBnLnJlc3RvcmUoKTtcbiAgICB9XG5cbiAgICB2YXIgcnVsZXJQb3MgPSAtMTsgXG4gICAgaWYgKG9wdHMucnVsZXIgPT0gJ2NlbnRlcicpIHtcbiAgICAgICAgcnVsZXJQb3MgPSBtYXJnaW4gKyAoKHRoaXMudmlld0VuZCAtIHRoaXMudmlld1N0YXJ0ICsgMSkqdGhpcy5zY2FsZSkgLyAyO1xuICAgIH0gZWxzZSBpZiAob3B0cy5ydWxlciA9PSAnbGVmdCcpIHtcbiAgICAgICAgcnVsZXJQb3MgPSBtYXJnaW47XG4gICAgfSBlbHNlIGlmIChvcHRzLnJ1bGVyID09ICdyaWdodCcpIHtcbiAgICAgICAgcnVsZXJQb3MgPSBtYXJnaW4gKyAoKHRoaXMudmlld0VuZCAtIHRoaXMudmlld1N0YXJ0ICsgMSkqdGhpcy5zY2FsZSk7XG4gICAgfVxuICAgIGlmIChydWxlclBvcyA+PSAwKSB7XG4gICAgICAgIGcuc3Ryb2tlU3R5bGUgPSAnYmx1ZSc7XG4gICAgICAgIGcuYmVnaW5QYXRoKCk7XG4gICAgICAgIGcubW92ZVRvKHJ1bGVyUG9zLCAwKTtcbiAgICAgICAgZy5saW5lVG8ocnVsZXJQb3MsIHlwb3MpO1xuICAgICAgICBnLnN0cm9rZSgpO1xuICAgIH1cblxuICAgIHRoaXMuZmVhdHVyZVBhbmVsV2lkdGggPSBiYWNrdXBGUFc7XG4gICAgdGhpcy5zY2FsZSA9IGJhY2t1cFNjYWxlO1xuXG4gICAgcmV0dXJuIGMudG9EYXRhVVJMKCdpbWFnZS9wbmcnKTtcbn1cbiIsIi8qIC0qLSBtb2RlOiBqYXZhc2NyaXB0OyBjLWJhc2ljLW9mZnNldDogNDsgaW5kZW50LXRhYnMtbW9kZTogbmlsIC0qLSAqL1xuXG4vLyBcbi8vIERhbGxpYW5jZSBHZW5vbWUgRXhwbG9yZXJcbi8vIChjKSBUaG9tYXMgRG93biAyMDA2LTIwMTRcbi8vXG4vLyBleHBvcnQtdWkuanNcbi8vXG5cbmlmICh0eXBlb2YocmVxdWlyZSkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgdmFyIGJyb3dzZXIgPSByZXF1aXJlKCcuL2Nicm93c2VyJyk7XG4gICAgdmFyIEJyb3dzZXIgPSBicm93c2VyLkJyb3dzZXI7XG5cbiAgICB2YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XG4gICAgdmFyIG1ha2VFbGVtZW50ID0gdXRpbHMubWFrZUVsZW1lbnQ7XG4gICAgdmFyIHJlbW92ZUNoaWxkcmVuID0gdXRpbHMucmVtb3ZlQ2hpbGRyZW47XG59XG5cbkJyb3dzZXIucHJvdG90eXBlLm9wZW5FeHBvcnRQYW5lbCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBiID0gdGhpcztcbiAgICBpZiAodGhpcy51aU1vZGUgPT09ICdleHBvcnQnKSB7XG4gICAgICAgIHRoaXMuaGlkZVRvb2xQYW5lbCgpO1xuICAgICAgICB0aGlzLnNldFVpTW9kZSgnbm9uZScpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBleHBvcnRGb3JtID0gbWFrZUVsZW1lbnQoJ2RpdicsIG51bGwsIHtjbGFzc05hbWU6ICdleHBvcnQtZm9ybSd9KTtcbiAgICAgICAgdmFyIGV4cG9ydFNlbGVjdCA9IG1ha2VFbGVtZW50KCdzZWxlY3QnKTtcbiAgICAgICAgZXhwb3J0U2VsZWN0LmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCdvcHRpb24nLCAnU1ZHJywge3ZhbHVlOiAnc3ZnJ30pKTtcbiAgICAgICAgZXhwb3J0U2VsZWN0LmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCdvcHRpb24nLCAnSW1hZ2UnLCB7dmFsdWU6ICdwbmcnfSkpO1xuICAgICAgICBleHBvcnRTZWxlY3QuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ29wdGlvbicsICdEYWxsaWFuY2UgY29uZmlnJywge3ZhbHVlOiAnY29uZmlnJ30pKTtcbiAgICAgICAgZXhwb3J0U2VsZWN0LmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCdvcHRpb24nLCAnRGFsbGlhbmNlIHNvdXJjZXMnLCB7dmFsdWU6ICdzb3VyY2VzJ30pKTtcbiAgICAgICAgZXhwb3J0U2VsZWN0LmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCdvcHRpb24nLCAnRGFsbGlhbmNlIHBhZ2UnLCB7dmFsdWU6ICdwYWdlJ30pKTtcbiAgICAgICAgZXhwb3J0U2VsZWN0LnZhbHVlID0gJ3N2Zyc7XG5cbiAgICAgICAgZXhwb3J0U2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgICAgICByZW1vdmVDaGlsZHJlbihleHBvcnRDb250ZW50KTtcbiAgICAgICAgICAgIHNldHVwRU9UKCk7XG4gICAgICAgIH0sIGZhbHNlKTtcbiAgICAgICAgZXhwb3J0Rm9ybS5hcHBlbmRDaGlsZChtYWtlRWxlbWVudCgncCcsIFsnRXhwb3J0IGFzOiAnLCBleHBvcnRTZWxlY3RdKSk7XG5cbiAgICAgICAgdmFyIGV4cG9ydEhpZ2hsaWdodHNUb2dnbGUgPSBtYWtlRWxlbWVudCgnaW5wdXQnLCBudWxsLCB7dHlwZTogJ2NoZWNrYm94JywgY2hlY2tlZDogdGhpcy5leHBvcnRIaWdobGlnaHRzfSk7XG4gICAgICAgIGV4cG9ydEhpZ2hsaWdodHNUb2dnbGUuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZnVuY3Rpb24oZXYpIHtcbiAgICAgICAgICAgIGIuZXhwb3J0SGlnaGxpZ2h0cyA9IGV4cG9ydEhpZ2hsaWdodHNUb2dnbGUuY2hlY2tlZDtcbiAgICAgICAgICAgIGIuc3RvcmVTdGF0dXMoKTtcbiAgICAgICAgfSwgZmFsc2UpO1xuICAgICAgICB2YXIgZXhwb3J0UnVsZXJUb2dnbGUgPSBtYWtlRWxlbWVudCgnaW5wdXQnLCBudWxsLCB7dHlwZTogJ2NoZWNrYm94JywgY2hlY2tlZDogdGhpcy5leHBvcnRSdWxlcn0pO1xuICAgICAgICBleHBvcnRSdWxlclRvZ2dsZS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbihldikge1xuICAgICAgICAgICAgYi5leHBvcnRSdWxlciA9IGV4cG9ydFJ1bGVyVG9nZ2xlLmNoZWNrZWQ7XG4gICAgICAgICAgICBiLnN0b3JlU3RhdHVzKCk7XG4gICAgICAgIH0sIGZhbHNlKTtcbiAgICAgICAgdmFyIGV4cG9ydFJlZ2lvblRvZ2dsZSA9IG1ha2VFbGVtZW50KCdpbnB1dCcsIG51bGwsIHt0eXBlOiAnY2hlY2tib3gnLCBjaGVja2VkOiB0aGlzLmV4cG9ydFJlZ2lvbn0pO1xuICAgICAgICBleHBvcnRSZWdpb25Ub2dnbGUuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZnVuY3Rpb24oZXYpIHtcbiAgICAgICAgICAgIGIuZXhwb3J0UmVnaW9uID0gZXhwb3J0UmVnaW9uVG9nZ2xlLmNoZWNrZWQ7XG4gICAgICAgICAgICBiLnN0b3JlU3RhdHVzKCk7XG4gICAgICAgIH0sIGZhbHNlKTtcbiAgICAgICAgdmFyIGV4cG9ydEJhbm5lclRvZ2dsZSA9IG1ha2VFbGVtZW50KCdpbnB1dCcsIG51bGwsIHt0eXBlOiAnY2hlY2tib3gnLCBjaGVja2VkOiB0aGlzLmV4cG9ydEJhbm5lcn0pO1xuICAgICAgICBleHBvcnRCYW5uZXJUb2dnbGUuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZnVuY3Rpb24oZXYpIHtcbiAgICAgICAgICAgIGIuZXhwb3J0QmFubmVyID0gZXhwb3J0QmFubmVyVG9nZ2xlLmNoZWNrZWQ7XG4gICAgICAgICAgICBiLnN0b3JlU3RhdHVzKCk7XG4gICAgICAgIH0sIGZhbHNlKTtcbiAgICAgICAgdmFyIGV4cG9ydFNjYWxlID0gbWFrZUVsZW1lbnQoJ2lucHV0JywgbnVsbCwge3R5cGU6ICd0ZXh0JywgdmFsdWU6ICcxLjAnfSk7XG4gICAgICAgIHZhciBleHBvcnRXaWR0aCA9IG1ha2VFbGVtZW50KCdpbnB1dCcsIG51bGwsIHt0eXBlOiAndGV4dCcsIHZhbHVlOiAnODAwJ30pO1xuXG4gICAgICAgIHZhciBleHBvcnRCdXR0b24gPSBtYWtlRWxlbWVudCgnYnV0dG9uJywgJ0V4cG9ydCcsIHtjbGFzc05hbWU6ICdidG4gYnRuLXByaW1hcnknfSk7XG4gICAgICAgIGV4cG9ydEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgICAgICByZW1vdmVDaGlsZHJlbihleHBvcnRDb250ZW50KTtcblxuICAgICAgICAgICAgdmFyIGJsb2JVUkw7XG4gICAgICAgICAgICB2YXIgbm90ZSwgdHlwZSwgbmFtZTtcbiAgICAgICAgICAgIGlmIChleHBvcnRTZWxlY3QudmFsdWUgPT09ICdzdmcnKSB7XG4gICAgICAgICAgICAgICAgYmxvYlVSTCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYi5tYWtlU1ZHKHtoaWdobGlnaHRzOiBleHBvcnRIaWdobGlnaHRzVG9nZ2xlLmNoZWNrZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYW5uZXI6IGIuZXhwb3J0QmFubmVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVnaW9uOiBiLmV4cG9ydFJlZ2lvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bGVyOiBleHBvcnRSdWxlclRvZ2dsZS5jaGVja2VkID8gYi5ydWxlckxvY2F0aW9uIDogJ25vbmUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IHBhcnNlSW50KGV4cG9ydFdpZHRoLnZhbHVlKSB8fCA4MDB9KSk7XG4gICAgICAgICAgICAgICAgbm90ZSA9ICdTVkcnO1xuICAgICAgICAgICAgICAgIHR5cGUgPSAnaW1hZ2Uvc3ZnJztcbiAgICAgICAgICAgICAgICBuYW1lID0gJ2RhbGxpYW5jZS12aWV3LnN2Zyc7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV4cG9ydFNlbGVjdC52YWx1ZSA9PT0gJ3BuZycpIHtcbiAgICAgICAgICAgICAgICB2YXIgbXVsdCA9IHBhcnNlRmxvYXQoZXhwb3J0U2NhbGUudmFsdWUpO1xuICAgICAgICAgICAgICAgIGlmIChtdWx0IDwgMC4xIHx8IG11bHQgPiAxMCkge1xuICAgICAgICAgICAgICAgICAgICBhbGVydCgnYmFkIHNjYWxlICcgKyBtdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGJsb2JVUkwgPSBiLmV4cG9ydEltYWdlKHtoaWdobGlnaHRzOiBleHBvcnRIaWdobGlnaHRzVG9nZ2xlLmNoZWNrZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhbm5lcjogYi5leHBvcnRCYW5uZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZ2lvbjogYi5leHBvcnRSZWdpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bGVyOiBleHBvcnRSdWxlclRvZ2dsZS5jaGVja2VkID8gYi5ydWxlckxvY2F0aW9uIDogJ25vbmUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHV0aW9uTXVsdGlwbGllcjogbXVsdCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IHBhcnNlSW50KGV4cG9ydFdpZHRoLnZhbHVlKSB8fCA4MDB9KTtcbiAgICAgICAgICAgICAgICBub3RlID0gJ0ltYWdlJztcbiAgICAgICAgICAgICAgICB0eXBlID0gJ2ltYWdlL3BuZyc7XG4gICAgICAgICAgICAgICAgbmFtZSA9ICdkYWxsaWFuY2Utdmlldy5wbmcnO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChleHBvcnRTZWxlY3QudmFsdWUgPT09ICdjb25maWcnKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbmZpZyA9IEpTT04uc3RyaW5naWZ5KGIuZXhwb3J0RnVsbENvbmZpZygpLCBudWxsLCAyKTtcbiAgICAgICAgICAgICAgICB2YXIgYmxvYiA9IG5ldyBCbG9iKFtjb25maWddLCB7dHlwZTogJ3RleHQvcGxhaW4nfSk7XG4gICAgICAgICAgICAgICAgYmxvYlVSTCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XG4gICAgICAgICAgICAgICAgbm90ZSA9ICdDb25maWd1cmF0aW9uJztcbiAgICAgICAgICAgICAgICB0eXBlID0gJ3RleHQvcGxhaW4nO1xuICAgICAgICAgICAgICAgIG5hbWUgPSAnZGFsbGlhbmNlLWNvbmZpZy5qc29uJztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXhwb3J0U2VsZWN0LnZhbHVlID09PSAnc291cmNlcycpIHtcbiAgICAgICAgICAgICAgICB2YXIgY29uZmlnID0gSlNPTi5zdHJpbmdpZnkoYi5leHBvcnRTb3VyY2VDb25maWcoKSwgbnVsbCwgMik7XG4gICAgICAgICAgICAgICAgdmFyIGJsb2IgPSBuZXcgQmxvYihbY29uZmlnXSwge3R5cGU6ICd0ZXh0L3BsYWluJ30pO1xuICAgICAgICAgICAgICAgIGJsb2JVUkwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xuICAgICAgICAgICAgICAgIG5vdGUgPSAnU291cmNlIGFycmF5JztcbiAgICAgICAgICAgICAgICB0eXBlID0gJ3RleHQvcGxhaW4nO1xuICAgICAgICAgICAgICAgIG5hbWUgPSAnZGFsbGlhbmNlLXNvdXJjZXMuanNvbic7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV4cG9ydFNlbGVjdC52YWx1ZSA9PT0gJ3BhZ2UnKSB7XG4gICAgICAgICAgICAgICAgdmFyIHBhZ2UgPSBiLmV4cG9ydFBhZ2VUZW1wbGF0ZSgpO1xuICAgICAgICAgICAgICAgIHZhciB0eXBlID0gJ3RleHQvaHRtbCc7XG4gICAgICAgICAgICAgICAgdmFyIGJsb2IgPSBuZXcgQmxvYihbcGFnZV0sIHt0eXBlOiB0eXBlfSk7XG4gICAgICAgICAgICAgICAgYmxvYlVSTCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XG4gICAgICAgICAgICAgICAgbm90ZSA9ICdQYWdlIHRlbXBsYXRlJztcbiAgICAgICAgICAgICAgICBuYW1lID0gJ2RhbGxpYW5jZS12aWV3Lmh0bWwnO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoYmxvYlVSTCkge1xuICAgICAgICAgICAgICAgIHZhciBkb3dubG9hZExpbmsgPSBtYWtlRWxlbWVudCgnYScsICdbRG93bmxvYWRdJywge1xuICAgICAgICAgICAgICAgICAgICBocmVmOiBibG9iVVJMLFxuICAgICAgICAgICAgICAgICAgICBkb3dubG9hZDogbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogdHlwZVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgdmFyIHByZXZpZXdMaW5rID0gbWFrZUVsZW1lbnQoJ2EnLCAnW1ByZXZpZXcgaW4gYnJvd3Nlcl0nLCB7XG4gICAgICAgICAgICAgICAgICAgIGhyZWY6IGJsb2JVUkwsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IHR5cGUsXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldDogJ19uZXcnXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBleHBvcnRDb250ZW50LmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCdwJywgWycnICsgbm90ZSArICcgY3JlYXRlZDogJywgZG93bmxvYWRMaW5rLCBwcmV2aWV3TGlua10pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgZmFsc2UpO1xuXG4gICAgICAgIGIuYWRkVmlld0xpc3RlbmVyKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmVtb3ZlQ2hpbGRyZW4oZXhwb3J0Q29udGVudCk7XG4gICAgICAgIH0pO1xuICAgICAgICBiLmFkZFRpZXJMaXN0ZW5lcihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJlbW92ZUNoaWxkcmVuKGV4cG9ydENvbnRlbnQpO1xuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgZXhwb3J0Q29udGVudCA9IG1ha2VFbGVtZW50KCdwJywgJycpO1xuXG4gICAgICAgIHZhciBlb3RIaWdobGlnaHRzID0gbWFrZUVsZW1lbnQoJ3RyJyxcbiAgICAgICAgICAgICAgICBbbWFrZUVsZW1lbnQoJ3RoJywgJ0luY2x1ZGUgaGlnaGxpZ2h0cycsIHt9LCB7d2lkdGg6ICc0MDBweCcsIHRleHRBbGlnbjogJ3JpZ2h0J30pLFxuICAgICAgICAgICAgICAgICBtYWtlRWxlbWVudCgndGQnLCBleHBvcnRIaWdobGlnaHRzVG9nZ2xlKV0pO1xuICAgICAgICB2YXIgZW90R3VpZGVsaW5lID0gbWFrZUVsZW1lbnQoJ3RyJyxcbiAgICAgICAgICAgICAgICBbbWFrZUVsZW1lbnQoJ3RoJywgJ0luY2x1ZGUgdmVydGljYWwgZ3VpZGVsaW5lJywge30sIHt0ZXh0QWxpZ246ICdyaWdodCd9KSxcbiAgICAgICAgICAgICAgICAgbWFrZUVsZW1lbnQoJ3RkJywgZXhwb3J0UnVsZXJUb2dnbGUpXSk7XG4gICAgICAgIHZhciBlb3RTY2FsZSA9IG1ha2VFbGVtZW50KCd0cicsXG4gICAgICAgICAgICBbbWFrZUVsZW1lbnQoJ3RoJywgJ1NjYWxlIG11bHRpcGxpZXInLCB7fSwge3RleHRBbGlnbjogJ3JpZ2h0J30pLFxuICAgICAgICAgICAgIG1ha2VFbGVtZW50KCd0ZCcsIGV4cG9ydFNjYWxlKV0pO1xuICAgICAgICB2YXIgZW90V2lkdGggPSBtYWtlRWxlbWVudCgndHInLFxuICAgICAgICAgICAgW21ha2VFbGVtZW50KCd0aCcsICdXaWR0aCAobG9naWNhbCBweCknLCB7fSwge3RleHRBbGlnbjogJ3JpZ2h0J30pLFxuICAgICAgICAgICAgIG1ha2VFbGVtZW50KCd0ZCcsIGV4cG9ydFdpZHRoKV0pO1xuICAgICAgICB2YXIgZW90UmVnaW9uID0gbWFrZUVsZW1lbnQoJ3RyJyxcbiAgICAgICAgICAgIFttYWtlRWxlbWVudCgndGgnLCAnTGFiZWwgd2l0aCBnZW5vbWljIGNvb3JkaW5hdGVzJywge30sIHt0ZXh0QWxpZ246ICdyaWdodCd9KSxcbiAgICAgICAgICAgICBtYWtlRWxlbWVudCgndGQnLCBleHBvcnRSZWdpb25Ub2dnbGUpXSk7XG4gICAgICAgIHZhciBlb3RCYW5uZXIgPSBtYWtlRWxlbWVudCgndHInLFxuICAgICAgICAgICAgW21ha2VFbGVtZW50KCd0aCcsICdJbmNsdWRlIGJhbm5lcicsIHt9LCB7dGV4dEFsaWduOiAncmlnaHQnfSksXG4gICAgICAgICAgICAgbWFrZUVsZW1lbnQoJ3RkJywgZXhwb3J0QmFubmVyVG9nZ2xlKV0pO1xuXG4gICAgICAgIHZhciBleHBvcnRPcHRzVGFibGUgPSBtYWtlRWxlbWVudCgndGFibGUnLFxuICAgICAgICAgICAgW2VvdEhpZ2hsaWdodHMsXG4gICAgICAgICAgICAgZW90R3VpZGVsaW5lLFxuICAgICAgICAgICAgIGVvdFdpZHRoLFxuICAgICAgICAgICAgIGVvdFNjYWxlLFxuICAgICAgICAgICAgIGVvdFJlZ2lvbl0sIG51bGwsIHt3aWR0aDogJzUwMHB4J30pO1xuICAgICAgICB2YXIgc2V0dXBFT1QgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBlcyA9IGV4cG9ydFNlbGVjdC52YWx1ZTtcbiAgICAgICAgICAgIGVvdEhpZ2hsaWdodHMuc3R5bGUuZGlzcGxheSA9IChlcyA9PSAnc3ZnJyB8fCBlcyA9PSAncG5nJykgPyAndGFibGUtcm93JyA6ICdub25lJztcbiAgICAgICAgICAgIGVvdEd1aWRlbGluZS5zdHlsZS5kaXNwbGF5ID0gKGVzID09ICdzdmcnIHx8IGVzID09ICdwbmcnKSA/ICd0YWJsZS1yb3cnIDogJ25vbmUnO1xuICAgICAgICAgICAgZW90U2NhbGUuc3R5bGUuZGlzcGxheSA9IChlcyA9PSAncG5nJykgPyAndGFibGUtcm93JyA6ICdub25lJztcbiAgICAgICAgICAgIGVvdFdpZHRoLnN0eWxlLmRpc3BsYXkgPSAoZXMgPT0gJ3N2ZycgfHwgZXMgPT0gJ3BuZycpID8gJ3RhYmxlLXJvdycgOiAnbm9uZSc7XG4gICAgICAgICAgICBlb3RSZWdpb24uc3R5bGUuZGlzcGxheSA9IChlcyA9PSAnc3ZnJyB8fCBlcyA9PSAncG5nJykgPyAndGFibGUtcm93JyA6ICdub25lJztcbiAgICAgICAgICAgIGVvdEJhbm5lci5zdHlsZS5kaXNwbGF5ID0gKGVzID09ICdzdmcnIHx8IGVzID09ICdwbmcnKSA/ICd0YWJsZS1yb3cnIDogJ25vbmUnO1xuICAgICAgICB9XG4gICAgICAgIHNldHVwRU9UKCk7XG5cbiAgICAgICAgZXhwb3J0Rm9ybS5hcHBlbmRDaGlsZChleHBvcnRPcHRzVGFibGUpO1xuICAgICAgICBleHBvcnRGb3JtLmFwcGVuZENoaWxkKGV4cG9ydEJ1dHRvbik7XG4gICAgICAgIGV4cG9ydEZvcm0uYXBwZW5kQ2hpbGQoZXhwb3J0Q29udGVudCk7XG5cbiAgICAgICAgaWYgKHRoaXMudWlNb2RlICE9PSAnbm9uZScpXG4gICAgICAgICAgICB0aGlzLmhpZGVUb29sUGFuZWwoKTtcbiAgICAgICAgdGhpcy5icm93c2VySG9sZGVyLmluc2VydEJlZm9yZShleHBvcnRGb3JtLCB0aGlzLnN2Z0hvbGRlcik7XG4gICAgICAgIHRoaXMuYWN0aXZlVG9vbFBhbmVsID0gZXhwb3J0Rm9ybTtcblxuICAgICAgICB0aGlzLnNldFVpTW9kZSgnZXhwb3J0Jyk7XG4gICAgfVxufVxuIiwiLyogLSotIG1vZGU6IGphdmFzY3JpcHQ7IGMtYmFzaWMtb2Zmc2V0OiA0OyBpbmRlbnQtdGFicy1tb2RlOiBuaWwgLSotICovXG5cbi8vIFxuLy8gRGFsbGlhbmNlIEdlbm9tZSBFeHBsb3JlclxuLy8gKGMpIFRob21hcyBEb3duIDIwMDYtMjAxNFxuLy9cbi8vIGV4cG9ydHMuanM6IHNoaW0gdG8gZXhwb3J0IHN5bWJvbHMgaW50byBnbG9iYWwgbmFtZXNwYWNlIGZvciBlYXNlIG9mIGVtYmVkZGluZ1xuLy9cblxudmFyIGJyb3dzZXIgPSByZXF1aXJlKCcuL2Nicm93c2VyJyk7XG52YXIgY2hhaW5zZXQgPSByZXF1aXJlKCcuL2NoYWluc2V0Jyk7XG52YXIgc2EgPSByZXF1aXJlKCcuL3NvdXJjZWFkYXB0ZXJzJyk7XG52YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XG52YXIgZGFzID0gcmVxdWlyZSgnLi9kYXMnKTtcbnZhciBzYyA9IHJlcXVpcmUoJy4vc291cmNlY29tcGFyZScpO1xuXG53aW5kb3cuQnJvd3NlciA9IGJyb3dzZXIuQnJvd3NlcjtcbndpbmRvdy5zb3VyY2VzQXJlRXF1YWwgPSBzYy5zb3VyY2VzQXJlRXF1YWw7XG53aW5kb3cuQ2hhaW5zZXQgPSBjaGFpbnNldC5DaGFpbnNldDsgICAgLy8gUHJlLTAuMTIgY29uZmlndXJhdGlvbnMgbmVlZCB0aGlzLlxuXG4vLyBVc2VmdWwgZm9yIGluZm8gcGx1Z2lucy4gIFNob3VsZCBiZSByZWNvbnNpZGVyZWQgaW4gdGhlIGZ1dHVyZS5cbndpbmRvdy5tYWtlRWxlbWVudCA9IHV0aWxzLm1ha2VFbGVtZW50O1xuXG4vLyBBbGxvdyBzb3VyY2UgcGx1Z2lucyB0byBiZSBsb2FkZWQgc2VwYXJhdGVseS5cbndpbmRvdy5kYWxsaWFuY2VfcmVnaXN0ZXJTb3VyY2VBZGFwdGVyRmFjdG9yeSA9IHNhLnJlZ2lzdGVyU291cmNlQWRhcHRlckZhY3Rvcnk7XG53aW5kb3cuZGFsbGlhbmNlX3JlZ2lzdGVyUGFyc2VyRmFjdG9yeSA9IHNhLnJlZ2lzdGVyUGFyc2VyRmFjdG9yeTtcbndpbmRvdy5kYWxsaWFuY2VfbWFrZVBhcnNlciA9IHNhLm1ha2VQYXJzZXI7XG5cbi8vIERBUyogb2JqZWN0cyBmb3Igc29tZSBwbHVnaW5zIC0tIHJlbW92ZSB3aGVuIHBsdWdpbiBBUEkgY2hhbmdlcy4uLlxuXG53aW5kb3cuREFTU2VxdWVuY2UgPSBkYXMuREFTU2VxdWVuY2U7XG53aW5kb3cuREFTRmVhdHVyZSA9IGRhcy5EQVNGZWF0dXJlO1xud2luZG93LkRBU0dyb3VwID0gZGFzLkRBU0dyb3VwO1xud2luZG93LkRBU1N0eWxlc2hlZXQgPSBkYXMuREFTU3R5bGVzaGVldDtcbndpbmRvdy5EQVNTdHlsZSA9IGRhcy5EQVNTdHlsZTtcbndpbmRvdy5EQVNTb3VyY2UgPSBkYXMuREFTU291cmNlOyAgICAvLyBQcmUtMC44IGNvbmZpZ3VyYXRpb25zIHVzZWQgdGhpcy4gIFN0aWxsIHNvbWUgYXJvdW5kLi4uXG5cbnZhciBydWxlciA9IHJlcXVpcmUoXCIuL3J1bGVyc1wiKTtcbndpbmRvdy5SdWxlciA9IHJ1bGVyLlJ1bGVyO1xud2luZG93LnJ1bGVyRHJhd0NhbGxiYWNrID0gcnVsZXIucnVsZXJEcmF3Q2FsbGJhY2s7XG4iLCIvL1xuLy8gRGFsbGlhbmNlIEdlbm9tZSBFeHBsb3JlclxuLy8gKGMpIFRob21hcyBEb3duIDIwMDYtMjAxMFxuLy9cbi8vIGZlYXR1cmUtZHJhdy5qczogbmV3IGZlYXR1cmUtdGllciByZW5kZXJlclxuLy9cblxuXCJ1c2Ugc3RyaWN0XCI7XG5cbmlmICh0eXBlb2YocmVxdWlyZSkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgdmFyIHRpZXIgPSByZXF1aXJlKCcuL3RpZXInKTtcbiAgICB2YXIgRGFzVGllciA9IHRpZXIuRGFzVGllcjtcblxuICAgIHZhciBuZiA9IHJlcXVpcmUoJy4vbnVtZm9ybWF0cycpO1xuICAgIHZhciBmb3JtYXRRdWFudExhYmVsID0gbmYuZm9ybWF0UXVhbnRMYWJlbDtcbn1cblxuZnVuY3Rpb24gU3ViVGllcigpIHtcbiAgICB0aGlzLmdseXBocyA9IFtdO1xuICAgIHRoaXMuaGVpZ2h0ID0gMDtcbiAgICB0aGlzLnF1YW50ID0gbnVsbDtcbn1cblxuU3ViVGllci5wcm90b3R5cGUuaW5kZXhGb3IgPSBmdW5jdGlvbihnbHlwaCkge1xuICAgIHZhciBnbWluID0gZ2x5cGgubWluKCk7XG4gICAgdmFyIGxiID0gMCwgdWIgPSB0aGlzLmdseXBocy5sZW5ndGg7XG4gICAgd2hpbGUgKHViID4gbGIpIHtcbiAgICAgICAgdmFyIG1pZCA9ICgobGIgKyB1YikvMil8MDtcbiAgICAgICAgaWYgKG1pZCA+PSB0aGlzLmdseXBocy5sZW5ndGgpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nbHlwaHMubGVuZ3RoO1xuICAgICAgICB2YXIgbWcgPSB0aGlzLmdseXBoc1ttaWRdO1xuICAgICAgICBpZiAoZ21pbiA8IG1nLm1pbigpKSB7XG4gICAgICAgICAgICB1YiA9IG1pZDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxiID0gbWlkICsgMTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdWI7XG59XG5cblN1YlRpZXIucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uKGdseXBoKSB7XG4gICAgdmFyIGluZCA9IHRoaXMuaW5kZXhGb3IoZ2x5cGgpO1xuICAgIHRoaXMuZ2x5cGhzLnNwbGljZShpbmQsIDAsIGdseXBoKTtcbiAgICB0aGlzLmhlaWdodCA9IE1hdGgubWF4KHRoaXMuaGVpZ2h0LCBnbHlwaC5oZWlnaHQoKSk7XG4gICAgaWYgKGdseXBoLnF1YW50ICYmIHRoaXMucXVhbnQgPT0gbnVsbCkge1xuICAgICAgICB0aGlzLnF1YW50ID0gZ2x5cGgucXVhbnQ7XG4gICAgfVxufVxuXG5TdWJUaWVyLnByb3RvdHlwZS5oYXNTcGFjZUZvciA9IGZ1bmN0aW9uKGdseXBoKSB7XG4gICAgdmFyIGluZCA9IHRoaXMuaW5kZXhGb3IoZ2x5cGgpO1xuICAgIGlmIChpbmQgPiAwICYmIHRoaXMuZ2x5cGhzW2luZC0xXS5tYXgoKSA+PSBnbHlwaC5taW4oKSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGlmIChpbmQgPCB0aGlzLmdseXBocy5sZW5ndGggJiYgdGhpcy5nbHlwaHNbaW5kXS5taW4oKSA8PSBnbHlwaC5tYXgoKSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuXG4gICAgcmV0dXJuIHRydWU7XG59XG5cbkRhc1RpZXIucHJvdG90eXBlLnBhaW50VG9Db250ZXh0ID0gZnVuY3Rpb24oZ2MsIG9jLCBvZmZzZXQpIHtcbiAgICB2YXIgc3VidGllcnMgPSB0aGlzLnN1YnRpZXJzO1xuICAgIHZhciBmcHcgPSB0aGlzLnZpZXdwb3J0LndpZHRofDA7XG5cbiAgICBnYy5zYXZlKCk7XG4gICAgZm9yICh2YXIgcyA9IDA7IHMgPCBzdWJ0aWVycy5sZW5ndGg7ICsrcykge1xuICAgICAgICB2YXIgcXVhbnQgPSBudWxsO1xuICAgICAgICB2YXIgZ2x5cGhzID0gc3VidGllcnNbc10uZ2x5cGhzO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGdseXBocy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgdmFyIGdseXBoID0gZ2x5cGhzW2ldO1xuICAgICAgICAgICAgaWYgKGdseXBoLm1pbigpIDwgZnB3LW9mZnNldCAmJiBnbHlwaC5tYXgoKSA+IC1vZmZzZXQpIHtcbiAgICAgICAgICAgICAgICB2YXIgZ2x5cGggPSBnbHlwaHNbaV07XG4gICAgICAgICAgICAgICAgZ2x5cGguZHJhdyhnYywgb2MpO1xuICAgICAgICAgICAgICAgIGlmIChnbHlwaC5xdWFudCkge1xuICAgICAgICAgICAgICAgICAgICBxdWFudCA9IGdseXBoLnF1YW50O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG5cdGlmIChxdWFudCAmJiBxdWFudC5taW4gPCAwICYmIHF1YW50Lm1heCA+IDAgJiYgdGhpcy5kYXNTb3VyY2UuemVyb0xpbmUpIHtcblx0ICAgIHZhciByeSA9IHN1YnRpZXJzWzBdLmhlaWdodCAqIChxdWFudC5tYXggLyAocXVhbnQubWF4IC0gcXVhbnQubWluKSlcblx0ICAgIGdjLnNhdmUoKTtcblx0ICAgIGdjLnN0cm9rZVN0eWxlID0gdGhpcy5kYXNTb3VyY2UuemVyb0xpbmU7XG5cdCAgICBnYy5saW5lV2lkdGggPSAwLjU7XG5cdCAgICBnYy5iZWdpblBhdGgoKTtcblx0ICAgIGdjLm1vdmVUbygtMTAwMCwgcnkpO1xuXHQgICAgZ2MubGluZVRvKGZwdyArIDEwMDAsIHJ5KTtcblx0ICAgIGdjLnN0cm9rZSgpO1xuXHQgICAgZ2MucmVzdG9yZSgpO1xuXHR9XG5cbiAgICAgICAgaWYgKHRoaXMuc2NhbGVWZXJ0aWNhbCkge1xuICAgICAgICAgICAgdmFyIHNjYWxlID0gdGhpcy5icm93c2VyLnNjYWxlO1xuICAgICAgICAgICAgZ2MudHJhbnNsYXRlKDAsIHNjYWxlICsgdGhpcy5wYWRkaW5nKTtcbiAgICAgICAgICAgIG9jLnRyYW5zbGF0ZSgwLCBzY2FsZSArIHRoaXMucGFkZGluZyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBnYy50cmFuc2xhdGUoMCwgc3VidGllcnNbc10uaGVpZ2h0ICsgdGhpcy5wYWRkaW5nKTtcbiAgICAgICAgICAgIG9jLnRyYW5zbGF0ZSgwLCBzdWJ0aWVyc1tzXS5oZWlnaHQgKyB0aGlzLnBhZGRpbmcpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdjLnJlc3RvcmUoKTtcblxuICAgIGlmIChxdWFudCAmJiB0aGlzLnF1YW50TGVhcFRocmVzaG9sZCAmJiB0aGlzLmZlYXR1cmVTb3VyY2UgJiYgdGhpcy5icm93c2VyLnNvdXJjZUFkYXB0ZXJJc0NhcGFibGUodGhpcy5mZWF0dXJlU291cmNlLCAncXVhbnRMZWFwJykpIHtcbiAgICAgICAgdmFyIHJ5ID0gc3VidGllcnNbMF0uaGVpZ2h0ICogKDEuMCAtICgodGhpcy5xdWFudExlYXBUaHJlc2hvbGQgLSBxdWFudC5taW4pIC8gKHF1YW50Lm1heCAtIHF1YW50Lm1pbikpKTtcblxuICAgICAgICBnYy5zYXZlKCk7XG4gICAgICAgIGdjLnN0cm9rZVN0eWxlID0gJ3JlZCc7XG4gICAgICAgIGdjLmxpbmVXaWR0aCA9IDAuMztcbiAgICAgICAgZ2MuYmVnaW5QYXRoKCk7XG4gICAgICAgIGdjLm1vdmVUbygtMTAwMCwgcnkpO1xuICAgICAgICBnYy5saW5lVG8oZnB3ICsgMTAwMCwgcnkpO1xuICAgICAgICBnYy5zdHJva2UoKTtcbiAgICAgICAgZ2MucmVzdG9yZSgpO1xuICAgIH1cbn1cblxuRGFzVGllci5wcm90b3R5cGUucGFpbnRRdWFudCA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICghdGhpcy5xdWFudE92ZXJsYXkpXG4gICAgICAgIHJldHVybjtcblxuICAgIHZhciByZXRpbmEgPSB0aGlzLmJyb3dzZXIucmV0aW5hICYmIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvID4gMTtcblxuICAgIHZhciBxdWFudDtcbiAgICBpZiAodGhpcy5zdWJ0aWVycyAmJiB0aGlzLnN1YnRpZXJzLmxlbmd0aCA+IDApXG4gICAgICAgIHF1YW50ID0gdGhpcy5zdWJ0aWVyc1swXS5xdWFudDtcblxuICAgIGlmIChxdWFudCkge1xuICAgICAgICB2YXIgaCA9IHRoaXMuc3VidGllcnNbMF0uaGVpZ2h0O1xuICAgICAgICB2YXIgdyA9IDUwO1xuICAgICAgICB0aGlzLnF1YW50T3ZlcmxheS5oZWlnaHQgPSB0aGlzLnZpZXdwb3J0LmhlaWdodDtcbiAgICAgICAgdGhpcy5xdWFudE92ZXJsYXkud2lkdGggPSByZXRpbmEgPyB3KjIgOiB3O1xuICAgICAgICB0aGlzLnF1YW50T3ZlcmxheS5zdHlsZS5oZWlnaHQgPSAnJyArIChyZXRpbmEgPyB0aGlzLnF1YW50T3ZlcmxheS5oZWlnaHQvMiA6IHRoaXMucXVhbnRPdmVybGF5LmhlaWdodCkgKyAncHgnO1xuICAgICAgICB0aGlzLnF1YW50T3ZlcmxheS5zdHlsZS53aWR0aCA9ICcnICsgdyArICdweCc7XG4gICAgICAgIHRoaXMucXVhbnRPdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICB2YXIgY3R4ID0gdGhpcy5xdWFudE92ZXJsYXkuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgICAgaWYgKHJldGluYSlcbiAgICAgICAgICAgIGN0eC5zY2FsZSgyLCAyKTtcblxuICAgICAgICB2YXIgbnVtVGljcyA9IDI7XG4gICAgICAgIGlmIChoID4gNDApIHtcbiAgICAgICAgICAgIG51bVRpY3MgPSAxICsgKChoLzIwKSB8IDApO1xuICAgICAgICB9XG4gICAgICAgIHZhciB0aWNTcGFjaW5nID0gKGggKyB0aGlzLnBhZGRpbmcqMikgLyAobnVtVGljcyAtIDEpO1xuICAgICAgICB2YXIgdGljSW50ZXJ2YWwgPSAocXVhbnQubWF4IC0gcXVhbnQubWluKSAvIChudW1UaWNzIC0gMSk7XG5cbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICd3aGl0ZSdcbiAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gMC42O1xuICAgICAgICBpZiAodGhpcy5icm93c2VyLnJ1bGVyTG9jYXRpb24gPT0gJ3JpZ2h0Jykge1xuICAgICAgICAgICAgY3R4LmZpbGxSZWN0KHctMzAsIDAsIDMwLCBoICsgdGhpcy5wYWRkaW5nKjIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY3R4LmZpbGxSZWN0KDAsIDAsIDMwLCBoICsgdGhpcy5wYWRkaW5nKjIpO1xuICAgICAgICB9XG4gICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IDEuMDtcblxuICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAnYmxhY2snO1xuICAgICAgICBjdHgubGluZVdpZHRoID0gMTtcbiAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xuXG4gICAgICAgIGlmICh0aGlzLmJyb3dzZXIucnVsZXJMb2NhdGlvbiA9PSAncmlnaHQnKSB7XG4gICAgICAgICAgICBjdHgubW92ZVRvKHcgLSA4LCB0aGlzLnBhZGRpbmcpO1xuICAgICAgICAgICAgY3R4LmxpbmVUbyh3LCB0aGlzLnBhZGRpbmcpO1xuICAgICAgICAgICAgY3R4LmxpbmVUbyh3LCBoICsgdGhpcy5wYWRkaW5nKTtcbiAgICAgICAgICAgIGN0eC5saW5lVG8odyAtIDgsIGggKyB0aGlzLnBhZGRpbmcpO1xuICAgICAgICAgICAgZm9yICh2YXIgdCA9IDE7IHQgPCBudW1UaWNzLTE7ICsrdCkge1xuICAgICAgICAgICAgICAgIHZhciB0eSA9IHQqdGljU3BhY2luZztcbiAgICAgICAgICAgICAgICBjdHgubW92ZVRvKHcsIHR5KTtcbiAgICAgICAgICAgICAgICBjdHgubGluZVRvKHcgLSA1LCB0eSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjdHgubW92ZVRvKDgsIHRoaXMucGFkZGluZyk7XG4gICAgICAgICAgICBjdHgubGluZVRvKDAsIHRoaXMucGFkZGluZyk7XG4gICAgICAgICAgICBjdHgubGluZVRvKDAsIGggKyB0aGlzLnBhZGRpbmcpO1xuICAgICAgICAgICAgY3R4LmxpbmVUbyg4LCBoICsgdGhpcy5wYWRkaW5nKTtcbiAgICAgICAgICAgIGZvciAodmFyIHQgPSAxOyB0IDwgbnVtVGljcy0xOyArK3QpIHtcbiAgICAgICAgICAgICAgICB2YXIgdHkgPSB0KnRpY1NwYWNpbmc7XG4gICAgICAgICAgICAgICAgY3R4Lm1vdmVUbygwLCB0eSk7XG4gICAgICAgICAgICAgICAgY3R4LmxpbmVUbyg1LCB0eSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY3R4LnN0cm9rZSgpO1xuXG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSAnYmxhY2snO1xuXG4gICAgICAgIGlmICh0aGlzLmJyb3dzZXIucnVsZXJMb2NhdGlvbiA9PSAncmlnaHQnKSB7XG4gICAgICAgICAgICBjdHgudGV4dEFsaWduID0gJ3JpZ2h0JztcbiAgICAgICAgICAgIGN0eC5maWxsVGV4dChmb3JtYXRRdWFudExhYmVsKHF1YW50Lm1heCksIHctOSwgOCk7XG4gICAgICAgICAgICBjdHguZmlsbFRleHQoZm9ybWF0UXVhbnRMYWJlbChxdWFudC5taW4pLCB3LTksIGggKyB0aGlzLnBhZGRpbmcpO1xuICAgICAgICAgICAgZm9yICh2YXIgdCA9IDE7IHQgPCBudW1UaWNzLTE7ICsrdCkge1xuICAgICAgICAgICAgICAgIHZhciB0eSA9IHQqdGljU3BhY2luZztcbiAgICAgICAgICAgICAgICBjdHguZmlsbFRleHQoZm9ybWF0UXVhbnRMYWJlbCgoMS4wKnF1YW50Lm1heCkgLSAodCp0aWNJbnRlcnZhbCkpLCB3IC0gOSwgdHkgKyAzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGN0eC50ZXh0QWxpZ24gPSAnbGVmdCc7XG4gICAgICAgICAgICBjdHguZmlsbFRleHQoZm9ybWF0UXVhbnRMYWJlbChxdWFudC5tYXgpLCA5LCA4KTtcbiAgICAgICAgICAgIGN0eC5maWxsVGV4dChmb3JtYXRRdWFudExhYmVsKHF1YW50Lm1pbiksIDksIGggKyB0aGlzLnBhZGRpbmcpO1xuICAgICAgICAgICAgZm9yICh2YXIgdCA9IDE7IHQgPCBudW1UaWNzLTE7ICsrdCkge1xuICAgICAgICAgICAgICAgIHZhciB0eSA9IHQqdGljU3BhY2luZztcbiAgICAgICAgICAgICAgICBjdHguZmlsbFRleHQoZm9ybWF0UXVhbnRMYWJlbCgoMS4wKnF1YW50Lm1heCkgLSAodCp0aWNJbnRlcnZhbCkpLCA5LCB0eSArIDMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5xdWFudE92ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICB9XG59XG5cbkRhc1RpZXIucHJvdG90eXBlLnN0eWxlRm9yRmVhdHVyZSA9IGZ1bmN0aW9uKGYpIHtcbiAgICB2YXIgc3NTY2FsZSA9IHRoaXMuYnJvd3Nlci56b29tRm9yQ3VycmVudFNjYWxlKCk7XG5cbiAgICBpZiAoIXRoaXMuc3R5bGVzaGVldCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICB2YXIgbWF5YmUgPSBudWxsO1xuICAgIHZhciBzcyA9IHRoaXMuc3R5bGVzaGVldC5zdHlsZXM7XG4gICAgZm9yICh2YXIgc2kgPSAwOyBzaSA8IHNzLmxlbmd0aDsgKytzaSkge1xuICAgICAgICB2YXIgc2ggPSBzc1tzaV07XG4gICAgICAgIGlmIChzaC56b29tICYmIHNoLnpvb20gIT0gc3NTY2FsZSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc2gub3JpZW50YXRpb24pIHtcbiAgICAgICAgICAgIGlmIChzaC5vcmllbnRhdGlvbiAhPSBmLm9yaWVudGF0aW9uKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgbGFiZWxSRSA9IHNoLl9sYWJlbFJFO1xuICAgICAgICBpZiAoIWxhYmVsUkUgfHwgIWxhYmVsUkUudGVzdCkge1xuICAgICAgICAgICAgbGFiZWxSRSA9IG5ldyBSZWdFeHAoJ14nICsgc2gubGFiZWwgKyAnJCcpO1xuICAgICAgICAgICAgc2guX2xhYmVsUkUgPSBsYWJlbFJFO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzaC5sYWJlbCAmJiAhKGxhYmVsUkUudGVzdChmLmxhYmVsKSkpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIHZhciBtZXRob2RSRSA9IHNoLl9tZXRob2RSRTtcbiAgICAgICAgaWYgKCFtZXRob2RSRSB8fCAhbWV0aG9kUkUudGVzdCkge1xuICAgICAgICAgICAgbWV0aG9kUkUgPSBuZXcgUmVnRXhwKCdeJyArIHNoLm1ldGhvZCArICckJyk7XG4gICAgICAgICAgICBzaC5fbWV0aG9kUkUgPSBtZXRob2RSRTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2gubWV0aG9kICYmICEobWV0aG9kUkUudGVzdChmLm1ldGhvZCkpKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2gudHlwZSkge1xuICAgICAgICAgICAgaWYgKHNoLnR5cGUgPT0gJ2RlZmF1bHQnKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFtYXliZSkge1xuICAgICAgICAgICAgICAgICAgICBtYXliZSA9IHNoLnN0eWxlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIHR5cGVSRSA9IHNoLl90eXBlUkU7XG4gICAgICAgICAgICAgICAgaWYgKCF0eXBlUkUgfHwgIXR5cGVSRS50ZXN0KSB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGVSRSA9IG5ldyBSZWdFeHAoJ14nICsgc2gudHlwZSArICckJyk7XG4gICAgICAgICAgICAgICAgICAgIHNoLl90eXBlUkUgPSB0eXBlUkU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghdHlwZVJFLnRlc3QoZi50eXBlKSlcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNoLnN0eWxlO1xuICAgIH1cbiAgICByZXR1cm4gbWF5YmU7XG59XG5cbkRhc1RpZXIucHJvdG90eXBlLnF1YW50TWluID0gZnVuY3Rpb24oc3R5bGUpIHtcbiAgICBpZiAodGhpcy5mb3JjZU1pbkR5bmFtaWMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY3VycmVudEZlYXR1cmVzTWluU2NvcmUgfHwgMDtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZih0aGlzLmZvcmNlTWluKSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9yY2VNaW47XG4gICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3Qgc29mdE1pbiA9IHR5cGVvZihzdHlsZS5TT0ZUTUlOKSAhPT0gJ3VuZGVmaW5lZCcgPyBzdHlsZS5TT0ZUTUlOIDogTnVtYmVyLk1BWF9WQUxVRTtcbiAgICAgICAgcmV0dXJuIHN0eWxlLk1JTiB8fCBNYXRoLm1pbihzb2Z0TWluLCB0aGlzLmN1cnJlbnRGZWF0dXJlc01pblNjb3JlIHx8IDApO1xuICAgIH1cbn1cblxuRGFzVGllci5wcm90b3R5cGUucXVhbnRNYXggPSBmdW5jdGlvbihzdHlsZSkge1xuICAgIGlmICh0aGlzLmZvcmNlTWF4RHluYW1pYykge1xuICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50RmVhdHVyZXNNYXhTY29yZSB8fCAwO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mKHRoaXMuZm9yY2VNYXgpID09PSAnbnVtYmVyJykge1xuICAgICAgICByZXR1cm4gdGhpcy5mb3JjZU1heDtcbiAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBzb2Z0TWF4ID0gdHlwZW9mKHN0eWxlLlNPRlRNQVgpICE9PSAndW5kZWZpbmVkJyA/IHN0eWxlLlNPRlRNQVggOiBOdW1iZXIuTUlOX1ZBTFVFO1xuICAgICAgICByZXR1cm4gc3R5bGUuTUFYIHx8IE1hdGgubWF4KHNvZnRNYXgsIHRoaXMuY3VycmVudEZlYXR1cmVzTWF4U2NvcmUgfHwgMCk7XG4gICAgfVxufVxuXG5pZiAodHlwZW9mKG1vZHVsZSkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgICAgIFN1YlRpZXI6IFN1YlRpZXJcbiAgICB9O1xufVxuIiwiLyogLSotIG1vZGU6IGphdmFzY3JpcHQ7IGMtYmFzaWMtb2Zmc2V0OiA0OyBpbmRlbnQtdGFicy1tb2RlOiBuaWwgLSotICovXG5cbi8vIFxuLy8gRGFsbGlhbmNlIEdlbm9tZSBFeHBsb3JlclxuLy8gKGMpIFRob21hcyBEb3duIDIwMDYtMjAxMVxuLy9cbi8vIGZlYXR1cmUtcG9wdXAuanNcbi8vXG5cblwidXNlIHN0cmljdFwiO1xuXG5pZiAodHlwZW9mKHJlcXVpcmUpICE9PSAndW5kZWZpbmVkJykge1xuICAgIHZhciBicm93c2VyID0gcmVxdWlyZSgnLi9jYnJvd3NlcicpO1xuICAgIHZhciBCcm93c2VyID0gYnJvd3Nlci5Ccm93c2VyO1xuXG4gICAgdmFyIHV0aWxzID0gcmVxdWlyZSgnLi91dGlscycpO1xuICAgIHZhciBwaWNrID0gdXRpbHMucGljaztcbiAgICB2YXIgcHVzaG5ldyA9IHV0aWxzLnB1c2huZXc7XG4gICAgdmFyIG1ha2VFbGVtZW50ID0gdXRpbHMubWFrZUVsZW1lbnQ7XG59XG5cblxudmFyIFRBR1ZBTF9OT1RFX1JFID0gbmV3IFJlZ0V4cCgnXihbQS1aYS16Xy1dKyk9KC4rKScpO1xuXG5Ccm93c2VyLnByb3RvdHlwZS5hZGRGZWF0dXJlSW5mb1BsdWdpbiA9IGZ1bmN0aW9uKGhhbmRsZXIpIHtcbiAgICBpZiAoIXRoaXMuZmVhdHVyZUluZm9QbHVnaW5zKSB7XG4gICAgICAgIHRoaXMuZmVhdHVyZUluZm9QbHVnaW5zID0gW107XG4gICAgfVxuICAgIHRoaXMuZmVhdHVyZUluZm9QbHVnaW5zLnB1c2goaGFuZGxlcik7XG59XG5cbmZ1bmN0aW9uIEZlYXR1cmVJbmZvKGhpdCwgZmVhdHVyZSwgZ3JvdXApIHtcbiAgICB2YXIgbmFtZSA9IHBpY2soZ3JvdXAudHlwZSwgZmVhdHVyZS50eXBlKTtcbiAgICB2YXIgZmlkID0gcGljayhncm91cC5sYWJlbCwgZmVhdHVyZS5sYWJlbCwgZ3JvdXAuaWQsIGZlYXR1cmUuaWQpO1xuICAgIGlmIChmaWQgJiYgZmlkLmluZGV4T2YoJ19fZGF6emxlJykgIT0gMCkge1xuICAgICAgICBuYW1lID0gbmFtZSArICc6ICcgKyBmaWQ7XG4gICAgfVxuXG4gICAgdGhpcy5oaXQgPSBoaXQ7XG4gICAgdGhpcy5mZWF0dXJlID0gZmVhdHVyZTtcbiAgICB0aGlzLmdyb3VwID0gZ3JvdXA7XG4gICAgdGhpcy50aXRsZSA9IG5hbWU7XG4gICAgdGhpcy5zZWN0aW9ucyA9IFtdO1xufVxuXG5GZWF0dXJlSW5mby5wcm90b3R5cGUuc2V0VGl0bGUgPSBmdW5jdGlvbih0KSB7XG4gICAgdGhpcy50aXRsZSA9IHQ7XG59XG5cbkZlYXR1cmVJbmZvLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbihsYWJlbCwgaW5mbykge1xuICAgIGlmICh0eXBlb2YgaW5mbyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgaW5mbyA9IG1ha2VFbGVtZW50KCdzcGFuJywgaW5mbyk7XG4gICAgfVxuICAgIHRoaXMuc2VjdGlvbnMucHVzaCh7bGFiZWw6IGxhYmVsLCBpbmZvOiBpbmZvfSk7XG59XG5cbkJyb3dzZXIucHJvdG90eXBlLmZlYXR1cmVQb3B1cCA9IGZ1bmN0aW9uKGV2LCBfX2lnbm9yZWRfZmVhdHVyZSwgaGl0LCB0aWVyKSB7XG4gICAgdmFyIGhpID0gaGl0Lmxlbmd0aDtcbiAgICB2YXIgZmVhdHVyZSA9IC0taGkgPj0gMCA/IGhpdFtoaV0gOiB7fTtcbiAgICB2YXIgZ3JvdXAgPSAtLWhpID49IDAgPyBoaXRbaGldIDoge307XG5cbiAgICB2YXIgZmVhdHVyZUluZm8gPSBuZXcgRmVhdHVyZUluZm8oaGl0LCBmZWF0dXJlLCBncm91cCk7XG4gICAgZmVhdHVyZUluZm8udGllciA9IHRpZXI7XG4gICAgdmFyIGZpcHMgPSB0aGlzLmZlYXR1cmVJbmZvUGx1Z2lucyB8fCBbXTtcbiAgICBmb3IgKHZhciBmaXBpID0gMDsgZmlwaSA8IGZpcHMubGVuZ3RoOyArK2ZpcGkpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGZpcHNbZmlwaV0oZmVhdHVyZSwgZmVhdHVyZUluZm8pO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlLnN0YWNrIHx8IGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZpcHMgPSB0aWVyLmZlYXR1cmVJbmZvUGx1Z2lucyB8fCBbXTtcbiAgICBmb3IgKGZpcGkgPSAwOyBmaXBpIDwgZmlwcy5sZW5ndGg7ICsrZmlwaSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgZmlwc1tmaXBpXShmZWF0dXJlLCBmZWF0dXJlSW5mbyk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGUuc3RhY2sgfHwgZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLnJlbW92ZUFsbFBvcHVwcygpO1xuXG4gICAgdmFyIHRhYmxlID0gbWFrZUVsZW1lbnQoJ3RhYmxlJywgbnVsbCwge2NsYXNzTmFtZTogJ3RhYmxlIHRhYmxlLXN0cmlwZWQgdGFibGUtY29uZGVuc2VkJ30pO1xuICAgIHRhYmxlLnN0eWxlLndpZHRoID0gJzEwMCUnO1xuICAgIHRhYmxlLnN0eWxlLm1hcmdpbiA9ICcwcHgnO1xuXG4gICAgdmFyIGlkeCA9IDA7XG4gICAgaWYgKGZlYXR1cmUubWV0aG9kICYmICF0aWVyLmRhc1NvdXJjZS5zdXBwcmVzc01ldGhvZCkge1xuICAgICAgICB2YXIgcm93ID0gbWFrZUVsZW1lbnQoJ3RyJywgW1xuICAgICAgICAgICAgbWFrZUVsZW1lbnQoJ3RoJywgJ01ldGhvZCcpLFxuICAgICAgICAgICAgbWFrZUVsZW1lbnQoJ3RkJywgZmVhdHVyZS5tZXRob2QpXG4gICAgICAgIF0pO1xuICAgICAgICB0YWJsZS5hcHBlbmRDaGlsZChyb3cpO1xuICAgICAgICArK2lkeDtcbiAgICB9XG4gICAge1xuICAgICAgICB2YXIgbG9jO1xuICAgICAgICBpZiAoZ3JvdXAuc2VnbWVudCkge1xuICAgICAgICAgICAgbG9jID0gZ3JvdXA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsb2MgPSBmZWF0dXJlO1xuICAgICAgICB9XG4gICAgICAgIHZhciByb3cgPSBtYWtlRWxlbWVudCgndHInLCBbXG4gICAgICAgICAgICBtYWtlRWxlbWVudCgndGgnLCAnTG9jYXRpb24nKSxcbiAgICAgICAgICAgIG1ha2VFbGVtZW50KCd0ZCcsIGxvYy5zZWdtZW50ICsgJzonICsgbG9jLm1pbiArICctJyArIGxvYy5tYXgsIHt9LCB7bWluV2lkdGg6ICcyMDBweCd9KVxuICAgICAgICBdKTtcbiAgICAgICAgdGFibGUuYXBwZW5kQ2hpbGQocm93KTtcbiAgICAgICAgKytpZHg7XG4gICAgfVxuICAgIGlmIChmZWF0dXJlLnNjb3JlICE9PSB1bmRlZmluZWQgJiYgZmVhdHVyZS5zY29yZSAhPT0gbnVsbCAmJiBmZWF0dXJlLnNjb3JlICE9ICctJ1xuICAgICAgICAmJiAhZmVhdHVyZS5zdXBwcmVzc1Njb3JlICYmICF0aWVyLmRhc1NvdXJjZS5zdXBwcmVzc1Njb3JlXG4gICAgKSB7XG4gICAgICAgIHZhciByb3cgPSBtYWtlRWxlbWVudCgndHInLCBbXG4gICAgICAgICAgICBtYWtlRWxlbWVudCgndGgnLCAnU2NvcmUnKSxcbiAgICAgICAgICAgIG1ha2VFbGVtZW50KCd0ZCcsICcnICsgZmVhdHVyZS5zY29yZSlcbiAgICAgICAgXSk7XG4gICAgICAgIHRhYmxlLmFwcGVuZENoaWxkKHJvdyk7XG4gICAgICAgICsraWR4O1xuICAgIH1cbiAgICB7XG4gICAgICAgIHZhciBsaW5rcyA9IG1heWJlQ29uY2F0KGdyb3VwLmxpbmtzLCBmZWF0dXJlLmxpbmtzKTtcbiAgICAgICAgaWYgKGxpbmtzICYmIGxpbmtzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHZhciByb3cgPSBtYWtlRWxlbWVudCgndHInLCBbXG4gICAgICAgICAgICAgICAgbWFrZUVsZW1lbnQoJ3RoJywgJ0xpbmtzJyksXG4gICAgICAgICAgICAgICAgbWFrZUVsZW1lbnQoJ3RkJywgbGlua3MubWFwKGZ1bmN0aW9uKGwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1ha2VFbGVtZW50KCdkaXYnLCBtYWtlRWxlbWVudCgnYScsIGwuZGVzYywge2hyZWY6IGwudXJpLCB0YXJnZXQ6ICdfbmV3J30pKTtcbiAgICAgICAgICAgICAgICB9KSlcbiAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgdGFibGUuYXBwZW5kQ2hpbGQocm93KTtcbiAgICAgICAgICAgICsraWR4O1xuICAgICAgICB9XG4gICAgfVxuICAgIHtcbiAgICAgICAgdmFyIG5vdGVzID0gbWF5YmVDb25jYXQoZ3JvdXAubm90ZXMsIGZlYXR1cmUubm90ZXMpO1xuICAgICAgICBmb3IgKHZhciBuaSA9IDA7IG5pIDwgbm90ZXMubGVuZ3RoOyArK25pKSB7XG4gICAgICAgICAgICB2YXIgayA9ICdOb3RlJztcbiAgICAgICAgICAgIHZhciB2ID0gbm90ZXNbbmldO1xuICAgICAgICAgICAgdmFyIG0gPSB2Lm1hdGNoKFRBR1ZBTF9OT1RFX1JFKTtcbiAgICAgICAgICAgIGlmIChtKSB7XG4gICAgICAgICAgICAgICAgayA9IG1bMV07XG4gICAgICAgICAgICAgICAgdiA9IG1bMl07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciByb3cgPSBtYWtlRWxlbWVudCgndHInLCBbXG4gICAgICAgICAgICAgICAgbWFrZUVsZW1lbnQoJ3RoJywgayksXG4gICAgICAgICAgICAgICAgbWFrZUVsZW1lbnQoJ3RkJywgdilcbiAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgdGFibGUuYXBwZW5kQ2hpbGQocm93KTtcbiAgICAgICAgICAgICsraWR4O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZm9yICh2YXIgZmlzaSA9IDA7IGZpc2kgPCBmZWF0dXJlSW5mby5zZWN0aW9ucy5sZW5ndGg7ICsrZmlzaSkge1xuICAgICAgICB2YXIgc2VjdGlvbiA9IGZlYXR1cmVJbmZvLnNlY3Rpb25zW2Zpc2ldO1xuICAgICAgICB0YWJsZS5hcHBlbmRDaGlsZChtYWtlRWxlbWVudCgndHInLCBbXG4gICAgICAgICAgICBtYWtlRWxlbWVudCgndGgnLCBzZWN0aW9uLmxhYmVsKSxcbiAgICAgICAgICAgIG1ha2VFbGVtZW50KCd0ZCcsIHNlY3Rpb24uaW5mbyldKSk7XG4gICAgfSAgICAgICAgXG5cbiAgICB0aGlzLnBvcGl0KGV2LCBmZWF0dXJlSW5mby50aXRsZSB8fCAnRmVhdHVyZScsIHRhYmxlLCB7d2lkdGg6IDQ1MH0pO1xufVxuXG5mdW5jdGlvbiBtYXliZUNvbmNhdChhLCBiKSB7XG4gICAgdmFyIGwgPSBbXTtcbiAgICBpZiAoYSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGEubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIHB1c2huZXcobCwgYVtpXSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGIpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBiLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICBwdXNobmV3KGwsIGJbaV0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBsO1xufVxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbmlmICh0eXBlb2YocmVxdWlyZSkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgdmFyIHV0aWxzID0gcmVxdWlyZSgnLi91dGlscycpO1xuICAgIHZhciBwdXNobyA9IHV0aWxzLnB1c2hvO1xuICAgIHZhciBwdXNobmV3byA9IHV0aWxzLnB1c2huZXdvO1xufVxuXG5mdW5jdGlvbiBzb3J0RmVhdHVyZXModGllcilcbntcbiAgICB2YXIgZG1pbiA9IHRpZXIuYnJvd3Nlci5kcmF3blN0YXJ0LCBkbWF4ID0gdGllci5icm93c2VyLmRyYXduRW5kO1xuICAgIHZhciB1bmdyb3VwZWRGZWF0dXJlcyA9IHt9O1xuICAgIHZhciBncm91cGVkRmVhdHVyZXMgPSB7fTtcbiAgICB2YXIgZHJhd25Hcm91cGVkRmVhdHVyZXMgPSB7fTtcbiAgICB2YXIgZ3JvdXBNaW5zID0ge30sIGdyb3VwTWF4ZXMgPSB7fTtcbiAgICB2YXIgZ3JvdXBzID0ge307XG4gICAgdmFyIHN1cGVyR3JvdXBzID0ge307XG4gICAgdmFyIGdyb3Vwc1RvU3VwZXJzID0ge307XG4gICAgdmFyIG5vblBvc2l0aW9uYWwgPSBbXTtcbiAgICB2YXIgbWluU2NvcmUsIG1heFNjb3JlO1xuICAgIHZhciBmYmlkO1xuXG4gICAgdmFyIGluaXRfZmJpZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBmYmlkID0ge307XG4gICAgICAgIGZvciAodmFyIGZpID0gMDsgZmkgPCB0aWVyLmN1cnJlbnRGZWF0dXJlcy5sZW5ndGg7ICsrZmkpIHtcbiAgICAgICAgICAgIHZhciBmID0gdGllci5jdXJyZW50RmVhdHVyZXNbZmldO1xuICAgICAgICAgICAgaWYgKGYuaWQpIHtcbiAgICAgICAgICAgICAgICBmYmlkW2YuaWRdID0gZjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgXG4gICAgdmFyIHN1cGVyUGFyZW50c09mID0gZnVuY3Rpb24oZikge1xuICAgICAgICAvLyBGSVhNRTogc2hvdWxkIHJlY3VyLlxuICAgICAgICB2YXIgc3BpZHMgPSBbXTtcbiAgICAgICAgaWYgKGYucGFyZW50cykge1xuICAgICAgICAgICAgZm9yICh2YXIgcGkgPSAwOyBwaSA8IGYucGFyZW50cy5sZW5ndGg7ICsrcGkpIHtcbiAgICAgICAgICAgICAgICB2YXIgcGlkID0gZi5wYXJlbnRzW3BpXTtcbiAgICAgICAgICAgICAgICB2YXIgcCA9IGZiaWRbcGlkXTtcbiAgICAgICAgICAgICAgICBpZiAoIXApIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIGFsZXJ0KHAudHlwZSArICc6JyArIHAudHlwZUN2KTtcbiAgICAgICAgICAgICAgICBpZiAocC50eXBlQ3YgPT0gJ1NPOjAwMDA3MDQnKSB7XG4gICAgICAgICAgICAgICAgICAgIHB1c2huZXcoc3BpZHMsIHBpZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzcGlkcztcbiAgICB9XG5cbiAgICBmb3IgKHZhciBmaSA9IDA7IGZpIDwgdGllci5jdXJyZW50RmVhdHVyZXMubGVuZ3RoOyArK2ZpKSB7XG4gICAgICAgIHZhciBmID0gdGllci5jdXJyZW50RmVhdHVyZXNbZmldO1xuICAgICAgICBpZiAoZi5wYXJ0cykge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZHJhd24gPSBmLm1pbiA8PSBkbWF4ICYmIGYubWF4ID49IGRtaW47XG5cbiAgICAgICAgaWYgKCFmLm1pbiB8fCAhZi5tYXgpIHtcbiAgICAgICAgICAgIG5vblBvc2l0aW9uYWwucHVzaChmKTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGYuc2NvcmUgJiYgZi5zY29yZSAhPSAnLicgJiYgZi5zY29yZSAhPSAnLScpIHtcbiAgICAgICAgICAgIHZhciBzYyA9IDEuMCAqIGYuc2NvcmU7XG4gICAgICAgICAgICBpZiAoIW1pblNjb3JlIHx8IHNjIDwgbWluU2NvcmUpIHtcbiAgICAgICAgICAgICAgICBtaW5TY29yZSA9IHNjO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFtYXhTY29yZSB8fCBzYyA+IG1heFNjb3JlKSB7XG4gICAgICAgICAgICAgICAgbWF4U2NvcmUgPSBzYztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBmR3JvdXBzID0gW107XG4gICAgICAgIHZhciBmU3VwZXJHcm91cCA9IG51bGw7XG4gICAgICAgIGlmIChmLmdyb3Vwcykge1xuICAgICAgICAgICAgZm9yICh2YXIgZ2kgPSAwOyBnaSA8IGYuZ3JvdXBzLmxlbmd0aDsgKytnaSkge1xuICAgICAgICAgICAgICAgIHZhciBnID0gZi5ncm91cHNbZ2ldO1xuICAgICAgICAgICAgICAgIHZhciBnaWQgPSBnLmlkO1xuICAgICAgICAgICAgICAgIGlmIChnLnR5cGUgPT0gJ2dlbmUnKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIExpa2UgYSBzdXBlci1ncm91cGVyLi4uXG4gICAgICAgICAgICAgICAgICAgIGZTdXBlckdyb3VwID0gZ2lkOyBcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXBzW2dpZF0gPSBnO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZy50eXBlID09ICd0cmFuc2xhdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gaGF2ZSB0byBpZ25vcmUgdGhpcyB0byBnZXQgc2Vuc2libGUgcmVzdWx0cyBmcm9tIGJqLWUgOi0oLlxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHB1c2hvKGdyb3VwZWRGZWF0dXJlcywgZ2lkLCBmKTtcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXBzW2dpZF0gPSBnO1xuICAgICAgICAgICAgICAgICAgICBmR3JvdXBzLnB1c2goZ2lkKTtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgb2dtID0gZ3JvdXBNaW5zW2dpZF07XG4gICAgICAgICAgICAgICAgICAgIGlmICghb2dtIHx8IGYubWluIDwgb2dtKVxuICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBNaW5zW2dpZF0gPSBmLm1pbjtcblxuICAgICAgICAgICAgICAgICAgICBvZ20gPSBncm91cE1heGVzW2dpZF07XG4gICAgICAgICAgICAgICAgICAgIGlmICghb2dtIHx8IGYubWF4ID4gb2dtKVxuICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXBNYXhlc1tnaWRdID0gZi5tYXg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGYucGFyZW50cykge1xuICAgICAgICAgICAgaWYgKCFmYmlkKSB7XG4gICAgICAgICAgICAgICAgaW5pdF9mYmlkKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKHZhciBwaSA9IDA7IHBpIDwgZi5wYXJlbnRzLmxlbmd0aDsgKytwaSkge1xuICAgICAgICAgICAgICAgIHZhciBwaWQgPSBmLnBhcmVudHNbcGldO1xuICAgICAgICAgICAgICAgIHZhciBwID0gZmJpZFtwaWRdO1xuICAgICAgICAgICAgICAgIGlmICghcCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBhbGVydChcImNvdWxkbid0IGZpbmQgXCIgKyBwaWQpO1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFwLnBhcnRzKSB7XG4gICAgICAgICAgICAgICAgICAgIHAucGFydHMgPSBbZl07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHB1c2huZXdvKGdyb3VwZWRGZWF0dXJlcywgcGlkLCBwKTtcbiAgICAgICAgICAgICAgICBwdXNobyhncm91cGVkRmVhdHVyZXMsIHBpZCwgZik7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKCFncm91cHNbcGlkXSkge1xuICAgICAgICAgICAgICAgICAgICBncm91cHNbcGlkXSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IHAudHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBwLmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IHAubGFiZWwgfHwgcC5pZFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmR3JvdXBzLnB1c2gocGlkKTtcblxuICAgICAgICAgICAgICAgIHZhciBvZ20gPSBncm91cE1pbnNbcGlkXTtcbiAgICAgICAgICAgICAgICBpZiAoIW9nbSB8fCBmLm1pbiA8IG9nbSlcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXBNaW5zW3BpZF0gPSBmLm1pbjtcblxuICAgICAgICAgICAgICAgIG9nbSA9IGdyb3VwTWF4ZXNbcGlkXTtcbiAgICAgICAgICAgICAgICBpZiAoIW9nbSB8fCBmLm1heCA+IG9nbSlcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXBNYXhlc1twaWRdID0gZi5tYXg7XG5cbiAgICAgICAgICAgICAgICB2YXIgc2dzID0gc3VwZXJQYXJlbnRzT2YocCk7XG4gICAgICAgICAgICAgICAgaWYgKHNncy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGZTdXBlckdyb3VwID0gc2dzWzBdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgc3AgPSBmYmlkW3Nnc1swXV07XG4gICAgICAgICAgICAgICAgICAgIGdyb3Vwc1tzZ3NbMF1dID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogc3AudHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBzcC5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiBzcC5sYWJlbCB8fCBzcC5pZFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXRpZXIuZGFzU291cmNlLmNvbGxhcHNlU3VwZXJHcm91cHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpZXIuZGFzU291cmNlLmNvbGxhcHNlU3VwZXJHcm91cHMgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSAgIFxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGZHcm91cHMubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgIGlmIChkcmF3bilcbiAgICAgICAgICAgICAgICBwdXNobyh1bmdyb3VwZWRGZWF0dXJlcywgZi50eXBlLCBmKTtcbiAgICAgICAgfSBlbHNlIGlmIChmU3VwZXJHcm91cCkge1xuICAgICAgICAgICAgZm9yICh2YXIgZyA9IDA7IGcgPCBmR3JvdXBzLmxlbmd0aDsgKytnKSB7XG4gICAgICAgICAgICAgICAgdmFyIGdpZCA9IGZHcm91cHNbZ107XG4gICAgICAgICAgICAgICAgcHVzaG5ld28oc3VwZXJHcm91cHMsIGZTdXBlckdyb3VwLCBnaWQpO1xuICAgICAgICAgICAgICAgIGdyb3Vwc1RvU3VwZXJzW2dpZF0gPSBmU3VwZXJHcm91cDtcbiAgICAgICAgICAgIH0gXG4gICAgICAgIH0gICAgICAgXG4gICAgfVxuXG4gICAgZm9yICh2YXIgZ2lkIGluIGdyb3VwZWRGZWF0dXJlcykge1xuICAgICAgICB2YXIgZ3JvdXAgPSBncm91cHNbZ2lkXTtcbiAgICAgICAgaWYgKHR5cGVvZihncm91cC5taW4pICE9PSAnbnVtYmVyJykgXG4gICAgICAgICAgICBncm91cC5taW4gPSBncm91cE1pbnNbZ2lkXTtcbiAgICAgICAgaWYgKHR5cGVvZihncm91cC5tYXgpICE9PSAnbnVtYmVyJykgXG4gICAgICAgICAgICBncm91cC5tYXggPSBncm91cE1heGVzW2dpZF07XG5cbiAgICAgICAgaWYgKGdyb3VwTWF4ZXNbZ2lkXSA+PSBkbWluICYmIGdyb3VwTWluc1tnaWRdIDw9IGRtYXgpXG4gICAgICAgICAgICBkcmF3bkdyb3VwZWRGZWF0dXJlc1tnaWRdID0gZ3JvdXBlZEZlYXR1cmVzW2dpZF07XG4gICAgfVxuXG4gICAgdGllci51bmdyb3VwZWRGZWF0dXJlcyA9IHVuZ3JvdXBlZEZlYXR1cmVzO1xuICAgIHRpZXIuZ3JvdXBlZEZlYXR1cmVzID0gZHJhd25Hcm91cGVkRmVhdHVyZXM7XG4gICAgdGllci5ncm91cHMgPSBncm91cHM7XG4gICAgdGllci5zdXBlckdyb3VwcyA9IHN1cGVyR3JvdXBzO1xuICAgIHRpZXIuZ3JvdXBzVG9TdXBlcnMgPSBncm91cHNUb1N1cGVycztcblxuICAgIGlmIChtaW5TY29yZSkge1xuICAgICAgICBpZiAobWluU2NvcmUgPiAwKSB7XG4gICAgICAgICAgICBtaW5TY29yZSA9IDA7XG4gICAgICAgIH0gZWxzZSBpZiAobWF4U2NvcmUgPCAwKSB7XG4gICAgICAgICAgICBtYXhTY29yZSA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgdGllci5jdXJyZW50RmVhdHVyZXNNaW5TY29yZSA9IG1pblNjb3JlO1xuICAgICAgICB0aWVyLmN1cnJlbnRGZWF0dXJlc01heFNjb3JlID0gbWF4U2NvcmU7XG4gICAgfVxufVxuXG5pZiAodHlwZW9mKG1vZHVsZSkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgICAgIHNvcnRGZWF0dXJlczogc29ydEZlYXR1cmVzXG4gICAgfTtcbn1cbiIsIi8qIC0qLSBtb2RlOiBqYXZhc2NyaXB0OyBjLWJhc2ljLW9mZnNldDogNDsgaW5kZW50LXRhYnMtbW9kZTogbmlsIC0qLSAqL1xuXG4vLyBcbi8vIERhbGxpYW5jZSBHZW5vbWUgRXhwbG9yZXJcbi8vIChjKSBUaG9tYXMgRG93biAyMDA2LTIwMTBcbi8vXG4vLyBnbHlwaHMuanM6IGNvbXBvbmVudHMgd2hpY2gga25vdyBob3cgdG8gZHJhdyB0aGVtc2VsdmVzXG4vL1xuXG5cInVzZSBzdHJpY3RcIjtcblxuaWYgKHR5cGVvZihyZXF1aXJlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB2YXIgc3BhbnMgPSByZXF1aXJlKCcuL3NwYW5zJyk7XG4gICAgdmFyIHVuaW9uID0gc3BhbnMudW5pb247XG4gICAgdmFyIFJhbmdlID0gc3BhbnMuUmFuZ2U7XG5cbiAgICB2YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XG4gICAgdmFyIG1ha2VFbGVtZW50TlMgPSB1dGlscy5tYWtlRWxlbWVudE5TO1xuICAgIHZhciBBTUlOT19BQ0lEX1RSQU5TTEFUSU9OID0gdXRpbHMuQU1JTk9fQUNJRF9UUkFOU0xBVElPTjtcblxuICAgIHZhciBzdmd1ID0gcmVxdWlyZSgnLi9zdmctdXRpbHMnKTtcbiAgICB2YXIgTlNfU1ZHID0gc3ZndS5OU19TVkc7XG4gICAgdmFyIE5TX1hMSU5LID0gc3ZndS5OU19YTElOSztcbiAgICB2YXIgU1ZHUGF0aCA9IHN2Z3UuU1ZHUGF0aDtcbn1cblxuZnVuY3Rpb24gUGF0aEdseXBoQmFzZShzdHJva2UsIGZpbGwpIHtcbiAgICB0aGlzLl9zdHJva2UgPSBzdHJva2U7XG4gICAgdGhpcy5fZmlsbCA9IGZpbGw7XG59XG5cblBhdGhHbHlwaEJhc2UucHJvdG90eXBlLmRyYXcgPSBmdW5jdGlvbihnKSB7XG4gICAgZy5iZWdpblBhdGgoKTtcbiAgICB0aGlzLmRyYXdQYXRoKGcpO1xuXG4gICAgaWYgKHRoaXMuX2ZpbGwpIHtcbiAgICAgICAgZy5maWxsU3R5bGUgPSB0aGlzLl9maWxsO1xuICAgICAgICBnLmZpbGwoKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuX3N0cm9rZSkge1xuICAgICAgICBnLnN0cm9rZVN0eWxlID0gdGhpcy5fc3Ryb2tlO1xuICAgICAgICBnLnN0cm9rZSgpO1xuICAgIH1cbn1cblxuUGF0aEdseXBoQmFzZS5wcm90b3R5cGUudG9TVkcgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgZyA9IG5ldyBTVkdQYXRoKCk7XG4gICAgdGhpcy5kcmF3UGF0aChnKTtcbiAgICBcbiAgICByZXR1cm4gbWFrZUVsZW1lbnROUyhcbiAgICAgICAgTlNfU1ZHLCAncGF0aCcsXG4gICAgICAgIG51bGwsXG4gICAgICAgIHtkOiBnLnRvUGF0aERhdGEoKSxcbiAgICAgICAgIGZpbGw6IHRoaXMuX2ZpbGwgfHwgJ25vbmUnLFxuICAgICAgICAgc3Ryb2tlOiB0aGlzLl9zdHJva2UgfHwgJ25vbmUnfSk7XG59XG5cblBhdGhHbHlwaEJhc2UucHJvdG90eXBlLmRyYXdQYXRoID0gZnVuY3Rpb24oZykge1xuICAgIHRocm93ICdkcmF3UGF0aCBtZXRob2Qgb24gUGF0aEdseXBoQmFzZSBtdXN0IGJlIG92ZXJyaWRkZW4nO1xufVxuXG5mdW5jdGlvbiBCb3hHbHlwaCh4LCB5LCB3aWR0aCwgaGVpZ2h0LCBmaWxsLCBzdHJva2UsIGFscGhhLCByYWRpdXMpIHtcbiAgICB0aGlzLnggPSB4O1xuICAgIHRoaXMueSA9IHk7XG4gICAgdGhpcy5fd2lkdGggPSB3aWR0aDtcbiAgICB0aGlzLl9oZWlnaHQgPSBoZWlnaHQ7XG4gICAgdGhpcy5maWxsID0gZmlsbDtcbiAgICB0aGlzLnN0cm9rZSA9IHN0cm9rZTtcbiAgICB0aGlzLl9hbHBoYSA9IGFscGhhO1xuICAgIHRoaXMuX3JhZGl1cyA9IHJhZGl1cyB8fCAwO1xufVxuXG5Cb3hHbHlwaC5wcm90b3R5cGUuZHJhdyA9IGZ1bmN0aW9uKGcpIHtcbiAgICB2YXIgciA9IHRoaXMuX3JhZGl1cztcblxuICAgIGlmIChyID4gMCkge1xuICAgICAgICBnLmJlZ2luUGF0aCgpO1xuICAgICAgICBnLm1vdmVUbyh0aGlzLnggKyByLCB0aGlzLnkpO1xuICAgICAgICBnLmxpbmVUbyh0aGlzLnggKyB0aGlzLl93aWR0aCAtIHIsIHRoaXMueSk7XG4gICAgICAgIGcuYXJjVG8odGhpcy54ICsgdGhpcy5fd2lkdGgsIHRoaXMueSwgdGhpcy54ICsgdGhpcy5fd2lkdGgsIHRoaXMueSArIHIsIHIpO1xuICAgICAgICBnLmxpbmVUbyh0aGlzLnggKyB0aGlzLl93aWR0aCwgdGhpcy55ICsgdGhpcy5faGVpZ2h0IC0gcik7XG4gICAgICAgIGcuYXJjVG8odGhpcy54ICsgdGhpcy5fd2lkdGgsIHRoaXMueSArIHRoaXMuX2hlaWdodCwgdGhpcy54ICsgdGhpcy5fd2lkdGggLSByLCB0aGlzLnkgKyB0aGlzLl9oZWlnaHQsIHIpO1xuICAgICAgICBnLmxpbmVUbyh0aGlzLnggKyByLCB0aGlzLnkgKyB0aGlzLl9oZWlnaHQpO1xuICAgICAgICBnLmFyY1RvKHRoaXMueCwgdGhpcy55ICsgdGhpcy5faGVpZ2h0LCB0aGlzLngsIHRoaXMueSArIHRoaXMuX2hlaWdodCAtIHIsIHIpO1xuICAgICAgICBnLmxpbmVUbyh0aGlzLngsIHRoaXMueSArIHIpO1xuICAgICAgICBnLmFyY1RvKHRoaXMueCwgdGhpcy55LCB0aGlzLnggKyByLCB0aGlzLnksIHIpO1xuICAgICAgICBnLmNsb3NlUGF0aCgpO1xuXG4gICAgICAgIGlmICh0aGlzLl9hbHBoYSAhPSBudWxsKSB7XG4gICAgICAgICAgICBnLnNhdmUoKTtcbiAgICAgICAgICAgIGcuZ2xvYmFsQWxwaGEgPSB0aGlzLl9hbHBoYTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKHRoaXMuZmlsbCkge1xuICAgICAgICAgICAgZy5maWxsU3R5bGUgPSB0aGlzLmZpbGw7XG4gICAgICAgICAgICBnLmZpbGwoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5zdHJva2UpIHtcbiAgICAgICAgICAgIGcuc3Ryb2tlU3R5bGUgPSB0aGlzLnN0cm9rZTtcbiAgICAgICAgICAgIGcubGluZVdpZHRoID0gMC41O1xuICAgICAgICAgICAgZy5zdHJva2UoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLl9hbHBoYSAhPSBudWxsKSB7XG4gICAgICAgICAgICBnLnJlc3RvcmUoKTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICh0aGlzLl9hbHBoYSAhPSBudWxsKSB7XG4gICAgICAgICAgICBnLnNhdmUoKTtcbiAgICAgICAgICAgIGcuZ2xvYmFsQWxwaGEgPSB0aGlzLl9hbHBoYTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmZpbGwpIHtcbiAgICAgICAgICAgIGcuZmlsbFN0eWxlID0gdGhpcy5maWxsO1xuICAgICAgICAgICAgZy5maWxsUmVjdCh0aGlzLngsIHRoaXMueSwgdGhpcy5fd2lkdGgsIHRoaXMuX2hlaWdodCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5zdHJva2UpIHtcbiAgICAgICAgICAgIGcuc3Ryb2tlU3R5bGUgPSB0aGlzLnN0cm9rZTtcbiAgICAgICAgICAgIGcubGluZVdpZHRoID0gMC41O1xuICAgICAgICAgICAgZy5zdHJva2VSZWN0KHRoaXMueCwgdGhpcy55LCB0aGlzLl93aWR0aCwgdGhpcy5faGVpZ2h0KVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuX2FscGhhICE9IG51bGwpIHtcbiAgICAgICAgICAgIGcucmVzdG9yZSgpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5Cb3hHbHlwaC5wcm90b3R5cGUudG9TVkcgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgcyA9IG1ha2VFbGVtZW50TlMoTlNfU1ZHLCAncmVjdCcsIG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAge3g6IHRoaXMueCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHk6IHRoaXMueSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiB0aGlzLl93aWR0aCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogdGhpcy5faGVpZ2h0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2U6IHRoaXMuc3Ryb2tlIHx8ICdub25lJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlV2lkdGg6IDAuNSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsbDogdGhpcy5maWxsIHx8ICdub25lJ30pO1xuICAgIGlmICh0aGlzLl9hbHBoYSAhPSBudWxsKSB7XG4gICAgICAgIHMuc2V0QXR0cmlidXRlKCdvcGFjaXR5JywgdGhpcy5fYWxwaGEpO1xuICAgIH1cblxuICAgIHJldHVybiBzO1xufVxuXG5Cb3hHbHlwaC5wcm90b3R5cGUubWluID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMueDtcbn1cblxuQm94R2x5cGgucHJvdG90eXBlLm1heCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnggKyB0aGlzLl93aWR0aDtcbn1cblxuQm94R2x5cGgucHJvdG90eXBlLmhlaWdodCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnkgKyB0aGlzLl9oZWlnaHQ7XG59XG5cblxuZnVuY3Rpb24gR3JvdXBHbHlwaChnbHlwaHMsIGNvbm5lY3Rvcikge1xuICAgIHRoaXMuZ2x5cGhzID0gZ2x5cGhzO1xuICAgIHRoaXMuY29ubmVjdG9yID0gY29ubmVjdG9yO1xuICAgIHRoaXMuaCA9IGdseXBoc1swXS5oZWlnaHQoKTtcblxuICAgIHZhciBjb3ZMaXN0ID0gW107XG4gICAgZm9yICh2YXIgZyA9IDA7IGcgPCBnbHlwaHMubGVuZ3RoOyArK2cpIHtcbiAgICAgICAgdmFyIGdnID0gZ2x5cGhzW2ddO1xuICAgICAgICBjb3ZMaXN0LnB1c2gobmV3IFJhbmdlKGdnLm1pbigpLCBnZy5tYXgoKSkpO1xuICAgICAgICB0aGlzLmggPSBNYXRoLm1heCh0aGlzLmgsIGdnLmhlaWdodCgpKTtcbiAgICB9XG4gICAgdGhpcy5jb3ZlcmFnZSA9IHVuaW9uKGNvdkxpc3QpO1xufVxuXG5Hcm91cEdseXBoLnByb3RvdHlwZS5kcmF3Q29ubmVjdG9ycyA9IGZ1bmN0aW9uKGcpIHtcbiAgICB2YXIgcmFuZ2VzID0gdGhpcy5jb3ZlcmFnZS5yYW5nZXMoKTtcbiAgICBmb3IgKHZhciByID0gMTsgciA8IHJhbmdlcy5sZW5ndGg7ICsrcikge1xuICAgICAgICB2YXIgZ2wgPSByYW5nZXNbcl07XG4gICAgICAgIHZhciBsYXN0ID0gcmFuZ2VzW3IgLSAxXTtcbiAgICAgICAgaWYgKGxhc3QgJiYgZ2wubWluKCkgPiBsYXN0Lm1heCgpKSB7XG4gICAgICAgICAgICB2YXIgc3RhcnQgPSBsYXN0Lm1heCgpO1xuICAgICAgICAgICAgdmFyIGVuZCA9IGdsLm1pbigpO1xuICAgICAgICAgICAgdmFyIG1pZCA9IChzdGFydCtlbmQpLzJcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKHRoaXMuY29ubmVjdG9yID09PSAnaGF0KycpIHtcbiAgICAgICAgICAgICAgICBnLm1vdmVUbyhzdGFydCwgdGhpcy5oLzIpO1xuICAgICAgICAgICAgICAgIGcubGluZVRvKG1pZCwgMCk7XG4gICAgICAgICAgICAgICAgZy5saW5lVG8oZW5kLCB0aGlzLmgvMik7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuY29ubmVjdG9yID09PSAnaGF0LScpIHtcbiAgICAgICAgICAgICAgICBnLm1vdmVUbyhzdGFydCwgdGhpcy5oLzIpO1xuICAgICAgICAgICAgICAgIGcubGluZVRvKG1pZCwgdGhpcy5oKTtcbiAgICAgICAgICAgICAgICBnLmxpbmVUbyhlbmQsIHRoaXMuaC8yKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5jb25uZWN0b3IgPT09ICdjb2xsYXBzZWQrJykge1xuICAgICAgICAgICAgICAgIGcubW92ZVRvKHN0YXJ0LCB0aGlzLmgvMik7XG4gICAgICAgICAgICAgICAgZy5saW5lVG8oZW5kLCB0aGlzLmgvMik7XG4gICAgICAgICAgICAgICAgaWYgKGVuZCAtIHN0YXJ0ID4gNCkge1xuICAgICAgICAgICAgICAgICAgICBnLm1vdmVUbyhtaWQgLSAyLCAodGhpcy5oLzIpIC0gMyk7XG4gICAgICAgICAgICAgICAgICAgIGcubGluZVRvKG1pZCArIDIsIHRoaXMuaC8yKTtcbiAgICAgICAgICAgICAgICAgICAgZy5saW5lVG8obWlkIC0gMiwgKHRoaXMuaC8yKSArIDMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5jb25uZWN0b3IgPT09ICdjb2xsYXBzZWQtJykge1xuICAgICAgICAgICAgICAgIGcubW92ZVRvKHN0YXJ0LCB0aGlzLmgvMik7XG4gICAgICAgICAgICAgICAgZy5saW5lVG8oZW5kLCB0aGlzLmgvMik7XG4gICAgICAgICAgICAgICAgaWYgKGVuZCAtIHN0YXJ0ID4gNCkge1xuICAgICAgICAgICAgICAgICAgICBnLm1vdmVUbyhtaWQgKyAyLCAodGhpcy5oLzIpIC0gMyk7XG4gICAgICAgICAgICAgICAgICAgIGcubGluZVRvKG1pZCAtIDIsIHRoaXMuaC8yKTtcbiAgICAgICAgICAgICAgICAgICAgZy5saW5lVG8obWlkICsgMiwgKHRoaXMuaC8yKSArIDMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZy5tb3ZlVG8oc3RhcnQsIHRoaXMuaC8yKTtcbiAgICAgICAgICAgICAgICBnLmxpbmVUbyhlbmQsIHRoaXMuaC8yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBsYXN0ID0gZ2w7XG4gICAgfVxufVxuXG5Hcm91cEdseXBoLnByb3RvdHlwZS5kcmF3ID0gZnVuY3Rpb24oZywgb2MpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuZ2x5cGhzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIHZhciBnbCA9IHRoaXMuZ2x5cGhzW2ldO1xuICAgICAgICBnbC5kcmF3KGcsIG9jKTtcbiAgICB9XG5cbiAgICBnLnN0cm9rZVN0eWxlID0gJ2JsYWNrJztcbiAgICBnLmJlZ2luUGF0aCgpO1xuICAgIHRoaXMuZHJhd0Nvbm5lY3RvcnMoZyk7XG4gICAgZy5zdHJva2UoKTtcbn1cblxuR3JvdXBHbHlwaC5wcm90b3R5cGUudG9TVkcgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgZyA9IG1ha2VFbGVtZW50TlMoTlNfU1ZHLCAnZycpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5nbHlwaHMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgZy5hcHBlbmRDaGlsZCh0aGlzLmdseXBoc1tpXS50b1NWRygpKTtcbiAgICB9XG5cbiAgICB2YXIgcCA9IG5ldyBTVkdQYXRoKCk7XG4gICAgdGhpcy5kcmF3Q29ubmVjdG9ycyhwKTtcblxuICAgIHZhciBwYXRoRGF0YSA9IHAudG9QYXRoRGF0YSgpO1xuICAgIGlmIChwYXRoRGF0YS5sZW5ndGggPiAwKSB7XG4gICAgICAgIHZhciBwYXRoID0gbWFrZUVsZW1lbnROUyhcbiAgICAgICAgICAgIE5TX1NWRywgJ3BhdGgnLFxuICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgIHtkOiBwLnRvUGF0aERhdGEoKSxcbiAgICAgICAgICAgICBmaWxsOiAnbm9uZScsXG4gICAgICAgICAgICAgc3Ryb2tlOiAnYmxhY2snLFxuICAgICAgICAgICAgIHN0cm9rZVdpZHRoOiAwLjV9KTtcbiAgICAgICAgZy5hcHBlbmRDaGlsZChwYXRoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZztcbn1cblxuR3JvdXBHbHlwaC5wcm90b3R5cGUubWluID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuY292ZXJhZ2UubWluKCk7XG59XG5cbkdyb3VwR2x5cGgucHJvdG90eXBlLm1heCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmNvdmVyYWdlLm1heCgpO1xufVxuXG5Hcm91cEdseXBoLnByb3RvdHlwZS5oZWlnaHQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5oO1xufVxuXG5cbmZ1bmN0aW9uIExpbmVHcmFwaEdseXBoKHBvaW50cywgY29sb3IsIGhlaWdodCkge1xuICAgIHRoaXMucG9pbnRzID0gcG9pbnRzO1xuICAgIHRoaXMuY29sb3IgPSBjb2xvcjtcbiAgICB0aGlzLl9oZWlnaHQgPSBoZWlnaHQgfHwgNTA7XG59XG5cbkxpbmVHcmFwaEdseXBoLnByb3RvdHlwZS5taW4gPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5wb2ludHNbMF0ueDtcbiAgICAvLyByZXR1cm4gdGhpcy5wb2ludHNbMF07XG59O1xuXG5MaW5lR3JhcGhHbHlwaC5wcm90b3R5cGUubWF4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMucG9pbnRzW3RoaXMucG9pbnRzLmxlbmd0aCAtIDFdLng7XG4gICAgLy8gcmV0dXJuIHRoaXMucG9pbnRzW3RoaXMucG9pbnRzLmxlbmd0aCAtIDJdO1xufTtcblxuTGluZUdyYXBoR2x5cGgucHJvdG90eXBlLmhlaWdodCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl9oZWlnaHQ7XG59XG5cbkxpbmVHcmFwaEdseXBoLnByb3RvdHlwZS5kcmF3ID0gZnVuY3Rpb24oZykge1xuICAgIGcuc2F2ZSgpO1xuICAgIGcuc3Ryb2tlU3R5bGUgPSB0aGlzLmNvbG9yO1xuICAgIGcubGluZVdpZHRoID0gMjtcbiAgICBnLmJlZ2luUGF0aCgpO1xuICAgIHRoaXMucG9pbnRzLmZvckVhY2goZnVuY3Rpb24ocCwgaSkge1xuICAgICAgICBpZiAoaSA9PT0gMClcbiAgICAgICAgICAgIGcubW92ZVRvKHAueCwgcC55KTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgZy5saW5lVG8ocC54LCBwLnkpO1xuICAgIH0pO1xuICAgIGcuc3Ryb2tlKCk7XG4gICAgZy5yZXN0b3JlKCk7XG59XG5cbkxpbmVHcmFwaEdseXBoLnByb3RvdHlwZS50b1NWRyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBwID0gbmV3IFNWR1BhdGgoKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucG9pbnRzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIHZhciB4ID0gdGhpcy5wb2ludHNbaV0ueDtcbiAgICAgICAgdmFyIHkgPSB0aGlzLnBvaW50c1tpXS55O1xuICAgICAgICBpZiAoaSA9PSAwKSB7XG4gICAgICAgICAgICBwLm1vdmVUbyh4LCB5KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHAubGluZVRvKHgsIHkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBtYWtlRWxlbWVudE5TKFxuICAgICAgICBOU19TVkcsICdwYXRoJyxcbiAgICAgICAgbnVsbCxcbiAgICAgICAge2Q6IHAudG9QYXRoRGF0YSgpLFxuICAgICAgICAgZmlsbDogJ25vbmUnLFxuICAgICAgICAgc3Ryb2tlOiB0aGlzLmNvbG9yLFxuICAgICAgICAgc3Ryb2tlV2lkdGg6ICcycHgnfSk7XG59XG5cbmZ1bmN0aW9uIExhYmVsbGVkR2x5cGgoR0xPQkFMX0dDLCBnbHlwaCwgdGV4dCwgdW5tZWFzdXJlZCwgYW5jaG9yLCBhbGlnbiwgZm9udCkge1xuICAgIHRoaXMuZ2x5cGggPSBnbHlwaDtcbiAgICB0aGlzLnRleHQgPSB0ZXh0O1xuICAgIHRoaXMuYW5jaG9yID0gYW5jaG9yIHx8ICdsZWZ0JztcbiAgICB0aGlzLmFsaWduID0gYWxpZ24gfHwgJ2JlbG93JztcbiAgICBpZiAoZm9udCkge1xuICAgICAgICB0aGlzLmZvbnQgPSBmb250O1xuICAgIH1cbiAgICBpZiAodGhpcy5mb250KSB7XG4gICAgICAgIEdMT0JBTF9HQy5zYXZlKCk7XG4gICAgICAgIEdMT0JBTF9HQy5mb250ID0gdGhpcy5mb250O1xuICAgIH1cbiAgICB2YXIgbWV0cmljcyA9IEdMT0JBTF9HQy5tZWFzdXJlVGV4dCh0ZXh0KTtcbiAgICBpZiAodGhpcy5mb250KSB7XG4gICAgICAgIEdMT0JBTF9HQy5yZXN0b3JlKCk7XG4gICAgfVxuICAgIHRoaXMudGV4dExlbiA9IG1ldHJpY3Mud2lkdGg7XG4gICAgdGhpcy50ZXh0SGVpZ2h0ID0gNTtcbiAgICB0aGlzLmJ1bXAgPSBnbHlwaC5idW1wO1xuICAgIHRoaXMubWVhc3VyZWQgPSAhdW5tZWFzdXJlZDtcbn1cblxuTGFiZWxsZWRHbHlwaC5wcm90b3R5cGUudG9TVkcgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgY2hpbGQgPSB0aGlzLmdseXBoLnRvU1ZHKCk7XG4gICAgdmFyIG9wdHMgPSB7fTtcbiAgICBcbiAgICBpZiAodGhpcy5hbGlnbiA9PSAnYWJvdmUnKSB7XG4gICAgICAgIGNoaWxkID0gbWFrZUVsZW1lbnROUyhOU19TVkcsICdnJywgY2hpbGQsIHt0cmFuc2Zvcm06IFwidHJhbnNsYXRlKDAsIFwiICsgKHRoaXMudGV4dEhlaWdodHwwICsgMikgKyBcIilcIn0pO1xuICAgICAgICBvcHRzLnkgPSB0aGlzLnRleHRIZWlnaHQ7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgb3B0cy55ID0gdGhpcy5nbHlwaC5oZWlnaHQoKSArIDE1O1xuICAgIH1cblxuICAgIGlmICh0aGlzLmZvbnQpIHtcbiAgICAgICAgb3B0cy5mb250U2l6ZSAgPSA3O1xuICAgIH1cblxuICAgIGlmICgnY2VudGVyJyA9PSB0aGlzLmFuY2hvcikge1xuICAgICAgICBvcHRzLnggPSAodGhpcy5nbHlwaC5taW4oKSArIHRoaXMuZ2x5cGgubWF4KCkgLSB0aGlzLnRleHRMZW4pIC8gMjtcbiAgICB9IGVsc2Uge1xuICAgICAgICBvcHRzLnggPSB0aGlzLmdseXBoLm1pbigpO1xuICAgIH1cblxuICAgIHJldHVybiBtYWtlRWxlbWVudE5TKE5TX1NWRywgJ2cnLFxuICAgICAgICBbY2hpbGQsXG4gICAgICAgICBtYWtlRWxlbWVudE5TKE5TX1NWRywgJ3RleHQnLCB0aGlzLnRleHQsIG9wdHMpXSk7XG59XG5cbkxhYmVsbGVkR2x5cGgucHJvdG90eXBlLm1pbiA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmdseXBoLm1pbigpO1xufVxuXG5MYWJlbGxlZEdseXBoLnByb3RvdHlwZS5tYXggPSBmdW5jdGlvbigpIHtcbiAgICBpZiAodGhpcy5tZWFzdXJlZClcbiAgICAgICAgcmV0dXJuIE1hdGgubWF4KHRoaXMuZ2x5cGgubWF4KCksICgxLjAqdGhpcy5nbHlwaC5taW4oKSkgKyB0aGlzLnRleHRMZW4gKyAxMCk7XG4gICAgZWxzZVxuICAgICAgICByZXR1cm4gdGhpcy5nbHlwaC5tYXgoKTtcbn1cblxuTGFiZWxsZWRHbHlwaC5wcm90b3R5cGUuaGVpZ2h0ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGggPSB0aGlzLmdseXBoLmhlaWdodCgpO1xuICAgIGlmICh0aGlzLm1lYXN1cmVkKSB7XG4gICAgICAgIGlmICh0aGlzLmFsaWduID09ICdhYm92ZScpIHtcbiAgICAgICAgICAgIGggKz0gdGhpcy50ZXh0SGVpZ2h0ICsgMjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGggKz0gMjA7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGg7XG59XG5cbkxhYmVsbGVkR2x5cGgucHJvdG90eXBlLmRyYXcgPSBmdW5jdGlvbihnLCBvYykge1xuICAgIGlmICh0aGlzLmFsaWduID09ICdhYm92ZScpIHtcbiAgICAgICAgZy5zYXZlKCk7XG4gICAgICAgIGcudHJhbnNsYXRlKDAsIHRoaXMudGV4dEhlaWdodCArIDIpO1xuICAgIH1cbiAgICB0aGlzLmdseXBoLmRyYXcoZyk7XG4gICAgaWYgKHRoaXMuYWxpZ24gPT0gJ2Fib3ZlJykge1xuICAgICAgICBnLnJlc3RvcmUoKTtcbiAgICB9XG5cbiAgICBvYy5yZWdpc3RlckdseXBoKHRoaXMpO1xufVxuXG5MYWJlbGxlZEdseXBoLnByb3RvdHlwZS5kcmF3T3ZlcmxheSA9IGZ1bmN0aW9uKGcsIG1pblZpc2libGUsIG1heFZpc2libGUpIHtcbiAgICBnLmZpbGxTdHlsZSA9ICdibGFjayc7XG4gICAgaWYgKHRoaXMuZm9udCkge1xuICAgICAgICBnLnNhdmUoKTtcbiAgICAgICAgZy5mb250ID0gdGhpcy5mb250O1xuICAgIH1cbiAgICB2YXIgcDtcbiAgICBpZiAoJ2NlbnRlcicgPT0gdGhpcy5hbmNob3IpIHtcbiAgICAgICAgcCA9ICh0aGlzLmdseXBoLm1pbigpICsgdGhpcy5nbHlwaC5tYXgoKSAtIHRoaXMudGV4dExlbikgLyAyO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHAgPSB0aGlzLmdseXBoLm1pbigpO1xuICAgICAgICBpZiAocCA8IG1pblZpc2libGUpIHtcbiAgICAgICAgICAgIHAgPSBNYXRoLm1pbihtaW5WaXNpYmxlLCB0aGlzLmdseXBoLm1heCgpIC0gdGhpcy50ZXh0TGVuKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnLmZpbGxUZXh0KHRoaXMudGV4dCwgcCwgdGhpcy5hbGlnbiA9PSAnYWJvdmUnID8gdGhpcy50ZXh0SGVpZ2h0IDogdGhpcy5nbHlwaC5oZWlnaHQoKSArIDE1KTtcbiAgICBpZiAodGhpcy5mb250KSB7XG4gICAgICAgIGcucmVzdG9yZSgpO1xuICAgIH1cbn1cblxuXG5cbmZ1bmN0aW9uIENyb3NzR2x5cGgoeCwgaGVpZ2h0LCBzdHJva2UpIHtcbiAgICB0aGlzLl94ID0geDtcbiAgICB0aGlzLl9oZWlnaHQgPSBoZWlnaHQ7XG4gICAgdGhpcy5fc3Ryb2tlID0gc3Ryb2tlO1xufVxuXG5Dcm9zc0dseXBoLnByb3RvdHlwZS5kcmF3ID0gZnVuY3Rpb24oZykge1xuICAgIHZhciBoaCA9IHRoaXMuX2hlaWdodC8yO1xuICAgIFxuICAgIGcuYmVnaW5QYXRoKCk7XG4gICAgZy5tb3ZlVG8odGhpcy5feCwgMCk7XG4gICAgZy5saW5lVG8odGhpcy5feCwgdGhpcy5faGVpZ2h0KTtcbiAgICBnLm1vdmVUbyh0aGlzLl94IC0gaGgsIGhoKTtcbiAgICBnLmxpbmVUbyh0aGlzLl94ICsgaGgsIGhoKTtcblxuICAgIGcuc3Ryb2tlU3R5bGUgPSB0aGlzLl9zdHJva2U7XG4gICAgZy5saW5lV2lkdGggPSAxO1xuXG4gICAgZy5zdHJva2UoKTtcbn1cblxuQ3Jvc3NHbHlwaC5wcm90b3R5cGUudG9TVkcgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgaGggPSB0aGlzLl9oZWlnaHQvMjtcblxuICAgIHZhciBnID0gbmV3IFNWR1BhdGgoKTtcbiAgICBnLm1vdmVUbyh0aGlzLl94LCAwKTtcbiAgICBnLmxpbmVUbyh0aGlzLl94LCB0aGlzLl9oZWlnaHQpO1xuICAgIGcubW92ZVRvKHRoaXMuX3ggLSBoaCwgaGgpO1xuICAgIGcubGluZVRvKHRoaXMuX3ggKyBoaCwgaGgpO1xuICAgIFxuICAgIHJldHVybiBtYWtlRWxlbWVudE5TKFxuICAgICAgICBOU19TVkcsICdwYXRoJyxcbiAgICAgICAgbnVsbCxcbiAgICAgICAge2Q6IGcudG9QYXRoRGF0YSgpLFxuICAgICAgICAgZmlsbDogJ25vbmUnLFxuICAgICAgICAgc3Ryb2tlOiB0aGlzLl9zdHJva2UsXG4gICAgICAgICBzdHJva2VXaWR0aDogJzFweCd9KTtcbn1cblxuQ3Jvc3NHbHlwaC5wcm90b3R5cGUubWluID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX3ggLSB0aGlzLl9oZWlnaHQvMjtcbn1cblxuQ3Jvc3NHbHlwaC5wcm90b3R5cGUubWF4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX3ggKyB0aGlzLl9oZWlnaHQvMjtcbn1cblxuQ3Jvc3NHbHlwaC5wcm90b3R5cGUuaGVpZ2h0ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX2hlaWdodDtcbn1cblxuZnVuY3Rpb24gRXhHbHlwaCh4LCBoZWlnaHQsIHN0cm9rZSkge1xuICAgIHRoaXMuX3ggPSB4O1xuICAgIHRoaXMuX2hlaWdodCA9IGhlaWdodDtcbiAgICB0aGlzLl9zdHJva2UgPSBzdHJva2U7XG59XG5cbkV4R2x5cGgucHJvdG90eXBlLmRyYXcgPSBmdW5jdGlvbihnKSB7XG4gICAgdmFyIGhoID0gdGhpcy5faGVpZ2h0LzI7XG4gICAgXG4gICAgZy5iZWdpblBhdGgoKTtcbiAgICBnLm1vdmVUbyh0aGlzLl94IC0gaGgsIDApO1xuICAgIGcubGluZVRvKHRoaXMuX3ggKyBoaCwgdGhpcy5faGVpZ2h0KTtcbiAgICBnLm1vdmVUbyh0aGlzLl94IC0gaGgsIHRoaXMuX2hlaWdodCk7XG4gICAgZy5saW5lVG8odGhpcy5feCArIGhoLCAwKTtcblxuICAgIGcuc3Ryb2tlU3R5bGUgPSB0aGlzLl9zdHJva2U7XG4gICAgZy5saW5lV2lkdGggPSAxO1xuXG4gICAgZy5zdHJva2UoKTtcbn1cblxuRXhHbHlwaC5wcm90b3R5cGUudG9TVkcgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgaGggPSB0aGlzLl9oZWlnaHQvMjtcblxuICAgIHZhciBnID0gbmV3IFNWR1BhdGgoKTtcbiAgICBnLm1vdmVUbyh0aGlzLl94IC0gaGgsIDApO1xuICAgIGcubGluZVRvKHRoaXMuX3ggKyBoaCwgdGhpcy5faGVpZ2h0KTtcbiAgICBnLm1vdmVUbyh0aGlzLl94IC0gaGgsIHRoaXMuX2hlaWdodCk7XG4gICAgZy5saW5lVG8odGhpcy5feCArIGhoLCAwKTtcbiAgICBcbiAgICByZXR1cm4gbWFrZUVsZW1lbnROUyhcbiAgICAgICAgTlNfU1ZHLCAncGF0aCcsXG4gICAgICAgIG51bGwsXG4gICAgICAgIHtkOiBnLnRvUGF0aERhdGEoKSxcbiAgICAgICAgIGZpbGw6ICdub25lJyxcbiAgICAgICAgIHN0cm9rZTogdGhpcy5fc3Ryb2tlLFxuICAgICAgICAgc3Ryb2tlV2lkdGg6ICcxcHgnfSk7XG59XG5cbkV4R2x5cGgucHJvdG90eXBlLm1pbiA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl94IC0gdGhpcy5faGVpZ2h0LzI7XG59XG5cbkV4R2x5cGgucHJvdG90eXBlLm1heCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl94ICsgdGhpcy5faGVpZ2h0LzI7XG59XG5cbkV4R2x5cGgucHJvdG90eXBlLmhlaWdodCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl9oZWlnaHQ7XG59XG5cblxuXG5mdW5jdGlvbiBUcmlhbmdsZUdseXBoKHgsIGhlaWdodCwgZGlyLCB3aWR0aCwgZmlsbCwgc3Ryb2tlKSB7XG4gICAgUGF0aEdseXBoQmFzZS5jYWxsKHRoaXMsIHN0cm9rZSwgZmlsbCk7XG5cbiAgICB0aGlzLl94ID0geDtcbiAgICB0aGlzLl9oZWlnaHQgPSBoZWlnaHQ7XG4gICAgdGhpcy5fZGlyID0gZGlyO1xuICAgIHRoaXMuX3dpZHRoID0gd2lkdGg7XG59XG5cblRyaWFuZ2xlR2x5cGgucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShQYXRoR2x5cGhCYXNlLnByb3RvdHlwZSk7XG5cblRyaWFuZ2xlR2x5cGgucHJvdG90eXBlLmRyYXdQYXRoID0gZnVuY3Rpb24oZykge1xuICAgIHZhciBoaCA9IHRoaXMuX2hlaWdodC8yO1xuICAgIHZhciBodyA9IHRoaXMuX3dpZHRoLzI7XG5cbiAgICBpZiAodGhpcy5fZGlyID09PSAnUycpIHtcbiAgICAgICAgZy5tb3ZlVG8odGhpcy5feCwgdGhpcy5faGVpZ2h0KTtcbiAgICAgICAgZy5saW5lVG8odGhpcy5feCAtIGh3LCAwKTtcbiAgICAgICAgZy5saW5lVG8odGhpcy5feCArIGh3LCAwKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuX2RpciA9PT0gJ1cnKSB7XG4gICAgICAgIGcubW92ZVRvKHRoaXMuX3ggKyBodywgaGgpO1xuICAgICAgICBnLmxpbmVUbyh0aGlzLl94IC0gaHcsIDApO1xuICAgICAgICBnLmxpbmVUbyh0aGlzLl94IC0gaHcsIHRoaXMuX2hlaWdodCk7XG4gICAgfSBlbHNlIGlmICh0aGlzLl9kaXIgPT09ICdFJykge1xuICAgICAgICBnLm1vdmVUbyh0aGlzLl94IC0gaHcsIGhoKTtcbiAgICAgICAgZy5saW5lVG8odGhpcy5feCArIGh3LCAwKTtcbiAgICAgICAgZy5saW5lVG8odGhpcy5feCArIGh3LCB0aGlzLl9oZWlnaHQpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGcubW92ZVRvKHRoaXMuX3ggLCAwKTtcbiAgICAgICAgZy5saW5lVG8odGhpcy5feCArIGh3LCB0aGlzLl9oZWlnaHQpO1xuICAgICAgICBnLmxpbmVUbyh0aGlzLl94IC0gaHcsIHRoaXMuX2hlaWdodCk7XG4gICAgfVxuXG4gICAgZy5jbG9zZVBhdGgoKTtcbn1cblxuVHJpYW5nbGVHbHlwaC5wcm90b3R5cGUubWluID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX3ggLSB0aGlzLl9oZWlnaHQvMjtcbn1cblxuVHJpYW5nbGVHbHlwaC5wcm90b3R5cGUubWF4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX3ggKyB0aGlzLl9oZWlnaHQvMjtcbn1cblxuVHJpYW5nbGVHbHlwaC5wcm90b3R5cGUuaGVpZ2h0ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX2hlaWdodDtcbn1cblxuXG5cblxuZnVuY3Rpb24gRG90R2x5cGgoeCwgaGVpZ2h0LCBmaWxsLCBzdHJva2UpIHtcbiAgICB0aGlzLl94ID0geDtcbiAgICB0aGlzLl9oZWlnaHQgPSBoZWlnaHQ7XG4gICAgdGhpcy5fZmlsbCA9IGZpbGw7XG4gICAgdGhpcy5fc3Ryb2tlID0gc3Ryb2tlO1xufVxuXG5Eb3RHbHlwaC5wcm90b3R5cGUuZHJhdyA9IGZ1bmN0aW9uKGcpIHtcbiAgICB2YXIgaGggPSB0aGlzLl9oZWlnaHQvMjtcbiAgICBnLmZpbGxTdHlsZSA9IHRoaXMuX3N0cm9rZTtcbiAgICBnLmJlZ2luUGF0aCgpO1xuICAgIGcuYXJjKHRoaXMuX3gsIGhoLCBoaCwgMCwgNi4yOSk7XG5cbiAgICBpZiAodGhpcy5fZmlsbCkge1xuICAgICAgICBnLmZpbGxTdHlsZSA9IHRoaXMuX2ZpbGw7XG4gICAgICAgIGcuZmlsbCgpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9zdHJva2UpIHtcbiAgICAgICAgZy5zdHJva2VTdHlsZSA9IHRoaXMuX3N0cm9rZTtcbiAgICAgICAgZy5zdHJva2UoKTtcbiAgICB9XG59XG5cbkRvdEdseXBoLnByb3RvdHlwZS50b1NWRyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBoaCA9IHRoaXMuX2hlaWdodC8yO1xuICAgIHJldHVybiBtYWtlRWxlbWVudE5TKFxuICAgICAgICBOU19TVkcsICdjaXJjbGUnLFxuICAgICAgICBudWxsLFxuICAgICAgICB7Y3g6IHRoaXMuX3gsIGN5OiBoaCwgcjogaGgsXG4gICAgICAgICBmaWxsOiB0aGlzLl9maWxsIHx8ICdub25lJyxcbiAgICAgICAgIHN0cm9rZTogdGhpcy5fc3Ryb2tlIHx8ICdub25lJyxcbiAgICAgICAgIHN0cm9rZVdpZHRoOiAnMXB4J30pO1xufVxuXG5Eb3RHbHlwaC5wcm90b3R5cGUubWluID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX3ggLSB0aGlzLl9oZWlnaHQvMjtcbn1cblxuRG90R2x5cGgucHJvdG90eXBlLm1heCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl94ICsgdGhpcy5faGVpZ2h0LzI7XG59XG5cbkRvdEdseXBoLnByb3RvdHlwZS5oZWlnaHQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5faGVpZ2h0O1xufVxuXG5cbmZ1bmN0aW9uIFBhZGRlZEdseXBoKGdseXBoLCBtaW5wLCBtYXhwKSB7XG4gICAgdGhpcy5nbHlwaCA9IGdseXBoO1xuICAgIHRoaXMuX21pbiA9IG1pbnA7XG4gICAgdGhpcy5fbWF4ID0gbWF4cDtcbiAgICBpZiAoZ2x5cGgpIHtcbiAgICAgICAgdGhpcy5idW1wID0gZ2x5cGguYnVtcDtcbiAgICB9XG59XG5cblBhZGRlZEdseXBoLnByb3RvdHlwZS5kcmF3ID0gZnVuY3Rpb24oZywgb2MpIHtcbiAgICBpZiAodGhpcy5nbHlwaCkgXG4gICAgICAgIHRoaXMuZ2x5cGguZHJhdyhnLCBvYyk7XG59XG5cblBhZGRlZEdseXBoLnByb3RvdHlwZS50b1NWRyA9IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLmdseXBoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdseXBoLnRvU1ZHKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG1ha2VFbGVtZW50TlMoTlNfU1ZHLCAnZycpO1xuICAgIH1cbn1cblxuUGFkZGVkR2x5cGgucHJvdG90eXBlLm1pbiA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl9taW47XG59XG5cblBhZGRlZEdseXBoLnByb3RvdHlwZS5tYXggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5fbWF4O1xufVxuXG5QYWRkZWRHbHlwaC5wcm90b3R5cGUuaGVpZ2h0ID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMuZ2x5cGgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2x5cGguaGVpZ2h0KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIDE7XG4gICAgfVxufVxuXG5cbmZ1bmN0aW9uIEFBcnJvd0dseXBoKG1pbiwgbWF4LCBoZWlnaHQsIGZpbGwsIHN0cm9rZSwgb3JpKSB7XG4gICAgUGF0aEdseXBoQmFzZS5jYWxsKHRoaXMsIHN0cm9rZSwgZmlsbCk7XG4gICAgdGhpcy5fbWluID0gbWluO1xuICAgIHRoaXMuX21heCA9IG1heDtcbiAgICB0aGlzLl9oZWlnaHQgPSBoZWlnaHQ7XG4gICAgdGhpcy5fb3JpID0gb3JpO1xufVxuXG5BQXJyb3dHbHlwaC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFBhdGhHbHlwaEJhc2UucHJvdG90eXBlKTtcblxuQUFycm93R2x5cGgucHJvdG90eXBlLm1pbiA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl9taW47XG59XG5cbkFBcnJvd0dseXBoLnByb3RvdHlwZS5tYXggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5fbWF4O1xufVxuXG5BQXJyb3dHbHlwaC5wcm90b3R5cGUuaGVpZ2h0ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX2hlaWdodDtcbn1cblxuQUFycm93R2x5cGgucHJvdG90eXBlLmRyYXdQYXRoID0gZnVuY3Rpb24oZykge1xuICAgIHZhciBtYXhQb3MgPSB0aGlzLl9tYXg7XG4gICAgdmFyIG1pblBvcyA9IHRoaXMuX21pbjtcbiAgICB2YXIgaGVpZ2h0ID0gdGhpcy5faGVpZ2h0O1xuICAgIHZhciBsSW5zZXQgPSAwO1xuICAgIHZhciBySW5zZXQgPSAwO1xuICAgIHZhciBtaW5MZW5ndGggPSB0aGlzLl9oZWlnaHQgKyAyO1xuICAgIHZhciBpbnN0ZXAgPSAwLjMzMzMzMyAqIHRoaXMuX2hlaWdodDtcbiAgICB2YXIgeSA9IDA7XG5cbiAgICBpZiAodGhpcy5fb3JpKSB7XG4gICAgICAgIGlmICh0aGlzLl9vcmkgPT09ICcrJykge1xuICAgICAgICAgICAgckluc2V0ID0gMC41ICogdGhpcy5faGVpZ2h0O1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuX29yaSA9PT0gJy0nKSB7XG4gICAgICAgICAgICBsSW5zZXQgPSAwLjUgKiB0aGlzLl9oZWlnaHQ7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAobWF4UG9zIC0gbWluUG9zIDwgbWluTGVuZ3RoKSB7XG4gICAgICAgIG1pblBvcyA9IChtYXhQb3MgKyBtaW5Qb3MgLSBtaW5MZW5ndGgpIC8gMjtcbiAgICAgICAgbWF4UG9zID0gbWluUG9zICsgbWluTGVuZ3RoO1xuICAgIH1cblxuICAgIGcubW92ZVRvKG1pblBvcyArIGxJbnNldCwgeStpbnN0ZXApO1xuICAgIGcubGluZVRvKG1heFBvcyAtIHJJbnNldCwgeStpbnN0ZXApO1xuICAgIGcubGluZVRvKG1heFBvcyAtIHJJbnNldCwgeSk7XG4gICAgZy5saW5lVG8obWF4UG9zLCB5ICsgdGhpcy5faGVpZ2h0LzIpO1xuICAgIGcubGluZVRvKG1heFBvcyAtIHJJbnNldCwgeStoZWlnaHQpO1xuICAgIGcubGluZVRvKG1heFBvcyAtIHJJbnNldCwgeStpbnN0ZXAraW5zdGVwKTtcbiAgICBnLmxpbmVUbyhtaW5Qb3MgKyBsSW5zZXQsIHkraW5zdGVwK2luc3RlcCk7XG4gICAgZy5saW5lVG8obWluUG9zICsgbEluc2V0LCB5K2hlaWdodCk7XG4gICAgZy5saW5lVG8obWluUG9zLCB5K2hlaWdodC8yKTtcbiAgICBnLmxpbmVUbyhtaW5Qb3MgKyBsSW5zZXQsIHkpO1xuICAgIGcubGluZVRvKG1pblBvcyArIGxJbnNldCwgeStpbnN0ZXApO1xufVxuXG5mdW5jdGlvbiBTcGFuR2x5cGgobWluLCBtYXgsIGhlaWdodCwgc3Ryb2tlKSB7XG4gICAgUGF0aEdseXBoQmFzZS5jYWxsKHRoaXMsIHN0cm9rZSwgbnVsbCk7XG4gICAgdGhpcy5fbWluID0gbWluO1xuICAgIHRoaXMuX21heCA9IG1heDtcbiAgICB0aGlzLl9oZWlnaHQgPSBoZWlnaHQ7XG59XG5cblNwYW5HbHlwaC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFBhdGhHbHlwaEJhc2UucHJvdG90eXBlKTtcblxuU3BhbkdseXBoLnByb3RvdHlwZS5taW4gPSBmdW5jdGlvbigpIHtyZXR1cm4gdGhpcy5fbWlufTtcblNwYW5HbHlwaC5wcm90b3R5cGUubWF4ID0gZnVuY3Rpb24oKSB7cmV0dXJuIHRoaXMuX21heH07XG5TcGFuR2x5cGgucHJvdG90eXBlLmhlaWdodCA9IGZ1bmN0aW9uKCkge3JldHVybiB0aGlzLl9oZWlnaHR9O1xuXG5TcGFuR2x5cGgucHJvdG90eXBlLmRyYXdQYXRoID0gZnVuY3Rpb24oZykge1xuICAgIHZhciBtaW5Qb3MgPSB0aGlzLl9taW4sIG1heFBvcyA9IHRoaXMuX21heDtcbiAgICB2YXIgaGVpZ2h0ID0gdGhpcy5faGVpZ2h0LCBoaCA9IGhlaWdodC8yO1xuICAgIGcubW92ZVRvKG1pblBvcywgaGgpO1xuICAgIGcubGluZVRvKG1heFBvcywgaGgpO1xuICAgIGcubW92ZVRvKG1pblBvcywgMCk7XG4gICAgZy5saW5lVG8obWluUG9zLCBoZWlnaHQpO1xuICAgIGcubW92ZVRvKG1heFBvcywgMCk7XG4gICAgZy5saW5lVG8obWF4UG9zLCBoZWlnaHQpO1xufVxuXG5mdW5jdGlvbiBMaW5lR2x5cGgobWluLCBtYXgsIGhlaWdodCwgc3R5bGUsIHN0cmFuZCwgc3Ryb2tlKSB7XG4gICAgdGhpcy5fbWluID0gbWluO1xuICAgIHRoaXMuX21heCA9IG1heDtcbiAgICB0aGlzLl9oZWlnaHQgPSBoZWlnaHQ7XG4gICAgdGhpcy5fc3R5bGUgPSBzdHlsZTtcbiAgICB0aGlzLl9zdHJhbmQgPSBzdHJhbmQ7XG4gICAgdGhpcy5fc3Ryb2tlID0gc3Ryb2tlO1xufVxuXG5MaW5lR2x5cGgucHJvdG90eXBlLm1pbiA9IGZ1bmN0aW9uKCkge3JldHVybiB0aGlzLl9taW59O1xuTGluZUdseXBoLnByb3RvdHlwZS5tYXggPSBmdW5jdGlvbigpIHtyZXR1cm4gdGhpcy5fbWF4fTtcbkxpbmVHbHlwaC5wcm90b3R5cGUuaGVpZ2h0ID0gZnVuY3Rpb24oKSB7cmV0dXJuIHRoaXMuX2hlaWdodH07XG5cbkxpbmVHbHlwaC5wcm90b3R5cGUuZHJhd1BhdGggPSBmdW5jdGlvbihnKSB7XG4gICAgdmFyIG1pblBvcyA9IHRoaXMuX21pbiwgbWF4UG9zID0gdGhpcy5fbWF4O1xuICAgIHZhciBoZWlnaHQgPSB0aGlzLl9oZWlnaHQsIGhoID0gaGVpZ2h0LzI7XG5cbiAgICBpZiAodGhpcy5fc3R5bGUgPT09ICdoYXQnKSB7XG4gICAgICAgIGcubW92ZVRvKG1pblBvcywgaGgpO1xuICAgICAgICBnLmxpbmVUbygobWluUG9zICsgbWF4UG9zKS8yLCB0aGlzLl9zdHJhbmQgPT09ICctJyA/IGhlaWdodCA6IDApO1xuICAgICAgICBnLmxpbmVUbyhtYXhQb3MsIGhoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBnLm1vdmVUbyhtaW5Qb3MsIGhoKTtcbiAgICAgICAgZy5saW5lVG8obWF4UG9zLCBoaCk7XG4gICAgfVxufVxuXG5cbkxpbmVHbHlwaC5wcm90b3R5cGUuZHJhdyA9IGZ1bmN0aW9uKGcpIHtcbiAgICBnLmJlZ2luUGF0aCgpO1xuICAgIHRoaXMuZHJhd1BhdGgoZyk7XG4gICAgZy5zdHJva2VTdHlsZSA9IHRoaXMuX3N0cm9rZTtcbiAgICBpZiAodGhpcy5fc3R5bGUgPT09ICdkYXNoZWQnICYmIGcuc2V0TGluZURhc2gpIHtcbiAgICAgICAgZy5zYXZlKCk7XG4gICAgICAgIGcuc2V0TGluZURhc2goWzNdKTtcbiAgICAgICAgZy5zdHJva2UoKTtcbiAgICAgICAgZy5yZXN0b3JlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZy5zdHJva2UoKTtcbiAgICB9XG59XG5cbkxpbmVHbHlwaC5wcm90b3R5cGUudG9TVkcgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgZyA9IG5ldyBTVkdQYXRoKCk7XG4gICAgdGhpcy5kcmF3UGF0aChnKTtcbiAgICBcbiAgICB2YXIgb3B0cyA9IHtkOiBnLnRvUGF0aERhdGEoKSxcbiAgICAgICAgICAgIHN0cm9rZTogdGhpcy5fc3Ryb2tlIHx8ICdub25lJ307XG4gICAgaWYgKHRoaXMuX3N0eWxlID09PSAnZGFzaGVkJykge1xuICAgICAgICBvcHRzWydzdHJva2VEYXNoYXJyYXknXSA9ICczJztcbiAgICB9XG5cbiAgICByZXR1cm4gbWFrZUVsZW1lbnROUyhcbiAgICAgICAgTlNfU1ZHLCAncGF0aCcsXG4gICAgICAgIG51bGwsIG9wdHNcbiAgICApO1xufVxuXG5cblxuXG5cbmZ1bmN0aW9uIFByaW1lcnNHbHlwaChtaW4sIG1heCwgaGVpZ2h0LCBmaWxsLCBzdHJva2UpIHtcbiAgICB0aGlzLl9taW4gPSBtaW47XG4gICAgdGhpcy5fbWF4ID0gbWF4O1xuICAgIHRoaXMuX2hlaWdodCA9IGhlaWdodDtcbiAgICB0aGlzLl9maWxsID0gZmlsbDtcbiAgICB0aGlzLl9zdHJva2UgPSBzdHJva2U7XG59XG5cblByaW1lcnNHbHlwaC5wcm90b3R5cGUubWluID0gZnVuY3Rpb24oKSB7cmV0dXJuIHRoaXMuX21pbn07XG5QcmltZXJzR2x5cGgucHJvdG90eXBlLm1heCA9IGZ1bmN0aW9uKCkge3JldHVybiB0aGlzLl9tYXh9O1xuUHJpbWVyc0dseXBoLnByb3RvdHlwZS5oZWlnaHQgPSBmdW5jdGlvbigpIHtyZXR1cm4gdGhpcy5faGVpZ2h0fTtcblxuXG5QcmltZXJzR2x5cGgucHJvdG90eXBlLmRyYXdTdGVtUGF0aCA9IGZ1bmN0aW9uKGcpIHtcbiAgICB2YXIgbWluUG9zID0gdGhpcy5fbWluLCBtYXhQb3MgPSB0aGlzLl9tYXg7XG4gICAgdmFyIGhlaWdodCA9IHRoaXMuX2hlaWdodCwgaGggPSBoZWlnaHQvMjtcbiAgICBnLm1vdmVUbyhtaW5Qb3MsIGhoKTtcbiAgICBnLmxpbmVUbyhtYXhQb3MsIGhoKTtcbn1cblxuUHJpbWVyc0dseXBoLnByb3RvdHlwZS5kcmF3VHJpZ3NQYXRoID0gZnVuY3Rpb24oZykge1xuICAgIHZhciBtaW5Qb3MgPSB0aGlzLl9taW4sIG1heFBvcyA9IHRoaXMuX21heDtcbiAgICB2YXIgaGVpZ2h0ID0gdGhpcy5faGVpZ2h0LCBoaCA9IGhlaWdodC8yO1xuICAgIGcubW92ZVRvKG1pblBvcywgMCk7XG4gICAgZy5saW5lVG8obWluUG9zICsgaGVpZ2h0LCBoaCk7XG4gICAgZy5saW5lVG8obWluUG9zLCBoZWlnaHQpO1xuICAgIGcubGluZVRvKG1pblBvcywgMCk7XG4gICAgZy5tb3ZlVG8obWF4UG9zLCAwKTtcbiAgICBnLmxpbmVUbyhtYXhQb3MgLSBoZWlnaHQsIGhoKTtcbiAgICBnLmxpbmVUbyhtYXhQb3MsIGhlaWdodCk7XG4gICAgZy5saW5lVG8obWF4UG9zLCAwKTtcbn1cblxuXG5QcmltZXJzR2x5cGgucHJvdG90eXBlLmRyYXcgPSBmdW5jdGlvbihnKSB7XG4gICAgZy5iZWdpblBhdGgoKTtcbiAgICB0aGlzLmRyYXdTdGVtUGF0aChnKTtcbiAgICBnLnN0cm9rZVN0eWxlID0gdGhpcy5fc3Ryb2tlO1xuICAgIGcuc3Ryb2tlKCk7XG4gICAgZy5iZWdpblBhdGgoKTtcbiAgICB0aGlzLmRyYXdUcmlnc1BhdGgoZyk7XG4gICAgZy5maWxsU3R5bGUgPSB0aGlzLl9maWxsO1xuICAgIGcuZmlsbCgpO1xufVxuXG5QcmltZXJzR2x5cGgucHJvdG90eXBlLnRvU1ZHID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHMgPSBuZXcgU1ZHUGF0aCgpO1xuICAgIHRoaXMuZHJhd1N0ZW1QYXRoKHMpO1xuICAgIHZhciB0ID0gbmV3IFNWR1BhdGgoKTtcbiAgICB0aGlzLmRyYXdUcmlnc1BhdGgodCk7XG4gICAgXG4gICAgcmV0dXJuIG1ha2VFbGVtZW50TlMoXG4gICAgICAgIE5TX1NWRywgJ2cnLFxuICAgICAgICBbbWFrZUVsZW1lbnROUyhcbiAgICAgICAgICAgIE5TX1NWRywgJ3BhdGgnLFxuICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgIHtkOiBzLnRvUGF0aERhdGEoKSxcbiAgICAgICAgICAgICBzdHJva2U6IHRoaXMuX3N0cm9rZSB8fCAnbm9uZSd9KSxcbiAgICAgICAgIG1ha2VFbGVtZW50TlMoXG4gICAgICAgICAgICAgTlNfU1ZHLCAncGF0aCcsXG4gICAgICAgICAgICAgbnVsbCxcbiAgICAgICAgICAgICB7ZDogdC50b1BhdGhEYXRhKCksXG4gICAgICAgICAgICAgIGZpbGw6IHRoaXMuX2ZpbGwgfHwgJ25vbmUnfSldKTtcbn1cblxuZnVuY3Rpb24gQXJyb3dHbHlwaChtaW4sIG1heCwgaGVpZ2h0LCBjb2xvciwgcGFyYWxsZWwsIHN3LCBuZSkge1xuICAgIFBhdGhHbHlwaEJhc2UuY2FsbCh0aGlzLCBudWxsLCBjb2xvcik7XG4gICAgdGhpcy5fbWluID0gbWluO1xuICAgIHRoaXMuX21heCA9IG1heDtcbiAgICB0aGlzLl9oZWlnaHQgPSBoZWlnaHQ7XG4gICAgdGhpcy5fY29sb3IgPSBjb2xvcjtcbiAgICB0aGlzLl9wYXJhbGxlbCA9IHBhcmFsbGVsO1xuICAgIHRoaXMuX3N3ID0gc3c7XG4gICAgdGhpcy5fbmUgPSBuZTtcbn1cblxuQXJyb3dHbHlwaC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFBhdGhHbHlwaEJhc2UucHJvdG90eXBlKTtcblxuQXJyb3dHbHlwaC5wcm90b3R5cGUubWluID0gZnVuY3Rpb24oKSB7cmV0dXJuIHRoaXMuX21pbn07XG5BcnJvd0dseXBoLnByb3RvdHlwZS5tYXggPSBmdW5jdGlvbigpIHtyZXR1cm4gdGhpcy5fbWF4fTtcbkFycm93R2x5cGgucHJvdG90eXBlLmhlaWdodCA9IGZ1bmN0aW9uKCkge3JldHVybiB0aGlzLl9oZWlnaHR9O1xuXG5BcnJvd0dseXBoLnByb3RvdHlwZS5kcmF3UGF0aCA9IGZ1bmN0aW9uKGcpIHtcbiAgICB2YXIgbWluID0gdGhpcy5fbWluLCBtYXggPSB0aGlzLl9tYXgsIGhlaWdodCA9IHRoaXMuX2hlaWdodDtcbiAgICBcbiAgICBpZiAodGhpcy5fcGFyYWxsZWwpIHtcbiAgICAgICAgdmFyIGhoID0gaGVpZ2h0LzI7XG4gICAgICAgIHZhciBpbnN0ZXAgPSAwLjQgKiBoZWlnaHQ7XG4gICAgICAgIGlmICh0aGlzLl9zdykge1xuICAgICAgICAgICAgZy5tb3ZlVG8obWluICsgaGgsIGhlaWdodC1pbnN0ZXApO1xuICAgICAgICAgICAgZy5saW5lVG8obWluICsgaGgsIGhlaWdodCk7XG4gICAgICAgICAgICBnLmxpbmVUbyhtaW4sIGhoKTtcbiAgICAgICAgICAgIGcubGluZVRvKG1pbiArIGhoLCAwKTtcbiAgICAgICAgICAgIGcubGluZVRvKG1pbiArIGhoLCBpbnN0ZXApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZy5tb3ZlVG8obWluLCBoZWlnaHQtaW5zdGVwKTtcbiAgICAgICAgICAgIGcubGluZVRvKG1pbiwgaW5zdGVwKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5fbmUpIHtcbiAgICAgICAgICAgIGcubGluZVRvKG1heCAtIGhoLCBpbnN0ZXApO1xuICAgICAgICAgICAgZy5saW5lVG8obWF4IC0gaGgsIDApO1xuICAgICAgICAgICAgZy5saW5lVG8obWF4LCBoaCk7XG4gICAgICAgICAgICBnLmxpbmVUbyhtYXggLSBoaCwgaGVpZ2h0KTtcbiAgICAgICAgICAgIGcubGluZVRvKG1heCAtIGhoLCBoZWlnaHQgLSBpbnN0ZXApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZy5saW5lVG8obWF4LCBpbnN0ZXApO1xuICAgICAgICAgICAgZy5saW5lVG8obWF4LCBoZWlnaHQtaW5zdGVwKTtcbiAgICAgICAgfVxuICAgICAgICBnLmNsb3NlUGF0aCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBtaWQgPSAobWluK21heCkvMjtcbiAgICAgICAgdmFyIGluc3RlcCA9IDAuNCoobWF4LW1pbik7XG4gICAgICAgIHZhciB0aCA9IGhlaWdodC8zO1xuXG4gICAgICAgIGlmICh0aGlzLl9uZSkge1xuICAgICAgICAgICAgZy5tb3ZlVG8obWluICsgaW5zdGVwLCB0aCk7XG4gICAgICAgICAgICBnLmxpbmVUbyhtaW4sIHRoKTtcbiAgICAgICAgICAgIGcubGluZVRvKG1pZCwgMCk7XG4gICAgICAgICAgICBnLmxpbmVUbyhtYXgsIHRoKTtcbiAgICAgICAgICAgIGcubGluZVRvKG1heCAtIGluc3RlcCwgdGgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZy5tb3ZlVG8obWluK2luc3RlcCwgMCk7XG4gICAgICAgICAgICBnLmxpbmVUbyhtYXgtaW5zdGVwLCAwKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5fc3cpIHtcbiAgICAgICAgICAgIGcubGluZVRvKG1heCAtIGluc3RlcCwgaGVpZ2h0LXRoKTtcbiAgICAgICAgICAgIGcubGluZVRvKG1heCwgaGVpZ2h0LXRoKTtcbiAgICAgICAgICAgIGcubGluZVRvKG1pZCwgaGVpZ2h0KTtcbiAgICAgICAgICAgIGcubGluZVRvKG1pbiwgaGVpZ2h0LXRoKVxuICAgICAgICAgICAgZy5saW5lVG8obWluICsgaW5zdGVwLCBoZWlnaHQtdGgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZy5saW5lVG8obWF4IC0gaW5zdGVwLCBoZWlnaHQpO1xuICAgICAgICAgICAgZy5saW5lVG8obWluICsgaW5zdGVwLCBoZWlnaHQpO1xuICAgICAgICB9XG4gICAgICAgIGcuY2xvc2VQYXRoKCk7XG4gICAgfVxufVxuXG5cbmZ1bmN0aW9uIFRvb01hbnlHbHlwaChtaW4sIG1heCwgaGVpZ2h0LCBmaWxsLCBzdHJva2UpIHtcbiAgICB0aGlzLl9taW4gPSBtaW47XG4gICAgdGhpcy5fbWF4ID0gbWF4O1xuICAgIHRoaXMuX2hlaWdodCA9IGhlaWdodDtcbiAgICB0aGlzLl9maWxsID0gZmlsbDtcbiAgICB0aGlzLl9zdHJva2UgPSBzdHJva2U7XG59XG5cblRvb01hbnlHbHlwaC5wcm90b3R5cGUubWluID0gZnVuY3Rpb24oKSB7cmV0dXJuIHRoaXMuX21pbn07XG5Ub29NYW55R2x5cGgucHJvdG90eXBlLm1heCA9IGZ1bmN0aW9uKCkge3JldHVybiB0aGlzLl9tYXh9O1xuVG9vTWFueUdseXBoLnByb3RvdHlwZS5oZWlnaHQgPSBmdW5jdGlvbigpIHtyZXR1cm4gdGhpcy5faGVpZ2h0fTtcblxuVG9vTWFueUdseXBoLnByb3RvdHlwZS50b1NWRyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBtYWtlRWxlbWVudE5TKE5TX1NWRywgJ3JlY3QnLCBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgIHt4OiB0aGlzLl9taW4sIFxuICAgICAgICAgICAgICAgICAgICAgICAgICB5OiAwLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IHRoaXMuX21heCAtIHRoaXMuX21pbiwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogdGhpcy5faGVpZ2h0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJva2U6IHRoaXMuX3N0cm9rZSB8fCAnbm9uZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGw6IHRoaXMuX2ZpbGwgfHwgJ25vbmUnfSk7XG59XG5cblRvb01hbnlHbHlwaC5wcm90b3R5cGUuZHJhdyA9IGZ1bmN0aW9uKGcpIHtcbiAgICBpZiAodGhpcy5fZmlsbCkge1xuICAgICAgICBnLmZpbGxTdHlsZSA9IHRoaXMuX2ZpbGw7XG4gICAgICAgIGcuZmlsbFJlY3QodGhpcy5fbWluLCAwLCB0aGlzLl9tYXggLSB0aGlzLl9taW4sIHRoaXMuX2hlaWdodCk7XG4gICAgfVxuICAgIGlmICh0aGlzLl9zdHJva2UpIHtcbiAgICAgICAgZy5zdHJva2VTdHlsZSA9IHRoaXMuX3N0cm9rZTtcbiAgICAgICAgZy5zdHJva2VSZWN0KHRoaXMuX21pbiwgMCwgdGhpcy5fbWF4IC0gdGhpcy5fbWluLCB0aGlzLl9oZWlnaHQpO1xuICAgICAgICBnLmJlZ2luUGF0aCgpO1xuICAgICAgICBmb3IgKHZhciBuID0gMjsgbiA8IHRoaXMuX2hlaWdodDsgbiArPSAzKSB7XG4gICAgICAgICAgICBnLm1vdmVUbyh0aGlzLl9taW4sIG4pO1xuICAgICAgICAgICAgZy5saW5lVG8odGhpcy5fbWF4LCBuKTtcbiAgICAgICAgfVxuICAgICAgICBnLnN0cm9rZSgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gVGV4dEdseXBoKEdMT0JBTF9HQywgbWluLCBtYXgsIGhlaWdodCwgZmlsbCwgc3RyaW5nKSB7XG4gICAgdGhpcy5fbWluID0gbWluO1xuICAgIHRoaXMuX21heCA9IG1heDtcbiAgICB0aGlzLl9oZWlnaHQgPSBoZWlnaHQ7XG4gICAgdGhpcy5fZmlsbCA9IGZpbGw7XG4gICAgdGhpcy5fc3RyaW5nID0gc3RyaW5nO1xuICAgIHRoaXMuX3RleHRMZW4gPSBHTE9CQUxfR0MubWVhc3VyZVRleHQoc3RyaW5nKS53aWR0aDtcbn1cblxuVGV4dEdseXBoLnByb3RvdHlwZS5taW4gPSBmdW5jdGlvbigpIHtyZXR1cm4gdGhpcy5fbWlufTtcblRleHRHbHlwaC5wcm90b3R5cGUubWF4ID0gZnVuY3Rpb24oKSB7cmV0dXJuIE1hdGgubWF4KHRoaXMuX21heCwgdGhpcy5fbWluICsgdGhpcy5fdGV4dExlbil9O1xuVGV4dEdseXBoLnByb3RvdHlwZS5oZWlnaHQgPSBmdW5jdGlvbigpIHtyZXR1cm4gdGhpcy5faGVpZ2h0fTtcblxuVGV4dEdseXBoLnByb3RvdHlwZS5kcmF3ID0gZnVuY3Rpb24oZykge1xuICAgIGcuZmlsbFN0eWxlID0gdGhpcy5fZmlsbDtcbiAgICBnLmZpbGxUZXh0KHRoaXMuX3N0cmluZywgdGhpcy5fbWluLCB0aGlzLl9oZWlnaHQgLSA0KTtcbn1cblxuVGV4dEdseXBoLnByb3RvdHlwZS50b1NWRyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBtYWtlRWxlbWVudE5TKE5TX1NWRywgJ3RleHQnLCB0aGlzLl9zdHJpbmcsIHt4OiB0aGlzLl9taW4sIHk6IHRoaXMuX2hlaWdodCAtIDR9KTtcbn07XG5cbmZ1bmN0aW9uIGFtaW5vVGlsZUNvbG9yKGFhLCBzdGFydCwgY29sb3IpIHtcbiAgICB2YXIgQUxURVJOQVRFX0NPTE9SID0ge1xuICAgICAgICAncmVkJzogJ2RhcmtyZWQnLFxuICAgICAgICAncHVycGxlJzogJ21lZGl1bXB1cnBsZScsXG4gICAgICAgICdibHVlJzogJ2RhcmtibHVlJyxcbiAgICAgICAgJ2dyZWVuJzogJ2RhcmtncmVlbidcbiAgICB9O1xuICAgIHZhciBjb2xvcjIgPSBBTFRFUk5BVEVfQ09MT1JbY29sb3IudG9Mb3dlckNhc2UoKV07XG4gICAgdmFyIHRpbGVDb2xvcnM7XG4gICAgaWYgKCFjb2xvcjIpXG4gICAgICAgIHRpbGVDb2xvcnMgPSBbJ3JnYig3MywgNjgsIDE0OSknLCAncmdiKDksIDAsIDEwMyknXTtcbiAgICAgICAgLy8gZGVmYXVsdCB0byBVQ1NDIGNvbG9yc1xuICAgIGVsc2VcbiAgICAgICAgdGlsZUNvbG9ycyA9IFtjb2xvciwgY29sb3IyXTtcblxuICAgIGlmIChhYSA9PSAnPycpXG4gICAgICAgIHJldHVybiAnYmxhY2snO1xuICAgIGVsc2UgaWYgKGFhID09ICdNJylcbiAgICAgICAgcmV0dXJuICdncmVlbnllbGxvdyc7XG4gICAgZWxzZSBpZiAoYWEgPT0gJyonKVxuICAgICAgICByZXR1cm4gJ2NyaW1zb24nO1xuICAgIGVsc2VcbiAgICAgICAgcmV0dXJuIHRpbGVDb2xvcnNbc3RhcnQgJSAyXTtcbn1cblxuZnVuY3Rpb24gcmV2ZXJzZUNvbXBsZW1lbnQoc2VxdWVuY2UpIHtcbiAgICB2YXIgc2VxX2RpY3QgPSB7J0EnOiAnVCcsICdUJzogJ0EnLCAnRyc6ICdDJywgJ0MnOiAnRyd9O1xuICAgIHZhciByZXZfc2VxID0gc2VxdWVuY2Uuc3BsaXQoJycpLnJldmVyc2UoKS5qb2luKCcnKTtcbiAgICB2YXIgcmV2X2NvbXBsX3NlcSA9IFtdO1xuICAgIGZvciAodmFyIGIgPSAwOyBiIDwgcmV2X3NlcS5sZW5ndGg7ICsrYikge1xuICAgICAgICB2YXIgYmFzZSA9IHJldl9zZXEuc3Vic3RyKGIsIDEpLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgIHJldl9jb21wbF9zZXEucHVzaChiYXNlIGluIHNlcV9kaWN0ID8gc2VxX2RpY3RbYmFzZV0gOiAnTicpO1xuICAgIH1cbiAgICByZXR1cm4gcmV2X2NvbXBsX3NlcS5qb2luKCcnKTtcbn1cblxuZnVuY3Rpb24gQW1pbm9BY2lkR2x5cGgobWluLCBtYXgsIGhlaWdodCwgZmlsbCwgc2VxLCBvcmllbnRhdGlvbiwgcmVhZGZyYW1lKSB7XG4gICAgdGhpcy5fbWluID0gbWluO1xuICAgIHRoaXMuX21heCA9IG1heDtcbiAgICB0aGlzLl9oZWlnaHQgPSBoZWlnaHQ7XG4gICAgdGhpcy5fZmlsbCA9IGZpbGw7XG4gICAgdGhpcy5fc2VxID0gc2VxO1xuICAgIHRoaXMuX29yaWVudGF0aW9uID0gb3JpZW50YXRpb247XG4gICAgdGhpcy5fcmVhZGZyYW1lID0gcmVhZGZyYW1lO1xufVxuXG5BbWlub0FjaWRHbHlwaC5wcm90b3R5cGUubWluID0gZnVuY3Rpb24oKSB7cmV0dXJuIHRoaXMuX21pbn07XG5BbWlub0FjaWRHbHlwaC5wcm90b3R5cGUubWF4ID0gZnVuY3Rpb24oKSB7cmV0dXJuIHRoaXMuX21heH07XG5BbWlub0FjaWRHbHlwaC5wcm90b3R5cGUuaGVpZ2h0ID0gZnVuY3Rpb24oKSB7cmV0dXJuIHRoaXMuX2hlaWdodH07XG5cbkFtaW5vQWNpZEdseXBoLnByb3RvdHlwZS5kcmF3ID0gZnVuY3Rpb24oZ2MpIHtcbiAgICB2YXIgc2VxID0gdGhpcy5fc2VxO1xuICAgIHZhciBjb2xvciA9IHRoaXMuX2ZpbGw7XG5cbiAgICBpZiAoIXNlcSkgcmV0dXJuO1xuXG4gICAgdmFyIHNjYWxlID0gKHRoaXMuX21heCAtIHRoaXMuX21pbiArIDEpIC8gc2VxLmxlbmd0aDtcblxuICAgIHZhciBwcmV2T3ZlcmhhbmcgPSAoMyAtIHRoaXMuX3JlYWRmcmFtZSkgJSAzO1xuICAgIHZhciBuZXh0T3ZlcmhhbmcgPSAoc2VxLmxlbmd0aCAtIHByZXZPdmVyaGFuZykgJSAzO1xuICAgIHZhciBsZWZ0T3ZlcmhhbmcgPSB0aGlzLl9vcmllbnRhdGlvbiA9PSAnKycgPyBwcmV2T3ZlcmhhbmcgOiBuZXh0T3Zlcmhhbmc7XG4gICAgXG4gICAgaWYgKGxlZnRPdmVyaGFuZyA+IDApIHtcbiAgICAgICAgZ2MuZmlsbFN0eWxlID0gY29sb3I7XG4gICAgICAgIGdjLmZpbGxSZWN0KHRoaXMuX21pbiwgMCwgc2NhbGUgKiBsZWZ0T3ZlcmhhbmcsIHRoaXMuX2hlaWdodCk7XG4gICAgfVxuXG4gICAgZm9yICh2YXIgcCA9IGxlZnRPdmVyaGFuZzsgcCA8IHNlcS5sZW5ndGg7IHAgKz0gMykge1xuICAgICAgICB2YXIgY29kb24gPSBzZXEuc3Vic3RyKHAsIDMpLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgIGlmICh0aGlzLl9vcmllbnRhdGlvbiA9PSAnLScpXG4gICAgICAgICAgICBjb2RvbiA9IHJldmVyc2VDb21wbGVtZW50KGNvZG9uKTtcbiAgICAgICAgdmFyIGFhID0gY29kb24gaW4gQU1JTk9fQUNJRF9UUkFOU0xBVElPTiA/IEFNSU5PX0FDSURfVFJBTlNMQVRJT05bY29kb25dIDogJz8nO1xuICAgICAgICBjb2xvciA9IGNvZG9uLmxlbmd0aCA9PSAzID8gYW1pbm9UaWxlQ29sb3IoYWEsIHAsIHRoaXMuX2ZpbGwpIDogdGhpcy5fZmlsbDtcbiAgICAgICAgZ2MuZmlsbFN0eWxlID0gY29sb3I7XG4gICAgICAgIGdjLmZpbGxSZWN0KHRoaXMuX21pbiArIHAgKiBzY2FsZSwgMCwgc2NhbGUgKiBjb2Rvbi5sZW5ndGgsIHRoaXMuX2hlaWdodCk7XG5cbiAgICAgICAgaWYgKHNjYWxlID49IDggJiYgY29kb24ubGVuZ3RoID09IDMpIHtcbiAgICAgICAgICAgIGdjLmZpbGxTdHlsZSA9ICd3aGl0ZSc7XG4gICAgICAgICAgICBnYy5maWxsVGV4dChhYSwgdGhpcy5fbWluICsgKHArMSkgKiBzY2FsZSwgdGhpcy5faGVpZ2h0KTtcbiAgICAgICAgfSBcbiAgICB9XG59XG5cbkFtaW5vQWNpZEdseXBoLnByb3RvdHlwZS50b1NWRyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBnID0gbWFrZUVsZW1lbnROUyhOU19TVkcsICdnJyk7XG4gICAgdmFyIHNlcSA9IHRoaXMuX3NlcTtcbiAgICB2YXIgY29sb3IgPSB0aGlzLl9maWxsO1xuXG4gICAgaWYgKCFzZXEpXG4gICAgICAgIHJldHVybiBnO1xuXG4gICAgdmFyIHNjYWxlID0gKHRoaXMuX21heCAtIHRoaXMuX21pbiArIDEpIC8gc2VxLmxlbmd0aDtcblxuICAgIHZhciBwcmV2T3ZlcmhhbmcgPSAoMyAtIHRoaXMuX3JlYWRmcmFtZSkgJSAzO1xuICAgIHZhciBuZXh0T3ZlcmhhbmcgPSAoc2VxLmxlbmd0aCAtIHByZXZPdmVyaGFuZykgJSAzO1xuICAgIHZhciBsZWZ0T3ZlcmhhbmcgPSB0aGlzLl9vcmllbnRhdGlvbiA9PSAnKycgPyBwcmV2T3ZlcmhhbmcgOiBuZXh0T3Zlcmhhbmc7XG5cbiAgICBpZiAobGVmdE92ZXJoYW5nID4gMCkge1xuICAgICAgICBnLmFwcGVuZENoaWxkKFxuICAgICAgICAgICAgbWFrZUVsZW1lbnROUyhOU19TVkcsICdyZWN0JywgbnVsbCwge1xuICAgICAgICAgICAgICAgIHg6IHRoaXMuX21pbixcbiAgICAgICAgICAgICAgICB5OiAwLFxuICAgICAgICAgICAgICAgIHdpZHRoOiBzY2FsZSAqIGxlZnRPdmVyaGFuZyxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IHRoaXMuX2hlaWdodCxcbiAgICAgICAgICAgICAgICBmaWxsOiBjb2xvcn0pKTtcbiAgICB9XG4gICAgZm9yICh2YXIgcCA9IGxlZnRPdmVyaGFuZzsgcCA8IHNlcS5sZW5ndGg7IHAgKz0gMykge1xuICAgICAgICB2YXIgY29kb24gPSBzZXEuc3Vic3RyKHAsIDMpLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgIGlmICh0aGlzLl9vcmllbnRhdGlvbiA9PSAnLScpXG4gICAgICAgICAgICBjb2RvbiA9IHJldmVyc2VDb21wbGVtZW50KGNvZG9uKTtcbiAgICAgICAgdmFyIGFhID0gY29kb24gaW4gQU1JTk9fQUNJRF9UUkFOU0xBVElPTiA/IEFNSU5PX0FDSURfVFJBTlNMQVRJT05bY29kb25dIDogJz8nO1xuICAgICAgICBjb2xvciA9IGNvZG9uLmxlbmd0aCA9PSAzID8gYW1pbm9UaWxlQ29sb3IoYWEsIHAsIHRoaXMuX2ZpbGwpIDogdGhpcy5fZmlsbDtcbiAgICAgICAgZy5hcHBlbmRDaGlsZChcbiAgICAgICAgICAgIG1ha2VFbGVtZW50TlMoTlNfU1ZHLCAncmVjdCcsIG51bGwsIHtcbiAgICAgICAgICAgICAgICB4OiB0aGlzLl9taW4gKyBwICogc2NhbGUsXG4gICAgICAgICAgICAgICAgeTogMCxcbiAgICAgICAgICAgICAgICB3aWR0aDogc2NhbGUgKiBjb2Rvbi5sZW5ndGgsXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiB0aGlzLl9oZWlnaHQsXG4gICAgICAgICAgICAgICAgZmlsbDogY29sb3J9KSk7XG5cbiAgICAgICAgaWYgKHNjYWxlID49IDggJiYgY29kb24ubGVuZ3RoID09IDMpIHtcbiAgICAgICAgICAgIGcuYXBwZW5kQ2hpbGQoXG4gICAgICAgICAgICAgICAgbWFrZUVsZW1lbnROUyhOU19TVkcsICd0ZXh0JywgYWEsIHtcbiAgICAgICAgICAgICAgICAgICAgeDogdGhpcy5fbWluICsgKHArMSkgKiBzY2FsZSxcbiAgICAgICAgICAgICAgICAgICAgeTogdGhpcy5faGVpZ2h0LFxuICAgICAgICAgICAgICAgICAgICBmaWxsOiAnd2hpdGUnfSkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBnO1xufTtcblxudmFyIGlzUmV0aW5hID0gdHlwZW9mKHdpbmRvdykgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvID4gMTtcbnZhciBfX2RhbGxpYW5jZV9TZXF1ZW5jZUdseXBoQ2FjaGUgPSB7fTtcbnZhciBhbHRQYXR0ZXJuID0gbmV3IFJlZ0V4cCgnXltBQ0dULV0kJyk7XG52YXIgaXNDbG9zZVVwID0gZnVuY3Rpb24oc2NhbGUpIHtcbiAgICByZXR1cm4gc2NhbGUgPj0gODtcbn1cblxuZnVuY3Rpb24gU2VxdWVuY2VHbHlwaChiYXNlQ29sb3JzLCBzdHJhbmRDb2xvciwgbWluLCBtYXgsIGhlaWdodCwgc2VxLCByZWYsIHNjaGVtZSwgcXVhbHMsIGZpbGxiZywgc2NhbGVWZXJ0aWNhbCkge1xuICAgIHRoaXMuYmFzZUNvbG9ycyA9IGJhc2VDb2xvcnM7XG4gICAgdGhpcy5fc3RyYW5kQ29sb3IgPSBzdHJhbmRDb2xvcjtcbiAgICB0aGlzLl9taW4gPSBtaW47XG4gICAgdGhpcy5fbWF4ID0gbWF4O1xuICAgIHRoaXMuX2hlaWdodCA9IGhlaWdodDtcbiAgICB0aGlzLl9zZXEgPSBzZXE7XG4gICAgdGhpcy5fcmVmID0gcmVmO1xuICAgIHRoaXMuX3NjaGVtZSA9IHNjaGVtZTtcbiAgICB0aGlzLl9xdWFscyA9IHF1YWxzO1xuICAgIHRoaXMuX2ZpbGxiZyA9IGZpbGxiZztcbiAgICB0aGlzLl9zY2FsZVZlcnRpY2FsID0gc2NhbGVWZXJ0aWNhbDtcbn1cblxuU2VxdWVuY2VHbHlwaC5wcm90b3R5cGUubWluID0gZnVuY3Rpb24oKSB7cmV0dXJuIHRoaXMuX21pbn07XG5TZXF1ZW5jZUdseXBoLnByb3RvdHlwZS5tYXggPSBmdW5jdGlvbigpIHtyZXR1cm4gdGhpcy5fbWF4fTtcblNlcXVlbmNlR2x5cGgucHJvdG90eXBlLmhlaWdodCA9IGZ1bmN0aW9uKCkge3JldHVybiB0aGlzLl9oZWlnaHR9O1xuXG5cblNlcXVlbmNlR2x5cGgucHJvdG90eXBlLmFscGhhRm9yUXVhbCA9IGZ1bmN0aW9uKHF1YWwpIHtcbiAgICByZXR1cm4gMC4xICsgMC45Kk1hdGgubWF4KDAuMCwgTWF0aC5taW4oKDEuMCAqIHF1YWwpIC8gMzAuMCwgMS4wKSk7XG59XG5cblNlcXVlbmNlR2x5cGgucHJvdG90eXBlLmRyYXcgPSBmdW5jdGlvbihnYykge1xuICAgIHZhciBzZXEgPSB0aGlzLl9zZXE7XG4gICAgdmFyIHJlZiA9IHRoaXMuX3JlZjtcbiAgICB2YXIgbWlzbWF0Y2ggPSB0aGlzLl9zY2hlbWUgPT09ICdtaXNtYXRjaCcgfHwgdGhpcy5fc2NoZW1lID09PSAnbWlzbWF0Y2gtYWxsJztcbiAgICB2YXIgYWxsID0gdGhpcy5fc2NoZW1lID09PSAnbWlzbWF0Y2gtYWxsJztcbiAgICBcbiAgICB2YXIgc2VxTGVuZ3RoID0gc2VxID8gc2VxLmxlbmd0aCA6ICh0aGlzLl9tYXggLSB0aGlzLl9taW4gKyAxKTtcbiAgICB2YXIgc2NhbGUgPSAodGhpcy5fbWF4IC0gdGhpcy5fbWluICsgMSkgLyBzZXFMZW5ndGg7XG5cbiAgICBpZiAobWlzbWF0Y2ggJiYgIWlzQ2xvc2VVcChzY2FsZSkpIHtcbiAgICAgICAgZ2MuZmlsbFN0eWxlID0gdGhpcy5fc3RyYW5kQ29sb3I7XG4gICAgICAgIGlmICh0aGlzLl9zY2FsZVZlcnRpY2FsKVxuICAgICAgICAgICAgZ2MuZmlsbFJlY3QodGhpcy5fbWluLCBzY2FsZSwgdGhpcy5fbWF4IC0gdGhpcy5fbWluLCBzY2FsZSk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGdjLmZpbGxSZWN0KHRoaXMuX21pbiwgdGhpcy5faGVpZ2h0LzQsIHRoaXMuX21heCAtIHRoaXMuX21pbiwgdGhpcy5faGVpZ2h0LzIpO1xuICAgIH1cblxuICAgIFxuICAgIGZvciAodmFyIHAgPSAwOyBwIDwgc2VxTGVuZ3RoOyArK3ApIHtcbiAgICAgICAgdmFyIGJhc2UgPSBzZXEgPyBzZXEuc3Vic3RyKHAsIDEpLnRvVXBwZXJDYXNlKCkgOiAnTic7XG4gICAgICAgIFxuICAgICAgICBpZiAoIWFsdFBhdHRlcm4udGVzdChiYXNlKSAmJiAhaXNDbG9zZVVwKHNjYWxlKSlcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuXG4gICAgICAgIHZhciBjb2xvciA9IHRoaXMuYmFzZUNvbG9yc1tiYXNlXTtcblxuICAgICAgICBpZiAodGhpcy5fcXVhbHMpIHtcbiAgICAgICAgICAgIHZhciBxYyA9IHRoaXMuX3F1YWxzLmNoYXJDb2RlQXQocCkgLSAzMztcbiAgICAgICAgICAgIHZhciBvbGRBbHBoYSA9IGdjLmdsb2JhbEFscGhhOyAgICAgICAgICAgIC8vIE5CIGhvaXN0ZWQhXG4gICAgICAgICAgICBnYy5nbG9iYWxBbHBoYSA9IHRoaXMuYWxwaGFGb3JRdWFsKHFjKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghY29sb3IpIHtcbiAgICAgICAgICAgIHZhciByZWZCYXNlID0gcmVmID8gcmVmLnN1YnN0cihwLCAxKS50b1VwcGVyQ2FzZSgpIDogJ04nO1xuICAgICAgICAgICAgaWYgKGJhc2UgPT0gJ04nIHx8IHJlZkJhc2UgPT0gJ04nKVxuICAgICAgICAgICAgICAgIGNvbG9yID0gJ2dyYXknO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIGNvbG9yID0gdGhpcy5fc3RyYW5kQ29sb3I7XG5cbiAgICAgICAgICAgIGlmIChhbGwpXG4gICAgICAgICAgICAgICAgYmFzZSA9IHJlZkJhc2U7XG4gICAgICAgIH1cblxuICAgICAgICBnYy5maWxsU3R5bGUgPSBjb2xvcjtcblxuICAgICAgICB2YXIgYWx0ID0gYWx0UGF0dGVybi50ZXN0KGJhc2UpO1xuICAgICAgICBpZiAodGhpcy5fZmlsbGJnIHx8ICFpc0Nsb3NlVXAoc2NhbGUpIHx8ICFhbHQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9zY2FsZVZlcnRpY2FsKVxuICAgICAgICAgICAgICAgIGdjLmZpbGxSZWN0KHRoaXMuX21pbiArIHAqc2NhbGUsIHNjYWxlLCBzY2FsZSwgc2NhbGUpO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIGdjLmZpbGxSZWN0KHRoaXMuX21pbiArIHAqc2NhbGUsIDAsIHNjYWxlLCB0aGlzLl9oZWlnaHQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc0Nsb3NlVXAoc2NhbGUpICYmIGFsdCkge1xuICAgICAgICAgICAgdmFyIGtleSA9IGNvbG9yICsgJ18nICsgYmFzZVxuICAgICAgICAgICAgdmFyIGltZyA9IF9fZGFsbGlhbmNlX1NlcXVlbmNlR2x5cGhDYWNoZVtrZXldO1xuICAgICAgICAgICAgaWYgKCFpbWcpIHtcbiAgICAgICAgICAgICAgICBpbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICAgICAgICAgICAgICBpZiAoaXNSZXRpbmEpIHtcbiAgICAgICAgICAgICAgICAgICAgaW1nLndpZHRoID0gMTY7XG4gICAgICAgICAgICAgICAgICAgIGltZy5oZWlnaHQgPSAyMDtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpbWcud2lkdGggPSA4O1xuICAgICAgICAgICAgICAgICAgICBpbWcuaGVpZ2h0ID0gMTA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBpbWdHYyA9IGltZy5nZXRDb250ZXh0KCcyZCcpO1xuICAgICAgICAgICAgICAgIGlmIChpc1JldGluYSkge1xuICAgICAgICAgICAgICAgICAgICBpbWdHYy5zY2FsZSgyLCAyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaW1nR2MuZmlsbFN0eWxlID0gdGhpcy5fZmlsbGJnID8gJ2JsYWNrJyA6IGNvbG9yO1xuICAgICAgICAgICAgICAgIHZhciB3ID0gaW1nR2MubWVhc3VyZVRleHQoYmFzZSkud2lkdGg7XG4gICAgICAgICAgICAgICAgaW1nR2MuZmlsbFRleHQoYmFzZSwgMC41ICogKDguMCAtIHcpLCA4KTtcbiAgICAgICAgICAgICAgICBfX2RhbGxpYW5jZV9TZXF1ZW5jZUdseXBoQ2FjaGVba2V5XSA9IGltZztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBkeSA9IHRoaXMuX3NjYWxlVmVydGljYWwgPyBzY2FsZSA6IDA7XG4gICAgICAgICAgICBpZiAoaXNSZXRpbmEpXG4gICAgICAgICAgICAgICAgZ2MuZHJhd0ltYWdlKGltZywgdGhpcy5fbWluICsgcCpzY2FsZSArIDAuNSooc2NhbGUtOCksIGR5LCA4LCAxMCk7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgZ2MuZHJhd0ltYWdlKGltZywgdGhpcy5fbWluICsgcCpzY2FsZSArIDAuNSooc2NhbGUtOCksIGR5KTtcbiAgICAgICAgfSBcblxuICAgICAgICBpZiAodGhpcy5fcXVhbHMpIHtcbiAgICAgICAgICAgIGdjLmdsb2JhbEFscGhhID0gb2xkQWxwaGE7XG4gICAgICAgIH1cbiAgICB9XG59XG5cblNlcXVlbmNlR2x5cGgucHJvdG90eXBlLnRvU1ZHID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHNlcSA9IHRoaXMuX3NlcTtcbiAgICB2YXIgcmVmID0gdGhpcy5fcmVmO1xuICAgIHZhciBtaXNtYXRjaCA9IHRoaXMuX3NjaGVtZSA9PT0gJ21pc21hdGNoJyB8fCB0aGlzLl9zY2hlbWUgPT09ICdtaXNtYXRjaC1hbGwnO1xuICAgIHZhciBhbGwgPSB0aGlzLl9zY2hlbWUgPT09ICdtaXNtYXRjaC1hbGwnO1xuICAgIHZhciBzY2FsZSA9ICh0aGlzLl9tYXggLSB0aGlzLl9taW4gKyAxKSAvIHRoaXMuX3NlcS5sZW5ndGg7XG4gICAgdmFyICBnID0gbWFrZUVsZW1lbnROUyhOU19TVkcsICdnJyk7IFxuXG4gICAgZm9yICh2YXIgcCA9IDA7IHAgPCBzZXEubGVuZ3RoOyArK3ApIHtcbiAgICAgICAgdmFyIGJhc2UgPSBzZXEgPyBzZXEuc3Vic3RyKHAsIDEpLnRvVXBwZXJDYXNlKCkgOiAnTic7XG4gICAgICAgIHZhciBjb2xvciA9IHRoaXMuYmFzZUNvbG9yc1tiYXNlXTtcblxuICAgICAgICBpZiAoIWNvbG9yKSB7XG4gICAgICAgICAgICB2YXIgcmVmQmFzZSA9IHJlZiA/IHJlZi5zdWJzdHIocCwgMSkudG9VcHBlckNhc2UoKSA6ICdOJztcbiAgICAgICAgICAgIGlmIChiYXNlID09ICdOJyB8fCByZWZCYXNlID09ICdOJylcbiAgICAgICAgICAgICAgICBjb2xvciA9ICdncmF5JztcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBjb2xvciA9IHRoaXMuX3N0cmFuZENvbG9yO1xuXG4gICAgICAgICAgICBpZiAoYWxsKVxuICAgICAgICAgICAgICAgIGJhc2UgPSByZWZCYXNlO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGFscGhhID0gMS4wO1xuICAgICAgICBpZiAodGhpcy5fcXVhbHMpIHtcbiAgICAgICAgICAgIHZhciBxYyA9IHRoaXMuX3F1YWxzLmNoYXJDb2RlQXQocCkgLSAzMztcbiAgICAgICAgICAgIGFscGhhID0gdGhpcy5hbHBoYUZvclF1YWwocWMpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGFsdCA9IGFsdFBhdHRlcm4udGVzdChiYXNlKTtcbiAgICAgICAgaWYgKHRoaXMuX2ZpbGxiZyB8fCAhaXNDbG9zZVVwKHNjYWxlKSB8fCAhYWx0KSB7XG4gICAgICAgICAgICBnLmFwcGVuZENoaWxkKFxuICAgICAgICAgICAgICAgIG1ha2VFbGVtZW50TlMoTlNfU1ZHLCAncmVjdCcsIG51bGwsIHtcbiAgICAgICAgICAgICAgICAgICAgeDp0aGlzLl9taW4gKyBwKnNjYWxlLFxuICAgICAgICAgICAgICAgICAgICB5OiAwLFxuICAgICAgICAgICAgICAgICAgICB3aWR0aDogc2NhbGUsXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogdGhpcy5faGVpZ2h0LFxuICAgICAgICAgICAgICAgICAgICBmaWxsOiBjb2xvcixcbiAgICAgICAgICAgICAgICAgICAgZmlsbE9wYWNpdHk6IGFscGhhfSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlzQ2xvc2VVcChzY2FsZSkgJiYgYWx0KSB7XG4gICAgICAgICAgICBnLmFwcGVuZENoaWxkKFxuICAgICAgICAgICAgICAgIG1ha2VFbGVtZW50TlMoTlNfU1ZHLCAndGV4dCcsIGJhc2UsIHtcbiAgICAgICAgICAgICAgICAgICAgeDogdGhpcy5fbWluICsgKDAuNStwKSpzY2FsZSxcbiAgICAgICAgICAgICAgICAgICAgeTogOCxcbiAgICAgICAgICAgICAgICAgICAgdGV4dEFuY2hvcjogJ21pZGRsZScsXG4gICAgICAgICAgICAgICAgICAgIGZpbGw6IHRoaXMuX2ZpbGxiZyA/ICdibGFjaycgOiBjb2xvcixcbiAgICAgICAgICAgICAgICAgICAgZmlsbE9wYWNpdHk6IGFscGhhfSkpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGc7XG59XG5cbmZ1bmN0aW9uIFRyYW5zbGF0ZWRHbHlwaChnbHlwaCwgeCwgeSwgaGVpZ2h0KSB7XG4gICAgdGhpcy5nbHlwaCA9IGdseXBoO1xuICAgIHRoaXMuX2hlaWdodCA9IGhlaWdodDtcbiAgICB0aGlzLl94ID0geDtcbiAgICB0aGlzLl95ID0geTtcbn1cblxuVHJhbnNsYXRlZEdseXBoLnByb3RvdHlwZS5oZWlnaHQgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAodGhpcy5faGVpZ2h0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9oZWlnaHQ7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2x5cGguaGVpZ2h0KCkgKyB0aGlzLl95O1xuICAgIH1cbn1cblxuVHJhbnNsYXRlZEdseXBoLnByb3RvdHlwZS5taW4gPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5nbHlwaC5taW4oKSArIHRoaXMuX3g7XG59XG5cblRyYW5zbGF0ZWRHbHlwaC5wcm90b3R5cGUubWF4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2x5cGgubWF4KCkgKyB0aGlzLl94O1xufVxuXG5UcmFuc2xhdGVkR2x5cGgucHJvdG90eXBlLm1pblkgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5feTtcbn1cblxuVHJhbnNsYXRlZEdseXBoLnByb3RvdHlwZS5tYXhZID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX3kgKyB0aGlzLmdseXBoLmhlaWdodCgpO1xufVxuXG5UcmFuc2xhdGVkR2x5cGgucHJvdG90eXBlLmRyYXcgPSBmdW5jdGlvbihnLCBvKSB7XG4gICAgZy5zYXZlKCk7XG4gICAgZy50cmFuc2xhdGUodGhpcy5feCwgdGhpcy5feSk7XG4gICAgdGhpcy5nbHlwaC5kcmF3KGcsIG8pO1xuICAgIGcucmVzdG9yZSgpO1xufVxuXG5UcmFuc2xhdGVkR2x5cGgucHJvdG90eXBlLnRvU1ZHID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHMgPSAgdGhpcy5nbHlwaC50b1NWRygpO1xuICAgIHMuc2V0QXR0cmlidXRlKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKCcgKyB0aGlzLl94ICsgJywnICsgdGhpcy5feSArICcpJyk7XG4gICAgcmV0dXJuIHM7XG59XG5cbmZ1bmN0aW9uIFBvaW50R2x5cGgoeCwgeSwgaGVpZ2h0LCBmaWxsKSB7XG4gICAgdGhpcy5feCA9IHg7XG4gICAgdGhpcy5feSA9IHk7XG4gICAgdGhpcy5faGVpZ2h0ID0gaGVpZ2h0O1xuICAgIHRoaXMuX2ZpbGwgPSBmaWxsO1xufVxuXG5Qb2ludEdseXBoLnByb3RvdHlwZS5taW4gPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5feCAtIDI7XG59XG5cblBvaW50R2x5cGgucHJvdG90eXBlLm1heCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl94ICsgMjtcbn1cblxuUG9pbnRHbHlwaC5wcm90b3R5cGUuaGVpZ2h0ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX2hlaWdodDtcbn1cblxuUG9pbnRHbHlwaC5wcm90b3R5cGUuZHJhdyA9IGZ1bmN0aW9uKGcpIHtcbiAgICBnLnNhdmUoKTtcbiAgICBnLmdsb2JhbEFscGhhID0gMC4zO1xuICAgIGcuZmlsbFN0eWxlID0gdGhpcy5fZmlsbDtcbiAgICBnLmJlZ2luUGF0aCgpO1xuICAgIGcuYXJjKHRoaXMuX3gsIHRoaXMuX3ksIDEuNSwgMCwgNi4yOSk7XG4gICAgZy5maWxsKCk7XG4gICAgZy5yZXN0b3JlKCk7XG59XG5cblBvaW50R2x5cGgucHJvdG90eXBlLnRvU1ZHID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIG1ha2VFbGVtZW50TlMoXG4gICAgICAgIE5TX1NWRywgJ2NpcmNsZScsXG4gICAgICAgIG51bGwsXG4gICAgICAgIHtjeDogdGhpcy5feCwgY3k6IHRoaXMuX3ksIHI6IDIsXG4gICAgICAgICBmaWxsOiB0aGlzLl9maWxsLFxuICAgICAgICAgc3Ryb2tlOiAnbm9uZSd9KTtcbn1cblxuXG5mdW5jdGlvbiBHcmlkR2x5cGgoaGVpZ2h0LCB5T2Zmc2V0LCBzcGFjaW5nKSB7XG4gICAgdGhpcy5faGVpZ2h0ID0gaGVpZ2h0IHx8IDUwO1xuICAgIHRoaXMueU9mZnNldCA9IHlPZmZzZXQgfHwgMDtcbiAgICB0aGlzLnNwYWNpbmcgPSBzcGFjaW5nIHx8IDEwO1xufVxuXG5HcmlkR2x5cGgucHJvdG90eXBlLm5vdFNlbGVjdGFibGUgPSB0cnVlO1xuXG5HcmlkR2x5cGgucHJvdG90eXBlLm1pbiA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAtMTAwMDAwO1xufTtcblxuR3JpZEdseXBoLnByb3RvdHlwZS5tYXggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gMTAwMDAwO1xufTtcblxuR3JpZEdseXBoLnByb3RvdHlwZS5oZWlnaHQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5faGVpZ2h0O1xufVxuXG5HcmlkR2x5cGgucHJvdG90eXBlLmRyYXcgPSBmdW5jdGlvbihnKSB7XG4gICAgZy5zYXZlKCk7XG4gICAgZy5zdHJva2VTdHlsZSA9ICdibGFjaydcbiAgICBnLmxpbmVXaWR0aCA9IDAuMTtcblxuICAgIGcuYmVnaW5QYXRoKCk7XG4gICAgZm9yICh2YXIgeSA9IHRoaXMueU9mZnNldDsgeSA8PSB0aGlzLl9oZWlnaHQrdGhpcy55T2Zmc2V0OyB5ICs9IHRoaXMuc3BhY2luZykge1xuICAgIC8vIGZvciAodmFyIHkgPSAwOyB5IDw9IHRoaXMuX2hlaWdodDsgeSArPSAxMCkge1xuICAgICAgICBnLm1vdmVUbygtNTAwMCwgeSk7XG4gICAgICAgIGcubGluZVRvKDUwMDAsIHkpO1xuICAgIH1cbiAgICBnLnN0cm9rZSgpO1xuICAgIGcucmVzdG9yZSgpO1xufVxuXG5HcmlkR2x5cGgucHJvdG90eXBlLnRvU1ZHID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHAgPSBuZXcgU1ZHUGF0aCgpO1xuICAgIGZvciAodmFyIHkgPSAwOyB5IDw9IHRoaXMuX2hlaWdodDsgeSArPSAxMCkge1xuICAgICAgICBwLm1vdmVUbygtNTAwMCwgeSk7XG4gICAgICAgIHAubGluZVRvKDUwMDAsIHkpO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gbWFrZUVsZW1lbnROUyhcbiAgICAgICAgTlNfU1ZHLCAncGF0aCcsXG4gICAgICAgIG51bGwsXG4gICAgICAgIHtkOiBwLnRvUGF0aERhdGEoKSxcbiAgICAgICAgIGZpbGw6ICdub25lJyxcbiAgICAgICAgIHN0cm9rZTogJ2JsYWNrJyxcbiAgICAgICAgIHN0cm9rZVdpZHRoOiAnMC4xcHgnfSk7XG59XG5cbmZ1bmN0aW9uIFN0YXJHbHlwaCh4LCByLCBwb2ludHMsIGZpbGwsIHN0cm9rZSkge1xuICAgIFBhdGhHbHlwaEJhc2UuY2FsbCh0aGlzLCBzdHJva2UsIGZpbGwpO1xuICAgIHRoaXMuX3ggPSB4O1xuICAgIHRoaXMuX3IgPSByO1xuICAgIHRoaXMuX3BvaW50cyA9IHBvaW50cztcbn1cblxuU3RhckdseXBoLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoUGF0aEdseXBoQmFzZS5wcm90b3R5cGUpO1xuXG5TdGFyR2x5cGgucHJvdG90eXBlLm1pbiA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl94IC0gdGhpcy5fcjtcbn1cblxuU3RhckdseXBoLnByb3RvdHlwZS5tYXggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5feCArIHRoaXMuX3I7XG59XG5cblN0YXJHbHlwaC5wcm90b3R5cGUuaGVpZ2h0ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIDIgKiB0aGlzLl9yO1xufVxuXG5TdGFyR2x5cGgucHJvdG90eXBlLmRyYXdQYXRoID0gZnVuY3Rpb24oZykge1xuICAgIHZhciBtaWRYID0gdGhpcy5feCwgbWlkWSA9IHRoaXMuX3IsIHIgPSB0aGlzLl9yO1xuICAgIGZvciAodmFyIHAgPSAwOyBwIDwgdGhpcy5fcG9pbnRzOyArK3ApIHtcbiAgICAgICAgdmFyIHRoZXRhID0gKHAgKiA2LjI4KSAvIHRoaXMuX3BvaW50cztcbiAgICAgICAgdmFyIHB4ID0gbWlkWCArIHIqTWF0aC5zaW4odGhldGEpO1xuICAgICAgICB2YXIgcHkgPSBtaWRZIC0gcipNYXRoLmNvcyh0aGV0YSk7XG4gICAgICAgIGlmIChwID09IDApIHtcbiAgICAgICAgICAgIGcubW92ZVRvKHB4LCBweSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBnLmxpbmVUbyhweCwgcHkpO1xuICAgICAgICB9XG4gICAgICAgIHRoZXRhID0gKChwKzAuNSkgKiA2LjI4KSAvIHRoaXMuX3BvaW50cztcbiAgICAgICAgcHggPSBtaWRYICsgMC40KnIqTWF0aC5zaW4odGhldGEpO1xuICAgICAgICBweSA9IG1pZFkgLSAwLjQqcipNYXRoLmNvcyh0aGV0YSk7XG4gICAgICAgIGcubGluZVRvKHB4LCBweSk7XG4gICAgfVxuICAgIGcuY2xvc2VQYXRoKCk7XG59XG5cbmZ1bmN0aW9uIFBsaW1zb2xsR2x5cGgoeCwgaGVpZ2h0LCBvdmVyaGFuZywgZmlsbCwgc3Ryb2tlKSB7XG4gICAgdGhpcy5feCA9IHg7XG4gICAgdGhpcy5faGVpZ2h0ID0gaGVpZ2h0O1xuICAgIHRoaXMuX292ZXJoYW5nID0gb3Zlcmhhbmc7XG4gICAgdGhpcy5fZmlsbCA9IGZpbGw7XG4gICAgdGhpcy5fc3Ryb2tlID0gc3Ryb2tlO1xuICAgIHRoaXMuX2hoID0gaGVpZ2h0IC8gMjtcbn1cblxuUGxpbXNvbGxHbHlwaC5wcm90b3R5cGUuZHJhdyA9IGZ1bmN0aW9uKGcpIHtcbiAgICB2YXIgaGggPSB0aGlzLl9oZWlnaHQvMjtcbiAgICBnLmZpbGxTdHlsZSA9IHRoaXMuX3N0cm9rZTtcbiAgICBnLmJlZ2luUGF0aCgpO1xuICAgIGcuYXJjKHRoaXMuX3gsIGhoLCBoaCAtIHRoaXMuX292ZXJoYW5nLCAwLCA2LjI5KTtcbiAgICBnLm1vdmVUbyh0aGlzLl94LCAwKTtcbiAgICBnLmxpbmVUbyh0aGlzLl94LCB0aGlzLl9oZWlnaHQpO1xuXG4gICAgaWYgKHRoaXMuX2ZpbGwpIHtcbiAgICAgICAgZy5maWxsU3R5bGUgPSB0aGlzLl9maWxsO1xuICAgICAgICBnLmZpbGwoKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fc3Ryb2tlKSB7XG4gICAgICAgIGcuc3Ryb2tlU3R5bGUgPSB0aGlzLl9zdHJva2U7XG4gICAgICAgIGcuc3Ryb2tlKCk7XG4gICAgfVxufVxuXG5QbGltc29sbEdseXBoLnByb3RvdHlwZS50b1NWRyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBoaCA9IHRoaXMuX2hoO1xuICAgIHJldHVybiBtYWtlRWxlbWVudE5TKE5TX1NWRywgJ2cnLCBcbiAgICAgICAgW21ha2VFbGVtZW50TlMoTlNfU1ZHLCAnY2lyY2xlJywgbnVsbCwge2N4OiB0aGlzLl94LCBjeTogaGgsIHI6IGhoIC0gdGhpcy5fb3Zlcmhhbmd9KSxcbiAgICAgICAgIG1ha2VFbGVtZW50TlMoTlNfU1ZHLCAnbGluZScsIG51bGwsIHt4MTogdGhpcy5feCwgeTE6IDAsIHgyOiB0aGlzLl94LCB5MjogdGhpcy5faGVpZ2h0fSldLFxuICAgICAgICB7ZmlsbDogdGhpcy5fZmlsbCB8fCAnbm9uZScsXG4gICAgICAgICBzdHJva2U6IHRoaXMuX3N0cm9rZSB8fCAnbm9uZScsXG4gICAgICAgICBzdHJva2VXaWR0aDogJzFweCd9KTtcbn1cblxuUGxpbXNvbGxHbHlwaC5wcm90b3R5cGUubWluID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX3ggLSB0aGlzLl9oaDtcbn1cblxuUGxpbXNvbGxHbHlwaC5wcm90b3R5cGUubWF4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX3ggKyB0aGlzLl9oaDtcbn1cblxuUGxpbXNvbGxHbHlwaC5wcm90b3R5cGUuaGVpZ2h0ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX2hlaWdodDtcbn1cblxuXG5mdW5jdGlvbiBPdmVybGF5TGFiZWxDYW52YXMoKSB7XG4gICAgdGhpcy5veCA9IDA7XG4gICAgdGhpcy5veSA9IDA7XG4gICAgdGhpcy5nbHlwaHMgPSBbXTtcbn1cblxuT3ZlcmxheUxhYmVsQ2FudmFzLnByb3RvdHlwZS50cmFuc2xhdGUgPSBmdW5jdGlvbih4LCB5KSB7XG4gICAgdGhpcy5veCArPSB4O1xuICAgIHRoaXMub3kgKz0geTtcbn1cblxuT3ZlcmxheUxhYmVsQ2FudmFzLnByb3RvdHlwZS5yZWdpc3RlckdseXBoID0gZnVuY3Rpb24oZykge1xuICAgIHRoaXMuZ2x5cGhzLnB1c2goe1xuICAgICAgICB4OiB0aGlzLm94LFxuICAgICAgICB5OiB0aGlzLm95LFxuICAgICAgICBnbHlwaDogZ1xuICAgIH0pO1xufVxuXG5cbk92ZXJsYXlMYWJlbENhbnZhcy5wcm90b3R5cGUuZHJhdyA9IGZ1bmN0aW9uKGcsIG1pblZpc2libGUsIG1heFZpc2libGUpIHtcbiAgICBmb3IgKHZhciBnaSA9IDA7IGdpIDwgdGhpcy5nbHlwaHMubGVuZ3RoOyArK2dpKSB7XG4gICAgICAgIHZhciBnZyA9IHRoaXMuZ2x5cGhzW2dpXTtcbiAgICAgICAgZy5zYXZlKCk7XG4gICAgICAgIGcudHJhbnNsYXRlKGdnLngsIGdnLnkpO1xuICAgICAgICBnZy5nbHlwaC5kcmF3T3ZlcmxheShnLCBtaW5WaXNpYmxlLCBtYXhWaXNpYmxlKTtcbiAgICAgICAgZy5yZXN0b3JlKCk7XG4gICAgfVxufVxuXG5pZiAodHlwZW9mKG1vZHVsZSkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgICAgIEJveEdseXBoOiBCb3hHbHlwaCxcbiAgICAgICAgR3JvdXBHbHlwaDogR3JvdXBHbHlwaCxcbiAgICAgICAgTGluZUdyYXBoR2x5cGg6IExpbmVHcmFwaEdseXBoLFxuICAgICAgICBMYWJlbGxlZEdseXBoOiBMYWJlbGxlZEdseXBoLFxuICAgICAgICBDcm9zc0dseXBoOiBDcm9zc0dseXBoLFxuICAgICAgICBFeEdseXBoOiBFeEdseXBoLFxuICAgICAgICBUcmlhbmdsZUdseXBoOiBUcmlhbmdsZUdseXBoLFxuICAgICAgICBEb3RHbHlwaDogRG90R2x5cGgsXG4gICAgICAgIFBhZGRlZEdseXBoOiBQYWRkZWRHbHlwaCxcbiAgICAgICAgQUFycm93R2x5cGg6IEFBcnJvd0dseXBoLFxuICAgICAgICBTcGFuR2x5cGg6IFNwYW5HbHlwaCxcbiAgICAgICAgTGluZUdseXBoOiBMaW5lR2x5cGgsXG4gICAgICAgIFByaW1lcnNHbHlwaDogUHJpbWVyc0dseXBoLFxuICAgICAgICBBcnJvd0dseXBoOiBBcnJvd0dseXBoLFxuICAgICAgICBUb29NYW55R2x5cGg6IFRvb01hbnlHbHlwaCxcbiAgICAgICAgVGV4dEdseXBoOiBUZXh0R2x5cGgsXG4gICAgICAgIFNlcXVlbmNlR2x5cGg6IFNlcXVlbmNlR2x5cGgsXG4gICAgICAgIEFtaW5vQWNpZEdseXBoOiBBbWlub0FjaWRHbHlwaCxcbiAgICAgICAgVHJhbnNsYXRlZEdseXBoOiBUcmFuc2xhdGVkR2x5cGgsXG4gICAgICAgIEdyaWRHbHlwaDogR3JpZEdseXBoLFxuICAgICAgICBTdGFyR2x5cGg6IFN0YXJHbHlwaCxcbiAgICAgICAgUG9pbnRHbHlwaDogUG9pbnRHbHlwaCxcbiAgICAgICAgUGxpbXNvbGxHbHlwaDogUGxpbXNvbGxHbHlwaCxcblxuICAgICAgICBPdmVybGF5TGFiZWxDYW52YXM6IE92ZXJsYXlMYWJlbENhbnZhc1xuICAgIH1cbn1cbiIsIi8qIC0qLSBtb2RlOiBqYXZhc2NyaXB0OyBjLWJhc2ljLW9mZnNldDogNDsgaW5kZW50LXRhYnMtbW9kZTogbmlsIC0qLSAqL1xuXG4vLyBcbi8vIERhbGxpYW5jZSBHZW5vbWUgRXhwbG9yZXJcbi8vIChjKSBUaG9tYXMgRG93biAyMDA2LTIwMTNcbi8vXG4vLyBqYmpzb24uanMgLS0gcXVlcnkgSkJyb3dzZS1zdHlsZSBSRVNUIGRhdGEgc3RvcmVzXG4vL1xuXG5pZiAodHlwZW9mKHJlcXVpcmUpICE9PSAndW5kZWZpbmVkJykge1xuICAgIHZhciBkYXMgPSByZXF1aXJlKCcuL2RhcycpO1xuICAgIHZhciBEQVNTdHlsZXNoZWV0ID0gZGFzLkRBU1N0eWxlc2hlZXQ7XG4gICAgdmFyIERBU1N0eWxlID0gZGFzLkRBU1N0eWxlO1xuICAgIHZhciBEQVNGZWF0dXJlID0gZGFzLkRBU0ZlYXR1cmU7XG4gICAgdmFyIERBU0dyb3VwID0gZGFzLkRBU0dyb3VwO1xuXG4gICAgdmFyIHV0aWxzID0gcmVxdWlyZSgnLi91dGlscycpO1xuICAgIHZhciBzaGFsbG93Q29weSA9IHV0aWxzLnNoYWxsb3dDb3B5O1xuXG4gICAgdmFyIHNwYW5zID0gcmVxdWlyZSgnLi9zcGFucycpO1xuICAgIHZhciBSYW5nZSA9IHNwYW5zLlJhbmdlO1xuICAgIHZhciB1bmlvbiA9IHNwYW5zLnVuaW9uO1xuICAgIHZhciBpbnRlcnNlY3Rpb24gPSBzcGFucy5pbnRlcnNlY3Rpb247XG59XG5cbmZ1bmN0aW9uIEpCcm93c2VTdG9yZShiYXNlLCBxdWVyeSkge1xuICAgIHRoaXMuYmFzZSA9IGJhc2U7XG4gICAgdGhpcy5xdWVyeSA9IHF1ZXJ5O1xufVxuXG5mdW5jdGlvbiBqYm9yaShzdHJhbmQpIHtcbiAgICBpZiAoc3RyYW5kID4gMClcbiAgICAgICAgcmV0dXJuICcrJztcbiAgICBlbHNlIGlmIChzdHJhbmQgPCAwKVxuICAgICAgICByZXR1cm4gJy0nO1xufVxuXG5KQnJvd3NlU3RvcmUucHJvdG90eXBlLmZlYXR1cmVzID0gZnVuY3Rpb24oc2VnbWVudCwgb3B0cywgY2FsbGJhY2spIHtcbiAgICBvcHRzID0gb3B0cyB8fCB7fTtcblxuICAgIHVybCA9IHRoaXMuYmFzZSArICcvZmVhdHVyZXMvJyArIHNlZ21lbnQubmFtZTtcblxuICAgIHZhciBmaWx0ZXJzID0gW107XG4gICAgaWYgKHRoaXMucXVlcnkpIHtcblx0ICAgZmlsdGVycy5wdXNoKHRoaXMucXVlcnkpO1xuICAgIH1cbiAgICBpZiAoc2VnbWVudC5pc0JvdW5kZWQpIHtcbiAgICBcdGZpbHRlcnMucHVzaCgnc3RhcnQ9JyArIHNlZ21lbnQuc3RhcnQpO1xuICAgIFx0ZmlsdGVycy5wdXNoKCdlbmQ9JyArIHNlZ21lbnQuZW5kKTtcbiAgICB9XG4gICAgaWYgKGZpbHRlcnMubGVuZ3RoID4gMCkge1xuXHQgICAgdXJsID0gdXJsICsgJz8nICsgZmlsdGVycy5qb2luKCcmJyk7XG4gICAgfVxuXG4gICAgdmFyIHJlcSA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgIHJlcS5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHtcblx0aWYgKHJlcS5yZWFkeVN0YXRlID09IDQpIHtcblx0ICAgIGlmIChyZXEuc3RhdHVzID49IDMwMCkge1xuXHRcdCAgICBjYWxsYmFjayhudWxsLCAnRXJyb3IgY29kZSAnICsgcmVxLnN0YXR1cyk7XG5cdCAgICB9IGVsc2Uge1xuXHRcdHZhciBqZiA9IEpTT04ucGFyc2UocmVxLnJlc3BvbnNlKVsnZmVhdHVyZXMnXTtcblx0XHR2YXIgZmVhdHVyZXMgPSBbXTtcblx0XHRmb3IgKGZpID0gMDsgZmkgPCBqZi5sZW5ndGg7ICsrZmkpIHtcblx0XHQgICAgdmFyIGogPSBqZltmaV07XG5cdFx0ICAgIFxuXHRcdCAgICB2YXIgZiA9IG5ldyBEQVNGZWF0dXJlKCk7XG5cdFx0ICAgIGYuc2VnbWVudCA9IHNlZ21lbnQubmFtZTtcblx0XHQgICAgZi5taW4gPSAoalsnc3RhcnQnXSB8IDApICsgMTtcblx0XHQgICAgZi5tYXggPSBqWydlbmQnXSB8IDA7XG5cdFx0ICAgIGlmIChqLm5hbWUpIHtcblx0XHRcdGYubGFiZWwgPSBqLm5hbWU7XG5cdFx0ICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGouc3RyYW5kKVxuICAgICAgICAgICAgICAgICAgICAgICAgZi5vcmllbnRhdGlvbiA9IGpib3JpKGouc3RyYW5kKTtcblx0XHQgICAgZi50eXBlID0gai50eXBlIHx8ICd1bmtub3duJztcblxuICAgICAgICAgICAgICAgICAgICBpZiAoai5zdWJmZWF0dXJlcyAmJiBqLnN1YmZlYXR1cmVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGYuaWQgPSBqLnVuaXF1ZUlEO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYmxvY2tzID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2RzID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYWxsID0gW107XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHNpID0gMDsgc2kgPCBqLnN1YmZlYXR1cmVzLmxlbmd0aDsgKytzaSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzaiA9IGouc3ViZmVhdHVyZXNbc2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzZiA9IHNoYWxsb3dDb3B5KGYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNmLm1pbiA9IHNqLnN0YXJ0ICsgMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZi5tYXggPSBzai5lbmQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2YuZ3JvdXBzID0gW2ZdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxsLnB1c2goc2YpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2Nrcy5wdXNoKG5ldyBSYW5nZShzZi5taW4sIHNmLm1heCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzai50eXBlID09PSAnQ0RTJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2RzLnB1c2goc2YpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2RzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGFucyA9IHVuaW9uKGJsb2Nrcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHR4R3JvdXAgPSBzaGFsbG93Q29weShmKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eEdyb3VwLnR5cGUgPSAndHJhbnNjcmlwdCc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BhbnMucmFuZ2VzKCkuZm9yRWFjaChmdW5jdGlvbihleG9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZlYXR1cmVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VnbWVudDogICAgIHNlZ21lbnQubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbjogICAgICAgICBleG9uLm1pbigpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4OiAgICAgICAgIGV4b24ubWF4KCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmllbnRhdGlvbjogZi5vcmllbnRhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwczogICAgICBbdHhHcm91cF0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAgICAgICAgJ3RyYW5zY3JpcHQnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRsR3JvdXAgPSBzaGFsbG93Q29weShmKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZHMuZm9yRWFjaChmdW5jdGlvbihjZHNFeG9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNkc0V4b24udHlwZSA9ICd0cmFuc2xhdGlvbidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2RzRXhvbi5ncm91cHMgPSBbdGxHcm91cF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZlYXR1cmVzLnB1c2goY2RzRXhvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsbC5mb3JFYWNoKGZ1bmN0aW9uKGYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmVhdHVyZXMucHVzaChmKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblx0XHQgICAgICAgIGZlYXR1cmVzLnB1c2goZik7XG4gICAgICAgICAgICAgICAgICAgIH1cblx0XHR9XG5cdFx0Y2FsbGJhY2soZmVhdHVyZXMpO1xuXHQgICAgfVxuXHR9XG5cdFxuICAgIH07XG4gICAgXG4gICAgcmVxLm9wZW4oJ0dFVCcsIHVybCwgdHJ1ZSk7XG4gICAgcmVxLnJlc3BvbnNlVHlwZSA9ICd0ZXh0JztcbiAgICByZXEuc2VuZCgpO1xufVxuXG5pZiAodHlwZW9mKG1vZHVsZSkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgICAgIEpCcm93c2VTdG9yZTogSkJyb3dzZVN0b3JlXG4gICAgfTtcbn1cbiIsIi8qIC0qLSBtb2RlOiBqYXZhc2NyaXB0OyBjLWJhc2ljLW9mZnNldDogNDsgaW5kZW50LXRhYnMtbW9kZTogbmlsIC0qLSAqL1xuXG4vL1xuLy8gRGFsbGlhbmNlIEdlbm9tZSBFeHBsb3JlclxuLy8gKGMpIFRob21hcyBEb3duIDIwMDYtMjAxM1xuLy9cbi8vIGtzcGFjZS5qc1xuLy9cblxuXCJ1c2Ugc3RyaWN0XCI7XG5cbmlmICh0eXBlb2YocmVxdWlyZSkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgdmFyIHV0aWxzID0gcmVxdWlyZSgnLi91dGlscycpO1xuICAgIHZhciBBd2FpdGVkID0gdXRpbHMuQXdhaXRlZDtcbiAgICB2YXIgcHVzaG8gPSB1dGlscy5wdXNobztcblxuICAgIHZhciBzYSA9IHJlcXVpcmUoJy4vc291cmNlYWRhcHRlcnMnKTtcbiAgICB2YXIgTWFwcGVkRmVhdHVyZVNvdXJjZSA9IHNhLk1hcHBlZEZlYXR1cmVTb3VyY2U7XG4gICAgdmFyIENhY2hpbmdGZWF0dXJlU291cmNlID0gc2EuQ2FjaGluZ0ZlYXR1cmVTb3VyY2U7XG4gICAgdmFyIEJXR0ZlYXR1cmVTb3VyY2UgPSBzYS5CV0dGZWF0dXJlU291cmNlO1xuICAgIHZhciBSZW1vdGVCV0dGZWF0dXJlU291cmNlID0gc2EuUmVtb3RlQldHRmVhdHVyZVNvdXJjZTtcbiAgICB2YXIgQkFNRmVhdHVyZVNvdXJjZSA9IHNhLkJBTUZlYXR1cmVTb3VyY2U7XG4gICAgdmFyIFJlbW90ZUJBTUZlYXR1cmVTb3VyY2UgPSBzYS5SZW1vdGVCQU1GZWF0dXJlU291cmNlO1xuICAgIHZhciBEdW1teVNlcXVlbmNlU291cmNlID0gc2EuRHVtbXlTZXF1ZW5jZVNvdXJjZTtcbiAgICB2YXIgRHVtbXlGZWF0dXJlU291cmNlID0gc2EuRHVtbXlGZWF0dXJlU291cmNlO1xuXG4gICAgdmFyIE92ZXJsYXlGZWF0dXJlU291cmNlID0gcmVxdWlyZSgnLi9vdmVybGF5JykuT3ZlcmxheUZlYXR1cmVTb3VyY2U7XG5cbiAgICB2YXIgc3BhbnMgPSByZXF1aXJlKCcuL3NwYW5zJyk7XG4gICAgdmFyIFJhbmdlID0gc3BhbnMuUmFuZ2U7XG4gICAgdmFyIHVuaW9uID0gc3BhbnMudW5pb247XG4gICAgdmFyIGludGVyc2VjdGlvbiA9IHNwYW5zLmludGVyc2VjdGlvbjtcblxuICAgIHZhciBzYW1wbGUgPSByZXF1aXJlKCcuL3NhbXBsZScpO1xuICAgIHZhciBkb3duc2FtcGxlID0gc2FtcGxlLmRvd25zYW1wbGU7XG4gICAgdmFyIGdldEJhc2VDb3ZlcmFnZSA9IHNhbXBsZS5nZXRCYXNlQ292ZXJhZ2U7XG5cbiAgICB2YXIgZGFzID0gcmVxdWlyZSgnLi9kYXMnKTtcbiAgICB2YXIgREFTU2VxdWVuY2UgPSBkYXMuREFTU2VxdWVuY2U7XG5cbiAgICB2YXIgUHJvbWlzZSA9IHJlcXVpcmUoJ2VzNi1wcm9taXNlJykuUHJvbWlzZTtcbn1cblxuZnVuY3Rpb24gRmV0Y2hQb29sKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB0aGlzLnJlcXMgPSBbXTtcbiAgICB0aGlzLmF3YWl0ZWRGZWF0dXJlcyA9IHt9O1xuICAgIHRoaXMucmVxdWVzdHNJc3N1ZWQgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgc2VsZi5ub3RpZnlSZXF1ZXN0c0lzc3VlZCA9IHJlc29sdmU7XG4gICAgfSk7XG59XG5cbkZldGNoUG9vbC5wcm90b3R5cGUuYWRkUmVxdWVzdCA9IGZ1bmN0aW9uKHhocikge1xuICAgIHRoaXMucmVxcy5wdXNoKHhocik7XG59XG5cbkZldGNoUG9vbC5wcm90b3R5cGUuYWJvcnRBbGwgPSBmdW5jdGlvbigpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMucmVxcy5sZW5ndGg7ICsraSkge1xuICAgICAgICB0aGlzLnJlcXNbaV0uYWJvcnQoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIEtTQ2FjaGVCYXRvbihjaHIsIG1pbiwgbWF4LCBzY2FsZSwgZmVhdHVyZXMsIHN0YXR1cywgY292ZXJhZ2UpIHtcbiAgICB0aGlzLmNociA9IGNocjtcbiAgICB0aGlzLm1pbiA9IG1pbjtcbiAgICB0aGlzLm1heCA9IG1heDtcbiAgICB0aGlzLmNvdmVyYWdlID0gY292ZXJhZ2U7XG4gICAgdGhpcy5zY2FsZSA9IHNjYWxlO1xuICAgIHRoaXMuZmVhdHVyZXMgPSBmZWF0dXJlcyB8fCBbXTtcbiAgICB0aGlzLnN0YXR1cyA9IHN0YXR1cztcbn1cblxuS1NDYWNoZUJhdG9uLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmNociArIFwiOlwiICsgdGhpcy5taW4gKyBcIi4uXCIgKyB0aGlzLm1heCArIFwiO3NjYWxlPVwiICsgdGhpcy5zY2FsZTtcbn1cblxuZnVuY3Rpb24gS25vd25TcGFjZSh0aWVyTWFwLCBjaHIsIG1pbiwgbWF4LCBzY2FsZSwgc2VxU291cmNlKSB7XG4gICAgdGhpcy50aWVyTWFwID0gdGllck1hcDtcbiAgICB0aGlzLmNociA9IGNocjtcbiAgICB0aGlzLm1pbiA9IG1pbjtcbiAgICB0aGlzLm1heCA9IG1heDtcbiAgICB0aGlzLnNjYWxlID0gc2NhbGU7XG4gICAgdGhpcy5zZXFTb3VyY2UgPSBzZXFTb3VyY2UgfHwgbmV3IER1bW15U2VxdWVuY2VTb3VyY2UoKTtcbiAgICB0aGlzLnZpZXdDb3VudCA9IDA7XG5cbiAgICB0aGlzLmZlYXR1cmVDYWNoZSA9IHt9O1xuICAgIHRoaXMubGF0ZXN0Vmlld3MgPSB7fTtcbn1cblxuS25vd25TcGFjZS5wcm90b3R5cGUuY2FuY2VsID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5jYW5jZWxsZWQgPSB0cnVlO1xufVxuXG5Lbm93blNwYWNlLnByb3RvdHlwZS5iZXN0Q2FjaGVPdmVybGFwcGluZyA9IGZ1bmN0aW9uKGNociwgbWluLCBtYXgpIHtcbiAgICB2YXIgYmF0b24gPSB0aGlzLmZlYXR1cmVDYWNoZVt0aGlzLnRpZXJNYXBbMF1dO1xuICAgIGlmIChiYXRvbikge1xuICAgICAgICByZXR1cm4gYmF0b247XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufVxuXG5Lbm93blNwYWNlLnByb3RvdHlwZS5yZXRyaWV2ZUZlYXR1cmVzID0gZnVuY3Rpb24odGllcnMsIGNociwgbWluLCBtYXgsIHNjYWxlKSB7XG4gICAgaWYgKHNjYWxlICE9IHNjYWxlKSB7XG4gICAgICAgIHRocm93IFwicmV0cmlldmVGZWF0dXJlcyBjYWxsZWQgd2l0aCBzaWxseSBzY2FsZVwiO1xuICAgIH1cblxuICAgIGlmIChjaHIgIT0gdGhpcy5jaHIpIHtcbiAgICAgICAgdGhyb3cgXCJDYW4ndCBleHRlbmQgS25vd24gU3BhY2UgdG8gYSBuZXcgY2hyb21vc29tZVwiO1xuICAgIH1cbiAgICBpZiAobWluIDwgMSkge1xuICAgICAgICBtaW4gPSAxO1xuICAgIH1cblxuICAgIHRoaXMubWluID0gbWluO1xuICAgIHRoaXMubWF4ID0gbWF4O1xuICAgIHRoaXMuc2NhbGUgPSBzY2FsZTtcblxuICAgIGlmICh0aGlzLnBvb2wpIHtcbiAgICAgICAgdGhpcy5wb29sLmFib3J0QWxsKCk7XG4gICAgfVxuICAgIHRoaXMucG9vbCA9IG5ldyBGZXRjaFBvb2woKTtcbiAgICB0aGlzLmF3YWl0ZWRTZXEgPSBuZXcgQXdhaXRlZCgpO1xuICAgIHRoaXMuc2VxV2FzRmV0Y2hlZCA9IGZhbHNlO1xuICAgIHRoaXMudmlld0NvdW50Kys7XG5cbiAgICB0aGlzLnN0YXJ0RmV0Y2hlc0ZvclRpZXJzKHRpZXJzKTtcbiAgICB0aGlzLnBvb2wubm90aWZ5UmVxdWVzdHNJc3N1ZWQoKTtcbn1cblxuZnVuY3Rpb24gZmlsdGVyRmVhdHVyZXMoZmVhdHVyZXMsIG1pbiwgbWF4KSB7XG4gICAgdmFyIGZmID0gW107XG4gICAgdmFyIGZlYXR1cmVzQnlHcm91cCA9IHt9O1xuXG4gICAgZm9yICh2YXIgZmkgPSAwOyBmaSA8IGZlYXR1cmVzLmxlbmd0aDsgKytmaSkge1xuICAgICAgICB2YXIgZiA9IGZlYXR1cmVzW2ZpXTtcbiAgICAgICAgaWYgKCFmLm1pbiB8fCAhZi5tYXgpIHtcbiAgICAgICAgICAgIGZmLnB1c2goZik7XG4gICAgICAgIH0gZWxzZSBpZiAoZi5ncm91cHMgJiYgZi5ncm91cHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgcHVzaG8oZmVhdHVyZXNCeUdyb3VwLCBmLmdyb3Vwc1swXS5pZCwgZik7XG4gICAgICAgIH0gZWxzZSBpZiAoZi5taW4gPD0gbWF4ICYmIGYubWF4ID49IG1pbikge1xuICAgICAgICAgICAgZmYucHVzaChmKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZvciAodmFyIGdpZCBpbiBmZWF0dXJlc0J5R3JvdXApIHtcbiAgICAgICAgdmFyIGdmID0gZmVhdHVyZXNCeUdyb3VwW2dpZF07XG4gICAgICAgIHZhciBnbWluID0gMTAwMDAwMDAwMDAwLCBnbWF4ID0gLTEwMDAwMDAwMDAwMDtcbiAgICAgICAgZm9yICh2YXIgZmkgPSAwOyBmaSA8IGdmLmxlbmd0aDsgKytmaSkge1xuICAgICAgICAgICAgdmFyIGYgPSBnZltmaV07XG4gICAgICAgICAgICBnbWluID0gTWF0aC5taW4oZ21pbiwgZi5taW4pO1xuICAgICAgICAgICAgZ21heCA9IE1hdGgubWF4KGdtYXgsIGYubWF4KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZ21pbiA8PSBtYXggfHwgZ21heCA+PSBtaW4pIHtcbiAgICAgICAgICAgIGZvciAodmFyIGZpID0gMDsgZmkgPCBnZi5sZW5ndGg7ICsrZmkpIHtcbiAgICAgICAgICAgICAgICBmZi5wdXNoKGdmW2ZpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZmY7XG59XG5cbktub3duU3BhY2UucHJvdG90eXBlLmludmFsaWRhdGUgPSBmdW5jdGlvbih0aWVyKSB7XG4gICAgaWYgKCF0aGlzLnBvb2wpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuZmVhdHVyZUNhY2hlW3RpZXJdID0gbnVsbDtcbiAgICB0aGlzLnN0YXJ0RmV0Y2hlc0ZvclRpZXJzKFt0aWVyXSk7XG59XG5cbktub3duU3BhY2UucHJvdG90eXBlLnN0YXJ0RmV0Y2hlc0ZvclRpZXJzID0gZnVuY3Rpb24odGllcnMpIHtcbiAgICB2YXIgdGhpc0IgPSB0aGlzO1xuXG4gICAgdmFyIGF3YWl0ZWRTZXEgPSB0aGlzLmF3YWl0ZWRTZXE7XG4gICAgdmFyIG5lZWRTZXEgPSBmYWxzZTtcblxuICAgIHZhciBnZXg7XG5cbiAgICBmb3IgKHZhciB0ID0gMDsgdCA8IHRpZXJzLmxlbmd0aDsgKyt0KSB7XG4gICAgICAgIHZhciB0aWVyUmVuZGVyZXIgPSB0aWVyc1t0XS5icm93c2VyLmdldFRpZXJSZW5kZXJlcih0aWVyc1t0XSk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAodGhpcy5zdGFydEZldGNoZXNGb3IodGllcnNbdF0sIGF3YWl0ZWRTZXEpKSB7XG4gICAgICAgICAgICAgICAgbmVlZFNlcSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGV4KSB7XG4gICAgICAgICAgICB2YXIgdGllciA9IHRpZXJzW3RdO1xuXG4gICAgICAgICAgICB0aWVyLmN1cnJlbnRGZWF0dXJlcyA9IFtdO1xuICAgICAgICAgICAgdGllci5jdXJyZW50U2VxdWVuY2UgPSBudWxsO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ0Vycm9yIGZldGNoaW5nIHRpZXIgc291cmNlJyk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhleCk7XG4gICAgICAgICAgICBnZXggPSBleDtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGV4LnN0YWNrKTtcbiAgICAgICAgICAgIHRpZXJSZW5kZXJlci5yZW5kZXJUaWVyKGV4LCB0aWVyKTtcbiAgICAgICAgICAgIHRpZXIud2FzUmVuZGVyZWQoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmIChuZWVkU2VxICYmICF0aGlzLnNlcVdhc0ZldGNoZWQpIHtcbiAgICAgICAgdGhpcy5zZXFXYXNGZXRjaGVkID0gdHJ1ZTtcbiAgICAgICAgdmFyIHNtaW4gPSB0aGlzLm1pbiwgc21heCA9IHRoaXMubWF4O1xuXG4gICAgICAgIGlmICh0aGlzLmNzKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5jcy5zdGFydCA8PSBzbWluICYmIHRoaXMuY3MuZW5kID49IHNtYXgpIHtcbiAgICAgICAgICAgICAgICB2YXIgY2FjaGVkU2VxO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNzLnN0YXJ0ID09IHNtaW4gJiYgdGhpcy5jcy5lbmQgPT0gc21heCkge1xuICAgICAgICAgICAgICAgICAgICBjYWNoZWRTZXEgPSB0aGlzLmNzO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNhY2hlZFNlcSA9IG5ldyBEQVNTZXF1ZW5jZSh0aGlzLmNzLm5hbWUsIHNtaW4sIHNtYXgsIHRoaXMuY3MuYWxwaGFiZXQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNzLnNlcS5zdWJzdHJpbmcoc21pbiAtIHRoaXMuY3Muc3RhcnQsIHNtYXggKyAxIC0gdGhpcy5jcy5zdGFydCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXRlZFNlcS5wcm92aWRlKGNhY2hlZFNlcSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnNlcVNvdXJjZS5mZXRjaCh0aGlzLmNociwgc21pbiwgc21heCwgdGhpcy5wb29sLCBmdW5jdGlvbihlcnIsIHNlcSkge1xuICAgICAgICAgICAgaWYgKHNlcSkge1xuICAgICAgICAgICAgICAgIGlmICghdGhpc0IuY3MgfHwgKHNtaW4gPD0gdGhpc0IuY3Muc3RhcnQgJiYgc21heCA+PSB0aGlzQi5jcy5lbmQpIHx8XG4gICAgICAgICAgICAgICAgICAgIChzbWluID49IHRoaXNCLmNzLmVuZCkgfHwgKHNtYXggPD0gdGhpc0IuY3Muc3RhcnQpIHx8XG4gICAgICAgICAgICAgICAgICAgICgoc21heCAtIHNtaW4pID4gKHRoaXNCLmNzLmVuZCAtIHRoaXNCLmNzLnN0YXJ0KSkpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB0aGlzQi5jcyA9IHNlcTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYXdhaXRlZFNlcS5wcm92aWRlKHNlcSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdTZXF1ZW5jZSBsb2FkaW5nIGZhaWxlZCcsIGVycik7XG4gICAgICAgICAgICAgICAgYXdhaXRlZFNlcS5wcm92aWRlKG51bGwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAoZ2V4KVxuICAgICAgICB0aHJvdyBnZXg7XG59XG5cbktub3duU3BhY2UucHJvdG90eXBlLnN0YXJ0RmV0Y2hlc0ZvciA9IGZ1bmN0aW9uKHRpZXIsIGF3YWl0ZWRTZXEpIHtcbiAgICB2YXIgdGhpc0IgPSB0aGlzO1xuXG4gICAgdmFyIHZpZXdJRCA9IHRoaXMudmlld0NvdW50O1xuICAgIHZhciBzb3VyY2UgPSB0aWVyLmdldFNvdXJjZSgpIHx8IG5ldyBEdW1teUZlYXR1cmVTb3VyY2UoKTtcbiAgICB2YXIgbmVlZHNTZXEgPSB0aWVyLm5lZWRzU2VxdWVuY2UodGhpcy5zY2FsZSk7XG4gICAgdmFyIGJhdG9uID0gdGhpc0IuZmVhdHVyZUNhY2hlW3RpZXJdO1xuICAgIHZhciBzdHlsZUZpbHRlcnMgPSB0aWVyLmdldEFjdGl2ZVN0eWxlRmlsdGVycyh0aGlzLnNjYWxlKTtcbiAgICB2YXIgd2FudGVkVHlwZXM7XG4gICAgaWYgKHN0eWxlRmlsdGVycylcbiAgICAgICAgd2FudGVkVHlwZXMgPSBzdHlsZUZpbHRlcnMudHlwZUxpc3QoKTtcbiAgICB2YXIgY2hyID0gdGhpcy5jaHIsIG1pbiA9IHRoaXMubWluLCBtYXggPSB0aGlzLm1heDtcblxuXG4gICAgaWYgKHdhbnRlZFR5cGVzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAoYmF0b24gJiYgYmF0b24uY2hyID09PSB0aGlzLmNociAmJiBiYXRvbi5taW4gPD0gbWluICYmIGJhdG9uLm1heCA+PSBtYXgpIHtcbiAgICAgICAgdmFyIGNhY2hlZEZlYXR1cmVzID0gYmF0b24uZmVhdHVyZXM7XG4gICAgICAgIGlmIChiYXRvbi5taW4gPCBtaW4gfHwgYmF0b24ubWF4ID4gbWF4KSB7XG4gICAgICAgICAgICBjYWNoZWRGZWF0dXJlcyA9IGZpbHRlckZlYXR1cmVzKGNhY2hlZEZlYXR1cmVzLCBtaW4sIG1heCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzQi5wcm92aXNpb24odGllciwgYmF0b24uY2hyLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW50ZXJzZWN0aW9uKGJhdG9uLmNvdmVyYWdlLCBuZXcgUmFuZ2UobWluLCBtYXgpKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhdG9uLnNjYWxlLCB3YW50ZWRUeXBlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlZEZlYXR1cmVzLCBiYXRvbi5zdGF0dXMsXG4gICAgICAgICAgICAgICAgICAgICAgICBuZWVkc1NlcSA/IGF3YWl0ZWRTZXEgOiBudWxsKTtcblxuICAgICAgICB2YXIgYXZhaWxhYmxlU2NhbGVzID0gc291cmNlLmdldFNjYWxlcygpO1xuXG4gICAgICAgIGlmIChiYXRvbi5zY2FsZSA8PSB0aGlzLnNjYWxlIHx8ICFhdmFpbGFibGVTY2FsZXMpIHtcbiAgICAgICAgICAgIHJldHVybiBuZWVkc1NlcTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmIChzb3VyY2UuaW5zdHJ1bWVudClcbiAgICAgICAgY29uc29sZS5sb2coJ1N0YXJ0aW5nICBmZXRjaCAnICsgdmlld0lEICsgJyAoJyArIG1pbiArICcsICcgKyBtYXggKyAnKScpO1xuXG5cbiAgICBzb3VyY2UuZmV0Y2goY2hyLCBtaW4sIG1heCwgdGhpcy5zY2FsZSwgd2FudGVkVHlwZXMsIHRoaXMucG9vbCwgZnVuY3Rpb24oc3RhdHVzLCBmZWF0dXJlcywgc2NhbGUsIGNvdmVyYWdlKSB7XG4gICAgICAgIGlmIChzb3VyY2UuaW5zdHJ1bWVudClcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdGaW5pc2hpbmcgZmV0Y2ggJyArIHZpZXdJRCk7XG5cbiAgICAgICAgdmFyIGxhdGVzdFZpZXdJRCA9IHRoaXNCLmxhdGVzdFZpZXdzW3RpZXJdIHx8IC0xO1xuICAgICAgICBpZiAodGhpc0IuY2FuY2VsbGVkIHx8IGxhdGVzdFZpZXdJRCA+IHZpZXdJRCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFjb3ZlcmFnZSkge1xuICAgICAgICAgICAgY292ZXJhZ2UgPSBuZXcgUmFuZ2UobWluLCBtYXgpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFiYXRvbiB8fCAobWluIDwgYmF0b24ubWluKSB8fCAobWF4ID4gYmF0b24ubWF4KSkgeyAgICAgICAgIC8vIEZJWE1FIHNob3VsZCBiZSBtZXJnaW5nIGluIHNvbWUgY2FzZXM/XG4gICAgICAgICAgICB0aGlzQi5mZWF0dXJlQ2FjaGVbdGllcl0gPSBuZXcgS1NDYWNoZUJhdG9uKGNociwgbWluLCBtYXgsIHNjYWxlLCBmZWF0dXJlcywgc3RhdHVzLCBjb3ZlcmFnZSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzQi5sYXRlc3RWaWV3c1t0aWVyXSA9IHZpZXdJRDtcbiAgICAgICAgdGhpc0IucHJvdmlzaW9uKHRpZXIsIGNociwgY292ZXJhZ2UsIHNjYWxlLCB3YW50ZWRUeXBlcywgZmVhdHVyZXMsIHN0YXR1cywgbmVlZHNTZXEgPyBhd2FpdGVkU2VxIDogbnVsbCk7XG4gICAgfSwgc3R5bGVGaWx0ZXJzKTtcbiAgICByZXR1cm4gbmVlZHNTZXE7XG59XG5cbktub3duU3BhY2UucHJvdG90eXBlLnByb3Zpc2lvbiA9IGZ1bmN0aW9uKHRpZXIsIGNociwgY292ZXJhZ2UsIGFjdHVhbFNjYWxlLCB3YW50ZWRUeXBlcywgZmVhdHVyZXMsIHN0YXR1cywgYXdhaXRlZFNlcSkge1xuICAgIHZhciB0aWVyUmVuZGVyZXIgPSB0aWVyLmJyb3dzZXIuZ2V0VGllclJlbmRlcmVyKHRpZXIpO1xuICAgIGlmIChzdGF0dXMpIHtcbiAgICAgICAgdGllci5zZXRGZWF0dXJlcyhjaHIsIGNvdmVyYWdlLCBhY3R1YWxTY2FsZSwgW10sIG51bGwpO1xuICAgICAgICBpZiAoIWZlYXR1cmVzKSB7XG4gICAgICAgICAgICB2YXIgZSA9IG5ldyBFcnJvcihzdGF0dXMpO1xuICAgICAgICAgICAgc3RhdHVzID0gXCJFcnJvciBmZXRjaGluZyBkYXRhOiBcIiArIHN0YXR1cyArIFwiOyBzZWUgYnJvd3NlciBjb25zb2xlXCI7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkVycm9yIGZldGNoaW5nIGRhdGEgZm9yIHRpZXIgXCIgKyB0aWVyLmRhc1NvdXJjZS5uYW1lICsgXCI6XCIpO1xuICAgICAgICAgICAgY29uc29sZS5sb2codGllci5kYXNTb3VyY2UpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJTdGFjayB0cmFjZTpcIik7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlLnN0YWNrKVxuICAgICAgICB9XG4gICAgICAgIHRpZXJSZW5kZXJlci5yZW5kZXJUaWVyKHN0YXR1cywgdGllcik7XG4gICAgICAgIHRpZXIud2FzUmVuZGVyZWQoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgbWF5RG93bnNhbXBsZSA9IGZhbHNlO1xuICAgICAgICB2YXIgbmVlZEJhc2VDb21wb3NpdGlvbiA9IGZhbHNlO1xuICAgICAgICB2YXIgc3JjID0gdGllci5nZXRTb3VyY2UoKTtcbiAgICAgICAgd2hpbGUgKE1hcHBlZEZlYXR1cmVTb3VyY2UucHJvdG90eXBlLmlzUHJvdG90eXBlT2Yoc3JjKSB8fFxuICAgICAgICAgICAgICAgQ2FjaGluZ0ZlYXR1cmVTb3VyY2UucHJvdG90eXBlLmlzUHJvdG90eXBlT2Yoc3JjKSB8fFxuICAgICAgICAgICAgICAgT3ZlcmxheUZlYXR1cmVTb3VyY2UucHJvdG90eXBlLmlzUHJvdG90eXBlT2Yoc3JjKSkge1xuXG4gICAgICAgICAgICBpZiAoT3ZlcmxheUZlYXR1cmVTb3VyY2UucHJvdG90eXBlLmlzUHJvdG90eXBlT2Yoc3JjKSkge1xuICAgICAgICAgICAgICAgIHNyYyA9IHNyYy5zb3VyY2VzWzBdO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzcmMgPSBzcmMuc291cmNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChCV0dGZWF0dXJlU291cmNlLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKHNyYykgfHxcbiAgICAgICAgICAgIFJlbW90ZUJXR0ZlYXR1cmVTb3VyY2UucHJvdG90eXBlLmlzUHJvdG90eXBlT2Yoc3JjKSB8fFxuICAgICAgICAgICAgQkFNRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihzcmMpIHx8XG4gICAgICAgICAgICBSZW1vdGVCQU1GZWF0dXJlU291cmNlLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKHNyYykpIHtcblxuICAgICAgICAgICAgbWF5RG93bnNhbXBsZSA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXNyYy5vcHRzIHx8ICghc3JjLm9wdHMuZm9yY2VSZWR1Y3Rpb24gJiYgIXNyYy5vcHRzLm5vRG93bnNhbXBsZSkpIHtcbiAgICAgICAgICAgIGlmICgvKiAoYWN0dWFsU2NhbGUgPCAodGhpcy5zY2FsZS8yKSAmJiBmZWF0dXJlcy5sZW5ndGggPiAyMDApICB8fCAqL1xuICAgICAgICAgICAgICAgIChtYXlEb3duc2FtcGxlICYmIHdhbnRlZFR5cGVzICYmIHdhbnRlZFR5cGVzLmxlbmd0aCA9PSAxICYmIHdhbnRlZFR5cGVzLmluZGV4T2YoJ2RlbnNpdHknKSA+PSAwKSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBmZWF0dXJlcyA9IGRvd25zYW1wbGUoZmVhdHVyZXMsIHRoaXMuc2NhbGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHdhbnRlZFR5cGVzICYmIHdhbnRlZFR5cGVzLmxlbmd0aCA9PSAxICYmIHdhbnRlZFR5cGVzLmluZGV4T2YoJ2Jhc2UtY292ZXJhZ2UnKSA+PSAwKVxuICAgICAgICB7XG4gICAgICAgICAgICAvLyBCYXNlLWNvbXBvc2l0aW9uIGNvdmVyYWdlIHRyYWNrXG4gICAgICAgICAgICBuZWVkQmFzZUNvbXBvc2l0aW9uID0gdHJ1ZTtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgaWYgKGF3YWl0ZWRTZXEpIHtcbiAgICAgICAgICAgIGF3YWl0ZWRTZXEuYXdhaXQoZnVuY3Rpb24oc2VxKSB7XG4gICAgICAgICAgICAgICAgaWYgKG5lZWRCYXNlQ29tcG9zaXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgZmVhdHVyZXMgPSBnZXRCYXNlQ292ZXJhZ2UoZmVhdHVyZXMsIHNlcSwgdGllci5icm93c2VyLmJhc2VDb2xvcnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aWVyLnNldEZlYXR1cmVzKGNociwgY292ZXJhZ2UsIGFjdHVhbFNjYWxlLCBmZWF0dXJlcywgc2VxKTtcbiAgICAgICAgICAgICAgICB0aWVyUmVuZGVyZXIucmVuZGVyVGllcihzdGF0dXMsIHRpZXIpO1xuICAgICAgICAgICAgICAgIHRpZXIud2FzUmVuZGVyZWQoKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aWVyLnNldEZlYXR1cmVzKGNociwgY292ZXJhZ2UsIGFjdHVhbFNjYWxlLCBmZWF0dXJlcyk7XG4gICAgICAgICAgICB0aWVyUmVuZGVyZXIucmVuZGVyVGllcihzdGF0dXMsIHRpZXIpO1xuICAgICAgICAgICAgdGllci53YXNSZW5kZXJlZCgpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5pZiAodHlwZW9mKG1vZHVsZSkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgICAgIEtub3duU3BhY2U6IEtub3duU3BhY2VcbiAgICB9O1xufVxuIiwiLyogLSotIG1vZGU6IGphdmFzY3JpcHQ7IGMtYmFzaWMtb2Zmc2V0OiA0OyBpbmRlbnQtdGFicy1tb2RlOiBuaWwgLSotICovXG5cbi8vIFxuLy8gRGFsbGlhbmNlIEdlbm9tZSBFeHBsb3JlclxuLy8gKGMpIFRob21hcyBEb3duIDIwMDYtMjAxMVxuLy9cbi8vIGxoM3V0aWxzLmpzOiBjb21tb24gc3VwcG9ydCBmb3IgbGgzJ3MgZmlsZSBmb3JtYXRzXG4vL1xuXG5pZiAodHlwZW9mKHJlcXVpcmUpICE9PSAndW5kZWZpbmVkJykge1xuICAgIHZhciBqc3psaWIgPSByZXF1aXJlKCdqc3psaWInKTtcbiAgICB2YXIganN6bGliX2luZmxhdGVfYnVmZmVyID0ganN6bGliLmluZmxhdGVCdWZmZXI7XG4gICAgdmFyIGFycmF5Q29weSA9IGpzemxpYi5hcnJheUNvcHk7XG59XG5cbmZ1bmN0aW9uIFZvYihiLCBvKSB7XG4gICAgdGhpcy5ibG9jayA9IGI7XG4gICAgdGhpcy5vZmZzZXQgPSBvO1xufVxuXG5Wb2IucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuICcnICsgdGhpcy5ibG9jayArICc6JyArIHRoaXMub2Zmc2V0O1xufVxuXG5mdW5jdGlvbiByZWFkVm9iKGJhLCBvZmZzZXQsIGFsbG93WmVybykge1xuICAgIHZhciBibG9jayA9ICgoYmFbb2Zmc2V0KzZdICYgMHhmZikgKiAweDEwMDAwMDAwMCkgKyAoKGJhW29mZnNldCs1XSAmIDB4ZmYpICogMHgxMDAwMDAwKSArICgoYmFbb2Zmc2V0KzRdICYgMHhmZikgKiAweDEwMDAwKSArICgoYmFbb2Zmc2V0KzNdICYgMHhmZikgKiAweDEwMCkgKyAoKGJhW29mZnNldCsyXSAmIDB4ZmYpKTtcbiAgICB2YXIgYmludCA9IChiYVtvZmZzZXQrMV0gPDwgOCkgfCAoYmFbb2Zmc2V0XSk7XG4gICAgaWYgKGJsb2NrID09IDAgJiYgYmludCA9PSAwICYmICFhbGxvd1plcm8pIHtcbiAgICAgICAgcmV0dXJuIG51bGw7ICAvLyBTaG91bGQgb25seSBoYXBwZW4gaW4gdGhlIGxpbmVhciBpbmRleD9cbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gbmV3IFZvYihibG9jaywgYmludCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiB1bmJnemYoZGF0YSwgbGltKSB7XG4gICAgbGltID0gTWF0aC5taW4obGltIHx8IDEsIGRhdGEuYnl0ZUxlbmd0aCAtIDUwKTtcbiAgICB2YXIgb0Jsb2NrTGlzdCA9IFtdO1xuICAgIHZhciBwdHIgPSBbMF07XG4gICAgdmFyIHRvdGFsU2l6ZSA9IDA7XG5cbiAgICB3aGlsZSAocHRyWzBdIDwgbGltKSB7XG4gICAgICAgIHZhciBiYSA9IG5ldyBVaW50OEFycmF5KGRhdGEsIHB0clswXSwgMTIpOyAvLyBGSVhNRSBpcyB0aGlzIGVub3VnaCBmb3IgYWxsIGNyZWRpYmxlIEJHWkYgYmxvY2sgaGVhZGVycz9cbiAgICAgICAgdmFyIHhsZW4gPSAoYmFbMTFdIDw8IDgpIHwgKGJhWzEwXSk7XG4gICAgICAgIC8vIGRsb2coJ3hsZW5bJyArIChwdHJbMF0pICsnXT0nICsgeGxlbik7XG4gICAgICAgIHZhciB1bmMgPSBqc3psaWJfaW5mbGF0ZV9idWZmZXIoZGF0YSwgMTIgKyB4bGVuICsgcHRyWzBdLCBNYXRoLm1pbig2NTUzNiwgZGF0YS5ieXRlTGVuZ3RoIC0gMTIgLSB4bGVuIC0gcHRyWzBdKSwgcHRyKTtcbiAgICAgICAgcHRyWzBdICs9IDg7XG4gICAgICAgIHRvdGFsU2l6ZSArPSB1bmMuYnl0ZUxlbmd0aDtcbiAgICAgICAgb0Jsb2NrTGlzdC5wdXNoKHVuYyk7XG4gICAgfVxuXG4gICAgaWYgKG9CbG9ja0xpc3QubGVuZ3RoID09IDEpIHtcbiAgICAgICAgcmV0dXJuIG9CbG9ja0xpc3RbMF07XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIG91dCA9IG5ldyBVaW50OEFycmF5KHRvdGFsU2l6ZSk7XG4gICAgICAgIHZhciBjdXJzb3IgPSAwO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9CbG9ja0xpc3QubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIHZhciBiID0gbmV3IFVpbnQ4QXJyYXkob0Jsb2NrTGlzdFtpXSk7XG4gICAgICAgICAgICBhcnJheUNvcHkoYiwgMCwgb3V0LCBjdXJzb3IsIGIubGVuZ3RoKTtcbiAgICAgICAgICAgIGN1cnNvciArPSBiLmxlbmd0aDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0LmJ1ZmZlcjtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIENodW5rKG1pbnYsIG1heHYpIHtcbiAgICB0aGlzLm1pbnYgPSBtaW52OyB0aGlzLm1heHYgPSBtYXh2O1xufVxuXG5cbi8vXG4vLyBCaW5uaW5nICh0cmFuc2xpdGVyYXRlZCBmcm9tIFNBTTEuMyBzcGVjKVxuLy9cblxuLyogY2FsY3VsYXRlIGJpbiBnaXZlbiBhbiBhbGlnbm1lbnQgY292ZXJpbmcgW2JlZyxlbmQpICh6ZXJvLWJhc2VkLCBoYWxmLWNsb3NlLWhhbGYtb3BlbikgKi9cbmZ1bmN0aW9uIHJlZzJiaW4oYmVnLCBlbmQpXG57XG4gICAgLS1lbmQ7XG4gICAgaWYgKGJlZz4+MTQgPT0gZW5kPj4xNCkgcmV0dXJuICgoMTw8MTUpLTEpLzcgKyAoYmVnPj4xNCk7XG4gICAgaWYgKGJlZz4+MTcgPT0gZW5kPj4xNykgcmV0dXJuICgoMTw8MTIpLTEpLzcgKyAoYmVnPj4xNyk7XG4gICAgaWYgKGJlZz4+MjAgPT0gZW5kPj4yMCkgcmV0dXJuICgoMTw8OSktMSkvNyArIChiZWc+PjIwKTtcbiAgICBpZiAoYmVnPj4yMyA9PSBlbmQ+PjIzKSByZXR1cm4gKCgxPDw2KS0xKS83ICsgKGJlZz4+MjMpO1xuICAgIGlmIChiZWc+PjI2ID09IGVuZD4+MjYpIHJldHVybiAoKDE8PDMpLTEpLzcgKyAoYmVnPj4yNik7XG4gICAgcmV0dXJuIDA7XG59XG5cbi8qIGNhbGN1bGF0ZSB0aGUgbGlzdCBvZiBiaW5zIHRoYXQgbWF5IG92ZXJsYXAgd2l0aCByZWdpb24gW2JlZyxlbmQpICh6ZXJvLWJhc2VkKSAqL1xudmFyIE1BWF9CSU4gPSAoKCgxPDwxOCktMSkvNyk7XG5mdW5jdGlvbiByZWcyYmlucyhiZWcsIGVuZCkgXG57XG4gICAgdmFyIGkgPSAwLCBrLCBsaXN0ID0gW107XG4gICAgLS1lbmQ7XG4gICAgbGlzdC5wdXNoKDApO1xuICAgIGZvciAoayA9IDEgKyAoYmVnPj4yNik7IGsgPD0gMSArIChlbmQ+PjI2KTsgKytrKSBsaXN0LnB1c2goayk7XG4gICAgZm9yIChrID0gOSArIChiZWc+PjIzKTsgayA8PSA5ICsgKGVuZD4+MjMpOyArK2spIGxpc3QucHVzaChrKTtcbiAgICBmb3IgKGsgPSA3MyArIChiZWc+PjIwKTsgayA8PSA3MyArIChlbmQ+PjIwKTsgKytrKSBsaXN0LnB1c2goayk7XG4gICAgZm9yIChrID0gNTg1ICsgKGJlZz4+MTcpOyBrIDw9IDU4NSArIChlbmQ+PjE3KTsgKytrKSBsaXN0LnB1c2goayk7XG4gICAgZm9yIChrID0gNDY4MSArIChiZWc+PjE0KTsgayA8PSA0NjgxICsgKGVuZD4+MTQpOyArK2spIGxpc3QucHVzaChrKTtcbiAgICByZXR1cm4gbGlzdDtcbn1cblxuaWYgKHR5cGVvZihtb2R1bGUpICE9PSAndW5kZWZpbmVkJykge1xuICAgIG1vZHVsZS5leHBvcnRzID0ge1xuICAgICAgICB1bmJnemY6IHVuYmd6ZixcbiAgICAgICAgcmVhZFZvYjogcmVhZFZvYixcbiAgICAgICAgcmVnMmJpbjogcmVnMmJpbixcbiAgICAgICAgcmVnMmJpbnM6IHJlZzJiaW5zLFxuICAgICAgICBDaHVuazogQ2h1bmtcbiAgICB9O1xufVxuIiwiLyogLSotIG1vZGU6IGphdmFzY3JpcHQ7IGMtYmFzaWMtb2Zmc2V0OiA0OyBpbmRlbnQtdGFicy1tb2RlOiBuaWwgLSotICovXG5cbi8vIFxuLy8gRGFsbGlhbmNlIEdlbm9tZSBFeHBsb3JlclxuLy8gKGMpIFRob21hcyBEb3duIDIwMDYtMjAxNFxuLy9cbi8vIG1lbXN0b3JlLmpzXG4vL1xuXG5cInVzZSBzdHJpY3RcIjtcblxuaWYgKHR5cGVvZihyZXF1aXJlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB2YXIgc2EgPSByZXF1aXJlKCcuL3NvdXJjZWFkYXB0ZXJzJyk7XG4gICAgdmFyIGRhbGxpYW5jZV9yZWdpc3RlclNvdXJjZUFkYXB0ZXJGYWN0b3J5ID0gc2EucmVnaXN0ZXJTb3VyY2VBZGFwdGVyRmFjdG9yeTtcbiAgICB2YXIgZGFsbGlhbmNlX21ha2VQYXJzZXIgPSBzYS5tYWtlUGFyc2VyO1xuICAgIHZhciBGZWF0dXJlU291cmNlQmFzZSA9IHNhLkZlYXR1cmVTb3VyY2VCYXNlO1xuXG4gICAgdmFyIGRhcyA9IHJlcXVpcmUoJy4vZGFzJyk7XG4gICAgdmFyIERBU1N0eWxlc2hlZXQgPSBkYXMuREFTU3R5bGVzaGVldDtcbiAgICB2YXIgREFTU3R5bGUgPSBkYXMuREFTU3R5bGU7XG4gICAgdmFyIERBU0ZlYXR1cmUgPSBkYXMuREFTRmVhdHVyZTtcbiAgICB2YXIgREFTR3JvdXAgPSBkYXMuREFTR3JvdXA7XG5cbiAgICB2YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XG4gICAgdmFyIEF3YWl0ZWQgPSB1dGlscy5Bd2FpdGVkO1xuICAgIHZhciB0ZXh0WEhSID0gdXRpbHMudGV4dFhIUjtcbn1cblxuZnVuY3Rpb24gTWVtU3RvcmUoKSB7XG4gICAgdGhpcy5mZWF0dXJlc0J5Q2hyID0ge307XG4gICAgdGhpcy5tYXhMZW5ndGggPSAxO1xuICAgIHRoaXMuY2hyUmluZyA9IG51bGw7XG59XG5cbk1lbVN0b3JlLnByb3RvdHlwZS5hZGRGZWF0dXJlcyA9IGZ1bmN0aW9uKGZlYXR1cmVzKSB7XG4gICAgdmFyIGRpcnR5ID0ge307XG4gICAgZm9yICh2YXIgZmkgPSAwOyBmaSA8IGZlYXR1cmVzLmxlbmd0aDsgKytmaSkge1xuICAgICAgICB2YXIgZiA9IGZlYXR1cmVzW2ZpXTtcbiAgICAgICAgdmFyIGNociA9IGYuc2VnbWVudCB8fCBmLmNocjtcbiAgICAgICAgdmFyIGZhID0gdGhpcy5mZWF0dXJlc0J5Q2hyW2Nocl07XG4gICAgICAgIGlmICghZmEpIHtcbiAgICAgICAgICAgIGZhID0gW107XG4gICAgICAgICAgICB0aGlzLmZlYXR1cmVzQnlDaHJbY2hyXSA9IGZhO1xuICAgICAgICB9XG4gICAgICAgIGZhLnB1c2goZik7XG4gICAgICAgIGRpcnR5W2Nocl0gPSB0cnVlO1xuXG4gICAgICAgIHZhciBsZW4gPSBmLm1heCAtIGYubWluICsgMTtcbiAgICAgICAgaWYgKGxlbiA+IHRoaXMubWF4TGVuZ3RoKVxuICAgICAgICAgICAgdGhpcy5tYXhMZW5ndGggPSBsZW47XG4gICAgfVxuXG4gICAgZm9yIChjaHIgaW4gZGlydHkpIHtcbiAgICAgICAgdmFyIGZhID0gdGhpcy5mZWF0dXJlc0J5Q2hyW2Nocl07XG4gICAgICAgIGZhLnNvcnQoZnVuY3Rpb24oZjEsIGYyKSB7XG4gICAgICAgICAgICB2YXIgZCA9IGYxLm1pbiAtIGYyLm1pbjtcbiAgICAgICAgICAgIGlmIChkICE9IDApXG4gICAgICAgICAgICAgICAgcmV0dXJuIGQ7XG4gICAgICAgICAgICByZXR1cm4gZjEubWF4IC0gZjIubWF4O1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgdGhpcy5jaHJSaW5nID0gbnVsbDtcbn1cblxuTWVtU3RvcmUucHJvdG90eXBlLl9pbmRleEZvciA9IGZ1bmN0aW9uKGZhLCBwKSB7XG4gICAgdmFyIGxiID0gMCwgdWIgPSBmYS5sZW5ndGg7XG4gICAgd2hpbGUgKHViID4gbGIpIHtcbiAgICAgICAgdmFyIG1pZCA9ICgobGIgKyB1YikvMil8MDtcbiAgICAgICAgaWYgKG1pZCA+PSBmYS5sZW5ndGgpXG4gICAgICAgICAgICByZXR1cm4gZmEubGVuZ3RoO1xuICAgICAgICB2YXIgbWcgPSBmYVttaWRdO1xuICAgICAgICBpZiAocCA8IG1nLm1pbikge1xuICAgICAgICAgICAgdWIgPSBtaWQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsYiA9IG1pZCArIDE7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHViO1xufVxuXG5NZW1TdG9yZS5wcm90b3R5cGUuZmV0Y2ggPSBmdW5jdGlvbihjaHIsIG1pbiwgbWF4KSB7XG4gICAgdmFyIGZhID0gdGhpcy5mZWF0dXJlc0J5Q2hyW2Nocl07XG4gICAgaWYgKCFmYSkge1xuICAgICAgICBpZiAoY2hyLmluZGV4T2YoJ2NocicpID09IDApXG4gICAgICAgICAgICBmYSA9IHRoaXMuZmVhdHVyZXNCeUNocltjaHIuc3Vic3RyaW5nKDMpXTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgZmEgPSB0aGlzLmZlYXR1cmVzQnlDaHJbJ2NocicgKyBjaHJdO1xuICAgIH1cbiAgICBpZiAoIWZhKVxuICAgICAgICByZXR1cm4gW107XG5cbiAgICB2YXIgbWluaSA9IE1hdGgubWF4KDAsIHRoaXMuX2luZGV4Rm9yKGZhLCBtaW4gLSB0aGlzLm1heExlbmd0aCAtIDEpKTtcbiAgICB2YXIgbWF4aSA9IE1hdGgubWluKGZhLmxlbmd0aCAtIDEsIHRoaXMuX2luZGV4Rm9yKGZhLCBtYXgpKTtcblxuICAgIHZhciByZXMgPSBbXTtcbiAgICBmb3IgKHZhciBmaSA9IG1pbmk7IGZpIDw9IG1heGk7ICsrZmkpIHtcbiAgICAgICAgdmFyIGYgPSBmYVtmaV07XG4gICAgICAgIGlmIChmLm1pbiA8PSBtYXggJiYgZi5tYXggPj0gbWluKVxuICAgICAgICAgICAgcmVzLnB1c2goZik7XG4gICAgfVxuICAgIHJldHVybiByZXM7XG59XG5cbk1lbVN0b3JlLnByb3RvdHlwZS5maW5kTmV4dEZlYXR1cmUgPSBmdW5jdGlvbihjaHIsIHBvcywgZGlyKSB7XG4gICAgaWYgKHRoaXMuY2hyUmluZyA9PSBudWxsKSB7XG4gICAgICAgIHRoaXMuY2hyUmluZyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBjaHIgaW4gdGhpcy5mZWF0dXJlc0J5Q2hyKSB7XG4gICAgICAgICAgICB0aGlzLmNoclJpbmcucHVzaChjaHIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2hyUmluZy5zb3J0KCk7XG4gICAgfVxuXG4gICAgdmFyIGZhID0gdGhpcy5mZWF0dXJlc0J5Q2hyW2Nocl07XG4gICAgaWYgKCFmYSkge1xuICAgICAgICBpZiAoY2hyLmluZGV4T2YoJ2NocicpID09IDApIHtcbiAgICAgICAgICAgIGNociA9IGNoci5zdWJzdHJpbmcoMyk7XG4gICAgICAgICAgICBmYSA9IHRoaXMuZmVhdHVyZXNCeUNocltjaHJdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2hyID0gJ2NocicgKyBjaHI7XG4gICAgICAgICAgICBmYSA9IHRoaXMuZmVhdHVyZXNCeUNocltjaHJdO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmICghZmEpXG4gICAgICAgIHJldHVybiBudWxsO1xuXG4gICAgdmFyIGkgPSBNYXRoLm1heCgwLCBNYXRoLm1pbih0aGlzLl9pbmRleEZvcihmYSwgcG9zKSwgZmEubGVuZ3RoIC0gMSkpO1xuICAgIGlmIChkaXIgPiAwKSB7XG4gICAgICAgIHdoaWxlIChpIDwgZmEubGVuZ3RoKSB7XG4gICAgICAgICAgICB2YXIgZiA9IGZhW2krK107XG4gICAgICAgICAgICBpZiAoZi5taW4gPiBwb3MpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGY7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGNockluZCA9IHRoaXMuY2hyUmluZy5pbmRleE9mKGNocikgKyAxO1xuICAgICAgICBpZiAoY2hySW5kID49IHRoaXMuY2hyUmluZy5sZW5ndGgpXG4gICAgICAgICAgICBjaHJJbmQgPSAwO1xuICAgICAgICByZXR1cm4gdGhpcy5maW5kTmV4dEZlYXR1cmUodGhpcy5jaHJSaW5nW2NockluZF0sIDAsIGRpcik7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgd2hpbGUgKGkgPj0gMCkge1xuICAgICAgICAgICAgdmFyIGYgPSBmYVtpLS1dO1xuICAgICAgICAgICAgaWYgKGYubWF4IDwgcG9zKVxuICAgICAgICAgICAgICAgIHJldHVybiBmO1xuICAgICAgICB9XG4gICAgICAgIHZhciBjaHJJbmQgPSB0aGlzLmNoclJpbmcuaW5kZXhPZihjaHIpIC0gMTtcbiAgICAgICAgaWYgKGNockluZCA8IDApXG4gICAgICAgICAgICBjaHJJbmQgPSB0aGlzLmNoclJpbmcubGVuZ3RoIC0gMTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmluZE5leHRGZWF0dXJlKHRoaXMuY2hyUmluZ1tjaHJJbmRdLCAxMDAwMDAwMDAwMCwgZGlyKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIE1lbVN0b3JlRmVhdHVyZVNvdXJjZShzb3VyY2UpIHtcbiAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICBGZWF0dXJlU291cmNlQmFzZS5jYWxsKHRoaXMpO1xuICAgIHRoaXMuc3RvcmVIb2xkZXIgPSBuZXcgQXdhaXRlZCgpO1xuICAgIHRoaXMucGFyc2VyID0gZGFsbGlhbmNlX21ha2VQYXJzZXIoc291cmNlLnBheWxvYWQpO1xuICAgIGlmICghdGhpcy5wYXJzZXIpIHtcbiAgICAgICAgdGhyb3cgXCJVbnN1cHBvcnRlZCBtZW1zdG9yZSBwYXlsb2FkOiBcIiArIHNvdXJjZS5wYXlsb2FkO1xuICAgIH1cblxuICAgIHZhciB0aGlzQiA9IHRoaXM7XG4gICAgdGhpcy5fbG9hZChmdW5jdGlvbihyZXNwLCBlcnIpIHtcbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgdGhpc0IuZXJyb3IgPSBlcnI7XG4gICAgICAgICAgICB0aGlzQi5zdG9yZUhvbGRlci5wcm92aWRlKG51bGwpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIHN0b3JlID0gbmV3IE1lbVN0b3JlKCk7XG4gICAgICAgICAgICB2YXIgZmVhdHVyZXMgPSBbXTtcbiAgICAgICAgICAgIHZhciBsaW5lcyA9IHJlc3Auc3BsaXQoJ1xcbicpO1xuXG4gICAgICAgICAgICB2YXIgc2Vzc2lvbiA9IHRoaXNCLnBhcnNlci5jcmVhdGVTZXNzaW9uKGZ1bmN0aW9uKGYpIHtmZWF0dXJlcy5wdXNoKGYpfSk7XG4gICAgICAgICAgICBmb3IgKHZhciBsaSA9IDA7IGxpIDwgbGluZXMubGVuZ3RoOyArK2xpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGxpbmUgPSBsaW5lc1tsaV07XG4gICAgICAgICAgICAgICAgaWYgKGxpbmUubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBzZXNzaW9uLnBhcnNlKGxpbmUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNlc3Npb24uZmx1c2goKTtcblxuICAgICAgICAgICAgc3RvcmUuYWRkRmVhdHVyZXMoZmVhdHVyZXMpO1xuXG4gICAgICAgICAgICB0aGlzQi5zdG9yZUhvbGRlci5wcm92aWRlKHN0b3JlKTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuXG5NZW1TdG9yZUZlYXR1cmVTb3VyY2UucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShGZWF0dXJlU291cmNlQmFzZS5wcm90b3R5cGUpO1xuXG5NZW1TdG9yZUZlYXR1cmVTb3VyY2UucHJvdG90eXBlLl9sb2FkID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICBpZiAodGhpcy5zb3VyY2UuYmxvYikge1xuICAgICAgICB2YXIgciA9IG5ldyBGaWxlUmVhZGVyKCk7XG4gICAgICAgIHIub25sb2FkZW5kID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soci5yZXN1bHQsIHIuZXJyb3IpO1xuICAgICAgICB9XG4gICAgICAgIHIucmVhZEFzVGV4dCh0aGlzLnNvdXJjZS5ibG9iKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBpZiAodGhpcy5zb3VyY2UuY3JlZGVudGlhbHMpXG4gICAgICAgICAgICB2YXIgb3B0cyA9IHtjcmVkZW50aWFscyA6IHRoaXMuc291cmNlLmNyZWRlbnRpYWxzfTtcbiAgICAgICAgdGV4dFhIUih0aGlzLnNvdXJjZS51cmksIGNhbGxiYWNrLCBvcHRzKTtcbiAgICB9XG59XG5cbk1lbVN0b3JlRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuZmV0Y2ggPSBmdW5jdGlvbihjaHIsIG1pbiwgbWF4LCBzY2FsZSwgdHlwZXMsIHBvb2wsIGNudCkge1xuICAgIHZhciB0aGlzQiA9IHRoaXM7XG4gICAgdGhpcy5zdG9yZUhvbGRlci5hd2FpdChmdW5jdGlvbihzdG9yZSkge1xuICAgICAgICBpZiAoc3RvcmUpIHtcbiAgICAgICAgICAgIHZhciBmID0gc3RvcmUuZmV0Y2goY2hyLCBtaW4sIG1heCk7XG4gICAgICAgICAgICByZXR1cm4gY250KG51bGwsIGYsIDEwMDAwMDAwMCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gY250KHRoaXNCLmVycm9yKVxuICAgICAgICB9XG4gICAgfSk7XG59XG5cbk1lbVN0b3JlRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuZ2V0U3R5bGVTaGVldCA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgaWYgKHRoaXMucGFyc2VyICYmIHRoaXMucGFyc2VyLmdldFN0eWxlU2hlZXQpXG4gICAgICAgIHRoaXMucGFyc2VyLmdldFN0eWxlU2hlZXQoY2FsbGJhY2spXG59XG5cbk1lbVN0b3JlRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuZ2V0RGVmYXVsdEZJUHMgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgIGlmICh0aGlzLnBhcnNlciAmJiB0aGlzLnBhcnNlci5nZXREZWZhdWx0RklQcylcbiAgICAgICAgdGhpcy5wYXJzZXIuZ2V0RGVmYXVsdEZJUHMoY2FsbGJhY2spO1xufVxuXG5NZW1TdG9yZUZlYXR1cmVTb3VyY2UucHJvdG90eXBlLmdldFNjYWxlcyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAxMDAwMDAwMDA7XG59XG5cbk1lbVN0b3JlRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuZmluZE5leHRGZWF0dXJlID0gZnVuY3Rpb24oY2hyLCBwb3MsIGRpciwgY2FsbGJhY2spIHtcbiAgICB2YXIgdGhpc0IgPSB0aGlzO1xuICAgIHRoaXMuc3RvcmVIb2xkZXIuYXdhaXQoZnVuY3Rpb24oc3RvcmUpIHtcbiAgICAgICAgaWYgKHN0b3JlKSB7XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soc3RvcmUuZmluZE5leHRGZWF0dXJlKGNociwgcG9zLCBkaXIpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsLCB0aGlzQi5lcnJvcik7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuXG5NZW1TdG9yZUZlYXR1cmVTb3VyY2UucHJvdG90eXBlLmNhcGFiaWxpdGllcyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBjYXBzID0ge2xlYXA6IHRydWV9O1xuICAgIHJldHVybiBjYXBzO1xufVxuXG5kYWxsaWFuY2VfcmVnaXN0ZXJTb3VyY2VBZGFwdGVyRmFjdG9yeSgnbWVtc3RvcmUnLCBmdW5jdGlvbihzb3VyY2UpIHtcbiAgICByZXR1cm4ge2ZlYXR1cmVzOiBuZXcgTWVtU3RvcmVGZWF0dXJlU291cmNlKHNvdXJjZSl9O1xufSk7XG4iLCIvKiBqc2hpbnQgZXN2ZXJzaW9uOiA2ICovXG5cInVzZSBzdHJpY3RcIjtcblxuaW1wb3J0IHsgZHJhd1NlcVRpZXIgfSBmcm9tIFwiLi9zZXF1ZW5jZS1kcmF3LmpzXCI7XG5cbmltcG9ydCB7IEdyaWRHbHlwaCB9IGZyb20gXCIuL2dseXBocy5qc1wiO1xuXG5pbXBvcnQgKiBhcyBEZWZhdWx0UmVuZGVyZXIgZnJvbSBcIi4vZGVmYXVsdC1yZW5kZXJlclwiO1xuXG5pbXBvcnQgKiBhcyBSIGZyb20gXCJyYW1kYVwiO1xuXG5leHBvcnQgeyByZW5kZXJUaWVyLCBkcmF3VGllciB9O1xuXG5cbi8qIFJlbmRlcnMgbXVsdGlwbGUgdGllcnMgaW4gYSBzaW5nbGUgdHJhY2suXG4gICBXb3JrcyBieSBzaW1wbHkgZHJhd2luZyBzZXZlcmFsIHRpZXJzIHRvIGEgc2luZ2xlIGNhbnZhcy5cbiAgIEFjdHVhbCByZW5kZXJpbmcgaXMgZG9uZSB1c2luZyBkZWZhdWx0LXJlbmRlcmVyLmVzNi5cbiAgIEEgbXVsdGktdGllciByZW5kZXJlciBpcyBjb25maWd1cmVkIGJ5IGFkZGluZyB0aGUgZm9sbG93aW5nIHRvIGEgdGllcidzXG4gICBjb25maWd1cmF0aW9uOlxuICAgcmVuZGVyZXI6ICdtdWx0aScsXG4gICBtdWx0aToge1xuICAgICAgIG11bHRpX2lkOiBcIm11bHRpXzFcIixcbiAgIH1cblxuICAgQWxsIHN1YnRpZXJzIHdpdGggdGhlIFwibXVsdGlfMVwiIG11bHRpX2lkIHdpbGwgYmUgZHJhd24gdG8gdGhpcyB0aWVyJ3MgY2FudmFzLlxuICovXG5cbmZ1bmN0aW9uIHJlbmRlclRpZXIoc3RhdHVzLCB0aWVyKSB7XG4gICAgZHJhd1RpZXIodGllcik7XG4gICAgdGllci51cGRhdGVTdGF0dXMoc3RhdHVzKTtcbn1cblxuZnVuY3Rpb24gZHJhd1RpZXIobXVsdGlUaWVyKSB7XG4gICAgbGV0IG11bHRpQ29uZmlnID0gbXVsdGlUaWVyLmRhc1NvdXJjZS5tdWx0aTtcbiAgICBsZXQgZ2V0U3ViQ29uZmlnID0gdCA9PiB0LmRhc1NvdXJjZS5zdWI7XG5cbiAgICAvLyBQYWRkaW5nIGlzIHVzZWQgZm9yIGZpbmRpbmcgdGhlIGNvcnJlY3QgY2FudmFzIHNpemUgYW5kIG11c3QgYmUgc2V0XG4gICAgaWYgKCFtdWx0aVRpZXIucGFkZGluZylcbiAgICAgICAgbXVsdGlUaWVyLnBhZGRpbmcgPSAzO1xuXG4gICAgbGV0IGNhbnZhcyA9IG11bHRpVGllci52aWV3cG9ydC5nZXRDb250ZXh0KFwiMmRcIik7XG4gICAgbGV0IHJldGluYSA9IG11bHRpVGllci5icm93c2VyLnJldGluYSAmJiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyA+IDE7XG4gICAgaWYgKHJldGluYSkge1xuICAgICAgICBjYW52YXMuc2NhbGUoMiwgMik7XG4gICAgfVxuXG4gICAgLy8gRmlsdGVyIG91dCBvbmx5IHRpZXJzIHRoYXQgYXJlIHRvIGJlIGRyYXduIGluIHRoaXMgbXVsdGl0aWVyLFxuICAgIC8vIGFuZCBhbHNvIGhhdmUgZmV0Y2hlZCBkYXRhLlxuICAgIGxldCB0aWVycyA9IG11bHRpVGllci5icm93c2VyLnRpZXJzLlxuICAgICAgICAgICAgZmlsdGVyKHRpZXIgPT4gdHlwZW9mKGdldFN1YkNvbmZpZyh0aWVyKSkgPT09IFwib2JqZWN0XCIgJiZcbiAgICAgICAgICAgICAgICAgICBnZXRTdWJDb25maWcodGllcikubXVsdGlfaWQgPT09IG11bHRpQ29uZmlnLm11bHRpX2lkICYmXG4gICAgICAgICAgICAgICAgICAgKHRpZXIuY3VycmVudEZlYXR1cmVzIHx8IHRpZXIuY3VycmVudFNlcXVlbmNlKSk7XG5cbiAgICAvLyBUaGUgc2hvcnRlc3QgZGlzdGFuY2UgZnJvbSB0aGUgdG9wIG9mIHRoZSBjYW52YXMgdG8gYSBzdWJ0aWVyXG4gICAgbGV0IG1pbk9mZnNldCA9IFIucGlwZShcbiAgICAgICAgUi5tYXAodGllciA9PiB0aWVyLmRhc1NvdXJjZS5zdWIub2Zmc2V0KSxcbiAgICAgICAgUi5yZWR1Y2UoKGFjYywgb2Zmc2V0KSA9PiBvZmZzZXQgPCBhY2MgPyBvZmZzZXQgOiBhY2MsIDApXG4gICAgKSh0aWVycyk7XG5cbiAgICB0aWVycy5mb3JFYWNoKHRpZXIgPT4ge1xuICAgICAgICBpZiAodGllci5zZXF1ZW5jZVNvdXJjZSkge1xuICAgICAgICAgICAgZHJhd1NlcVRpZXIodGllciwgdGllci5jdXJyZW50U2VxdWVuY2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gU2hpZnQgc3VidGllcnMgdXAgYnkgdGhlIG1pbmltdW0gb2Zmc2V0LFxuICAgICAgICAgICAgLy8gc28gdGhhdCB0aGVyZSdzIG5vIGVtcHR5IHNwYWNlIGF0IHRoZSB0b3BcbiAgICAgICAgICAgIERlZmF1bHRSZW5kZXJlci5wcmVwYXJlU3VidGllcnModGllciwgY2FudmFzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXRTdWJDb25maWcodGllcikub2Zmc2V0IC0gbWluT2Zmc2V0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWxzZSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBNdXN0IGJlIHNldCBmb3IgcGFpbnRpbmcgdG8gd29ya1xuICAgICAgICBpZiAoIW11bHRpVGllci5nbHlwaENhY2hlT3JpZ2luKVxuICAgICAgICAgICAgbXVsdGlUaWVyLmdseXBoQ2FjaGVPcmlnaW4gPSB0aWVyLmdseXBoQ2FjaGVPcmlnaW47XG4gICAgfSk7XG5cbiAgICAvLyBUaGUgY2FudmFzIHNob3VsZCBmaXQgYWxsIHN1YnRpZXJzLCBpbmNsdWRpbmcgb2Zmc2V0cywgYnV0IG5vIG1vcmVcbiAgICBsZXQgY2FudmFzSGVpZ2h0ID0gUi5waXBlKFxuICAgICAgICBSLm1hcCh0aWVyID0+XG4gICAgICAgICAgICAgIFIubWFwKHN1YnRpZXIgPT4gc3VidGllci5oZWlnaHQgKyBnZXRTdWJDb25maWcodGllcikub2Zmc2V0LFxuICAgICAgICAgICAgICAgICAgICB0aWVyLnN1YnRpZXJzKSksXG4gICAgICAgIFIuZmxhdHRlbixcbiAgICAgICAgUi5yZWR1Y2UoKGFjYywgaCkgPT4gaCA+IGFjYyA/IGggOiBhY2MsIC1JbmZpbml0eSksXG4gICAgICAgIFIuYWRkKC1taW5PZmZzZXQpXG4gICAgKSh0aWVycyk7XG5cbiAgICBwcmVwYXJlVmlld3BvcnQobXVsdGlUaWVyLCBjYW52YXMsIHJldGluYSwgY2FudmFzSGVpZ2h0LCB0cnVlKTtcblxuICAgIHRpZXJzLnNvcnQoKHQxLCB0MikgPT4gZ2V0U3ViQ29uZmlnKHQxKS56ID4gZ2V0U3ViQ29uZmlnKHQyKS56KTtcblxuICAgIC8vIFRPRE86IG1ha2UgaXQgYWRkIHRoZSBnbHlwaCBvbiB0byB0aGUgZmlyc3QgYXZhaWxhYmxlIHRpZXI7XG4gICAgLy8gY3Jhc2hlcyBpZiBsYXN0IHRpZXIgaXMgZW1wdHkuLi5cbiAgICBpZiAobXVsdGlDb25maWcuZ3JpZCAmJiB0aWVycyAmJiB0aWVyc1t0aWVycy5sZW5ndGgtMV0gJiYgdGllcnNbdGllcnMubGVuZ3RoLTFdLnN1YnRpZXJzWzBdKSB7XG4gICAgICAgIGxldCBncmlkID0gbmV3IEdyaWRHbHlwaChjYW52YXNIZWlnaHQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtdWx0aUNvbmZpZy5ncmlkX29mZnNldCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG11bHRpQ29uZmlnLmdyaWRfc3BhY2luZyk7XG4gICAgICAgIC8vIHByZXR0eSBoYWNreSB3YXkgb2YgYWRkaW5nIHRoZSBncmlkLCBidXQgaXQgd29ya3MgKG1vc3RseSlcbiAgICAgICAgdGllcnNbdGllcnMubGVuZ3RoLTFdLnN1YnRpZXJzWzBdLmdseXBocy51bnNoaWZ0KGdyaWQpO1xuICAgIH1cblxuICAgIHRpZXJzLmZvckVhY2godGllciA9PiB7XG4gICAgICAgIC8vIE5lZWQgdG8gc2F2ZSBhbmQgcmVzdG9yZSBjYW52YXMgdG8gbWFrZSBzdXJlIHRoYXQgdGhlIHN1YnRpZXJzIGFyZVxuICAgICAgICAvLyBkcmF3biBvbiB0b3Agb2Ygb25lIGFub3RoZXIsIGlmIG5vdCBzaGlmdGVkLi4uXG4gICAgICAgIGNhbnZhcy5zYXZlKCk7XG4gICAgICAgIERlZmF1bHRSZW5kZXJlci5wYWludCh0aWVyLCBjYW52YXMsIHJldGluYSwgdHJ1ZSk7XG4gICAgICAgIGNhbnZhcy5yZXN0b3JlKCk7XG4gICAgfSk7XG5cbiAgICBtdWx0aVRpZXIuZHJhd092ZXJsYXkoKTtcblxuICAgIGlmIChtdWx0aUNvbmZpZy5xdWFudCkge1xuICAgICAgICBsZXQgcXVhbnRDYW52YXMgPSBEZWZhdWx0UmVuZGVyZXIuY3JlYXRlUXVhbnRPdmVybGF5KG11bHRpVGllciwgY2FudmFzSGVpZ2h0K211bHRpVGllci5wYWRkaW5nKjIsIHJldGluYSk7XG4gICAgICAgIERlZmF1bHRSZW5kZXJlci5wYWludFF1YW50KHF1YW50Q2FudmFzLCBtdWx0aVRpZXIsIG11bHRpQ29uZmlnLnF1YW50LCAxMCk7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZihtdWx0aVRpZXIuZGFzU291cmNlLmRyYXdDYWxsYmFjaykgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICBtdWx0aVRpZXIuZGFzU291cmNlLmRyYXdDYWxsYmFjayhjYW52YXMsIG11bHRpVGllcik7XG4gICAgfVxuXG4gICAgbXVsdGlUaWVyLm9yaWdpbkhheHggPSAwO1xuICAgIG11bHRpVGllci5icm93c2VyLmFycmFuZ2VUaWVycygpO1xufVxuXG5mdW5jdGlvbiBwcmVwYXJlVmlld3BvcnQodGllciwgY2FudmFzLCByZXRpbmEsIGNhbnZhc0hlaWdodCwgY2xlYXI9dHJ1ZSkge1xuICAgIGxldCBkZXNpcmVkV2lkdGggPSB0aWVyLmJyb3dzZXIuZmVhdHVyZVBhbmVsV2lkdGggKyAyMDAwO1xuICAgIGlmIChyZXRpbmEpIHtcbiAgICAgICAgZGVzaXJlZFdpZHRoICo9IDI7XG4gICAgfVxuXG4gICAgbGV0IGZwdyA9IHRpZXIudmlld3BvcnQud2lkdGh8MDtcbiAgICBpZiAoZnB3IDwgZGVzaXJlZFdpZHRoIC0gNTApIHtcbiAgICAgICAgdGllci52aWV3cG9ydC53aWR0aCA9IGZwdyA9IGRlc2lyZWRXaWR0aDtcbiAgICB9XG5cbiAgICBjYW52YXNIZWlnaHQgKz0gMip0aWVyLnBhZGRpbmc7XG4gICAgY2FudmFzSGVpZ2h0ID0gTWF0aC5tYXgoY2FudmFzSGVpZ2h0LCB0aWVyLmJyb3dzZXIubWluVGllckhlaWdodCk7XG5cbiAgICBpZiAoY2FudmFzSGVpZ2h0ICE9IHRpZXIudmlld3BvcnQuaGVpZ2h0KSB7XG4gICAgICAgIHRpZXIudmlld3BvcnQuaGVpZ2h0ID0gY2FudmFzSGVpZ2h0O1xuXG4gICAgICAgIGlmIChyZXRpbmEpIHtcbiAgICAgICAgICAgIHRpZXIudmlld3BvcnQuaGVpZ2h0ICo9IDI7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB0aWVyLnZpZXdwb3J0SG9sZGVyLnN0eWxlLmxlZnQgPSAnLTEwMDBweCc7XG4gICAgdGllci52aWV3cG9ydC5zdHlsZS53aWR0aCA9IHJldGluYSA/ICgnJyArIChmcHcvMikgKyAncHgnKSA6ICgnJyArIGZwdyArICdweCcpO1xuICAgIHRpZXIudmlld3BvcnQuc3R5bGUuaGVpZ2h0ID0gJycgKyBjYW52YXNIZWlnaHQgKyAncHgnO1xuICAgIHRpZXIubGF5b3V0SGVpZ2h0ID0gIE1hdGgubWF4KGNhbnZhc0hlaWdodCwgdGllci5icm93c2VyLm1pblRpZXJIZWlnaHQpO1xuXG4gICAgdGllci51cGRhdGVIZWlnaHQoKTtcbiAgICB0aWVyLm5vcmlnaW4gPSB0aWVyLmJyb3dzZXIudmlld1N0YXJ0O1xuXG4gICAgaWYgKGNsZWFyKSB7XG4gICAgICAgIERlZmF1bHRSZW5kZXJlci5jbGVhclZpZXdwb3J0KGNhbnZhcywgZnB3LCBjYW52YXNIZWlnaHQpO1xuICAgIH1cblxuICAgIERlZmF1bHRSZW5kZXJlci5kcmF3VW5tYXBwZWQodGllciwgY2FudmFzLCBjYW52YXNIZWlnaHQpO1xuXG59XG4iLCIvKiAtKi0gbW9kZTogamF2YXNjcmlwdDsgYy1iYXNpYy1vZmZzZXQ6IDQ7IGluZGVudC10YWJzLW1vZGU6IG5pbCAtKi0gKi9cblxuLy8gXG4vLyBEYWxsaWFuY2UgR2Vub21lIEV4cGxvcmVyXG4vLyAoYykgVGhvbWFzIERvd24gMjAwNi0yMDE0XG4vL1xuLy8gbWVtc3RvcmUuanNcbi8vXG5cbmZ1bmN0aW9uIGZvcm1hdExvbmdJbnQobikge1xuICAgIHJldHVybiAobnwwKS50b1N0cmluZygpLnJlcGxhY2UoL1xcQig/PShcXGR7M30pKyg/IVxcZCkpL2csICcsJylcbn1cblxuZnVuY3Rpb24gZm9ybWF0UXVhbnRMYWJlbCh2KSB7XG4gICAgdmFyIHQgPSAnJyArIHY7XG4gICAgdmFyIGRvdCA9IHQuaW5kZXhPZignLicpO1xuICAgIGlmIChkb3QgPCAwKSB7XG4gICAgICAgIHJldHVybiB0O1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBkb3RUaHJlc2hvbGQgPSAyO1xuICAgICAgICBpZiAodC5zdWJzdHJpbmcoMCwgMSkgPT0gJy0nKSB7XG4gICAgICAgICAgICArK2RvdFRocmVzaG9sZDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChkb3QgPj0gZG90VGhyZXNob2xkKSB7XG4gICAgICAgICAgICByZXR1cm4gdC5zdWJzdHJpbmcoMCwgZG90KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0LnN1YnN0cmluZygwLCBkb3QgKyAyKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuaWYgKHR5cGVvZihtb2R1bGUpICE9PSAndW5kZWZpbmVkJykge1xuICAgIG1vZHVsZS5leHBvcnRzID0ge1xuICAgICAgICBmb3JtYXRMb25nSW50OiBmb3JtYXRMb25nSW50LFxuICAgICAgICBmb3JtYXRRdWFudExhYmVsOiBmb3JtYXRRdWFudExhYmVsXG4gICAgfTtcbn0iLCIvKiAtKi0gbW9kZTogamF2YXNjcmlwdDsgYy1iYXNpYy1vZmZzZXQ6IDQ7IGluZGVudC10YWJzLW1vZGU6IG5pbCAtKi0gKi9cblxuLy8gXG4vLyBEYWxsaWFuY2UgR2Vub21lIEV4cGxvcmVyXG4vLyAoYykgVGhvbWFzIERvd24gMjAwNi0yMDEzXG4vL1xuLy8gb3ZlcmxheS5qczogZmVhdHVyZXNvdXJjZXMgY29tcG9zZWQgZnJvbSBtdWx0aXBsZSB1bmRlcmx5aW5nIHNvdXJjZXNcbi8vXG5cblwidXNlIHN0cmljdFwiO1xuXG5pZiAodHlwZW9mKHJlcXVpcmUpICE9PSAndW5kZWZpbmVkJykge1xuICAgIHZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcbiAgICB2YXIgc2hhbGxvd0NvcHkgPSB1dGlscy5zaGFsbG93Q29weTtcbiAgICB2YXIgYXJyYXlJbmRleE9mID0gdXRpbHMuYXJyYXlJbmRleE9mO1xufVxuXG5mdW5jdGlvbiBPdmVybGF5RmVhdHVyZVNvdXJjZShzb3VyY2VzLCBvcHRzKSB7XG4gICAgdGhpcy5zb3VyY2VzID0gc291cmNlcztcbiAgICB0aGlzLm9wdHMgPSBvcHRzIHx8IHt9O1xuICAgIHRoaXMuYWN0aXZpdHlMaXN0ZW5lcnMgPSBbXTtcbiAgICB0aGlzLnJlYWRpbmVzc0xpc3RlbmVycyA9IFtdO1xuICAgIHRoaXMuY2hhbmdlTGlzdGVuZXJzID0gW107XG4gICAgdGhpcy5idXNpbmVzcyA9IFtdO1xuICAgIHRoaXMucmVhZGluZXNzID0gW107XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuc291cmNlcy5sZW5ndGg7ICsraSkge1xuICAgICAgICB0aGlzLmluaXROKGkpO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2Yob3B0cy5tZXJnZSkgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdGhpcy5tZXJnZSA9IG9wdHMubWVyZ2U7XG4gICAgfSBlbHNlIGlmIChvcHRzLm1lcmdlID09ICdjb25jYXQnKSB7XG4gICAgICAgIHRoaXMubWVyZ2UgPSBPdmVybGF5RmVhdHVyZVNvdXJjZV9tZXJnZV9jb25jYXQ7XG4gICAgfSBlbHNlIGlmIChvcHRzLm1lcmdlID09ICdhbHRlcm5hdGVzJykge1xuICAgICAgICB0aGlzLm1lcmdlID0gT3ZlcmxheUZlYXR1cmVTb3VyY2VfbWVyZ2VfY29uY2F0O1xuICAgICAgICB0aGlzLmZpbHRlckRpc3BhdGNoT25NZXRob2QgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMubWVyZ2UgPSBPdmVybGF5RmVhdHVyZVNvdXJjZV9tZXJnZV9ieUtleTtcbiAgICB9XG59XG5cbk92ZXJsYXlGZWF0dXJlU291cmNlLnByb3RvdHlwZS5pbml0TiA9IGZ1bmN0aW9uKG4pIHtcbiAgICB2YXIgcyA9IHRoaXMuc291cmNlc1tuXTtcbiAgICB2YXIgdGhpc0IgPSB0aGlzO1xuICAgIHRoaXMuYnVzaW5lc3Nbbl0gPSAwO1xuXG4gICAgaWYgKHMuYWRkQWN0aXZpdHlMaXN0ZW5lcikge1xuICAgICAgICBzLmFkZEFjdGl2aXR5TGlzdGVuZXIoZnVuY3Rpb24oYikge1xuICAgICAgICAgICAgdGhpc0IuYnVzaW5lc3Nbbl0gPSBiO1xuICAgICAgICAgICAgdGhpc0Iubm90aWZ5QWN0aXZpdHkoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChzLmFkZENoYW5nZUxpc3RlbmVyKSB7XG4gICAgICAgIHMuYWRkQ2hhbmdlTGlzdGVuZXIoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0aGlzQi5ub3RpZnlDaGFuZ2UoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChzLmFkZFJlYWRpbmVzc0xpc3RlbmVyKSB7XG4gICAgICAgIHMuYWRkUmVhZGluZXNzTGlzdGVuZXIoZnVuY3Rpb24ocikge1xuICAgICAgICAgICAgdGhpc0IucmVhZGluZXNzW25dID0gcjtcbiAgICAgICAgICAgIHRoaXNCLm5vdGlmeVJlYWRpbmVzcygpO1xuICAgICAgICB9KTtcbiAgICB9XG59XG5cbk92ZXJsYXlGZWF0dXJlU291cmNlLnByb3RvdHlwZS5hZGRSZWFkaW5lc3NMaXN0ZW5lciA9IGZ1bmN0aW9uKGwpIHtcbiAgICB0aGlzLnJlYWRpbmVzc0xpc3RlbmVycy5wdXNoKGwpO1xuICAgIHRoaXMubm90aWZ5UmVhZGluZXNzTGlzdGVuZXIobCk7XG59XG5cbk92ZXJsYXlGZWF0dXJlU291cmNlLnByb3RvdHlwZS5yZW1vdmVSZWFkaW5lc3NMaXN0ZW5lciA9IGZ1bmN0aW9uKGwpIHtcbiAgICB2YXIgaWR4ID0gYXJyYXlJbmRleE9mKHRoaXMucmVhZGluZXNzTGlzdGVuZXJzLCBsKTtcbiAgICBpZiAoaWR4ID49IDApIHtcbiAgICAgICAgdGhpcy5yZWFkaW5lc3NMaXN0ZW5lcnMuc3BsaWNlKGlkeCwgMSk7XG4gICAgfVxufVxuXG5PdmVybGF5RmVhdHVyZVNvdXJjZS5wcm90b3R5cGUubm90aWZ5UmVhZGluZXNzID0gZnVuY3Rpb24oKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnJlYWRpbmVzc0xpc3RlbmVycy5sZW5ndGg7ICsraSkge1xuICAgICAgICB0aGlzLm5vdGlmeVJlYWRpbmVzc0xpc3RlbmVyKHRoaXMucmVhZGluZXNzTGlzdGVuZXJzW2ldKTtcbiAgICB9XG59XG5cbk92ZXJsYXlGZWF0dXJlU291cmNlLnByb3RvdHlwZS5ub3RpZnlSZWFkaW5lc3NMaXN0ZW5lciA9IGZ1bmN0aW9uKGwpIHtcbiAgICB2YXIgciA9IG51bGw7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnJlYWRpbmVzcy5sZW5ndGg7ICsraSkge1xuICAgICAgICBpZiAodGhpcy5yZWFkaW5lc3NbaV0gIT0gbnVsbCkge1xuICAgICAgICAgICAgciA9IHRoaXMucmVhZGluZXNzW2ldOyBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICB0cnkge1xuICAgICAgICBsKHIpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS5sb2coZSk7XG4gICAgfVxufVxuXG5PdmVybGF5RmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuYWRkQWN0aXZpdHlMaXN0ZW5lciA9IGZ1bmN0aW9uKGwpIHtcbiAgICB0aGlzLmFjdGl2aXR5TGlzdGVuZXJzLnB1c2gobCk7XG59XG5cbk92ZXJsYXlGZWF0dXJlU291cmNlLnByb3RvdHlwZS5yZW1vdmVBY3Rpdml0eUxpc3RlbmVyID0gZnVuY3Rpb24obCkge1xuICAgIHZhciBpZHggPSBhcnJheUluZGV4T2YodGhpcy5hY3Rpdml0eUxpc3RlbmVycywgbCk7XG4gICAgaWYgKGlkeCA+PSAwKSB7XG4gICAgICAgIHRoaXMuYWN0aXZpdHlMaXN0ZW5lcnMuc3BsaWNlKGlkeCwgMSk7XG4gICAgfVxufVxuXG5PdmVybGF5RmVhdHVyZVNvdXJjZS5wcm90b3R5cGUubm90aWZ5QWN0aXZpdHkgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgYnVzeSA9IDA7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmJ1c2luZXNzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIGJ1c3kgKz0gdGhpcy5idXNpbmVzc1tpXTtcbiAgICB9XG5cbiAgICBmb3IgKHZhciBsaSA9IDA7IGxpIDwgdGhpcy5hY3Rpdml0eUxpc3RlbmVycy5sZW5ndGg7ICsrbGkpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMuYWN0aXZpdHlMaXN0ZW5lcnNbbGldKGJ1c3kpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuT3ZlcmxheUZlYXR1cmVTb3VyY2UucHJvdG90eXBlLmFkZENoYW5nZUxpc3RlbmVyID0gZnVuY3Rpb24obGlzdGVuZXIpIHtcbiAgICB0aGlzLmNoYW5nZUxpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcbn1cblxuT3ZlcmxheUZlYXR1cmVTb3VyY2UucHJvdG90eXBlLnJlbW92ZUNoYW5nZUxpc3RlbmVyID0gZnVuY3Rpb24obCkge1xuICAgIHZhciBpZHggPSBhcnJheUluZGV4T2YodGhpcy5jaGFuZ2VMaXN0ZW5lcnMsIGwpO1xuICAgIGlmIChpZHggPj0gMCkge1xuICAgICAgICB0aGlzLmNoYW5nZUxpc3RlbmVycy5zcGxpY2UoaWR4LCAxKTtcbiAgICB9XG59XG5cbk92ZXJsYXlGZWF0dXJlU291cmNlLnByb3RvdHlwZS5ub3RpZnlDaGFuZ2UgPSBmdW5jdGlvbigpIHtcbiAgICBmb3IgKHZhciBsaSA9IDA7IGxpIDwgdGhpcy5jaGFuZ2VMaXN0ZW5lcnMubGVuZ3RoOyArK2xpKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLmNoYW5nZUxpc3RlbmVyc1tsaV0odGhpcy5idXN5KTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbk92ZXJsYXlGZWF0dXJlU291cmNlLnByb3RvdHlwZS5nZXRTY2FsZXMgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5zb3VyY2VzWzBdLmdldFNjYWxlcygpO1xufVxuXG5PdmVybGF5RmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuZ2V0U3R5bGVTaGVldCA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIHRoaXMuc291cmNlc1swXS5nZXRTdHlsZVNoZWV0KGNhbGxiYWNrKTtcbn1cblxuT3ZlcmxheUZlYXR1cmVTb3VyY2UucHJvdG90eXBlLmNhcGFiaWxpdGllcyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBjYXBzID0ge307XG4gICAgdmFyIHMwID0gdGhpcy5zb3VyY2VzWzBdO1xuICAgIGlmIChzMC5jYXBhYmlsaXRpZXMpIFxuICAgICAgICBjYXBzID0gc2hhbGxvd0NvcHkoczAuY2FwYWJpbGl0aWVzKCkpO1xuXG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCB0aGlzLnNvdXJjZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdmFyIHNpID0gdGhpcy5zb3VyY2VzW2ldO1xuICAgICAgICBpZiAoc2kuY2FwYWJpbGl0aWVzKSB7XG4gICAgICAgICAgICB2YXIgY28gPSBzaS5jYXBhYmlsaXRpZXMoKTtcbiAgICAgICAgICAgIGlmIChjby5zZWFyY2gpIHtcbiAgICAgICAgICAgICAgICBjYXBzLnNlYXJjaCA9IGNvLnNlYXJjaDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBjYXBzO1xufVxuXG5PdmVybGF5RmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuc2VhcmNoID0gZnVuY3Rpb24ocXVlcnksIGNhbGxiYWNrKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnNvdXJjZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgaWYgKF9zb3VyY2VBZGFwdGVySXNDYXBhYmxlKHRoaXMuc291cmNlc1tpXSwgJ3NlYXJjaCcpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zb3VyY2VzW2ldLnNlYXJjaChxdWVyeSwgY2FsbGJhY2spO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5PdmVybGF5RmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuZmV0Y2ggPSBmdW5jdGlvbihjaHIsIG1pbiwgbWF4LCBzY2FsZSwgdHlwZXMsIHBvb2wsIGNhbGxiYWNrLCBzdHlsZUZpbHRlcnMpIHtcbiAgICB2YXIgc291cmNlcztcbiAgICBpZiAodGhpcy5maWx0ZXJEaXNwYXRjaE9uTWV0aG9kKSB7XG4gICAgICAgIHNvdXJjZXMgPSBbXTtcbiAgICAgICAgdmFyIHNmbCA9IHN0eWxlRmlsdGVycy5saXN0KCk7XG4gICAgICAgIGZvciAodmFyIHNpID0gMDsgc2kgPCB0aGlzLnNvdXJjZXMubGVuZ3RoOyArK3NpKSB7XG4gICAgICAgICAgICB2YXIgc291cmNlID0gdGhpcy5zb3VyY2VzW3NpXTtcbiAgICAgICAgICAgIGZvciAodmFyIGZpID0gMDsgZmkgPCBzZmwubGVuZ3RoOyArK2ZpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGZpbHRlciA9IHNmbFtmaV07XG4gICAgICAgICAgICAgICAgaWYgKCFmaWx0ZXIubWV0aG9kIHx8IGZpbHRlci5tZXRob2QgPT0gc291cmNlLm5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgc291cmNlcy5wdXNoKHNvdXJjZSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIHNvdXJjZXMgPSB0aGlzLnNvdXJjZXM7XG4gICAgfVxuXG4gICAgdmFyIGJhdG9uID0gbmV3IE92ZXJsYXlCYXRvbih0aGlzLCBjYWxsYmFjaywgc291cmNlcyk7XG4gICAgZm9yICh2YXIgc2kgPSAwOyBzaSA8IHNvdXJjZXMubGVuZ3RoOyArK3NpKSB7XG5cdCAgIHRoaXMuZmV0Y2hOKGJhdG9uLCBzaSwgc291cmNlc1tzaV0sIGNociwgbWluLCBtYXgsIHNjYWxlLCB0eXBlcywgcG9vbCwgc3R5bGVGaWx0ZXJzKTtcbiAgICB9XG59XG5cbk92ZXJsYXlGZWF0dXJlU291cmNlLnByb3RvdHlwZS5mZXRjaE4gPSBmdW5jdGlvbihiYXRvbiwgc2ksIHNvdXJjZSwgY2hyLCBtaW4sIG1heCwgc2NhbGUsIHR5cGVzLCBwb29sLCBzdHlsZUZpbHRlcnMpIHtcbiAgICAvLyBGSVhNRSBzaG91bGQgd2UgdHJ5IHRvIHBydW5lIHN0eWxlRmlsdGVycz9cbiAgICBzb3VyY2UuZmV0Y2goY2hyLCBtaW4sIG1heCwgc2NhbGUsIHR5cGVzLCBwb29sLCBmdW5jdGlvbihzdGF0dXMsIGZlYXR1cmVzLCBzY2FsZSkge1xuXHQgICByZXR1cm4gYmF0b24uY29tcGxldGVkKHNpLCBzdGF0dXMsIGZlYXR1cmVzLCBzY2FsZSk7XG4gICAgfSwgc3R5bGVGaWx0ZXJzKTtcbn1cblxuT3ZlcmxheUZlYXR1cmVTb3VyY2UucHJvdG90eXBlLnF1YW50RmluZE5leHRGZWF0dXJlID0gZnVuY3Rpb24oY2hyLCBwb3MsIGRpciwgdGhyZXNob2xkLCBjYWxsYmFjaykge1xuICAgIHJldHVybiB0aGlzLnNvdXJjZXNbMF0ucXVhbnRGaW5kTmV4dEZlYXR1cmUoY2hyLCBwb3MsIGRpciwgdGhyZXNob2xkLCBjYWxsYmFjayk7XG59XG5cbk92ZXJsYXlGZWF0dXJlU291cmNlLnByb3RvdHlwZS5maW5kTmV4dEZlYXR1cmUgPSBmdW5jdGlvbihjaHIsIHBvcywgZGlyLCBjYWxsYmFjaykge1xuICAgIHJldHVybiB0aGlzLnNvdXJjZXNbMF0uZmluZE5leHRGZWF0dXJlKGNociwgcG9zLCBkaXIsIGNhbGxiYWNrKTtcbn1cblxuZnVuY3Rpb24gT3ZlcmxheUJhdG9uKHNvdXJjZSwgY2FsbGJhY2ssIHNvdXJjZXMpIHtcbiAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICB0aGlzLmNhbGxiYWNrID0gY2FsbGJhY2s7XG4gICAgdGhpcy5zb3VyY2VzID0gc291cmNlcztcbiAgICB0aGlzLmNvdW50ID0gc291cmNlcy5sZW5ndGg7XG5cbiAgICB0aGlzLnJldHVybkNvdW50ID0gMDtcbiAgICB0aGlzLnN0YXR1c0NvdW50ID0gMDtcbiAgICB0aGlzLnJldHVybnMgPSBbXTtcbiAgICB0aGlzLmZlYXR1cmVzID0gW11cbiAgICB0aGlzLnN0YXR1c2VzID0gW107XG4gICAgdGhpcy5zY2FsZSA9IG51bGw7XG59XG5cbk92ZXJsYXlCYXRvbi5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24oaW5kZXgsIHN0YXR1cywgZmVhdHVyZXMsIHNjYWxlKSB7XG4gICAgaWYgKHRoaXMuc2NhbGUgPT0gbnVsbCB8fCBpbmRleCA9PSAwKSBcblx0ICAgdGhpcy5zY2FsZSA9IHNjYWxlO1xuXG4gICAgaWYgKHRoaXMucmV0dXJuc1tpbmRleF0pXG5cdCAgIHRocm93ICdNdWx0aXBsZSByZXR1cm5zIGZvciBzb3VyY2UgJyArIGluZGV4O1xuXG4gICAgdGhpcy5yZXR1cm5zW2luZGV4XSA9IHRydWU7XG4gICAgdGhpcy5yZXR1cm5Db3VudCsrO1xuXG4gICAgdGhpcy5mZWF0dXJlc1tpbmRleF0gPSBmZWF0dXJlcztcblxuICAgIGlmIChzdGF0dXMpIHtcbiAgICBcdHRoaXMuc3RhdHVzZXNbaW5kZXhdID0gc3RhdHVzO1xuICAgIFx0dGhpcy5zdGF0dXNDb3VudCsrO1xuICAgIH1cblxuXG4gICAgaWYgKHRoaXMucmV0dXJuQ291bnQgPT0gdGhpcy5jb3VudCkge1xuICAgIFx0aWYgKHRoaXMuc3RhdHVzQ291bnQgPiAwKSB7XG4gICAgXHQgICAgdmFyIG1lc3NhZ2UgPSAnJztcbiAgICBcdCAgICBmb3IgKHZhciBzaSA9IDA7IHNpIDwgdGhpcy5jb3VudDsgKytzaSkge1xuICAgICAgICBcdFx0dmFyIHMgPSB0aGlzLnN0YXR1c2VzW3NpXTtcbiAgICAgICAgXHRcdGlmIChzKSB7XG4gICAgICAgIFx0XHQgICAgaWYgKG1lc3NhZ2UubGVuZ3RoID4gMCkgXG4gICAgICAgIFx0XHRcdG1lc3NhZ2UgKz0gJywgJztcbiAgICAgICAgXHRcdCAgICBtZXNzYWdlICs9IHM7XG4gICAgICAgIFx0XHR9XG4gICAgXHQgICAgfVxuICAgIFx0ICAgIHJldHVybiB0aGlzLmNhbGxiYWNrKG1lc3NhZ2UsIG51bGwsIHRoaXMuc2NhbGUpO1xuICAgIFx0fSBlbHNlIHtcbiAgICBcdCAgICB0aGlzLmNhbGxiYWNrKG51bGwsIHRoaXMuc291cmNlLm1lcmdlKHRoaXMuZmVhdHVyZXMsIHRoaXMuc291cmNlcyksIHRoaXMuc2NhbGUpO1xuICAgIFx0fVxuICAgIH1cbn1cblxuT3ZlcmxheUZlYXR1cmVTb3VyY2UucHJvdG90eXBlLmdldERlZmF1bHRGSVBzID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICBmb3IgKHZhciBzaSA9IDA7IHNpIDwgdGhpcy5zb3VyY2VzLmxlbmd0aDsgKytzaSkge1xuICAgICAgICB2YXIgcyA9IHRoaXMuc291cmNlc1tzaV07XG4gICAgICAgIGlmIChzLmdldERlZmF1bHRGSVBzKVxuICAgICAgICAgICAgcy5nZXREZWZhdWx0RklQcyhjYWxsYmFjayk7XG4gICAgfVxufVxuXG5PdmVybGF5RmVhdHVyZVNvdXJjZS5wcm90b3R5cGUua2V5Rm9yRmVhdHVyZSA9IGZ1bmN0aW9uKGZlYXR1cmUpIHtcbiAgICByZXR1cm4gJycgKyBmZWF0dXJlLm1pbiArICcuLicgKyBmZWF0dXJlLm1heDtcbn1cblxuZnVuY3Rpb24gT3ZlcmxheUZlYXR1cmVTb3VyY2VfbWVyZ2VfYnlLZXkoZmVhdHVyZVNldHMpIHtcbiAgICB2YXIgb21hcHMgPSBbXTtcblxuICAgIGZvciAodmFyIGZzaSA9IDE7IGZzaSA8IGZlYXR1cmVTZXRzLmxlbmd0aDsgKytmc2kpIHtcbiAgICAgICAgdmFyIG9tID0ge307XG4gICAgICAgIHZhciBvZiA9IGZlYXR1cmVTZXRzW2ZzaV07XG4gICAgICAgIGZvciAodmFyIGZpID0gMDsgZmkgPCBvZi5sZW5ndGg7ICsrZmkpIHtcbiAgICBcdCAgIG9tW3RoaXMua2V5Rm9yRmVhdHVyZShvZltmaV0pXSA9IG9mW2ZpXTtcbiAgICAgICAgfVxuICAgICAgICBvbWFwcy5wdXNoKG9tKTtcbiAgICB9XG5cblxuICAgIHZhciBtZiA9IFtdO1xuICAgIHZhciBmbCA9IGZlYXR1cmVTZXRzWzBdO1xuICAgIGZvciAodmFyIGZpID0gMDsgZmkgPCBmbC5sZW5ndGg7ICsrZmkpIHtcbiAgICBcdHZhciBmID0gZmxbZmldO1xuXG4gICAgICAgIGZvciAodmFyIG9pID0gMDsgb2kgPCBvbWFwcy5sZW5ndGg7ICsrb2kpIHtcbiAgICAgICAgICAgIHZhciBvbSA9IG9tYXBzW29pXTtcbiAgICAgICAgXHRvZiA9IG9tW3RoaXMua2V5Rm9yRmVhdHVyZShmKV1cbiAgICAgICAgXHRpZiAob2YpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBrIGluIG9mKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChrID09PSAnc2NvcmUnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmLnNjb3JlMiA9IG9mLnNjb3JlO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGsgPT09ICdtaW4nIHx8IGsgPT09ICdtYXgnIHx8IGsgPT09ICdzZWdtZW50JyB8fCBrID09PSAnX2NhY2hlZFN0eWxlJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZG8gbm90aGluZ1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZltrXSA9IG9mW2tdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICBcdH1cbiAgICAgICAgfVxuICAgIFx0bWYucHVzaChmKTtcbiAgICB9XG4gICAgcmV0dXJuIG1mO1xufVxuXG5mdW5jdGlvbiBPdmVybGF5RmVhdHVyZVNvdXJjZV9tZXJnZV9jb25jYXQoZmVhdHVyZVNldHMsIHNvdXJjZXMpIHtcbiAgICB2YXIgZmVhdHVyZXMgPSBbXTtcbiAgICBmb3IgKHZhciBmc2kgPSAwOyBmc2kgPCBmZWF0dXJlU2V0cy5sZW5ndGg7ICsrZnNpKSB7XG4gICAgICAgIHZhciBmcyA9IGZlYXR1cmVTZXRzW2ZzaV07XG4gICAgICAgIHZhciBuYW1lID0gc291cmNlc1tmc2ldLm5hbWU7XG4gICAgICAgIGZvciAodmFyIGZpID0gMDsgZmkgPCBmcy5sZW5ndGg7ICsrZmkpIHtcbiAgICAgICAgICAgIHZhciBmID0gZnNbZmldO1xuICAgICAgICAgICAgZi5tZXRob2QgPSBuYW1lO1xuICAgICAgICAgICAgZmVhdHVyZXMucHVzaChmKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmVhdHVyZXM7XG59XG5cbmZ1bmN0aW9uIF9zb3VyY2VBZGFwdGVySXNDYXBhYmxlKHMsIGNhcCkge1xuICAgIGlmICghcy5jYXBhYmlsaXRpZXMpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBlbHNlIFxuICAgICAgICByZXR1cm4gcy5jYXBhYmlsaXRpZXMoKVtjYXBdO1xufVxuXG5pZiAodHlwZW9mKG1vZHVsZSkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgICAgIE92ZXJsYXlGZWF0dXJlU291cmNlOiBPdmVybGF5RmVhdHVyZVNvdXJjZVxuICAgIH07XG59XG5cblxuIiwiLyogLSotIG1vZGU6IGphdmFzY3JpcHQ7IGMtYmFzaWMtb2Zmc2V0OiA0OyBpbmRlbnQtdGFicy1tb2RlOiBuaWwgLSotICovXG5cbi8vIFxuLy8gRGFsbGlhbmNlIEdlbm9tZSBFeHBsb3JlclxuLy8gKGMpIFRob21hcyBEb3duIDIwMDYtMjAxNFxuLy9cbi8vIGJlZHdpZy5qc1xuLy9cblxuXCJ1c2Ugc3RyaWN0XCI7XG5cbmlmICh0eXBlb2YocmVxdWlyZSkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgdmFyIGJpbiA9IHJlcXVpcmUoJy4vYmluJyk7XG4gICAgdmFyIFVSTEZldGNoYWJsZSA9IGJpbi5VUkxGZXRjaGFibGU7XG4gICAgdmFyIEJsb2JGZXRjaGFibGUgPSBiaW4uQmxvYkZldGNoYWJsZTtcbiAgICB2YXIgcmVhZEludCA9IGJpbi5yZWFkSW50O1xuXG4gICAgdmFyIGJiaSA9IHJlcXVpcmUoJy4vYmlnd2lnJyk7XG4gICAgdmFyIEJJR19XSUdfTUFHSUMgPSBiYmkuQklHX1dJR19NQUdJQztcbiAgICB2YXIgQklHX0JFRF9NQUdJQyA9IGJiaS5CSUdfQkVEX01BR0lDO1xuXG4gICAgdmFyIGxoM3V0aWxzID0gcmVxdWlyZSgnLi9saDN1dGlscycpO1xuICAgIHZhciB1bmJnemYgPSBsaDN1dGlscy51bmJnemY7XG5cbiAgICB2YXIgYmFtID0gcmVxdWlyZSgnLi9iYW0nKTtcbiAgICB2YXIgQkFNX01BR0lDID0gYmFtLkJBTV9NQUdJQztcbiAgICB2YXIgQkFJX01BR0lDID0gYmFtLkJBSV9NQUdJQztcblxuICAgIHZhciB0YmkgPSByZXF1aXJlKCcuL3RhYml4Jyk7XG4gICAgdmFyIFRBQklYX01BR0lDID0gdGJpLlRBQklYX01BR0lDO1xuXG4gICAgdmFyIEVuY29kZUZldGNoYWJsZSA9IHJlcXVpcmUoJy4vZW5jb2RlJykuRW5jb2RlRmV0Y2hhYmxlO1xufVxuXG5mdW5jdGlvbiBwcm9iZVJlc291cmNlKHNvdXJjZSwgbGlzdGVuZXIsIHJldHJ5KSB7XG4gICAgdmFyIEJFRF9SRUdFWFAgPSBuZXcgUmVnRXhwKCdeXFxcXHcrXFxcXHNbMC05XStcXFxcc1swLTldKy4qJCcpO1xuICAgIHZhciBLVl9SRUdFWFA9LyhbXj1dKyk9XFxcIj8oW15cXFwiXSspXFxcIj8vO1xuICAgIHZhciBWQ0ZIRUFEX1JFID0gL14jI1xccypmaWxlZm9ybWF0PVZDRnY0XFwuLisvO1xuXG4gICAgdmFyIGZldGNoYWJsZTtcbiAgICBpZiAoc291cmNlLmJsb2IpXG4gICAgICAgIGZldGNoYWJsZSA9IG5ldyBCbG9iRmV0Y2hhYmxlKHNvdXJjZS5ibG9iKTtcbiAgICBlbHNlIGlmIChzb3VyY2UudHJhbnNwb3J0ID09ICdlbmNvZGUnKVxuICAgICAgICBmZXRjaGFibGUgPSBuZXcgRW5jb2RlRmV0Y2hhYmxlKHNvdXJjZS51cmkpO1xuICAgIGVsc2VcbiAgICAgICAgZmV0Y2hhYmxlID0gbmV3IFVSTEZldGNoYWJsZShzb3VyY2UudXJpLCB7Y3JlZGVudGlhbHM6IHNvdXJjZS5jcmVkZW50aWFsc30pO1xuXG4gICAgZmV0Y2hhYmxlLnNsaWNlKDAsIDE8PDE2KS5zYWx0ZWQoKS5mZXRjaChmdW5jdGlvbihyZXN1bHQsIGVycm9yKSB7XG4gICAgICAgIGlmICghcmVzdWx0KSB7XG4gICAgICAgICAgICBpZiAoIXJldHJ5KSB7XG4gICAgICAgICAgICAgICAgc291cmNlLmNyZWRlbnRpYWxzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBwcm9iZVJlc291cmNlKHNvdXJjZSwgbGlzdGVuZXIsIHRydWUpXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBsaXN0ZW5lcihzb3VyY2UsIFwiQ291bGRuJ3QgZmV0Y2ggZGF0YVwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBiYSA9IG5ldyBVaW50OEFycmF5KHJlc3VsdCk7XG4gICAgICAgIHZhciBsYSA9IG5ldyBVaW50MzJBcnJheShyZXN1bHQsIDAsIDEpO1xuICAgICAgICB2YXIgbWFnaWMgPSBsYVswXTtcbiAgICAgICAgaWYgKG1hZ2ljID09IEJJR19XSUdfTUFHSUMgfHwgbWFnaWMgPT0gQklHX0JFRF9NQUdJQykge1xuICAgICAgICAgICAgc291cmNlLnRpZXJfdHlwZSA9ICdid2cnO1xuICAgICAgICAgICAgdmFyIG5hbWVFeHRyYWN0UGF0dGVybiA9IG5ldyBSZWdFeHAoJy8/KFteL10rPykoLmJ3fC5iYnwuYmlnV2lnfC5iaWdCZWQpPyQnKTtcbiAgICAgICAgICAgIHZhciBtYXRjaCA9IG5hbWVFeHRyYWN0UGF0dGVybi5leGVjKHNvdXJjZS51cmkgfHwgc291cmNlLmJsb2IubmFtZSk7XG4gICAgICAgICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgICAgICAgICBzb3VyY2UubmFtZSA9IG1hdGNoWzFdO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gbGlzdGVuZXIoc291cmNlLCBudWxsKTtcbiAgICAgICAgfSBlbHNlIGlmIChtYWdpYyA9PSBCQUlfTUFHSUMpIHtcbiAgICAgICAgICAgIHNvdXJjZS50aWVyX3R5cGUgPSAnYmFpJztcbiAgICAgICAgICAgIHJldHVybiBsaXN0ZW5lcihzb3VyY2UsIG51bGwpO1xuICAgICAgICB9IGVsc2UgaWYgKGJhWzBdID09IDMxIHx8IGJhWzFdID09IDEzOSkge1xuICAgICAgICAgICAgdmFyIHVuYyA9IHVuYmd6ZihyZXN1bHQpO1xuICAgICAgICAgICAgdmFyIHVuY2JhID0gbmV3IFVpbnQ4QXJyYXkodW5jKTtcbiAgICAgICAgICAgIG1hZ2ljID0gcmVhZEludCh1bmNiYSwgMCk7XG4gICAgICAgICAgICBpZiAobWFnaWMgPT0gQkFNX01BR0lDKSB7XG4gICAgICAgICAgICAgICAgc291cmNlLnRpZXJfdHlwZSA9ICdiYW0nO1xuICAgICAgICAgICAgICAgIHZhciBuYW1lRXh0cmFjdFBhdHRlcm4gPSBuZXcgUmVnRXhwKCcvPyhbXi9dKz8pKC5iYW0pPyQnKTtcbiAgICAgICAgICAgICAgICB2YXIgbWF0Y2ggPSBuYW1lRXh0cmFjdFBhdHRlcm4uZXhlYyhzb3VyY2UudXJpIHx8IHNvdXJjZS5ibG9iLm5hbWUpO1xuICAgICAgICAgICAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICAgICAgICAgICAgICBzb3VyY2UubmFtZSA9IG1hdGNoWzFdO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiBsaXN0ZW5lcihzb3VyY2UsIG51bGwpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChtYWdpYyA9PSBUQUJJWF9NQUdJQykge1xuICAgICAgICAgICAgICAgIHNvdXJjZS50aWVyX3R5cGUgPSAndGFiaXgtaW5kZXgnO1xuICAgICAgICAgICAgICAgIHJldHVybiBsaXN0ZW5lcihzb3VyY2UsIG51bGwpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChtYWdpYyA9PSAweDY5NjYyMzIzKSB7XG4gICAgICAgICAgICAgICAgc291cmNlLnRpZXJfdHlwZSA9ICd0YWJpeCc7XG4gICAgICAgICAgICAgICAgc291cmNlLnBheWxvYWQgPSAndmNmJztcbiAgICAgICAgICAgICAgICB2YXIgbmFtZUV4dHJhY3RQYXR0ZXJuID0gbmV3IFJlZ0V4cCgnLz8oW14vXSs/KSgudmNmKT8oLmd6KT8kJyk7XG4gICAgICAgICAgICAgICAgdmFyIG1hdGNoID0gbmFtZUV4dHJhY3RQYXR0ZXJuLmV4ZWMoc291cmNlLnVyaSB8fCBzb3VyY2UuYmxvYi5uYW1lKTtcbiAgICAgICAgICAgICAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgICAgICAgICAgICAgc291cmNlLm5hbWUgPSBtYXRjaFsxXTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gbGlzdGVuZXIoc291cmNlLCBudWxsKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ21hZ2ljID0gJyArIG1hZ2ljLnRvU3RyaW5nKDE2KSk7XG4gICAgICAgICAgICAgICByZXR1cm4gbGlzdGVuZXIoc291cmNlLCBcIlVuc3VwcG9ydGVkIGZvcm1hdFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciB0ZXh0ID0gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLCBiYSk7XG4gICAgICAgICAgICB2YXIgbGluZXMgPSB0ZXh0LnNwbGl0KFwiXFxuXCIpO1xuXG4gICAgICAgICAgICBpZiAobGluZXMubGVuZ3RoID4gMCAmJiBWQ0ZIRUFEX1JFLnRlc3QobGluZXNbMF0pKSB7XG4gICAgICAgICAgICAgICAgc291cmNlLnRpZXJfdHlwZSA9ICdtZW1zdG9yZSc7XG4gICAgICAgICAgICAgICAgc291cmNlLnBheWxvYWQgPSAndmNmJztcbiAgICAgICAgICAgICAgICB2YXIgbmFtZUV4dHJhY3RQYXR0ZXJuID0gbmV3IFJlZ0V4cCgnLz8oW14vXSs/KShcXC52Y2YpPyQnKTtcbiAgICAgICAgICAgICAgICB2YXIgbWF0Y2ggPSBuYW1lRXh0cmFjdFBhdHRlcm4uZXhlYyhzb3VyY2UudXJpIHx8IHNvdXJjZS5ibG9iLm5hbWUpO1xuICAgICAgICAgICAgICAgIGlmIChtYXRjaCAmJiAhc291cmNlLm5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgc291cmNlLm5hbWUgPSBtYXRjaFsxXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGxpc3RlbmVyKHNvdXJjZSwgbnVsbCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZvciAodmFyIGxpID0gMDsgbGkgPCBsaW5lcy5sZW5ndGg7ICsrbGkpIHtcbiAgICAgICAgICAgICAgICB2YXIgbGluZSA9IGxpbmVzW2xpXS5yZXBsYWNlKCdcXHInLCAnJyk7XG4gICAgICAgICAgICAgICAgaWYgKGxpbmUubGVuZ3RoID09IDApIGNvbnRpbnVlO1xuXG4gICAgICAgICAgICAgICAgaWYgKGxpbmUuaW5kZXhPZignYnJvd3NlcicpID09IDApIGNvbnRpbnVlO1xuXG4gICAgICAgICAgICAgICAgaWYgKGxpbmUuaW5kZXhPZigndHJhY2snKSA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtYXliZVR5cGUgPSAnYmVkJztcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRva3MgPSBsaW5lLnNwbGl0KC9cXHMvKTtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgdGkgPSAxOyB0aSA8IHRva3MubGVuZ3RoOyArK3RpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbSA9IEtWX1JFR0VYUC5leGVjKHRva3NbdGldKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1bMV0gPT0gJ3R5cGUnICYmIG1bMl0gPT0gJ3dpZ2dsZV8wJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXliZVR5cGUgPSAnd2lnJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobVswXSA9PSAnbmFtZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlLm5hbWUgPSBtWzJdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGZpbmlzaFByb2JlQmVkV2lnKHNvdXJjZSwgbWF5YmVUeXBlKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxpc3RlbmVyKHNvdXJjZSwgbnVsbCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGxpbmUuaW5kZXhPZignZml4ZWRTdGVwJykgPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBmaW5pc2hQcm9iZUJlZFdpZyhzb3VyY2UsICd3aWcnKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxpc3RlbmVyKHNvdXJjZSwgbnVsbCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGxpbmUuaW5kZXhPZigndmFyaWFibGVTdGVwJykgPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBmaW5pc2hQcm9iZUJlZFdpZyhzb3VyY2UsICd3aWcnKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxpc3RlbmVyKHNvdXJjZSwgbnVsbCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKEJFRF9SRUdFWFAudGVzdChsaW5lKSkge1xuICAgICAgICAgICAgICAgICAgICBmaW5pc2hQcm9iZUJlZFdpZyhzb3VyY2UsIG51bGwpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbGlzdGVuZXIoc291cmNlLCBudWxsKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGxpc3RlbmVyKHNvdXJjZSwgXCJVbnN1cHBvcnRlZCBmb3JtYXRcIik7XG4gICAgICAgIH1cbiAgICB9LCB7dGltZW91dDogMTUwMH0pOyAgLy8gVGltZW91dCB0byBjYXRjaCBtaXhlZC1vcmlnaW4gY2FzZSBvbiBDaHJvbWl1bS5cbn1cblxuZnVuY3Rpb24gZmluaXNoUHJvYmVCZWRXaWcoc291cmNlLCBtYXliZVR5cGUpIHtcbiAgICBzb3VyY2UudGllcl90eXBlID0gJ21lbXN0b3JlJztcbiAgICB2YXIgbmFtZUV4dHJhY3RQYXR0ZXJuID0gbmV3IFJlZ0V4cCgnLz8oW14vXSs/KSguKGJlZHx3aWcpKT8kJyk7XG4gICAgdmFyIG1hdGNoID0gbmFtZUV4dHJhY3RQYXR0ZXJuLmV4ZWMoc291cmNlLnVyaSB8fCBzb3VyY2UuYmxvYi5uYW1lKTtcbiAgICBpZiAobWF0Y2gpIHtcbiAgICAgICAgaWYgKCFzb3VyY2UubmFtZSlcbiAgICAgICAgICAgIHNvdXJjZS5uYW1lID0gbWF0Y2hbMV07XG4gICAgICAgIGlmICghbWF5YmVUeXBlICYmIG1hdGNoWzNdKSB7XG4gICAgICAgICAgICBtYXliZVR5cGUgPSBtYXRjaFszXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzb3VyY2UucGF5bG9hZCA9IG1heWJlVHlwZSB8fCAnYmVkJztcbn1cblxuaWYgKHR5cGVvZihtb2R1bGUpICE9PSAndW5kZWZpbmVkJykge1xuICAgIG1vZHVsZS5leHBvcnRzID0ge1xuICAgICAgICBwcm9iZVJlc291cmNlOiBwcm9iZVJlc291cmNlXG4gICAgfTtcbn1cbiIsIi8qIGpzaGludCBlc3ZlcnNpb246IDYgKi9cblxuXCJ1c2Ugc3RyaWN0XCI7XG5cbmV4cG9ydCB7IFJ1bGVyLCBydWxlckRyYXdDYWxsYmFjayB9O1xuXG5cbmZ1bmN0aW9uIFJ1bGVyKG9wdGlvbnMpIHtcbiAgICBsZXQgc2VsZiA9IHRoaXM7XG5cbiAgICBzZWxmLnZhbHVlID0gb3B0aW9ucy52YWx1ZTtcbiAgICBzZWxmLm1pbiA9IG9wdGlvbnMubWluO1xuICAgIHNlbGYubWF4ID0gb3B0aW9ucy5tYXg7XG4gICAgc2VsZi53aWR0aCA9IG9wdGlvbnMud2lkdGg7XG4gICAgc2VsZi5jb2xvciA9IG9wdGlvbnMuY29sb3I7XG5cbiAgICBPYmplY3Qua2V5cyhzZWxmKS5tYXAoa2V5ID0+IHtcbiAgICAgICAgaWYgKHNlbGZba2V5XSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIldBUk5JTkc6IFJ1bGVyIG9wdGlvbiBcIiArIGtleSArIFwiIG5vdCBzZXRcIik7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuUnVsZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gUnVsZXI7XG5cbmZ1bmN0aW9uIHJ1bGVyRHJhd0NhbGxiYWNrKGNhbnZhcywgdGllcikge1xuICAgIGxldCBydWxlcnMgPSB0aWVyLmRhc1NvdXJjZS5ydWxlcnM7XG5cbiAgICBpZiAoIXJ1bGVycykge1xuICAgICAgICBjb25zb2xlLmxvZyhcIlRpZXIgdXNlcyBydWxlciBjYWxsYmFjayBidXQgaGFzIG5vIHJ1bGVycyFcIik7XG4gICAgfSBlbHNlIGlmICghKHJ1bGVycyBpbnN0YW5jZW9mIEFycmF5KSkge1xuICAgICAgICBjb25zb2xlLmxvZyhcInJ1bGVycy5qczogJ3J1bGVycycgc2hvdWxkIGJlIGFuIEFycmF5XCIpO1xuICAgIH1cblxuXG4gICAgcnVsZXJzLm1hcChyID0+IHtcbiAgICAgICAgbGV0IHJ1bGVyWSA9ICgoci5tYXggLSByLnZhbHVlKSAqIHIuaGVpZ2h0KTtcbiAgICAgICAgbGV0IHZpZXdXaWR0aCA9IHRpZXIudmlld3BvcnQud2lkdGg7XG4gICAgICAgIGxldCBvbGRMaW5lV2lkdGggPSBjYW52YXMubGluZVdpZHRoO1xuXG4gICAgICAgIGNhbnZhcy5zdHJva2VTdHlsZSA9IHIuY29sb3I7XG4gICAgICAgIGNhbnZhcy5iZWdpblBhdGgoKTtcbiAgICAgICAgY2FudmFzLm1vdmVUbygtdmlld1dpZHRoLCBydWxlclkgKyByLm9mZnNldCk7XG4gICAgICAgIC8vIE90aGVyIHBhcnRzIG9mIHRoZSBjb2RlIHJlbHkgb24gbm90IGhhdmluZyBjaGFuZ2VkIHRoZSBsaW5lV2lkdGguLi5cbiAgICAgICAgLy8gU28gd2UgbmVlZCB0byBjaGFuZ2UgaXQgYmFjayB3aGVuIHdlJ3JlIGRvbmUuXG4gICAgICAgIGNhbnZhcy5saW5lV2lkdGggPSByLndpZHRoO1xuICAgICAgICBjYW52YXMubGluZVRvKDIqdmlld1dpZHRoLCBydWxlclkgKyByLm9mZnNldCk7XG4gICAgICAgIGNhbnZhcy5zdHJva2UoKTtcbiAgICAgICAgY2FudmFzLmxpbmVXaWR0aCA9IG9sZExpbmVXaWR0aDtcbiAgICB9KTtcbn1cbiIsIi8qIC0qLSBtb2RlOiBqYXZhc2NyaXB0OyBjLWJhc2ljLW9mZnNldDogNDsgaW5kZW50LXRhYnMtbW9kZTogbmlsIC0qLSAqL1xuXG4vLyBcbi8vIERhbGxpYW5jZSBHZW5vbWUgRXhwbG9yZXJcbi8vIChjKSBUaG9tYXMgRG93biAyMDA2LTIwMTBcbi8vXG4vLyBzYW1wbGUuanM6IGRvd25zYW1wbGluZyBvZiBxdWFudGl0YXRpdmUgZmVhdHVyZXNcbi8vXG5cblwidXNlIHN0cmljdFwiO1xuXG5pZiAodHlwZW9mKHJlcXVpcmUpICE9PSAndW5kZWZpbmVkJykge1xuICAgIHZhciBkYXMgPSByZXF1aXJlKCcuL2RhcycpO1xuICAgIHZhciBEQVNGZWF0dXJlID0gZGFzLkRBU0ZlYXR1cmU7XG5cbiAgICB2YXIgcGFyc2VDaWdhciA9IHJlcXVpcmUoJy4vY2lnYXInKS5wYXJzZUNpZ2FyO1xuXG4gICAgdmFyIHNoYWxsb3dDb3B5ID0gcmVxdWlyZSgnLi91dGlscycpLnNoYWxsb3dDb3B5O1xufVxuXG52YXIgX19EU19TQ0FMRVMgPSBbMSwgMiwgNV07XG5cbmZ1bmN0aW9uIGRzX3NjYWxlKG4pIHtcbiAgICByZXR1cm4gX19EU19TQ0FMRVNbbiAlIF9fRFNfU0NBTEVTLmxlbmd0aF0gKiBNYXRoLnBvdygxMCwgKG4gLyBfX0RTX1NDQUxFUy5sZW5ndGgpfDApO1xufVxuXG5cbmZ1bmN0aW9uIERTQmluKHNjYWxlLCBtaW4sIG1heCkge1xuICAgIHRoaXMuc2NhbGUgPSBzY2FsZTtcbiAgICB0aGlzLnRvdCA9IDA7XG4gICAgdGhpcy5jbnQgPSAwO1xuICAgIHRoaXMuaGFzU2NvcmUgPSBmYWxzZTtcbiAgICB0aGlzLm1pbiA9IG1pbjsgdGhpcy5tYXggPSBtYXg7XG4gICAgdGhpcy5mZWF0dXJlcyA9IFtdO1xufVxuXG5mdW5jdGlvbiBfZmVhdHVyZU9yZGVyKGEsIGIpIHtcbiAgICBpZiAoYS5taW4gPCBiLm1pbikge1xuICAgICAgICByZXR1cm4gLTE7XG4gICAgfSBlbHNlIGlmIChhLm1pbiA+IGIubWluKSB7XG4gICAgICAgIHJldHVybiAxO1xuICAgIH0gZWxzZSBpZiAoYS5tYXggPCBiLm1heCkge1xuICAgICAgICByZXR1cm4gLTE7XG4gICAgfSBlbHNlIGlmIChiLm1heCA+IGEubWF4KSB7XG4gICAgICAgIHJldHVybiAxO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cbn1cblxuRFNCaW4ucHJvdG90eXBlLnNjb3JlID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMuY250ID09IDApIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfSBlbHNlIGlmICh0aGlzLmhhc1Njb3JlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRvdCAvIHRoaXMuY250O1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBmZWF0dXJlcyA9IHRoaXMuZmVhdHVyZXM7XG4gICAgICAgIGZlYXR1cmVzLnNvcnQoX2ZlYXR1cmVPcmRlcik7XG5cbiAgICAgICAgdmFyIG1heFNlZW4gPSAtMTAwMDAwMDAwMDA7XG4gICAgICAgIHZhciBjb3Y9MCwgbGFwPTA7XG5cbiAgICAgICAgZm9yICh2YXIgZmkgPSAxOyBmaSA8IGZlYXR1cmVzLmxlbmd0aDsgKytmaSkge1xuICAgICAgICAgICAgdmFyIGYgPSBmZWF0dXJlc1tmaV07XG4gICAgICAgICAgICB2YXIgbE1pbiA9IE1hdGgubWF4KGYubWluLCB0aGlzLm1pbik7XG4gICAgICAgICAgICB2YXIgbE1heCA9IE1hdGgubWluKGYubWF4LCB0aGlzLm1heCk7XG4gICAgICAgICAgICBsYXAgKz0gKGxNYXggLSBsTWluICsgMSk7XG5cbiAgICAgICAgICAgIGlmIChsTWluID4gbWF4U2Vlbikge1xuICAgICAgICAgICAgICAgIGNvdiArPSBsTWF4IC0gbE1pbiArIDE7XG4gICAgICAgICAgICAgICAgbWF4U2VlbiA9IGxNYXg7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChsTWF4ID4gbWF4U2Vlbikge1xuICAgICAgICAgICAgICAgICAgICBjb3YgKz0gKGxNYXggLSBtYXhTZWVuKTtcbiAgICAgICAgICAgICAgICAgICAgbWF4U2VlbiA9IGxNYXg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNvdiA+IDApXG4gICAgICAgICAgICByZXR1cm4gKDEuMCAqIGxhcCkgLyBjb3Y7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgIH1cbn1cblxuRFNCaW4ucHJvdG90eXBlLmZlYXR1cmUgPSBmdW5jdGlvbihmKSB7XG4gICAgaWYgKGYuc2NvcmUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aGlzLnRvdCArPSBmLnNjb3JlO1xuICAgICAgICB0aGlzLmhhc1Njb3JlID0gdHJ1ZVxuICAgIH1cblxuICAgICsrdGhpcy5jbnQ7XG4gICAgdGhpcy5mZWF0dXJlcy5wdXNoKGYpO1xufVxuXG5mdW5jdGlvbiBkb3duc2FtcGxlKGZlYXR1cmVzLCB0YXJnZXRSZXopIHtcbiAgICB2YXIgc24gPSAwO1xuICAgIHdoaWxlIChkc19zY2FsZShzbiArIDEpIDwgdGFyZ2V0UmV6KSB7XG4gICAgICAgICsrc247XG4gICAgfVxuICAgIHZhciBzY2FsZSA9IGRzX3NjYWxlKHNuKTtcblxuICAgIHZhciBiaW5Ub3RzID0gW107XG4gICAgdmFyIG1heEJpbiA9IC0xMDAwMDAwMDAwMDtcbiAgICB2YXIgbWluQmluID0gMTAwMDAwMDAwMDA7XG4gICAgZm9yICh2YXIgZmkgPSAwOyBmaSA8IGZlYXR1cmVzLmxlbmd0aDsgKytmaSkge1xuICAgICAgICB2YXIgZiA9IGZlYXR1cmVzW2ZpXTtcbiAgICAgICAgaWYgKGYuZ3JvdXBzICYmIGYuZ3JvdXBzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIC8vIERvbid0IGRvd25zYW1wbGUgY29tcGxleCBmZWF0dXJlcyAoPylcbiAgICAgICAgICAgIHJldHVybiBmZWF0dXJlcztcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBtaW5MYXAgPSAoZi5taW4gLyBzY2FsZSl8MDtcbiAgICAgICAgdmFyIG1heExhcCA9IChmLm1heCAvIHNjYWxlKXwwO1xuICAgICAgICBtYXhCaW4gPSBNYXRoLm1heChtYXhCaW4sIG1heExhcCk7XG4gICAgICAgIG1pbkJpbiA9IE1hdGgubWluKG1pbkJpbiwgbWluTGFwKTtcbiAgICAgICAgZm9yICh2YXIgYiA9IG1pbkxhcDsgYiA8PSBtYXhMYXA7ICsrYikge1xuICAgICAgICAgICAgdmFyIGJtID0gYmluVG90c1tiXTtcbiAgICAgICAgICAgIGlmICghYm0pIHtcbiAgICAgICAgICAgICAgICBibSA9IG5ldyBEU0JpbihzY2FsZSwgYiAqIHNjYWxlLCAoYiArIDEpICogc2NhbGUgLSAxKTtcbiAgICAgICAgICAgICAgICBiaW5Ub3RzW2JdID0gYm07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBibS5mZWF0dXJlKGYpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdmFyIHNhbXBsZWRGZWF0dXJlcyA9IFtdO1xuICAgIGZvciAodmFyIGIgPSBtaW5CaW47IGIgPD0gbWF4QmluOyArK2IpIHtcbiAgICAgICAgdmFyIGJtID0gYmluVG90c1tiXTtcbiAgICAgICAgaWYgKGJtKSB7XG4gICAgICAgICAgICB2YXIgZiA9IG5ldyBEQVNGZWF0dXJlKCk7XG4gICAgICAgICAgICBmLnNlZ21lbnQgPSBmZWF0dXJlc1swXS5zZWdtZW50O1xuICAgICAgICAgICAgZi5taW4gPSAoYiAqIHNjYWxlKSArIDE7XG4gICAgICAgICAgICBmLm1heCA9IChiICsgMSkgKiBzY2FsZTtcbiAgICAgICAgICAgIGYuc2NvcmUgPSBibS5zY29yZSgpO1xuICAgICAgICAgICAgZi50eXBlID0gJ2RlbnNpdHknO1xuICAgICAgICAgICAgc2FtcGxlZEZlYXR1cmVzLnB1c2goZik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgYWZ0ZXJEUyA9IERhdGUubm93KCk7XG4gICAgcmV0dXJuIHNhbXBsZWRGZWF0dXJlcztcbn1cblxuLyoqIERhdGEgc3RydWN0dXJlIHRvIHN0b3JlIGluZm9ybWF0aW9uIGZvclxuYSBiYXNlIHBvc2l0aW9uOlxuXG5wb3M6IHBvc2l0aW9uIG9mIHRoZSBiYXNlLlxuKi9cbmZ1bmN0aW9uIEJhc2VCaW4ocG9zKSB7XG5cbiAgICB0aGlzLl9wb3MgPSBwb3M7XG4gICAgdGhpcy5fYmFzZXMgPSB7fTtcbiAgICB0aGlzLl90b3RhbENvdW50ID0gMDtcbn1cblxuLyoqIEtlZXAgcmVjb3JkIGZvciBpbmNpZGVuY2Ugb2YgYSBiYXNlLFxud2l0aCByZWxhdGVkIHF1YWwgc2NvcmUgYW5kIHN0cmFuZCBmb3IgYSBwb3NpdGlvbi5cblxuUGFyYW1zXG4gICAgYmFzZTogYmFzZSAoZS5nIEEsIFQsIEcsIEMsIE4pIG9ic2VydmVkIGF0IHBvc2l0aW9uLlxuICAgIHF1YWw6IG51bWVyaWMgcXVhbGl0eSBzY29yZS5cbiAgICBzdHJhbmQ6ICcrJyBvciAnLScuXG4qL1xuQmFzZUJpbi5wcm90b3R5cGUucmVjb3JkQmFzZSA9IGZ1bmN0aW9uKGJhc2UsIHF1YWwsIHN0cmFuZCkge1xuICAgIGlmICghdGhpcy5fYmFzZXNbYmFzZV0pIHtcbiAgICAgICAgdmFyIHN0cmFuZENvbXBvc2l0aW9uID0geycrJzogMCwgJy0nOiAwfTtcbiAgICAgICAgc3RyYW5kQ29tcG9zaXRpb25bc3RyYW5kXSsrO1xuICAgICAgICB0aGlzLl9iYXNlc1tiYXNlXSA9IHtcbiAgICAgICAgICAgIGNudDogMSxcbiAgICAgICAgICAgIHRvdGFsUXVhbDogcXVhbCxcbiAgICAgICAgICAgIHN0cmFuZENudDogc3RyYW5kQ29tcG9zaXRpb25cbiAgICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgYmFzZUNvbXBvc2l0aW9uID0gdGhpcy5fYmFzZXNbYmFzZV07XG4gICAgICAgIGJhc2VDb21wb3NpdGlvbi5jbnQrKztcbiAgICAgICAgYmFzZUNvbXBvc2l0aW9uLnRvdGFsUXVhbCArPSBxdWFsO1xuICAgICAgICBiYXNlQ29tcG9zaXRpb24uc3RyYW5kQ250W3N0cmFuZF0rKztcbiAgICB9XG4gICAgdGhpcy5fdG90YWxDb3VudCsrO1xufTtcblxuLyoqIFJldHVybnMgY291bnQgb2YgdG90YWwgbnVtYmVyIG9mIGJhc2VzIG9ic2VydmVkIGF0IHBvc2l0aW9uICovXG5CYXNlQmluLnByb3RvdHlwZS50b3RhbENvdW50ID0gZnVuY3Rpb24oKSB7cmV0dXJuIHRoaXMuX3RvdGFsQ291bnQ7fTtcblxuLyoqIFJldHVybnMgdGhlIGJhc2UgcG9zaXRpb24gKi9cbkJhc2VCaW4ucHJvdG90eXBlLnBvcyA9IGZ1bmN0aW9uKCkge3JldHVybiB0aGlzLl9wb3M7fTtcblxuLyoqIENyZWF0ZXMgYSBsaXN0IG9mIHRhZywgaW5mbyBwYWlycyBpbiB0aGUgZm9ybVxuW3RhZ109W2luZm9dIGZvciBlYWNoIGJhc2UsIGZvciB1c2UgaW4gZmVhdHVyZS1wb3B1cCAqL1xuQmFzZUJpbi5wcm90b3R5cGUuaW5mb0xpc3QgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgaW5mbyA9IFtdO1xuICAgIHZhciB0b3RhbENvdW50ID0gdGhpcy5fdG90YWxDb3VudDtcbiAgICB2YXIgdG90YWxDb3VudFN0ciA9IFwiRGVwdGg9XCIgKyB0b3RhbENvdW50LnRvU3RyaW5nKCk7XG4gICAgaW5mby5wdXNoKHRvdGFsQ291bnRTdHIpO1xuICAgIGZvciAodmFyIGJhc2UgaW4gdGhpcy5fYmFzZXMpIHtcbiAgICAgICAgdmFyIGJhc2VDb21wb3NpdGlvbiA9IHRoaXMuX2Jhc2VzW2Jhc2VdO1xuICAgICAgICB2YXIgYmFzZUNudCA9IGJhc2VDb21wb3NpdGlvbi5jbnQ7XG4gICAgICAgIHZhciBiYXNlUGVyY2VudGFnZSA9IChiYXNlQ250ICogMTAwIC8gdG90YWxDb3VudCk7IFxuICAgICAgICB2YXIgcGx1c1N0cmFuZENudCA9IGJhc2VDb21wb3NpdGlvbi5zdHJhbmRDbnRbJysnXTtcbiAgICAgICAgdmFyIG1pbnVzU3RyYW5kQ250ID0gYmFzZUNvbXBvc2l0aW9uLnN0cmFuZENudFsnLSddO1xuICAgICAgICB2YXIgbWVhblF1YWwgPSBiYXNlQ29tcG9zaXRpb24udG90YWxRdWFsL2Jhc2VDbnQ7XG5cbiAgICAgICAgdmFyIGJhc2VJbmZvU3RyaW5nID0gW2Jhc2UsICc9JywgYmFzZUNudCwgJyAoJywgYmFzZVBlcmNlbnRhZ2UudG9GaXhlZCgwKSwgJyUsICcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbHVzU3RyYW5kQ250LCAnICssICcsIG1pbnVzU3RyYW5kQ250LCAnIC0sIFF1YWw6ICcsIG1lYW5RdWFsLnRvRml4ZWQoMCksICcpJ107XG4gICAgICAgIGluZm8ucHVzaChiYXNlSW5mb1N0cmluZy5qb2luKCcnKSk7XG4gICAgfVxuICAgIHJldHVybiBpbmZvO1xufTtcblxuLyoqIFJldHVybiBhIGxpc3Qgb2Ygb2JqZWN0cyBmb3IgY3JlYXRpbmcgYVxuaGlzdG9ncmFtIHNob3dpbmcgY29tcG9zaXRpb24gb2YgZGlmZmVyZW50IGJhc2VzIGF0IGFcbmdpdmVuIGxvY2F0aW9uLlxuXG5DdXJyZW50IGltcGxlbWVudGF0aW9uIGlzIGhhY2t5OiB0aGUgbG9naWMgaW52b2x2ZXNcbm92ZXJsYXlpbmcgQm94R2x5cGhzIG9uIHRvcCBvZiBlYWNoIG90aGVyLCB0aHVzIHRoZSBzY29yZVxuaXMgbm90IG1lYW5pbmdmdWwsIGJ1dCBvbmx5IHVzZWQgdG8gbWFuaXB1bGF0ZSBoZWlnaHQuXG5cblBhcmFtczpcbiAgcmVmOiByZWZlcmVuY2UgYmFzZSBhdCBwb3NpdGlvblxuICB0aHJlc2hvbGQ6IHZhbHVlIGJldHdlZW4gMCBhbmQgMSByZXByZXNlbnRpbmcgbWluIGFsbGVsZSBmcmVxdWVuY3lcbiAgICAgICAgICAgICAgYmVsb3cgd2hpY2ggdGhlIGFsbGVsZSB3aWxsIGJlIGlnbm9yZWQgaW4gaGlzdG9ncmFtLlxuICAgICAgICAgICAgICAoaW50ZXJwcmV0ZWQgYXMgbm9pc2UpXG4gICAgICAgICAgICAgIFNpbWlsYXIgdG8gJ2FsbGVsZSB0aHJlc2hvbGQnIHBhcmFtZXRlciBpbiBJR1ZcblxuUmV0dXJucyBhIGxpc3Qgb2Ygb2JqZWN0cyBjb250YWluaW5nIDIgcHJvcGVydGllc1xuICAgIGJhc2U6IHN1Y2ggYXMgQSwgVCwgRywgQywgTiwgLSAoZGVsKVxuICAgIHNjb3JlOiBhIG51bWVyaWMgc2NvcmUgZm9yIGRldGVybWluaW5nIGhlaWdodCBvZiBoaXN0b2dyYW1cblRoZSBsaXN0IGlzIG9yZGVyZWQgc3VjaCB0aGF0IGEgcHJlY2VlZGluZyBvYmplY3QgYWx3YXlzIGhhdmUgYVxuc2NvcmUgPj0gdGhlIGN1cnJlbnQgb2JqZWN0LCBhbmQgdGhlIHJlZiBiYXNlIHdpbGwgYmUgdGhlIGxhc3QgaXRlbS5cblxuRXhhbXBsZTogVGhlcmUgYXJlIDUwIFQncyBhbmQgNDAgQSdzICh0b3RhbCBkZXB0aCA9IDkwKVxuYXQgYSBiYXNlIHdoZXJlIHJlZj1BLiBUaGUgZnVuY3Rpb24gd2lsbCByZXR1cm5cbltUOiA5MCwgQTogNDBdLiBXaGVuIGNyZWF0aW5nIGEgaGlzdG9ncmFtIHdpdGggb3ZlcmxhcCxcbnRoaXMgd2lsbCBnaXZlIGFuIGFwcGVhcmFuY2Ugb2YgNDAgQSdzIChib3R0b20pIGFuZCA1MCBUJ3MgKHRvcCk6XG4jIyMjIyMjXG4jICBUICAjXG4jICBUICAjXG4jICBUICAjXG4jICBUICAjXG4jICBUICAjXG4jIyMjIyMjXG4jICBBICAjXG4jICBBICAjXG4jICBBICAjXG4jICBBICAjXG4jIyMjIyMjXG4qL1xuQmFzZUJpbi5wcm90b3R5cGUuYmFzZVNjb3JlTGlzdCA9IGZ1bmN0aW9uKHJlZiwgdGhyZXNob2xkKSB7XG4gICAgdmFyIGJhc2VTY29yZUxpc3QgPSBbXTtcbiAgICB2YXIgdG90YWxDb3VudCA9IHRoaXMuX3RvdGFsQ291bnQ7XG4gICAgdmFyIG1pbkNvdW50ID0gdGhyZXNob2xkICogdG90YWxDb3VudDtcbiAgICBmb3IgKHZhciBiYXNlIGluIHRoaXMuX2Jhc2VzKSB7XG4gICAgICAgIHZhciBiYXNlQ291bnQgPSB0aGlzLl9iYXNlc1tiYXNlXS5jbnQ7XG4gICAgICAgIGlmIChiYXNlQ291bnQgPCBtaW5Db3VudCB8fCBiYXNlID09IHJlZilcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB2YXIgYmFzZVNjb3JlUGFpciA9IHtiYXNlOiBiYXNlLCBzY29yZTogdG90YWxDb3VudH07XG4gICAgICAgIGJhc2VTY29yZUxpc3QucHVzaChiYXNlU2NvcmVQYWlyKTtcbiAgICAgICAgdG90YWxDb3VudCAtPSBiYXNlQ291bnQ7XG4gICAgfVxuICAgIGJhc2VTY29yZUxpc3QucHVzaCh7YmFzZTogcmVmLCBzY29yZTogdG90YWxDb3VudH0pO1xuICAgIHJldHVybiBiYXNlU2NvcmVMaXN0O1xufTtcblxuLyoqIEdlbmVyYXRlcyBhbiBhbGlnbmVkIHJlYWQgZnJvbSB0aGUgcmF3IHNlcXVlbmNlIG9mIGEgQkFNIHJlY29yZFxudXNpbmcgZ2l2ZW4gY2lnYXIgc3RyaW5nLlxuXG5QYXJhbXM6XG4gIHJhd3NlcTogdW5hbGlnbmVkIHJlYWQgc2VxdWVuY2UgZnJvbSBCYW0gcmVjb3JkXG4gIHJhd3F1YWxzOiB1bmFsaWduZWQgcmVhZCBxdWFscyBmcm9tIEJhbSByZWNvcmRcbiAgY2lnYXI6IEJhbSBjaWdhciBzdHJpbmcgZnJvbSBCYW0gcmVjb3JkXG5cblJldHVybnMgYW4gb2JqZWN0IHdpdGggMiBwcm9wZXJ0aWVzOlxuICBzZXE6IHN0cmluZyBjb250YWluaW5nIGFsaWduZWQgcmVhZFxuICBxdWFsczogc3RyaW5nIGNvbnRhaW5pbmcgcHJpbnRhYmxlLWNoYXJhY3RlciByZXByZXNlbnRhdGlvblxuICAgICAgICAgb2Ygc2VxdWVuY2luZyBxdWFsaXR5IHNjb3JlXG4qL1xuZnVuY3Rpb24gYWxpZ25TZXFVc2luZ0NpZ2FyKHJhd3NlcSwgcmF3cXVhbHMsIGNpZ2FyKSB7XG4gICAgdmFyIG9wcyA9IHBhcnNlQ2lnYXIoY2lnYXIpO1xuICAgIHZhciBzZXEgPSBbXTtcbiAgICB2YXIgcXVhbHMgPSBbXTtcbiAgICB2YXIgY3Vyc29yID0gMDtcbiAgICBmb3IgKHZhciBjaSA9IDA7IGNpIDwgb3BzLmxlbmd0aDsgKytjaSkge1xuICAgICAgICB2YXIgY28gPSBvcHNbY2ldO1xuICAgICAgICBpZiAoY28ub3AgPT0gJ00nKSB7XG4gICAgICAgICAgICBzZXEucHVzaChyYXdzZXEuc3Vic3RyKGN1cnNvciwgY28uY250KSk7XG4gICAgICAgICAgICBxdWFscy5wdXNoKHJhd3F1YWxzLnN1YnN0cihjdXJzb3IsIGNvLmNudCkpO1xuICAgICAgICAgICAgY3Vyc29yICs9IGNvLmNudDtcbiAgICAgICAgfSBlbHNlIGlmIChjby5vcCA9PSAnRCcpIHtcbiAgICAgICAgICAgIGZvciAodmFyIG9pID0gMDsgb2kgPCBjby5jbnQ7ICsrb2kpIHtcbiAgICAgICAgICAgICAgICBzZXEucHVzaCgnLScpO1xuICAgICAgICAgICAgICAgIHF1YWxzLnB1c2goJ1onKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChjby5vcCA9PSAnSScpIHtcbiAgICAgICAgICAgIGN1cnNvciArPSBjby5jbnQ7XG4gICAgICAgIH0gZWxzZSBpZiAoY28ub3AgPT0gJ1MnKSB7XG4gICAgICAgICAgICBjdXJzb3IgKz0gY28uY250O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ3Vua25vd24gY2lnb3AnICsgY28ub3ApO1xuICAgICAgICB9XG4gICAgfVxuICAgIHZhciBwcm9jZXNzZWRTZXEgPSB7c2VxOiBzZXEuam9pbignJyksIHF1YWxzOiBxdWFscy5qb2luKCcnKX07XG4gICAgcmV0dXJuIHByb2Nlc3NlZFNlcTtcbn1cblxuLyoqIENvbnN0cnVjdHMgdGhlIHJlZmVyZW5jZSBzZXF1ZW5jZSBmb3IgYSBnaXZlbiB3aW5kb3cuXG5cblBhcmFtc1xuICAgIGN1cnJlbnRTZXF1ZW5jZTogRGFzU2VxdWVuY2Ugb2JqZWN0IGNvbnRhaW5pbmcgcmVmIHNlcXVlbmNlXG4gICAgICAgICAgICAgICAgICAgICBpbiBjdXJyZW50IGJyb3dzZXIgdmlldy5cbiAgICBtaW4sIG1heDogbWluIGFuZCBtYXggcG9zaXRpb24gZm9yIHdpbmRvdy5cblxuUmV0dXJucyBhIHN0cmluZyBjb250YWluaW5nIHRoZSByZWZzZXEsIHBhZGRlZCB3aXRoICdOJyB3aGVyZSBzZXF1ZW5jZSBpcyBub3RcbiAgICBhdmFpbGFibGUuXG4qL1xuZnVuY3Rpb24gZ2V0UmVmU2VxKGN1cnJlbnRTZXF1ZW5jZSwgbWluLCBtYXgpIHtcbiAgICB2YXIgcmVmU2VxID0gW107XG4gICAgaWYgKGN1cnJlbnRTZXF1ZW5jZSkge1xuICAgICAgICB2YXIgY3NTdGFydCA9IGN1cnJlbnRTZXF1ZW5jZS5zdGFydHwwO1xuICAgICAgICB2YXIgY3NFbmQgPSBjdXJyZW50U2VxdWVuY2UuZW5kfDA7XG4gICAgICAgIGlmIChjc1N0YXJ0IDw9IG1heCAmJiBjc0VuZCA+PSBtaW4pIHtcbiAgICAgICAgICAgIHZhciBzZk1pbiA9IE1hdGgubWF4KG1pbiwgY3NTdGFydCk7XG4gICAgICAgICAgICB2YXIgc2ZNYXggPSBNYXRoLm1pbihtYXgsIGNzRW5kKTtcblxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZk1pbiAtIG1pbjsgaSsrKVxuICAgICAgICAgICAgICAgIHJlZlNlcS5wdXNoKCdOJyk7XG4gICAgICAgICAgICByZWZTZXEucHVzaChjdXJyZW50U2VxdWVuY2Uuc2VxLnN1YnN0cihzZk1pbiAtIGNzU3RhcnQsIHNmTWF4IC0gc2ZNaW4gKyAxKSk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1heCAtIHNmTWF4OyBpKyspXG4gICAgICAgICAgICAgICAgcmVmU2VxLnB1c2goJ04nKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVmU2VxLmpvaW4oJycpO1xufVxuXG4vKiogQ29uc3RydWN0cyBmZWF0dXJlcyBuZWNlc3NhcnkgZm9yIGEgY292ZXJhZ2UgdHJhY2sgc2hvd2luZ1xuYmFzZSBjb21wb3NpdGlvbiBmb3IgQkFNIHJlYWRzXG5cblBhcmFtc1xuICAgIGZlYXR1cmVzOiBhIGxpc3Qgb2YgZmVhdHVyZXMgZnJvbSBCQU0gcmVjb3Jkcy5cbiAgICBjdXJyZW50UmVmU2VxOiBhIERBU1NlcXVlbmNlIG9iamVjdCBjb250YWluaW5nIHJlZmVyZW5jZSBzZXF1ZW5jZS5cbiAgICBiYXNlQ29sb3JzOiBhbiBvYmplY3QgbWFwcGluZyBiYXNlIHRvIGRlc2lyZWQgY29sb3JzLlxuXG5SZXR1cm5zIGEgbGlzdCBvZiBmZWF0dXJlcyBvZiB0eXBlIGJhc2UtY292ZXJhZ2UuXG4qL1xuZnVuY3Rpb24gZ2V0QmFzZUNvdmVyYWdlKGZlYXR1cmVzLCBjdXJyZW50UmVmU2VxLCBiYXNlQ29sb3JzKSB7XG4gICAgdmFyIG1pbkJpbiA9IG51bGw7XG4gICAgdmFyIG1heEJpbiA9IG51bGw7XG5cbiAgICB2YXIgYWxsQmlucyA9IFtdO1xuXG4gICAgLy8gUG9wdWxhdGUgQmFzZUJpbnNcbiAgICBmb3IgKHZhciBmaSA9IDA7IGZpIDwgZmVhdHVyZXMubGVuZ3RoOyArK2ZpKSB7XG4gICAgICAgIHZhciBmID0gZmVhdHVyZXNbZmldO1xuICAgICAgICBpZiAoZi5ncm91cHMgJiYgZi5ncm91cHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgLy8gRG9uJ3QgZG93bnNhbXBsZSBjb21wbGV4IGZlYXR1cmVzXG4gICAgICAgICAgICByZXR1cm4gZmVhdHVyZXM7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHByb2Nlc3NlZFNlcSA9IGFsaWduU2VxVXNpbmdDaWdhcihmLnNlcSwgZi5xdWFscywgZi5jaWdhcik7XG4gICAgICAgIHZhciBzZXEgPSBwcm9jZXNzZWRTZXEuc2VxO1xuICAgICAgICB2YXIgcXVhbHMgPSBwcm9jZXNzZWRTZXEucXVhbHM7XG4gICAgICAgIHZhciBzdHJhbmQgPSBmLm9yaWVudGF0aW9uO1xuICAgICAgICB2YXIgbWluRm9yRmVhdHVyZSA9IGYubWluIHx8IDA7XG4gICAgICAgIHZhciBtYXhGb3JGZWF0dXJlID0gZi5tYXggfHwgMDtcbiAgICAgICAgdmFyIGluZCA9IDA7XG5cbiAgICAgICAgZm9yICh2YXIgYiA9IG1pbkZvckZlYXR1cmU7IGIgPD0gbWF4Rm9yRmVhdHVyZTsgKytiKSB7XG4gICAgICAgICAgICB2YXIgYm0gPSBhbGxCaW5zW2JdO1xuICAgICAgICAgICAgaWYgKCFibSkge1xuICAgICAgICAgICAgICAgIGJtID0gbmV3IEJhc2VCaW4oYik7XG4gICAgICAgICAgICAgICAgYWxsQmluc1tiXSA9IGJtO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGJhc2UgPSBzZXEuY2hhckF0KGluZCk7XG4gICAgICAgICAgICB2YXIgcXVhbCA9IHF1YWxzLmNoYXJDb2RlQXQoaW5kKSAtIDMzOyAvLyBHZW5lcmF0ZSBudW1lcmljIHF1YWwgc2NvcmVcbiAgICAgICAgICAgIGJtLnJlY29yZEJhc2UoYmFzZSwgcXVhbCwgc3RyYW5kKTtcbiAgICAgICAgICAgIGluZCsrO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFtaW5CaW4pXG4gICAgICAgICAgICBtaW5CaW4gPSBtaW5Gb3JGZWF0dXJlO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICBtaW5CaW4gPSBNYXRoLm1pbihtaW5CaW4sIG1pbkZvckZlYXR1cmUpO1xuICAgICAgICBpZiAoIW1heEJpbilcbiAgICAgICAgICAgIG1heEJpbiA9IG1heEZvckZlYXR1cmU7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIG1heEJpbiA9IE1hdGgubWF4KG1heEJpbiwgbWF4Rm9yRmVhdHVyZSk7XG4gICAgfVxuXG4gICAgLy8gR2VuZXJhdGUgY292ZXJhZ2UgZmVhdHVyZXNcbiAgICB2YXIgcmVmU2VxID0gZ2V0UmVmU2VxKGN1cnJlbnRSZWZTZXEsIG1pbkJpbiwgbWF4QmluKTtcbiAgICB2YXIgYmFzZUZlYXR1cmVzID0gW107XG4gICAgdmFyIGluZCA9IDA7XG4gICAgZm9yICh2YXIgYiA9IG1pbkJpbjsgYiA8PSBtYXhCaW47ICsrYikge1xuICAgICAgICB2YXIgYm0gPSBhbGxCaW5zW2JdO1xuICAgICAgICBpZiAoYm0pIHtcbiAgICAgICAgICAgIHZhciBmID0gbmV3IERBU0ZlYXR1cmUoKTtcbiAgICAgICAgICAgIGYuc2VnbWVudCA9IGZlYXR1cmVzWzBdLnNlZ21lbnQ7XG4gICAgICAgICAgICBmLm1pbiA9IGJtLnBvcygpO1xuICAgICAgICAgICAgZi5tYXggPSBmLm1pbjtcbiAgICAgICAgICAgIGYubm90ZXMgPSBbXTtcbiAgICAgICAgICAgIGYubm90ZXMgPSBmLm5vdGVzLmNvbmNhdChibS5pbmZvTGlzdCgpKTtcbiAgICAgICAgICAgIGYudHlwZSA9ICdiYXNlLWNvdmVyYWdlJztcbiAgICAgICAgICAgIGYuc3VwcHJlc3NTY29yZSA9IHRydWU7XG4gICAgICAgICAgICBpZiAocmVmU2VxKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJlZkJhc2UgPSByZWZTZXEuY2hhckF0KGluZCk7XG4gICAgICAgICAgICAgICAgdmFyIHJlZlN0cmluZyA9ICdSZWY9JyArIHJlZkJhc2U7XG4gICAgICAgICAgICAgICAgZi5ub3Rlcy51bnNoaWZ0KHJlZlN0cmluZyk7XG4gICAgICAgICAgICAgICAgdmFyIGJhc2VTY29yZUxpc3QgPSBibS5iYXNlU2NvcmVMaXN0KHJlZkJhc2UsIDAuMik7XG4gICAgICAgICAgICAgICAgLy8gVE9ETzogc2hpZnQgMC4yIHRocmVzaG9sZCB0byBhIGNvbmZpZyBwYXJhbWV0ZXJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGJhc2VTY29yZUxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJhc2UgPSBiYXNlU2NvcmVMaXN0W2ldLmJhc2U7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzY29yZSA9IGJhc2VTY29yZUxpc3RbaV0uc2NvcmU7XG4gICAgICAgICAgICAgICAgICAgIHZhciBmQmFzZSA9IHNoYWxsb3dDb3B5KGYpO1xuICAgICAgICAgICAgICAgICAgICBmQmFzZS5zY29yZSA9IHNjb3JlO1xuICAgICAgICAgICAgICAgICAgICAvLyBDb2xvciBieSBiYXNlQ29sb3Igd2hlbiBtaXNtYXRjaCBvY2N1cnNcbiAgICAgICAgICAgICAgICAgICAgLy8gb3RoZXJ3aXNlLCBCb3hHbHlwaCB0byBDT0xPUjEgaW4gc3R5bGVcbiAgICAgICAgICAgICAgICAgICAgaWYgKGJhc2VTY29yZUxpc3QubGVuZ3RoID4gMSB8fCBiYXNlICE9IHJlZkJhc2UpXG4gICAgICAgICAgICAgICAgICAgICAgICBmQmFzZS5pdGVtUmdiID0gYmFzZUNvbG9yc1tiYXNlXTtcblxuICAgICAgICAgICAgICAgICAgICBiYXNlRmVhdHVyZXMucHVzaChmQmFzZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBObyByZWZTZXEsIG9ubHkgc2hvdyBjb3ZlcmFnZSBoZWlnaHQuXG4gICAgICAgICAgICAgICAgYmFzZUZlYXR1cmVzLnB1c2goZik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaW5kICsrO1xuICAgIH1cbiAgICByZXR1cm4gYmFzZUZlYXR1cmVzO1xufVxuXG5pZiAodHlwZW9mKG1vZHVsZSkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgICAgIGRvd25zYW1wbGU6IGRvd25zYW1wbGUsXG4gICAgICAgIGdldEJhc2VDb3ZlcmFnZTogZ2V0QmFzZUNvdmVyYWdlXG4gICAgfTtcbn1cbiIsIi8qIC0qLSBtb2RlOiBqYXZhc2NyaXB0OyBjLWJhc2ljLW9mZnNldDogNDsgaW5kZW50LXRhYnMtbW9kZTogbmlsIC0qLSAqL1xuXG4vLyBcbi8vIERhbGxpYW5jZSBHZW5vbWUgRXhwbG9yZXJcbi8vIChjKSBUaG9tYXMgRG93biAyMDA2LTIwMTFcbi8vXG4vLyBiaW4uanMgZ2VuZXJhbCBiaW5hcnkgZGF0YSBzdXBwb3J0XG4vL1xuXG5cInVzZSBzdHJpY3RcIjtcblxuaWYgKHR5cGVvZihyZXF1aXJlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB2YXIgYnJvd3NlciA9IHJlcXVpcmUoJy4vY2Jyb3dzZXInKTtcbiAgICB2YXIgQnJvd3NlciA9IGJyb3dzZXIuQnJvd3NlcjtcblxuICAgIHZhciBiaW4gPSByZXF1aXJlKCcuL2JpbicpO1xuICAgIHZhciBVUkxGZXRjaGFibGUgPSBiaW4uVVJMRmV0Y2hhYmxlO1xuXG4gICAgdmFyIGNvbm5lY3RUcml4ID0gcmVxdWlyZSgnLi90cml4JykuY29ubmVjdFRyaXg7XG59XG5cbnZhciBSRUdJT05fUEFUVEVSTiA9IC9eKFtcXGQrLFxcdyxcXC4sXFxfLFxcLV0rKVtcXHM6XSsoWzAtOSxcXC5dKz8pKFtLa01tR2ddKT8oKC18XFwuXFwufFxccykrKFswLTksXFwuXSspKFtLa01tR2ddKT8pPyQvO1xuXG5mdW5jdGlvbiBwYXJzZUxvY0NhcmRpbmFsKG4sIG0pIHtcbiAgICB2YXIgaSA9IHBhcnNlRmxvYXQobi5yZXBsYWNlKC8sL2csICcnKSk7XG4gICAgaWYgKG0gPT09ICdrJyB8fCBtID09PSAnSycpIHtcbiAgICAgICAgcmV0dXJuIChpICogMTAwMCl8MDtcbiAgICB9IGVsc2UgaWYgKG0gPT0gJ20nIHx8IG0gPT09ICdNJykge1xuICAgICAgICByZXR1cm4gKGkgKiAxMDAwMDAwKXwwO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBpfDA7XG4gICAgfVxufVxuXG5Ccm93c2VyLnByb3RvdHlwZS5zZWFyY2ggPSBmdW5jdGlvbihnLCBzdGF0dXNDYWxsYmFjaywgb3B0cykge1xuICAgIHZhciB0aGlzQiA9IHRoaXM7XG4gICAgb3B0cyA9IG9wdHMgfHwge307XG4gICAgdmFyIHNyUGFkZGluZyA9IG9wdHMucGFkZGluZyB8fCB0aGlzLmRlZmF1bHRTZWFyY2hSZWdpb25QYWRkaW5nO1xuICAgIFxuICAgIHZhciBtID0gUkVHSU9OX1BBVFRFUk4uZXhlYyhnKTtcblxuICAgIGlmIChtKSB7XG4gICAgICAgIHZhciBjaHIgPSBtWzFdLCBzdGFydCwgZW5kO1xuICAgICAgICBpZiAobVs2XSkge1xuICAgICAgICAgICAgc3RhcnQgPSBwYXJzZUxvY0NhcmRpbmFsKG1bMl0sICBtWzNdKTtcbiAgICAgICAgICAgIGVuZCA9IHBhcnNlTG9jQ2FyZGluYWwobVs2XSwgbVs3XSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgd2lkdGggPSB0aGlzLnZpZXdFbmQgLSB0aGlzLnZpZXdTdGFydCArIDE7XG4gICAgICAgICAgICBzdGFydCA9IChwYXJzZUxvY0NhcmRpbmFsKG1bMl0sIG1bM10pIC0gKHdpZHRoLzIpKXwwO1xuICAgICAgICAgICAgZW5kID0gc3RhcnQgKyB3aWR0aCAtIDE7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZXRMb2NhdGlvbihjaHIsIHN0YXJ0LCBlbmQsIHN0YXR1c0NhbGxiYWNrKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoIWcgfHwgZy5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHNlYXJjaENvdW50ID0gMDtcbiAgICAgICAgdmFyIGZvdW5kTGF0Y2ggPSBmYWxzZTtcblxuICAgICAgICB2YXIgc2VhcmNoQ2FsbGJhY2sgPSBmdW5jdGlvbihmb3VuZCwgZXJyKSB7XG4gICAgICAgICAgICAtLXNlYXJjaENvdW50O1xuICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgIHJldHVybiBzdGF0dXNDYWxsYmFjayhlcnIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIWZvdW5kKSBmb3VuZCA9IFtdO1xuICAgICAgICAgICAgdmFyIG1pbiA9IDUwMDAwMDAwMCwgbWF4ID0gLTEwMDAwMDAwMDtcbiAgICAgICAgICAgIHZhciBuY2hyID0gbnVsbDtcbiAgICAgICAgICAgIGZvciAodmFyIGZpID0gMDsgZmkgPCBmb3VuZC5sZW5ndGg7ICsrZmkpIHtcbiAgICAgICAgICAgICAgICB2YXIgZiA9IGZvdW5kW2ZpXTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmIChuY2hyID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgbmNociA9IGYuc2VnbWVudDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbWluID0gTWF0aC5taW4obWluLCBmLm1pbik7XG4gICAgICAgICAgICAgICAgbWF4ID0gTWF0aC5tYXgobWF4LCBmLm1heCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghbmNocikge1xuICAgICAgICAgICAgICAgIGlmIChzZWFyY2hDb3VudCA9PSAwICYmICFmb3VuZExhdGNoKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3RhdHVzQ2FsbGJhY2soXCJubyBtYXRjaCBmb3IgJ1wiICsgZyArIFwiJ1wiKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZm91bmRMYXRjaCA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpc0IuaGlnaGxpZ2h0UmVnaW9uKG5jaHIsIG1pbiwgbWF4KTtcblxuICAgICAgICAgICAgICAgIHZhciBtaWQgPSAoKG1heCttaW4pLzIpfDBcbiAgICAgICAgICAgICAgICB2YXIgcGFkZGluZyA9IE1hdGgubWF4KHNyUGFkZGluZywgKDAuMyAqIChtYXggLSBtaW4gKyAxKSl8MCk7XG4gICAgICAgICAgICAgICAgdGhpc0Iuc2V0TG9jYXRpb24obmNociwgbWluIC0gcGFkZGluZywgbWF4ICsgcGFkZGluZywgc3RhdHVzQ2FsbGJhY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGRvVHJpeFNlYXJjaCA9IGZ1bmN0aW9uKHRpZXIsIHRyaXgpIHtcbiAgICAgICAgICAgIHRyaXgubG9va3VwKGcsIGZ1bmN0aW9uKHJlc3VsdCwgc3RhdHVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdCA9PSBudWxsIHx8IHJlc3VsdC5sZW5ndGggPCAyKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aWVyLmZlYXR1cmVTb3VyY2Uuc2VhcmNoKGcsIHNlYXJjaENhbGxiYWNrKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaGl0ID0gcmVzdWx0WzFdLnNwbGl0KCcsJylbMF07XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aWVyLmZlYXR1cmVTb3VyY2Uuc2VhcmNoKGhpdCwgc2VhcmNoQ2FsbGJhY2spO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuc2VhcmNoRW5kcG9pbnQpIHtcbiAgICAgICAgICAgIHNlYXJjaENvdW50ID0gMTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRvRGFzU2VhcmNoKHRoaXNCLnNlYXJjaEVuZHBvaW50LCBnLCBzZWFyY2hDYWxsYmFjayk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGNvbnN0IHNlYXJjaFNvdXJjZXMgPSBbXG4gICAgICAgICAgICAuLi4odGhpcy5zZWFyY2hPbmx5U291cmNlSG9sZGVycyB8fCBbXSksXG4gICAgICAgICAgICAuLi50aGlzLnRpZXJzXG4gICAgICAgIF07XG5cbiAgICAgICAgZm9yICh2YXIgdGkgPSAwOyB0aSA8IHNlYXJjaFNvdXJjZXMubGVuZ3RoOyArK3RpKSB7XG4gICAgICAgICAgICAoZnVuY3Rpb24odGllcikge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzQi5zb3VyY2VBZGFwdGVySXNDYXBhYmxlKHRpZXIuZmVhdHVyZVNvdXJjZSwgJ3NlYXJjaCcpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aWVyLmRhc1NvdXJjZS50cml4VVJJKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICArK3NlYXJjaENvdW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRpZXIudHJpeCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvVHJpeFNlYXJjaCh0aWVyLCB0aWVyLnRyaXgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaXggPSBuZXcgVVJMRmV0Y2hhYmxlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aWVyLmRhc1NvdXJjZS50cml4VVJJLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3JlZGVudGlhbHM6IHRpZXIuZGFzU291cmNlLmNyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZXI6IHRpZXIuZGFzU291cmNlLnJlc29sdmVyfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaXh4ID0gbmV3IFVSTEZldGNoYWJsZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGllci5kYXNTb3VyY2UudHJpeHhVUkkgfHwgKHRpZXIuZGFzU291cmNlLnRyaXhVUkkgKyAneCcpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3JlZGVudGlhbHM6IHRpZXIuZGFzU291cmNlLmNyZWRlbnRpYWxzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZXI6IHRpZXIuZGFzU291cmNlLnJlc29sdmVyfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0VHJpeChpeCwgaXh4LCBmdW5jdGlvbih0cml4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpZXIudHJpeCA9IHRyaXg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvVHJpeFNlYXJjaCh0aWVyLCB0cml4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICsrc2VhcmNoQ291bnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aWVyLmZlYXR1cmVTb3VyY2Uuc2VhcmNoKGcsIHNlYXJjaENhbGxiYWNrKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGllci5kYXNTb3VyY2UucHJvdmlkZXNfc2VhcmNoKSB7XG4gICAgICAgICAgICAgICAgICAgICsrc2VhcmNoQ291bnQ7XG4gICAgICAgICAgICAgICAgICAgIHRoaXNCLmRvRGFzU2VhcmNoKHRpZXIuZGFzU291cmNlLCBnLCBzZWFyY2hDYWxsYmFjayk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkoc2VhcmNoU291cmNlc1t0aV0pO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5Ccm93c2VyLnByb3RvdHlwZS5kb0Rhc1NlYXJjaCA9IGZ1bmN0aW9uKHNvdXJjZSwgZywgc2VhcmNoQ2FsbGJhY2spIHtcbiAgICB2YXIgdGhpc0IgPSB0aGlzO1xuICAgIHNvdXJjZS5mZWF0dXJlcyhudWxsLCB7Z3JvdXA6IGcsIHR5cGU6ICd0cmFuc2NyaXB0J30sIGZ1bmN0aW9uKGZvdW5kKSB7XG4gICAgICAgIGlmICghZm91bmQpIGZvdW5kID0gW107XG4gICAgICAgIHZhciBtaW4gPSA1MDAwMDAwMDAsIG1heCA9IC0xMDAwMDAwMDA7XG4gICAgICAgIHZhciBuY2hyID0gbnVsbDtcblxuICAgICAgICB2YXIgZm91bmQyID0gW107XG4gICAgICAgIGZvciAodmFyIGZpID0gMDsgZmkgPCBmb3VuZC5sZW5ndGg7ICsrZmkpIHtcbiAgICAgICAgICAgIHZhciBmID0gZm91bmRbZmldO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoZi5sYWJlbC50b0xvd2VyQ2FzZSgpICE9IGcudG9Mb3dlckNhc2UoKSkge1xuICAgICAgICAgICAgICAgIC8vIC4uLmJlY2F1c2UgRGF6emxlIGNhbiByZXR1cm4gc3B1cmlvdXMgb3ZlcmxhcHBpbmcgZmVhdHVyZXMuXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3VuZDIucHVzaChmKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBzZWFyY2hDYWxsYmFjayhmb3VuZDIpO1xuICAgIH0sIGZhbHNlKTtcbn1cbiIsIi8qIC0qLSBtb2RlOiBqYXZhc2NyaXB0OyBjLWJhc2ljLW9mZnNldDogNDsgaW5kZW50LXRhYnMtbW9kZTogbmlsIC0qLSAqL1xuXG4vLyBcbi8vIERhbGxpYW5jZSBHZW5vbWUgRXhwbG9yZXJcbi8vIChjKSBUaG9tYXMgRG93biAyMDA2LTIwMTJcbi8vXG4vLyBzZXF1ZW5jZS1kcmF3LmpzOiByZW5kZXJlcnMgZm9yIHNlcXVlbmNlLXJlbGF0ZWQgZGF0YVxuLy9cblxuXCJ1c2Ugc3RyaWN0XCI7XG5cbmlmICh0eXBlb2YocmVxdWlyZSkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgdmFyIHV0aWxzID0gcmVxdWlyZSgnLi91dGlscycpO1xuICAgIHZhciBmb3JtYXRMb25nSW50ID0gdXRpbHMuZm9ybWF0TG9uZ0ludDtcbiAgICB2YXIgbWFrZUVsZW1lbnROUyA9IHV0aWxzLm1ha2VFbGVtZW50TlM7XG5cbiAgICB2YXIgc3ZndSA9IHJlcXVpcmUoJy4vc3ZnLXV0aWxzJyk7XG4gICAgdmFyIE5TX1NWRyA9IHN2Z3UuTlNfU1ZHO1xuICAgIHZhciBOU19YTElOSyA9IHN2Z3UuTlNfWExJTks7XG4gICAgdmFyIFNWR1BhdGggPSBzdmd1LlNWR1BhdGg7XG5cbiAgICB2YXIgbmYgPSByZXF1aXJlKCcuL251bWZvcm1hdHMnKTtcbiAgICB2YXIgZm9ybWF0TG9uZ0ludCA9IG5mLmZvcm1hdExvbmdJbnQ7XG59XG5cbnZhciBNSU5fVElMRSA9IDEwMDtcbnZhciBydWxlclRpbGVDb2xvcnMgPSBbJ2JsYWNrJywgJ3doaXRlJ107XG5cbnZhciBzdGVwcyA9IFsxLDIsNV07XG5cblxudmFyIE5TX1NWRyA9ICdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zyc7XG5cblxuZnVuY3Rpb24gdGlsZVNpemVGb3JTY2FsZShzY2FsZSwgbWluKVxue1xuICAgIGlmICghbWluKSB7XG4gICAgICAgIG1pbiA9IE1JTl9USUxFO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHRzKHApIHtcbiAgICAgICAgcmV0dXJuIHN0ZXBzW3AgJSBzdGVwcy5sZW5ndGhdICogTWF0aC5wb3coMTAsIChwIC8gc3RlcHMubGVuZ3RoKXwwKTtcbiAgICB9XG4gICAgdmFyIHBvdyA9IHN0ZXBzLmxlbmd0aDtcbiAgICB3aGlsZSAoc2NhbGUgKiB0cyhwb3cpIDwgbWluKSB7XG4gICAgICAgICsrcG93O1xuICAgIH1cbiAgICByZXR1cm4gdHMocG93KTtcbn1cblxuZnVuY3Rpb24gZHJhd1NlcVRpZXIodGllciwgc2VxKSB7XG4gICAgdmFyIGdjID0gdGllci52aWV3cG9ydC5nZXRDb250ZXh0KCcyZCcpO1xuICAgIHZhciByZXRpbmEgPSB0aWVyLmJyb3dzZXIucmV0aW5hICYmIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvID4gMTtcbiAgICB2YXIgZGVzaXJlZFdpZHRoID0gdGllci5icm93c2VyLmZlYXR1cmVQYW5lbFdpZHRoICsgMjAwMDtcbiAgICBpZiAocmV0aW5hKSB7XG4gICAgICAgIGRlc2lyZWRXaWR0aCAqPSAyO1xuICAgIH1cbiAgICB2YXIgZnB3ID0gdGllci52aWV3cG9ydC53aWR0aHwwOyAvLyB0aGlzLmJyb3dzZXIuZmVhdHVyZVBhbmVsV2lkdGg7XG4gICAgaWYgKGZwdyA8IGRlc2lyZWRXaWR0aCAtIDUwKSB7XG4gICAgICAgIHRpZXIudmlld3BvcnQud2lkdGggPSBmcHcgPSBkZXNpcmVkV2lkdGg7XG4gICAgfVxuXG4gICAgdmFyIGhlaWdodCA9IDUwO1xuICAgIGlmIChzZXEgJiYgc2VxLnNlcSkge1xuICAgICAgICBoZWlnaHQgKz0gMjU7XG4gICAgfVxuXG4gICAgdmFyIGNhbnZhc0hlaWdodCA9IGhlaWdodDtcbiAgICBpZiAocmV0aW5hKSBcbiAgICAgICAgY2FudmFzSGVpZ2h0ICo9IDI7XG5cbiAgICB0aWVyLnZpZXdwb3J0LmhlaWdodCA9IGNhbnZhc0hlaWdodDtcbiAgICB0aWVyLnZpZXdwb3J0LnN0eWxlLmhlaWdodCA9ICcnICsgaGVpZ2h0ICsgJ3B4JztcbiAgICB0aWVyLnZpZXdwb3J0LnN0eWxlLndpZHRoID0gcmV0aW5hID8gKCcnICsgKGZwdy8yKSArICdweCcpIDogKCcnICsgZnB3ICsgJ3B4Jyk7XG4gICAgdGllci5sYXlvdXRIZWlnaHQgPSBoZWlnaHQ7XG4gICAgdGllci51cGRhdGVIZWlnaHQoKTtcblxuICAgIFxuICAgIGlmICh0aWVyLmJhY2tncm91bmQpIHtcbiAgICAgICAgZ2MuZmlsbFN0eWxlID0gdGllci5iYWNrZ3JvdW5kO1xuICAgICAgICBnYy5maWxsUmVjdCgwLCAwLCBmcHcsIHRpZXIudmlld3BvcnQuaGVpZ2h0KTtcbiAgICB9XG4gICAgaWYgKHJldGluYSkge1xuICAgICAgICBnYy5zY2FsZSgyLCAyKTtcbiAgICB9XG5cbiAgICBnYy50cmFuc2xhdGUoMTAwMCwwKTtcbiAgICBkcmF3U2VxVGllckdDKHRpZXIsIHNlcSwgZ2MpO1xuICAgIHRpZXIubm9yaWdpbiA9IHRpZXIuYnJvd3Nlci52aWV3U3RhcnQ7XG4gICAgdGllci52aWV3cG9ydEhvbGRlci5zdHlsZS5sZWZ0ID0gJy0xMDAwcHgnO1xufVxuXG5mdW5jdGlvbiBkcmF3U2VxVGllckdDKHRpZXIsIHNlcSwgZ2MpXG57XG4gICAgdmFyIHNjYWxlID0gdGllci5icm93c2VyLnNjYWxlLCBrbm93blN0YXJ0ID0gdGllci5icm93c2VyLnZpZXdTdGFydCAtICgxMDAwL3NjYWxlKXwwLCBrbm93bkVuZCA9IHRpZXIuYnJvd3Nlci52aWV3RW5kICsgKDIwMDAvc2NhbGUpLCBjdXJyZW50U2VxTWF4ID0gdGllci5icm93c2VyLmN1cnJlbnRTZXFNYXg7XG5cbiAgICB2YXIgc2VxVGllck1heCA9IGtub3duRW5kO1xuICAgIGlmIChjdXJyZW50U2VxTWF4ID4gMCAmJiBjdXJyZW50U2VxTWF4IDwga25vd25FbmQpIHtcbiAgICAgICAgc2VxVGllck1heCA9IGN1cnJlbnRTZXFNYXg7XG4gICAgfVxuICAgIHZhciB0aWxlID0gdGlsZVNpemVGb3JTY2FsZShzY2FsZSk7XG4gICAgdmFyIHBvcyA9IE1hdGgubWF4KDAsICgoa25vd25TdGFydCAvIHRpbGUpfDApICogdGlsZSk7XG4gICAgXG4gICAgdmFyIG9yaWdpbiA9IHRpZXIuYnJvd3Nlci52aWV3U3RhcnQ7XG5cbiAgICB3aGlsZSAocG9zIDw9IHNlcVRpZXJNYXgpIHtcblx0XHRnYy5maWxsU3R5bGUgPSAoKHBvcyAvIHRpbGUpICUgMiA9PSAwKSA/ICd3aGl0ZScgOiAnYmxhY2snO1xuXHRcdGdjLnN0cm9rZVN0eWxlID0gJ2JsYWNrJztcblx0XHRnYy5maWxsUmVjdCgocG9zIC0gb3JpZ2luKSAqIHNjYWxlLFxuXHRcdFx0ICAgIDgsXG5cdFx0XHQgICAgdGlsZSpzY2FsZSxcblx0XHRcdCAgICAzKTtcblx0XHRnYy5zdHJva2VSZWN0KChwb3MgLSBvcmlnaW4pICogc2NhbGUsXG5cdFx0XHQgICAgICA4LFxuXHRcdFx0ICAgICAgdGlsZSpzY2FsZSxcblx0XHRcdCAgICAgIDMpO1xuXG5cdFx0Z2MuZmlsbFN0eWxlID0gJ2JsYWNrJztcblx0XHRnYy5maWxsVGV4dChmb3JtYXRMb25nSW50KHBvcyksICgocG9zIC0gb3JpZ2luKSAqIHNjYWxlKSwgMjIpO1xuXHRcdFxuXG5cdFx0cG9zICs9IHRpbGU7XG4gICAgfVxuXG4gICAgaWYgKHNlcSAmJiBzZXEuc2VxKSB7XG5cdFx0Zm9yICh2YXIgcCA9IGtub3duU3RhcnQ7IHAgPD0ga25vd25FbmQ7ICsrcCkge1xuXHRcdCAgICBpZiAocCA+PSBzZXEuc3RhcnQgJiYgcCA8PSBzZXEuZW5kKSB7XG5cdFx0XHRcdHZhciBiYXNlID0gc2VxLnNlcS5zdWJzdHIocCAtIHNlcS5zdGFydCwgMSkudG9VcHBlckNhc2UoKTtcblx0XHRcdFx0dmFyIGNvbG9yID0gdGllci5icm93c2VyLmJhc2VDb2xvcnNbYmFzZV07XG5cdFx0XHRcdGlmICghY29sb3IpIHtcblx0XHQgICAgICAgICAgICBjb2xvciA9ICdncmF5Jztcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGdjLmZpbGxTdHlsZSA9IGNvbG9yO1xuXG5cdFx0XHRcdGlmIChzY2FsZSA+PSA4KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB3ID0gZ2MubWVhc3VyZVRleHQoYmFzZSkud2lkdGg7XG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHNjYWxlLXcpO1xuXHRcdFx0XHQgICAgZ2MuZmlsbFRleHQoYmFzZSwgKHAgLSBvcmlnaW4pICogc2NhbGUgKyAoKHNjYWxlLXcpKjAuNSkgLCA1Mik7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdCAgICBnYy5maWxsUmVjdCgocCAtIG9yaWdpbikgKiBzY2FsZSwgNDIsIHNjYWxlLCAxMik7IFxuXHRcdFx0XHR9XG5cdFx0ICAgIH1cblx0XHR9XG4gICAgfVxufVxuXG5mdW5jdGlvbiBzdmdTZXFUaWVyKHRpZXIsIHNlcSkge1xuICAgIHZhciBzY2FsZSA9IHRpZXIuYnJvd3Nlci5zY2FsZSwga25vd25TdGFydCA9IHRpZXIuYnJvd3Nlci52aWV3U3RhcnQgLSAoMTAwMC9zY2FsZSl8MCwga25vd25FbmQgPSB0aWVyLmJyb3dzZXIudmlld0VuZCArICgyMDAwL3NjYWxlKSwgY3VycmVudFNlcU1heCA9IHRpZXIuYnJvd3Nlci5jdXJyZW50U2VxTWF4O1xuXG4gICAgdmFyIGZwdyA9IHRpZXIudmlld3BvcnQud2lkdGh8MDsgXG5cbiAgICB2YXIgc2VxVGllck1heCA9IGtub3duRW5kO1xuICAgIGlmIChjdXJyZW50U2VxTWF4ID4gMCAmJiBjdXJyZW50U2VxTWF4IDwga25vd25FbmQpIHtcbiAgICAgICAgc2VxVGllck1heCA9IGN1cnJlbnRTZXFNYXg7XG4gICAgfVxuICAgIHZhciB0aWxlID0gdGlsZVNpemVGb3JTY2FsZShzY2FsZSk7XG4gICAgdmFyIHBvcyA9IE1hdGgubWF4KDAsICgoa25vd25TdGFydCAvIHRpbGUpfDApICogdGlsZSk7XG4gICAgXG4gICAgdmFyIG9yaWdpbiA9IHRpZXIuYnJvd3Nlci52aWV3U3RhcnQ7XG5cbiAgICB2YXIgIGcgPSBtYWtlRWxlbWVudE5TKE5TX1NWRywgJ2cnLCBbXSwge2ZvbnRTaXplOiAnOHB0J30pOyBcbiAgICB3aGlsZSAocG9zIDw9IHNlcVRpZXJNYXgpIHtcbiAgICBcdGcuYXBwZW5kQ2hpbGQoXG4gICAgXHQgICAgbWFrZUVsZW1lbnROUyhcbiAgICBcdFx0TlNfU1ZHLCAncmVjdCcsXG4gICAgXHRcdG51bGwsXG4gICAgXHRcdHt4OiAocG9zLW9yaWdpbikqc2NhbGUsXG4gICAgXHRcdCB5OiA4LFxuICAgIFx0XHQgd2lkdGg6IHRpbGUqc2NhbGUsXG4gICAgXHRcdCBoZWlnaHQ6IDMsXG4gICAgXHRcdCBmaWxsOiAoKHBvcyAvIHRpbGUpICUgMiA9PSAwKSA/ICd3aGl0ZScgOiAnYmxhY2snLFxuICAgIFx0XHQgc3Ryb2tlOiAnYmxhY2snfSkpO1xuXG4gICAgXHRnLmFwcGVuZENoaWxkKFxuICAgIFx0ICAgIG1ha2VFbGVtZW50TlMoXG4gICAgXHRcdE5TX1NWRywgJ3RleHQnLFxuICAgIFx0XHRmb3JtYXRMb25nSW50KHBvcyksXG4gICAgXHRcdHt4OiAocG9zLW9yaWdpbikqc2NhbGUsXG4gICAgXHRcdCB5OiAyOCxcbiAgICBcdFx0IGZpbGw6ICdibGFjaycsIHN0cm9rZTogJ25vbmUnfSkpO1xuICAgIFx0XG4gICAgXHRwb3MgKz0gdGlsZTtcbiAgICB9XG5cbiAgICBpZiAoc2VxICYmIHNlcS5zZXEpIHtcbiAgICBcdGZvciAodmFyIHAgPSBrbm93blN0YXJ0OyBwIDw9IGtub3duRW5kOyArK3ApIHtcbiAgICBcdCAgICBpZiAocCA+PSBzZXEuc3RhcnQgJiYgcCA8PSBzZXEuZW5kKSB7XG4gICAgICAgIFx0XHR2YXIgYmFzZSA9IHNlcS5zZXEuc3Vic3RyKHAgLSBzZXEuc3RhcnQsIDEpLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgIFx0XHR2YXIgY29sb3IgPSB0aWVyLmJyb3dzZXIuYmFzZUNvbG9yc1tiYXNlXTtcbiAgICAgICAgXHRcdGlmICghY29sb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgY29sb3IgPSAnZ3JheSc7XG4gICAgICAgIFx0XHR9XG5cbiAgICAgICAgXHRcdGlmIChzY2FsZSA+PSA4KSB7XG4gICAgICAgIFx0XHQgICAgZy5hcHBlbmRDaGlsZChcbiAgICAgICAgXHRcdFx0bWFrZUVsZW1lbnROUyhOU19TVkcsICd0ZXh0JywgYmFzZSwge1xuICAgICAgICBcdFx0XHQgICAgeDogKDAuNStwLW9yaWdpbikqc2NhbGUsXG4gICAgICAgIFx0XHRcdCAgICB5OiA1MixcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHRBbmNob3I6ICdtaWRkbGUnLFxuICAgICAgICBcdFx0XHQgICAgZmlsbDogY29sb3J9KSk7XG4gICAgICAgIFx0XHR9IGVsc2Uge1xuICAgICAgICBcdFx0ICAgIGcuYXBwZW5kQ2hpbGQoXG4gICAgICAgIFx0XHRcdG1ha2VFbGVtZW50TlMoTlNfU1ZHLCAncmVjdCcsIG51bGwsIHtcbiAgICAgICAgXHRcdFx0ICAgIHg6IChwIC0gb3JpZ2luKSpzY2FsZSxcbiAgICAgICAgXHRcdFx0ICAgIHk6IDQyLFxuICAgICAgICBcdFx0XHQgICAgd2lkdGg6IHNjYWxlLFxuICAgICAgICBcdFx0XHQgICAgaGVpZ2h0OiAxMixcbiAgICAgICAgXHQgICAgICAgICAgICBmaWxsOiBjb2xvcn0pKTtcblxuICAgICAgICBcdFx0fVxuICAgIFx0ICAgIH1cbiAgICBcdH1cbiAgICB9IFxuXG4gICAgcmV0dXJuIGc7XG59XG5cbmlmICh0eXBlb2YobW9kdWxlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IHtcbiAgICAgICAgZHJhd1NlcVRpZXI6IGRyYXdTZXFUaWVyLFxuICAgICAgICBkcmF3U2VxVGllckdDOiBkcmF3U2VxVGllckdDLFxuICAgICAgICBzdmdTZXFUaWVyOiBzdmdTZXFUaWVyXG4gICAgfTtcbn1cbiIsIi8qIC0qLSBtb2RlOiBqYXZhc2NyaXB0OyBjLWJhc2ljLW9mZnNldDogNDsgaW5kZW50LXRhYnMtbW9kZTogbmlsIC0qLSAqL1xuXG4vLyBcbi8vIERhbGxpYW5jZSBHZW5vbWUgRXhwbG9yZXJcbi8vIChjKSBUaG9tYXMgRG93biAyMDA2LTIwMTNcbi8vXG4vLyBzZXNzaW9uLmpzXG4vL1xuXG5cInVzZSBzdHJpY3RcIjtcblxuaWYgKHR5cGVvZihyZXF1aXJlKSAhPSAndW5kZWZpbmVkJykge1xuICAgIHZhciBicm93c2VyID0gcmVxdWlyZSgnLi9jYnJvd3NlcicpO1xuICAgIHZhciBCcm93c2VyID0gYnJvd3Nlci5Ccm93c2VyO1xuXG4gICAgdmFyIHNjID0gcmVxdWlyZSgnLi9zb3VyY2Vjb21wYXJlJyk7XG4gICAgdmFyIHNvdXJjZURhdGFVUkkgPSBzYy5zb3VyY2VEYXRhVVJJO1xuICAgIHZhciBzb3VyY2VzQXJlRXF1YWwgPSBzYy5zb3VyY2VzQXJlRXF1YWw7XG5cbiAgICB2YXIgVkVSU0lPTiA9IHJlcXVpcmUoJy4vdmVyc2lvbicpO1xuXG4gICAgdmFyIHV0aWxzID0gcmVxdWlyZSgnLi91dGlscycpO1xuICAgIHZhciBtaW5pSlNPTmlmeSA9IHV0aWxzLm1pbmlKU09OaWZ5O1xuXG4gICAgdmFyIHNoYTEgPSByZXF1aXJlKCcuL3NoYTEnKTtcbiAgICB2YXIgaGV4X3NoYTEgPSBzaGExLmhleF9zaGExO1xufVxuXG5Ccm93c2VyLnByb3RvdHlwZS5udWtlU3RhdHVzID0gZnVuY3Rpb24oKSB7XG4gICAgZGVsZXRlIGxvY2FsU3RvcmFnZVsnZGFsbGlhbmNlLicgKyB0aGlzLmNvb2tpZUtleSArICcudmlldy1jaHInXTtcbiAgICBkZWxldGUgbG9jYWxTdG9yYWdlWydkYWxsaWFuY2UuJyArIHRoaXMuY29va2llS2V5ICsgJy52aWV3LXN0YXJ0J107XG4gICAgZGVsZXRlIGxvY2FsU3RvcmFnZVsnZGFsbGlhbmNlLicgKyB0aGlzLmNvb2tpZUtleSArICcudmlldy1lbmQnXTtcbiAgICBkZWxldGUgbG9jYWxTdG9yYWdlWydkYWxsaWFuY2UuJyArIHRoaXMuY29va2llS2V5ICsgJy5jdXJyZW50LXNlcS1sZW5ndGgnXTtcbiAgICBkZWxldGUgbG9jYWxTdG9yYWdlWydkYWxsaWFuY2UuJyArIHRoaXMuY29va2llS2V5ICsgJy5zaG93aW5nLWFsdC16b29tJ107XG4gICAgZGVsZXRlIGxvY2FsU3RvcmFnZVsnZGFsbGlhbmNlLicgKyB0aGlzLmNvb2tpZUtleSArICcuc2F2ZWQtem9vbSddO1xuXG4gICAgZGVsZXRlIGxvY2FsU3RvcmFnZVsnZGFsbGlhbmNlLicgKyB0aGlzLmNvb2tpZUtleSArICcuc291cmNlcyddO1xuICAgIGRlbGV0ZSBsb2NhbFN0b3JhZ2VbJ2RhbGxpYW5jZS4nICsgdGhpcy5jb29raWVLZXkgKyAnLmh1YnMnXTtcbiAgICBkZWxldGUgbG9jYWxTdG9yYWdlWydkYWxsaWFuY2UuJyArIHRoaXMuY29va2llS2V5ICsgJy52ZXJzaW9uJ107XG5cbiAgICBkZWxldGUgbG9jYWxTdG9yYWdlWydkYWxsaWFuY2UuJyArIHRoaXMuY29va2llS2V5ICsgJy5yZXZlcnNlLXNjcm9sbGluZyddO1xuICAgIGRlbGV0ZSBsb2NhbFN0b3JhZ2VbJ2RhbGxpYW5jZS4nICsgdGhpcy5jb29raWVLZXkgKyAnLnJldmVyc2Uta2V5LXNjcm9sbGluZyddO1xuICAgIGRlbGV0ZSBsb2NhbFN0b3JhZ2VbJ2RhbGxpYW5jZS4nICsgdGhpcy5jb29raWVLZXkgKyAnLnJ1bGVyLWxvY2F0aW9uJ107XG59XG5cbkJyb3dzZXIucHJvdG90eXBlLnN0b3JlU3RhdHVzID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5zdG9yZVZpZXdTdGF0dXMoKTtcbiAgICB0aGlzLnN0b3JlVGllclN0YXR1cygpO1xufVxuXG5Ccm93c2VyLnByb3RvdHlwZS5zdG9yZVZpZXdTdGF0dXMgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoIXRoaXMuY29va2llS2V5IHx8IHRoaXMubm9QZXJzaXN0IHx8IHRoaXMubm9QZXJzaXN0Vmlldykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbG9jYWxTdG9yYWdlWydkYWxsaWFuY2UuJyArIHRoaXMuY29va2llS2V5ICsgJy52aWV3LWNociddID0gdGhpcy5jaHI7XG4gICAgbG9jYWxTdG9yYWdlWydkYWxsaWFuY2UuJyArIHRoaXMuY29va2llS2V5ICsgJy52aWV3LXN0YXJ0J10gPSB0aGlzLnZpZXdTdGFydHwwO1xuICAgIGxvY2FsU3RvcmFnZVsnZGFsbGlhbmNlLicgKyB0aGlzLmNvb2tpZUtleSArICcudmlldy1lbmQnXSA9IHRoaXMudmlld0VuZHwwXG4gICAgbG9jYWxTdG9yYWdlWydkYWxsaWFuY2UuJyArIHRoaXMuY29va2llS2V5ICsgJy5zaG93aW5nLWFsdC16b29tJ10gPSAnJyArIHRoaXMuaXNTbmFwWm9vbWluZztcbiAgICBsb2NhbFN0b3JhZ2VbJ2RhbGxpYW5jZS4nICsgdGhpcy5jb29raWVLZXkgKyAnLnNhdmVkLXpvb20nXSA9IHRoaXMuc2F2ZWRab29tO1xuICAgIGlmICh0aGlzLmN1cnJlbnRTZXFNYXgpIHtcblx0ICAgbG9jYWxTdG9yYWdlWydkYWxsaWFuY2UuJyArIHRoaXMuY29va2llS2V5ICsgJy5jdXJyZW50LXNlcS1sZW5ndGgnXSA9IHRoaXMuY3VycmVudFNlcU1heDtcbiAgICB9XG59XG5cblxuQnJvd3Nlci5wcm90b3R5cGUuc3RvcmVUaWVyU3RhdHVzID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKCF0aGlzLmNvb2tpZUtleSB8fCB0aGlzLm5vUGVyc2lzdCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIGN1cnJlbnRTb3VyY2VMaXN0ID0gW107XG4gICAgZm9yICh2YXIgdCA9IDA7IHQgPCB0aGlzLnRpZXJzLmxlbmd0aDsgKyt0KSB7XG4gICAgICAgIHZhciB0dCA9IHRoaXMudGllcnNbdF07XG4gICAgICAgIHZhciB0cyA9IHR0LmRhc1NvdXJjZTtcbiAgICAgICAgaWYgKCF0cy5ub1BlcnNpc3QpIHtcbiAgICAgICAgICAgIGN1cnJlbnRTb3VyY2VMaXN0LnB1c2goe3NvdXJjZTogdHQuZGFzU291cmNlLCBjb25maWc6IHR0LmNvbmZpZyB8fCB7fX0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGxvY2FsU3RvcmFnZVsnZGFsbGlhbmNlLicgKyB0aGlzLmNvb2tpZUtleSArICcuc291cmNlcyddID0gSlNPTi5zdHJpbmdpZnkoY3VycmVudFNvdXJjZUxpc3QpO1xuXG5cbiAgICB2YXIgY292ZXJlZEh1YlVSTHMgPSB7fTtcbiAgICB2YXIgY3VycmVudEh1Ykxpc3QgPSBbXTtcbiAgICBmb3IgKHZhciBoaSA9IDA7IGhpIDwgdGhpcy5odWJPYmplY3RzLmxlbmd0aDsgKytoaSkge1xuICAgICAgICB2YXIgdGRiID0gdGhpcy5odWJPYmplY3RzW2hpXTtcbiAgICAgICAgdmFyIGhjID0ge3VybDogdGRiLmh1Yi51cmwsIGdlbm9tZTogdGRiLmdlbm9tZX07XG4gICAgICAgIGlmICh0ZGIuY3JlZGVudGlhbHMpXG4gICAgICAgICAgICBoYy5jcmVkZW50aWFscyA9IHRkYi5jcmVkZW50aWFscztcbiAgICAgICAgaWYgKHRkYi5tYXBwaW5nKVxuICAgICAgICAgICAgaGMubWFwcGluZyA9IHRkYi5tYXBwaW5nO1xuICAgICAgICBjb3ZlcmVkSHViVVJMc1toYy51cmxdID0gdHJ1ZTtcbiAgICAgICAgY3VycmVudEh1Ykxpc3QucHVzaChoYyk7XG4gICAgfVxuXG4gICAgLy8gTmVlZGVkIHRvIGhhbmRsZSBodWJzIHRoYXQgZmFpbGVkIHRvIGNvbm5lY3QsIG9yIGh1YnMgdGhhdCBoYXZlbid0XG4gICAgLy8gY29ubmVjdGVkIHlldCB3aGVuIHdlJ3JlIGNhbGxlZCBzb29uIGFmdGVyIHN0YXJ0dXAuXG4gICAgZm9yICh2YXIgaGkgPSAwOyBoaSA8IHRoaXMuaHVicy5sZW5ndGg7ICsraGkpIHtcbiAgICAgICAgdmFyIGhjID0gdGhpcy5odWJzW2hpXTtcbiAgICAgICAgaWYgKHR5cGVvZiBoYyA9PT0gJ3N0cmluZycpXG4gICAgICAgICAgICBoYyA9IHt1cmw6IGhjfTtcbiAgICAgICAgaWYgKCFjb3ZlcmVkSHViVVJMc1toYy51cmxdKVxuICAgICAgICAgICAgY3VycmVudEh1Ykxpc3QucHVzaChoYyk7XG4gICAgfVxuXG4gICAgbG9jYWxTdG9yYWdlWydkYWxsaWFuY2UuJyArIHRoaXMuY29va2llS2V5ICsgJy5odWJzJ10gPSBKU09OLnN0cmluZ2lmeShjdXJyZW50SHViTGlzdCk7XG5cbiAgICBsb2NhbFN0b3JhZ2VbJ2RhbGxpYW5jZS4nICsgdGhpcy5jb29raWVLZXkgKyAnLnJldmVyc2Utc2Nyb2xsaW5nJ10gPSB0aGlzLnJldmVyc2VTY3JvbGxpbmc7XG4gICAgbG9jYWxTdG9yYWdlWydkYWxsaWFuY2UuJyArIHRoaXMuY29va2llS2V5ICsgJy5yZXZlcnNlLWtleS1zY3JvbGxpbmcnXSA9IHRoaXMucmV2ZXJzZUtleVNjcm9sbGluZztcbiAgICBsb2NhbFN0b3JhZ2VbJ2RhbGxpYW5jZS4nICsgdGhpcy5jb29raWVLZXkgKyAnLnNpbmdsZS1iYXNlLWhpZ2hsaWdodCddID0gdGhpcy5zaW5nbGVCYXNlSGlnaGxpZ2h0O1xuICAgIGxvY2FsU3RvcmFnZVsnZGFsbGlhbmNlLicgKyB0aGlzLmNvb2tpZUtleSArICcucnVsZXItbG9jYXRpb24nXSA9IHRoaXMucnVsZXJMb2NhdGlvbjtcblxuICAgIGxvY2FsU3RvcmFnZVsnZGFsbGlhbmNlLicgKyB0aGlzLmNvb2tpZUtleSArICcuZXhwb3J0LXJ1bGVyJ10gPSB0aGlzLmV4cG9ydFJ1bGVyO1xuICAgIGxvY2FsU3RvcmFnZVsnZGFsbGlhbmNlLicgKyB0aGlzLmNvb2tpZUtleSArICcuZXhwb3J0LWhpZ2hsaWdodHMnXSA9IHRoaXMuZXhwb3J0SGlnaGxpZ2h0cztcbiAgICBcbiAgICBsb2NhbFN0b3JhZ2VbJ2RhbGxpYW5jZS4nICsgdGhpcy5jb29raWVLZXkgKyAnLnZlcnNpb24nXSA9IFZFUlNJT04uQ09ORklHO1xufVxuXG5Ccm93c2VyLnByb3RvdHlwZS5yZXN0b3JlU3RhdHVzID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMubm9QZXJzaXN0KVxuICAgICAgICByZXR1cm47XG4gICAgXG4gICAgdmFyIHN0b3JlZENvbmZpZ1ZlcnNpb24gPSBsb2NhbFN0b3JhZ2VbJ2RhbGxpYW5jZS4nICsgdGhpcy5jb29raWVLZXkgKyAnLnZlcnNpb24nXTtcbiAgICBpZiAoc3RvcmVkQ29uZmlnVmVyc2lvbikge1xuICAgICAgICBzdG9yZWRDb25maWdWZXJzaW9uID0gc3RvcmVkQ29uZmlnVmVyc2lvbnwwO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHN0b3JlZENvbmZpZ1ZlcnNpb24gPSAtMTAwO1xuICAgIH1cbiAgICBpZiAoVkVSU0lPTi5DT05GSUcgIT0gc3RvcmVkQ29uZmlnVmVyc2lvbikge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIHN0b3JlZENvbmZpZ0hhc2ggPSBsb2NhbFN0b3JhZ2VbJ2RhbGxpYW5jZS4nICsgdGhpcy5jb29raWVLZXkgKyAnLmNvbmZpZ0hhc2gnXSB8fCAnJztcbiAgICB2YXIgcGFnZUNvbmZpZ0hhc2ggPSBoZXhfc2hhMShtaW5pSlNPTmlmeSh7XG4gICAgICAgIHNvdXJjZXM6IHRoaXMuc291cmNlcyxcbiAgICAgICAgaHViczogdGhpcy5odWJzLFxuICAgICAgICBydWxlckxvY2F0aW9uOiB0aGlzLnJ1bGVyTG9jYXRpb25cbiAgICB9KSk7XG4gICAgaWYgKHBhZ2VDb25maWdIYXNoICE9IHN0b3JlZENvbmZpZ0hhc2gpIHtcbiAgICAgICAgbG9jYWxTdG9yYWdlWydkYWxsaWFuY2UuJyArIHRoaXMuY29va2llS2V5ICsgJy5jb25maWdIYXNoJ10gPSBwYWdlQ29uZmlnSGFzaDtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBkZWZhdWx0U291cmNlc0J5VVJJID0ge307XG4gICAgZm9yICh2YXIgc2kgPSAwOyBzaSA8IHRoaXMuc291cmNlcy5sZW5ndGg7ICsrc2kpIHtcbiAgICAgICAgdmFyIHNvdXJjZSA9IHRoaXMuc291cmNlc1tzaV07XG4gICAgICAgIGlmICghc291cmNlKVxuICAgICAgICAgICAgY29udGludWU7XG5cbiAgICAgICAgdmFyIHVyaSA9IHNvdXJjZURhdGFVUkkoc291cmNlKTtcbiAgICAgICAgdmFyIHVsID0gZGVmYXVsdFNvdXJjZXNCeVVSSVt1cmldO1xuICAgICAgICBpZiAoIXVsKVxuICAgICAgICAgICAgZGVmYXVsdFNvdXJjZXNCeVVSSVt1cmldID0gdWwgPSBbXTtcbiAgICAgICAgdWwucHVzaChzb3VyY2UpO1xuICAgICAgICBcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMubm9QZXJzaXN0Vmlldykge1xuICAgICAgICB2YXIgcUNociA9IGxvY2FsU3RvcmFnZVsnZGFsbGlhbmNlLicgKyB0aGlzLmNvb2tpZUtleSArICcudmlldy1jaHInXTtcbiAgICAgICAgdmFyIHFNaW4gPSBsb2NhbFN0b3JhZ2VbJ2RhbGxpYW5jZS4nICsgdGhpcy5jb29raWVLZXkgKyAnLnZpZXctc3RhcnQnXXwwO1xuICAgICAgICB2YXIgcU1heCA9IGxvY2FsU3RvcmFnZVsnZGFsbGlhbmNlLicgKyB0aGlzLmNvb2tpZUtleSArICcudmlldy1lbmQnXXwwO1xuICAgICAgICBpZiAocUNociAmJiBxTWluICYmIHFNYXgpIHtcbiAgICAgICAgXHR0aGlzLmNociA9IHFDaHI7XG4gICAgICAgIFx0dGhpcy52aWV3U3RhcnQgPSBxTWluO1xuICAgICAgICBcdHRoaXMudmlld0VuZCA9IHFNYXg7XG4gICAgICAgIFx0XG4gICAgICAgIFx0dmFyIGNzbSA9IGxvY2FsU3RvcmFnZVsnZGFsbGlhbmNlLicgKyB0aGlzLmNvb2tpZUtleSArICcuY3VycmVudC1zZXEtbGVuZ3RoJ107XG4gICAgICAgIFx0aWYgKGNzbSkge1xuICAgICAgICBcdCAgICB0aGlzLmN1cnJlbnRTZXFNYXggPSBjc218MDtcbiAgICAgICAgXHR9XG5cbiAgICAgICAgICAgIHRoaXMuaXNTbmFwWm9vbWluZyA9IChsb2NhbFN0b3JhZ2VbJ2RhbGxpYW5jZS4nICsgdGhpcy5jb29raWVLZXkgKyAnLnNob3dpbmctYWx0LXpvb20nXSkgPT0gJ3RydWUnO1xuXG4gICAgICAgICAgICB2YXIgc3ogPSBwYXJzZUZsb2F0KGxvY2FsU3RvcmFnZVsnZGFsbGlhbmNlLicgKyB0aGlzLmNvb2tpZUtleSArICcuc2F2ZWQtem9vbSddKTtcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygc3ogPT09ICdudW1iZXInICYmICFpc05hTihzeikpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNhdmVkWm9vbSA9IHN6O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgdmFyIHJzID0gbG9jYWxTdG9yYWdlWydkYWxsaWFuY2UuJyArIHRoaXMuY29va2llS2V5ICsgJy5yZXZlcnNlLXNjcm9sbGluZyddO1xuICAgIHRoaXMucmV2ZXJzZVNjcm9sbGluZyA9IChycyAmJiBycyA9PSAndHJ1ZScpO1xuICAgIHZhciBya3MgPSBsb2NhbFN0b3JhZ2VbJ2RhbGxpYW5jZS4nICsgdGhpcy5jb29raWVLZXkgKyAnLnJldmVyc2Uta2V5LXNjcm9sbGluZyddO1xuICAgIHRoaXMucmV2ZXJzZUtleVNjcm9sbGluZyA9IChya3MgJiYgcmtzID09ICd0cnVlJyk7XG4gICAgdmFyIHNiaCA9IGxvY2FsU3RvcmFnZVsnZGFsbGlhbmNlLicgKyB0aGlzLmNvb2tpZUtleSArICcuc2luZ2xlLWJhc2UtaGlnaGxpZ2h0J107XG4gICAgdGhpcy5zaW5nbGVCYXNlSGlnaGxpZ2h0ID0gKHNiaCAmJiBzYmggPT0gJ3RydWUnKTtcbiBcbiAgICB2YXIgcmwgPSBsb2NhbFN0b3JhZ2VbJ2RhbGxpYW5jZS4nICsgdGhpcy5jb29raWVLZXkgKyAnLnJ1bGVyLWxvY2F0aW9uJ107XG4gICAgaWYgKHJsKVxuICAgICAgICB0aGlzLnJ1bGVyTG9jYXRpb24gPSBybDtcblxuICAgIHZhciB4ID0gbG9jYWxTdG9yYWdlWydkYWxsaWFuY2UuJyArIHRoaXMuY29va2llS2V5ICsgJy5leHBvcnQtcnVsZXInXTtcbiAgICBpZiAoeClcbiAgICAgICAgdGhpcy5leHBvcnRSdWxlciA9ICh4ID09PSAndHJ1ZScpO1xuICAgIHZhciB4ID0gbG9jYWxTdG9yYWdlWydkYWxsaWFuY2UuJyArIHRoaXMuY29va2llS2V5ICsgJy5leHBvcnQtaGlnaGxpZ2h0cyddO1xuICAgIGlmICh4KVxuICAgICAgICB0aGlzLmV4cG9ydEhpZ2hsaWdodHMgPSAoeCA9PT0gJ3RydWUnKTtcblxuICAgIHZhciBzb3VyY2VTdHIgPSBsb2NhbFN0b3JhZ2VbJ2RhbGxpYW5jZS4nICsgdGhpcy5jb29raWVLZXkgKyAnLnNvdXJjZXMnXTtcbiAgICBpZiAoc291cmNlU3RyKSB7XG5cdCAgICB2YXIgc3RvcmVkU291cmNlcyA9IEpTT04ucGFyc2Uoc291cmNlU3RyKTtcbiAgICAgICAgdGhpcy5zb3VyY2VzID0gW107XG4gICAgICAgIHRoaXMucmVzdG9yZWRDb25maWdzID0gW107XG4gICAgICAgIGZvciAodmFyIHNpID0gMDsgc2kgPCBzdG9yZWRTb3VyY2VzLmxlbmd0aDsgKytzaSkge1xuICAgICAgICAgICAgdmFyIHNvdXJjZSA9IHRoaXMuc291cmNlc1tzaV0gPSBzdG9yZWRTb3VyY2VzW3NpXS5zb3VyY2U7XG4gICAgICAgICAgICB0aGlzLnJlc3RvcmVkQ29uZmlnc1tzaV0gPSBzdG9yZWRTb3VyY2VzW3NpXS5jb25maWc7XG4gICAgICAgICAgICB2YXIgdXJpID0gc291cmNlRGF0YVVSSShzb3VyY2UpO1xuICAgICAgICAgICAgdmFyIHVsID0gZGVmYXVsdFNvdXJjZXNCeVVSSVt1cmldIHx8IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgb3NpID0gMDsgb3NpIDwgdWwubGVuZ3RoOyArK29zaSkgeyAgICBcbiAgICAgICAgICAgICAgICB2YXIgb2xkU291cmNlID0gdWxbb3NpXTtcbiAgICAgICAgICAgICAgICBpZiAoc291cmNlc0FyZUVxdWFsKHNvdXJjZSwgb2xkU291cmNlKSkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrIGluIG9sZFNvdXJjZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9sZFNvdXJjZS5oYXNPd25Qcm9wZXJ0eShrKSAmJiBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAodHlwZW9mKG9sZFNvdXJjZVtrXSkgPT09ICdmdW5jdGlvbicgfHwgb2xkU291cmNlW2tdIGluc3RhbmNlb2YgQmxvYikpXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlW2tdID0gb2xkU291cmNlW2tdO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgdmFyIGh1YlN0ciA9IGxvY2FsU3RvcmFnZVsnZGFsbGlhbmNlLicgKyB0aGlzLmNvb2tpZUtleSArICcuaHVicyddO1xuICAgIGlmIChodWJTdHIpIHtcbiAgICAgICAgdGhpcy5odWJzID0gSlNPTi5wYXJzZShodWJTdHIpO1xuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xufVxuXG5Ccm93c2VyLnByb3RvdHlwZS5yZXNldCA9IGZ1bmN0aW9uKCkge1xuICAgIGZvciAodmFyIGkgPSB0aGlzLnRpZXJzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgdGhpcy5yZW1vdmVUaWVyKHtpbmRleDogaX0sIHRydWUpO1xuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuZGVmYXVsdFNvdXJjZXMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdmFyIHMgPSB0aGlzLmRlZmF1bHRTb3VyY2VzW2ldO1xuICAgICAgICBpZiAoIXMuZGlzYWJsZWQpIFxuICAgICAgICAgICAgdGhpcy5hZGRUaWVyKHRoaXMuZGVmYXVsdFNvdXJjZXNbaV0pO1xuICAgIH1cblxuICAgIHRoaXMuaGlnaGxpZ2h0cy5zcGxpY2UoMCwgdGhpcy5oaWdobGlnaHRzLmxlbmd0aCk7XG5cbiAgICB0aGlzLnNldExvY2F0aW9uKHRoaXMuZGVmYXVsdENociwgdGhpcy5kZWZhdWx0U3RhcnQsIHRoaXMuZGVmYXVsdEVuZCk7XG59XG4iLCIvKlxyXG4gKiBBIEphdmFTY3JpcHQgaW1wbGVtZW50YXRpb24gb2YgdGhlIFNlY3VyZSBIYXNoIEFsZ29yaXRobSwgU0hBLTEsIGFzIGRlZmluZWRcclxuICogaW4gRklQUyAxODAtMVxyXG4gKiBWZXJzaW9uIDIuMiBDb3B5cmlnaHQgUGF1bCBKb2huc3RvbiAyMDAwIC0gMjAwOS5cclxuICogT3RoZXIgY29udHJpYnV0b3JzOiBHcmVnIEhvbHQsIEFuZHJldyBLZXBlcnQsIFlkbmFyLCBMb3N0aW5ldFxyXG4gKiBEaXN0cmlidXRlZCB1bmRlciB0aGUgQlNEIExpY2Vuc2VcclxuICogU2VlIGh0dHA6Ly9wYWpob21lLm9yZy51ay9jcnlwdC9tZDUgZm9yIGRldGFpbHMuXHJcbiAqL1xyXG5cclxuIFwidXNlIHN0cmljdFwiO1xyXG5cclxuLypcclxuICogQ29uZmlndXJhYmxlIHZhcmlhYmxlcy4gWW91IG1heSBuZWVkIHRvIHR3ZWFrIHRoZXNlIHRvIGJlIGNvbXBhdGlibGUgd2l0aFxyXG4gKiB0aGUgc2VydmVyLXNpZGUsIGJ1dCB0aGUgZGVmYXVsdHMgd29yayBpbiBtb3N0IGNhc2VzLlxyXG4gKi9cclxudmFyIGhleGNhc2UgPSAwOyAgLyogaGV4IG91dHB1dCBmb3JtYXQuIDAgLSBsb3dlcmNhc2U7IDEgLSB1cHBlcmNhc2UgICAgICAgICovXHJcbnZhciBiNjRwYWQgID0gXCJcIjsgLyogYmFzZS02NCBwYWQgY2hhcmFjdGVyLiBcIj1cIiBmb3Igc3RyaWN0IFJGQyBjb21wbGlhbmNlICAgKi9cclxuXHJcbi8qXHJcbiAqIFRoZXNlIGFyZSB0aGUgZnVuY3Rpb25zIHlvdSdsbCB1c3VhbGx5IHdhbnQgdG8gY2FsbFxyXG4gKiBUaGV5IHRha2Ugc3RyaW5nIGFyZ3VtZW50cyBhbmQgcmV0dXJuIGVpdGhlciBoZXggb3IgYmFzZS02NCBlbmNvZGVkIHN0cmluZ3NcclxuICovXHJcbmZ1bmN0aW9uIGhleF9zaGExKHMpICAgIHsgcmV0dXJuIHJzdHIyaGV4KHJzdHJfc2hhMShzdHIycnN0cl91dGY4KHMpKSk7IH1cclxuZnVuY3Rpb24gYjY0X3NoYTEocykgICAgeyByZXR1cm4gcnN0cjJiNjQocnN0cl9zaGExKHN0cjJyc3RyX3V0ZjgocykpKTsgfVxyXG5mdW5jdGlvbiBhbnlfc2hhMShzLCBlKSB7IHJldHVybiByc3RyMmFueShyc3RyX3NoYTEoc3RyMnJzdHJfdXRmOChzKSksIGUpOyB9XHJcbmZ1bmN0aW9uIGhleF9obWFjX3NoYTEoaywgZClcclxuICB7IHJldHVybiByc3RyMmhleChyc3RyX2htYWNfc2hhMShzdHIycnN0cl91dGY4KGspLCBzdHIycnN0cl91dGY4KGQpKSk7IH1cclxuZnVuY3Rpb24gYjY0X2htYWNfc2hhMShrLCBkKVxyXG4gIHsgcmV0dXJuIHJzdHIyYjY0KHJzdHJfaG1hY19zaGExKHN0cjJyc3RyX3V0ZjgoayksIHN0cjJyc3RyX3V0ZjgoZCkpKTsgfVxyXG5mdW5jdGlvbiBhbnlfaG1hY19zaGExKGssIGQsIGUpXHJcbiAgeyByZXR1cm4gcnN0cjJhbnkocnN0cl9obWFjX3NoYTEoc3RyMnJzdHJfdXRmOChrKSwgc3RyMnJzdHJfdXRmOChkKSksIGUpOyB9XHJcblxyXG4vKlxyXG4gKiBQZXJmb3JtIGEgc2ltcGxlIHNlbGYtdGVzdCB0byBzZWUgaWYgdGhlIFZNIGlzIHdvcmtpbmdcclxuICovXHJcbmZ1bmN0aW9uIHNoYTFfdm1fdGVzdCgpXHJcbntcclxuICByZXR1cm4gaGV4X3NoYTEoXCJhYmNcIikudG9Mb3dlckNhc2UoKSA9PSBcImE5OTkzZTM2NDcwNjgxNmFiYTNlMjU3MTc4NTBjMjZjOWNkMGQ4OWRcIjtcclxufVxyXG5cclxuLypcclxuICogQ2FsY3VsYXRlIHRoZSBTSEExIG9mIGEgcmF3IHN0cmluZ1xyXG4gKi9cclxuZnVuY3Rpb24gcnN0cl9zaGExKHMpXHJcbntcclxuICByZXR1cm4gYmluYjJyc3RyKGJpbmJfc2hhMShyc3RyMmJpbmIocyksIHMubGVuZ3RoICogOCkpO1xyXG59XHJcblxyXG4vKlxyXG4gKiBDYWxjdWxhdGUgdGhlIEhNQUMtU0hBMSBvZiBhIGtleSBhbmQgc29tZSBkYXRhIChyYXcgc3RyaW5ncylcclxuICovXHJcbmZ1bmN0aW9uIHJzdHJfaG1hY19zaGExKGtleSwgZGF0YSlcclxue1xyXG4gIHZhciBia2V5ID0gcnN0cjJiaW5iKGtleSk7XHJcbiAgaWYoYmtleS5sZW5ndGggPiAxNikgYmtleSA9IGJpbmJfc2hhMShia2V5LCBrZXkubGVuZ3RoICogOCk7XHJcblxyXG4gIHZhciBpcGFkID0gQXJyYXkoMTYpLCBvcGFkID0gQXJyYXkoMTYpO1xyXG4gIGZvcih2YXIgaSA9IDA7IGkgPCAxNjsgaSsrKVxyXG4gIHtcclxuICAgIGlwYWRbaV0gPSBia2V5W2ldIF4gMHgzNjM2MzYzNjtcclxuICAgIG9wYWRbaV0gPSBia2V5W2ldIF4gMHg1QzVDNUM1QztcclxuICB9XHJcblxyXG4gIHZhciBoYXNoID0gYmluYl9zaGExKGlwYWQuY29uY2F0KHJzdHIyYmluYihkYXRhKSksIDUxMiArIGRhdGEubGVuZ3RoICogOCk7XHJcbiAgcmV0dXJuIGJpbmIycnN0cihiaW5iX3NoYTEob3BhZC5jb25jYXQoaGFzaCksIDUxMiArIDE2MCkpO1xyXG59XHJcblxyXG4vKlxyXG4gKiBDb252ZXJ0IGEgcmF3IHN0cmluZyB0byBhIGhleCBzdHJpbmdcclxuICovXHJcbmZ1bmN0aW9uIHJzdHIyaGV4KGlucHV0KVxyXG57XHJcbiAgLy8gdHJ5IHsgaGV4Y2FzZSB9IGNhdGNoKGUpIHsgaGV4Y2FzZT0wOyB9XHJcbiAgdmFyIGhleF90YWIgPSBoZXhjYXNlID8gXCIwMTIzNDU2Nzg5QUJDREVGXCIgOiBcIjAxMjM0NTY3ODlhYmNkZWZcIjtcclxuICB2YXIgb3V0cHV0ID0gXCJcIjtcclxuICB2YXIgeDtcclxuICBmb3IodmFyIGkgPSAwOyBpIDwgaW5wdXQubGVuZ3RoOyBpKyspXHJcbiAge1xyXG4gICAgeCA9IGlucHV0LmNoYXJDb2RlQXQoaSk7XHJcbiAgICBvdXRwdXQgKz0gaGV4X3RhYi5jaGFyQXQoKHggPj4+IDQpICYgMHgwRilcclxuICAgICAgICAgICArICBoZXhfdGFiLmNoYXJBdCggeCAgICAgICAgJiAweDBGKTtcclxuICB9XHJcbiAgcmV0dXJuIG91dHB1dDtcclxufVxyXG5cclxuLypcclxuICogQ29udmVydCBhIHJhdyBzdHJpbmcgdG8gYSBiYXNlLTY0IHN0cmluZ1xyXG4gKi9cclxuZnVuY3Rpb24gcnN0cjJiNjQoaW5wdXQpXHJcbntcclxuICAvLyB0cnkgeyBiNjRwYWQgfSBjYXRjaChlKSB7IGI2NHBhZD0nJzsgfVxyXG4gIHZhciB0YWIgPSBcIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky9cIjtcclxuICB2YXIgb3V0cHV0ID0gXCJcIjtcclxuICB2YXIgbGVuID0gaW5wdXQubGVuZ3RoO1xyXG4gIGZvcih2YXIgaSA9IDA7IGkgPCBsZW47IGkgKz0gMylcclxuICB7XHJcbiAgICB2YXIgdHJpcGxldCA9IChpbnB1dC5jaGFyQ29kZUF0KGkpIDw8IDE2KVxyXG4gICAgICAgICAgICAgICAgfCAoaSArIDEgPCBsZW4gPyBpbnB1dC5jaGFyQ29kZUF0KGkrMSkgPDwgOCA6IDApXHJcbiAgICAgICAgICAgICAgICB8IChpICsgMiA8IGxlbiA/IGlucHV0LmNoYXJDb2RlQXQoaSsyKSAgICAgIDogMCk7XHJcbiAgICBmb3IodmFyIGogPSAwOyBqIDwgNDsgaisrKVxyXG4gICAge1xyXG4gICAgICBpZihpICogOCArIGogKiA2ID4gaW5wdXQubGVuZ3RoICogOCkgb3V0cHV0ICs9IGI2NHBhZDtcclxuICAgICAgZWxzZSBvdXRwdXQgKz0gdGFiLmNoYXJBdCgodHJpcGxldCA+Pj4gNiooMy1qKSkgJiAweDNGKTtcclxuICAgIH1cclxuICB9XHJcbiAgcmV0dXJuIG91dHB1dDtcclxufVxyXG5cclxuLypcclxuICogQ29udmVydCBhIHJhdyBzdHJpbmcgdG8gYW4gYXJiaXRyYXJ5IHN0cmluZyBlbmNvZGluZ1xyXG4gKi9cclxuZnVuY3Rpb24gcnN0cjJhbnkoaW5wdXQsIGVuY29kaW5nKVxyXG57XHJcbiAgdmFyIGRpdmlzb3IgPSBlbmNvZGluZy5sZW5ndGg7XHJcbiAgdmFyIHJlbWFpbmRlcnMgPSBBcnJheSgpO1xyXG4gIHZhciBpLCBxLCB4LCBxdW90aWVudDtcclxuXHJcbiAgLyogQ29udmVydCB0byBhbiBhcnJheSBvZiAxNi1iaXQgYmlnLWVuZGlhbiB2YWx1ZXMsIGZvcm1pbmcgdGhlIGRpdmlkZW5kICovXHJcbiAgdmFyIGRpdmlkZW5kID0gQXJyYXkoTWF0aC5jZWlsKGlucHV0Lmxlbmd0aCAvIDIpKTtcclxuICBmb3IoaSA9IDA7IGkgPCBkaXZpZGVuZC5sZW5ndGg7IGkrKylcclxuICB7XHJcbiAgICBkaXZpZGVuZFtpXSA9IChpbnB1dC5jaGFyQ29kZUF0KGkgKiAyKSA8PCA4KSB8IGlucHV0LmNoYXJDb2RlQXQoaSAqIDIgKyAxKTtcclxuICB9XHJcblxyXG4gIC8qXHJcbiAgICogUmVwZWF0ZWRseSBwZXJmb3JtIGEgbG9uZyBkaXZpc2lvbi4gVGhlIGJpbmFyeSBhcnJheSBmb3JtcyB0aGUgZGl2aWRlbmQsXHJcbiAgICogdGhlIGxlbmd0aCBvZiB0aGUgZW5jb2RpbmcgaXMgdGhlIGRpdmlzb3IuIE9uY2UgY29tcHV0ZWQsIHRoZSBxdW90aWVudFxyXG4gICAqIGZvcm1zIHRoZSBkaXZpZGVuZCBmb3IgdGhlIG5leHQgc3RlcC4gV2Ugc3RvcCB3aGVuIHRoZSBkaXZpZGVuZCBpcyB6ZXJvLlxyXG4gICAqIEFsbCByZW1haW5kZXJzIGFyZSBzdG9yZWQgZm9yIGxhdGVyIHVzZS5cclxuICAgKi9cclxuICB3aGlsZShkaXZpZGVuZC5sZW5ndGggPiAwKVxyXG4gIHtcclxuICAgIHF1b3RpZW50ID0gQXJyYXkoKTtcclxuICAgIHggPSAwO1xyXG4gICAgZm9yKGkgPSAwOyBpIDwgZGl2aWRlbmQubGVuZ3RoOyBpKyspXHJcbiAgICB7XHJcbiAgICAgIHggPSAoeCA8PCAxNikgKyBkaXZpZGVuZFtpXTtcclxuICAgICAgcSA9IE1hdGguZmxvb3IoeCAvIGRpdmlzb3IpO1xyXG4gICAgICB4IC09IHEgKiBkaXZpc29yO1xyXG4gICAgICBpZihxdW90aWVudC5sZW5ndGggPiAwIHx8IHEgPiAwKVxyXG4gICAgICAgIHF1b3RpZW50W3F1b3RpZW50Lmxlbmd0aF0gPSBxO1xyXG4gICAgfVxyXG4gICAgcmVtYWluZGVyc1tyZW1haW5kZXJzLmxlbmd0aF0gPSB4O1xyXG4gICAgZGl2aWRlbmQgPSBxdW90aWVudDtcclxuICB9XHJcblxyXG4gIC8qIENvbnZlcnQgdGhlIHJlbWFpbmRlcnMgdG8gdGhlIG91dHB1dCBzdHJpbmcgKi9cclxuICB2YXIgb3V0cHV0ID0gXCJcIjtcclxuICBmb3IoaSA9IHJlbWFpbmRlcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pXHJcbiAgICBvdXRwdXQgKz0gZW5jb2RpbmcuY2hhckF0KHJlbWFpbmRlcnNbaV0pO1xyXG5cclxuICAvKiBBcHBlbmQgbGVhZGluZyB6ZXJvIGVxdWl2YWxlbnRzICovXHJcbiAgdmFyIGZ1bGxfbGVuZ3RoID0gTWF0aC5jZWlsKGlucHV0Lmxlbmd0aCAqIDggL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoTWF0aC5sb2coZW5jb2RpbmcubGVuZ3RoKSAvIE1hdGgubG9nKDIpKSlcclxuICBmb3IoaSA9IG91dHB1dC5sZW5ndGg7IGkgPCBmdWxsX2xlbmd0aDsgaSsrKVxyXG4gICAgb3V0cHV0ID0gZW5jb2RpbmdbMF0gKyBvdXRwdXQ7XHJcblxyXG4gIHJldHVybiBvdXRwdXQ7XHJcbn1cclxuXHJcbi8qXHJcbiAqIEVuY29kZSBhIHN0cmluZyBhcyB1dGYtOC5cclxuICogRm9yIGVmZmljaWVuY3ksIHRoaXMgYXNzdW1lcyB0aGUgaW5wdXQgaXMgdmFsaWQgdXRmLTE2LlxyXG4gKi9cclxuZnVuY3Rpb24gc3RyMnJzdHJfdXRmOChpbnB1dClcclxue1xyXG4gIHZhciBvdXRwdXQgPSBcIlwiO1xyXG4gIHZhciBpID0gLTE7XHJcbiAgdmFyIHgsIHk7XHJcblxyXG4gIHdoaWxlKCsraSA8IGlucHV0Lmxlbmd0aClcclxuICB7XHJcbiAgICAvKiBEZWNvZGUgdXRmLTE2IHN1cnJvZ2F0ZSBwYWlycyAqL1xyXG4gICAgeCA9IGlucHV0LmNoYXJDb2RlQXQoaSk7XHJcbiAgICB5ID0gaSArIDEgPCBpbnB1dC5sZW5ndGggPyBpbnB1dC5jaGFyQ29kZUF0KGkgKyAxKSA6IDA7XHJcbiAgICBpZigweEQ4MDAgPD0geCAmJiB4IDw9IDB4REJGRiAmJiAweERDMDAgPD0geSAmJiB5IDw9IDB4REZGRilcclxuICAgIHtcclxuICAgICAgeCA9IDB4MTAwMDAgKyAoKHggJiAweDAzRkYpIDw8IDEwKSArICh5ICYgMHgwM0ZGKTtcclxuICAgICAgaSsrO1xyXG4gICAgfVxyXG5cclxuICAgIC8qIEVuY29kZSBvdXRwdXQgYXMgdXRmLTggKi9cclxuICAgIGlmKHggPD0gMHg3RilcclxuICAgICAgb3V0cHV0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoeCk7XHJcbiAgICBlbHNlIGlmKHggPD0gMHg3RkYpXHJcbiAgICAgIG91dHB1dCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4QzAgfCAoKHggPj4+IDYgKSAmIDB4MUYpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDgwIHwgKCB4ICAgICAgICAgJiAweDNGKSk7XHJcbiAgICBlbHNlIGlmKHggPD0gMHhGRkZGKVxyXG4gICAgICBvdXRwdXQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZSgweEUwIHwgKCh4ID4+PiAxMikgJiAweDBGKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHg4MCB8ICgoeCA+Pj4gNiApICYgMHgzRiksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4ODAgfCAoIHggICAgICAgICAmIDB4M0YpKTtcclxuICAgIGVsc2UgaWYoeCA8PSAweDFGRkZGRilcclxuICAgICAgb3V0cHV0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoMHhGMCB8ICgoeCA+Pj4gMTgpICYgMHgwNyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4ODAgfCAoKHggPj4+IDEyKSAmIDB4M0YpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDgwIHwgKCh4ID4+PiA2ICkgJiAweDNGKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHg4MCB8ICggeCAgICAgICAgICYgMHgzRikpO1xyXG4gIH1cclxuICByZXR1cm4gb3V0cHV0O1xyXG59XHJcblxyXG4vKlxyXG4gKiBFbmNvZGUgYSBzdHJpbmcgYXMgdXRmLTE2XHJcbiAqL1xyXG5mdW5jdGlvbiBzdHIycnN0cl91dGYxNmxlKGlucHV0KVxyXG57XHJcbiAgdmFyIG91dHB1dCA9IFwiXCI7XHJcbiAgZm9yKHZhciBpID0gMDsgaSA8IGlucHV0Lmxlbmd0aDsgaSsrKVxyXG4gICAgb3V0cHV0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoIGlucHV0LmNoYXJDb2RlQXQoaSkgICAgICAgICYgMHhGRixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChpbnB1dC5jaGFyQ29kZUF0KGkpID4+PiA4KSAmIDB4RkYpO1xyXG4gIHJldHVybiBvdXRwdXQ7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHN0cjJyc3RyX3V0ZjE2YmUoaW5wdXQpXHJcbntcclxuICB2YXIgb3V0cHV0ID0gXCJcIjtcclxuICBmb3IodmFyIGkgPSAwOyBpIDwgaW5wdXQubGVuZ3RoOyBpKyspXHJcbiAgICBvdXRwdXQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZSgoaW5wdXQuY2hhckNvZGVBdChpKSA+Pj4gOCkgJiAweEZGLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0LmNoYXJDb2RlQXQoaSkgICAgICAgICYgMHhGRik7XHJcbiAgcmV0dXJuIG91dHB1dDtcclxufVxyXG5cclxuLypcclxuICogQ29udmVydCBhIHJhdyBzdHJpbmcgdG8gYW4gYXJyYXkgb2YgYmlnLWVuZGlhbiB3b3Jkc1xyXG4gKiBDaGFyYWN0ZXJzID4yNTUgaGF2ZSB0aGVpciBoaWdoLWJ5dGUgc2lsZW50bHkgaWdub3JlZC5cclxuICovXHJcbmZ1bmN0aW9uIHJzdHIyYmluYihpbnB1dClcclxue1xyXG4gIHZhciBvdXRwdXQgPSBBcnJheShpbnB1dC5sZW5ndGggPj4gMik7XHJcbiAgZm9yKHZhciBpID0gMDsgaSA8IG91dHB1dC5sZW5ndGg7IGkrKylcclxuICAgIG91dHB1dFtpXSA9IDA7XHJcbiAgZm9yKHZhciBpID0gMDsgaSA8IGlucHV0Lmxlbmd0aCAqIDg7IGkgKz0gOClcclxuICAgIG91dHB1dFtpPj41XSB8PSAoaW5wdXQuY2hhckNvZGVBdChpIC8gOCkgJiAweEZGKSA8PCAoMjQgLSBpICUgMzIpO1xyXG4gIHJldHVybiBvdXRwdXQ7XHJcbn1cclxuXHJcbi8qXHJcbiAqIENvbnZlcnQgYW4gYXJyYXkgb2YgYmlnLWVuZGlhbiB3b3JkcyB0byBhIHN0cmluZ1xyXG4gKi9cclxuZnVuY3Rpb24gYmluYjJyc3RyKGlucHV0KVxyXG57XHJcbiAgdmFyIG91dHB1dCA9IFwiXCI7XHJcbiAgZm9yKHZhciBpID0gMDsgaSA8IGlucHV0Lmxlbmd0aCAqIDMyOyBpICs9IDgpXHJcbiAgICBvdXRwdXQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZSgoaW5wdXRbaT4+NV0gPj4+ICgyNCAtIGkgJSAzMikpICYgMHhGRik7XHJcbiAgcmV0dXJuIG91dHB1dDtcclxufVxyXG5cclxuLypcclxuICogQ2FsY3VsYXRlIHRoZSBTSEEtMSBvZiBhbiBhcnJheSBvZiBiaWctZW5kaWFuIHdvcmRzLCBhbmQgYSBiaXQgbGVuZ3RoXHJcbiAqL1xyXG5mdW5jdGlvbiBiaW5iX3NoYTEoeCwgbGVuKVxyXG57XHJcbiAgLyogYXBwZW5kIHBhZGRpbmcgKi9cclxuICB4W2xlbiA+PiA1XSB8PSAweDgwIDw8ICgyNCAtIGxlbiAlIDMyKTtcclxuICB4WygobGVuICsgNjQgPj4gOSkgPDwgNCkgKyAxNV0gPSBsZW47XHJcblxyXG4gIHZhciB3ID0gQXJyYXkoODApO1xyXG4gIHZhciBhID0gIDE3MzI1ODQxOTM7XHJcbiAgdmFyIGIgPSAtMjcxNzMzODc5O1xyXG4gIHZhciBjID0gLTE3MzI1ODQxOTQ7XHJcbiAgdmFyIGQgPSAgMjcxNzMzODc4O1xyXG4gIHZhciBlID0gLTEwMDk1ODk3NzY7XHJcblxyXG4gIGZvcih2YXIgaSA9IDA7IGkgPCB4Lmxlbmd0aDsgaSArPSAxNilcclxuICB7XHJcbiAgICB2YXIgb2xkYSA9IGE7XHJcbiAgICB2YXIgb2xkYiA9IGI7XHJcbiAgICB2YXIgb2xkYyA9IGM7XHJcbiAgICB2YXIgb2xkZCA9IGQ7XHJcbiAgICB2YXIgb2xkZSA9IGU7XHJcblxyXG4gICAgZm9yKHZhciBqID0gMDsgaiA8IDgwOyBqKyspXHJcbiAgICB7XHJcbiAgICAgIGlmKGogPCAxNikgd1tqXSA9IHhbaSArIGpdO1xyXG4gICAgICBlbHNlIHdbal0gPSBiaXRfcm9sKHdbai0zXSBeIHdbai04XSBeIHdbai0xNF0gXiB3W2otMTZdLCAxKTtcclxuICAgICAgdmFyIHQgPSBzYWZlX2FkZChzYWZlX2FkZChiaXRfcm9sKGEsIDUpLCBzaGExX2Z0KGosIGIsIGMsIGQpKSxcclxuICAgICAgICAgICAgICAgICAgICAgICBzYWZlX2FkZChzYWZlX2FkZChlLCB3W2pdKSwgc2hhMV9rdChqKSkpO1xyXG4gICAgICBlID0gZDtcclxuICAgICAgZCA9IGM7XHJcbiAgICAgIGMgPSBiaXRfcm9sKGIsIDMwKTtcclxuICAgICAgYiA9IGE7XHJcbiAgICAgIGEgPSB0O1xyXG4gICAgfVxyXG5cclxuICAgIGEgPSBzYWZlX2FkZChhLCBvbGRhKTtcclxuICAgIGIgPSBzYWZlX2FkZChiLCBvbGRiKTtcclxuICAgIGMgPSBzYWZlX2FkZChjLCBvbGRjKTtcclxuICAgIGQgPSBzYWZlX2FkZChkLCBvbGRkKTtcclxuICAgIGUgPSBzYWZlX2FkZChlLCBvbGRlKTtcclxuICB9XHJcbiAgcmV0dXJuIEFycmF5KGEsIGIsIGMsIGQsIGUpO1xyXG5cclxufVxyXG5cclxuLypcclxuICogUGVyZm9ybSB0aGUgYXBwcm9wcmlhdGUgdHJpcGxldCBjb21iaW5hdGlvbiBmdW5jdGlvbiBmb3IgdGhlIGN1cnJlbnRcclxuICogaXRlcmF0aW9uXHJcbiAqL1xyXG5mdW5jdGlvbiBzaGExX2Z0KHQsIGIsIGMsIGQpXHJcbntcclxuICBpZih0IDwgMjApIHJldHVybiAoYiAmIGMpIHwgKCh+YikgJiBkKTtcclxuICBpZih0IDwgNDApIHJldHVybiBiIF4gYyBeIGQ7XHJcbiAgaWYodCA8IDYwKSByZXR1cm4gKGIgJiBjKSB8IChiICYgZCkgfCAoYyAmIGQpO1xyXG4gIHJldHVybiBiIF4gYyBeIGQ7XHJcbn1cclxuXHJcbi8qXHJcbiAqIERldGVybWluZSB0aGUgYXBwcm9wcmlhdGUgYWRkaXRpdmUgY29uc3RhbnQgZm9yIHRoZSBjdXJyZW50IGl0ZXJhdGlvblxyXG4gKi9cclxuZnVuY3Rpb24gc2hhMV9rdCh0KVxyXG57XHJcbiAgcmV0dXJuICh0IDwgMjApID8gIDE1MTg1MDAyNDkgOiAodCA8IDQwKSA/ICAxODU5Nzc1MzkzIDpcclxuICAgICAgICAgKHQgPCA2MCkgPyAtMTg5NDAwNzU4OCA6IC04OTk0OTc1MTQ7XHJcbn1cclxuXHJcbi8qXHJcbiAqIEFkZCBpbnRlZ2Vycywgd3JhcHBpbmcgYXQgMl4zMi4gVGhpcyB1c2VzIDE2LWJpdCBvcGVyYXRpb25zIGludGVybmFsbHlcclxuICogdG8gd29yayBhcm91bmQgYnVncyBpbiBzb21lIEpTIGludGVycHJldGVycy5cclxuICovXHJcbmZ1bmN0aW9uIHNhZmVfYWRkKHgsIHkpXHJcbntcclxuICB2YXIgbHN3ID0gKHggJiAweEZGRkYpICsgKHkgJiAweEZGRkYpO1xyXG4gIHZhciBtc3cgPSAoeCA+PiAxNikgKyAoeSA+PiAxNikgKyAobHN3ID4+IDE2KTtcclxuICByZXR1cm4gKG1zdyA8PCAxNikgfCAobHN3ICYgMHhGRkZGKTtcclxufVxyXG5cclxuLypcclxuICogQml0d2lzZSByb3RhdGUgYSAzMi1iaXQgbnVtYmVyIHRvIHRoZSBsZWZ0LlxyXG4gKi9cclxuZnVuY3Rpb24gYml0X3JvbChudW0sIGNudClcclxue1xyXG4gIHJldHVybiAobnVtIDw8IGNudCkgfCAobnVtID4+PiAoMzIgLSBjbnQpKTtcclxufVxyXG5cclxuaWYgKHR5cGVvZihtb2R1bGUpICE9PSAndW5kZWZpbmVkJykge1xyXG4gIG1vZHVsZS5leHBvcnRzID0ge1xyXG4gICAgYjY0X3NoYTE6IGI2NF9zaGExLFxyXG4gICAgaGV4X3NoYTE6IGhleF9zaGExXHJcbiAgfVxyXG59XHJcbiIsIi8qIC0qLSBtb2RlOiBqYXZhc2NyaXB0OyBjLWJhc2ljLW9mZnNldDogNDsgaW5kZW50LXRhYnMtbW9kZTogbmlsIC0qLSAqL1xuXG4vLyBcbi8vIERhbGxpYW5jZSBHZW5vbWUgRXhwbG9yZXJcbi8vIChjKSBUaG9tYXMgRG93biAyMDA2LTIwMTNcbi8vXG4vLyBzb3VyY2VhZGFwdGVycy5qc1xuLy9cblxuXCJ1c2Ugc3RyaWN0XCI7XG5cbmlmICh0eXBlb2YocmVxdWlyZSkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgdmFyIGJyb3dzZXIgPSByZXF1aXJlKCcuL2Nicm93c2VyJyk7XG4gICAgdmFyIEJyb3dzZXIgPSBicm93c2VyLkJyb3dzZXI7XG5cbiAgICB2YXIgdGllciA9IHJlcXVpcmUoJy4vdGllcicpO1xuICAgIHZhciBEYXNUaWVyID0gdGllci5EYXNUaWVyO1xuXG4gICAgdmFyIHV0aWxzID0gcmVxdWlyZSgnLi91dGlscycpO1xuICAgIHZhciBBd2FpdGVkID0gdXRpbHMuQXdhaXRlZDtcbiAgICB2YXIgYXJyYXlJbmRleE9mID0gdXRpbHMuYXJyYXlJbmRleE9mO1xuICAgIHZhciBzaGFsbG93Q29weSA9IHV0aWxzLnNoYWxsb3dDb3B5O1xuICAgIHZhciByZXNvbHZlVXJsVG9QYWdlID0gdXRpbHMucmVzb2x2ZVVybFRvUGFnZTtcblxuICAgIHZhciBkYXMgPSByZXF1aXJlKCcuL2RhcycpO1xuICAgIHZhciBEQVNTdHlsZXNoZWV0ID0gZGFzLkRBU1N0eWxlc2hlZXQ7XG4gICAgdmFyIERBU1N0eWxlID0gZGFzLkRBU1N0eWxlO1xuICAgIHZhciBEQVNTb3VyY2UgPSBkYXMuREFTU291cmNlO1xuICAgIHZhciBEQVNTZWdtZW50ID0gZGFzLkRBU1NlZ21lbnQ7XG4gICAgdmFyIERBU0ZlYXR1cmUgPSBkYXMuREFTRmVhdHVyZTtcbiAgICB2YXIgREFTU2VxdWVuY2UgPSBkYXMuREFTU2VxdWVuY2U7XG4gICAgdmFyIERBU0xpbmsgPSBkYXMuREFTTGluaztcblxuICAgIHZhciBiaW4gPSByZXF1aXJlKCcuL2JpbicpO1xuICAgIHZhciBVUkxGZXRjaGFibGUgPSBiaW4uVVJMRmV0Y2hhYmxlO1xuICAgIHZhciBCbG9iRmV0Y2hhYmxlID0gYmluLkJsb2JGZXRjaGFibGU7XG5cbiAgICB2YXIgdHdvQml0ID0gcmVxdWlyZSgnLi90d29CaXQnKTtcbiAgICB2YXIgbWFrZVR3b0JpdCA9IHR3b0JpdC5tYWtlVHdvQml0O1xuXG4gICAgdmFyIGJiaSA9IHJlcXVpcmUoJy4vYmlnd2lnJyk7XG4gICAgdmFyIG1ha2VCd2cgPSBiYmkubWFrZUJ3ZztcblxuICAgIHZhciBiYW0gPSByZXF1aXJlKCcuL2JhbScpO1xuICAgIHZhciBtYWtlQmFtID0gYmFtLm1ha2VCYW07XG4gICAgdmFyIEJhbUZsYWdzID0gYmFtLkJhbUZsYWdzO1xuXG4gICAgdmFyIHNwYW5zID0gcmVxdWlyZSgnLi9zcGFucycpO1xuICAgIHZhciBSYW5nZSA9IHNwYW5zLlJhbmdlO1xuICAgIHZhciB1bmlvbiA9IHNwYW5zLnVuaW9uO1xuXG4gICAgdmFyIHBhcnNlQ2lnYXIgPSByZXF1aXJlKCcuL2NpZ2FyJykucGFyc2VDaWdhcjtcblxuICAgIHZhciBPdmVybGF5RmVhdHVyZVNvdXJjZSA9IHJlcXVpcmUoJy4vb3ZlcmxheScpLk92ZXJsYXlGZWF0dXJlU291cmNlO1xuXG4gICAgdmFyIEpCcm93c2VTdG9yZSA9IHJlcXVpcmUoJy4vamJqc29uJykuSkJyb3dzZVN0b3JlO1xuXG4gICAgdmFyIENoYWluc2V0ID0gcmVxdWlyZSgnLi9jaGFpbnNldCcpLkNoYWluc2V0O1xuXG4gICAgdmFyIHN0eWxlID0gcmVxdWlyZSgnLi9zdHlsZScpO1xuICAgIHZhciBTdHlsZUZpbHRlclNldCA9IHN0eWxlLlN0eWxlRmlsdGVyU2V0O1xuXG4gICAgdmFyIEVuY29kZUZldGNoYWJsZSA9IHJlcXVpcmUoJy4vZW5jb2RlJykuRW5jb2RlRmV0Y2hhYmxlO1xufVxuXG52YXIgX19kYWxsaWFuY2Vfc291cmNlQWRhcHRlckZhY3RvcmllcyA9IHt9O1xuXG5mdW5jdGlvbiBkYWxsaWFuY2VfcmVnaXN0ZXJTb3VyY2VBZGFwdGVyRmFjdG9yeSh0eXBlLCBmYWN0b3J5KSB7XG4gICAgX19kYWxsaWFuY2Vfc291cmNlQWRhcHRlckZhY3Rvcmllc1t0eXBlXSA9IGZhY3Rvcnk7XG59XG5cblxudmFyIF9fZGFsbGlhbmNlX3BhcnNlckZhY3RvcmllcyA9IHt9O1xuXG5mdW5jdGlvbiBkYWxsaWFuY2VfcmVnaXN0ZXJQYXJzZXJGYWN0b3J5KHR5cGUsIGZhY3RvcnkpIHtcbiAgICBfX2RhbGxpYW5jZV9wYXJzZXJGYWN0b3JpZXNbdHlwZV0gPSBmYWN0b3J5O1xufVxuXG5mdW5jdGlvbiBkYWxsaWFuY2VfbWFrZVBhcnNlcih0eXBlKSB7XG4gICAgaWYgKF9fZGFsbGlhbmNlX3BhcnNlckZhY3Rvcmllc1t0eXBlXSkge1xuICAgICAgICByZXR1cm4gX19kYWxsaWFuY2VfcGFyc2VyRmFjdG9yaWVzW3R5cGVdKHR5cGUpO1xuICAgIH1cbn1cblxuXG5EYXNUaWVyLnByb3RvdHlwZS5pbml0U291cmNlcyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciB0aGlzVGllciA9IHRoaXM7XG5cbiAgICB2YXIgc291cmNlcyA9IHRoaXMuYnJvd3Nlci5jcmVhdGVTb3VyY2VzKHRoaXMuZGFzU291cmNlKTtcbiAgICB0aGlzLmZlYXR1cmVTb3VyY2UgPSBzb3VyY2VzLmZlYXR1cmVzIHx8IG5ldyBEdW1teUZlYXR1cmVTb3VyY2UoKTtcbiAgICB0aGlzLnNlcXVlbmNlU291cmNlID0gc291cmNlcy5zZXF1ZW5jZTtcblxuICAgIGlmICh0aGlzLmZlYXR1cmVTb3VyY2UgJiYgdGhpcy5mZWF0dXJlU291cmNlLmFkZENoYW5nZUxpc3RlbmVyKSB7XG4gICAgICAgIHRoaXMuZmVhdHVyZVNvdXJjZS5hZGRDaGFuZ2VMaXN0ZW5lcihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRoaXNUaWVyLmJyb3dzZXIucmVmcmVzaFRpZXIodGhpc1RpZXIpO1xuICAgICAgICB9KTtcbiAgICB9XG59O1xuXG5Ccm93c2VyLnByb3RvdHlwZS5jcmVhdGVTb3VyY2VzID0gZnVuY3Rpb24oY29uZmlnKSB7XG4gICAgdmFyIHNvdXJjZXMgPSB0aGlzLnNvdXJjZUNhY2hlLmdldChjb25maWcpO1xuICAgIGlmIChzb3VyY2VzKVxuICAgICAgICByZXR1cm4gc291cmNlcztcblxuICAgIHZhciBmcywgc3M7XG5cbiAgICBpZiAoY29uZmlnLnRpZXJfdHlwZSA9PSAnc2VxdWVuY2UnIHx8IGNvbmZpZy50d29CaXRVUkkgfHwgY29uZmlnLnR3b0JpdEJsb2IpIHtcbiAgICAgICAgaWYgKGNvbmZpZy50d29CaXRVUkkgfHwgY29uZmlnLnR3b0JpdEJsb2IpIHtcbiAgICAgICAgICAgIHNzID0gbmV3IFR3b0JpdFNlcXVlbmNlU291cmNlKGNvbmZpZyk7XG4gICAgICAgIH0gZWxzZSBpZiAoY29uZmlnLmVuc2VtYmxVUkkpIHtcbiAgICAgICAgICAgIHNzID0gbmV3IEVuc2VtYmxTZXF1ZW5jZVNvdXJjZShjb25maWcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc3MgPSBuZXcgREFTU2VxdWVuY2VTb3VyY2UoY29uZmlnKTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSBpZiAoY29uZmlnLnRpZXJfdHlwZSAmJiBfX2RhbGxpYW5jZV9zb3VyY2VBZGFwdGVyRmFjdG9yaWVzW2NvbmZpZy50aWVyX3R5cGVdKSB7XG4gICAgICAgIHZhciBzYWYgPSBfX2RhbGxpYW5jZV9zb3VyY2VBZGFwdGVyRmFjdG9yaWVzW2NvbmZpZy50aWVyX3R5cGVdO1xuICAgICAgICB2YXIgbnMgPSBzYWYoY29uZmlnKTtcbiAgICAgICAgZnMgPSBucy5mZWF0dXJlcztcbiAgICAgICAgc3MgPSBucy5zZXF1ZW5jZTtcbiAgICB9IGVsc2UgaWYgKGNvbmZpZy5id2dVUkkgfHwgY29uZmlnLmJ3Z0Jsb2IpIHtcbiAgICAgICAgdmFyIHdvcmtlciA9IHRoaXMuZ2V0V29ya2VyKCk7XG4gICAgICAgIGlmICh3b3JrZXIpXG4gICAgICAgICAgICBmcyA9IG5ldyBSZW1vdGVCV0dGZWF0dXJlU291cmNlKGNvbmZpZywgd29ya2VyLCB0aGlzKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgZnMgPSBuZXcgQldHRmVhdHVyZVNvdXJjZShjb25maWcpO1xuICAgIH0gZWxzZSBpZiAoY29uZmlnLmJhbVVSSSB8fCBjb25maWcuYmFtQmxvYikge1xuICAgICAgICB2YXIgd29ya2VyID0gdGhpcy5nZXRXb3JrZXIoKTtcbiAgICAgICAgaWYgKHdvcmtlcilcbiAgICAgICAgICAgIGZzID0gbmV3IFJlbW90ZUJBTUZlYXR1cmVTb3VyY2UoY29uZmlnLCB3b3JrZXIsIHRoaXMpO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICBmcyA9IG5ldyBCQU1GZWF0dXJlU291cmNlKGNvbmZpZyk7XG4gICAgfSBlbHNlIGlmIChjb25maWcuamJVUkkpIHtcbiAgICAgICAgZnMgPSBuZXcgSkJyb3dzZUZlYXR1cmVTb3VyY2UoY29uZmlnKTtcbiAgICB9IGVsc2UgaWYgKGNvbmZpZy51cmkgfHwgY29uZmlnLmZlYXR1cmVzX3VyaSkge1xuICAgICAgICBmcyA9IG5ldyBEQVNGZWF0dXJlU291cmNlKGNvbmZpZyk7XG4gICAgfVxuXG4gICAgaWYgKGNvbmZpZy5vdmVybGF5KSB7XG4gICAgICAgIHZhciBzb3VyY2VzID0gW107XG4gICAgICAgIGlmIChmcylcbiAgICAgICAgICAgIHNvdXJjZXMucHVzaChuZXcgQ2FjaGluZ0ZlYXR1cmVTb3VyY2UoZnMpKTtcblxuICAgICAgICBmb3IgKHZhciBvaSA9IDA7IG9pIDwgY29uZmlnLm92ZXJsYXkubGVuZ3RoOyArK29pKSB7XG4gICAgICAgICAgICB2YXIgY3MgPSB0aGlzLmNyZWF0ZVNvdXJjZXMoY29uZmlnLm92ZXJsYXlbb2ldKTtcbiAgICAgICAgICAgIGlmIChjcyAmJiBjcy5mZWF0dXJlcylcbiAgICAgICAgICAgICAgICBzb3VyY2VzLnB1c2goY3MuZmVhdHVyZXMpO1xuICAgICAgICB9XG4gICAgICAgIGZzID0gbmV3IE92ZXJsYXlGZWF0dXJlU291cmNlKHNvdXJjZXMsIGNvbmZpZyk7XG4gICAgfVxuXG4gICAgaWYgKGNvbmZpZy5zZXF1ZW5jZUFsaWFzZXMpIHtcbiAgICAgICAgZnMgPSBuZXcgTWFwcGVkRmVhdHVyZVNvdXJjZShmcywgbmV3IENoYWluc2V0KHt0eXBlOiAnYWxpYXMnLCBzZXF1ZW5jZUFsaWFzZXM6IGNvbmZpZy5zZXF1ZW5jZUFsaWFzZXN9KSk7XG4gICAgfVxuXG4gICAgaWYgKGNvbmZpZy5tYXBwaW5nKSB7XG4gICAgICAgIGZzID0gbmV3IE1hcHBlZEZlYXR1cmVTb3VyY2UoZnMsIHRoaXMuY2hhaW5zW2NvbmZpZy5tYXBwaW5nXSk7XG4gICAgfVxuXG4gICAgaWYgKGNvbmZpZy5uYW1lICYmIGZzICYmICFmcy5uYW1lKSB7XG4gICAgICAgIGZzLm5hbWUgPSBjb25maWcubmFtZTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIGZzICE9PSAndW5kZWZpbmVkJyAmJiBmcyAhPT0gbnVsbCkge1xuICAgICAgICBmcyA9IG5ldyBDYWNoaW5nRmVhdHVyZVNvdXJjZShmcyk7XG4gICAgfVxuXG4gICAgaWYgKCAodHlwZW9mIGZzICE9PSAndW5kZWZpbmVkJyAmJiBmcyAhPT0gIG51bGwpIHx8ICh0eXBlb2Ygc3MgIT09ICd1bmRlZmluZWQnICYmIHNzICE9IG51bGwpICkge1xuICAgICAgICBzb3VyY2VzID0ge1xuICAgICAgICAgICAgZmVhdHVyZXM6IGZzLFxuICAgICAgICAgICAgc2VxdWVuY2U6IHNzXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuc291cmNlQ2FjaGUucHV0KGNvbmZpZywgc291cmNlcyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHNvdXJjZXM7XG59O1xuXG5EYXNUaWVyLnByb3RvdHlwZS5mZXRjaFN0eWxlc2hlZXQgPSBmdW5jdGlvbihjYikge1xuICAgIHZhciBzc1NvdXJjZTtcbiAgICAvLyBTb21ld2hhdCB1Z2x5IHdvcmthcm91bmQgZm9yIHRoZSBzcGVjaWFsIGNhc2Ugb2YgREFTIHNvdXJjZXMuLi5cbiAgICBpZiAodGhpcy5kYXNTb3VyY2Uuc3R5bGVzaGVldF91cmkgfHwgKFxuICAgICAgICAhdGhpcy5kYXNTb3VyY2UudGllcl90eXBlICYmXG4gICAgICAgICF0aGlzLmRhc1NvdXJjZS5id2dVUkkgJiZcbiAgICAgICAgIXRoaXMuZGFzU291cmNlLmJ3Z0Jsb2IgJiZcbiAgICAgICAgIXRoaXMuZGFzU291cmNlLmJhbVVSSSAmJlxuICAgICAgICAhdGhpcy5kYXNTb3VyY2UuYmFtQmxvYiAmJlxuICAgICAgICAhdGhpcy5kYXNTb3VyY2UudHdvQml0VVJJICYmXG4gICAgICAgICF0aGlzLmRhc1NvdXJjZS50d29CaXRCbG9iICYmXG4gICAgICAgICF0aGlzLmRhc1NvdXJjZS5qYlVSSSAmJlxuICAgICAgICAhdGhpcy5kYXNTb3VyY2Uub3ZlcmxheSkpXG4gICAge1xuICAgICAgICBzc1NvdXJjZSA9IG5ldyBEQVNGZWF0dXJlU291cmNlKHRoaXMuZGFzU291cmNlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBzc1NvdXJjZSA9IHRoaXMuZ2V0U291cmNlKCk7XG4gICAgfVxuICAgIHNzU291cmNlLmdldFN0eWxlU2hlZXQoY2IpO1xufTtcblxudmFyIF9fY2ZzX2lkX3NlZWQgPSAwO1xuXG5mdW5jdGlvbiBDYWNoaW5nRmVhdHVyZVNvdXJjZShzb3VyY2UpIHtcbiAgICB2YXIgdGhpc0IgPSB0aGlzO1xuXG4gICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgdGhpcy5jZnNpZCA9ICdjZnMnICsgKCsrX19jZnNfaWRfc2VlZCk7XG4gICAgaWYgKHNvdXJjZS5uYW1lKSB7XG4gICAgICAgIHRoaXMubmFtZSA9IHNvdXJjZS5uYW1lO1xuICAgIH1cbiAgICBpZiAoc291cmNlLmFkZENoYW5nZUxpc3RlbmVyKSB7XG4gICAgICAgIHNvdXJjZS5hZGRDaGFuZ2VMaXN0ZW5lcihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRoaXNCLmNmc2lkID0gJ2NmcycgKyAoKytfX2Nmc19pZF9zZWVkKTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG5DYWNoaW5nRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuYWRkUmVhZGluZXNzTGlzdGVuZXIgPSBmdW5jdGlvbihsaXN0ZW5lcikge1xuICAgIGlmICh0aGlzLnNvdXJjZS5hZGRSZWFkaW5lc3NMaXN0ZW5lcilcbiAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlLmFkZFJlYWRpbmVzc0xpc3RlbmVyKGxpc3RlbmVyKTtcbiAgICBlbHNlXG4gICAgICAgIGxpc3RlbmVyKG51bGwpO1xufTtcblxuQ2FjaGluZ0ZlYXR1cmVTb3VyY2UucHJvdG90eXBlLnJlbW92ZVJlYWRpbmVzc0xpc3RlbmVyID0gZnVuY3Rpb24obGlzdGVuZXIpIHtcbiAgICBpZiAodGhpcy5zb3VyY2UucmVtb3ZlUmVhZGluZXNzTGlzdGVuZXIpXG4gICAgICAgIHJldHVybiB0aGlzLnNvdXJjZS5yZW1vdmVSZWFkaW5lc3NMaXN0ZW5lcihsaXN0ZW5lcik7XG59O1xuXG5DYWNoaW5nRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuc2VhcmNoID0gZnVuY3Rpb24ocXVlcnksIGNhbGxiYWNrKSB7XG4gICAgaWYgKHRoaXMuc291cmNlLnNlYXJjaClcbiAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlLnNlYXJjaChxdWVyeSwgY2FsbGJhY2spO1xufTtcblxuQ2FjaGluZ0ZlYXR1cmVTb3VyY2UucHJvdG90eXBlLmdldERlZmF1bHRGSVBzID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICBpZiAodGhpcy5zb3VyY2UuZ2V0RGVmYXVsdEZJUHMpXG4gICAgICAgIHJldHVybiB0aGlzLnNvdXJjZS5nZXREZWZhdWx0RklQcyhjYWxsYmFjayk7IFxufTtcblxuQ2FjaGluZ0ZlYXR1cmVTb3VyY2UucHJvdG90eXBlLmdldFN0eWxlU2hlZXQgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgIHRoaXMuc291cmNlLmdldFN0eWxlU2hlZXQoY2FsbGJhY2spO1xufTtcblxuQ2FjaGluZ0ZlYXR1cmVTb3VyY2UucHJvdG90eXBlLmdldFNjYWxlcyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnNvdXJjZS5nZXRTY2FsZXMoKTtcbn07XG5cbkNhY2hpbmdGZWF0dXJlU291cmNlLnByb3RvdHlwZS5hZGRBY3Rpdml0eUxpc3RlbmVyID0gZnVuY3Rpb24obCkge1xuICAgIGlmICh0aGlzLnNvdXJjZS5hZGRBY3Rpdml0eUxpc3RlbmVyKSB7XG4gICAgICAgIHRoaXMuc291cmNlLmFkZEFjdGl2aXR5TGlzdGVuZXIobCk7XG4gICAgfVxufTtcblxuQ2FjaGluZ0ZlYXR1cmVTb3VyY2UucHJvdG90eXBlLnJlbW92ZUFjdGl2aXR5TGlzdGVuZXIgPSBmdW5jdGlvbihsKSB7XG4gICAgaWYgKHRoaXMuc291cmNlLnJlbW92ZUFjdGl2aXR5TGlzdGVuZXIpIHtcbiAgICAgICAgdGhpcy5zb3VyY2UucmVtb3ZlQWN0aXZpdHlMaXN0ZW5lcihsKTtcbiAgICB9XG59O1xuXG5DYWNoaW5nRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuYWRkQ2hhbmdlTGlzdGVuZXIgPSBmdW5jdGlvbihsKSB7XG4gICAgaWYgKHRoaXMuc291cmNlLmFkZENoYW5nZUxpc3RlbmVyKVxuICAgICAgICB0aGlzLnNvdXJjZS5hZGRDaGFuZ2VMaXN0ZW5lcihsKTtcbn07XG5cbkNhY2hpbmdGZWF0dXJlU291cmNlLnByb3RvdHlwZS5yZW1vdmVDaGFuZ2VMaXN0ZW5lciA9IGZ1bmN0aW9uKGwpIHtcbiAgICBpZiAodGhpcy5zb3VyY2UucmVtb3ZlQ2hhbmdlTGlzdGVuZXIpXG4gICAgICAgIHRoaXMuc291cmNlLnJlbW92ZUNoYW5nZUxpc3RlbmVyKGwpO1xufTtcblxuQ2FjaGluZ0ZlYXR1cmVTb3VyY2UucHJvdG90eXBlLmZpbmROZXh0RmVhdHVyZSA9IGZ1bmN0aW9uKGNociwgcG9zLCBkaXIsIGNhbGxiYWNrKSB7XG4gICAgdGhpcy5zb3VyY2UuZmluZE5leHRGZWF0dXJlKGNociwgcG9zLCBkaXIsIGNhbGxiYWNrKTtcbn07XG5cbkNhY2hpbmdGZWF0dXJlU291cmNlLnByb3RvdHlwZS5xdWFudEZpbmROZXh0RmVhdHVyZSA9IGZ1bmN0aW9uKGNociwgcG9zLCBkaXIsIHRocmVzaG9sZCwgY2FsbGJhY2spIHtcbiAgICB0aGlzLnNvdXJjZS5xdWFudEZpbmROZXh0RmVhdHVyZShjaHIsIHBvcywgZGlyLCB0aHJlc2hvbGQsIGNhbGxiYWNrKTtcbn07XG5cbkNhY2hpbmdGZWF0dXJlU291cmNlLnByb3RvdHlwZS5jYXBhYmlsaXRpZXMgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAodGhpcy5zb3VyY2UuY2FwYWJpbGl0aWVzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNvdXJjZS5jYXBhYmlsaXRpZXMoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4ge307XG4gICAgfVxufTtcblxuQ2FjaGluZ0ZlYXR1cmVTb3VyY2UucHJvdG90eXBlLmZldGNoID0gZnVuY3Rpb24oY2hyLCBtaW4sIG1heCwgc2NhbGUsIHR5cGVzLCBwb29sLCBjYWxsYmFjaywgc3R5bGVGaWx0ZXJzKSB7XG4gICAgaWYgKCFwb29sKSB7XG4gICAgICAgIHRocm93IEVycm9yKCdGZXRjaCBwb29sIGlzIG51bGwnKTtcbiAgICB9XG5cbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIGNhY2hlS2V5ID0gdGhpcy5jZnNpZDtcblxuICAgIHZhciBhd2FpdGVkRmVhdHVyZXMgPSBwb29sLmF3YWl0ZWRGZWF0dXJlc1tjYWNoZUtleV07XG4gICAgaWYgKGF3YWl0ZWRGZWF0dXJlcyAmJiBhd2FpdGVkRmVhdHVyZXMuc3RhcnRlZCkge1xuICAgICAgICBpZiAoYXdhaXRlZEZlYXR1cmVzLnN0eWxlRmlsdGVycy5kb2VzTm90Q29udGFpbihzdHlsZUZpbHRlcnMpKSB7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnRmV0Y2ggYWxyZWFkeSBzdGFydGVkIHdpdGggd3JvbmcgcGFyYW1ldGVycywgc2tpcHBpbmcgY2FjaGUuJyk7XG4gICAgICAgICAgICBzZWxmLnNvdXJjZS5mZXRjaChjaHIsIG1pbiwgbWF4LCBzY2FsZSwgdHlwZXMsIHBvb2wsIGNhbGxiYWNrLCBzdHlsZUZpbHRlcnMpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfSBlbHNlIGlmIChhd2FpdGVkRmVhdHVyZXMpIHtcbiAgICAgICAgYXdhaXRlZEZlYXR1cmVzLnN0eWxlRmlsdGVycy5hZGRBbGwoc3R5bGVGaWx0ZXJzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBhd2FpdGVkRmVhdHVyZXMgPSBuZXcgQXdhaXRlZCgpO1xuICAgICAgICBhd2FpdGVkRmVhdHVyZXMuc3R5bGVGaWx0ZXJzID0gc3R5bGVGaWx0ZXJzO1xuICAgICAgICBwb29sLmF3YWl0ZWRGZWF0dXJlc1tjYWNoZUtleV0gPSBhd2FpdGVkRmVhdHVyZXM7XG5cbiAgICAgICAgcG9vbC5yZXF1ZXN0c0lzc3VlZC50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgYXdhaXRlZEZlYXR1cmVzLnN0YXJ0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgc2VsZi5zb3VyY2UuZmV0Y2goXG4gICAgICAgICAgICAgICAgY2hyLCBcbiAgICAgICAgICAgICAgICBtaW4sIFxuICAgICAgICAgICAgICAgIG1heCwgXG4gICAgICAgICAgICAgICAgc2NhbGUsIFxuICAgICAgICAgICAgICAgIGF3YWl0ZWRGZWF0dXJlcy5zdHlsZUZpbHRlcnMudHlwZUxpc3QoKSwgXG4gICAgICAgICAgICAgICAgcG9vbCwgXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24oc3RhdHVzLCBmZWF0dXJlcywgc2NhbGUsIGNvdmVyYWdlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghYXdhaXRlZEZlYXR1cmVzLnJlcylcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0ZWRGZWF0dXJlcy5wcm92aWRlKHtzdGF0dXM6IHN0YXR1cywgZmVhdHVyZXM6IGZlYXR1cmVzLCBzY2FsZTogc2NhbGUsIGNvdmVyYWdlOiBjb3ZlcmFnZX0pO1xuICAgICAgICAgICAgICAgIH0sIFxuICAgICAgICAgICAgICAgIGF3YWl0ZWRGZWF0dXJlcy5zdHlsZUZpbHRlcnMpO1xuICAgICAgICB9KS5jYXRjaChmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgIH0pO1xuICAgIH0gXG5cbiAgICBhd2FpdGVkRmVhdHVyZXMuYXdhaXQoZnVuY3Rpb24oYWYpIHtcbiAgICAgICAgY2FsbGJhY2soYWYuc3RhdHVzLCBhZi5mZWF0dXJlcywgYWYuc2NhbGUsIGFmLmNvdmVyYWdlKTtcbiAgICB9KTtcbn07XG4gICAgXG5mdW5jdGlvbiBGZWF0dXJlU291cmNlQmFzZSgpIHtcbiAgICB0aGlzLmJ1c3kgPSAwO1xuICAgIHRoaXMuYWN0aXZpdHlMaXN0ZW5lcnMgPSBbXTtcbiAgICB0aGlzLnJlYWRpbmVzc0xpc3RlbmVycyA9IFtdO1xuICAgIHRoaXMucmVhZGluZXNzID0gbnVsbDtcbn1cblxuRmVhdHVyZVNvdXJjZUJhc2UucHJvdG90eXBlLmFkZFJlYWRpbmVzc0xpc3RlbmVyID0gZnVuY3Rpb24obGlzdGVuZXIpIHtcbiAgICB0aGlzLnJlYWRpbmVzc0xpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcbiAgICBsaXN0ZW5lcih0aGlzLnJlYWRpbmVzcyk7XG59O1xuXG5GZWF0dXJlU291cmNlQmFzZS5wcm90b3R5cGUucmVtb3ZlUmVhZGluZXNzTGlzdGVuZXIgPSBmdW5jdGlvbihsaXN0ZW5lcikge1xuICAgIHZhciBpZHggPSBhcnJheUluZGV4T2YodGhpcy5yZWFkaW5lc3NMaXN0ZW5lcnMsIGxpc3RlbmVyKTtcbiAgICBpZiAoaWR4ID49IDApIHtcbiAgICAgICAgdGhpcy5yZWFkaW5lc3NMaXN0ZW5lcnMuc3BsaWNlKGlkeCwgMSk7XG4gICAgfVxufTtcblxuRmVhdHVyZVNvdXJjZUJhc2UucHJvdG90eXBlLm5vdGlmeVJlYWRpbmVzcyA9IGZ1bmN0aW9uKCkge1xuICAgIGZvciAodmFyIGxpID0gMDsgbGkgPCB0aGlzLnJlYWRpbmVzc0xpc3RlbmVycy5sZW5ndGg7ICsrbGkpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMucmVhZGluZXNzTGlzdGVuZXJzW2xpXSh0aGlzLnJlYWRpbmVzcyk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xuICAgICAgICB9XG4gICAgfVxufTtcblxuRmVhdHVyZVNvdXJjZUJhc2UucHJvdG90eXBlLmFkZEFjdGl2aXR5TGlzdGVuZXIgPSBmdW5jdGlvbihsaXN0ZW5lcikge1xuICAgIHRoaXMuYWN0aXZpdHlMaXN0ZW5lcnMucHVzaChsaXN0ZW5lcik7XG59O1xuXG5GZWF0dXJlU291cmNlQmFzZS5wcm90b3R5cGUucmVtb3ZlQWN0aXZpdHlMaXN0ZW5lciA9IGZ1bmN0aW9uKGxpc3RlbmVyKSB7XG4gICAgdmFyIGlkeCA9IGFycmF5SW5kZXhPZih0aGlzLmFjdGl2aXR5TGlzdGVuZXJzLCBsaXN0ZW5lcik7XG4gICAgaWYgKGlkeCA+PSAwKSB7XG4gICAgICAgIHRoaXMuYWN0aXZpdHlMaXN0ZW5lcnMuc3BsaWNlKGlkeCwgMSk7XG4gICAgfVxufTtcblxuRmVhdHVyZVNvdXJjZUJhc2UucHJvdG90eXBlLm5vdGlmeUFjdGl2aXR5ID0gZnVuY3Rpb24oKSB7XG4gICAgZm9yICh2YXIgbGkgPSAwOyBsaSA8IHRoaXMuYWN0aXZpdHlMaXN0ZW5lcnMubGVuZ3RoOyArK2xpKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLmFjdGl2aXR5TGlzdGVuZXJzW2xpXSh0aGlzLmJ1c3kpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlKTtcbiAgICAgICAgfVxuICAgIH1cbn07XG5cbkZlYXR1cmVTb3VyY2VCYXNlLnByb3RvdHlwZS5nZXRTY2FsZXMgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gbnVsbDtcbn07XG5cbkZlYXR1cmVTb3VyY2VCYXNlLnByb3RvdHlwZS5mZXRjaCA9IGZ1bmN0aW9uKGNociwgbWluLCBtYXgsIHNjYWxlLCB0eXBlcywgcG9vbCwgY250KSB7XG4gICAgcmV0dXJuIGNudChudWxsLCBbXSwgMTAwMDAwMDAwMCk7XG59O1xuXG5GZWF0dXJlU291cmNlQmFzZS5wcm90b3R5cGUuZ2V0U3R5bGVTaGVldCA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgdmFyIHN0eWxlc2hlZXQgPSBuZXcgREFTU3R5bGVzaGVldCgpO1xuICAgIHZhciBkZWZTdHlsZSA9IG5ldyBEQVNTdHlsZSgpO1xuICAgIGRlZlN0eWxlLmdseXBoID0gJ0JPWCc7XG4gICAgZGVmU3R5bGUuQkdDT0xPUiA9ICdibHVlJztcbiAgICBkZWZTdHlsZS5GR0NPTE9SID0gJ2JsYWNrJztcbiAgICBzdHlsZXNoZWV0LnB1c2hTdHlsZSh7dHlwZTogJ2RlZmF1bHQnfSwgbnVsbCwgZGVmU3R5bGUpO1xuICAgIHJldHVybiBjYWxsYmFjayhzdHlsZXNoZWV0KTtcbn07XG5cblxuXG5mdW5jdGlvbiBEQVNGZWF0dXJlU291cmNlKGRhc1NvdXJjZSkge1xuICAgIHRoaXMuZGFzU291cmNlID0gbmV3IERBU1NvdXJjZShkYXNTb3VyY2UpO1xuICAgIHRoaXMuYnVzeSA9IDA7XG4gICAgdGhpcy5hY3Rpdml0eUxpc3RlbmVycyA9IFtdO1xufVxuXG5EQVNGZWF0dXJlU291cmNlLnByb3RvdHlwZS5hZGRBY3Rpdml0eUxpc3RlbmVyID0gZnVuY3Rpb24obGlzdGVuZXIpIHtcbiAgICB0aGlzLmFjdGl2aXR5TGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpO1xufTtcblxuREFTRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUucmVtb3ZlQWN0aXZpdHlMaXN0ZW5lciA9IGZ1bmN0aW9uKGxpc3RlbmVyKSB7XG4gICAgdmFyIGlkeCA9IGFycmF5SW5kZXhPZih0aGlzLmFjdGl2aXR5TGlzdGVuZXJzLCBsaXN0ZW5lcik7XG4gICAgaWYgKGlkeCA+PSAwKVxuICAgICAgICB0aGlzLmFjdGl2aXR5TGlzdGVuZXJzLnNwbGljZShpZHgsIDEpO1xufTtcblxuXG5EQVNGZWF0dXJlU291cmNlLnByb3RvdHlwZS5ub3RpZnlBY3Rpdml0eSA9IGZ1bmN0aW9uKCkge1xuICAgIGZvciAodmFyIGxpID0gMDsgbGkgPCB0aGlzLmFjdGl2aXR5TGlzdGVuZXJzLmxlbmd0aDsgKytsaSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5hY3Rpdml0eUxpc3RlbmVyc1tsaV0odGhpcy5idXN5KTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZSk7XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG5EQVNGZWF0dXJlU291cmNlLnByb3RvdHlwZS5nZXRTdHlsZVNoZWV0ID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICB0aGlzLmRhc1NvdXJjZS5zdHlsZXNoZWV0KGZ1bmN0aW9uKHN0eWxlc2hlZXQpIHtcbiAgICAgICAgY2FsbGJhY2soc3R5bGVzaGVldCk7XG4gICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgIGNhbGxiYWNrKG51bGwsIFwiQ291bGRuJ3QgZmV0Y2ggREFTIHN0eWxlc2hlZXRcIik7XG4gICAgfSk7XG59O1xuXG5EQVNGZWF0dXJlU291cmNlLnByb3RvdHlwZS5mZXRjaCA9IGZ1bmN0aW9uKGNociwgbWluLCBtYXgsIHNjYWxlLCB0eXBlcywgcG9vbCwgY2FsbGJhY2spIHtcbiAgICBpZiAodHlwZXMgJiYgdHlwZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGNhbGxiYWNrKG51bGwsIFtdLCBzY2FsZSk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuZGFzU291cmNlLnVyaSAmJiAhdGhpcy5kYXNTb3VyY2UuZmVhdHVyZXNfdXJpKSB7XG4gICAgICAgIC8vIEZJWE1FIHNob3VsZCB0aGlzIGJlIG1ha2luZyBhbiBlcnJvciBjYWxsYmFjaz8/P1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZGFzU291cmNlLmRhc1N0YXRpY0ZlYXR1cmVzICYmIHRoaXMuY2FjaGVkU3RhdGljRmVhdHVyZXMpIHtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwsIHRoaXMuY2FjaGVkU3RhdGljRmVhdHVyZXMsIHRoaXMuY2FjaGVkU3RhdGljU2NhbGUpO1xuICAgIH1cblxuICAgIHZhciB0cnlNYXhCaW5zID0gKHRoaXMuZGFzU291cmNlLm1heGJpbnMgIT09IGZhbHNlKTtcbiAgICB2YXIgZm9wcyA9IHtcbiAgICAgICAgdHlwZTogdHlwZXNcbiAgICB9O1xuICAgIGlmICh0cnlNYXhCaW5zKSB7XG4gICAgICAgIGZvcHMubWF4YmlucyA9IDEgKyAoKChtYXggLSBtaW4pIC8gc2NhbGUpIHwgMCk7XG4gICAgfVxuICAgIFxuICAgIHZhciB0aGlzQiA9IHRoaXM7XG4gICAgdGhpc0IuYnVzeSsrO1xuICAgIHRoaXNCLm5vdGlmeUFjdGl2aXR5KCk7XG5cbiAgICB0aGlzLmRhc1NvdXJjZS5mZWF0dXJlcyhcbiAgICAgICAgbmV3IERBU1NlZ21lbnQoY2hyLCBtaW4sIG1heCksXG4gICAgICAgIGZvcHMsXG4gICAgICAgIGZ1bmN0aW9uKGZlYXR1cmVzLCBzdGF0dXMpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpc0IuYnVzeS0tO1xuICAgICAgICAgICAgdGhpc0Iubm90aWZ5QWN0aXZpdHkoKTtcblxuICAgICAgICAgICAgdmFyIHJldFNjYWxlID0gc2NhbGU7XG4gICAgICAgICAgICBpZiAoIXRyeU1heEJpbnMpIHtcbiAgICAgICAgICAgICAgICByZXRTY2FsZSA9IDAuMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghc3RhdHVzICYmIHRoaXNCLmRhc1NvdXJjZS5kYXNTdGF0aWNGZWF0dXJlcykge1xuICAgICAgICAgICAgICAgIHRoaXNCLmNhY2hlZFN0YXRpY0ZlYXR1cmVzID0gZmVhdHVyZXM7XG4gICAgICAgICAgICAgICAgdGhpc0IuY2FjaGVkU3RhdGljU2NhbGUgPSByZXRTY2FsZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhbGxiYWNrKHN0YXR1cywgZmVhdHVyZXMsIHJldFNjYWxlKTtcbiAgICAgICAgfVxuICAgICk7XG59O1xuXG5EQVNGZWF0dXJlU291cmNlLnByb3RvdHlwZS5maW5kTmV4dEZlYXR1cmUgPSBmdW5jdGlvbihjaHIsIHBvcywgZGlyLCBjYWxsYmFjaykge1xuICAgIGlmICh0aGlzLmRhc1NvdXJjZS5jYXBhYmlsaXRpZXMgJiYgYXJyYXlJbmRleE9mKHRoaXMuZGFzU291cmNlLmNhcGFiaWxpdGllcywgJ2RhczE6YWRqYWNlbnQtZmVhdHVyZScpID49IDApIHtcbiAgICAgICAgdmFyIHRoaXNCID0gdGhpcztcbiAgICAgICAgaWYgKHRoaXMuZGFzQWRqTG9jaykge1xuICAgICAgICAgICAgcmV0dXJuIGNvbnNvbGUubG9nKCdBbHJlYWR5IGxvb2tpbmcgZm9yIGEgbmV4dCBmZWF0dXJlLCBiZSBwYXRpZW50IScpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZGFzQWRqTG9jayA9IHRydWU7XG4gICAgICAgIHZhciBmb3BzID0ge1xuICAgICAgICAgICAgYWRqYWNlbnQ6IGNociArICc6JyArIChwb3N8MCkgKyAnOicgKyAoZGlyID4gMCA/ICdGJyA6ICdCJylcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIHR5cGVzID0gdGhpc1RpZXIuZ2V0RGVzaXJlZFR5cGVzKHRoaXNUaWVyLmJyb3dzZXIuc2NhbGUpO1xuICAgICAgICBpZiAodHlwZXMpIHtcbiAgICAgICAgICAgIGZvcHMudHlwZXMgPSB0eXBlcztcbiAgICAgICAgfVxuICAgICAgICB0aGlzVGllci5kYXNTb3VyY2UuZmVhdHVyZXMobnVsbCwgZm9wcywgZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgICAgICB0aGlzQi5kYXNBZGpMb2NrID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAocmVzLmxlbmd0aCA+IDAgJiYgcmVzWzBdICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2socmVzWzBdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufTtcblxuZnVuY3Rpb24gREFTU2VxdWVuY2VTb3VyY2UoZGFzU291cmNlKSB7XG4gICAgdGhpcy5kYXNTb3VyY2UgPSBuZXcgREFTU291cmNlKGRhc1NvdXJjZSk7XG4gICAgdGhpcy5hd2FpdGVkRW50cnlQb2ludHMgPSBuZXcgQXdhaXRlZCgpO1xuXG4gICAgdmFyIHRoaXNCID0gdGhpcztcbiAgICB0aGlzLmRhc1NvdXJjZS5lbnRyeVBvaW50cyhcbiAgICAgICAgZnVuY3Rpb24oZXApIHtcbiAgICAgICAgICAgIHRoaXNCLmF3YWl0ZWRFbnRyeVBvaW50cy5wcm92aWRlKGVwKTtcbiAgICAgICAgfSk7XG59XG5cblxuREFTU2VxdWVuY2VTb3VyY2UucHJvdG90eXBlLmZldGNoID0gZnVuY3Rpb24oY2hyLCBtaW4sIG1heCwgcG9vbCwgY2FsbGJhY2spIHtcbiAgICB0aGlzLmRhc1NvdXJjZS5zZXF1ZW5jZShcbiAgICAgICAgbmV3IERBU1NlZ21lbnQoY2hyLCBtaW4sIG1heCksXG4gICAgICAgIGZ1bmN0aW9uKHNlcXMpIHtcbiAgICAgICAgICAgIGlmIChzZXFzLmxlbmd0aCA9PSAxKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwsIHNlcXNbMF0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soXCJEaWRuJ3QgZ2V0IHNlcXVlbmNlXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgKTtcbn07XG5cbkRBU1NlcXVlbmNlU291cmNlLnByb3RvdHlwZS5nZXRTZXFJbmZvID0gZnVuY3Rpb24oY2hyLCBjbnQpIHtcbiAgICB0aGlzLmF3YWl0ZWRFbnRyeVBvaW50cy5hd2FpdChmdW5jdGlvbihlcCkge1xuICAgICAgICBmb3IgKHZhciBlcGkgPSAwOyBlcGkgPCBlcC5sZW5ndGg7ICsrZXBpKSB7XG4gICAgICAgICAgICBpZiAoZXBbZXBpXS5uYW1lID09IGNocikge1xuICAgICAgICAgICAgICAgIHJldHVybiBjbnQoe2xlbmd0aDogZXBbZXBpXS5lbmR9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY250KCk7XG4gICAgfSk7XG59O1xuICAgIFxuXG5mdW5jdGlvbiBUd29CaXRTZXF1ZW5jZVNvdXJjZShzb3VyY2UpIHtcbiAgICB2YXIgdGhpc0IgPSB0aGlzO1xuICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgIHRoaXMudHdvQml0ID0gbmV3IEF3YWl0ZWQoKTtcbiAgICB2YXIgZGF0YTtcbiAgICBpZiAoc291cmNlLnR3b0JpdFVSSSkge1xuICAgICAgICBkYXRhID0gbmV3IFVSTEZldGNoYWJsZShzb3VyY2UudHdvQml0VVJJLCB7Y3JlZGVudGlhbHM6IHNvdXJjZS5jcmVkZW50aWFscywgcmVzb2x2ZXI6IHNvdXJjZS5yZXNvbHZlcn0pO1xuICAgIH0gZWxzZSBpZiAoc291cmNlLnR3b0JpdEJsb2IpIHtcbiAgICAgICAgZGF0YSA9IG5ldyBCbG9iRmV0Y2hhYmxlKHNvdXJjZS50d29CaXRCbG9iKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBFcnJvcihcIk5vIHR3b0JpdFVSSSBvciB0d29CaXRCbG9iIHBhcmFtZXRlclwiKTtcbiAgICB9XG5cbiAgICBtYWtlVHdvQml0KGRhdGEsIGZ1bmN0aW9uKHRiLCBlcnJvcikge1xuICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXNCLnR3b0JpdC5wcm92aWRlKHRiKTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuXG5Ud29CaXRTZXF1ZW5jZVNvdXJjZS5wcm90b3R5cGUuZmV0Y2ggPSBmdW5jdGlvbihjaHIsIG1pbiwgbWF4LCBwb29sLCBjYWxsYmFjaykge1xuICAgICAgICB0aGlzLnR3b0JpdC5hd2FpdChmdW5jdGlvbih0Yikge1xuICAgICAgICAgICAgdGIuZmV0Y2goY2hyLCBtaW4sIG1heCxcbiAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHNlcSwgZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soZXJyLCBudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2VxdWVuY2UgPSBuZXcgREFTU2VxdWVuY2UoY2hyLCBtaW4sIG1heCwgJ0ROQScsIHNlcSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsLCBzZXF1ZW5jZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xufTtcblxuVHdvQml0U2VxdWVuY2VTb3VyY2UucHJvdG90eXBlLmdldFNlcUluZm8gPSBmdW5jdGlvbihjaHIsIGNudCkge1xuICAgIHRoaXMudHdvQml0LmF3YWl0KGZ1bmN0aW9uKHRiKSB7XG4gICAgICAgIHZhciBzZXEgPSB0Yi5nZXRTZXEoY2hyKTtcbiAgICAgICAgaWYgKHNlcSkge1xuICAgICAgICAgICAgdGIuZ2V0U2VxKGNocikubGVuZ3RoKGZ1bmN0aW9uKGwpIHtcbiAgICAgICAgICAgICAgICBjbnQoe2xlbmd0aDogbH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjbnQoKTtcbiAgICAgICAgfVxuICAgIH0pO1xufTtcblxuZnVuY3Rpb24gRW5zZW1ibFNlcXVlbmNlU291cmNlKHNvdXJjZSkge1xuICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgIC8vIGh0dHA6Ly9kYXRhLmdyYW1lbmUub3JnL2Vuc2VtYmwvaW5mby9hc3NlbWJseS90cml0aWN1bV9hZXN0aXZ1bS8yQj9jb250ZW50LXR5cGU9YXBwbGljYXRpb24vanNvblxuICAgIC8vIGh0dHA6Ly9kYXRhLmdyYW1lbmUub3JnL2Vuc2VtYmwvc2VxdWVuY2UvcmVnaW9uL3RyaXRpY3VtX2Flc3RpdnVtLzJCOjgwMDEuLjE4MDAwOjE/Y29udGVudC10eXBlPWFwcGxpY2F0aW9uL2pzb25cbn1cblxuRW5zZW1ibFNlcXVlbmNlU291cmNlLnByb3RvdHlwZS5mZXRjaCA9IGZ1bmN0aW9uKGNociwgbWluLCBtYXgsIHBvb2wsIGNhbGxiYWNrKSB7XG4gICAgdmFyIHVybCA9IHRoaXMuc291cmNlLmVuc2VtYmxVUkkgKyAnL3NlcXVlbmNlL3JlZ2lvbi8nICsgdGhpcy5zb3VyY2Uuc3BlY2llcyArICcvJyArXG4gICAgICAgICAgICAgIGNociArICc6JyArIG1pbiArICcuLicgKyBtYXggKyAnOjE/Y29udGVudC10eXBlPWFwcGxpY2F0aW9uL2pzb24nO1xuICAgIHZhciByZXEgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICByZXEub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmIChyZXEucmVhZHlTdGF0ZSA9PSA0KSB7XG4gICAgICAgICAgICB2YXIganI7XG4gICAgICAgICAgICBpZiAocmVxLnN0YXR1cyA+PSAzMDApIHtcbiAgICAgICAgICAgICAgICB2YXIgZXJyID0gJ0Vycm9yIGNvZGUgJyArIHJlcS5zdGF0dXM7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAganIgPSBKU09OLnBhcnNlKHJlcS5yZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChqci5lcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXJyID0ganIuZXJyb3I7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhlcnIsIG51bGwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAganIgPSBKU09OLnBhcnNlKHJlcS5yZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgdmFyIHNlcXVlbmNlID0gbmV3IERBU1NlcXVlbmNlKGNociwgbWluLCBtYXgsICdETkEnLCBqci5zZXEpO1xuICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsLCBzZXF1ZW5jZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJlcS5vcGVuKCdHRVQnLCB1cmwsIHRydWUpO1xuICAgIHJlcS5yZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gICAgcmVxLnNlbmQoKTtcbn07XG5cbkVuc2VtYmxTZXF1ZW5jZVNvdXJjZS5wcm90b3R5cGUuZ2V0U2VxSW5mbyA9IGZ1bmN0aW9uKGNociwgY250KSB7XG4gIHZhciB1cmwgPSB0aGlzLnNvdXJjZS5lbnNlbWJsVVJJICsgJy9pbmZvL2Fzc2VtYmx5LycgKyB0aGlzLnNvdXJjZS5zcGVjaWVzICsgJy8nICsgY2hyICsgJz9jb250ZW50LXR5cGU9YXBwbGljYXRpb24vanNvbic7XG4gIHZhciByZXEgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgcmVxLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkge1xuICAgICBpZiAocmVxLnJlYWR5U3RhdGUgPT0gNCkge1xuICAgICAgICBpZiAocmVxLnN0YXR1cyA+PSAzMDApIHtcbiAgICAgICAgICAgIGNudCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIGpyID0gSlNPTi5wYXJzZShyZXEucmVzcG9uc2UpO1xuICAgICAgICAgICAgY250KGpyKTtcbiAgICAgICAgfVxuICAgIH1cbiAgfTtcbiAgcmVxLm9wZW4oJ0dFVCcsIHVybCwgdHJ1ZSk7XG4gIHJlcS5yZXNwb25zZVR5cGUgPSAndGV4dCc7XG4gIHJlcS5zZW5kKCk7XG59O1xuXG5EQVNGZWF0dXJlU291cmNlLnByb3RvdHlwZS5nZXRTY2FsZXMgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gW107XG59O1xuXG52YXIgYndnX3ByZWZsaWdodHMgPSB7fTtcblxuZnVuY3Rpb24gQldHRmVhdHVyZVNvdXJjZShid2dTb3VyY2UpIHtcbiAgICBGZWF0dXJlU291cmNlQmFzZS5jYWxsKHRoaXMpO1xuXG4gICAgdmFyIHRoaXNCID0gdGhpcztcbiAgICB0aGlzLnJlYWRpbmVzcyA9ICdDb25uZWN0aW5nJztcbiAgICB0aGlzLmJ3Z1NvdXJjZSA9IHRoaXMub3B0cyA9IGJ3Z1NvdXJjZTsgICAgXG4gICAgdGhpc0IuYndnSG9sZGVyID0gbmV3IEF3YWl0ZWQoKTtcblxuICAgIGlmICh0aGlzLm9wdHMucHJlZmxpZ2h0KSB7XG4gICAgICAgIHZhciBwZnMgPSBid2dfcHJlZmxpZ2h0c1t0aGlzLm9wdHMucHJlZmxpZ2h0XTtcbiAgICAgICAgaWYgKCFwZnMpIHtcbiAgICAgICAgICAgIHBmcyA9IG5ldyBBd2FpdGVkKCk7XG4gICAgICAgICAgICBid2dfcHJlZmxpZ2h0c1t0aGlzLm9wdHMucHJlZmxpZ2h0XSA9IHBmcztcblxuICAgICAgICAgICAgdmFyIHJlcSA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgICAgICAgcmVxLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGlmIChyZXEucmVhZHlTdGF0ZSA9PSA0KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXEuc3RhdHVzID09IDIwMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGZzLnByb3ZpZGUoJ3N1Y2Nlc3MnKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBmcy5wcm92aWRlKCdmYWlsdXJlJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmVxLm9wZW4oJ2dldCcsIHRoaXMub3B0cy5wcmVmbGlnaHQgKyAnPycgKyBoZXhfc2hhMSgnc2FsdCcgKyBEYXRlLm5vdygpKSwgdHJ1ZSk7ICAgIC8vIEluc3RlYWQsIGVuc3VyZSB3ZSBhbHdheXMgcHJlZmxpZ2h0IGEgdW5pcXVlIFVSSS5cbiAgICAgICAgICAgIGlmICh0aGlzLm9wdHMuY3JlZGVudGlhbHMpIHtcbiAgICAgICAgICAgICAgICByZXEud2l0aENyZWRlbnRpYWxzID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlcS5zZW5kKCk7XG4gICAgICAgIH1cbiAgICAgICAgcGZzLmF3YWl0KGZ1bmN0aW9uKHN0YXR1cykge1xuICAgICAgICAgICAgaWYgKHN0YXR1cyA9PT0gJ3N1Y2Nlc3MnKSB7XG4gICAgICAgICAgICAgICAgdGhpc0IuaW5pdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzQi5pbml0KCk7XG4gICAgfVxufVxuXG5CV0dGZWF0dXJlU291cmNlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoRmVhdHVyZVNvdXJjZUJhc2UucHJvdG90eXBlKTtcblxuQldHRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciB0aGlzQiA9IHRoaXM7XG4gICAgdmFyIGFyZztcblxuICAgIHZhciB1cmkgPSB0aGlzLmJ3Z1NvdXJjZS51cmkgfHwgdGhpcy5id2dTb3VyY2UuYndnVVJJO1xuICAgIGlmICh1cmkpIHtcbiAgICAgICAgaWYgKHRoaXMuYndnU291cmNlLnRyYW5zcG9ydCA9PT0gJ2VuY29kZScpIHtcbiAgICAgICAgICAgIGFyZyA9IG5ldyBFbmNvZGVGZXRjaGFibGUodXJpLCB7Y3JlZGVudGlhbHM6IHRoaXMub3B0cy5jcmVkZW50aWFsc30pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYXJnID0gbmV3IFVSTEZldGNoYWJsZSh1cmksIHtjcmVkZW50aWFsczogdGhpcy5vcHRzLmNyZWRlbnRpYWxzLCByZXNvbHZlcjogdGhpcy5vcHRzLnJlc29sdmVyfSk7XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICBhcmcgPSBuZXcgQmxvYkZldGNoYWJsZSh0aGlzLmJ3Z1NvdXJjZS5id2dCbG9iKTtcbiAgICB9XG5cbiAgICBtYWtlQndnKGFyZywgZnVuY3Rpb24oYndnLCBlcnIpIHtcbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgdGhpc0IuZXJyb3IgPSBlcnI7XG4gICAgICAgICAgICB0aGlzQi5yZWFkaW5lc3MgPSBudWxsO1xuICAgICAgICAgICAgdGhpc0Iubm90aWZ5UmVhZGluZXNzKCk7XG4gICAgICAgICAgICB0aGlzQi5id2dIb2xkZXIucHJvdmlkZShudWxsKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXNCLmJ3Z0hvbGRlci5wcm92aWRlKGJ3Zyk7XG4gICAgICAgICAgICB0aGlzQi5yZWFkaW5lc3MgPSBudWxsO1xuICAgICAgICAgICAgdGhpc0Iubm90aWZ5UmVhZGluZXNzKCk7XG4gICAgICAgICAgICBpZiAoYndnLnR5cGUgPT0gJ2JpZ2JlZCcpIHtcbiAgICAgICAgICAgICAgICBid2cuZ2V0RXh0cmFJbmRpY2VzKGZ1bmN0aW9uKGVpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXNCLmV4dHJhSW5kaWNlcyA9IGVpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG59O1xuXG5CV0dGZWF0dXJlU291cmNlLnByb3RvdHlwZS5jYXBhYmlsaXRpZXMgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgY2FwcyA9IHtsZWFwOiB0cnVlfTtcbiAgICBpZiAodGhpcy5id2dIb2xkZXIucmVzICYmIHRoaXMuYndnSG9sZGVyLnJlcy50eXBlID09ICdiaWd3aWcnKVxuICAgICAgICBjYXBzLnF1YW50TGVhcCA9IHRydWU7XG4gICAgaWYgKHRoaXMuZXh0cmFJbmRpY2VzICYmIHRoaXMuZXh0cmFJbmRpY2VzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY2Fwcy5zZWFyY2ggPSBbXTtcbiAgICAgICAgZm9yICh2YXIgZWlpID0gMDsgZWlpIDwgdGhpcy5leHRyYUluZGljZXMubGVuZ3RoOyArK2VpaSkge1xuICAgICAgICAgICAgY2Fwcy5zZWFyY2gucHVzaCh0aGlzLmV4dHJhSW5kaWNlc1tlaWldLmZpZWxkKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY2Fwcztcbn07XG5cbkJXR0ZlYXR1cmVTb3VyY2UucHJvdG90eXBlLmZldGNoID0gZnVuY3Rpb24oY2hyLCBtaW4sIG1heCwgc2NhbGUsIHR5cGVzLCBwb29sLCBjYWxsYmFjaykge1xuICAgIHZhciB0aGlzQiA9IHRoaXM7XG4gICAgdGhpcy5id2dIb2xkZXIuYXdhaXQoZnVuY3Rpb24oYndnKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYndnID09PSAndW5kZWZpbmVkJyB8fCBid2cgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayh0aGlzQi5lcnJvciB8fCBcIkNhbid0IGFjY2VzcyBiaW5hcnkgZmlsZVwiLCBudWxsLCBudWxsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBkYXRhO1xuICAgICAgICB2YXIgd2FudERlbnNpdHkgPSAhdHlwZXMgfHwgdHlwZXMubGVuZ3RoID09PSAwIHx8IGFycmF5SW5kZXhPZih0eXBlcywgJ2RlbnNpdHknKSA+PSAwO1xuICAgICAgICBpZiAodGhpc0Iub3B0cy5jbGllbnRCaW4pIHtcbiAgICAgICAgICAgIHdhbnREZW5zaXR5ID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHNjYWxlRmFjdG9yID0gdGhpc0Iub3B0cy5zY2FsZUZhY3RvciB8fCAxLjA7XG4gICAgICAgIGlmIChid2cudHlwZSA9PSAnYmlnd2lnJyB8fCB3YW50RGVuc2l0eSB8fCAodHlwZW9mIHRoaXNCLm9wdHMuZm9yY2VSZWR1Y3Rpb24gIT09ICd1bmRlZmluZWQnKSkge1xuICAgICAgICAgICAgdmFyIHpvb20gPSAtMTtcbiAgICAgICAgICAgIGZvciAodmFyIHogPSAwOyB6IDwgYndnLnpvb21MZXZlbHMubGVuZ3RoOyArK3opIHtcbiAgICAgICAgICAgICAgICBpZiAoYndnLnpvb21MZXZlbHNbel0ucmVkdWN0aW9uIDw9IChzY2FsZSAqIHNjYWxlRmFjdG9yKSkge1xuICAgICAgICAgICAgICAgICAgICB6b29tID0gejtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHlwZW9mIHRoaXNCLm9wdHMuZm9yY2VSZWR1Y3Rpb24gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgem9vbSA9IHRoaXNCLm9wdHMuZm9yY2VSZWR1Y3Rpb247XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh6b29tIDwgMCkge1xuICAgICAgICAgICAgICAgIGRhdGEgPSBid2cuZ2V0VW56b29tZWRWaWV3KCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGRhdGEgPSBid2cuZ2V0Wm9vbWVkVmlldyh6b29tKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRhdGEgPSBid2cuZ2V0VW56b29tZWRWaWV3KCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHRoaXNCLmJ1c3krKztcbiAgICAgICAgdGhpc0Iubm90aWZ5QWN0aXZpdHkoKTtcbiAgICAgICAgZGF0YS5yZWFkV2lnRGF0YShjaHIsIG1pbiwgbWF4LCBmdW5jdGlvbihmZWF0dXJlcykge1xuICAgICAgICAgICAgdGhpc0IuYnVzeS0tO1xuICAgICAgICAgICAgdGhpc0Iubm90aWZ5QWN0aXZpdHkoKTtcblxuICAgICAgICAgICAgdmFyIGZzID0gMTAwMDAwMDAwMDtcbiAgICAgICAgICAgIGlmIChid2cudHlwZSA9PT0gJ2JpZ3dpZycpIHtcbiAgICAgICAgICAgICAgICB2YXIgaXMgPSAobWF4IC0gbWluKSAvIGZlYXR1cmVzLmxlbmd0aCAvIDI7XG4gICAgICAgICAgICAgICAgaWYgKGlzIDwgZnMpIHtcbiAgICAgICAgICAgICAgICAgICAgZnMgPSBpcztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpc0Iub3B0cy5saW5rKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgZmkgPSAwOyBmaSA8IGZlYXR1cmVzLmxlbmd0aDsgKytmaSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZiA9IGZlYXR1cmVzW2ZpXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGYubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGYubGlua3MgPSBbbmV3IERBU0xpbmsoJ0xpbmsnLCB0aGlzQi5vcHRzLmxpbmsucmVwbGFjZSgvXFwkXFwkLywgZi5sYWJlbCkpXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIGZlYXR1cmVzLCBmcyk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufTtcblxuQldHRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUucXVhbnRGaW5kTmV4dEZlYXR1cmUgPSBmdW5jdGlvbihjaHIsIHBvcywgZGlyLCB0aHJlc2hvbGQsIGNhbGxiYWNrKSB7XG4gICAgLy8gdmFyIGJlZm9yZVFGTkYgPSBEYXRlLm5vdygpfDA7XG4gICAgdmFyIHRoaXNCID0gdGhpcztcbiAgICB0aGlzQi5idXN5Kys7XG4gICAgdGhpc0Iubm90aWZ5QWN0aXZpdHkoKTtcbiAgICB0aGlzLmJ3Z0hvbGRlci5yZXMudGhyZXNob2xkU2VhcmNoKGNociwgcG9zLCBkaXIsIHRocmVzaG9sZCwgZnVuY3Rpb24oYSwgYikge1xuICAgICAgICB0aGlzQi5idXN5LS07XG4gICAgICAgIHRoaXNCLm5vdGlmeUFjdGl2aXR5KCk7XG4gICAgICAgIC8vIHZhciBhZnRlclFGTkYgPSBEYXRlLm5vdygpfDA7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdRRk5GIHRvb2sgJyArIChhZnRlclFGTkYgLSBiZWZvcmVRRk5GKSArICdtcycpO1xuICAgICAgICByZXR1cm4gY2FsbGJhY2soYSwgYik7XG4gICAgfSk7XG59O1xuXG5CV0dGZWF0dXJlU291cmNlLnByb3RvdHlwZS5maW5kTmV4dEZlYXR1cmUgPSBmdW5jdGlvbihjaHIsIHBvcywgZGlyLCBjYWxsYmFjaykge1xuICAgIHZhciB0aGlzQiA9IHRoaXM7XG4gICAgdGhpc0IuYnVzeSsrO1xuICAgIHRoaXNCLm5vdGlmeUFjdGl2aXR5KCk7XG4gICAgdGhpcy5id2dIb2xkZXIucmVzLmdldFVuem9vbWVkVmlldygpLmdldEZpcnN0QWRqYWNlbnQoY2hyLCBwb3MsIGRpciwgZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgIHRoaXNCLmJ1c3ktLTtcbiAgICAgICAgdGhpc0Iubm90aWZ5QWN0aXZpdHkoKTtcbiAgICAgICAgaWYgKHJlcy5sZW5ndGggPiAwICYmIHJlc1swXSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgY2FsbGJhY2socmVzWzBdKTtcbiAgICAgICAgfVxuICAgIH0pO1xufTtcblxuQldHRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuZ2V0U2NhbGVzID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGJ3ZyA9IHRoaXMuYndnSG9sZGVyLnJlcztcbiAgICBpZiAoYndnIC8qICYmIGJ3Zy50eXBlID09ICdiaWd3aWcnICovKSB7XG4gICAgICAgIHZhciBzY2FsZXMgPSBbMV07ICAvLyBDYW4gd2UgYmUgc21hcnRlciBhYm91dCBpbmZlcnJpbmcgYmFzZWxpbmUgc2NhbGU/XG4gICAgICAgIGZvciAodmFyIHogPSAwOyB6IDwgYndnLnpvb21MZXZlbHMubGVuZ3RoOyArK3opIHtcbiAgICAgICAgICAgIHNjYWxlcy5wdXNoKGJ3Zy56b29tTGV2ZWxzW3pdLnJlZHVjdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNjYWxlcztcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG59O1xuXG5CV0dGZWF0dXJlU291cmNlLnByb3RvdHlwZS5zZWFyY2ggPSBmdW5jdGlvbihxdWVyeSwgY2FsbGJhY2spIHtcbiAgICBpZiAoIXRoaXMuZXh0cmFJbmRpY2VzIHx8IHRoaXMuZXh0cmFJbmRpY2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCwgJ05vIGluZGljZXMgYXZhaWxhYmxlJyk7XG4gICAgfVxuXG4gICAgdmFyIGluZGV4ID0gdGhpcy5leHRyYUluZGljZXNbMF07XG4gICAgcmV0dXJuIGluZGV4Lmxvb2t1cChxdWVyeSwgY2FsbGJhY2spO1xufTtcblxuQldHRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuZ2V0RGVmYXVsdEZJUHMgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgIGlmICh0aGlzLm9wdHMubm9FeHRyYUZlYXR1cmVJbmZvKVxuICAgICAgICByZXR1cm4gdHJ1ZTtcblxuICAgIHRoaXMuYndnSG9sZGVyLmF3YWl0KGZ1bmN0aW9uKGJ3Zykge1xuICAgICAgICBpZiAoIWJ3ZykgcmV0dXJuO1xuXG4gICAgICAgIGlmIChid2cuc2NoZW1hICYmIGJ3Zy5kZWZpbmVkRmllbGRDb3VudCA8IGJ3Zy5zY2hlbWEuZmllbGRzLmxlbmd0aCkge1xuICAgICAgICAgICAgdmFyIGZpcCA9IGZ1bmN0aW9uKGZlYXR1cmUsIGZlYXR1cmVJbmZvKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaGkgPSAwOyBoaSA8IGZlYXR1cmVJbmZvLmhpdC5sZW5ndGg7ICsraGkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZlYXR1cmVJbmZvLmhpdFtoaV0uaXNTdXBlckdyb3VwKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBmaSA9IGJ3Zy5kZWZpbmVkRmllbGRDb3VudDsgZmkgPCBid2cuc2NoZW1hLmZpZWxkcy5sZW5ndGg7ICsrZmkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGYgPSBid2cuc2NoZW1hLmZpZWxkc1tmaV07XG4gICAgICAgICAgICAgICAgICAgIGZlYXR1cmVJbmZvLmFkZChmLmNvbW1lbnQsIGZlYXR1cmVbZi5uYW1lXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgY2FsbGJhY2soZmlwKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIE5vIG5lZWQgdG8gZG8gYW55dGhpbmcuXG4gICAgICAgIH1cbiAgICB9KTtcbn07XG5cbkJXR0ZlYXR1cmVTb3VyY2UucHJvdG90eXBlLmdldFN0eWxlU2hlZXQgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgIHZhciB0aGlzQiA9IHRoaXM7XG5cbiAgICB0aGlzLmJ3Z0hvbGRlci5hd2FpdChmdW5jdGlvbihid2cpIHtcbiAgICAgICAgaWYgKCFid2cpIHtcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsLCAnYmJpIGVycm9yJyk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgc3R5bGVzaGVldCA9IG5ldyBEQVNTdHlsZXNoZWV0KCk7XG4gICAgICAgIGlmIChid2cudHlwZSA9PSAnYmlnYmVkJykge1xuICAgICAgICAgICAgdmFyIHdpZ1N0eWxlID0gbmV3IERBU1N0eWxlKCk7XG4gICAgICAgICAgICB3aWdTdHlsZS5nbHlwaCA9ICdCT1gnO1xuICAgICAgICAgICAgd2lnU3R5bGUuRkdDT0xPUiA9ICdibGFjayc7XG4gICAgICAgICAgICB3aWdTdHlsZS5CR0NPTE9SID0gJ2JsdWUnO1xuICAgICAgICAgICAgd2lnU3R5bGUuSEVJR0hUID0gODtcbiAgICAgICAgICAgIHdpZ1N0eWxlLkJVTVAgPSB0cnVlO1xuICAgICAgICAgICAgd2lnU3R5bGUuTEFCRUwgPSB0cnVlO1xuICAgICAgICAgICAgd2lnU3R5bGUuWklOREVYID0gMjA7XG4gICAgICAgICAgICBzdHlsZXNoZWV0LnB1c2hTdHlsZSh7dHlwZTogJ2JpZ2JlZCd9LCBudWxsLCB3aWdTdHlsZSk7XG4gICAgICAgIFxuICAgICAgICAgICAgd2lnU3R5bGUuZ2x5cGggPSAnQk9YJztcbiAgICAgICAgICAgIHdpZ1N0eWxlLkZHQ09MT1IgPSAnYmxhY2snO1xuICAgICAgICAgICAgd2lnU3R5bGUuQkdDT0xPUiA9ICdyZWQnO1xuICAgICAgICAgICAgd2lnU3R5bGUuSEVJR0hUID0gMTA7XG4gICAgICAgICAgICB3aWdTdHlsZS5CVU1QID0gdHJ1ZTtcbiAgICAgICAgICAgIHdpZ1N0eWxlLlpJTkRFWCA9IDIwO1xuICAgICAgICAgICAgc3R5bGVzaGVldC5wdXNoU3R5bGUoe3R5cGU6ICd0cmFuc2xhdGlvbid9LCBudWxsLCB3aWdTdHlsZSk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgdmFyIHRzU3R5bGUgPSBuZXcgREFTU3R5bGUoKTtcbiAgICAgICAgICAgIHRzU3R5bGUuZ2x5cGggPSAnQk9YJztcbiAgICAgICAgICAgIHRzU3R5bGUuRkdDT0xPUiA9ICdibGFjayc7XG4gICAgICAgICAgICB0c1N0eWxlLkJHQ09MT1IgPSAnd2hpdGUnO1xuICAgICAgICAgICAgdHNTdHlsZS5IRUlHSFQgPSAxMDtcbiAgICAgICAgICAgIHRzU3R5bGUuWklOREVYID0gMTA7XG4gICAgICAgICAgICB0c1N0eWxlLkJVTVAgPSB0cnVlO1xuICAgICAgICAgICAgdHNTdHlsZS5MQUJFTCA9IHRydWU7XG4gICAgICAgICAgICBzdHlsZXNoZWV0LnB1c2hTdHlsZSh7dHlwZTogJ3RyYW5zY3JpcHQnfSwgbnVsbCwgdHNTdHlsZSk7XG5cbiAgICAgICAgICAgIHZhciBkZW5zU3R5bGUgPSBuZXcgREFTU3R5bGUoKTtcbiAgICAgICAgICAgIGRlbnNTdHlsZS5nbHlwaCA9ICdISVNUT0dSQU0nO1xuICAgICAgICAgICAgZGVuc1N0eWxlLkNPTE9SMSA9ICd3aGl0ZSc7XG4gICAgICAgICAgICBkZW5zU3R5bGUuQ09MT1IyID0gJ2JsYWNrJztcbiAgICAgICAgICAgIGRlbnNTdHlsZS5IRUlHSFQ9MzA7XG4gICAgICAgICAgICBzdHlsZXNoZWV0LnB1c2hTdHlsZSh7dHlwZTogJ2RlbnNpdHknfSwgbnVsbCwgZGVuc1N0eWxlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciB3aWdTdHlsZSA9IG5ldyBEQVNTdHlsZSgpO1xuICAgICAgICAgICAgd2lnU3R5bGUuZ2x5cGggPSAnSElTVE9HUkFNJztcbiAgICAgICAgICAgIHdpZ1N0eWxlLkNPTE9SMSA9ICd3aGl0ZSc7XG4gICAgICAgICAgICB3aWdTdHlsZS5DT0xPUjIgPSAnYmxhY2snO1xuICAgICAgICAgICAgd2lnU3R5bGUuSEVJR0hUPTMwO1xuICAgICAgICAgICAgc3R5bGVzaGVldC5wdXNoU3R5bGUoe3R5cGU6ICdkZWZhdWx0J30sIG51bGwsIHdpZ1N0eWxlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChid2cuZGVmaW5lZEZpZWxkQ291bnQgPT0gMTIgJiYgYndnLmZpZWxkQ291bnQgPj0gMTQpIHtcbiAgICAgICAgICAgIHN0eWxlc2hlZXQuZ2VuZUhpbnQgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKHN0eWxlc2hlZXQpO1xuICAgIH0pO1xufTtcblxuZnVuY3Rpb24gUmVtb3RlQldHRmVhdHVyZVNvdXJjZShid2dTb3VyY2UsIHdvcmtlciwgYnJvd3Nlcikge1xuICAgIEZlYXR1cmVTb3VyY2VCYXNlLmNhbGwodGhpcyk7XG5cbiAgICB2YXIgdGhpc0IgPSB0aGlzO1xuICAgIHRoaXMud29ya2VyID0gd29ya2VyO1xuICAgIHRoaXMucmVhZGluZXNzID0gJ0Nvbm5lY3RpbmcnO1xuICAgIHRoaXMuYndnU291cmNlID0gdGhpcy5vcHRzID0gYndnU291cmNlO1xuICAgIHRoaXMua2V5SG9sZGVyID0gbmV3IEF3YWl0ZWQoKTtcblxuICAgIGlmIChid2dTb3VyY2UucmVzb2x2ZXIpIHtcbiAgICAgICAgdGhpcy5yZXNvbHZlcktleSA9IGJyb3dzZXIucmVnaXN0ZXJSZXNvbHZlcihid2dTb3VyY2UucmVzb2x2ZXIpO1xuICAgIH1cblxuICAgIHRoaXMuaW5pdCgpO1xufVxuXG5SZW1vdGVCV0dGZWF0dXJlU291cmNlLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoRmVhdHVyZVNvdXJjZUJhc2UucHJvdG90eXBlKTtcblxuUmVtb3RlQldHRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciB0aGlzQiA9IHRoaXM7XG4gICAgdmFyIHVyaSA9IHRoaXMudXJpIHx8IHRoaXMuYndnU291cmNlLnVyaSB8fCB0aGlzLmJ3Z1NvdXJjZS5id2dVUkk7XG4gICAgdmFyIGJsb2IgPSB0aGlzLmJ3Z1NvdXJjZS5ibG9iIHx8IHRoaXMuYndnU291cmNlLmJ3Z0Jsb2I7XG5cbiAgICB2YXIgY250ID0gZnVuY3Rpb24oa2V5LCBlcnIpIHtcbiAgICAgICAgdGhpc0IucmVhZGluZXNzID0gbnVsbDtcbiAgICAgICAgdGhpc0Iubm90aWZ5UmVhZGluZXNzKCk7XG5cbiAgICAgICAgaWYgKGtleSkge1xuICAgICAgICAgICAgdGhpc0Iud29ya2VyLnBvc3RDb21tYW5kKHtjb21tYW5kOiAnbWV0YScsIGNvbm5lY3Rpb246IGtleX0sIGZ1bmN0aW9uKG1ldGEsIGVycikge1xuICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpc0IuZXJyb3IgPSBlcnI7XG4gICAgICAgICAgICAgICAgICAgIHRoaXNCLmtleUhvbGRlci5wcm92aWRlKG51bGwpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXNCLm1ldGEgPSBtZXRhO1xuICAgICAgICAgICAgICAgICAgICB0aGlzQi5rZXlIb2xkZXIucHJvdmlkZShrZXkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpc0IuZXJyb3IgPSBlcnI7XG4gICAgICAgICAgICB0aGlzQi5rZXlIb2xkZXIucHJvdmlkZShudWxsKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBpZiAoYmxvYikge1xuICAgICAgICB0aGlzLndvcmtlci5wb3N0Q29tbWFuZCh7Y29tbWFuZDogJ2Nvbm5lY3RCQkknLCBibG9iOiBibG9ifSwgY250KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLndvcmtlci5wb3N0Q29tbWFuZCh7XG4gICAgICAgICAgICBjb21tYW5kOiAnY29ubmVjdEJCSScsIFxuICAgICAgICAgICAgdXJpOiByZXNvbHZlVXJsVG9QYWdlKHVyaSksIFxuICAgICAgICAgICAgcmVzb2x2ZXI6IHRoaXMucmVzb2x2ZXJLZXksXG4gICAgICAgICAgICB0cmFuc3BvcnQ6IHRoaXMuYndnU291cmNlLnRyYW5zcG9ydCxcbiAgICAgICAgICAgIGNyZWRlbnRpYWxzOiB0aGlzLmJ3Z1NvdXJjZS5jcmVkZW50aWFsc30sIFxuICAgICAgICAgIGNudCk7IFxuICAgIH1cbn07XG5cblJlbW90ZUJXR0ZlYXR1cmVTb3VyY2UucHJvdG90eXBlLmNhcGFiaWxpdGllcyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBjYXBzID0ge2xlYXA6IHRydWV9O1xuXG4gICAgaWYgKHRoaXMubWV0YSAmJiB0aGlzLm1ldGEudHlwZSA9PSAnYmlnd2lnJylcbiAgICAgICAgY2Fwcy5xdWFudExlYXAgPSB0cnVlO1xuICAgIGlmICh0aGlzLm1ldGEgJiYgdGhpcy5tZXRhLmV4dHJhSW5kaWNlcyAmJiB0aGlzLm1ldGEuZXh0cmFJbmRpY2VzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY2Fwcy5zZWFyY2ggPSBbXTtcbiAgICAgICAgZm9yICh2YXIgZWlpID0gMDsgZWlpIDwgdGhpcy5tZXRhLmV4dHJhSW5kaWNlcy5sZW5ndGg7ICsrZWlpKSB7XG4gICAgICAgICAgICBjYXBzLnNlYXJjaC5wdXNoKHRoaXMubWV0YS5leHRyYUluZGljZXNbZWlpXS5maWVsZCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGNhcHM7XG59O1xuXG5SZW1vdGVCV0dGZWF0dXJlU291cmNlLnByb3RvdHlwZS5mZXRjaCA9IGZ1bmN0aW9uKGNociwgbWluLCBtYXgsIHNjYWxlLCB0eXBlcywgcG9vbCwgY2FsbGJhY2spIHtcbiAgICB2YXIgdGhpc0IgPSB0aGlzO1xuXG4gICAgdGhpc0IuYnVzeSsrO1xuICAgIHRoaXNCLm5vdGlmeUFjdGl2aXR5KCk7XG5cbiAgICB0aGlzLmtleUhvbGRlci5hd2FpdChmdW5jdGlvbihrZXkpIHtcbiAgICAgICAgaWYgKCFrZXkpIHtcbiAgICAgICAgICAgIHRoaXNCLmJ1c3ktLTtcbiAgICAgICAgICAgIHRoaXNCLm5vdGlmeUFjdGl2aXR5KCk7XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sodGhpc0IuZXJyb3IgfHwgXCJDYW4ndCBhY2Nlc3MgYmluYXJ5IGZpbGVcIiwgbnVsbCwgbnVsbCk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgem9vbSA9IC0xO1xuICAgICAgICB2YXIgd2FudERlbnNpdHkgPSAhdHlwZXMgfHwgdHlwZXMubGVuZ3RoID09PSAwIHx8IGFycmF5SW5kZXhPZih0eXBlcywgJ2RlbnNpdHknKSA+PSAwO1xuICAgICAgICBpZiAodGhpc0Iub3B0cy5jbGllbnRCaW4pIHtcbiAgICAgICAgICAgIHdhbnREZW5zaXR5ID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXNCLm1ldGEudHlwZSA9PSAnYmlnd2lnJyB8fCB3YW50RGVuc2l0eSB8fCAodHlwZW9mIHRoaXNCLm9wdHMuZm9yY2VSZWR1Y3Rpb24gIT09ICd1bmRlZmluZWQnKSkge1xuICAgICAgICAgICAgZm9yICh2YXIgeiA9IDE7IHogPCB0aGlzQi5tZXRhLnpvb21MZXZlbHMubGVuZ3RoOyArK3opIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpc0IubWV0YS56b29tTGV2ZWxzW3pdIDw9IHNjYWxlKSB7XG4gICAgICAgICAgICAgICAgICAgIHpvb20gPSB6IC0gMTsgLy8gU2NhbGVzIHJldHVybmVkIGluIG1ldGFkYXRhIHN0YXJ0IGF0IDEsIHVubGlrZSBcInJlYWxcIiB6b29tIGxldmVscy5cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHlwZW9mIHRoaXNCLm9wdHMuZm9yY2VSZWR1Y3Rpb24gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgem9vbSA9IHRoaXNCLm9wdHMuZm9yY2VSZWR1Y3Rpb247XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHRoaXNCLndvcmtlci5wb3N0Q29tbWFuZCh7Y29tbWFuZDogJ2ZldGNoJywgY29ubmVjdGlvbjoga2V5LCBjaHI6IGNociwgbWluOiBtaW4sIG1heDogbWF4LCB6b29tOiB6b29tfSwgZnVuY3Rpb24oZmVhdHVyZXMsIGVycm9yKSB7XG4gICAgICAgICAgICB0aGlzQi5idXN5LS07XG4gICAgICAgICAgICB0aGlzQi5ub3RpZnlBY3Rpdml0eSgpO1xuXG4gICAgICAgICAgICB2YXIgZnMgPSAxMDAwMDAwMDAwO1xuICAgICAgICAgICAgaWYgKHRoaXNCLm1ldGEudHlwZSA9PT0gJ2JpZ3dpZycpIHtcbiAgICAgICAgICAgICAgICB2YXIgaXMgPSAobWF4IC0gbWluKSAvIGZlYXR1cmVzLmxlbmd0aCAvIDI7XG4gICAgICAgICAgICAgICAgaWYgKGlzIDwgZnMpIHtcbiAgICAgICAgICAgICAgICAgICAgZnMgPSBpcztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IFxuICAgICAgICAgICAgaWYgKHRoaXNCLm9wdHMubGluaykge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGZpID0gMDsgZmkgPCBmZWF0dXJlcy5sZW5ndGg7ICsrZmkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGYgPSBmZWF0dXJlc1tmaV07XG4gICAgICAgICAgICAgICAgICAgIGlmIChmLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmLmxpbmtzID0gW25ldyBEQVNMaW5rKCdMaW5rJywgdGhpc0Iub3B0cy5saW5rLnJlcGxhY2UoL1xcJFxcJC8sIGYubGFiZWwpKV07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IFxuICAgICAgICAgICAgY2FsbGJhY2soZXJyb3IsIGZlYXR1cmVzLCBmcyk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufTtcblxuXG5SZW1vdGVCV0dGZWF0dXJlU291cmNlLnByb3RvdHlwZS5xdWFudEZpbmROZXh0RmVhdHVyZSA9IGZ1bmN0aW9uKGNociwgcG9zLCBkaXIsIHRocmVzaG9sZCwgY2FsbGJhY2spIHtcbiAgICB2YXIgdGhpc0IgPSB0aGlzO1xuICAgIHRoaXMuYnVzeSsrO1xuICAgIHRoaXMubm90aWZ5QWN0aXZpdHkoKTtcbiAgICB0aGlzLndvcmtlci5wb3N0Q29tbWFuZCh7Y29tbWFuZDogJ3F1YW50TGVhcCcsIGNvbm5lY3Rpb246IHRoaXMua2V5SG9sZGVyLnJlcywgY2hyOiBjaHIsIHBvczogcG9zLCBkaXI6IGRpciwgdGhyZXNob2xkOiB0aHJlc2hvbGQsIHVuZGVyOiBmYWxzZX0sIGZ1bmN0aW9uKHJlc3VsdCwgZXJyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCwgZXJyKTtcbiAgICAgICAgdGhpc0IuYnVzeS0tO1xuICAgICAgICB0aGlzQi5ub3RpZnlBY3Rpdml0eSgpO1xuICAgICAgICByZXR1cm4gY2FsbGJhY2socmVzdWx0LCBlcnIpO1xuICAgIH0pO1xufTtcblxuUmVtb3RlQldHRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuZmluZE5leHRGZWF0dXJlID0gZnVuY3Rpb24oY2hyLCBwb3MsIGRpciwgY2FsbGJhY2spIHtcbiAgICB2YXIgdGhpc0IgPSB0aGlzO1xuICAgIHRoaXMuYnVzeSsrO1xuICAgIHRoaXMubm90aWZ5QWN0aXZpdHkoKTtcbiAgICB0aGlzLndvcmtlci5wb3N0Q29tbWFuZCh7Y29tbWFuZDogJ2xlYXAnLCBjb25uZWN0aW9uOiB0aGlzLmtleUhvbGRlci5yZXMsIGNocjogY2hyLCBwb3M6IHBvcywgZGlyOiBkaXJ9LCBmdW5jdGlvbihyZXN1bHQsIGVycikge1xuICAgICAgICB0aGlzQi5idXN5LS07XG4gICAgICAgIHRoaXNCLm5vdGlmeUFjdGl2aXR5KCk7XG4gICAgICAgIGlmIChyZXN1bHQubGVuZ3RoID4gMCAmJiByZXN1bHRbMF0gIT09IG51bGwpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKHJlc3VsdFswXSk7XG4gICAgICAgIH1cbiAgICB9KTtcbn07XG5cblJlbW90ZUJXR0ZlYXR1cmVTb3VyY2UucHJvdG90eXBlLmdldFNjYWxlcyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBtZXRhID0gdGhpcy5tZXRhO1xuICAgIGlmIChtZXRhKSB7XG4gICAgICAgIHJldHVybiBtZXRhLnpvb21MZXZlbHM7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufTtcblxuUmVtb3RlQldHRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuc2VhcmNoID0gZnVuY3Rpb24ocXVlcnksIGNhbGxiYWNrKSB7XG4gICAgaWYgKCF0aGlzLm1ldGEuZXh0cmFJbmRpY2VzIHx8IHRoaXMubWV0YS5leHRyYUluZGljZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsLCAnTm8gaW5kaWNlcyBhdmFpbGFibGUnKTtcbiAgICB9XG5cbiAgICB2YXIgdGhpc0IgPSB0aGlzO1xuICAgIHRoaXMuYnVzeSsrO1xuICAgIHRoaXMubm90aWZ5QWN0aXZpdHkoKTtcbiAgICB2YXIgaW5kZXggPSB0aGlzLm1ldGEuZXh0cmFJbmRpY2VzWzBdO1xuICAgIHRoaXMud29ya2VyLnBvc3RDb21tYW5kKHtjb21tYW5kOiAnc2VhcmNoJywgY29ubmVjdGlvbjogdGhpcy5rZXlIb2xkZXIucmVzLCBxdWVyeTogcXVlcnksIGluZGV4OiBpbmRleH0sIGZ1bmN0aW9uKHJlc3VsdCwgZXJyKSB7XG4gICAgICAgIHRoaXNCLmJ1c3ktLTtcbiAgICAgICAgdGhpc0Iubm90aWZ5QWN0aXZpdHkoKTtcblxuICAgICAgICBjYWxsYmFjayhyZXN1bHQsIGVycik7XG4gICAgfSk7XG59O1xuXG5SZW1vdGVCV0dGZWF0dXJlU291cmNlLnByb3RvdHlwZS5nZXREZWZhdWx0RklQcyA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgaWYgKHRoaXMub3B0cy5ub0V4dHJhRmVhdHVyZUluZm8pXG4gICAgICAgIHJldHVybiB0cnVlO1xuXG4gICAgdmFyIHRoaXNCID0gdGhpcztcbiAgICB0aGlzLmtleUhvbGRlci5hd2FpdChmdW5jdGlvbihrZXkpIHtcbiAgICAgICAgdmFyIGJ3ZyA9IHRoaXNCLm1ldGE7XG4gICAgICAgIGlmICghYndnKSByZXR1cm47XG5cbiAgICAgICAgaWYgKGJ3Zy5zY2hlbWEgJiYgYndnLmRlZmluZWRGaWVsZENvdW50IDwgYndnLnNjaGVtYS5maWVsZHMubGVuZ3RoKSB7XG4gICAgICAgICAgICB2YXIgZmlwID0gZnVuY3Rpb24oZmVhdHVyZSwgZmVhdHVyZUluZm8pIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBoaSA9IDA7IGhpIDwgZmVhdHVyZUluZm8uaGl0Lmxlbmd0aDsgKytoaSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZmVhdHVyZUluZm8uaGl0W2hpXS5pc1N1cGVyR3JvdXApXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvciAodmFyIGZpID0gYndnLmRlZmluZWRGaWVsZENvdW50OyBmaSA8IGJ3Zy5zY2hlbWEuZmllbGRzLmxlbmd0aDsgKytmaSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZiA9IGJ3Zy5zY2hlbWEuZmllbGRzW2ZpXTtcbiAgICAgICAgICAgICAgICAgICAgZmVhdHVyZUluZm8uYWRkKGYuY29tbWVudCwgZmVhdHVyZVtmLm5hbWVdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBjYWxsYmFjayhmaXApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gTm8gbmVlZCB0byBkbyBhbnl0aGluZy5cbiAgICAgICAgfVxuICAgIH0pO1xufTtcblxuUmVtb3RlQldHRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuZ2V0U3R5bGVTaGVldCA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgdmFyIHRoaXNCID0gdGhpcztcblxuICAgIHRoaXMua2V5SG9sZGVyLmF3YWl0KGZ1bmN0aW9uKGtleSkge1xuICAgICAgICB2YXIgYndnID0gdGhpc0IubWV0YTtcbiAgICAgICAgaWYgKCFid2cpIHtcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsLCAnYmJpIGVycm9yJyk7XG4gICAgICAgIH0gXG5cbiAgICAgICAgdmFyIHN0eWxlc2hlZXQgPSBuZXcgREFTU3R5bGVzaGVldCgpO1xuICAgICAgICBpZiAoYndnLnR5cGUgPT0gJ2JpZ2JlZCcpIHtcbiAgICAgICAgICAgIHZhciB3aWdTdHlsZSA9IG5ldyBEQVNTdHlsZSgpO1xuICAgICAgICAgICAgd2lnU3R5bGUuZ2x5cGggPSAnQk9YJztcbiAgICAgICAgICAgIHdpZ1N0eWxlLkZHQ09MT1IgPSAnYmxhY2snO1xuICAgICAgICAgICAgd2lnU3R5bGUuQkdDT0xPUiA9ICdibHVlJztcbiAgICAgICAgICAgIHdpZ1N0eWxlLkhFSUdIVCA9IDg7XG4gICAgICAgICAgICB3aWdTdHlsZS5CVU1QID0gdHJ1ZTtcbiAgICAgICAgICAgIHdpZ1N0eWxlLkxBQkVMID0gdHJ1ZTtcbiAgICAgICAgICAgIHdpZ1N0eWxlLlpJTkRFWCA9IDIwO1xuICAgICAgICAgICAgc3R5bGVzaGVldC5wdXNoU3R5bGUoe3R5cGU6ICdiaWdiZWQnfSwgbnVsbCwgd2lnU3R5bGUpO1xuICAgICAgICBcbiAgICAgICAgICAgIHdpZ1N0eWxlLmdseXBoID0gJ0JPWCc7XG4gICAgICAgICAgICB3aWdTdHlsZS5GR0NPTE9SID0gJ2JsYWNrJztcbiAgICAgICAgICAgIHdpZ1N0eWxlLkJHQ09MT1IgPSAncmVkJztcbiAgICAgICAgICAgIHdpZ1N0eWxlLkhFSUdIVCA9IDEwO1xuICAgICAgICAgICAgd2lnU3R5bGUuQlVNUCA9IHRydWU7XG4gICAgICAgICAgICB3aWdTdHlsZS5aSU5ERVggPSAyMDtcbiAgICAgICAgICAgIHN0eWxlc2hlZXQucHVzaFN0eWxlKHt0eXBlOiAndHJhbnNsYXRpb24nfSwgbnVsbCwgd2lnU3R5bGUpO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIHZhciB0c1N0eWxlID0gbmV3IERBU1N0eWxlKCk7XG4gICAgICAgICAgICB0c1N0eWxlLmdseXBoID0gJ0JPWCc7XG4gICAgICAgICAgICB0c1N0eWxlLkZHQ09MT1IgPSAnYmxhY2snO1xuICAgICAgICAgICAgdHNTdHlsZS5CR0NPTE9SID0gJ3doaXRlJztcbiAgICAgICAgICAgIHRzU3R5bGUuSEVJR0hUID0gMTA7XG4gICAgICAgICAgICB0c1N0eWxlLlpJTkRFWCA9IDEwO1xuICAgICAgICAgICAgdHNTdHlsZS5CVU1QID0gdHJ1ZTtcbiAgICAgICAgICAgIHRzU3R5bGUuTEFCRUwgPSB0cnVlO1xuICAgICAgICAgICAgc3R5bGVzaGVldC5wdXNoU3R5bGUoe3R5cGU6ICd0cmFuc2NyaXB0J30sIG51bGwsIHRzU3R5bGUpO1xuXG4gICAgICAgICAgICB2YXIgZGVuc1N0eWxlID0gbmV3IERBU1N0eWxlKCk7XG4gICAgICAgICAgICBkZW5zU3R5bGUuZ2x5cGggPSAnSElTVE9HUkFNJztcbiAgICAgICAgICAgIGRlbnNTdHlsZS5DT0xPUjEgPSAnd2hpdGUnO1xuICAgICAgICAgICAgZGVuc1N0eWxlLkNPTE9SMiA9ICdibGFjayc7XG4gICAgICAgICAgICBkZW5zU3R5bGUuSEVJR0hUPTMwO1xuICAgICAgICAgICAgc3R5bGVzaGVldC5wdXNoU3R5bGUoe3R5cGU6ICdkZW5zaXR5J30sIG51bGwsIGRlbnNTdHlsZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgd2lnU3R5bGUgPSBuZXcgREFTU3R5bGUoKTtcbiAgICAgICAgICAgIHdpZ1N0eWxlLmdseXBoID0gJ0hJU1RPR1JBTSc7XG4gICAgICAgICAgICB3aWdTdHlsZS5DT0xPUjEgPSAnd2hpdGUnO1xuICAgICAgICAgICAgd2lnU3R5bGUuQ09MT1IyID0gJ2JsYWNrJztcbiAgICAgICAgICAgIHdpZ1N0eWxlLkhFSUdIVD0zMDtcbiAgICAgICAgICAgIHN0eWxlc2hlZXQucHVzaFN0eWxlKHt0eXBlOiAnZGVmYXVsdCd9LCBudWxsLCB3aWdTdHlsZSk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGlmIChid2cuZGVmaW5lZEZpZWxkQ291bnQgPT0gMTIgJiYgYndnLmZpZWxkQ291bnQgPj0gMTQpIHtcbiAgICAgICAgICAgIHN0eWxlc2hlZXQuZ2VuZUhpbnQgPSB0cnVlO1xuICAgICAgICB9IFxuXG4gICAgICAgIHJldHVybiBjYWxsYmFjayhzdHlsZXNoZWV0KTtcbiAgICB9KTtcbn07XG5cbmZ1bmN0aW9uIGJhbVJlY29yZFRvRmVhdHVyZShyLCBncm91cCkge1xuICAgIGlmIChyLmZsYWcgJiBCYW1GbGFncy5TRUdNRU5UX1VOTUFQUEVEKVxuICAgICAgICByZXR1cm47IFxuICAgIFxuICAgIHZhciBsZW47XG4gICAgaWYgKHIuc2VxKVxuICAgICAgICBsZW4gPSByLnNlcS5sZW5ndGg7XG4gICAgZWxzZSBcbiAgICAgICAgbGVuID0gci5zZXFMZW5ndGg7XG4gICAgXG4gICAgaWYgKHIuY2lnYXIpIHtcbiAgICAgICAgbGVuID0gMDtcbiAgICAgICAgdmFyIG9wcyA9IHBhcnNlQ2lnYXIoci5jaWdhcik7XG4gICAgICAgIGZvciAodmFyIGNpID0gMDsgY2kgPCBvcHMubGVuZ3RoOyArK2NpKSB7XG4gICAgICAgICAgICB2YXIgY28gPSBvcHNbY2ldO1xuICAgICAgICAgICAgaWYgKGNvLm9wID09ICdNJyB8fCBjby5vcCA9PSAnRCcpXG4gICAgICAgICAgICAgICAgbGVuICs9IGNvLmNudDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHZhciBmID0gbmV3IERBU0ZlYXR1cmUoKTtcbiAgICBmLm1pbiA9IHIucG9zICsgMTtcbiAgICBmLm1heCA9IHIucG9zICsgbGVuO1xuICAgIGYuc2VnbWVudCA9IHIuc2VnbWVudDtcbiAgICBmLnR5cGUgPSAnYmFtJztcbiAgICBmLmlkID0gci5yZWFkTmFtZTtcbiAgICBmLm5vdGVzID0gWy8qICdTZXF1ZW5jZT0nICsgci5zZXEsICdDSUdBUj0nICsgci5jaWdhciwgKi8gJ01RPScgKyByLm1xXTtcbiAgICBmLmNpZ2FyID0gci5jaWdhcjtcbiAgICBmLnNlcSA9IHIuc2VxO1xuICAgIGYucXVhbHMgPSByLnF1YWxzO1xuICAgIGYub3JpZW50YXRpb24gPSAoci5mbGFnICYgQmFtRmxhZ3MuUkVWRVJTRV9DT01QTEVNRU5UKSA/ICctJyA6ICcrJztcbiAgICBmLmJhbVJlY29yZCA9IHI7XG5cbiAgICBpZiAoZ3JvdXAgJiYgKHIuZmxhZyAmIEJhbUZsYWdzLk1VTFRJUExFX1NFR01FTlRTKSkge1xuICAgICAgICBmLmdyb3VwcyA9IFt7aWQ6IHIucmVhZE5hbWUsIFxuICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3JlYWRwYWlyJ31dO1xuICAgIH1cblxuICAgIHJldHVybiBmO1xufVxuXG5mdW5jdGlvbiBCQU1GZWF0dXJlU291cmNlKGJhbVNvdXJjZSkge1xuICAgIEZlYXR1cmVTb3VyY2VCYXNlLmNhbGwodGhpcyk7XG5cbiAgICB2YXIgdGhpc0IgPSB0aGlzO1xuICAgIHRoaXMuYmFtU291cmNlID0gYmFtU291cmNlO1xuICAgIHRoaXMub3B0cyA9IHtjcmVkZW50aWFsczogYmFtU291cmNlLmNyZWRlbnRpYWxzLCBwcmVmbGlnaHQ6IGJhbVNvdXJjZS5wcmVmbGlnaHQsIGJhbUdyb3VwOiBiYW1Tb3VyY2UuYmFtR3JvdXB9O1xuICAgIHRoaXMuYmFtSG9sZGVyID0gbmV3IEF3YWl0ZWQoKTtcbiAgICBcbiAgICBpZiAodGhpcy5vcHRzLnByZWZsaWdodCkge1xuICAgICAgICB2YXIgcGZzID0gYndnX3ByZWZsaWdodHNbdGhpcy5vcHRzLnByZWZsaWdodF07XG4gICAgICAgIGlmICghcGZzKSB7XG4gICAgICAgICAgICBwZnMgPSBuZXcgQXdhaXRlZCgpO1xuICAgICAgICAgICAgYndnX3ByZWZsaWdodHNbdGhpcy5vcHRzLnByZWZsaWdodF0gPSBwZnM7XG5cbiAgICAgICAgICAgIHZhciByZXEgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgICAgICAgIHJlcS5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVxLnJlYWR5U3RhdGUgPT0gNCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVxLnN0YXR1cyA9PSAyMDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBmcy5wcm92aWRlKCdzdWNjZXNzJyk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwZnMucHJvdmlkZSgnZmFpbHVyZScpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIC8vIHJlcS5zZXRSZXF1ZXN0SGVhZGVyKCdjYWNoZS1jb250cm9sJywgJ25vLWNhY2hlJyk7ICAgIC8qIERvZXNuJ3Qgd29yaywgbm90IGFuIGFsbG93ZWQgcmVxdWVzdCBoZWFkZXIgaW4gQ09SUyAqL1xuICAgICAgICAgICAgcmVxLm9wZW4oJ2dldCcsIHRoaXMub3B0cy5wcmVmbGlnaHQgKyAnPycgKyBoZXhfc2hhMSgnc2FsdCcgKyBEYXRlLm5vdygpKSwgdHJ1ZSk7ICAgIC8vIEluc3RlYWQsIGVuc3VyZSB3ZSBhbHdheXMgcHJlZmxpZ2h0IGEgdW5pcXVlIFVSSS5cbiAgICAgICAgICAgIGlmICh0aGlzLm9wdHMuY3JlZGVudGlhbHMpIHtcbiAgICAgICAgICAgICAgICByZXEud2l0aENyZWRlbnRpYWxzID0gJ3RydWUnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVxLnNlbmQoKTtcbiAgICAgICAgfVxuICAgICAgICBwZnMuYXdhaXQoZnVuY3Rpb24oc3RhdHVzKSB7XG4gICAgICAgICAgICBpZiAoc3RhdHVzID09PSAnc3VjY2VzcycpIHtcbiAgICAgICAgICAgICAgICB0aGlzQi5pbml0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXNCLmluaXQoKTtcbiAgICB9XG59XG5cbkJBTUZlYXR1cmVTb3VyY2UucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShGZWF0dXJlU291cmNlQmFzZS5wcm90b3R5cGUpO1xuXG5CQU1GZWF0dXJlU291cmNlLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHRoaXNCID0gdGhpcztcbiAgICB2YXIgYmFtRiwgYmFpRjtcbiAgICBpZiAodGhpcy5iYW1Tb3VyY2UuYmFtQmxvYikge1xuICAgICAgICBiYW1GID0gbmV3IEJsb2JGZXRjaGFibGUodGhpcy5iYW1Tb3VyY2UuYmFtQmxvYik7XG4gICAgICAgIGJhaUYgPSBuZXcgQmxvYkZldGNoYWJsZSh0aGlzLmJhbVNvdXJjZS5iYWlCbG9iKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBiYW1GID0gbmV3IFVSTEZldGNoYWJsZSh0aGlzLmJhbVNvdXJjZS5iYW1VUkksIHtjcmVkZW50aWFsczogdGhpcy5vcHRzLmNyZWRlbnRpYWxzLCByZXNvbHZlcjogdGhpcy5vcHRzLnJlc29sdmVyfSk7XG4gICAgICAgIGJhaUYgPSBuZXcgVVJMRmV0Y2hhYmxlKHRoaXMuYmFtU291cmNlLmJhaVVSSSB8fCAodGhpcy5iYW1Tb3VyY2UuYmFtVVJJICsgJy5iYWknKSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtjcmVkZW50aWFsczogdGhpcy5vcHRzLmNyZWRlbnRpYWxzLCByZXNvbHZlcjogdGhpcy5vcHRzLnJlc29sdmVyfSk7XG4gICAgfVxuICAgIG1ha2VCYW0oYmFtRiwgYmFpRiwgbnVsbCwgZnVuY3Rpb24oYmFtLCBlcnIpIHtcbiAgICAgICAgdGhpc0IucmVhZGluZXNzID0gbnVsbDtcbiAgICAgICAgdGhpc0Iubm90aWZ5UmVhZGluZXNzKCk7XG5cbiAgICAgICAgaWYgKGJhbSkge1xuICAgICAgICAgICAgdGhpc0IuYmFtSG9sZGVyLnByb3ZpZGUoYmFtKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXNCLmVycm9yID0gZXJyO1xuICAgICAgICAgICAgdGhpc0IuYmFtSG9sZGVyLnByb3ZpZGUobnVsbCk7XG4gICAgICAgIH1cbiAgICB9KTtcbn07XG5cbkJBTUZlYXR1cmVTb3VyY2UucHJvdG90eXBlLmZldGNoID0gZnVuY3Rpb24oY2hyLCBtaW4sIG1heCwgc2NhbGUsIHR5cGVzLCBwb29sLCBjYWxsYmFjaykge1xuICAgIHZhciBsaWdodCA9IHR5cGVzICYmICh0eXBlcy5sZW5ndGggPT0gMSkgJiYgKHR5cGVzWzBdID09ICdkZW5zaXR5Jyk7XG5cbiAgICB2YXIgdGhpc0IgPSB0aGlzO1xuICAgIFxuICAgIHRoaXNCLmJ1c3krKztcbiAgICB0aGlzQi5ub3RpZnlBY3Rpdml0eSgpO1xuICAgIFxuICAgIHRoaXMuYmFtSG9sZGVyLmF3YWl0KGZ1bmN0aW9uKGJhbSkge1xuICAgICAgICBpZiAoIWJhbSkge1xuICAgICAgICAgICAgdGhpc0IuYnVzeS0tO1xuICAgICAgICAgICAgdGhpc0Iubm90aWZ5QWN0aXZpdHkoKTtcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayh0aGlzQi5lcnJvciB8fCBcIkNvdWxkbid0IGZldGNoIEJBTVwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGJhbS5mZXRjaChjaHIsIG1pbiwgbWF4LCBmdW5jdGlvbihiYW1SZWNvcmRzLCBlcnJvcikge1xuICAgICAgICAgICAgdGhpc0IuYnVzeS0tO1xuICAgICAgICAgICAgdGhpc0Iubm90aWZ5QWN0aXZpdHkoKTtcblxuICAgICAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soZXJyb3IsIG51bGwsIG51bGwpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgZmVhdHVyZXMgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciByaSA9IDA7IHJpIDwgYmFtUmVjb3Jkcy5sZW5ndGg7ICsrcmkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBiYW1SZWNvcmRzW3JpXTtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgZiA9IGJhbVJlY29yZFRvRmVhdHVyZShyLCB0aGlzQi5vcHRzLmJhbUdyb3VwKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGYpXG4gICAgICAgICAgICAgICAgICAgICAgICBmZWF0dXJlcy5wdXNoKGYpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYWxsYmFjayhudWxsLCBmZWF0dXJlcywgMTAwMDAwMDAwMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIHtsaWdodDogbGlnaHR9KTtcbiAgICB9KTtcbn07XG5cbkJBTUZlYXR1cmVTb3VyY2UucHJvdG90eXBlLmdldFNjYWxlcyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAxMDAwMDAwMDAwO1xufTtcblxuQkFNRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuZ2V0U3R5bGVTaGVldCA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgdGhpcy5iYW1Ib2xkZXIuYXdhaXQoZnVuY3Rpb24oYmFtKSB7XG4gICAgICAgIHZhciBzdHlsZXNoZWV0ID0gbmV3IERBU1N0eWxlc2hlZXQoKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgdmFyIGRlbnNTdHlsZSA9IG5ldyBEQVNTdHlsZSgpO1xuICAgICAgICBkZW5zU3R5bGUuZ2x5cGggPSAnSElTVE9HUkFNJztcbiAgICAgICAgZGVuc1N0eWxlLkNPTE9SMSA9ICdibGFjayc7XG4gICAgICAgIGRlbnNTdHlsZS5DT0xPUjIgPSAncmVkJztcbiAgICAgICAgZGVuc1N0eWxlLkhFSUdIVD0zMDtcbiAgICAgICAgc3R5bGVzaGVldC5wdXNoU3R5bGUoe3R5cGU6ICdkZW5zaXR5J30sICdsb3cnLCBkZW5zU3R5bGUpO1xuICAgICAgICBzdHlsZXNoZWV0LnB1c2hTdHlsZSh7dHlwZTogJ2RlbnNpdHknfSwgJ21lZGl1bScsIGRlbnNTdHlsZSk7XG5cbiAgICAgICAgdmFyIHdpZ1N0eWxlID0gbmV3IERBU1N0eWxlKCk7XG4gICAgICAgIHdpZ1N0eWxlLmdseXBoID0gJ19fU0VRVUVOQ0UnO1xuICAgICAgICB3aWdTdHlsZS5GR0NPTE9SID0gJ2JsYWNrJztcbiAgICAgICAgd2lnU3R5bGUuQkdDT0xPUiA9ICdibHVlJztcbiAgICAgICAgd2lnU3R5bGUuSEVJR0hUID0gODtcbiAgICAgICAgd2lnU3R5bGUuQlVNUCA9IHRydWU7XG4gICAgICAgIHdpZ1N0eWxlLkxBQkVMID0gZmFsc2U7XG4gICAgICAgIHdpZ1N0eWxlLlpJTkRFWCA9IDIwO1xuICAgICAgICBzdHlsZXNoZWV0LnB1c2hTdHlsZSh7dHlwZTogJ2JhbSd9LCAnaGlnaCcsIHdpZ1N0eWxlKTtcblxuICAgICAgICByZXR1cm4gY2FsbGJhY2soc3R5bGVzaGVldCk7XG4gICAgfSk7XG59O1xuXG5cbmZ1bmN0aW9uIFJlbW90ZUJBTUZlYXR1cmVTb3VyY2UoYmFtU291cmNlLCB3b3JrZXIpIHtcbiAgICBGZWF0dXJlU291cmNlQmFzZS5jYWxsKHRoaXMpO1xuXG4gICAgdmFyIHRoaXNCID0gdGhpcztcbiAgICB0aGlzLmJhbVNvdXJjZSA9IGJhbVNvdXJjZTtcbiAgICB0aGlzLndvcmtlciA9IHdvcmtlcjtcbiAgICB0aGlzLm9wdHMgPSB7Y3JlZGVudGlhbHM6IGJhbVNvdXJjZS5jcmVkZW50aWFscywgcHJlZmxpZ2h0OiBiYW1Tb3VyY2UucHJlZmxpZ2h0LCBiYW1Hcm91cDogYmFtU291cmNlLmJhbUdyb3VwfTtcbiAgICB0aGlzLmtleUhvbGRlciA9IG5ldyBBd2FpdGVkKCk7XG4gICAgXG4gICAgaWYgKGJhbVNvdXJjZS5yZXNvbHZlcikge1xuICAgICAgICB0aGlzLnJlc29sdmVyS2V5ID0gYnJvd3Nlci5yZWdpc3RlclJlc29sdmVyKGJhbVNvdXJjZS5yZXNvbHZlcik7XG4gICAgfVxuXG4gICAgdGhpcy5pbml0KCk7XG59XG5cblJlbW90ZUJBTUZlYXR1cmVTb3VyY2UucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShGZWF0dXJlU291cmNlQmFzZS5wcm90b3R5cGUpO1xuXG5SZW1vdGVCQU1GZWF0dXJlU291cmNlLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24oKSB7ICAgIHZhciB0aGlzQiA9IHRoaXM7XG4gICAgdmFyIHVyaSA9IHRoaXMuYmFtU291cmNlLnVyaSB8fCB0aGlzLmJhbVNvdXJjZS5iYW1VUkk7XG4gICAgdmFyIGluZGV4VXJpID0gdGhpcy5iYW1Tb3VyY2UuaW5kZXhVcmkgfHwgdGhpcy5iYW1Tb3VyY2UuYmFpVVJJIHx8IHVyaSArICcuYmFpJztcblxuICAgIHZhciBibG9iID0gdGhpcy5iYW1Tb3VyY2UuYmFtQmxvYiB8fCB0aGlzLmJhbVNvdXJjZS5ibG9iO1xuICAgIHZhciBpbmRleEJsb2IgPSB0aGlzLmJhbVNvdXJjZS5iYWlCbG9iIHx8IHRoaXMuYmFtU291cmNlLmluZGV4QmxvYjtcblxuICAgIHZhciBjbnQgPSBmdW5jdGlvbihyZXN1bHQsIGVycikge1xuICAgICAgICB0aGlzQi5yZWFkaW5lc3MgPSBudWxsO1xuICAgICAgICB0aGlzQi5ub3RpZnlSZWFkaW5lc3MoKTtcblxuICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgICB0aGlzQi5rZXlIb2xkZXIucHJvdmlkZShyZXN1bHQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpc0IuZXJyb3IgPSBlcnI7XG4gICAgICAgICAgICB0aGlzQi5rZXlIb2xkZXIucHJvdmlkZShudWxsKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBpZiAoYmxvYikge1xuICAgICAgICB0aGlzLndvcmtlci5wb3N0Q29tbWFuZCh7Y29tbWFuZDogJ2Nvbm5lY3RCQU0nLCBibG9iOiBibG9iLCBpbmRleEJsb2I6IGluZGV4QmxvYn0sIGNudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy53b3JrZXIucG9zdENvbW1hbmQoe1xuICAgICAgICAgICAgY29tbWFuZDogJ2Nvbm5lY3RCQU0nLCBcbiAgICAgICAgICAgIHVyaTogcmVzb2x2ZVVybFRvUGFnZSh1cmkpLCBcbiAgICAgICAgICAgIHJlc29sdmVyOiB0aGlzLnJlc29sdmVyS2V5LFxuICAgICAgICAgICAgaW5kZXhVcmk6IHJlc29sdmVVcmxUb1BhZ2UoaW5kZXhVcmkpLFxuICAgICAgICAgICAgY3JlZGVudGlhbHM6IHRoaXMuYmFtU291cmNlLmNyZWRlbnRpYWxzLFxuICAgICAgICAgICAgaW5kZXhDaHVua3M6IHRoaXMuYmFtU291cmNlLmluZGV4Q2h1bmtzfSxcbiAgICAgICAgICBjbnQpOyBcbiAgICB9XG59O1xuXG5SZW1vdGVCQU1GZWF0dXJlU291cmNlLnByb3RvdHlwZS5mZXRjaCA9IGZ1bmN0aW9uKGNociwgbWluLCBtYXgsIHNjYWxlLCB0eXBlcywgcG9vbCwgY2FsbGJhY2spIHtcbiAgICB2YXIgbGlnaHQgPSB0eXBlcyAmJiAodHlwZXMubGVuZ3RoID09IDEpICYmICh0eXBlc1swXSA9PSAnZGVuc2l0eScpO1xuICAgIHZhciB0aGlzQiA9IHRoaXM7XG4gICAgXG4gICAgdGhpc0IuYnVzeSsrO1xuICAgIHRoaXNCLm5vdGlmeUFjdGl2aXR5KCk7XG4gICAgXG4gICAgdGhpcy5rZXlIb2xkZXIuYXdhaXQoZnVuY3Rpb24oa2V5KSB7XG4gICAgICAgIGlmICgha2V5KSB7XG4gICAgICAgICAgICB0aGlzQi5idXN5LS07XG4gICAgICAgICAgICB0aGlzQi5ub3RpZnlBY3Rpdml0eSgpO1xuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKHRoaXNCLmVycm9yIHx8IFwiQ291bGRuJ3QgZmV0Y2ggQkFNXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpc0Iud29ya2VyLnBvc3RDb21tYW5kKHtjb21tYW5kOiAnZmV0Y2gnLCBjb25uZWN0aW9uOiBrZXksIGNocjogY2hyLCBtaW46IG1pbiwgbWF4OiBtYXgsIG9wdHM6IHtsaWdodDogbGlnaHR9fSwgZnVuY3Rpb24oYmFtUmVjb3JkcywgZXJyb3IpIHtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdyZXRyaWV2ZWQgJyArIGJhbVJlY29yZHMubGVuZ3RoICsgJyB2aWEgd29ya2VyLicpO1xuXG4gICAgICAgICAgICB0aGlzQi5idXN5LS07XG4gICAgICAgICAgICB0aGlzQi5ub3RpZnlBY3Rpdml0eSgpO1xuXG4gICAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhlcnJvciwgbnVsbCwgbnVsbCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBmZWF0dXJlcyA9IFtdO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIHJpID0gMDsgcmkgPCBiYW1SZWNvcmRzLmxlbmd0aDsgKytyaSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgciA9IGJhbVJlY29yZHNbcmldO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZiA9IGJhbVJlY29yZFRvRmVhdHVyZShyLCB0aGlzQi5vcHRzLmJhbUdyb3VwKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGYpXG4gICAgICAgICAgICAgICAgICAgICAgICBmZWF0dXJlcy5wdXNoKGYpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYWxsYmFjayhudWxsLCBmZWF0dXJlcywgMTAwMDAwMDAwMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xufTtcblxuUmVtb3RlQkFNRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuZ2V0U2NhbGVzID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIDEwMDAwMDAwMDA7XG59O1xuXG5SZW1vdGVCQU1GZWF0dXJlU291cmNlLnByb3RvdHlwZS5nZXRTdHlsZVNoZWV0ID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICB0aGlzLmtleUhvbGRlci5hd2FpdChmdW5jdGlvbihiYW0pIHtcbiAgICAgICAgdmFyIHN0eWxlc2hlZXQgPSBuZXcgREFTU3R5bGVzaGVldCgpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICB2YXIgZGVuc1N0eWxlID0gbmV3IERBU1N0eWxlKCk7XG4gICAgICAgIGRlbnNTdHlsZS5nbHlwaCA9ICdISVNUT0dSQU0nO1xuICAgICAgICBkZW5zU3R5bGUuQ09MT1IxID0gJ2JsYWNrJztcbiAgICAgICAgZGVuc1N0eWxlLkNPTE9SMiA9ICdyZWQnO1xuICAgICAgICBkZW5zU3R5bGUuSEVJR0hUPTMwO1xuICAgICAgICBzdHlsZXNoZWV0LnB1c2hTdHlsZSh7dHlwZTogJ2RlbnNpdHknfSwgJ2xvdycsIGRlbnNTdHlsZSk7XG4gICAgICAgIHN0eWxlc2hlZXQucHVzaFN0eWxlKHt0eXBlOiAnZGVuc2l0eSd9LCAnbWVkaXVtJywgZGVuc1N0eWxlKTtcblxuICAgICAgICB2YXIgd2lnU3R5bGUgPSBuZXcgREFTU3R5bGUoKTtcbiAgICAgICAgd2lnU3R5bGUuZ2x5cGggPSAnX19TRVFVRU5DRSc7XG4gICAgICAgIHdpZ1N0eWxlLkZHQ09MT1IgPSAnYmxhY2snO1xuICAgICAgICB3aWdTdHlsZS5CR0NPTE9SID0gJ2JsdWUnO1xuICAgICAgICB3aWdTdHlsZS5IRUlHSFQgPSA4O1xuICAgICAgICB3aWdTdHlsZS5CVU1QID0gdHJ1ZTtcbiAgICAgICAgd2lnU3R5bGUuTEFCRUwgPSBmYWxzZTtcbiAgICAgICAgd2lnU3R5bGUuWklOREVYID0gMjA7XG4gICAgICAgIHN0eWxlc2hlZXQucHVzaFN0eWxlKHt0eXBlOiAnYmFtJ30sICdoaWdoJywgd2lnU3R5bGUpO1xuICAgICAgICByZXR1cm4gY2FsbGJhY2soc3R5bGVzaGVldCk7XG4gICAgfSk7XG59O1xuXG5cbmZ1bmN0aW9uIE1hcHBlZEZlYXR1cmVTb3VyY2Uoc291cmNlLCBtYXBwaW5nKSB7XG4gICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgdGhpcy5tYXBwaW5nID0gbWFwcGluZztcbiAgICBcbiAgICB0aGlzLmFjdGl2aXR5TGlzdGVuZXJzID0gW107XG4gICAgdGhpcy5idXN5ID0gMDtcbn1cblxuTWFwcGVkRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuYWRkQWN0aXZpdHlMaXN0ZW5lciA9IGZ1bmN0aW9uKGxpc3RlbmVyKSB7XG4gICAgdGhpcy5hY3Rpdml0eUxpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcbn07XG5cbk1hcHBlZEZlYXR1cmVTb3VyY2UucHJvdG90eXBlLnJlbW92ZUFjdGl2aXR5TGlzdGVuZXIgPSBmdW5jdGlvbihsaXN0ZW5lcikge1xuICAgIHZhciBpZHggPSBhcnJheUluZGV4T2YodGhpcy5hY3Rpdml0eUxpc3RlbmVycywgbGlzdGVuZXIpO1xuICAgIGlmIChpZHggPj0gMClcbiAgICAgICAgdGhpcy5hY3Rpdml0eUxpc3RlbmVycy5zcGxpY2UoaWR4LCAwKTtcbn07XG5cbk1hcHBlZEZlYXR1cmVTb3VyY2UucHJvdG90eXBlLm5vdGlmeUFjdGl2aXR5ID0gZnVuY3Rpb24oKSB7XG4gICAgZm9yICh2YXIgbGkgPSAwOyBsaSA8IHRoaXMuYWN0aXZpdHlMaXN0ZW5lcnMubGVuZ3RoOyArK2xpKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLmFjdGl2aXR5TGlzdGVuZXJzW2xpXSh0aGlzLmJ1c3kpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlKTtcbiAgICAgICAgfVxuICAgIH1cbn07XG5cbk1hcHBlZEZlYXR1cmVTb3VyY2UucHJvdG90eXBlLmdldFN0eWxlU2hlZXQgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgIHJldHVybiB0aGlzLnNvdXJjZS5nZXRTdHlsZVNoZWV0KGNhbGxiYWNrKTtcbn07XG5cbk1hcHBlZEZlYXR1cmVTb3VyY2UucHJvdG90eXBlLmdldFNjYWxlcyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnNvdXJjZS5nZXRTY2FsZXMoKTtcbn07XG5cbk1hcHBlZEZlYXR1cmVTb3VyY2UucHJvdG90eXBlLmdldERlZmF1bHRGSVBzID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICBpZiAodGhpcy5zb3VyY2UuZ2V0RGVmYXVsdEZJUHMpXG4gICAgICAgIHJldHVybiB0aGlzLnNvdXJjZS5nZXREZWZhdWx0RklQcyhjYWxsYmFjayk7XG59O1xuXG5NYXBwZWRGZWF0dXJlU291cmNlLnByb3RvdHlwZS5zaW1wbGlmeVNlZ21lbnRzID0gZnVuY3Rpb24oc2VncywgbWluR2FwKSB7XG4gICAgaWYgKHNlZ3MubGVuZ3RoID09PSAwKSByZXR1cm4gc2VncztcblxuICAgIHNlZ3Muc29ydChmdW5jdGlvbihzMSwgczIpIHtcbiAgICAgICAgdmFyIGQgPSBzMS5uYW1lIC0gczIubmFtZTtcbiAgICAgICAgaWYgKGQpXG4gICAgICAgICAgICByZXR1cm4gZDtcbiAgICAgICAgZCA9IHMxLnN0YXJ0IC0gczIuc3RhcnQ7XG4gICAgICAgIGlmIChkKVxuICAgICAgICAgICAgcmV0dXJuIGQ7XG4gICAgICAgIHJldHVybiBzMS5lbmQgLSBzMi5lbmQ7ICAgLy8gU2hvdWxkIG5ldmVyIGNvbWUgdG8gdGhpcy4uLj9cbiAgICB9KTtcblxuICAgIHZhciBzc2VncyA9IFtdO1xuICAgIHZhciBjdXJyZW50U2VnID0gc2Vnc1swXTtcbiAgICBmb3IgKHZhciBzaSA9IDA7IHNpIDwgc2Vncy5sZW5ndGg7ICsrc2kpIHtcbiAgICAgICAgdmFyIG5zID0gc2Vnc1tzaV07XG5cbiAgICAgICAgLy8gY29uc29sZS5sb2cobnMubmFtZSArICcgJyArIG5zLnN0YXJ0ICsgJyAnICsgbnMuZW5kKTtcbiAgICAgICAgaWYgKG5zLm5hbWUgIT0gY3VycmVudFNlZy5uYW1lIHx8IG5zLnN0YXJ0ID4gKGN1cnJlbnRTZWcuZW5kICsgbWluR2FwKSkge1xuICAgICAgICAgICAgc3NlZ3MucHVzaChjdXJyZW50U2VnKTtcbiAgICAgICAgICAgIGN1cnJlbnRTZWcgPSBucztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGN1cnJlbnRTZWcgPSBuZXcgREFTU2VnbWVudChjdXJyZW50U2VnLm5hbWUsIE1hdGgubWluKGN1cnJlbnRTZWcuc3RhcnQsIG5zLnN0YXJ0KSwgTWF0aC5tYXgoY3VycmVudFNlZy5lbmQsIG5zLmVuZCkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHNzZWdzLnB1c2goY3VycmVudFNlZyk7XG4gICAgcmV0dXJuIHNzZWdzO1xufTtcblxuTWFwcGVkRmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuZmV0Y2ggPSBmdW5jdGlvbihjaHIsIG1pbiwgbWF4LCBzY2FsZSwgdHlwZXMsIHBvb2wsIGNhbGxiYWNrLCBzdHlsZUZpbHRlcnMpIHtcbiAgICB2YXIgdGhpc0IgPSB0aGlzO1xuICAgIHZhciBmZXRjaExlbmd0aCA9IG1heCAtIG1pbiArIDE7XG5cbiAgICB0aGlzQi5idXN5Kys7XG4gICAgdGhpc0Iubm90aWZ5QWN0aXZpdHkoKTtcblxuICAgIHRoaXMubWFwcGluZy5zb3VyY2VCbG9ja3NGb3JSYW5nZShjaHIsIG1pbiwgbWF4LCBmdW5jdGlvbihtc2VnKSB7XG4gICAgICAgIGlmIChtc2VnLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhpc0IuYnVzeS0tO1xuICAgICAgICAgICAgdGhpc0Iubm90aWZ5QWN0aXZpdHkoKTtcblxuICAgICAgICAgICAgY2FsbGJhY2soXCJObyBtYXBwaW5nIGF2YWlsYWJsZSBmb3IgdGhpcyByZWdpb25zXCIsIFtdLCBzY2FsZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBtc2VnID0gdGhpc0Iuc2ltcGxpZnlTZWdtZW50cyhtc2VnLCBNYXRoLm1heCgxMDAsIDAuMDUgKiBmZXRjaExlbmd0aCkpO1xuXG4gICAgICAgICAgICB2YXIgbWFwcGVkRmVhdHVyZXMgPSBbXTtcbiAgICAgICAgICAgIHZhciBtYXBwZWRMb2MgPSBudWxsO1xuICAgICAgICAgICAgdmFyIGNvdW50ID0gbXNlZy5sZW5ndGg7XG4gICAgICAgICAgICB2YXIgZmluYWxTdGF0dXM7XG5cbiAgICAgICAgICAgIG1zZWcubWFwKGZ1bmN0aW9uKHNlZykge1xuICAgICAgICAgICAgICAgIHRoaXNCLnNvdXJjZS5mZXRjaChzZWcubmFtZSwgc2VnLnN0YXJ0LCBzZWcuZW5kLCBzY2FsZSwgdHlwZXMsIHBvb2wsIGZ1bmN0aW9uKHN0YXR1cywgZmVhdHVyZXMsIGZzY2FsZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdHVzICYmICFmaW5hbFN0YXR1cylcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsU3RhdHVzID0gc3RhdHVzO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChmZWF0dXJlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgZmkgPSAwOyBmaSA8IGZlYXR1cmVzLmxlbmd0aDsgKytmaSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmID0gZmVhdHVyZXNbZmldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzbiA9IGYuc2VnbWVudDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc24uaW5kZXhPZignY2hyJykgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc24gPSBzbi5zdWJzdHIoMyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1hcHBpbmdzID0gdGhpc0IubWFwcGluZy5tYXBTZWdtZW50KHNuLCBmLm1pbiwgZi5tYXgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1hcHBpbmdzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZi5wYXJ0cyAmJiBmLnBhcnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXBwZWRGZWF0dXJlcy5wdXNoKGYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbWkgPSAwOyBtaSA8IG1hcHBpbmdzLmxlbmd0aDsgKyttaSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG0gPSBtYXBwaW5nc1ttaV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWYgPSBzaGFsbG93Q29weShmKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1mLnNlZ21lbnQgPSBtLnNlZ21lbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZi5taW4gPSBtLm1pbjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1mLm1heCA9IG0ubWF4O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG0ucGFydGlhbE1pbilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZi5wYXJ0aWFsTWluID0gbS5wYXJ0aWFsTWluO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG0ucGFydGlhbE1heClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZi5wYXJ0aWFsTWF4ID0gbS5wYXJ0aWFsTWF4O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobS5mbGlwcGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGYub3JpZW50YXRpb24gPT0gJy0nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1mLm9yaWVudGF0aW9uID0gJysnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZi5vcmllbnRhdGlvbiA9PSAnKycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWYub3JpZW50YXRpb24gPSAnLSc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFwcGVkRmVhdHVyZXMucHVzaChtZik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB2YXIgbTEgPSB0aGlzQi5tYXBwaW5nLm1hcFBvaW50KHNlZy5uYW1lLCBzZWcuc3RhcnQpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbTIgPSB0aGlzQi5tYXBwaW5nLm1hcFBvaW50KHNlZy5uYW1lLCBzZWcuZW5kKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAobTEgJiYgbTIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzZWdEZXN0Q292ZXJhZ2UgPSBuZXcgUmFuZ2UobTEucG9zLCBtMi5wb3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1hcHBlZExvYylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXBwZWRMb2MgPSB1bmlvbihtYXBwZWRMb2MsIHNlZ0Rlc3RDb3ZlcmFnZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFwcGVkTG9jID0gc2VnRGVzdENvdmVyYWdlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLS1jb3VudDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvdW50ID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzQi5idXN5LS07XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzQi5ub3RpZnlBY3Rpdml0eSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soZmluYWxTdGF0dXMsIG1hcHBlZEZlYXR1cmVzLCBmc2NhbGUsIG1hcHBlZExvYyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LCBzdHlsZUZpbHRlcnMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcbn07XG5cbmZ1bmN0aW9uIER1bW15RmVhdHVyZVNvdXJjZSgpIHtcbn1cblxuRHVtbXlGZWF0dXJlU291cmNlLnByb3RvdHlwZS5nZXRTY2FsZXMgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gbnVsbDtcbn07XG5cbkR1bW15RmVhdHVyZVNvdXJjZS5wcm90b3R5cGUuZmV0Y2ggPSBmdW5jdGlvbihjaHIsIG1pbiwgbWF4LCBzY2FsZSwgdHlwZXMsIHBvb2wsIGNudCkge1xuICAgIHJldHVybiBjbnQobnVsbCwgW10sIDEwMDAwMDAwMDApO1xufTtcblxuRHVtbXlGZWF0dXJlU291cmNlLnByb3RvdHlwZS5nZXRTdHlsZVNoZWV0ID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICB2YXIgc3R5bGVzaGVldCA9IG5ldyBEQVNTdHlsZXNoZWV0KCk7XG4gICAgdmFyIGRlZlN0eWxlID0gbmV3IERBU1N0eWxlKCk7XG4gICAgZGVmU3R5bGUuZ2x5cGggPSAnQk9YJztcbiAgICBkZWZTdHlsZS5CR0NPTE9SID0gJ2JsdWUnO1xuICAgIGRlZlN0eWxlLkZHQ09MT1IgPSAnYmxhY2snO1xuICAgIHN0eWxlc2hlZXQucHVzaFN0eWxlKHt0eXBlOiAnZGVmYXVsdCd9LCBudWxsLCBkZWZTdHlsZSk7XG4gICAgcmV0dXJuIGNhbGxiYWNrKHN0eWxlc2hlZXQpO1xufTtcblxuZnVuY3Rpb24gRHVtbXlTZXF1ZW5jZVNvdXJjZSgpIHtcbn1cblxuRHVtbXlTZXF1ZW5jZVNvdXJjZS5wcm90b3R5cGUuZmV0Y2ggPSBmdW5jdGlvbihjaHIsIG1pbiwgbWF4LCBwb29sLCBjbnQpIHtcbiAgICByZXR1cm4gY250KG51bGwsIG51bGwpO1xufTtcblxuZnVuY3Rpb24gSkJyb3dzZUZlYXR1cmVTb3VyY2Uoc291cmNlKSB7XG4gICAgdGhpcy5zdG9yZSA9IG5ldyBKQnJvd3NlU3RvcmUoc291cmNlLmpiVVJJLCBzb3VyY2UuamJRdWVyeSk7XG59XG5cbkpCcm93c2VGZWF0dXJlU291cmNlLnByb3RvdHlwZS5nZXRTY2FsZXMgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gbnVsbDtcbn07XG5cbkpCcm93c2VGZWF0dXJlU291cmNlLnByb3RvdHlwZS5nZXRTdHlsZVNoZWV0ID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICB2YXIgc3R5bGVzaGVldCA9IG5ldyBEQVNTdHlsZXNoZWV0KCk7XG4gICAgXG4gICAgdmFyIGNkc1N0eWxlID0gbmV3IERBU1N0eWxlKCk7XG4gICAgY2RzU3R5bGUuZ2x5cGggPSAnQk9YJztcbiAgICBjZHNTdHlsZS5GR0NPTE9SID0gJ2JsYWNrJztcbiAgICBjZHNTdHlsZS5CR0NPTE9SID0gJ3JlZCc7XG4gICAgY2RzU3R5bGUuSEVJR0hUID0gMTA7XG4gICAgY2RzU3R5bGUuQlVNUCA9IHRydWU7XG4gICAgY2RzU3R5bGUuWklOREVYID0gMjA7XG4gICAgc3R5bGVzaGVldC5wdXNoU3R5bGUoe3R5cGU6ICd0cmFuc2xhdGlvbid9LCBudWxsLCBjZHNTdHlsZSk7XG4gICAgXG4gICAgdmFyIHRzU3R5bGUgPSBuZXcgREFTU3R5bGUoKTtcbiAgICB0c1N0eWxlLmdseXBoID0gJ0JPWCc7XG4gICAgdHNTdHlsZS5GR0NPTE9SID0gJ2JsYWNrJztcbiAgICB0c1N0eWxlLkJHQ09MT1IgPSAnd2hpdGUnO1xuICAgIHRzU3R5bGUuSEVJR0hUID0gMTA7XG4gICAgdHNTdHlsZS5aSU5ERVggPSAxMDtcbiAgICB0c1N0eWxlLkJVTVAgPSB0cnVlO1xuICAgIHRzU3R5bGUuTEFCRUwgPSB0cnVlO1xuICAgIHN0eWxlc2hlZXQucHVzaFN0eWxlKHt0eXBlOiAndHJhbnNjcmlwdCd9LCBudWxsLCB0c1N0eWxlKTtcblxuICAgIHZhciB3aWdTdHlsZSA9IG5ldyBEQVNTdHlsZSgpO1xuICAgIHdpZ1N0eWxlLmdseXBoID0gJ0JPWCc7XG4gICAgd2lnU3R5bGUuRkdDT0xPUiA9ICdibGFjayc7XG4gICAgd2lnU3R5bGUuQkdDT0xPUiA9ICdncmVlbic7XG4gICAgd2lnU3R5bGUuSEVJR0hUID0gODtcbiAgICB3aWdTdHlsZS5CVU1QID0gdHJ1ZTtcbiAgICB3aWdTdHlsZS5MQUJFTCA9IHRydWU7XG4gICAgd2lnU3R5bGUuWklOREVYID0gMjA7XG4gICAgc3R5bGVzaGVldC5wdXNoU3R5bGUoe3R5cGU6ICdkZWZhdWx0J30sIG51bGwsIHdpZ1N0eWxlKTtcblxuICAgIHJldHVybiBjYWxsYmFjayhzdHlsZXNoZWV0KTtcbn07XG5cbkpCcm93c2VGZWF0dXJlU291cmNlLnByb3RvdHlwZS5mZXRjaCA9IGZ1bmN0aW9uKGNociwgbWluLCBtYXgsIHNjYWxlLCB0eXBlcywgcG9vbCwgY2FsbGJhY2spIHtcbiAgICBpZiAodHlwZXMgJiYgdHlwZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGNhbGxiYWNrKG51bGwsIFtdLCBzY2FsZSk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgXG4gICAgdmFyIGZvcHMgPSB7fTtcblxuICAgIHRoaXMuc3RvcmUuZmVhdHVyZXMoXG4gICAgICAgIG5ldyBEQVNTZWdtZW50KGNociwgbWluLCBtYXgpLFxuICAgICAgICBmb3BzLFxuICAgICAgICBmdW5jdGlvbihmZWF0dXJlcywgc3RhdHVzKSB7XG4gICAgICAgICAgICBjYWxsYmFjayhzdGF0dXMsIGZlYXR1cmVzLCAxMDAwMDApO1xuICAgICAgICB9XG4gICAgKTtcbn07XG5cbkJyb3dzZXIucHJvdG90eXBlLnNvdXJjZUFkYXB0ZXJJc0NhcGFibGUgPSBmdW5jdGlvbihzLCBjYXApIHtcbiAgICBpZiAoIXMuY2FwYWJpbGl0aWVzKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgZWxzZSByZXR1cm4gcy5jYXBhYmlsaXRpZXMoKVtjYXBdO1xufTtcblxuaWYgKHR5cGVvZihtb2R1bGUpICE9PSAndW5kZWZpbmVkJykge1xuICAgIG1vZHVsZS5leHBvcnRzID0ge1xuICAgICAgICBGZWF0dXJlU291cmNlQmFzZTogRmVhdHVyZVNvdXJjZUJhc2UsXG5cbiAgICAgICAgVHdvQml0U2VxdWVuY2VTb3VyY2U6IFR3b0JpdFNlcXVlbmNlU291cmNlLFxuICAgICAgICBFbnNlbWJsU2VxdWVuY2VTb3VyY2U6IEVuc2VtYmxTZXF1ZW5jZVNvdXJjZSxcbiAgICAgICAgREFTU2VxdWVuY2VTb3VyY2U6IERBU1NlcXVlbmNlU291cmNlLFxuICAgICAgICBNYXBwZWRGZWF0dXJlU291cmNlOiBNYXBwZWRGZWF0dXJlU291cmNlLFxuICAgICAgICBDYWNoaW5nRmVhdHVyZVNvdXJjZTogQ2FjaGluZ0ZlYXR1cmVTb3VyY2UsXG4gICAgICAgIEJXR0ZlYXR1cmVTb3VyY2U6IEJXR0ZlYXR1cmVTb3VyY2UsXG4gICAgICAgIFJlbW90ZUJXR0ZlYXR1cmVTb3VyY2U6IFJlbW90ZUJXR0ZlYXR1cmVTb3VyY2UsXG4gICAgICAgIEJBTUZlYXR1cmVTb3VyY2U6IEJBTUZlYXR1cmVTb3VyY2UsXG4gICAgICAgIFJlbW90ZUJBTUZlYXR1cmVTb3VyY2U6IFJlbW90ZUJBTUZlYXR1cmVTb3VyY2UsXG4gICAgICAgIER1bW15RmVhdHVyZVNvdXJjZTogRHVtbXlGZWF0dXJlU291cmNlLFxuICAgICAgICBEdW1teVNlcXVlbmNlU291cmNlOiBEdW1teVNlcXVlbmNlU291cmNlLFxuXG4gICAgICAgIHJlZ2lzdGVyU291cmNlQWRhcHRlckZhY3Rvcnk6IGRhbGxpYW5jZV9yZWdpc3RlclNvdXJjZUFkYXB0ZXJGYWN0b3J5LFxuICAgICAgICByZWdpc3RlclBhcnNlckZhY3Rvcnk6IGRhbGxpYW5jZV9yZWdpc3RlclBhcnNlckZhY3RvcnksXG4gICAgICAgIG1ha2VQYXJzZXI6IGRhbGxpYW5jZV9tYWtlUGFyc2VyXG4gICAgfTtcblxuICAgIC8vIFN0YW5kYXJkIHNldCBvZiBwbHVnaW5zLlxuICAgIHJlcXVpcmUoJy4vZW5zZW1ibGpzb24nKTtcbiAgICByZXF1aXJlKCcuL3RhYml4LXNvdXJjZScpO1xuICAgIHJlcXVpcmUoJy4vbWVtc3RvcmUnKTtcbiAgICByZXF1aXJlKCcuL2JlZHdpZycpO1xuICAgIHJlcXVpcmUoJy4vdmNmJyk7XG4gICAgcmVxdWlyZSgnLi90ZXN0LXNvdXJjZScpO1xufVxuIiwiLyogLSotIG1vZGU6IGphdmFzY3JpcHQ7IGMtYmFzaWMtb2Zmc2V0OiA0OyBpbmRlbnQtdGFicy1tb2RlOiBuaWwgLSotICovXG5cbi8vIFxuLy8gRGFsbGlhbmNlIEdlbm9tZSBFeHBsb3JlclxuLy8gKGMpIFRob21hcyBEb3duIDIwMDYtMjAxNVxuLy9cbi8vIHNvdXJjZWNvbXBhcmUuanNcbi8vXG5cblxuZnVuY3Rpb24gc291cmNlRGF0YVVSSShjb25mKSB7XG4gICAgaWYgKGNvbmYudXJpKSB7XG4gICAgICAgIHJldHVybiBjb25mLnVyaTtcbiAgICB9IGVsc2UgaWYgKGNvbmYuYmxvYikge1xuICAgICAgICByZXR1cm4gJ2ZpbGU6JyArIGNvbmYuYmxvYi5uYW1lO1xuICAgIH0gZWxzZSBpZiAoY29uZi5id2dCbG9iKSB7XG4gICAgICAgIHJldHVybiAnZmlsZTonICsgY29uZi5id2dCbG9iLm5hbWU7XG4gICAgfSBlbHNlIGlmIChjb25mLmJhbUJsb2IpIHtcbiAgICAgICAgcmV0dXJuICdmaWxlOicgKyBjb25mLmJhbUJsb2IubmFtZTtcbiAgICB9IGVsc2UgaWYgKGNvbmYudHdvQml0QmxvYikge1xuICAgICAgICByZXR1cm4gJ2ZpbGU6JyArIGNvbmYudHdvQml0QmxvYi5uYW1lO1xuICAgIH1cblxuICAgIHJldHVybiBjb25mLmJ3Z1VSSSB8fCBjb25mLmJhbVVSSSB8fCBjb25mLmpiVVJJIHx8IGNvbmYudHdvQml0VVJJIHx8ICdodHRwczovL3d3dy5iaW9kYWxsaWFuY2Uub3JnL21hZ2ljL25vX3VyaSc7XG59XG5cbmZ1bmN0aW9uIHNvdXJjZVN0eWxlVVJJKGNvbmYpIHtcbiAgICBpZiAoY29uZi5zdHlsZXNoZWV0X3VyaSlcbiAgICAgICAgcmV0dXJuIGNvbmYuc3R5bGVzaGVldF91cmk7XG4gICAgZWxzZSBpZiAoY29uZi50aWVyX3R5cGUgPT0gJ3NlcXVlbmNlJyB8fCBjb25mLnR3b0JpdFVSSSB8fCBjb25mLnR3b0JpdEJsb2IpXG4gICAgICAgIHJldHVybiAnaHR0cHM6Ly93d3cuYmlvZGFsbGlhbmNlLm9yZy9tYWdpYy9zZXF1ZW5jZSdcbiAgICBlbHNlXG4gICAgICAgIHJldHVybiBzb3VyY2VEYXRhVVJJKGNvbmYpO1xufVxuXG5mdW5jdGlvbiBzb3VyY2VzQXJlRXF1YWxNb2R1bG9TdHlsZShhLCBiKSB7XG4gICAgaWYgKHNvdXJjZURhdGFVUkkoYSkgIT0gc291cmNlRGF0YVVSSShiKSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuXG4gICAgaWYgKGEubWFwcGluZyAhPSBiLm1hcHBpbmcpXG4gICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgIGlmIChhLnRpZXJfdHlwZSAhPSBiLnRpZXJfdHlwZSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuXG4gICAgaWYgKGEub3ZlcmxheSkge1xuICAgICAgICBpZiAoIWIub3ZlcmxheSB8fCBiLm92ZXJsYXkubGVuZ3RoICE9IGEub3ZlcmxheS5sZW5ndGgpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGZvciAodmFyIG9pID0gMDsgb2kgPCBhLm92ZXJsYXkubGVuZ3RoOyArK29pKSB7XG4gICAgICAgICAgICBpZiAoIXNvdXJjZXNBcmVFcXVhbE1vZHVsb1N0eWxlKGEub3ZlcmxheVtvaV0sIGIub3ZlcmxheVtvaV0pKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChiLm92ZXJsYXkpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG59XG5cbmZ1bmN0aW9uIHNvdXJjZXNBcmVFcXVhbChhLCBiKSB7XG4gICAgaWYgKHNvdXJjZURhdGFVUkkoYSkgIT0gc291cmNlRGF0YVVSSShiKSB8fFxuICAgICAgICBzb3VyY2VTdHlsZVVSSShhKSAhPSBzb3VyY2VTdHlsZVVSSShiKSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuXG4gICAgaWYgKGEubWFwcGluZyAhPSBiLm1hcHBpbmcpXG4gICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgIGlmIChhLnRpZXJfdHlwZSAhPSBiLnRpZXJfdHlwZSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuXG4gICAgaWYgKGEub3ZlcmxheSkge1xuICAgICAgICBpZiAoIWIub3ZlcmxheSB8fCBiLm92ZXJsYXkubGVuZ3RoICE9IGEub3ZlcmxheS5sZW5ndGgpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGZvciAodmFyIG9pID0gMDsgb2kgPCBhLm92ZXJsYXkubGVuZ3RoOyArK29pKSB7XG4gICAgICAgICAgICBpZiAoIXNvdXJjZXNBcmVFcXVhbChhLm92ZXJsYXlbb2ldLCBiLm92ZXJsYXlbb2ldKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoYi5vdmVybGF5KVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xufVxuXG5pZiAodHlwZW9mKG1vZHVsZSkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgICAgIHNvdXJjZXNBcmVFcXVhbDogc291cmNlc0FyZUVxdWFsLFxuICAgICAgICBzb3VyY2VzQXJlRXF1YWxNb2R1bG9TdHlsZTogc291cmNlc0FyZUVxdWFsTW9kdWxvU3R5bGUsXG4gICAgICAgIHNvdXJjZURhdGFVUkk6IHNvdXJjZURhdGFVUkksXG4gICAgICAgIHNvdXJjZVN0eWxlVVJJOiBzb3VyY2VTdHlsZVVSSVxuICAgIH07XG59XG4iLCIvKiAtKi0gbW9kZTogamF2YXNjcmlwdDsgYy1iYXNpYy1vZmZzZXQ6IDQ7IGluZGVudC10YWJzLW1vZGU6IG5pbCAtKi0gKi9cblxuLy8gXG4vLyBEYWxsaWFuY2UgR2Vub21lIEV4cGxvcmVyXG4vLyAoYykgVGhvbWFzIERvd24gMjAwNi0yMDEwXG4vL1xuLy8gc3BhbnMuanM6IEphdmFTY3JpcHQgSW50c2V0L0xvY2F0aW9uIHBvcnQuXG4vL1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5mdW5jdGlvbiBSYW5nZShtaW4sIG1heClcbntcbiAgICBpZiAodHlwZW9mKG1pbikgIT0gJ251bWJlcicgfHwgdHlwZW9mKG1heCkgIT0gJ251bWJlcicpXG4gICAgICAgIHRocm93ICdCYWQgcmFuZ2UgJyArIG1pbiArICcsJyArIG1heDtcbiAgICB0aGlzLl9taW4gPSBtaW47XG4gICAgdGhpcy5fbWF4ID0gbWF4O1xufVxuXG5SYW5nZS5wcm90b3R5cGUubWluID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX21pbjtcbn1cblxuUmFuZ2UucHJvdG90eXBlLm1heCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl9tYXg7XG59XG5cblJhbmdlLnByb3RvdHlwZS5jb250YWlucyA9IGZ1bmN0aW9uKHBvcykge1xuICAgIHJldHVybiBwb3MgPj0gdGhpcy5fbWluICYmIHBvcyA8PSB0aGlzLl9tYXg7XG59XG5cblJhbmdlLnByb3RvdHlwZS5pc0NvbnRpZ3VvdXMgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbn1cblxuUmFuZ2UucHJvdG90eXBlLnJhbmdlcyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBbdGhpc107XG59XG5cblJhbmdlLnByb3RvdHlwZS5fcHVzaFJhbmdlcyA9IGZ1bmN0aW9uKHJhbmdlcykge1xuICAgIHJhbmdlcy5wdXNoKHRoaXMpO1xufVxuXG5SYW5nZS5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gJ1snICsgdGhpcy5fbWluICsgJy0nICsgdGhpcy5fbWF4ICsgJ10nO1xufVxuXG5mdW5jdGlvbiBfQ29tcG91bmQocmFuZ2VzKSB7XG4gICAgLy8gZ2l2ZW46IGEgc2V0IG9mIHVuc29ydGVkIHBvc3NpYmx5IG92ZXJsYXBwaW5nIHJhbmdlc1xuICAgIC8vIHNvcnQgdGhlIGlucHV0IHJhbmdlc1xuICAgIHZhciBzb3J0ZWQgPSByYW5nZXMuc29ydChfcmFuZ2VPcmRlcik7XG4gICAgLy8gbWVyZ2Ugb3ZlcmxhcHMgYmV0d2VlbiBhZGphY2VudCByYW5nZXNcbiAgICB2YXIgbWVyZ2VkID0gW107XG4gICAgdmFyIGN1cnJlbnQgPSBzb3J0ZWQuc2hpZnQoKTtcbiAgICBzb3J0ZWQuZm9yRWFjaChmdW5jdGlvbihyYW5nZSkge1xuICAgICAgICBpZiAocmFuZ2UuX21pbiA8PSBjdXJyZW50Ll9tYXgpIHtcbiAgICAgICAgICAgIGlmIChyYW5nZS5fbWF4ID4gY3VycmVudC5fbWF4KSB7XG4gICAgICAgICAgICAgICAgY3VycmVudC5fbWF4ID0gcmFuZ2UuX21heDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG1lcmdlZC5wdXNoKGN1cnJlbnQpO1xuICAgICAgICAgICAgY3VycmVudCA9IHJhbmdlO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgbWVyZ2VkLnB1c2goY3VycmVudCk7XG4gICAgdGhpcy5fcmFuZ2VzID0gbWVyZ2VkO1xufVxuXG5fQ29tcG91bmQucHJvdG90eXBlLm1pbiA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl9yYW5nZXNbMF0ubWluKCk7XG59XG5cbl9Db21wb3VuZC5wcm90b3R5cGUubWF4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX3Jhbmdlc1t0aGlzLl9yYW5nZXMubGVuZ3RoIC0gMV0ubWF4KCk7XG59XG5cbi8vIHJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBmaXJzdCByYW5nZSB0aGF0IGlzIG5vdCBsZXNzIHRoYW4gcG9zXG5fQ29tcG91bmQucHJvdG90eXBlLmxvd2VyX2JvdW5kID0gZnVuY3Rpb24ocG9zKSB7XG4gICAgLy8gZmlyc3QgY2hlY2sgaWYgcG9zIGlzIG91dCBvZiByYW5nZVxuICAgIHZhciByID0gdGhpcy5yYW5nZXMoKTtcbiAgICBpZiAocG9zID4gdGhpcy5tYXgoKSkgcmV0dXJuIHIubGVuZ3RoO1xuICAgIGlmIChwb3MgPCB0aGlzLm1pbigpKSByZXR1cm4gMDtcbiAgICAvLyBkbyBhIGJpbmFyeSBzZWFyY2hcbiAgICB2YXIgYT0wLCBiPXIubGVuZ3RoIC0gMTtcbiAgICB3aGlsZSAoYSA8PSBiKSB7XG4gICAgICAgIHZhciBtID0gTWF0aC5mbG9vcigoYStiKS8yKTtcbiAgICAgICAgaWYgKHBvcyA+IHJbbV0uX21heCkge1xuICAgICAgICAgICAgYSA9IG0rMTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChwb3MgPCByW21dLl9taW4pIHtcbiAgICAgICAgICAgIGIgPSBtLTE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gYTtcbn1cblxuX0NvbXBvdW5kLnByb3RvdHlwZS5jb250YWlucyA9IGZ1bmN0aW9uKHBvcykge1xuICAgIHZhciBsYiA9IHRoaXMubG93ZXJfYm91bmQocG9zKTtcbiAgICBpZiAobGIgPCB0aGlzLl9yYW5nZXMubGVuZ3RoICYmIHRoaXMuX3Jhbmdlc1tsYl0uY29udGFpbnMocG9zKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuXG5fQ29tcG91bmQucHJvdG90eXBlLmluc2VydFJhbmdlID0gZnVuY3Rpb24ocmFuZ2UpIHtcbiAgICB2YXIgbGIgPSB0aGlzLmxvd2VyX2JvdW5kKHJhbmdlLl9taW4pO1xuICAgIGlmIChsYiA9PT0gdGhpcy5fcmFuZ2VzLmxlbmd0aCkgeyAvLyByYW5nZSBmb2xsb3dzIHRoaXNcbiAgICAgICAgdGhpcy5fcmFuZ2VzLnB1c2gocmFuZ2UpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIHZhciByID0gdGhpcy5yYW5nZXMoKTtcbiAgICBpZiAocmFuZ2UuX21heCA8IHJbbGJdLl9taW4pIHsgLy8gcmFuZ2UgcHJlY2VlZHMgbGJcbiAgICAgICAgdGhpcy5fcmFuZ2VzLnNwbGljZShsYiwwLHJhbmdlKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIHJhbmdlIG92ZXJsYXBzIGxiIChhdCBsZWFzdClcbiAgICBpZiAocltsYl0uX21pbiA8IHJhbmdlLl9taW4pIHJhbmdlLl9taW4gPSByW2xiXS5fbWluO1xuICAgIHZhciB1YiA9IGxiKzE7XG4gICAgd2hpbGUgKHViIDwgci5sZW5ndGggJiYgclt1Yl0uX21pbiA8PSByYW5nZS5fbWF4KSB7XG4gICAgICAgIHViKys7XG4gICAgfVxuICAgIHViLS07XG4gICAgLy8gdWIgaXMgdGhlIHVwcGVyIGJvdW5kIG9mIHRoZSBuZXcgcmFuZ2VcbiAgICBpZiAoclt1Yl0uX21heCA+IHJhbmdlLl9tYXgpIHJhbmdlLl9tYXggPSByW3ViXS5fbWF4O1xuICAgIFxuICAgIC8vIHNwbGljZSByYW5nZSBpbnRvIHRoaXMuX3Jhbmdlc1xuICAgIHRoaXMuX3Jhbmdlcy5zcGxpY2UobGIsdWItbGIrMSxyYW5nZSk7XG4gICAgcmV0dXJuO1xufVxuXG5fQ29tcG91bmQucHJvdG90eXBlLmlzQ29udGlndW91cyA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl9yYW5nZXMubGVuZ3RoID4gMTtcbn1cblxuX0NvbXBvdW5kLnByb3RvdHlwZS5yYW5nZXMgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5fcmFuZ2VzO1xufVxuXG5fQ29tcG91bmQucHJvdG90eXBlLl9wdXNoUmFuZ2VzID0gZnVuY3Rpb24ocmFuZ2VzKSB7XG4gICAgZm9yICh2YXIgcmkgPSAwOyByaSA8IHRoaXMuX3Jhbmdlcy5sZW5ndGg7ICsrcmkpXG4gICAgICAgIHJhbmdlcy5wdXNoKHRoaXMuX3Jhbmdlc1tyaV0pO1xufVxuXG5fQ29tcG91bmQucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHMgPSAnJztcbiAgICBmb3IgKHZhciByID0gMDsgciA8IHRoaXMuX3Jhbmdlcy5sZW5ndGg7ICsrcikge1xuICAgICAgICBpZiAocj4wKSB7XG4gICAgICAgICAgICBzID0gcyArICcsJztcbiAgICAgICAgfVxuICAgICAgICBzID0gcyArIHRoaXMuX3Jhbmdlc1tyXS50b1N0cmluZygpO1xuICAgIH1cbiAgICByZXR1cm4gcztcbn1cblxuZnVuY3Rpb24gdW5pb24oczAsIHMxKSB7XG4gICAgaWYgKCEgKHMwIGluc3RhbmNlb2YgX0NvbXBvdW5kKSkge1xuICAgICAgICBpZiAoISAoczAgaW5zdGFuY2VvZiBBcnJheSkpXG4gICAgICAgICAgICBzMCA9IFtzMF07XG4gICAgICAgIHMwID0gbmV3IF9Db21wb3VuZChzMCk7XG4gICAgfVxuICAgIFxuICAgIGlmIChzMSlcbiAgICAgICAgczAuaW5zZXJ0UmFuZ2UoczEpO1xuXG4gICAgcmV0dXJuIHMwO1xufVxuXG5mdW5jdGlvbiBpbnRlcnNlY3Rpb24oczAsIHMxKSB7XG4gICAgdmFyIHIwID0gczAucmFuZ2VzKCk7XG4gICAgdmFyIHIxID0gczEucmFuZ2VzKCk7XG4gICAgdmFyIGwwID0gcjAubGVuZ3RoLCBsMSA9IHIxLmxlbmd0aDtcbiAgICB2YXIgaTAgPSAwLCBpMSA9IDA7XG4gICAgdmFyIG9yID0gW107XG5cbiAgICB3aGlsZSAoaTAgPCBsMCAmJiBpMSA8IGwxKSB7XG4gICAgICAgIHZhciBzMCA9IHIwW2kwXSwgczEgPSByMVtpMV07XG4gICAgICAgIHZhciBsYXBNaW4gPSBNYXRoLm1heChzMC5taW4oKSwgczEubWluKCkpO1xuICAgICAgICB2YXIgbGFwTWF4ID0gTWF0aC5taW4oczAubWF4KCksIHMxLm1heCgpKTtcbiAgICAgICAgaWYgKGxhcE1heCA+PSBsYXBNaW4pIHtcbiAgICAgICAgICAgIG9yLnB1c2gobmV3IFJhbmdlKGxhcE1pbiwgbGFwTWF4KSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHMwLm1heCgpID4gczEubWF4KCkpIHtcbiAgICAgICAgICAgICsraTE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICArK2kwO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIGlmIChvci5sZW5ndGggPT0gMCkge1xuICAgICAgICByZXR1cm4gbnVsbDsgLy8gRklYTUVcbiAgICB9IGVsc2UgaWYgKG9yLmxlbmd0aCA9PSAxKSB7XG4gICAgICAgIHJldHVybiBvclswXTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gbmV3IF9Db21wb3VuZChvcik7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBjb3ZlcmFnZShzKSB7XG4gICAgdmFyIHRvdCA9IDA7XG4gICAgdmFyIHJsID0gcy5yYW5nZXMoKTtcbiAgICBmb3IgKHZhciByaSA9IDA7IHJpIDwgcmwubGVuZ3RoOyArK3JpKSB7XG4gICAgICAgIHZhciByID0gcmxbcmldO1xuICAgICAgICB0b3QgKz0gKHIubWF4KCkgLSByLm1pbigpICsgMSk7XG4gICAgfVxuICAgIHJldHVybiB0b3Q7XG59XG5cblxuXG5mdW5jdGlvbiByYW5nZU9yZGVyKGEsIGIpXG57XG4gICAgaWYgKGEubWluKCkgPCBiLm1pbigpKSB7XG4gICAgICAgIHJldHVybiAtMTtcbiAgICB9IGVsc2UgaWYgKGEubWluKCkgPiBiLm1pbigpKSB7XG4gICAgICAgIHJldHVybiAxO1xuICAgIH0gZWxzZSBpZiAoYS5tYXgoKSA8IGIubWF4KCkpIHtcbiAgICAgICAgcmV0dXJuIC0xO1xuICAgIH0gZWxzZSBpZiAoYi5tYXgoKSA+IGEubWF4KCkpIHtcbiAgICAgICAgcmV0dXJuIDE7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBfcmFuZ2VPcmRlcihhLCBiKVxue1xuICAgIGlmIChhLl9taW4gPCBiLl9taW4pIHtcbiAgICAgICAgcmV0dXJuIC0xO1xuICAgIH0gZWxzZSBpZiAoYS5fbWluID4gYi5fbWluKSB7XG4gICAgICAgIHJldHVybiAxO1xuICAgIH0gZWxzZSBpZiAoYS5fbWF4IDwgYi5fbWF4KSB7XG4gICAgICAgIHJldHVybiAtMTtcbiAgICB9IGVsc2UgaWYgKGIuX21heCA+IGEuX21heCkge1xuICAgICAgICByZXR1cm4gMTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG59XG5cbmlmICh0eXBlb2YobW9kdWxlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IHtcbiAgICAgICAgUmFuZ2U6IFJhbmdlLFxuICAgICAgICB1bmlvbjogdW5pb24sXG4gICAgICAgIGludGVyc2VjdGlvbjogaW50ZXJzZWN0aW9uLFxuICAgICAgICBjb3ZlcmFnZTogY292ZXJhZ2UsXG4gICAgICAgIHJhbmdlT3ZlcjogcmFuZ2VPcmRlcixcbiAgICAgICAgX3JhbmdlT3JkZXI6IF9yYW5nZU9yZGVyXG4gICAgfVxufSIsIi8qIC0qLSBtb2RlOiBqYXZhc2NyaXB0OyBjLWJhc2ljLW9mZnNldDogNDsgaW5kZW50LXRhYnMtbW9kZTogbmlsIC0qLSAqL1xuXG4vLyBcbi8vIERhbGxpYW5jZSBHZW5vbWUgRXhwbG9yZXJcbi8vIChjKSBUaG9tYXMgRG93biAyMDE0XG4vL1xuLy8gc3R5bGUuanNcbi8vXG5cblwidXNlIHN0cmljdFwiO1xuXG5mdW5jdGlvbiBTdHlsZUZpbHRlcih0eXBlLCBtZXRob2QsIGxhYmVsKSB7XG4gICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICB0aGlzLm1ldGhvZCA9IG1ldGhvZDtcbiAgICB0aGlzLmxhYmVsID0gbGFiZWw7XG59XG5cblN0eWxlRmlsdGVyLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbihvKSB7XG4gICAgcmV0dXJuIHRoaXMudHlwZSA9PSBvLnR5cGUgJiYgdGhpcy5tZXRob2QgPT0gby5tZXRob2QgJiYgdGhpcy5sYWJlbCA9PSBvLmxhYmVsO1xufVxuXG5TdHlsZUZpbHRlci5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgZnMgPSBbXTtcbiAgICBpZiAodGhpcy50eXBlKSBcbiAgICAgICAgZnMucHVzaCgndHlwZT0nICsgdGhpcy50eXBlKTtcbiAgICBpZiAodGhpcy5tZXRob2QpXG4gICAgICAgIGZzLnB1c2goJ21ldGhvZD0nICsgdGhpcy5tZXRob2QpO1xuICAgIGlmICh0aGlzLmxhYmVsKVxuICAgICAgICBmcy5wdXNoKCdsYWJlbD0nICsgdGhpcy5sYWJlbCk7XG4gICAgcmV0dXJuICdTdHlsZUZpbHRlcjwnICsgZnMuam9pbignOycpICsgJz4nO1xufVxuXG5mdW5jdGlvbiBTdHlsZUZpbHRlclNldChmaWx0ZXJzKSB7XG4gICAgdGhpcy5fZmlsdGVycyA9IHt9O1xuICAgIGlmIChmaWx0ZXJzKSB7XG4gICAgICAgIGZvciAodmFyIGZpID0gMDsgZmkgPCBmaWx0ZXJzLmxlbmd0aDsgKytmaSkge1xuICAgICAgICAgICAgdGhpcy5hZGQoZmlsdGVyc1tmaV0pO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5TdHlsZUZpbHRlclNldC5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24oZmlsdGVyKSB7XG4gICAgdmFyIGZzID0gZmlsdGVyLnRvU3RyaW5nKCk7XG4gICAgaWYgKCF0aGlzLl9maWx0ZXJzW2ZzXSkge1xuICAgICAgICB0aGlzLl9maWx0ZXJzW2ZzXSA9IGZpbHRlcjtcbiAgICAgICAgdGhpcy5fbGlzdCA9IG51bGw7XG4gICAgfVxufVxuXG5TdHlsZUZpbHRlclNldC5wcm90b3R5cGUuYWRkQWxsID0gZnVuY3Rpb24oZmlsdGVyU2V0KSB7XG4gICAgdmFyIGwgPSBmaWx0ZXJTZXQubGlzdCgpO1xuICAgIGZvciAodmFyIGZpID0gMDsgZmkgPCBsLmxlbmd0aDsgKytmaSkge1xuICAgICAgICB0aGlzLmFkZChsW2ZpXSk7XG4gICAgfVxufVxuXG5TdHlsZUZpbHRlclNldC5wcm90b3R5cGUuZG9lc05vdENvbnRhaW4gPSBmdW5jdGlvbihmaWx0ZXJTZXQpIHtcbiAgICB2YXIgbCA9IGZpbHRlclNldC5saXN0KCk7XG4gICAgZm9yICh2YXIgZmkgPSAwOyBmaSA8IGwubGVuZ3RoOyArK2ZpKSB7XG4gICAgICAgIGlmICghdGhpcy5fZmlsdGVyc1tmaS50b1N0cmluZygpXSlcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2Vcbn1cblxuU3R5bGVGaWx0ZXJTZXQucHJvdG90eXBlLmxpc3QgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoIXRoaXMuX2xpc3QpIHtcbiAgICAgICAgdGhpcy5fbGlzdCA9IFtdO1xuICAgICAgICBmb3IgKHZhciBrIGluIHRoaXMuX2ZpbHRlcnMpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9maWx0ZXJzLmhhc093blByb3BlcnR5KGspKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fbGlzdC5wdXNoKHRoaXMuX2ZpbHRlcnNba10pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9saXN0O1xufVxuXG5TdHlsZUZpbHRlclNldC5wcm90b3R5cGUudHlwZUxpc3QgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgdHlwZXMgPSBbXTtcbiAgICB2YXIgbGlzdCA9IHRoaXMubGlzdCgpO1xuICAgIGZvciAodmFyIGZpID0gMDsgZmkgPCBsaXN0Lmxlbmd0aDsgKytmaSkge1xuICAgICAgICB2YXIgZmlsdGVyID0gbGlzdFtmaV07XG4gICAgICAgIHZhciB0eXBlID0gZmlsdGVyLnR5cGU7XG4gICAgICAgIGlmICghdHlwZSB8fCB0eXBlID09ICdkZWZhdWx0JylcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICBpZiAodHlwZXMuaW5kZXhPZih0eXBlKSA8IDApXG4gICAgICAgICAgICB0eXBlcy5wdXNoKHR5cGUpO1xuICAgIH1cbiAgICByZXR1cm4gdHlwZXM7XG59XG5cbmlmICh0eXBlb2YobW9kdWxlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IHtcbiAgICAgICAgU3R5bGVGaWx0ZXI6IFN0eWxlRmlsdGVyLFxuICAgICAgICBTdHlsZUZpbHRlclNldDogU3R5bGVGaWx0ZXJTZXRcbiAgICB9O1xufVxuIiwiLyoganNoaW50IGVzdmVyc2lvbjogNiAqL1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbmV4cG9ydCB7IHJlbmRlclRpZXIsIGRyYXdUaWVyIH07XG5cbi8qIFRvIGJlIHVzZWQgYnkgdGllcnMgd2hpY2ggYXJlIHRvIGJlIGRyYXduIGluIGEgbXVsdGl0aWVyXG4gICB1c2luZyB0aGUgbXVsdGktcmVuZGVyZXIuXG5cbiAgIFN1YnRpZXJzIGFyZSBjb25maWd1cmVkIGJ5IGFkZGluZyB0aGUgZm9sbG93aW5nIHRvIGEgdGllcidzIHNvdXJjZSBjb25maWd1cmF0aW9uOlxuICAgICAgIHJlbmRlcmVyOiAnc3ViJyxcbiAgICAgICBzdWI6IHtcbiAgICAgICAgICAgbXVsdGlfaWQ6IFwibXVsdGlfMVwiLFxuICAgICAgICAgICBvZmZzZXQ6IDEzMCxcbiAgICAgICAgICAgejogMixcbiAgICAgICB9XG4gICBUaGlzIHdvdWxkIGRlZmluZSBhIHN1YnRpZXIgdGhhdCdzIHRvIGJlIHJlbmRlcmVkIGluIHRoZSBtdWx0aS10aWVyIHdpdGhcbiAgIGlkIFwibXVsdGlfMVwiLCB3aXRoIHRoZSB0b3Agb2YgdGhlIHN1YnRpZXIgYXQgMTMwIHBpeGVscyBhbmQgYXQgei1pbmRleCAyLlxuICovXG5cbmZ1bmN0aW9uIHJlbmRlclRpZXIoc3RhdHVzLCB0aWVyKSB7XG4gICAgZHJhd1RpZXIodGllcik7XG4gICAgdGllci51cGRhdGVTdGF0dXMoc3RhdHVzKTtcbn1cblxuLy8gZHJhd1RpZXIgaXMgY2FsbGVkIHdoZW4gdGhpcyB0aWVyJ3MgZGF0YSBoYXMgYmVlbiBmZXRjaGVkLFxuLy8gc28gYnkgcmVmcmVzaGluZyB0aGUgbXVsdGlUaWVyIGZyb20gaGVyZSwgd2UgY2FuIGJlIHN1cmUgdGhhdFxuLy8gdGhlcmUncyBzb21ldGhpbmcgbmV3IHdvcnRoIGRyYXdpbmcgaW4gaXRcbmZ1bmN0aW9uIGRyYXdUaWVyKHRpZXIpIHtcbiAgICBsZXQgYnJvd3NlciA9IHRpZXIuYnJvd3NlcjtcblxuICAgIGxldCBtdWx0aVRpZXIgPSBicm93c2VyLnRpZXJzLlxuICAgICAgICAgICAgZmlsdGVyKHQgPT4gdC5kYXNTb3VyY2UucmVuZGVyZXIgPT09ICdtdWx0aScgJiZcbiAgICAgICAgICAgICAgICAgICB0LmRhc1NvdXJjZS5tdWx0aS5tdWx0aV9pZCA9PT0gdGllci5kYXNTb3VyY2Uuc3ViLm11bHRpX2lkKTtcblxuICAgIG11bHRpVGllci5mb3JFYWNoKHQgPT4gYnJvd3Nlci5yZWZyZXNoVGllcih0KSk7XG59XG4iLCIvKiAtKi0gbW9kZTogamF2YXNjcmlwdDsgYy1iYXNpYy1vZmZzZXQ6IDQ7IGluZGVudC10YWJzLW1vZGU6IG5pbCAtKi0gKi9cblxuLy8gXG4vLyBEYWxsaWFuY2UgR2Vub21lIEV4cGxvcmVyXG4vLyAoYykgVGhvbWFzIERvd24gMjAwNi0yMDEzXG4vL1xuLy8gc3ZnLWV4cG9ydC5qc1xuLy9cblxuaWYgKHR5cGVvZihyZXF1aXJlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB2YXIgYnJvd3NlciA9IHJlcXVpcmUoJy4vY2Jyb3dzZXInKTtcbiAgICB2YXIgQnJvd3NlciA9IGJyb3dzZXIuQnJvd3NlcjtcblxuICAgIHZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcbiAgICB2YXIgbWFrZUVsZW1lbnQgPSB1dGlscy5tYWtlRWxlbWVudDtcbiAgICB2YXIgbWFrZUVsZW1lbnROUyA9IHV0aWxzLm1ha2VFbGVtZW50TlM7XG5cbiAgICB2YXIgVkVSU0lPTiA9IHJlcXVpcmUoJy4vdmVyc2lvbicpO1xuXG4gICAgdmFyIHN2Z1NlcVRpZXIgPSByZXF1aXJlKCcuL3NlcXVlbmNlLWRyYXcnKS5zdmdTZXFUaWVyO1xuXG4gICAgdmFyIHN2Z3UgPSByZXF1aXJlKCcuL3N2Zy11dGlscycpO1xuICAgIHZhciBOU19TVkcgPSBzdmd1Lk5TX1NWRztcbiAgICB2YXIgTlNfWExJTksgPSBzdmd1Lk5TX1hMSU5LO1xuICAgIHZhciBTVkdQYXRoID0gc3ZndS5TVkdQYXRoO1xuXG4gICAgdmFyIG5mID0gcmVxdWlyZSgnLi9udW1mb3JtYXRzJyk7XG4gICAgdmFyIGZvcm1hdFF1YW50TGFiZWwgPSBuZi5mb3JtYXRRdWFudExhYmVsO1xuICAgIHZhciBmb3JtYXRMb25nSW50ID0gbmYuZm9ybWF0TG9uZ0ludDtcbn1cblxuXG5Ccm93c2VyLnByb3RvdHlwZS5tYWtlU1ZHID0gZnVuY3Rpb24ob3B0cykge1xuICAgIG9wdHMgPSBvcHRzIHx8IHt9O1xuICAgIHZhciBtaW5UaWVySGVpZ2h0ID0gb3B0cy5taW5UaWVySGVpZ2h0IHx8IDIwO1xuICAgIHZhciBwYWRkaW5nID0gMztcbiAgICB2YXIgZnB3ID0gb3B0cy53aWR0aCB8fCB0aGlzLmZlYXR1cmVQYW5lbFdpZHRoO1xuXG4gICAgdmFyIGJhY2t1cEZQVyA9IHRoaXMuZmVhdHVyZVBhbmVsV2lkdGg7XG4gICAgdmFyIGJhY2t1cFNjYWxlID0gdGhpcy5zY2FsZTtcbiAgICB0aGlzLmZlYXR1cmVQYW5lbFdpZHRoID0gZnB3O1xuICAgIHRoaXMuc2NhbGUgPSB0aGlzLmZlYXR1cmVQYW5lbFdpZHRoIC8gKHRoaXMudmlld0VuZCAtIHRoaXMudmlld1N0YXJ0KTtcblxuICAgIHZhciBiID0gdGhpcztcbiAgICB2YXIgc2F2ZURvYyA9IGRvY3VtZW50LmltcGxlbWVudGF0aW9uLmNyZWF0ZURvY3VtZW50KE5TX1NWRywgJ3N2ZycsIG51bGwpO1xuXG4gICAgdmFyIHNhdmVSb290ID0gbWFrZUVsZW1lbnROUyhOU19TVkcsICdnJywgbnVsbCwge1xuICAgICAgICBmb250RmFtaWx5OiAnaGVsdmV0aWNhJyxcbiAgICAgICAgZm9udFNpemU6ICc4cHQnXG4gICAgfSk7XG4gICAgc2F2ZURvYy5kb2N1bWVudEVsZW1lbnQuYXBwZW5kQ2hpbGQoc2F2ZVJvb3QpO1xuXG4gICAgdmFyIG1hcmdpbiA9IDIwMDtcblxuICAgIGlmIChvcHRzLmJhbm5lcikge1xuICAgICAgdmFyIGRhbGxpYW5jZUFuY2hvciA9IG1ha2VFbGVtZW50TlMoTlNfU1ZHLCAnYScsXG4gICAgICAgICBtYWtlRWxlbWVudE5TKE5TX1NWRywgJ3RleHQnLCAnR3JhcGhpY3MgZnJvbSBCaW9kYWxsaWFuY2UgJyArIFZFUlNJT04sIHtcbiAgICAgICAgICAgICB4OiAoYi5mZWF0dXJlUGFuZWxXaWR0aCArIG1hcmdpbikgLSAxMDAsXG4gICAgICAgICAgICAgeTogMzUsXG4gICAgICAgICAgICAgc3Ryb2tlV2lkdGg6IDAsXG4gICAgICAgICAgICAgZm9udFNpemU6ICcxMnB0Jyxcblx0ICAgICB0ZXh0QW5jaG9yOiAnZW5kJyxcblx0ICAgICBmaWxsOiAnYmx1ZSdcbiAgICAgICAgIH0pKTtcbiAgICAgIGRhbGxpYW5jZUFuY2hvci5zZXRBdHRyaWJ1dGUoJ3htbG5zOnhsaW5rJywgTlNfWExJTkspO1xuICAgICAgZGFsbGlhbmNlQW5jaG9yLnNldEF0dHJpYnV0ZSgneGxpbms6aHJlZicsICdodHRwOi8vd3d3LmJpb2RhbGxpYW5jZS5vcmcvJyk7XG5cbiAgICAgIHNhdmVSb290LmFwcGVuZENoaWxkKGRhbGxpYW5jZUFuY2hvcik7XG4gICAgfVxuICBcbiAgICBpZiAob3B0cy5yZWdpb24pIHtcbiAgICAgICAgc2F2ZVJvb3QuYXBwZW5kQ2hpbGQoXG4gICAgICAgICAgICBtYWtlRWxlbWVudE5TKE5TX1NWRywgJ3RleHQnLCB0aGlzLmNociArICc6JyArIGZvcm1hdExvbmdJbnQodGhpcy52aWV3U3RhcnQpICsgJy4uJyArIGZvcm1hdExvbmdJbnQodGhpcy52aWV3RW5kKSwge1xuICAgICAgICAgICAgICAgIHg6IG1hcmdpbiArIDEwMCxcbiAgICAgICAgICAgICAgICB5OiAzNSxcbiAgICAgICAgICAgICAgICBzdHJva2VXaWR0aDogMCxcbiAgICAgICAgICAgICAgICBmb250U2l6ZTogJzEycHQnLFxuICAgICAgICAgICAgICAgIHRleHRBbmNob3I6ICdzdGFydCdcbiAgICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgfVxuICAgIFxuICAgIHZhciBjbGlwUmVjdCA9IG1ha2VFbGVtZW50TlMoTlNfU1ZHLCAncmVjdCcsIG51bGwsIHtcbiAgICBcdHg6IG1hcmdpbixcbiAgICBcdHk6IDUwLFxuICAgIFx0d2lkdGg6IGIuZmVhdHVyZVBhbmVsV2lkdGgsXG4gICAgXHRoZWlnaHQ6IDEwMDAwMFxuICAgIH0pO1xuICAgIHZhciBjbGlwID0gbWFrZUVsZW1lbnROUyhOU19TVkcsICdjbGlwUGF0aCcsIGNsaXBSZWN0LCB7aWQ6ICdmZWF0dXJlQ2xpcCd9KTtcbiAgICBzYXZlUm9vdC5hcHBlbmRDaGlsZChjbGlwKTtcblxuICAgIHZhciBwb3MgPSA3MDtcbiAgICB2YXIgdGllckhvbGRlciA9IG1ha2VFbGVtZW50TlMoTlNfU1ZHLCAnZycsIG51bGwsIHt9KTtcblxuICAgIGZvciAodmFyIHRpID0gMDsgdGkgPCBiLnRpZXJzLmxlbmd0aDsgKyt0aSkge1xuICAgICAgICB2YXIgdGllciA9IGIudGllcnNbdGldO1xuICAgICAgICB0aWVyLmJhY2t1cFN1YnRpZXJzID0gdGllci5zdWJ0aWVycztcbiAgICAgICAgdGllci5iYWNrdXBPcmlnaW5IYXh4ID0gdGllci5vcmlnaW5IYXh4O1xuICAgICAgICB0aWVyLmJhY2t1cExheW91dEhlaWdodCA9IHRpZXIubGF5b3V0SGVpZ2h0O1xuXG4gICAgICAgIGNvbnN0IHJlbmRlcmVyID0gYi5nZXRUaWVyUmVuZGVyZXIodGllcik7XG4gICAgICAgIGlmIChyZW5kZXJlciAmJiByZW5kZXJlci5wcmVwYXJlU3VidGllcnMpIHtcbiAgICAgICAgICAgIHJlbmRlcmVyLnByZXBhcmVTdWJ0aWVycyh0aWVyLCB0aWVyLnZpZXdwb3J0LmdldENvbnRleHQoJzJkJykpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHRpZXJTVkcgPSBtYWtlRWxlbWVudE5TKE5TX1NWRywgJ2cnLCBudWxsLCB7Y2xpcFBhdGg6ICd1cmwoI2ZlYXR1cmVDbGlwKScsIGNsaXBSdWxlOiAnbm9uemVybyd9KTtcbiAgICBcdHZhciB0aWVyTGFiZWxzID0gbWFrZUVsZW1lbnROUyhOU19TVkcsICdnJyk7XG4gICAgXHR2YXIgdGllclRvcFBvcyA9IHBvcztcblxuICAgIFx0dmFyIHRpZXJCYWNrZ3JvdW5kID0gbWFrZUVsZW1lbnROUyhOU19TVkcsICdyZWN0JywgbnVsbCwge3g6IDAsIHk6IHRpZXJUb3BQb3MsIHdpZHRoOiAnMTAwMDAnLCBoZWlnaHQ6IDUwLCBmaWxsOiB0aWVyLmJhY2tncm91bmR9KTtcbiAgICBcdHRpZXJTVkcuYXBwZW5kQ2hpbGQodGllckJhY2tncm91bmQpO1xuXG4gICAgXHRpZiAodGllci5zZXF1ZW5jZVNvdXJjZSkge1xuICAgIFx0ICAgIHZhciBzZXFUcmFjayA9IHN2Z1NlcVRpZXIodGllciwgdGllci5jdXJyZW50U2VxdWVuY2UpO1xuICAgIFx0ICAgIFxuICAgIFx0ICAgIHRpZXJTVkcuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnROUyhOU19TVkcsICdnJywgc2VxVHJhY2ssIHt0cmFuc2Zvcm06ICd0cmFuc2xhdGUoJyArIChtYXJnaW4pICsgJywgJyArIHBvcyArICcpJ30pKTtcbiAgICBcdCAgICBwb3MgKz0gODA7XG4gICAgXHR9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKCF0aWVyLnN1YnRpZXJzKSB7XG4gICAgXHRcdCAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgIFx0XG4gICAgXHQgICAgdmFyIG9mZnNldCA9ICgodGllci5nbHlwaENhY2hlT3JpZ2luIC0gYi52aWV3U3RhcnQpICogYi5zY2FsZSk7XG4gICAgICAgICAgICB2YXIgaGFzUXVhbnQgPSBmYWxzZTtcbiAgICAgICAgICAgIGZvciAodmFyIHN0aSA9IDA7IHN0aSA8IHRpZXIuc3VidGllcnMubGVuZ3RoOyArK3N0aSkge1xuICAgICAgICAgICAgICAgIHBvcyArPSBwYWRkaW5nO1xuICAgICAgICBcdFx0dmFyIHN1YnRpZXIgPSB0aWVyLnN1YnRpZXJzW3N0aV07XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICBcdFx0dmFyIGdseXBoRWxlbWVudHMgPSBbXTtcbiAgICAgICAgXHRcdGZvciAodmFyIGdpID0gMDsgZ2kgPCBzdWJ0aWVyLmdseXBocy5sZW5ndGg7ICsrZ2kpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGdseXBoID0gc3VidGllci5nbHlwaHNbZ2ldO1xuICAgICAgICAgICAgICAgICAgICBnbHlwaEVsZW1lbnRzLnB1c2goZ2x5cGgudG9TVkcoKSk7XG4gICAgICAgIFx0XHR9XG5cbiAgICBcdFx0ICAgIHRpZXJTVkcuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnROUyhOU19TVkcsICdnJywgZ2x5cGhFbGVtZW50cywge3RyYW5zZm9ybTogJ3RyYW5zbGF0ZSgnICsgKG1hcmdpbitvZmZzZXQpICsgJywgJyArIHBvcyArICcpJ30pKTtcblxuICAgICAgICBcdFx0aWYgKHN1YnRpZXIucXVhbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgaGFzUXVhbnQgPSB0cnVlO1xuICAgICAgICBcdFx0ICAgIHZhciBxID0gc3VidGllci5xdWFudDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGggPSBzdWJ0aWVyLmhlaWdodDtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgbnVtVGljcyA9IDI7XG4gICAgICAgICAgICAgICAgICAgIGlmIChoID4gNDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG51bVRpY3MgPSAxICsgKChoLzIwKSB8IDApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHZhciB0aWNTcGFjaW5nID0gaCAvIChudW1UaWNzIC0gMSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0aWNJbnRlcnZhbCA9IChxLm1heCAtIHEubWluKSAvIChudW1UaWNzIC0gMSk7XG5cbiAgICAgICAgXHRcdCAgICB2YXIgcGF0aCA9IG5ldyBTVkdQYXRoKCk7XG4gICAgICAgIFx0XHQgICAgcGF0aC5tb3ZlVG8obWFyZ2luICsgNSwgcG9zKTtcbiAgICAgICAgXHRcdCAgICBwYXRoLmxpbmVUbyhtYXJnaW4sIHBvcyk7XG4gICAgICAgIFx0XHQgICAgcGF0aC5saW5lVG8obWFyZ2luLCBwb3MgKyBzdWJ0aWVyLmhlaWdodCk7XG4gICAgICAgIFx0XHQgICAgcGF0aC5saW5lVG8obWFyZ2luICsgNSwgcG9zICsgc3VidGllci5oZWlnaHQpO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB0ID0gMTsgdCA8IG51bVRpY3MtMTsgKyt0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdHkgPSB0KnRpY1NwYWNpbmc7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRoLm1vdmVUbyhtYXJnaW4sIHBvcyArIHR5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGgubGluZVRvKG1hcmdpbiszLCBwb3MgKyB0eSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICBcdFx0ICAgIHRpZXJMYWJlbHMuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnROUyhOU19TVkcsICdwYXRoJywgbnVsbCwge2Q6IHBhdGgudG9QYXRoRGF0YSgpLCBmaWxsOiAnbm9uZScsIHN0cm9rZTogJ2JsYWNrJywgc3Ryb2tlV2lkdGg6ICcycHgnfSkpO1xuICAgICAgICBcdFx0ICAgIHRpZXJMYWJlbHMuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnROUyhOU19TVkcsICd0ZXh0JywgZm9ybWF0UXVhbnRMYWJlbChxLm1heCksIHt4OiBtYXJnaW4gLSAzLCB5OiBwb3MgKyA3LCB0ZXh0QW5jaG9yOiAnZW5kJ30pKTtcbiAgICAgICAgXHRcdCAgICB0aWVyTGFiZWxzLmFwcGVuZENoaWxkKG1ha2VFbGVtZW50TlMoTlNfU1ZHLCAndGV4dCcsIGZvcm1hdFF1YW50TGFiZWwocS5taW4pLCB7eDogbWFyZ2luIC0gMywgeTogcG9zICsgIHN1YnRpZXIuaGVpZ2h0LCB0ZXh0QW5jaG9yOiAnZW5kJ30pKTtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgdCA9IDE7IHQgPCBudW1UaWNzLTE7ICsrdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHR5ID0gdCp0aWNTcGFjaW5nO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGllckxhYmVscy5hcHBlbmRDaGlsZChtYWtlRWxlbWVudE5TKE5TX1NWRywgJ3RleHQnLCBmb3JtYXRRdWFudExhYmVsKCgxLjAqcS5tYXgpIC0gKHQqdGljSW50ZXJ2YWwpKSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3g6IG1hcmdpbiAtIDMsIHk6IHBvcyArICB0eSArIDMsIHRleHRBbmNob3I6ICdlbmQnfSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgIFx0XHR9XG5cbiAgICBcdFx0ICAgIHBvcyArPSBzdWJ0aWVyLmhlaWdodCArIHBhZGRpbmc7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChwb3MgLSB0aWVyVG9wUG9zIDwgbWluVGllckhlaWdodCkge1xuICAgICAgICAgICAgICAgIHBvcyA9IHRpZXJUb3BQb3MgKyBtaW5UaWVySGVpZ2h0O1xuICAgICAgICAgICAgfVxuICAgIFx0fVxuXG4gICAgICAgIHZhciBsYWJlbE5hbWU7XG4gICAgICAgIGlmICh0eXBlb2YgdGllci5jb25maWcubmFtZSA9PT0gJ3N0cmluZycpXG4gICAgICAgICAgICBsYWJlbE5hbWUgPSB0aWVyLmNvbmZpZy5uYW1lO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICBsYWJlbE5hbWUgPSB0aWVyLmRhc1NvdXJjZS5uYW1lO1xuICAgIFx0dGllckxhYmVscy5hcHBlbmRDaGlsZChcbiAgICBcdCAgICBtYWtlRWxlbWVudE5TKFxuICAgIFx0XHROU19TVkcsICd0ZXh0JyxcbiAgICBcdFx0bGFiZWxOYW1lLFxuICAgIFx0XHR7eDogbWFyZ2luIC0gKGhhc1F1YW50ID8gMjAgOiAxMiksIHk6IChwb3MrdGllclRvcFBvcys4KS8yLCBmb250U2l6ZTogJzEwcHQnLCB0ZXh0QW5jaG9yOiAnZW5kJ30pKTtcblxuICAgIFx0XG4gICAgXHR0aWVyQmFja2dyb3VuZC5zZXRBdHRyaWJ1dGUoJ2hlaWdodCcsIHBvcyAtIHRpZXJUb3BQb3MpO1xuICAgIFx0dGllckhvbGRlci5hcHBlbmRDaGlsZChtYWtlRWxlbWVudE5TKE5TX1NWRywgJ2cnLCBbdGllclNWRywgdGllckxhYmVsc10pKTtcblxuICAgICAgICB0aWVyLnN1YnRpZXJzID0gdGllci5iYWNrdXBTdWJ0aWVycztcbiAgICAgICAgdGllci5vcmlnaW5IYXh4ID0gdGllci5iYWNrdXBPcmlnaW5IYXh4O1xuICAgICAgICB0aWVyLmxheW91dEhlaWdodCA9IHRpZXIuYmFja3VwTGF5b3V0SGVpZ2h0O1xuICAgIH1cblxuICAgIGlmIChvcHRzLmhpZ2hsaWdodHMpIHtcbiAgICAgICAgdmFyIGhpZ2hsaWdodHMgPSB0aGlzLmhpZ2hsaWdodHMgfHwgW107XG4gICAgICAgIGZvciAodmFyIGhpID0gMDsgaGkgPCBoaWdobGlnaHRzLmxlbmd0aDsgKytoaSkge1xuICAgICAgICAgICAgdmFyIGggPSBoaWdobGlnaHRzW2hpXTtcbiAgICAgICAgICAgIGlmICgoaC5jaHIgPT0gdGhpcy5jaHIgfHwgaC5jaHIgPT0gKCdjaHInICsgdGhpcy5jaHIpKSAmJiBoLm1pbiA8IHRoaXMudmlld0VuZCAmJiBoLm1heCA+IHRoaXMudmlld1N0YXJ0KSB7XG4gICAgICAgICAgICAgICAgdmFyIHRtaW4gPSAoTWF0aC5tYXgoaC5taW4sIHRoaXMudmlld1N0YXJ0KSAtIHRoaXMudmlld1N0YXJ0KSAqIHRoaXMuc2NhbGU7XG4gICAgICAgICAgICAgICAgdmFyIHRtYXggPSAoTWF0aC5taW4oaC5tYXgsIHRoaXMudmlld0VuZCkgLSB0aGlzLnZpZXdTdGFydCkgKiB0aGlzLnNjYWxlO1xuXG4gICAgICAgICAgICAgICAgdGllckhvbGRlci5hcHBlbmRDaGlsZChtYWtlRWxlbWVudE5TKE5TX1NWRywgJ3JlY3QnLCBudWxsLCB7eDogbWFyZ2luICsgdG1pbiwgeTogNzAsIHdpZHRoOiAodG1heC10bWluKSwgaGVpZ2h0OiBwb3MtNzAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3Ryb2tlOiAnbm9uZScsIGZpbGw6IHRoaXMuZGVmYXVsdEhpZ2hsaWdodEZpbGwsIGZpbGxPcGFjaXR5OiB0aGlzLmRlZmF1bHRIaWdobGlnaHRBbHBoYX0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHZhciBydWxlclBvcyA9IC0xOyBcbiAgICBpZiAob3B0cy5ydWxlciA9PSAnY2VudGVyJykge1xuICAgICAgICBydWxlclBvcyA9IG1hcmdpbiArICgodGhpcy52aWV3RW5kIC0gdGhpcy52aWV3U3RhcnQpKnRoaXMuc2NhbGUpIC8gMjtcbiAgICB9IGVsc2UgaWYgKG9wdHMucnVsZXIgPT0gJ2xlZnQnKSB7XG4gICAgICAgIHJ1bGVyUG9zID0gbWFyZ2luO1xuICAgIH0gZWxzZSBpZiAob3B0cy5ydWxlciA9PSAncmlnaHQnKSB7XG4gICAgICAgIHJ1bGVyUG9zID0gbWFyZ2luICsgKCh0aGlzLnZpZXdFbmQgLSB0aGlzLnZpZXdTdGFydCkqdGhpcy5zY2FsZSk7XG4gICAgfVxuICAgIGlmIChydWxlclBvcyA+PSAwKSB7XG4gICAgICAgIHRpZXJIb2xkZXIuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnROUyhOU19TVkcsICdsaW5lJywgbnVsbCwge3gxOiBydWxlclBvcywgeTE6IDcwLCB4MjogcnVsZXJQb3MsIHkyOiBwb3MsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cm9rZTogJ2JsdWUnfSkpO1xuICAgIH1cblxuICAgIHNhdmVSb290LmFwcGVuZENoaWxkKHRpZXJIb2xkZXIpO1xuICAgIHNhdmVEb2MuZG9jdW1lbnRFbGVtZW50LnNldEF0dHJpYnV0ZSgnd2lkdGgnLCBiLmZlYXR1cmVQYW5lbFdpZHRoICsgMjAgKyBtYXJnaW4pO1xuICAgIHNhdmVEb2MuZG9jdW1lbnRFbGVtZW50LnNldEF0dHJpYnV0ZSgnaGVpZ2h0JywgcG9zICsgNTApO1xuXG4gICAgXG4gICAgdGhpcy5mZWF0dXJlUGFuZWxXaWR0aCA9IGJhY2t1cEZQVztcbiAgICB0aGlzLnNjYWxlID0gYmFja3VwU2NhbGU7XG5cbiAgICBsZXQgc3ZnO1xuICAgIGlmICh0eXBlb2YoWE1MU2VyaWFsaXplcikgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHN2ZyA9IG5ldyBYTUxTZXJpYWxpemVyKCkuc2VyaWFsaXplVG9TdHJpbmcoc2F2ZURvYyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3Qgcm9vdCA9IHNhdmVEb2MuZG9jdW1lbnRFbGVtZW50O1xuICAgICAgICByb290LnNldEF0dHJpYnV0ZSgneG1sbnMnLCAnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnKTtcbiAgICAgICAgc3ZnID0gcm9vdC5vdXRlckhUTUw7XG4gICAgfVxuXG4gICAgaWYgKG9wdHMub3V0cHV0ICYmIG9wdHMub3V0cHV0ID09PSAnc3RyaW5nJykge1xuICAgICAgICByZXR1cm4gc3ZnO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBuZXcgQmxvYihbc3ZnXSwge3R5cGU6ICdpbWFnZS9zdmcreG1sJ30pO1xuICAgIH1cbn1cbiIsIi8qIC0qLSBtb2RlOiBqYXZhc2NyaXB0OyBjLWJhc2ljLW9mZnNldDogNDsgaW5kZW50LXRhYnMtbW9kZTogbmlsIC0qLSAqL1xuXG4vLyBcbi8vIERhbGxpYW5jZSBHZW5vbWUgRXhwbG9yZXJcbi8vIChjKSBUaG9tYXMgRG93biAyMDA2LTIwMTRcbi8vXG4vLyBzdmctdXRpbHMuanNcbi8vXG5cbnZhciBOU19TVkcgPSAnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnO1xudmFyIE5TX1hMSU5LID0gJ2h0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsnO1xuXG5mdW5jdGlvbiBTVkdQYXRoKCkge1xuICAgIHRoaXMub3BzID0gW107XG59XG5cblNWR1BhdGgucHJvdG90eXBlLm1vdmVUbyA9IGZ1bmN0aW9uKHgsIHkpIHtcbiAgICB0aGlzLm9wcy5wdXNoKCdNICcgKyB4ICsgJyAnICsgeSk7XG59XG5cblNWR1BhdGgucHJvdG90eXBlLmxpbmVUbyA9IGZ1bmN0aW9uKHgsIHkpIHtcbiAgICB0aGlzLm9wcy5wdXNoKCdMICcgKyB4ICsgJyAnICsgeSk7XG59XG5cblNWR1BhdGgucHJvdG90eXBlLmNsb3NlUGF0aCA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMub3BzLnB1c2goJ1onKTtcbn1cblxuU1ZHUGF0aC5wcm90b3R5cGUudG9QYXRoRGF0YSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLm9wcy5qb2luKCcgJyk7XG59XG5cbmlmICh0eXBlb2YobW9kdWxlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IHtcbiAgICAgICAgTlNfU1ZHOiBOU19TVkcsXG4gICAgICAgIE5TX1hMSU5LOiBOU19YTElOSyxcbiAgICAgICAgU1ZHUGF0aDogU1ZHUGF0aFxuICAgIH1cbn0iLCIvKiAtKi0gbW9kZTogamF2YXNjcmlwdDsgYy1iYXNpYy1vZmZzZXQ6IDQ7IGluZGVudC10YWJzLW1vZGU6IG5pbCAtKi0gKi9cblxuLy8gXG4vLyBEYWxsaWFuY2UgR2Vub21lIEV4cGxvcmVyXG4vLyAoYykgVGhvbWFzIERvd24gMjAwNi0yMDEzXG4vL1xuLy8gdGFiaXgtc291cmNlLmpzXG4vL1xuXG5cInVzZSBzdHJpY3RcIjtcblxuaWYgKHR5cGVvZihyZXF1aXJlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB2YXIgc2EgPSByZXF1aXJlKCcuL3NvdXJjZWFkYXB0ZXJzJyk7XG4gICAgdmFyIGRhbGxpYW5jZV9yZWdpc3RlclNvdXJjZUFkYXB0ZXJGYWN0b3J5ID0gc2EucmVnaXN0ZXJTb3VyY2VBZGFwdGVyRmFjdG9yeTtcbiAgICB2YXIgZGFsbGlhbmNlX21ha2VQYXJzZXIgPSBzYS5tYWtlUGFyc2VyO1xuICAgIHZhciBGZWF0dXJlU291cmNlQmFzZSA9IHNhLkZlYXR1cmVTb3VyY2VCYXNlO1xuXG4gICAgdmFyIGJpbiA9IHJlcXVpcmUoJy4vYmluJyk7XG4gICAgdmFyIFVSTEZldGNoYWJsZSA9IGJpbi5VUkxGZXRjaGFibGU7XG4gICAgdmFyIEJsb2JGZXRjaGFibGUgPSBiaW4uQmxvYkZldGNoYWJsZTtcblxuICAgIHZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcbiAgICB2YXIgQXdhaXRlZCA9IHV0aWxzLkF3YWl0ZWQ7XG5cbiAgICB2YXIgY29ubmVjdFRhYml4ID0gcmVxdWlyZSgnLi90YWJpeCcpLmNvbm5lY3RUYWJpeDtcbn1cblxuZnVuY3Rpb24gVGFiaXhGZWF0dXJlU291cmNlKHNvdXJjZSkge1xuICAgIEZlYXR1cmVTb3VyY2VCYXNlLmNhbGwodGhpcyk7XG4gICAgdGhpcy5yZWFkaW5lc3MgPSAnQ29ubmVjdGluZyc7XG4gICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG5cbiAgICB0aGlzLnRhYml4SG9sZGVyID0gbmV3IEF3YWl0ZWQoKTtcbiAgICB2YXIgdGhpc0IgPSB0aGlzO1xuXG5cbiAgICB2YXIgcGFyc2VyID0gZGFsbGlhbmNlX21ha2VQYXJzZXIoc291cmNlLnBheWxvYWQpO1xuICAgIGlmICghcGFyc2VyKSB7XG4gICAgICAgIHRocm93ICdVbnN1cG9ydGVkIHRhYml4IHBheWxvYWQgJyArIHNvdXJjZS5wYXlsb2FkO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucGFyc2VyID0gcGFyc2VyO1xuICAgIH1cblxuICAgIHZhciBkYXRhLCBpbmRleDtcbiAgICBpZiAodGhpcy5zb3VyY2UuYmxvYikge1xuICAgICAgICBkYXRhID0gbmV3IEJsb2JGZXRjaGFibGUodGhpcy5zb3VyY2UuYmxvYik7XG4gICAgICAgIGluZGV4ID0gbmV3IEJsb2JGZXRjaGFibGUodGhpcy5zb3VyY2UuaW5kZXhCbG9iKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBkYXRhID0gbmV3IFVSTEZldGNoYWJsZSh0aGlzLnNvdXJjZS51cmksIHtjcmVkZW50aWFsczogdGhpcy5zb3VyY2UuY3JlZGVudGlhbHMsIHJlc29sdmVyOiB0aGlzLnNvdXJjZS5yZXNvbHZlcn0pO1xuICAgICAgICBpbmRleCA9IG5ldyBVUkxGZXRjaGFibGUodGhpcy5zb3VyY2UuaW5kZXhVUkkgfHwgKHRoaXMuc291cmNlLnVyaSArICcudGJpJyksIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2NyZWRlbnRpYWxzOiB0aGlzLnNvdXJjZS5jcmVkZW50aWFscywgcmVzb2x2ZXI6IHRoaXMuc291cmNlLnJlc29sdmVyfSk7XG4gICAgfVxuICAgIGNvbm5lY3RUYWJpeChkYXRhLCBpbmRleCwgZnVuY3Rpb24odGFiaXgsIGVycikge1xuICAgICAgICB0aGlzQi50YWJpeEhvbGRlci5wcm92aWRlKHRhYml4KTtcbiAgICAgICAgdGFiaXguZmV0Y2hIZWFkZXIoZnVuY3Rpb24obGluZXMsIGVycikge1xuICAgICAgICAgICAgaWYgKGxpbmVzKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNlc3Npb24gPSBwYXJzZXIuY3JlYXRlU2Vzc2lvbihmdW5jdGlvbigpIHsgLyogTnVsbCBzaW5rIGJlY2F1c2Ugd2Ugc2hvdWxkbid0IGdldCByZWNvcmRzICovIH0pO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGxpID0gMDsgbGkgPCBsaW5lcy5sZW5ndGg7ICsrbGkpIHtcbiAgICAgICAgICAgICAgICAgICAgc2Vzc2lvbi5wYXJzZShsaW5lc1tsaV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzZXNzaW9uLmZsdXNoKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzQi5yZWFkaW5lc3MgPSBudWxsXG4gICAgICAgIHRoaXNCLm5vdGlmeVJlYWRpbmVzcygpO1xuICAgIH0pO1xufVxuXG5UYWJpeEZlYXR1cmVTb3VyY2UucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShGZWF0dXJlU291cmNlQmFzZS5wcm90b3R5cGUpO1xuXG5UYWJpeEZlYXR1cmVTb3VyY2UucHJvdG90eXBlLmZldGNoID0gZnVuY3Rpb24oY2hyLCBtaW4sIG1heCwgc2NhbGUsIHR5cGVzLCBwb29sLCBjYWxsYmFjaykge1xuICAgIHZhciB0aGlzQiA9IHRoaXM7XG4gICAgXG4gICAgdGhpc0IuYnVzeSsrO1xuICAgIHRoaXNCLm5vdGlmeUFjdGl2aXR5KCk7XG4gICAgXG4gICAgdGhpcy50YWJpeEhvbGRlci5hd2FpdChmdW5jdGlvbih0YWJpeCkge1xuICAgICAgICB0YWJpeC5mZXRjaChjaHIsIG1pbiwgbWF4LCBmdW5jdGlvbihyZWNvcmRzLCBlcnJvcikge1xuICAgICAgICAgICAgdGhpc0IuYnVzeS0tO1xuICAgICAgICAgICAgdGhpc0Iubm90aWZ5QWN0aXZpdHkoKTtcblxuICAgICAgICAgICAgdmFyIGZlYXR1cmVzID0gW107XG4gICAgICAgICAgICB2YXIgc2Vzc2lvbiA9IHRoaXNCLnBhcnNlci5jcmVhdGVTZXNzaW9uKGZ1bmN0aW9uKGYpIHtmZWF0dXJlcy5wdXNoKGYpfSk7XG4gICAgICAgICAgICBmb3IgKHZhciByaSA9IDA7IHJpIDwgcmVjb3Jkcy5sZW5ndGg7ICsrcmkpIHtcbiAgICAgICAgICAgICAgICB2YXIgZiA9IHNlc3Npb24ucGFyc2UocmVjb3Jkc1tyaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2Vzc2lvbi5mbHVzaCgpO1xuICAgICAgICAgICAgY2FsbGJhY2sobnVsbCwgZmVhdHVyZXMsIDEwMDAwMDAwMDApO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn1cblxuXG5UYWJpeEZlYXR1cmVTb3VyY2UucHJvdG90eXBlLmdldFN0eWxlU2hlZXQgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgIGlmICh0aGlzLnBhcnNlciAmJiB0aGlzLnBhcnNlci5nZXRTdHlsZVNoZWV0KVxuICAgICAgICB0aGlzLnBhcnNlci5nZXRTdHlsZVNoZWV0KGNhbGxiYWNrKVxufVxuXG5UYWJpeEZlYXR1cmVTb3VyY2UucHJvdG90eXBlLmdldERlZmF1bHRGSVBzID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICBpZiAodGhpcy5wYXJzZXIgJiYgdGhpcy5wYXJzZXIuZ2V0RGVmYXVsdEZJUHMpXG4gICAgICAgIHRoaXMucGFyc2VyLmdldERlZmF1bHRGSVBzKGNhbGxiYWNrKTtcbn1cblxuXG5kYWxsaWFuY2VfcmVnaXN0ZXJTb3VyY2VBZGFwdGVyRmFjdG9yeSgndGFiaXgnLCBmdW5jdGlvbihzb3VyY2UpIHtcbiAgICByZXR1cm4ge2ZlYXR1cmVzOiBuZXcgVGFiaXhGZWF0dXJlU291cmNlKHNvdXJjZSl9O1xufSk7XG4iLCIvKiAtKi0gbW9kZTogamF2YXNjcmlwdDsgYy1iYXNpYy1vZmZzZXQ6IDQ7IGluZGVudC10YWJzLW1vZGU6IG5pbCAtKi0gKi9cblxuLy8gXG4vLyBEYWxsaWFuY2UgR2Vub21lIEV4cGxvcmVyXG4vLyAoYykgVGhvbWFzIERvd24gMjAwNi0yMDExXG4vL1xuLy8gdGFiaXguanM6IGJhc2ljIHN1cHBvcnQgZm9yIHRhYml4LWluZGV4ZWQgZmxhdGZpbGVzXG4vL1xuXG5cInVzZSBzdHJpY3RcIjtcblxudmFyIFRBQklYX01BR0lDID0gMHgwMTQ5NDI1NDtcblxuaWYgKHR5cGVvZihyZXF1aXJlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB2YXIgc3BhbnMgPSByZXF1aXJlKCcuL3NwYW5zJyk7XG4gICAgdmFyIFJhbmdlID0gc3BhbnMuUmFuZ2U7XG4gICAgdmFyIHVuaW9uID0gc3BhbnMudW5pb247XG4gICAgdmFyIGludGVyc2VjdGlvbiA9IHNwYW5zLmludGVyc2VjdGlvbjtcblxuICAgIHZhciBiaW4gPSByZXF1aXJlKCcuL2JpbicpO1xuICAgIHZhciByZWFkSW50ID0gYmluLnJlYWRJbnQ7XG4gICAgdmFyIHJlYWRTaG9ydCA9IGJpbi5yZWFkU2hvcnQ7XG4gICAgdmFyIHJlYWRCeXRlID0gYmluLnJlYWRCeXRlO1xuICAgIHZhciByZWFkSW50NjQgPSBiaW4ucmVhZEludDY0O1xuICAgIHZhciByZWFkRmxvYXQgPSBiaW4ucmVhZEZsb2F0O1xuXG4gICAgdmFyIGxoM3V0aWxzID0gcmVxdWlyZSgnLi9saDN1dGlscycpO1xuICAgIHZhciByZWFkVm9iID0gbGgzdXRpbHMucmVhZFZvYjtcbiAgICB2YXIgdW5iZ3pmID0gbGgzdXRpbHMudW5iZ3pmO1xuICAgIHZhciByZWcyYmlucyA9IGxoM3V0aWxzLnJlZzJiaW5zO1xuICAgIHZhciBDaHVuayA9IGxoM3V0aWxzLkNodW5rO1xufVxuXG5mdW5jdGlvbiBUYWJpeEZpbGUoKSB7XG59XG5cbmZ1bmN0aW9uIGNvbm5lY3RUYWJpeChkYXRhLCB0YmksIGNhbGxiYWNrKSB7XG4gICAgdmFyIHRhYml4ID0gbmV3IFRhYml4RmlsZSgpO1xuICAgIHRhYml4LmRhdGEgPSBkYXRhO1xuICAgIHRhYml4LnRiaSA9IHRiaTtcblxuICAgIHRhYml4LnRiaS5mZXRjaChmdW5jdGlvbihoZWFkZXIpIHsgICAvLyBEbyB3ZSByZWFsbHkgbmVlZCB0byBmZXRjaCB0aGUgd2hvbGUgdGhpbmc/IDotKFxuICAgICAgICBpZiAoIWhlYWRlcikge1xuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwsIFwiQ291bGRuJ3QgYWNjZXNzIFRhYml4XCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHVuY2hlYWQgPSB1bmJnemYoaGVhZGVyLCBoZWFkZXIuYnl0ZUxlbmd0aCk7XG4gICAgICAgIHZhciB1bmNiYSA9IG5ldyBVaW50OEFycmF5KHVuY2hlYWQpO1xuICAgICAgICB2YXIgbWFnaWMgPSByZWFkSW50KHVuY2JhLCAwKTtcbiAgICAgICAgaWYgKG1hZ2ljICE9IFRBQklYX01BR0lDKSB7XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCwgJ05vdCBhIHRhYml4IGluZGV4Jyk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgbnJlZiA9IHJlYWRJbnQodW5jYmEsIDQpO1xuICAgICAgICB0YWJpeC5mb3JtYXQgPSByZWFkSW50KHVuY2JhLCA4KTtcbiAgICAgICAgdGFiaXguY29sU2VxID0gcmVhZEludCh1bmNiYSwgMTIpO1xuICAgICAgICB0YWJpeC5jb2xTdGFydCA9IHJlYWRJbnQodW5jYmEsIDE2KTtcbiAgICAgICAgdGFiaXguY29sRW5kID0gcmVhZEludCh1bmNiYSwgMjApO1xuICAgICAgICB0YWJpeC5tZXRhID0gcmVhZEludCh1bmNiYSwgMjQpO1xuICAgICAgICB0YWJpeC5za2lwID0gcmVhZEludCh1bmNiYSwgMjgpO1xuICAgICAgICB2YXIgbmFtZUxlbmd0aCA9IHJlYWRJbnQodW5jYmEsIDMyKTtcblxuICAgICAgICB0YWJpeC5pbmRpY2VzID0gW107XG5cbiAgICAgICAgdmFyIHAgPSAzNjtcbiAgICAgICAgdGFiaXguY2hyVG9JbmRleCA9IHt9O1xuICAgICAgICB0YWJpeC5pbmRleFRvQ2hyID0gW107XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnJlZjsgKytpKSB7XG4gICAgICAgICAgICB2YXIgbmFtZSA9ICcnXG5cbiAgICAgICAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNoID0gdW5jYmFbcCsrXTtcbiAgICAgICAgICAgICAgICBpZiAoY2ggPT0gMClcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICBuYW1lICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoY2gpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0YWJpeC5jaHJUb0luZGV4W25hbWVdID0gaTtcbiAgICAgICAgICAgIGlmIChuYW1lLmluZGV4T2YoJ2NocicpID09IDApIHtcbiAgICAgICAgICAgICAgICB0YWJpeC5jaHJUb0luZGV4W25hbWUuc3Vic3RyaW5nKDMpXSA9IGk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRhYml4LmNoclRvSW5kZXhbJ2NocicgKyBuYW1lXSA9IGk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0YWJpeC5pbmRleFRvQ2hyLnB1c2gobmFtZSk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgbWluQmxvY2tJbmRleCA9IDEwMDAwMDAwMDA7XG4gICAgICAgIGZvciAodmFyIHJlZiA9IDA7IHJlZiA8IG5yZWY7ICsrcmVmKSB7XG4gICAgICAgICAgICB2YXIgYmxvY2tTdGFydCA9IHA7XG4gICAgICAgICAgICB2YXIgbmJpbiA9IHJlYWRJbnQodW5jYmEsIHApOyBwICs9IDQ7XG4gICAgICAgICAgICBmb3IgKHZhciBiID0gMDsgYiA8IG5iaW47ICsrYikge1xuICAgICAgICAgICAgICAgIHZhciBiaW4gPSByZWFkSW50KHVuY2JhLCBwKTtcbiAgICAgICAgICAgICAgICB2YXIgbmNobmsgPSByZWFkSW50KHVuY2JhLCBwKzQpO1xuICAgICAgICAgICAgICAgIHAgKz0gOCArIChuY2huayAqIDE2KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBuaW50diA9IHJlYWRJbnQodW5jYmEsIHApOyBwICs9IDQ7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZhciBxID0gcDtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbmludHY7ICsraSkge1xuICAgICAgICAgICAgICAgIHZhciB2ID0gcmVhZFZvYih1bmNiYSwgcSk7IHEgKz0gODtcbiAgICAgICAgICAgICAgICBpZiAodikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgYmkgPSB2LmJsb2NrO1xuICAgICAgICAgICAgICAgICAgICBpZiAodi5vZmZzZXQgPiAwKVxuICAgICAgICAgICAgICAgICAgICAgICAgYmkgKz0gNjU1MzY7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGJpIDwgbWluQmxvY2tJbmRleClcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbkJsb2NrSW5kZXggPSBiaTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcCArPSAobmludHYgKiA4KTtcblxuXG4gICAgICAgICAgICB2YXIgdWIgPSB1bmNiYTtcbiAgICAgICAgICAgIGlmIChuYmluID4gMCkge1xuICAgICAgICAgICAgICAgIHRhYml4LmluZGljZXNbcmVmXSA9IG5ldyBVaW50OEFycmF5KHVuY2hlYWQsIGJsb2NrU3RhcnQsIHAgLSBibG9ja1N0YXJ0KTtcbiAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgfVxuXG4gICAgICAgIHRhYml4LmhlYWRlck1heCA9IG1pbkJsb2NrSW5kZXg7XG5cbiAgICAgICAgY2FsbGJhY2sodGFiaXgpO1xuICAgIH0sIHt0aW1lb3V0OiA1MDAwMH0pO1xufVxuXG4vLyBDb3B5LXBhc3RlIGZyb20gQmFtRmlsZVxuXG5UYWJpeEZpbGUucHJvdG90eXBlLmJsb2Nrc0ZvclJhbmdlID0gZnVuY3Rpb24ocmVmSWQsIG1pbiwgbWF4KSB7XG4gICAgdmFyIGluZGV4ID0gdGhpcy5pbmRpY2VzW3JlZklkXTtcbiAgICBpZiAoIWluZGV4KSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICB2YXIgaW50Qmluc0wgPSByZWcyYmlucyhtaW4sIG1heCk7XG4gICAgdmFyIGludEJpbnMgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGludEJpbnNMLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIGludEJpbnNbaW50Qmluc0xbaV1dID0gdHJ1ZTtcbiAgICB9XG4gICAgdmFyIGxlYWZDaHVua3MgPSBbXSwgb3RoZXJDaHVua3MgPSBbXTtcblxuICAgIHZhciBuYmluID0gcmVhZEludChpbmRleCwgMCk7XG4gICAgdmFyIHAgPSA0O1xuICAgIGZvciAodmFyIGIgPSAwOyBiIDwgbmJpbjsgKytiKSB7XG4gICAgICAgIHZhciBiaW4gPSByZWFkSW50KGluZGV4LCBwKTtcbiAgICAgICAgdmFyIG5jaG5rID0gcmVhZEludChpbmRleCwgcCs0KTtcbiAgICAgICAgcCArPSA4O1xuICAgICAgICBpZiAoaW50Qmluc1tiaW5dKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBjID0gMDsgYyA8IG5jaG5rOyArK2MpIHtcbiAgICAgICAgICAgICAgICB2YXIgY3MgPSByZWFkVm9iKGluZGV4LCBwLCB0cnVlKTtcbiAgICAgICAgICAgICAgICB2YXIgY2UgPSByZWFkVm9iKGluZGV4LCBwICsgOCwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgKGJpbiA8IDQ2ODEgPyBvdGhlckNodW5rcyA6IGxlYWZDaHVua3MpLnB1c2gobmV3IENodW5rKGNzLCBjZSkpO1xuICAgICAgICAgICAgICAgIHAgKz0gMTY7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwICs9ICAobmNobmsgKiAxNik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgbmludHYgPSByZWFkSW50KGluZGV4LCBwKTtcbiAgICB2YXIgbG93ZXN0ID0gbnVsbDtcbiAgICB2YXIgbWluTGluID0gTWF0aC5taW4obWluPj4xNCwgbmludHYgLSAxKSwgbWF4TGluID0gTWF0aC5taW4obWF4Pj4xNCwgbmludHYgLSAxKTtcbiAgICBmb3IgKHZhciBpID0gbWluTGluOyBpIDw9IG1heExpbjsgKytpKSB7XG4gICAgICAgIHZhciBsYiA9ICByZWFkVm9iKGluZGV4LCBwICsgNCArIChpICogOCkpO1xuICAgICAgICBpZiAoIWxiKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWxvd2VzdCB8fCBsYi5ibG9jayA8IGxvd2VzdC5ibG9jayB8fCBsYi5vZmZzZXQgPCBsb3dlc3Qub2Zmc2V0KSB7XG4gICAgICAgICAgICBsb3dlc3QgPSBsYjtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICB2YXIgcHJ1bmVkT3RoZXJDaHVua3MgPSBbXTtcbiAgICBpZiAobG93ZXN0ICE9IG51bGwpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvdGhlckNodW5rcy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgdmFyIGNobmsgPSBvdGhlckNodW5rc1tpXTtcbiAgICAgICAgICAgIGlmIChjaG5rLm1heHYuYmxvY2sgPj0gbG93ZXN0LmJsb2NrICYmIGNobmsubWF4di5vZmZzZXQgPj0gbG93ZXN0Lm9mZnNldCkge1xuICAgICAgICAgICAgICAgIHBydW5lZE90aGVyQ2h1bmtzLnB1c2goY2huayk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9IFxuICAgIG90aGVyQ2h1bmtzID0gcHJ1bmVkT3RoZXJDaHVua3M7XG5cbiAgICB2YXIgaW50Q2h1bmtzID0gW107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvdGhlckNodW5rcy5sZW5ndGg7ICsraSkge1xuICAgICAgICBpbnRDaHVua3MucHVzaChvdGhlckNodW5rc1tpXSk7XG4gICAgfVxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVhZkNodW5rcy5sZW5ndGg7ICsraSkge1xuICAgICAgICBpbnRDaHVua3MucHVzaChsZWFmQ2h1bmtzW2ldKTtcbiAgICB9XG5cbiAgICBpbnRDaHVua3Muc29ydChmdW5jdGlvbihjMCwgYzEpIHtcbiAgICAgICAgdmFyIGRpZiA9IGMwLm1pbnYuYmxvY2sgLSBjMS5taW52LmJsb2NrO1xuICAgICAgICBpZiAoZGlmICE9IDApIHtcbiAgICAgICAgICAgIHJldHVybiBkaWY7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gYzAubWludi5vZmZzZXQgLSBjMS5taW52Lm9mZnNldDtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHZhciBtZXJnZWRDaHVua3MgPSBbXTtcbiAgICBpZiAoaW50Q2h1bmtzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgdmFyIGN1ciA9IGludENodW5rc1swXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBpbnRDaHVua3MubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIHZhciBuYyA9IGludENodW5rc1tpXTtcbiAgICAgICAgICAgIGlmIChuYy5taW52LmJsb2NrID09IGN1ci5tYXh2LmJsb2NrIC8qICYmIG5jLm1pbnYub2Zmc2V0ID09IGN1ci5tYXh2Lm9mZnNldCAqLykgeyAvLyBubyBwb2ludCBzcGxpdHRpbmcgbWlkLWJsb2NrXG4gICAgICAgICAgICAgICAgY3VyID0gbmV3IENodW5rKGN1ci5taW52LCBuYy5tYXh2KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbWVyZ2VkQ2h1bmtzLnB1c2goY3VyKTtcbiAgICAgICAgICAgICAgICBjdXIgPSBuYztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBtZXJnZWRDaHVua3MucHVzaChjdXIpO1xuICAgIH1cblxuICAgIHJldHVybiBtZXJnZWRDaHVua3M7XG59XG5cblRhYml4RmlsZS5wcm90b3R5cGUuZmV0Y2ggPSBmdW5jdGlvbihjaHIsIG1pbiwgbWF4LCBjYWxsYmFjaykge1xuICAgIHZhciB0aGlzQiA9IHRoaXM7XG5cbiAgICB2YXIgY2hySWQgPSB0aGlzLmNoclRvSW5kZXhbY2hyXTtcbiAgICBpZiAoY2hySWQgPT0gdW5kZWZpbmVkKVxuICAgICAgICByZXR1cm4gY2FsbGJhY2soW10pO1xuXG4gICAgdmFyIGNhbm9uaWNhbENociA9IHRoaXMuaW5kZXhUb0NocltjaHJJZF07XG5cbiAgICB2YXIgY2h1bmtzO1xuICAgIGlmIChjaHJJZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGNodW5rcyA9IFtdO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGNodW5rcyA9IHRoaXMuYmxvY2tzRm9yUmFuZ2UoY2hySWQsIG1pbiwgbWF4KTtcbiAgICAgICAgaWYgKCFjaHVua3MpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsICdFcnJvciBpbiBpbmRleCBmZXRjaCcpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdmFyIHJlY29yZHMgPSBbXTtcbiAgICB2YXIgaW5kZXggPSAwO1xuICAgIHZhciBkYXRhO1xuXG4gICAgZnVuY3Rpb24gdHJhbXAoKSB7XG4gICAgICAgIGlmIChpbmRleCA+PSBjaHVua3MubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2socmVjb3Jkcyk7XG4gICAgICAgIH0gZWxzZSBpZiAoIWRhdGEpIHtcbiAgICAgICAgICAgIHZhciBjID0gY2h1bmtzW2luZGV4XTtcbiAgICAgICAgICAgIHZhciBmZXRjaE1pbiA9IGMubWludi5ibG9jaztcbiAgICAgICAgICAgIHZhciBmZXRjaE1heCA9IGMubWF4di5ibG9jayArICgxPDwxNik7IC8vICpzaWdoKlxuICAgICAgICAgICAgdGhpc0IuZGF0YS5zbGljZShmZXRjaE1pbiwgZmV0Y2hNYXggLSBmZXRjaE1pbikuZmV0Y2goZnVuY3Rpb24ocikge1xuICAgICAgICAgICAgICAgIGRhdGEgPSB1bmJnemYociwgYy5tYXh2LmJsb2NrIC0gYy5taW52LmJsb2NrICsgMSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRyYW1wKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciBiYSA9IG5ldyBVaW50OEFycmF5KGRhdGEpO1xuICAgICAgICAgICAgdGhpc0IucmVhZFJlY29yZHMoYmEsIGNodW5rc1tpbmRleF0ubWludi5vZmZzZXQsIHJlY29yZHMsIG1pbiwgbWF4LCBjYW5vbmljYWxDaHIpO1xuICAgICAgICAgICAgZGF0YSA9IG51bGw7XG4gICAgICAgICAgICArK2luZGV4O1xuICAgICAgICAgICAgcmV0dXJuIHRyYW1wKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdHJhbXAoKTtcbn1cblxuVGFiaXhGaWxlLnByb3RvdHlwZS5yZWFkUmVjb3JkcyA9IGZ1bmN0aW9uKGJhLCBvZmZzZXQsIHNpbmssIG1pbiwgbWF4LCBjaHIpIHtcbiAgIExJTkVfTE9PUDpcbiAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICB2YXIgbGluZSA9ICcnO1xuICAgICAgICB3aGlsZSAob2Zmc2V0IDwgYmEubGVuZ3RoKSB7XG4gICAgICAgICAgICB2YXIgY2ggPSBiYVtvZmZzZXQrK107XG4gICAgICAgICAgICBpZiAoY2ggPT0gMTApIHtcbiAgICAgICAgICAgICAgICB2YXIgdG9rcyA9IGxpbmUuc3BsaXQoJ1xcdCcpO1xuXG4gICAgICAgICAgICAgICAgaWYgKHRva3NbdGhpcy5jb2xTZXEgLSAxXSA9PSBjaHIpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZtaW4gPSBwYXJzZUludCh0b2tzW3RoaXMuY29sU3RhcnQgLSAxXSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBmbWF4ID0gZm1pbjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY29sRW5kID4gMClcbiAgICAgICAgICAgICAgICAgICAgICAgIGZtYXggPSBwYXJzZUludCh0b2tzW3RoaXMuY29sRW5kIC0gMV0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5mb3JtYXQgJiAweDEwMDAwKSArK2ZtaW47XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGZtaW4gPD0gbWF4ICYmIGZtYXggPj0gbWluKVxuICAgICAgICAgICAgICAgICAgICAgICAgc2luay5wdXNoKGxpbmUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb250aW51ZSBMSU5FX0xPT1A7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGxpbmUgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShjaCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbn1cblxuVGFiaXhGaWxlLnByb3RvdHlwZS5mZXRjaEhlYWRlciA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBmZXRjaFB0ciA9IDAsIHB0ciA9IDAsIGxpbmU9Jyc7XG4gICAgdmFyIGxpbmVzID0gW107XG5cbiAgICBzZWxmLmRhdGEuc2xpY2UoMCwgc2VsZi5oZWFkZXJNYXgpLmZldGNoKGZ1bmN0aW9uKGNobmspIHtcbiAgICAgICAgaWYgKCFjaG5rKSB7XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCwgXCJGZXRjaCBmYWlsZWRcIik7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGJhID0gbmV3IFVpbnQ4QXJyYXkodW5iZ3pmKGNobmssIGNobmsuYnl0ZUxlbmd0aCkpO1xuICAgICAgICB2YXIgcHRyID0gMCwgbGluZSA9ICcnLCBsaW5lcyA9IFtdO1xuICAgICAgICB3aGlsZSAocHRyIDwgYmEubGVuZ3RoKSB7XG4gICAgICAgICAgICB2YXIgY2ggPSBiYVtwdHIrK11cbiAgICAgICAgICAgIGlmIChjaCA9PSAxMCkge1xuICAgICAgICAgICAgICAgIGlmIChsaW5lLmNoYXJDb2RlQXQoMCkgPT0gc2VsZi5tZXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIGxpbmVzLnB1c2gobGluZSk7XG4gICAgICAgICAgICAgICAgICAgIGxpbmUgPSAnJztcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobGluZXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbGluZSArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGNoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYWxsYmFjayhsaW5lcyk7XG4gICAgfSk7XG59XG5cbmlmICh0eXBlb2YobW9kdWxlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IHtcbiAgICAgICAgY29ubmVjdFRhYml4OiBjb25uZWN0VGFiaXgsXG4gICAgICAgIFRBQklYX01BR0lDOiBUQUJJWF9NQUdJQ1xuICAgIH07XG59XG4iLCIvKiBqc2hpbnQgZXN2ZXJzaW9uOiA2ICovXG5cbi8qXG4gU291cmNlIHRoYXQgY2FuIGJlIGNvbmZpZ3VyZWQgdG8gcHJvZHVjZSBhbnkgdHlwZSBvZiBmZWF0dXJlLFxuIHVzZWZ1bCBmb3IgdGVzdGluZyByZW5kZXJlcnMuXG4gKi9cblxuaW1wb3J0IHsgcmVnaXN0ZXJTb3VyY2VBZGFwdGVyRmFjdG9yeSxcbiAgICAgICAgIEZlYXR1cmVTb3VyY2VCYXNlXG4gICAgICAgfSBmcm9tIFwiLi9zb3VyY2VhZGFwdGVycy5qc1wiO1xuXG5pbXBvcnQgeyBEQVNGZWF0dXJlXG4gICAgICAgfSBmcm9tIFwiLi9kYXMuanNcIjtcblxuaW1wb3J0ICogYXMgUiBmcm9tIFwicmFtZGFcIjtcblxuXG5jbGFzcyBUZXN0U291cmNlIGV4dGVuZHMgRmVhdHVyZVNvdXJjZUJhc2Uge1xuICAgIGNvbnN0cnVjdG9yKHNvdXJjZSkge1xuICAgICAgICBzdXBlcigpO1xuXG4gICAgICAgIHRoaXMuZmVhdHVyZXMgPSBSLmRlZmF1bHRUbyhbXSwgc291cmNlLmZlYXR1cmVzKTtcbiAgICB9XG5cbiAgICBnZW5GZWF0dXJlKGNvbmYpIHtcbiAgICAgICAgbGV0IGZlYXR1cmUgPSBuZXcgREFTRmVhdHVyZSgpO1xuXG4gICAgICAgIGZvciAobGV0IGtleSBpbiBjb25mKSB7XG4gICAgICAgICAgICBmZWF0dXJlW2tleV0gPSBjb25mW2tleV07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmZXRjaChjaHIsIG1pbiwgbWF4LCBzY2FsZSwgdHlwZXMsIHBvb2wsIGNhbGxiYWNrKSB7XG4gICAgICAgIGxldCBmZWF0dXJlcyA9IFIuZm9yRWFjaCh0aGlzLmdlbkZlYXR1cmUsIHRoaXMuZmVhdHVyZXMpO1xuICAgICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCwgZmVhdHVyZXMsIDEpO1xuICAgIH1cbn1cblxuXG5yZWdpc3RlclNvdXJjZUFkYXB0ZXJGYWN0b3J5KCd0ZXN0LXNvdXJjZScsIHNvdXJjZSA9PiB7XG4gICAgcmV0dXJuIHsgZmVhdHVyZXM6IG5ldyBUZXN0U291cmNlKHNvdXJjZSkgfTtcbn0pO1xuIiwiLyogLSotIG1vZGU6IGphdmFzY3JpcHQ7IGMtYmFzaWMtb2Zmc2V0OiA0OyBpbmRlbnQtdGFicy1tb2RlOiBuaWwgLSotICovXG5cbi8vIFxuLy8gRGFsbGlhbmNlIEdlbm9tZSBFeHBsb3JlclxuLy8gKGMpIFRob21hcyBEb3duIDIwMDYtMjAxM1xuLy9cbi8vIHRodWIuanM6IHN1cHBvcnQgZm9yIHRyYWNrLWh1YiBzdHlsZSByZWdpc3RyaWVzXG4vL1xuXG5cInVzZSBzdHJpY3RcIjtcblxuaWYgKHR5cGVvZihyZXF1aXJlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB2YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XG4gICAgdmFyIHRleHRYSFIgPSB1dGlscy50ZXh0WEhSO1xuICAgIHZhciByZWxhdGl2ZVVSTCA9IHV0aWxzLnJlbGF0aXZlVVJMO1xuICAgIHZhciBzaGFsbG93Q29weSA9IHV0aWxzLnNoYWxsb3dDb3B5O1xuXG4gICAgdmFyIGRhcyA9IHJlcXVpcmUoJy4vZGFzJyk7XG4gICAgdmFyIERBU1N0eWxlc2hlZXQgPSBkYXMuREFTU3R5bGVzaGVldDtcbiAgICB2YXIgREFTU3R5bGUgPSBkYXMuREFTU3R5bGU7XG59XG5cbnZhciBUSFVCX1NUQU5aQV9SRUdFWFAgPSAvXFxuXFxzKlxcbi87XG52YXIgVEhVQl9QQVJTRV9SRUdFWFAgID0gLyhcXHcrKSArKC4rKVxcbj8vO1xudmFyIFRIVUJfU1VCR1JPVVBfUkVHRVhQID0gL3N1Ykdyb3VwWzEtOV0vO1xuXG52YXIgVEhVQl9QRU5OQU5UX1BSRUZJWCA9ICdodHRwOi8vZ2Vub21lLnVjc2MuZWR1L2ltYWdlcy8nO1xuXG5mdW5jdGlvbiBUcmFja0h1Yih1cmwpIHtcbiAgICB0aGlzLmdlbm9tZXMgPSB7fTtcbiAgICB0aGlzLnVybCA9IHVybDtcbn1cblxuZnVuY3Rpb24gVHJhY2tIdWJUcmFjaygpIHtcbn1cblxuVHJhY2tIdWJUcmFjay5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24oaykge1xuICAgIGlmICh0aGlzW2tdKVxuICAgICAgICByZXR1cm4gdGhpc1trXTtcbiAgICBlbHNlIGlmICh0aGlzLl9wYXJlbnQpIFxuICAgICAgICByZXR1cm4gdGhpcy5fcGFyZW50LmdldChrKTtcbn1cblxuZnVuY3Rpb24gVHJhY2tIdWJEQihodWIpIHtcbiAgICB0aGlzLmh1YiA9IGh1Yjtcbn1cblxuVHJhY2tIdWJEQi5wcm90b3R5cGUuZ2V0VHJhY2tzID0gZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICB2YXIgdGhpc0IgPSB0aGlzO1xuICAgIGlmICh0aGlzLl90cmFja3MpIHtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKHRoaXMuX3RyYWNrcyk7XG4gICAgfSBcbiAgICBcbiAgICB0ZXh0WEhSKHRoaXMuYWJzVVJMLCBmdW5jdGlvbih0cmFja0ZpbGUsIGVycikge1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCwgZXJyKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gdHJhY2tGaWxlID0gdHJhY2tGaWxlLnJlcGxhY2UoL1xcIy4qL2csICcnKTtcbiAgICAgICAgdHJhY2tGaWxlID0gdHJhY2tGaWxlLnJlcGxhY2UoJ1xcXFxcXG4nLCAnICcpO1xuXG4gICAgICAgIHZhciB0cmFja3MgPSBbXTtcbiAgICAgICAgdmFyIHRyYWNrc0J5SWQgPSB7fTtcbiAgICAgICAgdmFyIHN0YW56YXMgPSB0cmFja0ZpbGUuc3BsaXQoVEhVQl9TVEFOWkFfUkVHRVhQKTtcbiAgICAgICAgZm9yICh2YXIgcyA9IDA7IHMgPCBzdGFuemFzLmxlbmd0aDsgKytzKSB7XG4gICAgICAgICAgICB2YXIgdG9rcyA9IHN0YW56YXNbc10ucmVwbGFjZSgvXFwjLiovZywgJycpLnNwbGl0KFRIVUJfUEFSU0VfUkVHRVhQKTtcbiAgICAgICAgICAgIHZhciB0cmFjayA9IG5ldyBUcmFja0h1YlRyYWNrKCk7XG4gICAgICAgICAgICB0cmFjay5fZGIgPSB0aGlzQjtcbiAgICAgICAgICAgIGZvciAodmFyIGwgPSAwOyBsIDwgdG9rcy5sZW5ndGggLSAyOyBsICs9IDMpIHtcbiAgICAgICAgICAgICAgICB2YXIgayA9IHRva3NbbCsxXSwgdiA9IHRva3NbbCsyXTtcbiAgICAgICAgICAgICAgICBpZiAoay5tYXRjaChUSFVCX1NVQkdST1VQX1JFR0VYUCkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0cmFjay5zdWJncm91cHMpXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFjay5zdWJncm91cHMgPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNndG9rcyA9IHYuc3BsaXQoL1xccy8pO1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2d0YWcgPSBzZ3Rva3NbMF07XG4gICAgICAgICAgICAgICAgICAgIHZhciBzZ3JlY29yZCA9IHtuYW1lOiBzZ3Rva3NbMV0sIHRhZ3M6IFtdLCB0aXRsZXM6IFtdfTtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgc2d0aSA9IDI7IHNndGkgPCBzZ3Rva3MubGVuZ3RoOyArK3NndGkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBncnAgPSBzZ3Rva3Nbc2d0aV0uc3BsaXQoLz0vKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNncmVjb3JkLnRhZ3MucHVzaChncnBbMF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2dyZWNvcmQudGl0bGVzLnB1c2goZ3JwWzFdKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0cmFjay5zdWJncm91cHNbc2d0YWddID0gc2dyZWNvcmQ7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChrID09PSAnc3ViR3JvdXBzJykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2d0b2tzID0gdi5zcGxpdCgvKFxcdyspPShcXHcrKS8pO1xuICAgICAgICAgICAgICAgICAgICB0cmFjay5zZ20gPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgc2d0aSA9IDA7IHNndGkgPCBzZ3Rva3MubGVuZ3RoIC0gMjsgc2d0aSArPSAzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFjay5zZ21bc2d0b2tzW3NndGkrMV1dID0gc2d0b2tzW3NndGkgKyAyXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRyYWNrW3Rva3NbbCsxXV0gPSB0b2tzW2wrMl07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodHJhY2sudHJhY2sgJiYgKHRyYWNrLnR5cGUgfHwgdHJhY2suY29udGFpbmVyIHx8IHRyYWNrLnZpZXcgfHwgdHJhY2suYmlnRGF0YVVybCkpIHtcbiAgICAgICAgICAgICAgICB0cmFja3MucHVzaCh0cmFjayk7XG4gICAgICAgICAgICAgICAgdHJhY2tzQnlJZFt0cmFjay50cmFja10gPSB0cmFjaztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ3NraXBwaW5nICcsIHRyYWNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdmFyIHRvcGxldmVscyA9IFtdO1xuICAgICAgICB2YXIgY29tcG9zaXRlcyA9IFtdO1xuICAgICAgICBmb3IgKHZhciB0aSA9IDA7IHRpIDwgdHJhY2tzLmxlbmd0aDsgKyt0aSkge1xuICAgICAgICAgICAgdmFyIHRyYWNrID0gdHJhY2tzW3RpXTtcbiAgICAgICAgICAgIHZhciB0b3AgPSB0cnVlO1xuICAgICAgICAgICAgaWYgKHRyYWNrLnBhcmVudCkge1xuICAgICAgICAgICAgICAgIHZhciBwdG9rcyA9IHRyYWNrLnBhcmVudC5zcGxpdCgvXFxzKy8pO1xuICAgICAgICAgICAgICAgIHZhciBwYXJlbnQgPSB0cmFja3NCeUlkW3B0b2tzWzBdXTtcbiAgICAgICAgICAgICAgICBpZiAocGFyZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHRyYWNrLl9wYXJlbnQgPSBwYXJlbnQ7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFwYXJlbnQuY2hpbGRyZW4pXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnQuY2hpbGRyZW4gPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50LmNoaWxkcmVuLnB1c2godHJhY2spO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXJlbnQpXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3AgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkNvdWxkbid0IGZpbmQgcGFyZW50IFwiICsgcHRva3NbMF0gKyAnKCcgKyB0cmFjay5wYXJlbnQgKyAnKScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRyYWNrLmNvbXBvc2l0ZVRyYWNrKSB7XG4gICAgICAgICAgICAgICAgY29tcG9zaXRlcy5wdXNoKHRyYWNrKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodG9wKSB7XG4gICAgICAgICAgICAgICAgdG9wbGV2ZWxzLnB1c2godHJhY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZm9yICh2YXIgY2kgPSAwOyBjaSA8IGNvbXBvc2l0ZXMubGVuZ3RoOyArK2NpKSB7XG4gICAgICAgICAgICB2YXIgY29tcCA9IGNvbXBvc2l0ZXNbY2ldO1xuICAgICAgICAgICAgaWYgKCFjb21wLmNoaWxkcmVuKVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuXG4gICAgICAgICAgICB2YXIgcGFyZW50T2ZWaWV3cyA9IGZhbHNlO1xuICAgICAgICAgICAgZm9yICh2YXIga2kgPSAwOyBraSA8IGNvbXAuY2hpbGRyZW4ubGVuZ3RoOyArK2tpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGsgPSBjb21wLmNoaWxkcmVuW2tpXTtcbiAgICAgICAgICAgICAgICBpZiAoay52aWV3KSB7XG4gICAgICAgICAgICAgICAgICAgIGsuc2hvcnRMYWJlbCA9IGNvbXAuc2hvcnRMYWJlbCArIFwiOiBcIiArIGsuc2hvcnRMYWJlbDtcbiAgICAgICAgICAgICAgICAgICAgdG9wbGV2ZWxzLnB1c2goayk7XG4gICAgICAgICAgICAgICAgICAgIHBhcmVudE9mVmlld3MgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghcGFyZW50T2ZWaWV3cylcbiAgICAgICAgICAgICAgICB0b3BsZXZlbHMucHVzaChjb21wKTtcbiAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgIHRoaXNCLl90cmFja3MgPSB0b3BsZXZlbHM7XG4gICAgICAgIHJldHVybiBjYWxsYmFjayh0aGlzQi5fdHJhY2tzLCBudWxsKTtcbiAgICB9LCB7Y3JlZGVudGlhbHM6IHRoaXMuY3JlZGVudGlhbHMsIHNhbHQ6IHRydWV9KTtcbn1cblxuZnVuY3Rpb24gY29ubmVjdFRyYWNrSHViKGh1YlVSTCwgY2FsbGJhY2ssIG9wdHMpIHtcbiAgICBvcHRzID0gb3B0cyB8fCB7fTtcbiAgICBvcHRzLnNhbHQgPSB0cnVlO1xuXG4gICAgdGV4dFhIUihodWJVUkwsIGZ1bmN0aW9uKGh1YkZpbGUsIGVycikge1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCwgZXJyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciB0b2tzID0gaHViRmlsZS5zcGxpdChUSFVCX1BBUlNFX1JFR0VYUCk7XG4gICAgICAgIHZhciBodWIgPSBuZXcgVHJhY2tIdWIoaHViVVJMKTtcbiAgICAgICAgaWYgKG9wdHMuY3JlZGVudGlhbHMpIHtcbiAgICAgICAgICAgIGh1Yi5jcmVkZW50aWFscyA9IG9wdHMuY3JlZGVudGlhbHM7XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgbCA9IDA7IGwgPCB0b2tzLmxlbmd0aCAtIDI7IGwgKz0gMykge1xuICAgICAgICAgICAgaHViW3Rva3NbbCsxXV0gPSB0b2tzW2wrMl07XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIFxuICAgICAgICBpZiAoaHViLmdlbm9tZXNGaWxlKSB7XG4gICAgICAgICAgICB2YXIgZ2VuVVJMID0gcmVsYXRpdmVVUkwoaHViVVJMLCBodWIuZ2Vub21lc0ZpbGUpO1xuICAgICAgICAgICAgdGV4dFhIUihnZW5VUkwsIGZ1bmN0aW9uKGdlbkZpbGUsIGVycikge1xuICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwsIGVycik7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIHN0YW56YXMgPSBnZW5GaWxlLnNwbGl0KFRIVUJfU1RBTlpBX1JFR0VYUCk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgcyA9IDA7IHMgPCBzdGFuemFzLmxlbmd0aDsgKytzKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0b2tzID0gc3Rhbnphc1tzXS5zcGxpdChUSFVCX1BBUlNFX1JFR0VYUCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBncHJvcHMgPSBuZXcgVHJhY2tIdWJEQihodWIpO1xuICAgICAgICAgICAgICAgICAgICBpZiAob3B0cy5jcmVkZW50aWFscykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZ3Byb3BzLmNyZWRlbnRpYWxzID0gb3B0cy5jcmVkZW50aWFscztcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGwgPSAwOyBsIDwgdG9rcy5sZW5ndGggLSAyOyBsICs9IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdwcm9wc1t0b2tzW2wrMV1dID0gdG9rc1tsKzJdO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGdwcm9wcy50d29CaXRQYXRoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBncHJvcHMudHdvQml0UGF0aCA9IHJlbGF0aXZlVVJMKGdlblVSTCwgZ3Byb3BzLnR3b0JpdFBhdGgpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGdwcm9wcy5nZW5vbWUgJiYgZ3Byb3BzLnRyYWNrRGIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdwcm9wcy5hYnNVUkwgPSByZWxhdGl2ZVVSTChnZW5VUkwsIGdwcm9wcy50cmFja0RiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGh1Yi5nZW5vbWVzW2dwcm9wcy5nZW5vbWVdID0gZ3Byb3BzO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY2FsbGJhY2soaHViKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfSwgb3B0cyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCAnTm8gZ2Vub21lc0ZpbGUnKTtcbiAgICAgICAgfVxuICAgIH0sIG9wdHMpO1xufVxuXG5cblRyYWNrSHViVHJhY2sucHJvdG90eXBlLnRvRGFsbGlhbmNlU291cmNlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHNvdXJjZSA9IHtcbiAgICAgICAgbmFtZTogdGhpcy5zaG9ydExhYmVsLFxuICAgICAgICBkZXNjOiB0aGlzLmxvbmdMYWJlbFxuICAgIH07XG4gICAgaWYgKHRoaXMuX2RiLm1hcHBpbmcpIHtcbiAgICAgICAgc291cmNlLm1hcHBpbmcgPSB0aGlzLl9kYi5tYXBwaW5nO1xuICAgIH1cblxuICAgIHZhciBwZW5uYW50SWNvbiA9IHRoaXMuZ2V0KCdwZW5uYW50SWNvbicpO1xuICAgIGlmIChwZW5uYW50SWNvbikge1xuICAgICAgICB2YXIgcHRva3MgPSBwZW5uYW50SWNvbi5zcGxpdCgvXFxzKy8pO1xuICAgICAgICBzb3VyY2UucGVubmFudCA9IFRIVUJfUEVOTkFOVF9QUkVGSVggKyBwdG9rc1swXTtcbiAgICB9XG5cbiAgICB2YXIgc2VhcmNoVHJpeCA9IHRoaXMuZ2V0KCdzZWFyY2hUcml4Jyk7XG4gICAgaWYgKHNlYXJjaFRyaXgpIHtcbiAgICAgICAgc291cmNlLnRyaXhVUkkgPSByZWxhdGl2ZVVSTCh0aGlzLl9kYi5hYnNVUkwsIHNlYXJjaFRyaXgpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmNvbnRhaW5lciA9PSAnbXVsdGlXaWcnKSB7XG4gICAgICAgIHNvdXJjZS5tZXJnZSA9ICdjb25jYXQnO1xuICAgICAgICBzb3VyY2Uub3ZlcmxheSA9IFtdO1xuICAgICAgICB2YXIgY2hpbGRyZW4gPSB0aGlzLmNoaWxkcmVuIHx8IFtdO1xuICAgICAgICBzb3VyY2Uuc3R5bGUgPSBbXTtcbiAgICAgICAgc291cmNlLm5vRG93bnNhbXBsZSA9IHRydWU7XG5cbiAgICAgICAgZm9yICh2YXIgY2kgPSAwOyBjaSA8IGNoaWxkcmVuLmxlbmd0aDsgKytjaSkge1xuICAgICAgICAgICAgdmFyIGNoID0gY2hpbGRyZW5bY2ldO1xuICAgICAgICAgICAgdmFyIGNzID0gY2gudG9EYWxsaWFuY2VTb3VyY2UoKVxuICAgICAgICAgICAgc291cmNlLm92ZXJsYXkucHVzaChjcyk7XG5cbiAgICAgICAgICAgIGlmIChjcy5zdHlsZSkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIHNpID0gMDsgc2kgPCBjcy5zdHlsZS5sZW5ndGg7ICsrc2kpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN0eWxlID0gY3Muc3R5bGVbc2ldO1xuICAgICAgICAgICAgICAgICAgICBzdHlsZS5tZXRob2QgPSBjaC5zaG9ydExhYmVsOyAgLy8gRklYTUVcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYWdncmVnYXRlID09ICd0cmFuc3BhcmVudE92ZXJsYXknKVxuICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGUuc3R5bGUuQUxQSEEgPSAwLjU7XG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZS5zdHlsZS5wdXNoKHN0eWxlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNvdXJjZTsgICAgICAgXG4gICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHR5cGUgPSB0aGlzLnR5cGU7XG4gICAgICAgIGlmICghdHlwZSkge1xuICAgICAgICAgICAgdmFyIHAgPSB0aGlzO1xuICAgICAgICAgICAgd2hpbGUgKHAuX3BhcmVudCAmJiAhcC50eXBlKSB7XG4gICAgICAgICAgICAgICAgcCA9IHAuX3BhcmVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHR5cGUgPSBwLnR5cGU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0eXBlKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB2YXIgdHlwZVRva3MgPSB0eXBlLnNwbGl0KC9cXHMrLyk7XG4gICAgICAgIGlmICh0eXBlVG9rc1swXSA9PSAnYmlnQmVkJyAmJiB0aGlzLmJpZ0RhdGFVcmwpIHtcbiAgICAgICAgICAgIHZhciBiZWRUb2tlbnMgPSB0eXBlVG9rc1sxXXwwXG4gICAgICAgICAgICB2YXIgYmVkUGx1cyA9IHR5cGVUb2tzWzJdID09ICcrJztcblxuICAgICAgICAgICAgc291cmNlLmJ3Z1VSSSA9IHJlbGF0aXZlVVJMKHRoaXMuX2RiLmFic1VSTCwgdGhpcy5iaWdEYXRhVXJsKTtcbiAgICAgICAgICAgIHNvdXJjZS5zdHlsZSA9IHRoaXMuYmlnYmVkU3R5bGVzKCk7XG4gICAgICAgICAgICBpZiAodGhpcy5fZGIuY3JlZGVudGlhbHMpIHtcbiAgICAgICAgICAgICAgICBzb3VyY2UuY3JlZGVudGlhbHMgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGJlZFRva2VucyA+PSAxMiAmJiBiZWRQbHVzKVxuICAgICAgICAgICAgICAgIHNvdXJjZS5jb2xsYXBzZVN1cGVyR3JvdXBzID0gdHJ1ZTtcbiAgICAgICAgICAgIHJldHVybiBzb3VyY2U7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZVRva3NbMF0gPT0gJ2JpZ1dpZycgJiYgdGhpcy5iaWdEYXRhVXJsKSB7XG4gICAgICAgICAgICBzb3VyY2UuYndnVVJJID0gcmVsYXRpdmVVUkwodGhpcy5fZGIuYWJzVVJMLCB0aGlzLmJpZ0RhdGFVcmwpO1xuICAgICAgICAgICAgc291cmNlLnN0eWxlID0gdGhpcy5iaWd3aWdTdHlsZXMoKTtcbiAgICAgICAgICAgIHNvdXJjZS5ub0Rvd25zYW1wbGUgPSB0cnVlOyAgICAgLy8gRklYTUUgc2VlbXMgbGlrZSBhIGJsdW50IGluc3RydW1lbnQuLi5cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKHRoaXMueUxpbmVPbk9mZiAmJiB0aGlzLnlMaW5lT25PZmYgPT0gJ29uJykge1xuICAgICAgICAgICAgICAgIHNvdXJjZS5xdWFudExlYXBUaHJlc2hvbGQgPSB0aGlzLnlMaW5lTWFyayAhPT0gdW5kZWZpbmVkID8gKDEuMCAqIHRoaXMueUxpbmVNYXJrKSA6IDAuMDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHRoaXMuX2RiLmNyZWRlbnRpYWxzKSB7XG4gICAgICAgICAgICAgICAgc291cmNlLmNyZWRlbnRpYWxzID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHNvdXJjZTtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlVG9rc1swXSA9PSAnYmFtJyAgJiYgdGhpcy5iaWdEYXRhVXJsKSB7XG4gICAgICAgICAgICBzb3VyY2UuYmFtVVJJID0gcmVsYXRpdmVVUkwodGhpcy5fZGIuYWJzVVJMLCB0aGlzLmJpZ0RhdGFVcmwpO1xuICAgICAgICAgICAgaWYgKHRoaXMuX2RiLmNyZWRlbnRpYWxzKSB7XG4gICAgICAgICAgICAgICAgc291cmNlLmNyZWRlbnRpYWxzID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzb3VyY2U7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZVRva3NbMF0gPT0gJ3ZjZlRhYml4JyAmJiB0aGlzLmJpZ0RhdGFVcmwpIHtcbiAgICAgICAgICAgIHNvdXJjZS51cmkgPSByZWxhdGl2ZVVSTCh0aGlzLl9kYi5hYnNVUkwsIHRoaXMuYmlnRGF0YVVybCk7XG4gICAgICAgICAgICBzb3VyY2UudGllcl90eXBlID0gJ3RhYml4JztcbiAgICAgICAgICAgIHNvdXJjZS5wYXlsb2FkID0gJ3ZjZic7XG4gICAgICAgICAgICBpZiAodGhpcy5fZGIuY3JlZGVudGlhbHMpIHtcbiAgICAgICAgICAgICAgICBzb3VyY2UuY3JlZGVudGlhbHMgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHNvdXJjZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdVbnN1cHBvcnRlZCAnICsgdGhpcy50eXBlKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuVHJhY2tIdWJUcmFjay5wcm90b3R5cGUuYmlnd2lnU3R5bGVzID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHR5cGUgPSB0aGlzLnR5cGU7XG4gICAgaWYgKCF0eXBlKSB7XG4gICAgICAgIHZhciBwID0gdGhpcztcbiAgICAgICAgd2hpbGUgKHAuX3BhcmVudCAmJiAhcC50eXBlKSB7XG4gICAgICAgICAgICBwID0gcC5fcGFyZW50O1xuICAgICAgICB9XG4gICAgICAgIHR5cGUgPSBwLnR5cGU7XG4gICAgfVxuICAgIGlmICghdHlwZSlcbiAgICAgICAgcmV0dXJuO1xuICAgIHZhciB0eXBlVG9rcyA9IHR5cGUuc3BsaXQoL1xccysvKTtcblxuICAgIHZhciBtaW4sIG1heDtcbiAgICBpZiAodHlwZVRva3MubGVuZ3RoID49IDMpIHtcbiAgICAgICAgbWluID0gMS4wICogdHlwZVRva3NbMV07XG4gICAgICAgIG1heCA9IDEuMCAqIHR5cGVUb2tzWzJdO1xuICAgIH1cblxuICAgIHZhciBoZWlnaHQ7XG4gICAgaWYgKHRoaXMubWF4SGVpZ2h0UGl4ZWxzKSB7XG4gICAgICAgIHZhciBtaHBUb2tzID0gdGhpcy5tYXhIZWlnaHRQaXhlbHMuc3BsaXQoLzovKTtcbiAgICAgICAgaWYgKG1ocFRva3MubGVuZ3RoID09IDMpIHtcbiAgICAgICAgICAgIGhlaWdodCA9IG1ocFRva3NbMV0gfCAwO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ21heEhlaWdodFBpeGVscyBzaG91bGQgYmUgb2YgdGhlIGZvcm0gbWF4OmRlZmF1bHQ6bWluJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgdmFyIGd0eXBlID0gJ2JhcnMnO1xuICAgIGlmICh0aGlzLmdyYXBoVHlwZURlZmF1bHQpIHtcbiAgICAgICAgZ3R5cGUgPSB0aGlzLmdyYXBoVHlwZURlZmF1bHQ7XG4gICAgfVxuICAgIFxuICAgIHZhciBjb2xvciA9ICdibGFjayc7XG4gICAgdmFyIGFsdENvbG9yID0gbnVsbDtcbiAgICBpZiAodGhpcy5jb2xvcikge1xuICAgICAgICBjb2xvciA9ICdyZ2IoJyArIHRoaXMuY29sb3IgKyAnKSc7XG4gICAgfVxuICAgIGlmICh0aGlzLmFsdENvbG9yKSB7XG4gICAgICAgIGFsdENvbG9yID0gJ3JnYignICsgdGhpcy5hbHRDb2xvciArICcpJztcbiAgICB9XG4gICAgXG4gICAgdmFyIHN0eWxlc2hlZXQgPSBuZXcgREFTU3R5bGVzaGVldCgpO1xuICAgIHZhciB3aWdTdHlsZSA9IG5ldyBEQVNTdHlsZSgpO1xuICAgIGlmIChndHlwZSA9PSAncG9pbnRzJykge1xuICAgICAgICB3aWdTdHlsZS5nbHlwaCA9ICdQT0lOVCc7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgd2lnU3R5bGUuZ2x5cGggPSAnSElTVE9HUkFNJztcbiAgICB9XG5cbiAgICBpZiAoYWx0Q29sb3IpIHtcbiAgICAgICAgd2lnU3R5bGUuQ09MT1IxID0gY29sb3I7XG4gICAgICAgIHdpZ1N0eWxlLkNPTE9SMiA9IGFsdENvbG9yO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHdpZ1N0eWxlLkJHQ09MT1IgPSBjb2xvcjtcbiAgICB9XG4gICAgd2lnU3R5bGUuSEVJR0hUID0gaGVpZ2h0IHx8IDMwO1xuICAgIGlmIChtaW4gfHwgbWF4KSB7XG4gICAgICAgIHdpZ1N0eWxlLk1JTiA9IG1pbjtcbiAgICAgICAgd2lnU3R5bGUuTUFYID0gbWF4O1xuICAgIH1cbiAgICBzdHlsZXNoZWV0LnB1c2hTdHlsZSh7dHlwZTogJ2RlZmF1bHQnfSwgbnVsbCwgd2lnU3R5bGUpO1xuICAgIHJldHVybiBzdHlsZXNoZWV0LnN0eWxlcztcbn1cblxuVHJhY2tIdWJUcmFjay5wcm90b3R5cGUuYmlnYmVkU3R5bGVzID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGl0ZW1SZ2IgPSAoJycrdGhpcy5nZXQoJ2l0ZW1SZ2InKSkudG9Mb3dlckNhc2UoKSA9PSAnb24nO1xuICAgIHZhciB2aXNpYmlsaXR5ID0gdGhpcy5nZXQoJ3Zpc2liaWxpdHknKSB8fCAnZnVsbCc7XG4gICAgdmFyIGNvbG9yID0gdGhpcy5nZXQoJ2NvbG9yJyk7XG4gICAgaWYgKGNvbG9yKVxuICAgICAgICBjb2xvciA9ICdyZ2IoJyArIGNvbG9yICsgJyknO1xuICAgIGVsc2UgXG4gICAgICAgIGNvbG9yID0gJ2JsdWUnO1xuICAgIFxuICAgIHZhciBzdHlsZXNoZWV0ID0gbmV3IERBU1N0eWxlc2hlZXQoKTtcbiAgICB2YXIgd2lnU3R5bGUgPSBuZXcgREFTU3R5bGUoKTtcbiAgICB3aWdTdHlsZS5nbHlwaCA9ICdCT1gnO1xuICAgIHdpZ1N0eWxlLkZHQ09MT1IgPSAnYmxhY2snO1xuICAgIHdpZ1N0eWxlLkJHQ09MT1IgPSBjb2xvcjtcbiAgICB3aWdTdHlsZS5IRUlHSFQgPSAodmlzaWJpbGl0eSA9PSAnZnVsbCcgfHwgdmlzaWJpbGl0eSA9PSAncGFjaycpID8gMTIgOiA4O1xuICAgIHdpZ1N0eWxlLkJVTVAgPSAodmlzaWJpbGl0eSA9PSAnZnVsbCcgfHwgdmlzaWJpbGl0eSA9PSAncGFjaycpO1xuICAgIHdpZ1N0eWxlLkxBQkVMID0gKHZpc2liaWxpdHkgPT0gJ2Z1bGwnIHx8IHZpc2liaWxpdHkgPT0gJ3BhY2snKTtcbiAgICB3aWdTdHlsZS5aSU5ERVggPSAyMDtcbiAgICBpZiAoaXRlbVJnYilcbiAgICAgICAgd2lnU3R5bGUuQkdJVEVNID0gdHJ1ZTtcblxuICAgIHZhciBjYnMgPSB0aGlzLmdldCgnY29sb3JCeVN0cmFuZCcpO1xuICAgIGlmIChjYnMpIHtcbiAgICAgICAgdmFyIGNic1Rva3MgPSBjYnMuc3BsaXQoL1xccysvKTtcbiAgICAgICAgXG4gICAgICAgIHZhciBwbHVzID0gc2hhbGxvd0NvcHkod2lnU3R5bGUpO1xuICAgICAgICBwbHVzLkJHQ09MT1IgPSAncmdiKCcgKyBjYnNUb2tzWzBdICsgJyknO1xuICAgICAgICBzdHlsZXNoZWV0LnB1c2hTdHlsZSh7dHlwZTogJ2JpZ2JlZCcsIG9yaWVudGF0aW9uOiAnKyd9LCBudWxsLCBwbHVzKTtcblxuICAgICAgICB2YXIgbWludXMgPSBzaGFsbG93Q29weSh3aWdTdHlsZSk7XG4gICAgICAgIG1pbnVzLkJHQ09MT1IgPSAncmdiKCcgKyBjYnNUb2tzWzFdICsgJyknO1xuICAgICAgICBzdHlsZXNoZWV0LnB1c2hTdHlsZSh7dHlwZTogJ2JpZ2JlZCcsIG9yaWVudGF0aW9uOiAnLSd9LCBudWxsLCBtaW51cyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgc3R5bGVzaGVldC5wdXNoU3R5bGUoe3R5cGU6ICdiaWdiZWQnfSwgbnVsbCwgd2lnU3R5bGUpO1xuICAgIH0gICBcbiAgICBcbiAgICB2YXIgdGxTdHlsZSA9IG5ldyBEQVNTdHlsZSgpO1xuICAgIHRsU3R5bGUuZ2x5cGggPSAnQk9YJztcbiAgICB0bFN0eWxlLkZHQ09MT1IgPSAnYmxhY2snO1xuICAgIGlmIChpdGVtUmdiKVxuICAgICAgICB0bFN0eWxlLkJHSVRFTSA9IHRydWU7XG4gICAgdGxTdHlsZS5CR0NPTE9SID0gJ3JlZCdcbiAgICB0bFN0eWxlLkhFSUdIVCA9IDEwO1xuICAgIHRsU3R5bGUuQlVNUCA9IHRydWU7XG4gICAgdGxTdHlsZS5aSU5ERVggPSAyMDtcbiAgICBzdHlsZXNoZWV0LnB1c2hTdHlsZSh7dHlwZTogJ3RyYW5zbGF0aW9uJ30sIG51bGwsIHRsU3R5bGUpO1xuICAgIFxuICAgIHZhciB0c1N0eWxlID0gbmV3IERBU1N0eWxlKCk7XG4gICAgdHNTdHlsZS5nbHlwaCA9ICdCT1gnO1xuICAgIHRzU3R5bGUuRkdDT0xPUiA9ICdibGFjayc7XG4gICAgdHNTdHlsZS5CR0NPTE9SID0gJ3doaXRlJztcbiAgICB0c1N0eWxlLkhFSUdIVCA9IDEwO1xuICAgIHRzU3R5bGUuWklOREVYID0gMTA7XG4gICAgdHNTdHlsZS5CVU1QID0gdHJ1ZTtcbiAgICB0c1N0eWxlLkxBQkVMID0gdHJ1ZTtcbiAgICBzdHlsZXNoZWV0LnB1c2hTdHlsZSh7dHlwZTogJ3RyYW5zY3JpcHQnfSwgbnVsbCwgdHNTdHlsZSk7XG5cbiAgICByZXR1cm4gc3R5bGVzaGVldC5zdHlsZXM7XG59XG5cbmZ1bmN0aW9uIFRIVUJfQ09NUEFSRShnLCBoKSB7XG4gICAgaWYgKGcucHJpb3JpdHkgJiYgaC5wcmlvcml0eSkge1xuICAgICAgICByZXR1cm4gKDEuMCAqIGcucHJpb3JpdHkpIC0gKDEuMCAqIGgucHJpb3JpdHkpXG4gICAgfSBlbHNlIGlmIChnLnByaW9yaXR5KSB7XG4gICAgICAgIHJldHVybiAxO1xuICAgIH0gZWxzZSBpZiAoaC5wcmlvcml0eSkge1xuICAgICAgICByZXR1cm4gLTE7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGcuc2hvcnRMYWJlbC5sb2NhbGVDb21wYXJlKGguc2hvcnRMYWJlbCk7XG4gICAgfVxufVxuXG5pZiAodHlwZW9mKG1vZHVsZSkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgICAgIGNvbm5lY3RUcmFja0h1YjogY29ubmVjdFRyYWNrSHViLFxuICAgICAgICBUSFVCX0NPTVBBUkU6IFRIVUJfQ09NUEFSRVxuICAgIH07XG59XG4iLCIvKiAtKi0gbW9kZTogamF2YXNjcmlwdDsgYy1iYXNpYy1vZmZzZXQ6IDQ7IGluZGVudC10YWJzLW1vZGU6IG5pbCAtKi0gKi9cblxuLy8gXG4vLyBEYWxsaWFuY2UgR2Vub21lIEV4cGxvcmVyXG4vLyAoYykgVGhvbWFzIERvd24gMjAwNi0yMDEzXG4vL1xuLy8gdGllci1hY3Rpb25zLmpzXG4vL1xuXG5cInVzZSBzdHJpY3RcIjtcblxuaWYgKHR5cGVvZihyZXF1aXJlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB2YXIgYnJvd3NlciA9IHJlcXVpcmUoJy4vY2Jyb3dzZXInKTtcbiAgICB2YXIgQnJvd3NlciA9IGJyb3dzZXIuQnJvd3NlcjtcblxuICAgIHZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcbiAgICB2YXIgc2hhbGxvd0NvcHkgPSB1dGlscy5zaGFsbG93Q29weTtcbn1cblxuQnJvd3Nlci5wcm90b3R5cGUubWVyZ2VTZWxlY3RlZFRpZXJzID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHNvdXJjZXMgPSBbXTtcbiAgICB2YXIgc3R5bGVzID0gW107XG5cbiAgICBmb3IgKHZhciBzdGkgPSAwOyBzdGkgPCB0aGlzLnNlbGVjdGVkVGllcnMubGVuZ3RoOyArK3N0aSkge1xuICAgICAgICB2YXIgdGllciA9IHRoaXMudGllcnNbdGhpcy5zZWxlY3RlZFRpZXJzW3N0aV1dO1xuXHQgICAgc291cmNlcy5wdXNoKHNoYWxsb3dDb3B5KHRpZXIuZGFzU291cmNlKSk7XG4gICAgICAgIHZhciBzcyA9IHRpZXIuc3R5bGVzaGVldC5zdHlsZXM7XG4gICAgICAgIGZvciAodmFyIHNpID0gMDsgc2kgPCBzcy5sZW5ndGg7ICsrc2kpIHtcbiAgICAgICAgICAgIHZhciBzaCA9IHNzW3NpXTtcbiAgICAgICAgICAgIHZhciBuc2ggPSBzaGFsbG93Q29weShzaCk7XG4gICAgICAgICAgICBuc2gubWV0aG9kID0gdGllci5kYXNTb3VyY2UubmFtZS5yZXBsYWNlKC9bKCkrKj9dL2csICdcXFxcJCYnKTtcbiAgICAgICAgICAgIG5zaC5fbWV0aG9kUkUgPSBudWxsO1xuICAgICAgICAgICAgbnNoLnN0eWxlID0gc2hhbGxvd0NvcHkoc2guc3R5bGUpO1xuICAgICAgICAgICAgaWYgKG5zaC5zdHlsZS5aSU5ERVggPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICBuc2guc3R5bGUuWklOREVYID0gc3RpO1xuXG4gICAgICAgICAgICBpZiAodGllci5mb3JjZU1pbikge1xuICAgICAgICAgICAgICAgIG5zaC5zdHlsZS5NSU4gPSB0aWVyLmZvcmNlTWluO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRpZXIuZm9yY2VNYXgpIHtcbiAgICAgICAgICAgICAgICBuc2guc3R5bGUuTUFYID0gdGllci5mb3JjZU1heDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc3R5bGVzLnB1c2gobnNoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICB0aGlzLmFkZFRpZXIoXG5cdHtuYW1lOiAnTWVyZ2VkJyxcblx0IG1lcmdlOiAnY29uY2F0Jyxcblx0IG92ZXJsYXk6IHNvdXJjZXMsXG5cdCBub0Rvd25zYW1wbGU6IHRydWUsXG4gICAgIHN0eWxlOiBzdHlsZXN9KTtcblxuICAgIHRoaXMuc2V0U2VsZWN0ZWRUaWVyKHRoaXMudGllcnMubGVuZ3RoIC0gMSk7XG59XG4iLCIvKiAtKi0gbW9kZTogamF2YXNjcmlwdDsgYy1iYXNpYy1vZmZzZXQ6IDQ7IGluZGVudC10YWJzLW1vZGU6IG5pbCAtKi0gKi9cblxuLy8gXG4vLyBEYWxsaWFuY2UgR2Vub21lIEV4cGxvcmVyXG4vLyAoYykgVGhvbWFzIERvd24gMjAwNi0yMDEzXG4vL1xuLy8gdGllci1lZGl0LmpzXG4vL1xuXG5cInVzZSBzdHJpY3RcIjtcblxuaWYgKHR5cGVvZihyZXF1aXJlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB2YXIgYnJvd3NlciA9IHJlcXVpcmUoJy4vY2Jyb3dzZXInKTtcbiAgICB2YXIgQnJvd3NlciA9IGJyb3dzZXIuQnJvd3NlcjtcblxuICAgIHZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcbiAgICB2YXIgbWFrZUVsZW1lbnQgPSB1dGlscy5tYWtlRWxlbWVudDtcblxuICAgIHZhciBkYXMgPSByZXF1aXJlKCcuL2RhcycpO1xuICAgIHZhciBpc0Rhc0Jvb2xlYW5UcnVlID0gZGFzLmlzRGFzQm9vbGVhblRydWU7XG4gICAgdmFyIGlzRGFzQm9vbGVhbk5vdEZhbHNlID0gZGFzLmlzRGFzQm9vbGVhbk5vdEZhbHNlO1xuICAgIHZhciBjb3B5U3R5bGVzaGVldCA9IGRhcy5jb3B5U3R5bGVzaGVldDtcblxuICAgIHZhciBjb2xvciA9IHJlcXVpcmUoJy4vY29sb3InKTtcbiAgICB2YXIgZGFzQ29sb3VyRm9yTmFtZSA9IGNvbG9yLmRhc0NvbG91ckZvck5hbWU7XG5cbiAgICB2YXIgc291cmNlRGF0YVVSSSA9IHJlcXVpcmUoJy4vc291cmNlY29tcGFyZScpLnNvdXJjZURhdGFVUkk7XG59XG5cbnZhciBfX2RhbGxpYW5jZV9zbWFsbEdseXBocyA9IHtcbiAgICBET1Q6IHRydWUsIFxuICAgIEVYOiB0cnVlLCBcbiAgICBTVEFSOiB0cnVlLCBcbiAgICBTUVVBUkU6IHRydWUsIFxuICAgIENST1NTOiB0cnVlLCBcbiAgICBUUklBTkdMRTogdHJ1ZSwgXG4gICAgUExJTVNPTEw6IHRydWVcbn07XG5cbkJyb3dzZXIucHJvdG90eXBlLm9wZW5UaWVyUGFuZWwgPSBmdW5jdGlvbih0aWVyKSB7XG4gICAgdmFyIGIgPSB0aGlzO1xuXG4gICAgaWYgKHRoaXMudWlNb2RlID09PSAndGllcicgJiYgdGhpcy5tYW5pcHVsYXRpbmdUaWVyID09PSB0aWVyKSB7XG4gICAgICAgIHRoaXMuaGlkZVRvb2xQYW5lbCgpO1xuICAgICAgICB0aGlzLnNldFVpTW9kZSgnbm9uZScpO1xuICAgIH0gZWxzZSBpZiAoIXRpZXIpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBzZXRTdHlsZUNvbG9ycyA9IGZ1bmN0aW9uKHN0eWxlKSB7XG4gICAgICAgICAgICBpZiAoc3R5bGUuQkdHUkFEKVxuICAgICAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICAgICAgaWYgKG51bUNvbG9ycyA9PSAxKSB7XG4gICAgICAgICAgICAgICAgaWYgKHN0eWxlLmdseXBoID09ICdMSU5FUExPVCcgfHwgX19kYWxsaWFuY2Vfc21hbGxHbHlwaHNbc3R5bGUuZ2x5cGhdKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlLkZHQ09MT1IgPSB0aWVyQ29sb3JGaWVsZC52YWx1ZTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzdHlsZS5CR0NPTE9SID0gdGllckNvbG9yRmllbGQudmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHN0eWxlLkNPTE9SMSA9IHN0eWxlLkNPTE9SMiA9IHN0eWxlLkNPTE9SMyA9IG51bGw7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHN0eWxlLkNPTE9SMSA9IHRpZXJDb2xvckZpZWxkLnZhbHVlO1xuICAgICAgICAgICAgICAgIHN0eWxlLkNPTE9SMiA9IHRpZXJDb2xvckZpZWxkMi52YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAobnVtQ29sb3JzID4gMikge1xuICAgICAgICAgICAgICAgICAgICBzdHlsZS5DT0xPUjMgPSB0aWVyQ29sb3JGaWVsZDMudmFsdWU7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc3R5bGUuQ09MT1IzID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzdHlsZS5fZ3JhZGllbnQgPSBudWxsO1xuICAgICAgICAgICAgc3R5bGUuX3BsdXNDb2xvciA9IHRpZXJQbHVzQ29sb3JGaWVsZC52YWx1ZTtcbiAgICAgICAgICAgIHN0eWxlLl9taW51c0NvbG9yID0gdGllck1pbnVzQ29sb3JGaWVsZC52YWx1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBtdXRhdGVTdHlsZXNoZWV0ID0gZnVuY3Rpb24odmlzaXRvcikge1xuICAgICAgICAgICAgdmFyIG5zcyA9IGNvcHlTdHlsZXNoZWV0KHRpZXIuc3R5bGVzaGVldCk7XG4gICAgICAgICAgICB2YXIgc3NTY2FsZSA9IHRpZXIuYnJvd3Nlci56b29tRm9yQ3VycmVudFNjYWxlKCk7XG5cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnNzLnN0eWxlcy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgIHZhciBzaCA9IG5zcy5zdHlsZXNbaV07XG4gICAgICAgICAgICAgICAgaWYgKHNoLnpvb20gJiYgc2guem9vbSAhPSBzc1NjYWxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZpc2l0b3Ioc2guc3R5bGUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gbnNzO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGNoYW5nZUNvbG9yID0gZnVuY3Rpb24oZXYpIHtcbiAgICAgICAgICAgIHRpZXIubWVyZ2VTdHlsZXNoZWV0KG11dGF0ZVN0eWxlc2hlZXQoc2V0U3R5bGVDb2xvcnMpKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdGhpcy5tYW5pcHVsYXRpbmdUaWVyID0gdGllcjtcblxuICAgICAgICB2YXIgdGllckZvcm0gPSBtYWtlRWxlbWVudCgnZGl2JywgbnVsbCwge2NsYXNzTmFtZTogJ3RpZXItZWRpdCd9KTtcblxuICAgICAgICB2YXIgYWJvdXRCYW5uZXIgPSBtYWtlRWxlbWVudCgnZGl2JywgXCJBYm91dCAnXCIgKyAodGllci5jb25maWcuTmFtZSB8fCB0aWVyLmRhc1NvdXJjZS5uYW1lKSArIFwiJ1wiLCBudWxsLFxuICAgICAgICAgICAgICAgIHtiYWNrZ3JvdW5kOiAnZ3JheScsIHBhZGRpbmdCb3R0b206ICc1cHgnLCBtYXJnaW5Cb3R0b206ICc1cHgnLCB0ZXh0QWxpZ246ICdjZW50ZXInfSk7XG4gICAgICAgIHRpZXJGb3JtLmFwcGVuZENoaWxkKGFib3V0QmFubmVyKTtcblxuICAgICAgICB2YXIgYWJvdXQgPSBtYWtlRWxlbWVudCgnZGl2JywgXG4gICAgICAgICAgICBbbWFrZUVsZW1lbnQoJ3AnLCB0aWVyLmRhc1NvdXJjZS5kZXNjKV1cbiAgICAgICAgKTtcbiAgICAgICAgdmFyIGFib3V0Tm90ZXMgPSBbXTtcbiAgICAgICAgdmFyIHNkdXJpID0gc291cmNlRGF0YVVSSSh0aWVyLmRhc1NvdXJjZSk7XG4gICAgICAgIGlmIChzZHVyaSAmJlxuICAgICAgICAgICAgKHNkdXJpLmluZGV4T2YoJ2h0dHA6Ly8nKSA9PSAwIHx8XG4gICAgICAgICAgICAgc2R1cmkuaW5kZXhPZignaHR0cHM6Ly8nKSA9PSAwIHx8XG4gICAgICAgICAgICAgc2R1cmkuaW5kZXhPZignLy8nKSA9PSAwKSAmJlxuICAgICAgICAgICAgc2R1cmkgIT09ICdodHRwczovL3d3dy5iaW9kYWxsaWFuY2Uub3JnL21hZ2ljL25vX3VyaScpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGFib3V0Tm90ZXMucHVzaChtYWtlRWxlbWVudCgnbGknLCBtYWtlRWxlbWVudCgnYScsICcoRG93bmxvYWQgZGF0YSknLCB7aHJlZjogc2R1cml9KSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRpZXIuZGFzU291cmNlLm1hcHBpbmcpIHtcbiAgICAgICAgICAgIHZhciBjb29yZHMgPSB0aGlzLmNoYWluc1t0aWVyLmRhc1NvdXJjZS5tYXBwaW5nXS5jb29yZHM7XG4gICAgICAgICAgICBhYm91dE5vdGVzLnB1c2gobWFrZUVsZW1lbnQoJ2xpJywgICdNYXBwZWQgZnJvbSAnICsgY29vcmRzLmF1dGggKyBjb29yZHMudmVyc2lvbikpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGFib3V0Tm90ZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgYWJvdXQuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ3VsJywgYWJvdXROb3RlcykpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB0aWVyRm9ybS5hcHBlbmRDaGlsZChhYm91dCk7XG5cbiAgICAgICAgdmFyIHNlbWFudGljQmFubmVyID0gbWFrZUVsZW1lbnQoJ3NwYW4nLCAnIChzdHlsZXMgZm9yIGN1cnJlbnQgem9vbSBsZXZlbCknLCBudWxsLCB7ZGlzcGxheTogJ25vbmUnfSk7XG4gICAgICAgIHZhciBlZGl0QmFubmVyID0gbWFrZUVsZW1lbnQoJ2RpdicsIFsnRWRpdCcsIHNlbWFudGljQmFubmVyXSwgbnVsbCxcbiAgICAgICAgICAgICAge2JhY2tncm91bmQ6ICdncmF5JywgcGFkZGluZ0JvdHRvbTogJzVweCcsIG1hcmdpbkJvdHRvbTogJzVweCcsIHRleHRBbGlnbjogJ2NlbnRlcid9KTtcbiAgICAgICAgdGllckZvcm0uYXBwZW5kQ2hpbGQoZWRpdEJhbm5lcik7XG5cbiAgICAgICAgdmFyIHRpZXJOYW1lRmllbGQgPSBtYWtlRWxlbWVudCgnaW5wdXQnLCBudWxsLCB7dHlwZTogJ3RleHQnfSk7XG4gICAgICAgIHZhciB0aWVyUGlubmVkVG9nZ2xlID0gbWFrZUVsZW1lbnQoJ2lucHV0JywgbnVsbCwge3R5cGU6ICdjaGVja2JveCcsIGRpc2FibGVkOiB0aGlzLmRpc2FibGVQaW5uaW5nfSk7XG5cbiAgICAgICAgdmFyIGdseXBoRmllbGQgPSBtYWtlRWxlbWVudCgnc2VsZWN0Jyk7XG4gICAgICAgIGdseXBoRmllbGQuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ29wdGlvbicsICdIaXN0b2dyYW0nLCB7dmFsdWU6ICdISVNUT0dSQU0nfSkpO1xuICAgICAgICBnbHlwaEZpZWxkLmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCdvcHRpb24nLCAnTGluZSBQbG90Jywge3ZhbHVlOiAnTElORVBMT1QnfSkpO1xuICAgICAgICBnbHlwaEZpZWxkLmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCdvcHRpb24nLCAnUmliYm9uJywge3ZhbHVlOiAnR1JBRElFTlQnfSkpO1xuICAgICAgICBnbHlwaEZpZWxkLmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCdvcHRpb24nLCAnU2NhdHRlcicsIHt2YWx1ZTogJ1NDQVRURVInfSkpO1xuXG4gICAgICAgIHZhciB0aWVyQ29sb3JGaWVsZCA9IG1ha2VFbGVtZW50KCdpbnB1dCcsIG51bGwsIHt0eXBlOiAndGV4dCcsIHZhbHVlOiAnI2RkMDBkZCd9KTtcbiAgICAgICAgdmFyIHRpZXJDb2xvckZpZWxkMiA9IG1ha2VFbGVtZW50KCdpbnB1dCcsIG51bGwsIHt0eXBlOiAndGV4dCcsIHZhbHVlOiAnI2RkMDBkZCd9KTtcbiAgICAgICAgdmFyIHRpZXJDb2xvckZpZWxkMyA9IG1ha2VFbGVtZW50KCdpbnB1dCcsIG51bGwsIHt0eXBlOiAndGV4dCcsIHZhbHVlOiAnI2RkMDBkZCd9KTtcblxuICAgICAgICB2YXIgdGllclBsdXNDb2xvckZpZWxkID0gbWFrZUVsZW1lbnQoJ2lucHV0JywgbnVsbCwge3R5cGU6ICd0ZXh0JywgdmFsdWU6ICcjZmZhMDdhJ30pO1xuICAgICAgICB2YXIgdGllck1pbnVzQ29sb3JGaWVsZCA9IG1ha2VFbGVtZW50KCdpbnB1dCcsIG51bGwsIHt0eXBlOiAndGV4dCcsIHZhbHVlOiAnIzg3Y2VmYSd9KTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGllckNvbG9yRmllbGQudHlwZSA9IHRpZXJDb2xvckZpZWxkMi50eXBlID0gdGllckNvbG9yRmllbGQzLnR5cGUgPSAnY29sb3InO1xuICAgICAgICAgICAgdGllclBsdXNDb2xvckZpZWxkLnR5cGUgPSB0aWVyTWludXNDb2xvckZpZWxkLnR5cGUgPSAnY29sb3InO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAvLyBJRSB0aHJvd3MgaWYgYXR0ZW1wdCB0byBzZXQgdHlwZSB0byAnY29sb3InLlxuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHRpZXJDb2xvckZpZWxkcyA9IFt0aWVyQ29sb3JGaWVsZCwgdGllckNvbG9yRmllbGQyLCB0aWVyQ29sb3JGaWVsZDNdO1xuICAgICAgICB2YXIgY29sb3JMaXN0UGx1cyA9IG1ha2VFbGVtZW50KCdpJywgbnVsbCwge2NsYXNzTmFtZTogJ2ZhIGZhLXBsdXMtY2lyY2xlJ30pO1xuICAgICAgICB2YXIgY29sb3JMaXN0TWludXMgPSBtYWtlRWxlbWVudCgnaScsIG51bGwsIHtjbGFzc05hbWU6ICdmYSBmYS1taW51cy1jaXJjbGUnfSk7XG4gICAgICAgIHZhciBudW1Db2xvcnMgPSAxO1xuICAgICAgICB2YXIgY29sb3JMaXN0RWxlbWVudCA9IG1ha2VFbGVtZW50KCd0ZCcsIHRpZXJDb2xvckZpZWxkcyk7XG4gICAgICAgIHZhciBzZXROdW1Db2xvcnMgPSBmdW5jdGlvbihuKSB7XG4gICAgICAgICAgICBudW1Db2xvcnMgPSBuO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuOyArK2kpIFxuICAgICAgICAgICAgICAgIHRpZXJDb2xvckZpZWxkc1tpXS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSBuOyBpIDwgdGllckNvbG9yRmllbGRzLmxlbmd0aDsgKytpKVxuICAgICAgICAgICAgICAgIHRpZXJDb2xvckZpZWxkc1tpXS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICB9XG4gICAgICAgIGNvbG9yTGlzdFBsdXMuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldikge1xuICAgICAgICAgICAgaWYgKG51bUNvbG9ycyA8IDMpIHtcbiAgICAgICAgICAgICAgICBzZXROdW1Db2xvcnMobnVtQ29sb3JzICsgMSk7XG4gICAgICAgICAgICAgICAgY2hhbmdlQ29sb3IobnVsbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIGZhbHNlKTtcbiAgICAgICAgY29sb3JMaXN0TWludXMuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldikge1xuICAgICAgICAgICAgaWYgKG51bUNvbG9ycyA+IDEpIHtcbiAgICAgICAgICAgICAgICBzZXROdW1Db2xvcnMobnVtQ29sb3JzIC0gMSk7XG4gICAgICAgICAgICAgICAgY2hhbmdlQ29sb3IobnVsbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIGZhbHNlKTtcblxuICAgICAgICB2YXIgdGllck1pbkZpZWxkID0gbWFrZUVsZW1lbnQoJ2lucHV0JywgbnVsbCwge3R5cGU6ICd0ZXh0JywgdmFsdWU6ICcwLjAnfSk7XG4gICAgICAgIHZhciB0aWVyTWF4RmllbGQgPSBtYWtlRWxlbWVudCgnaW5wdXQnLCBudWxsLCB7dHlwZTogJ3RleHQnLCB2YWx1ZTogJzEwLjAnfSk7XG4gICAgICAgIHZhciB0aWVyTWluVG9nZ2xlID0gbWFrZUVsZW1lbnQoJ2lucHV0JywgbnVsbCwge3R5cGU6ICdjaGVja2JveCd9KTtcbiAgICAgICAgdmFyIHRpZXJNYXhUb2dnbGUgPSBtYWtlRWxlbWVudCgnaW5wdXQnLCBudWxsLCB7dHlwZTogJ2NoZWNrYm94J30pO1xuXG4gICAgICAgIHZhciBxdWFudExlYXBUb2dnbGUgPSBtYWtlRWxlbWVudCgnaW5wdXQnLCBudWxsLCB7dHlwZTogJ2NoZWNrYm94JywgY2hlY2tlZDogdGllci5xdWFudExlYXBUaHJlc2hvbGQgIT09IHVuZGVmaW5lZH0pO1xuICAgICAgICB2YXIgcXVhbnRMZWFwVGhyZXNoRmllbGQgPSBtYWtlRWxlbWVudCgnaW5wdXQnLCBudWxsLCB7dHlwZTogJ3RleHQnLCB2YWx1ZTogdGllci5xdWFudExlYXBUaHJlc2hvbGQsIGRpc2FibGVkOiAhcXVhbnRMZWFwVG9nZ2xlLmNoZWNrZWR9KTtcblxuICAgICAgICB2YXIgdGllckhlaWdodEZpZWxkID0gbWFrZUVsZW1lbnQoJ2lucHV0JywgbnVsbCwge3R5cGU6ICd0ZXh0JywgdmFsdWU6ICc1MCd9KTtcblxuICAgICAgICB2YXIgYnVtcFRvZ2dsZSA9IG1ha2VFbGVtZW50KCdpbnB1dCcsIG51bGwsIHt0eXBlOiAnY2hlY2tib3gnfSk7XG4gICAgICAgIHZhciBidW1wTGltaXQgPSBtYWtlRWxlbWVudCgnaW5wdXQnLCBudWxsLCB7dHlwZTogJ3RleHQnfSk7XG4gICAgICAgIHZhciBsYWJlbFRvZ2dsZSA9IG1ha2VFbGVtZW50KCdpbnB1dCcsIG51bGwsIHt0eXBlOiAnY2hlY2tib3gnfSk7XG5cbiAgICAgICAgdmFyIG1haW5TdHlsZSA9IG51bGw7XG4gICAgICAgIGlmICh0aWVyLnN0eWxlc2hlZXQuc3R5bGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHZhciBzID0gbWFpblN0eWxlID0gdGllci5zdHlsZXNoZWV0LnN0eWxlc1swXS5zdHlsZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciByZWZyZXNoID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHRpZXIuY29uZmlnLm5hbWUgPT09ICdzdHJpbmcnKVxuICAgICAgICAgICAgICAgIHRpZXJOYW1lRmllbGQudmFsdWUgPSB0aWVyLmNvbmZpZy5uYW1lO1xuICAgICAgICAgICAgZWxzZSBcbiAgICAgICAgICAgICAgICB0aWVyTmFtZUZpZWxkLnZhbHVlID0gdGllci5kYXNTb3VyY2UubmFtZTtcblxuICAgICAgICAgICAgdGllclBpbm5lZFRvZ2dsZS5jaGVja2VkID0gdGllci5waW5uZWQ7XG5cbiAgICAgICAgICAgIGlmICh0aWVyLmZvcmNlSGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgdGllckhlaWdodEZpZWxkLnZhbHVlID0gJycgKyB0aWVyLmZvcmNlSGVpZ2h0O1xuICAgICAgICAgICAgfSBlbHNlIGlmIChtYWluU3R5bGUgJiYgbWFpblN0eWxlLkhFSUdIVCkge1xuICAgICAgICAgICAgICAgIHRpZXJIZWlnaHRGaWVsZC52YWx1ZSA9ICcnICsgbWFpblN0eWxlLkhFSUdIVDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHR5cGVvZiB0aWVyLnF1YW50TGVhcFRocmVzaG9sZCA9PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgIHF1YW50TGVhcFRvZ2dsZS5jaGVja2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBxdWFudExlYXBUaHJlc2hGaWVsZC5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGlmIChwYXJzZUZsb2F0KHF1YW50TGVhcFRocmVzaEZpZWxkLnZhbHVlKSAhPSB0aWVyLnF1YW50TGVhcFRocmVzaG9sZClcbiAgICAgICAgICAgICAgICAgICAgcXVhbnRMZWFwVGhyZXNoRmllbGQudmFsdWUgPSB0aWVyLnF1YW50TGVhcFRocmVzaG9sZDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcXVhbnRMZWFwVG9nZ2xlLmNoZWNrZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBxdWFudExlYXBUaHJlc2hGaWVsZC5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2YgdGllci5zdWJ0aWVyTWF4ID09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAgICAgYnVtcExpbWl0LnZhbHVlID0gJycgKyB0aWVyLnN1YnRpZXJNYXg7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGJ1bXBMaW1pdC52YWx1ZSA9ICcnICsgKHRpZXIuZGFzU291cmNlLnN1YnRpZXJNYXggfHwgdGllci5icm93c2VyLmRlZmF1bHRTdWJ0aWVyTWF4KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHRpZXIuc3R5bGVzaGVldC5zdHlsZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHZhciBzID0gbnVsbDtcbiAgICAgICAgICAgICAgICB2YXIgaXNRdWFudGl0YXRpdmU9ZmFsc2UsIGlzU2ltcGxlUXVhbnRpdGF0aXZlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdmFyIHNzU2NhbGUgPSB0aWVyLmJyb3dzZXIuem9vbUZvckN1cnJlbnRTY2FsZSgpO1xuICAgICAgICAgICAgICAgIHZhciBhY3RpdmVTdHlsZUNvdW50ID0gMDtcblxuICAgICAgICAgICAgICAgIGZvciAodmFyIHNpID0gMDsgc2kgPCB0aWVyLnN0eWxlc2hlZXQuc3R5bGVzLmxlbmd0aDsgKytzaSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2ggPSB0aWVyLnN0eWxlc2hlZXQuc3R5bGVzW3NpXTsgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoc2guem9vbSAmJiBzaC56b29tICE9IHNzU2NhbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICsrYWN0aXZlU3R5bGVDb3VudDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNzID0gdGllci5zdHlsZXNoZWV0LnN0eWxlc1tzaV0uc3R5bGU7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzID0gbWFpblN0eWxlID0gc3M7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGlmIChzcy5nbHlwaCA9PSAnTElORVBMT1QnIHx8IHNzLmdseXBoID09ICdISVNUT0dSQU0nIHx8IHNzLmdseXBoID09ICdHUkFESUVOVCcgfHwgaXNEYXNCb29sZWFuVHJ1ZShzcy5TQ0FUVEVSKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc1F1YW50aXRhdGl2ZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gbWFpblN0eWxlID0gc3M7XG4gICAgICAgICAgICAgICAgICAgICAgICBpc1F1YW50aXRhdGl2ZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBzZW1hbnRpY0Jhbm5lci5zdHlsZS5kaXNwbGF5ID0gKGFjdGl2ZVN0eWxlQ291bnQgPT0gdGllci5zdHlsZXNoZWV0LnN0eWxlcy5sZW5ndGgpID8gJ25vbmUnIDogJ2lubGluZSc7XG5cbiAgICAgICAgICAgICAgICBpc1NpbXBsZVF1YW50aXRhdGl2ZSA9IGlzUXVhbnRpdGF0aXZlICYmIGFjdGl2ZVN0eWxlQ291bnQgPT0gMTtcbiAgICAgICAgICAgICAgICB2YXIgaXNHcmFkaWVudCA9IHMuQ09MT1IyIHx8IHMuQkdHUkFEO1xuXG4gICAgICAgICAgICAgICAgaWYgKGlzUXVhbnRpdGF0aXZlKSB7XG4gICAgICAgICAgICAgICAgICAgIG1pblJvdy5zdHlsZS5kaXNwbGF5ID0gJ3RhYmxlLXJvdyc7XG4gICAgICAgICAgICAgICAgICAgIG1heFJvdy5zdHlsZS5kaXNwbGF5ID0gJ3RhYmxlLXJvdyc7XG4gICAgICAgICAgICAgICAgICAgIGJ1bXBSb3cuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICAgICAgbGFiZWxSb3cuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBtaW5Sb3cuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICAgICAgbWF4Um93LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgICAgIGJ1bXBSb3cuc3R5bGUuZGlzcGxheSA9ICd0YWJsZS1yb3cnO1xuICAgICAgICAgICAgICAgICAgICBidW1wVG9nZ2xlLmNoZWNrZWQgPSBpc0Rhc0Jvb2xlYW5UcnVlKG1haW5TdHlsZS5CVU1QKTtcbiAgICAgICAgICAgICAgICAgICAgYnVtcExpbWl0LmRpc2FibGVkID0gIWlzRGFzQm9vbGVhblRydWUobWFpblN0eWxlLkJVTVApO1xuICAgICAgICAgICAgICAgICAgICBsYWJlbFJvdy5zdHlsZS5kaXNwbGF5ID0gJ3RhYmxlLXJvdyc7XG4gICAgICAgICAgICAgICAgICAgIGxhYmVsVG9nZ2xlLmNoZWNrZWQgPSBpc0Rhc0Jvb2xlYW5UcnVlKG1haW5TdHlsZS5MQUJFTCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGlzU2ltcGxlUXVhbnRpdGF0aXZlKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlUm93LnN0eWxlLmRpc3BsYXkgPSAndGFibGUtcm93JztcbiAgICAgICAgICAgICAgICAgICAgY29sb3JSb3cuc3R5bGUuZGlzcGxheSA9ICd0YWJsZS1yb3cnO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlUm93LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgICAgIGNvbG9yUm93LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgbnVtQ29sb3JzID0gMTtcbiAgICAgICAgICAgICAgICBpZiAocy5DT0xPUjEpIHtcbiAgICAgICAgICAgICAgICAgICAgdGllckNvbG9yRmllbGQudmFsdWUgPSBkYXNDb2xvdXJGb3JOYW1lKHMuQ09MT1IxKS50b0hleFN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocy5DT0xPUjIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpZXJDb2xvckZpZWxkMi52YWx1ZSA9IGRhc0NvbG91ckZvck5hbWUocy5DT0xPUjIpLnRvSGV4U3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocy5DT0xPUjMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aWVyQ29sb3JGaWVsZDMudmFsdWUgPSBkYXNDb2xvdXJGb3JOYW1lKHMuQ09MT1IzKS50b0hleFN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bUNvbG9ycyA9IDM7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bUNvbG9ycyA9IDI7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAocy5nbHlwaCA9PSAnTElORVBMT1QnIHx8IHMuZ2x5cGggPT0gJ0RPVCcgJiYgcy5GR0NPTE9SKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aWVyQ29sb3JGaWVsZC52YWx1ZSA9IGRhc0NvbG91ckZvck5hbWUocy5GR0NPTE9SKS50b0hleFN0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHMuQkdDT0xPUikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGllckNvbG9yRmllbGQudmFsdWUgPSBkYXNDb2xvdXJGb3JOYW1lKHMuQkdDT0xPUikudG9IZXhTdHJpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gXG4gICAgICAgICAgICAgICAgc2V0TnVtQ29sb3JzKG51bUNvbG9ycyk7XG5cbiAgICAgICAgICAgICAgICBpZiAocy5fcGx1c0NvbG9yKVxuICAgICAgICAgICAgICAgICAgICB0aWVyUGx1c0NvbG9yRmllbGQudmFsdWUgPSBkYXNDb2xvdXJGb3JOYW1lKHMuX3BsdXNDb2xvcikudG9IZXhTdHJpbmcoKSB8fCBzLl9wbHVzQ29sb3I7XG4gICAgICAgICAgICAgICAgaWYgKHMuX21pbnVzQ29sb3IpXG4gICAgICAgICAgICAgICAgICAgIHRpZXJNaW51c0NvbG9yRmllbGQudmFsdWUgPSBkYXNDb2xvdXJGb3JOYW1lKHMuX21pbnVzQ29sb3IpLnRvSGV4U3RyaW5nKCkgfHwgcy5fbWludXNDb2xvcjtcbiAgICAgICAgICAgICAgICBpZiAoaXNEYXNCb29sZWFuVHJ1ZShzLlNDQVRURVIpKSB7XG4gICAgICAgICAgICAgICAgICAgIGdseXBoRmllbGQudmFsdWUgPSAnU0NBVFRFUic7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZ2x5cGhGaWVsZC52YWx1ZSA9IHMuZ2x5cGg7XG4gICAgICAgICAgICAgICAgfSBcblxuICAgICAgICAgICAgICAgIHZhciBzZXRNaW5WYWx1ZSwgc2V0TWF4VmFsdWU7XG4gICAgICAgICAgICAgICAgaWYgKHMuTUlOICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHggPSBwYXJzZUZsb2F0KHMuTUlOKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpc05hTih4KSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldE1pblZhbHVlID0geDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCF0aWVyLmZvcmNlTWluRHluYW1pYyAmJiAocy5NSU4gIT09IHVuZGVmaW5lZCB8fCB0aWVyLmZvcmNlTWluICE9PSB1bmRlZmluZWQpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRpZXJNaW5Ub2dnbGUuY2hlY2tlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHRpZXJNaW5GaWVsZC5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRpZXJNaW5Ub2dnbGUuY2hlY2tlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB0aWVyTWluRmllbGQuZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChzLk1BWCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB4ID0gcGFyc2VGbG9hdChzLk1BWClcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpc05hTih4KSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldE1heFZhbHVlID0geDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCF0aWVyLmZvcmNlTWF4RHluYW1pYyAmJiAocy5NQVggIT09IHVuZGVmaW5lZCB8fCB0aWVyLmZvcmNlTWF4ICE9PSB1bmRlZmluZWQpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRpZXJNYXhUb2dnbGUuY2hlY2tlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHRpZXJNYXhGaWVsZC5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRpZXJNYXhUb2dnbGUuY2hlY2tlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB0aWVyTWF4RmllbGQuZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICh0aWVyLmZvcmNlTWluICE9IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBzZXRNaW5WYWx1ZSA9IHRpZXIuZm9yY2VNaW47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0aWVyLmZvcmNlTWF4ICE9IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBzZXRNYXhWYWx1ZSA9IHRpZXIuZm9yY2VNYXg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Yoc2V0TWluVmFsdWUpID09ICdudW1iZXInICYmIHNldE1pblZhbHVlICE9IHBhcnNlRmxvYXQodGllck1pbkZpZWxkLnZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICB0aWVyTWluRmllbGQudmFsdWUgPSBzZXRNaW5WYWx1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZihzZXRNYXhWYWx1ZSkgPT0gJ251bWJlcicgJiYgc2V0TWF4VmFsdWUgIT0gcGFyc2VGbG9hdCh0aWVyTWF4RmllbGQudmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRpZXJNYXhGaWVsZC52YWx1ZSA9IHNldE1heFZhbHVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciBzZXFTdHlsZSA9IGdldFNlcVN0eWxlKHRpZXIuc3R5bGVzaGVldCk7XG4gICAgICAgICAgICAgICAgaWYgKHNlcVN0eWxlKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlcU1pc21hdGNoUm93LnN0eWxlLmRpc3BsYXkgPSAndGFibGUtcm93JztcbiAgICAgICAgICAgICAgICAgICAgc2VxTWlzbWF0Y2hUb2dnbGUuY2hlY2tlZCA9IChzZXFTdHlsZS5fX1NFUUNPTE9SID09PSAnbWlzbWF0Y2gnKTtcbiAgICAgICAgICAgICAgICAgICAgc2VxSW5zZXJ0Um93LnN0eWxlLmRpc3BsYXkgPSAndGFibGUtcm93JztcbiAgICAgICAgICAgICAgICAgICAgc2VxSW5zZXJ0VG9nZ2xlLmNoZWNrZWQgPSAgaXNEYXNCb29sZWFuVHJ1ZShzZXFTdHlsZS5fX0lOU0VSVElPTlMpO1xuICAgICAgICAgICAgICAgICAgICBzZXFJZ25vcmVRdWFsc1Jvdy5zdHlsZS5kaXNwbGF5ID0gJ3RhYmxlLXJvdyc7XG4gICAgICAgICAgICAgICAgICAgIHNlcUlnbm9yZVF1YWxzVG9nZ2xlLmNoZWNrZWQgPSAoc2VxU3R5bGUuX19kaXNhYmxlUXVhbHMgPT09IHVuZGVmaW5lZCB8fCBzZXFTdHlsZS5fX2Rpc2FibGVRdWFscyA9PT0gZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhzZXFTdHlsZS5fX2Rpc2FibGVRdWFscyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc2VxTWlzbWF0Y2hSb3cuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICAgICAgc2VxSW5zZXJ0Um93LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgICAgIHNlcUlnbm9yZVF1YWxzUm93LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHNlcVN0eWxlICYmIHNlcU1pc21hdGNoVG9nZ2xlLmNoZWNrZWQgJiYgIWlzU2ltcGxlUXVhbnRpdGF0aXZlKSB7XG4gICAgICAgICAgICAgICAgICAgIHBsdXNTdHJhbmRDb2xvclJvdy5zdHlsZS5kaXNwbGF5ID0gJ3RhYmxlLXJvdyc7XG4gICAgICAgICAgICAgICAgICAgIG1pbnVzU3RyYW5kQ29sb3JSb3cuc3R5bGUuZGlzcGxheSA9ICd0YWJsZS1yb3cnO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHBsdXNTdHJhbmRDb2xvclJvdy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgICAgICBtaW51c1N0cmFuZENvbG9yUm93LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoaXNRdWFudGl0YXRpdmUgJiYgdGllci5icm93c2VyLnNvdXJjZUFkYXB0ZXJJc0NhcGFibGUodGllci5mZWF0dXJlU291cmNlLCAncXVhbnRMZWFwJykpXG4gICAgICAgICAgICAgICAgcXVhbnRMZWFwUm93LnN0eWxlLmRpc3BsYXkgPSAndGFibGUtcm93JztcbiAgICAgICAgICAgIGVsc2UgXG4gICAgICAgICAgICAgICAgcXVhbnRMZWFwUm93LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgc2VxTWlzbWF0Y2hUb2dnbGUgPSBtYWtlRWxlbWVudCgnaW5wdXQnLCBudWxsLCB7dHlwZTogJ2NoZWNrYm94J30pO1xuICAgICAgICB2YXIgc2VxTWlzbWF0Y2hSb3cgPSBtYWtlRWxlbWVudCgndHInLFxuICAgICAgICAgICAgW21ha2VFbGVtZW50KCd0aCcsICdIaWdobGlnaHQgbWlzbWF0Y2hlcyAmIHN0cmFuZHMnKSxcbiAgICAgICAgICAgICBtYWtlRWxlbWVudCgndGQnLCBzZXFNaXNtYXRjaFRvZ2dsZSldKTtcbiAgICAgICAgc2VxTWlzbWF0Y2hUb2dnbGUuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZnVuY3Rpb24oZXYpIHtcbiAgICAgICAgICAgIHZhciBuc3MgPSBjb3B5U3R5bGVzaGVldCh0aWVyLnN0eWxlc2hlZXQpO1xuICAgICAgICAgICAgdmFyIHNlcVN0eWxlID0gZ2V0U2VxU3R5bGUobnNzKTtcbiAgICAgICAgICAgIHNlcVN0eWxlLl9fU0VRQ09MT1IgPSBzZXFNaXNtYXRjaFRvZ2dsZS5jaGVja2VkID8gJ21pc21hdGNoJyA6ICdiYXNlJztcbiAgICAgICAgICAgIHRpZXIubWVyZ2VTdHlsZXNoZWV0KG5zcyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhciBzZXFJbnNlcnRUb2dnbGUgPSBtYWtlRWxlbWVudCgnaW5wdXQnLCBudWxsLCB7dHlwZTogJ2NoZWNrYm94J30pO1xuICAgICAgICB2YXIgc2VxSW5zZXJ0Um93ID0gbWFrZUVsZW1lbnQoJ3RyJyxcbiAgICAgICAgICAgIFttYWtlRWxlbWVudCgndGgnLCAnU2hvdyBpbnNlcnRpb25zJyksXG4gICAgICAgICAgICAgbWFrZUVsZW1lbnQoJ3RkJywgc2VxSW5zZXJ0VG9nZ2xlKV0pO1xuICAgICAgICBzZXFJbnNlcnRUb2dnbGUuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZnVuY3Rpb24oZXYpIHtcbiAgICAgICAgICAgIHZhciBuc3MgPSBjb3B5U3R5bGVzaGVldCh0aWVyLnN0eWxlc2hlZXQpO1xuICAgICAgICAgICAgdmFyIHNlcVN0eWxlID0gZ2V0U2VxU3R5bGUobnNzKTtcbiAgICAgICAgICAgIHNlcVN0eWxlLl9fSU5TRVJUSU9OUyA9IHNlcUluc2VydFRvZ2dsZS5jaGVja2VkID8gJ3llcycgOiAnbm8nO1xuICAgICAgICAgICAgdGllci5tZXJnZVN0eWxlc2hlZXQobnNzKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdmFyIHNlcUlnbm9yZVF1YWxzVG9nZ2xlID0gbWFrZUVsZW1lbnQoJ2lucHV0JywgbnVsbCwge3R5cGU6ICdjaGVja2JveCd9KTtcbiAgICAgICAgdmFyIHNlcUlnbm9yZVF1YWxzUm93ID0gbWFrZUVsZW1lbnQoJ3RyJyxcbiAgICAgICAgICAgIFttYWtlRWxlbWVudCgndGgnLCAnUmVmbGVjdCBiYXNlIHF1YWxpdHkgYXMgYmFzZSBjb2xvciB0cmFuc3BhcmVuY3knKSxcbiAgICAgICAgICAgICBtYWtlRWxlbWVudCgndGQnLCBzZXFJZ25vcmVRdWFsc1RvZ2dsZSldKTtcbiAgICAgICAgc2VxSWdub3JlUXVhbHNUb2dnbGUuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZnVuY3Rpb24oZXYpIHtcbiAgICAgICAgICAgIHZhciBuc3MgPSBjb3B5U3R5bGVzaGVldCh0aWVyLnN0eWxlc2hlZXQpO1xuICAgICAgICAgICAgdmFyIHNlcVN0eWxlID0gZ2V0U2VxU3R5bGUobnNzKTtcbiAgICAgICAgICAgIHNlcVN0eWxlLl9fZGlzYWJsZVF1YWxzID0gIXNlcUlnbm9yZVF1YWxzVG9nZ2xlLmNoZWNrZWQ7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhzZXFTdHlsZS5fX2Rpc2FibGVRdWFscyk7XG4gICAgICAgICAgICB0aWVyLm1lcmdlU3R5bGVzaGVldChuc3MpO1xuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgc3R5bGVSb3cgPSBtYWtlRWxlbWVudCgndHInLFxuICAgICAgICAgICAgICAgIFttYWtlRWxlbWVudCgndGgnLCAnU3R5bGUnKSxcbiAgICAgICAgICAgICAgICAgbWFrZUVsZW1lbnQoJ3RkJywgZ2x5cGhGaWVsZCldKTtcbiAgICAgICAgdmFyIGNvbG9yUm93ID0gbWFrZUVsZW1lbnQoJ3RyJyxcbiAgICAgICAgICAgICAgICBbbWFrZUVsZW1lbnQoJ3RoJywgWydDb2xvdXIocyknLCBjb2xvckxpc3RQbHVzLCBjb2xvckxpc3RNaW51c10pLFxuICAgICAgICAgICAgICAgICBjb2xvckxpc3RFbGVtZW50XSk7XG4gICAgICAgIHZhciBwbHVzU3RyYW5kQ29sb3JSb3cgPSBtYWtlRWxlbWVudCgndHInLFxuICAgICAgICAgICAgICAgIFttYWtlRWxlbWVudCgndGgnLCAnUGx1cyBTdHJhbmQgQ29sb3InKSxcbiAgICAgICAgICAgICAgICAgbWFrZUVsZW1lbnQoJ3RkJywgdGllclBsdXNDb2xvckZpZWxkKV0pO1xuICAgICAgICB2YXIgbWludXNTdHJhbmRDb2xvclJvdyA9IG1ha2VFbGVtZW50KCd0cicsXG4gICAgICAgICAgICAgICAgW21ha2VFbGVtZW50KCd0aCcsICdNaW51cyBTdHJhbmQgQ29sb3InKSxcbiAgICAgICAgICAgICAgICAgbWFrZUVsZW1lbnQoJ3RkJywgdGllck1pbnVzQ29sb3JGaWVsZCldKTtcbiAgICAgICAgdmFyIG1pblJvdyA9IG1ha2VFbGVtZW50KCd0cicsXG4gICAgICAgICAgICAgICAgW21ha2VFbGVtZW50KCd0aCcsICdNaW4gdmFsdWUnKSxcbiAgICAgICAgICAgICAgICAgbWFrZUVsZW1lbnQoJ3RkJywgW3RpZXJNaW5Ub2dnbGUsICcgJywgdGllck1pbkZpZWxkXSldKTtcbiAgICAgICAgdmFyIG1heFJvdyA9IG1ha2VFbGVtZW50KCd0cicsXG4gICAgICAgICAgICAgICAgW21ha2VFbGVtZW50KCd0aCcsICdNYXggdmFsdWUnKSxcbiAgICAgICAgICAgICAgICAgbWFrZUVsZW1lbnQoJ3RkJywgW3RpZXJNYXhUb2dnbGUsICcgJywgdGllck1heEZpZWxkXSldKTtcbiAgICAgICAgdmFyIHF1YW50TGVhcFJvdyA9IFxuICAgICAgICAgICAgIG1ha2VFbGVtZW50KCd0cicsXG4gICAgICAgICAgICAgICAgW21ha2VFbGVtZW50KCd0aCcsICdUaHJlc2hvbGQgbGVhcDonKSxcbiAgICAgICAgICAgICAgICAgbWFrZUVsZW1lbnQoJ3RkJywgW3F1YW50TGVhcFRvZ2dsZSwgJyAnLCBxdWFudExlYXBUaHJlc2hGaWVsZF0pXSk7XG4gICAgICAgIHZhciBidW1wUm93ID0gbWFrZUVsZW1lbnQoJ3RyJyxcbiAgICAgICAgICAgICAgICBbbWFrZUVsZW1lbnQoJ3RoJywgJ0J1bXAgb3ZlcmxhcHMnKSxcbiAgICAgICAgICAgICAgICAgbWFrZUVsZW1lbnQoJ3RkJywgW2J1bXBUb2dnbGUsICcgbGltaXQ6ICcsIGJ1bXBMaW1pdF0pXSk7XG4gICAgICAgIHZhciBsYWJlbFJvdyA9IG1ha2VFbGVtZW50KCd0cicsXG4gICAgICAgICAgICAgICAgW21ha2VFbGVtZW50KCd0aCcsICdMYWJlbCBmZWF0dXJlcycpLFxuICAgICAgICAgICAgICAgICBtYWtlRWxlbWVudCgndGQnLCBsYWJlbFRvZ2dsZSldKTtcblxuXG4gICAgICAgIHZhciB0aWVyVGFibGUgPSBtYWtlRWxlbWVudCgndGFibGUnLFxuICAgICAgICAgICAgW21ha2VFbGVtZW50KCd0cicsXG4gICAgICAgICAgICAgICAgW21ha2VFbGVtZW50KCd0aCcsICdOYW1lJywge30sIHt3aWR0aDogJzE1MHB4JywgdGV4dEFsaWduOiAncmlnaHQnfSksXG4gICAgICAgICAgICAgICAgIHRpZXJOYW1lRmllbGRdKSxcblxuICAgICAgICAgICAgIG1ha2VFbGVtZW50KCd0cicsXG4gICAgICAgICAgICAgICAgW21ha2VFbGVtZW50KCd0aCcsICdQaW4gdG8gdG9wJyksXG4gICAgICAgICAgICAgICAgIHRpZXJQaW5uZWRUb2dnbGVdKSxcblxuICAgICAgICAgICAgIG1ha2VFbGVtZW50KCd0cicsXG4gICAgICAgICAgICAgICAgW21ha2VFbGVtZW50KCd0aCcsICdIZWlnaHQnKSxcbiAgICAgICAgICAgICAgICAgbWFrZUVsZW1lbnQoJ3RkJywgdGllckhlaWdodEZpZWxkKV0pLFxuXG4gICAgICAgICAgICBzdHlsZVJvdyxcbiAgICAgICAgICAgIGNvbG9yUm93LFxuICAgICAgICAgICAgcGx1c1N0cmFuZENvbG9yUm93LFxuICAgICAgICAgICAgbWludXNTdHJhbmRDb2xvclJvdyxcbiAgICAgICAgICAgIG1pblJvdyxcbiAgICAgICAgICAgIG1heFJvdyxcbiAgICAgICAgICAgIHF1YW50TGVhcFJvdyxcbiAgICAgICAgICAgIGJ1bXBSb3csXG4gICAgICAgICAgICBsYWJlbFJvdyxcbiAgICAgICAgICAgIHNlcU1pc21hdGNoUm93LFxuICAgICAgICAgICAgc2VxSW5zZXJ0Um93LFxuICAgICAgICAgICAgc2VxSWdub3JlUXVhbHNSb3dcbiAgICAgICAgICAgICBdKTtcblxuXG4gICAgICAgIHJlZnJlc2goKTtcblxuICAgICAgICB0aWVyRm9ybS5hcHBlbmRDaGlsZCh0aWVyVGFibGUpO1xuXG4gICAgICAgIHZhciByZXNldEJ1dHRvbiA9IG1ha2VFbGVtZW50KCdidXR0b24nLCAnUmVzZXQgdHJhY2snLCB7Y2xhc3NOYW1lOiAnYnRuJ30sIHttYXJnaW5MZWZ0OiAnYXV0bycsIG1hcmdpblJpZ2h0OiAnYXV0bycsIGRpc3BsYXk6ICdibG9jayd9KTtcbiAgICAgICAgcmVzZXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldikge1xuICAgICAgICAgICAgdGllci5zZXRDb25maWcoe30pO1xuICAgICAgICB9LCBmYWxzZSk7XG4gICAgICAgIHRpZXJGb3JtLmFwcGVuZENoaWxkKHJlc2V0QnV0dG9uKTtcblxuICAgICAgICB0aWVyTmFtZUZpZWxkLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgZnVuY3Rpb24oZXYpIHtcbiAgICAgICAgICAgIHRpZXIubWVyZ2VDb25maWcoe25hbWU6IHRpZXJOYW1lRmllbGQudmFsdWV9KTtcbiAgICAgICAgfSwgZmFsc2UpO1xuXG4gICAgICAgIHRpZXJQaW5uZWRUb2dnbGUuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZnVuY3Rpb24oZXYpIHtcbiAgICAgICAgICAgIHRpZXIubWVyZ2VDb25maWcoe3Bpbm5lZDogdGllclBpbm5lZFRvZ2dsZS5jaGVja2VkfSk7XG4gICAgICAgIH0sIGZhbHNlKTtcblxuICAgICAgICBmb3IgKHZhciBjaSA9IDA7IGNpIDwgdGllckNvbG9yRmllbGRzLmxlbmd0aDsgKytjaSkge1xuICAgICAgICAgICAgdGllckNvbG9yRmllbGRzW2NpXS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBjaGFuZ2VDb2xvciwgZmFsc2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGllclBsdXNDb2xvckZpZWxkLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGNoYW5nZUNvbG9yLCBmYWxzZSk7XG4gICAgICAgIHRpZXJNaW51c0NvbG9yRmllbGQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgY2hhbmdlQ29sb3IsIGZhbHNlKTtcblxuICAgICAgICBnbHlwaEZpZWxkLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgICAgICB2YXIgbnNzID0gbXV0YXRlU3R5bGVzaGVldChmdW5jdGlvbih0cykge1xuICAgICAgICAgICAgICAgIGlmIChnbHlwaEZpZWxkLnZhbHVlID09PSAnU0NBVFRFUicpIHtcbiAgICAgICAgICAgICAgICAgICAgdHMuU0NBVFRFUiA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHRzLmdseXBoID0gJ0RPVCc7XG4gICAgICAgICAgICAgICAgICAgIHRzLlNJWkUgPSAnMyc7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdHMuZ2x5cGggPSBnbHlwaEZpZWxkLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB0cy5TQ0FUVEVSID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzZXRTdHlsZUNvbG9ycyh0cyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRpZXIubWVyZ2VTdHlsZXNoZWV0KG5zcyk7XG4gICAgICAgIH0sIGZhbHNlKTtcblxuICAgICAgICB0aWVyTWluVG9nZ2xlLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgICAgICB2YXIgY29uZiA9IHtmb3JjZU1pbkR5bmFtaWM6ICF0aWVyTWluVG9nZ2xlLmNoZWNrZWR9O1xuICAgICAgICAgICAgdGllck1pbkZpZWxkLmRpc2FibGVkID0gIXRpZXJNaW5Ub2dnbGUuY2hlY2tlZDtcbiAgICAgICAgICAgIHZhciB4ID0gcGFyc2VGbG9hdCh0aWVyTWluRmllbGQudmFsdWUpO1xuICAgICAgICAgICAgaWYgKHRpZXJNaW5Ub2dnbGUuY2hlY2tlZCAmJiB0eXBlb2YoeCkgPT0gJ251bWJlcicgJiYgIWlzTmFOKHgpKVxuICAgICAgICAgICAgICAgIGNvbmYuZm9yY2VNaW4gPSBwYXJzZUZsb2F0KHgpO1xuICAgICAgICAgICAgdGllci5tZXJnZUNvbmZpZyhjb25mKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRpZXJNaW5GaWVsZC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgICAgICB2YXIgeCA9IHBhcnNlRmxvYXQodGllck1pbkZpZWxkLnZhbHVlKTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YoeCkgPT0gJ251bWJlcicgJiYgIWlzTmFOKHgpKVxuICAgICAgICAgICAgICAgIHRpZXIubWVyZ2VDb25maWcoe2ZvcmNlTWluOiB4fSk7XG4gICAgICAgIH0sIGZhbHNlKTtcblxuICAgICAgICB0aWVyTWF4VG9nZ2xlLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgICAgICB2YXIgY29uZiA9IHtmb3JjZU1heER5bmFtaWM6ICF0aWVyTWF4VG9nZ2xlLmNoZWNrZWR9O1xuICAgICAgICAgICAgdGllck1heEZpZWxkLmRpc2FibGVkID0gIXRpZXJNYXhUb2dnbGUuY2hlY2tlZDtcbiAgICAgICAgICAgIHZhciB4ID0gcGFyc2VGbG9hdCh0aWVyTWF4RmllbGQudmFsdWUpO1xuICAgICAgICAgICAgaWYgKHRpZXJNYXhUb2dnbGUuY2hlY2tlZCAmJiB0eXBlb2YoeCkgPT0gJ251bWJlcicgJiYgIWlzTmFOKHgpKVxuICAgICAgICAgICAgICAgIGNvbmYuZm9yY2VNYXggPSBwYXJzZUZsb2F0KHgpO1xuICAgICAgICAgICAgdGllci5tZXJnZUNvbmZpZyhjb25mKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRpZXJNYXhGaWVsZC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgICAgICB2YXIgeCA9IHBhcnNlRmxvYXQodGllck1heEZpZWxkLnZhbHVlKTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YoeCkgPT0gJ251bWJlcicgJiYgIWlzTmFOKHgpKVxuICAgICAgICAgICAgICAgIHRpZXIubWVyZ2VDb25maWcoe2ZvcmNlTWF4OiB4fSk7XG4gICAgICAgIH0sIGZhbHNlKTtcblxuICAgICAgICB0aWVySGVpZ2h0RmllbGQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBmdW5jdGlvbihldikge1xuICAgICAgICAgICAgdmFyIHggPSBwYXJzZUZsb2F0KHRpZXJIZWlnaHRGaWVsZC52YWx1ZSk7XG4gICAgICAgICAgICBpZiAodHlwZW9mKHgpID09ICdudW1iZXInICYmICFpc05hTih4KSlcbiAgICAgICAgICAgICAgICB0aWVyLm1lcmdlQ29uZmlnKHtoZWlnaHQ6IE1hdGgubWluKDUwMCwgeHwwKX0pO1xuICAgICAgICB9LCBmYWxzZSk7XG5cbiAgICAgICAgdmFyIHVwZGF0ZVF1YW50ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBxdWFudExlYXBUaHJlc2hGaWVsZC5kaXNhYmxlZCA9ICFxdWFudExlYXBUb2dnbGUuY2hlY2tlZDtcbiAgICAgICAgICAgIGlmIChxdWFudExlYXBUb2dnbGUuY2hlY2tlZCkge1xuICAgICAgICAgICAgICAgIHZhciB4ID0gcGFyc2VGbG9hdChxdWFudExlYXBUaHJlc2hGaWVsZC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZih4KSA9PSAnbnVtYmVyJyAmJiAhaXNOYU4oeCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGllci5tZXJnZUNvbmZpZyh7cXVhbnRMZWFwVGhyZXNob2xkOiBwYXJzZUZsb2F0KHF1YW50TGVhcFRocmVzaEZpZWxkLnZhbHVlKX0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGllci5tZXJnZUNvbmZpZyh7cXVhbnRMZWFwVGhyZXNob2xkOiBudWxsfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcXVhbnRMZWFwVG9nZ2xlLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgICAgICB1cGRhdGVRdWFudCgpO1xuICAgICAgICB9LCBmYWxzZSk7XG4gICAgICAgIHF1YW50TGVhcFRocmVzaEZpZWxkLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgZnVuY3Rpb24oZXYpIHtcbiAgICAgICAgICAgIHVwZGF0ZVF1YW50KCk7XG4gICAgICAgIH0sIGZhbHNlKTtcblxuICAgICAgICBsYWJlbFRvZ2dsZS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbihldikge1xuICAgICAgICAgICAgdmFyIG5zcyA9IG11dGF0ZVN0eWxlc2hlZXQoZnVuY3Rpb24oc3R5bGUpIHtcbiAgICAgICAgICAgICAgICBzdHlsZS5MQUJFTCA9IGxhYmVsVG9nZ2xlLmNoZWNrZWQgPyAneWVzJyA6ICdubyc7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRpZXIubWVyZ2VTdHlsZXNoZWV0KG5zcyk7XG4gICAgICAgIH0sIGZhbHNlKTtcbiAgICAgICAgYnVtcFRvZ2dsZS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbihldikge1xuICAgICAgICAgICAgdmFyIG5zcyA9IG11dGF0ZVN0eWxlc2hlZXQoZnVuY3Rpb24oc3R5bGUpIHtcbiAgICAgICAgICAgICAgICBzdHlsZS5CVU1QID0gYnVtcFRvZ2dsZS5jaGVja2VkID8gJ3llcycgOiAnbm8nO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aWVyLm1lcmdlU3R5bGVzaGVldChuc3MpO1xuICAgICAgICB9LCBmYWxzZSk7XG4gICAgICAgIGJ1bXBMaW1pdC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgICAgICB2YXIgeCA9IHBhcnNlSW50KGJ1bXBMaW1pdC52YWx1ZSk7XG4gICAgICAgICAgICBpZiAodHlwZW9mKHgpID09ICdudW1iZXInICYmIHggPiAwKSB7XG4gICAgICAgICAgICAgICAgdGllci5tZXJnZUNvbmZpZyh7c3VidGllck1heDogeH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCBmYWxzZSk7XG5cblxuICAgICAgICB0aGlzLnNob3dUb29sUGFuZWwodGllckZvcm0pO1xuICAgICAgICB0aGlzLnNldFVpTW9kZSgndGllcicpO1xuXG4gICAgICAgIHRpZXIuYWRkVGllckxpc3RlbmVyKHJlZnJlc2gpO1xuXG4gICAgICAgIHZhciBjdXJyZW50U2NhbGUgPSB0aWVyLmJyb3dzZXIuc2NhbGU7XG4gICAgICAgIHRpZXIuYnJvd3Nlci5hZGRWaWV3TGlzdGVuZXIoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAodGllci5icm93c2VyLnNjYWxlICE9IGN1cnJlbnRTY2FsZSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRTY2FsZSA9IHRpZXIuYnJvd3Nlci5zY2FsZTtcbiAgICAgICAgICAgICAgICByZWZyZXNoKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZ2V0U2VxU3R5bGUoc3R5bGVzaGVldCkge1xuICAgIGZvciAodmFyIHNpID0gMDsgc2kgPCBzdHlsZXNoZWV0LnN0eWxlcy5sZW5ndGg7ICsrc2kpIHtcbiAgICAgICAgdmFyIHNzID0gc3R5bGVzaGVldC5zdHlsZXNbc2ldLnN0eWxlO1xuICAgICAgICBpZiAoc3MuZ2x5cGggPT09ICdfX1NFUVVFTkNFJykge1xuICAgICAgICAgICAgcmV0dXJuIHNzO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4iLCIvKiAtKi0gbW9kZTogamF2YXNjcmlwdDsgYy1iYXNpYy1vZmZzZXQ6IDQ7IGluZGVudC10YWJzLW1vZGU6IG5pbCAtKi0gKi9cblxuLy8gXG4vLyBEYWxsaWFuY2UgR2Vub21lIEV4cGxvcmVyXG4vLyAoYykgVGhvbWFzIERvd24gMjAwNi0yMDEwXG4vL1xuLy8gdGllci5qczogKHRyeSkgdG8gZW5jYXBzdWxhdGUgdGhlIGZ1bmN0aW9uYWxpdHkgb2YgYSBicm93c2VyIHRpZXIuXG4vL1xuXG5cInVzZSBzdHJpY3RcIjtcblxuaWYgKHR5cGVvZihyZXF1aXJlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB2YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XG4gICAgdmFyIG1ha2VFbGVtZW50ID0gdXRpbHMubWFrZUVsZW1lbnQ7XG4gICAgdmFyIHJlbW92ZUNoaWxkcmVuID0gdXRpbHMucmVtb3ZlQ2hpbGRyZW47XG4gICAgdmFyIHNoYWxsb3dDb3B5ID0gdXRpbHMuc2hhbGxvd0NvcHk7XG4gICAgdmFyIHB1c2huZXcgPSB1dGlscy5wdXNobmV3O1xuICAgIHZhciBtaW5pSlNPTmlmeSA9IHV0aWxzLm1pbmlKU09OaWZ5O1xuICAgIHZhciBhcnJheUluZGV4T2YgPSB1dGlscy5hcnJheUluZGV4T2Y7XG5cbiAgICB2YXIgZGFzID0gcmVxdWlyZSgnLi9kYXMnKTtcbiAgICB2YXIgREFTU3R5bGVzaGVldCA9IGRhcy5EQVNTdHlsZXNoZWV0O1xuICAgIHZhciBEQVNTdHlsZSA9IGRhcy5EQVNTdHlsZTtcblxuICAgIHZhciBzaGExID0gcmVxdWlyZSgnLi9zaGExJyk7XG4gICAgdmFyIGI2NF9zaGExID0gc2hhMS5iNjRfc2hhMTtcblxuICAgIHZhciBzdHlsZSA9IHJlcXVpcmUoJy4vc3R5bGUnKTtcbiAgICB2YXIgU3R5bGVGaWx0ZXIgPSBzdHlsZS5TdHlsZUZpbHRlcjtcbiAgICB2YXIgU3R5bGVGaWx0ZXJTZXQgPSBzdHlsZS5TdHlsZUZpbHRlclNldDtcblxuICAgIHZhciBzYyA9IHJlcXVpcmUoJy4vc291cmNlY29tcGFyZScpO1xuICAgIHZhciBzb3VyY2VEYXRhVVJJID0gc2Muc291cmNlRGF0YVVSSTtcblxuICAgIHZhciBQcm9taXNlID0gcmVxdWlyZSgnZXM2LXByb21pc2UnKS5Qcm9taXNlO1xuXG4gICAgdmFyIHNvcnRGZWF0dXJlcyA9IHJlcXVpcmUoJy4vZmVhdHVyZXMnKS5zb3J0RmVhdHVyZXM7XG59XG5cbnZhciBfX3RpZXJfaWRTZWVkID0gMDtcblxuZnVuY3Rpb24gRGFzVGllcihicm93c2VyLCBzb3VyY2UsIGNvbmZpZywgYmFja2dyb3VuZClcbntcbiAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZyB8fCB7fTtcbiAgICB0aGlzLmlkID0gJ3RpZXInICsgKCsrX190aWVyX2lkU2VlZCk7XG4gICAgdGhpcy5icm93c2VyID0gYnJvd3NlcjtcbiAgICB0aGlzLmRhc1NvdXJjZSA9IHNoYWxsb3dDb3B5KHNvdXJjZSk7XG4gICAgdGhpcy5iYWNrZ3JvdW5kID0gYmFja2dyb3VuZDtcblxuICAgIHRoaXMudmlld3BvcnQgPSBtYWtlRWxlbWVudCgnY2FudmFzJywgbnVsbCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt3aWR0aDogJycgKyAoKHRoaXMuYnJvd3Nlci5mZWF0dXJlUGFuZWxXaWR0aHwwKSArIDIwMDApLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogXCIzMFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAndmlld3BvcnRfMTJfNSd9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7cG9zaXRpb246ICdpbmxpbmUtYmxvY2snLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luOiAnMHB4JywgYm9yZGVyOiAnMHB4J30pO1xuICAgIHRoaXMudmlld3BvcnRIb2xkZXIgPSBtYWtlRWxlbWVudCgnZGl2JywgdGhpcy52aWV3cG9ydCwge2NsYXNzTmFtZTogJ3ZpZXdwb3J0LWhvbGRlcl8xMl81J30sIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7YmFja2dyb3VuZDogYmFja2dyb3VuZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogJzBweCcsIG1hcmdpbjogJzBweCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3JkZXI6ICcwcHgnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogJy0xMDAwcHgnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluSGVpZ2h0OiAnMjAwcHgnfSk7XG4gICAgdGhpcy5vdmVybGF5ID0gbWFrZUVsZW1lbnQoJ2NhbnZhcycsIG51bGwsXG4gICAgICAgICB7d2lkdGg6ICsgKCh0aGlzLmJyb3dzZXIuZmVhdHVyZVBhbmVsV2lkdGh8MCkpLCBcbiAgICAgICAgICBoZWlnaHQ6IFwiMzBcIixcbiAgICAgICAgICBjbGFzc05hbWU6ICd2aWV3cG9ydC1vdmVybGF5J30pO1xuXG4gICAgdGhpcy5ub3RpZmllciA9IG1ha2VFbGVtZW50KCdkaXYnLCAnJywge2NsYXNzTmFtZTogJ25vdGlmaWVyJ30pO1xuICAgIHRoaXMubm90aWZpZXJIb2xkZXIgPSBtYWtlRWxlbWVudCgnZGl2JywgdGhpcy5ub3RpZmllciwge2NsYXNzTmFtZTogJ25vdGlmaWVyLWhvbGRlcid9KTtcbiAgICB0aGlzLnF1YW50T3ZlcmxheSA9IG1ha2VFbGVtZW50KFxuICAgICAgICAnY2FudmFzJywgbnVsbCwgXG4gICAgICAgIHt3aWR0aDogJzUwJywgaGVpZ2h0OiBcIjU2XCIsXG4gICAgICAgICBjbGFzc05hbWU6ICdxdWFudC1vdmVybGF5J30pO1xuXG4gICAgdGhpcy5yZW1vdmVCdXR0b24gPSBtYWtlRWxlbWVudCgnaScsIG51bGwsIHtjbGFzc05hbWU6ICdmYSBmYS10aW1lcyd9KTtcbiAgICB0aGlzLmJ1bXBCdXR0b24gPSBtYWtlRWxlbWVudCgnaScsIG51bGwsIHtjbGFzc05hbWU6ICdmYSBmYS1wbHVzLWNpcmNsZSd9KTtcbiAgICB0aGlzLmxvYWRlckJ1dHRvbiA9IGJyb3dzZXIubWFrZUxvYWRlcigxNik7XG4gICAgdGhpcy5sb2FkZXJCdXR0b24uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICB0aGlzLmluZm9FbGVtZW50ID0gbWFrZUVsZW1lbnQoJ2RpdicsIHRoaXMuZGFzU291cmNlLmRlc2MsIHtjbGFzc05hbWU6ICd0cmFjay1sYWJlbC1pbmZvJ30pO1xuICAgIHRoaXMubmFtZUJ1dHRvbiA9IG1ha2VFbGVtZW50KCdkaXYnLCBbXSwge2NsYXNzTmFtZTogJ3RpZXItdGFiJ30pO1xuICAgIHRoaXMubmFtZUJ1dHRvbi5hcHBlbmRDaGlsZCh0aGlzLnJlbW92ZUJ1dHRvbik7XG4gICAgaWYgKHNvdXJjZS5wZW5uYW50KSB7XG4gICAgICAgIHRoaXMubmFtZUJ1dHRvbi5hcHBlbmRDaGlsZChtYWtlRWxlbWVudCgnaW1nJywgbnVsbCwge3NyYzogc291cmNlLnBlbm5hbnQsIHdpZHRoOiAnMTYnLCBoZWlnaHQ6ICcxNid9KSlcbiAgICB9IGVsc2UgaWYgKHNvdXJjZS5tYXBwaW5nKSB7XG4gICAgICAgIHZhciB2ZXJzaW9uID0gbnVsbDtcbiAgICAgICAgaWYgKHRoaXMuYnJvd3Nlci5jaGFpbnNbc291cmNlLm1hcHBpbmddKVxuICAgICAgICAgICAgdmVyc2lvbiA9IHRoaXMuYnJvd3Nlci5jaGFpbnNbc291cmNlLm1hcHBpbmddLmNvb3Jkcy52ZXJzaW9uO1xuICAgICAgICBpZiAodmVyc2lvbilcbiAgICAgICAgICAgIHRoaXMubmFtZUJ1dHRvbi5hcHBlbmRDaGlsZChtYWtlRWxlbWVudCgnc3BhbicsICcnICsgdmVyc2lvbiwgbnVsbCwge2ZvbnRTaXplOiAnOHB0JywgYmFja2dyb3VuZDogJ2JsYWNrJywgY29sb3I6ICd3aGl0ZScsIHBhZGRpbmdMZWZ0OiAnM3B4JywgcGFkZGluZ1JpZ2h0OiAnM3B4JywgcGFkZGluZ1RvcDogJzFweCcsIHBhZGRpbmdCb3R0b206ICcxcHgnLCBtYXJnaW5MZWZ0OiAnMnB4JywgYm9yZGVyUmFkaXVzOiAnMTBweCd9KSk7XG4gICAgfVxuICAgIHRoaXMubmFtZUVsZW1lbnQgPSBtYWtlRWxlbWVudCgnc3BhbicsIHNvdXJjZS5uYW1lKTtcbiAgICB0aGlzLm5hbWVCdXR0b24uYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ3NwYW4nLCBbdGhpcy5uYW1lRWxlbWVudCwgdGhpcy5pbmZvRWxlbWVudF0sIHtjbGFzc05hbWU6ICd0cmFjay1uYW1lLWhvbGRlcid9KSk7XG4gICAgdGhpcy5uYW1lQnV0dG9uLmFwcGVuZENoaWxkKHRoaXMuYnVtcEJ1dHRvbik7XG4gICAgdGhpcy5uYW1lQnV0dG9uLmFwcGVuZENoaWxkKHRoaXMubG9hZGVyQnV0dG9uKTtcblxuICAgIHRoaXMubGFiZWwgPSBtYWtlRWxlbWVudCgnc3BhbicsXG4gICAgICAgW3RoaXMubmFtZUJ1dHRvbl0sXG4gICAgICAge2NsYXNzTmFtZTogJ2J0bi1ncm91cCB0cmFjay1sYWJlbCd9KTtcblxuICAgIHZhciBjbGFzc2VzID0gJ3RpZXInICsgKHNvdXJjZS5jbGFzc05hbWUgPyAnICcgKyBzb3VyY2UuY2xhc3NOYW1lIDogJycpO1xuICAgIHRoaXMucm93ID0gbWFrZUVsZW1lbnQoJ2RpdicsIFt0aGlzLnZpZXdwb3J0SG9sZGVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm92ZXJsYXksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucXVhbnRPdmVybGF5XSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y2xhc3NOYW1lOiBjbGFzc2VzfSk7XG5cbiAgICBpZiAoIWJhY2tncm91bmQpIHtcbiAgICAgICAgdGhpcy5yb3cuc3R5bGUuYmFja2dyb3VuZCA9ICdub25lJztcbiAgICB9XG5cbiAgICBpZiAoIWJyb3dzZXIubm9EZWZhdWx0TGFiZWxzKVxuICAgICAgICB0aGlzLnJvdy5hcHBlbmRDaGlsZCh0aGlzLmxhYmVsKTtcbiAgICB0aGlzLnJvdy5hcHBlbmRDaGlsZCh0aGlzLm5vdGlmaWVySG9sZGVyKTtcbiAgICBcbiAgICB0aGlzLmxheW91dEhlaWdodCA9IDI1O1xuICAgIHRoaXMuYnVtcGVkID0gdHJ1ZTtcbiAgICB0aGlzLnN0eWxlSWRTZWVkID0gMDtcbiAgICBpZiAoc291cmNlLnF1YW50TGVhcFRocmVzaG9sZCkge1xuICAgICAgICB0aGlzLnF1YW50TGVhcFRocmVzaG9sZCA9IHNvdXJjZS5xdWFudExlYXBUaHJlc2hvbGQ7XG4gICAgfVxuICAgIGlmICh0aGlzLmRhc1NvdXJjZS5jb2xsYXBzZVN1cGVyR3JvdXBzKSB7XG4gICAgICAgIHRoaXMuYnVtcGVkID0gZmFsc2U7XG4gICAgfVxuICAgIHRoaXMubGF5b3V0V2FzRG9uZSA9IGZhbHNlO1xuXG4gICAgaWYgKHNvdXJjZS5mZWF0dXJlSW5mb1BsdWdpbikge1xuICAgICAgICB0aGlzLmFkZEZlYXR1cmVJbmZvUGx1Z2luKHNvdXJjZS5mZWF0dXJlSW5mb1BsdWdpbik7XG4gICAgfVxuXG4gICAgdGhpcy5pbml0U291cmNlcygpO1xuXG4gICAgdmFyIHRoaXNCID0gdGhpcztcbiAgICBpZiAodGhpcy5mZWF0dXJlU291cmNlICYmIHRoaXMuZmVhdHVyZVNvdXJjZS5nZXREZWZhdWx0RklQcyAmJiAhc291cmNlLm5vU291cmNlRmVhdHVyZUluZm8pIHtcbiAgICAgICAgdGhpcy5mZWF0dXJlU291cmNlLmdldERlZmF1bHRGSVBzKGZ1bmN0aW9uKGZpcCkge1xuICAgICAgICAgICAgaWYgKGZpcClcbiAgICAgICAgICAgICAgICB0aGlzQi5hZGRGZWF0dXJlSW5mb1BsdWdpbihmaXApO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5mZWF0dXJlU291cmNlICYmIHRoaXMuZmVhdHVyZVNvdXJjZS5hZGRSZWFkaW5lc3NMaXN0ZW5lcikge1xuICAgICAgICB0aGlzLnJlYWRpbmVzc0xpc3RlbmVyID0gZnVuY3Rpb24ocmVhZHkpIHtcbiAgICAgICAgICAgIHRoaXNCLm5vdGlmeShyZWFkeSwgLTEpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmZlYXR1cmVTb3VyY2UuYWRkUmVhZGluZXNzTGlzdGVuZXIodGhpcy5yZWFkaW5lc3NMaXN0ZW5lcik7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZmVhdHVyZVNvdXJjZSAmJiB0aGlzLmZlYXR1cmVTb3VyY2UuYWRkQWN0aXZpdHlMaXN0ZW5lcikge1xuICAgICAgICB0aGlzLmFjdGl2aXR5TGlzdGVuZXIgPSBmdW5jdGlvbihidXN5KSB7XG4gICAgICAgICAgICBpZiAoYnVzeSA+IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzQi5sb2FkZXJCdXR0b24uc3R5bGUuZGlzcGxheSA9ICdpbmxpbmUtYmxvY2snO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzQi5sb2FkZXJCdXR0b24uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXNCLmJyb3dzZXIucGluZ0FjdGl2aXR5KCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZmVhdHVyZVNvdXJjZS5hZGRBY3Rpdml0eUxpc3RlbmVyKHRoaXMuYWN0aXZpdHlMaXN0ZW5lcik7XG4gICAgfVxuXG4gICAgdGhpcy5saXN0ZW5lcnMgPSBbXTtcbiAgICB0aGlzLmZlYXR1cmVzTG9hZGVkTGlzdGVuZXJzID0gW107XG4gICAgdGhpcy5maXJzdFJlbmRlclByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB0aGlzLl9yZXNvbHZlRmlyc3RSZW5kZXJQcm9taXNlID0gcmVzb2x2ZSk7XG59XG5cbkRhc1RpZXIucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAodGhpcy5mZWF0dXJlU291cmNlLnJlbW92ZVJlYWRpbmVzc0xpc3RlbmVyKSB7XG4gICAgICAgIHRoaXMuZmVhdHVyZVNvdXJjZS5yZW1vdmVSZWFkaW5lc3NMaXN0ZW5lcih0aGlzLnJlYWRpbmVzc0xpc3RlbmVyKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuZmVhdHVyZVNvdXJjZS5yZW1vdmVBY3Rpdml0eUxpc3RlbmVyKSB7XG4gICAgICAgIHRoaXMuZmVhdHVyZVNvdXJjZS5yZW1vdmVBY3Rpdml0eUxpc3RlbmVyKHRoaXMuYWN0aXZpdHlMaXN0ZW5lcik7XG4gICAgfVxufVxuXG5EYXNUaWVyLnByb3RvdHlwZS5zZXRCYWNrZ3JvdW5kID0gZnVuY3Rpb24oYikge1xuICAgIHRoaXMuYmFja2dyb3VuZCA9IGI7XG4gICAgdGhpcy52aWV3cG9ydEhvbGRlci5zdHlsZS5iYWNrZ3JvdW5kID0gYjtcbn1cblxuRGFzVGllci5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5pZDtcbn1cblxuRGFzVGllci5wcm90b3R5cGUuYWRkRmVhdHVyZUluZm9QbHVnaW4gPSBmdW5jdGlvbihwKSB7XG4gICAgaWYgKCF0aGlzLmZlYXR1cmVJbmZvUGx1Z2lucykgXG4gICAgICAgIHRoaXMuZmVhdHVyZUluZm9QbHVnaW5zID0gW107XG4gICAgdGhpcy5mZWF0dXJlSW5mb1BsdWdpbnMucHVzaChwKTtcbn1cblxuRGFzVGllci5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciB0aWVyID0gdGhpcztcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBcbiAgICAgICAgaWYgKHRpZXIuZGFzU291cmNlLnN0eWxlKSB7XG4gICAgICAgICAgICB0aWVyLnNldFN0eWxlc2hlZXQoe3N0eWxlczogdGllci5kYXNTb3VyY2Uuc3R5bGV9KTtcbiAgICAgICAgICAgIHJlc29sdmUodGllcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aWVyLnN0YXR1cyA9ICdGZXRjaGluZyBzdHlsZXNoZWV0JztcbiAgICAgICAgICAgIHRpZXIuZmV0Y2hTdHlsZXNoZWV0KGZ1bmN0aW9uKHNzLCBlcnIpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyIHx8ICFzcykge1xuICAgICAgICAgICAgICAgICAgICB0aWVyLmVycm9yID0gJ05vIHN0eWxlc2hlZXQnO1xuICAgICAgICAgICAgICAgICAgICB2YXIgc3MgPSBuZXcgREFTU3R5bGVzaGVldCgpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGVmU3R5bGUgPSBuZXcgREFTU3R5bGUoKTtcbiAgICAgICAgICAgICAgICAgICAgZGVmU3R5bGUuZ2x5cGggPSAnQk9YJztcbiAgICAgICAgICAgICAgICAgICAgZGVmU3R5bGUuQkdDT0xPUiA9ICdibHVlJztcbiAgICAgICAgICAgICAgICAgICAgZGVmU3R5bGUuRkdDT0xPUiA9ICdibGFjayc7XG4gICAgICAgICAgICAgICAgICAgIHNzLnB1c2hTdHlsZSh7dHlwZTogJ2RlZmF1bHQnfSwgbnVsbCwgZGVmU3R5bGUpO1xuICAgICAgICAgICAgICAgICAgICB0aWVyLnNldFN0eWxlc2hlZXQoc3MpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRpZXIuc2V0U3R5bGVzaGVldChzcyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzcy5nZW5lSGludCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGllci5kYXNTb3VyY2UuY29sbGFwc2VTdXBlckdyb3VwcyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aWVyLmJ1bXBlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGllci51cGRhdGVMYWJlbCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRpZXIuX3VwZGF0ZUZyb21Db25maWcoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSh0aWVyKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSk7XG59XG5cbkRhc1RpZXIucHJvdG90eXBlLnNldFN0eWxlc2hlZXQgPSBmdW5jdGlvbihzcykge1xuICAgIHRoaXMuYmFzZVN0eWxlc2hlZXQgPSBzaGFsbG93Q29weShzcyk7XG4gICAgZm9yICh2YXIgc2kgPSAwOyBzaSA8IHRoaXMuYmFzZVN0eWxlc2hlZXQuc3R5bGVzLmxlbmd0aDsgKytzaSkge1xuICAgICAgICB2YXIgc2ggPSB0aGlzLmJhc2VTdHlsZXNoZWV0LnN0eWxlc1tzaV0gPSBzaGFsbG93Q29weSh0aGlzLmJhc2VTdHlsZXNoZWV0LnN0eWxlc1tzaV0pO1xuICAgICAgICBzaC5fbWV0aG9kUkUgPSBzaC5fbGFiZWxSRSA9IHNoLl90eXBlUkUgPSBudWxsO1xuICAgICAgICBzaC5zdHlsZSA9IHNoYWxsb3dDb3B5KHNoLnN0eWxlKTtcbiAgICAgICAgc2guc3R5bGUuaWQgPSAnc3R5bGUnICsgKCsrdGhpcy5zdHlsZUlkU2VlZCk7XG4gICAgfVxuICAgIHRoaXMuYmFzZVN0eWxlc2hlZXRWYWxpZGl0eSA9IGI2NF9zaGExKG1pbmlKU09OaWZ5KHRoaXMuYmFzZVN0eWxlc2hlZXQpKTtcbiAgICB0aGlzLl91cGRhdGVGcm9tQ29uZmlnKCk7XG59XG5cbkRhc1RpZXIucHJvdG90eXBlLmdldFNvdXJjZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmZlYXR1cmVTb3VyY2U7XG59XG5cbkRhc1RpZXIucHJvdG90eXBlLmdldERlc2lyZWRUeXBlcyA9IGZ1bmN0aW9uKHNjYWxlKSB7XG4gICAgdmFyIHNmcyA9IHRoaXMuZ2V0QWN0aXZlU3R5bGVGaWx0ZXJzKHNjYWxlKTtcbiAgICBpZiAoc2ZzKVxuICAgICAgICByZXR1cm4gc2ZzLnR5cGVMaXN0KCk7XG59XG5cbkRhc1RpZXIucHJvdG90eXBlLmdldEFjdGl2ZVN0eWxlRmlsdGVycyA9IGZ1bmN0aW9uKHNjYWxlKSB7XG4gICAgdmFyIHNzU2NhbGUgPSB0aGlzLmJyb3dzZXIuem9vbUZvckN1cnJlbnRTY2FsZSgpO1xuXG4gICAgaWYgKHRoaXMuc3R5bGVzaGVldCkge1xuICAgICAgICB2YXIgc3R5bGVzID0gbmV3IFN0eWxlRmlsdGVyU2V0KCk7XG4gICAgICAgIHZhciBzcyA9IHRoaXMuc3R5bGVzaGVldC5zdHlsZXM7XG4gICAgICAgIGZvciAodmFyIHNpID0gMDsgc2kgPCBzcy5sZW5ndGg7ICsrc2kpIHtcbiAgICAgICAgICAgIHZhciBzaCA9IHNzW3NpXTtcbiAgICAgICAgICAgIGlmICghc2guem9vbSB8fCBzaC56b29tID09IHNzU2NhbGUpIHtcbiAgICAgICAgICAgICAgICBzdHlsZXMuYWRkKG5ldyBTdHlsZUZpbHRlcihzaC50eXBlLCBzaC5tZXRob2QsIHNoLmxhYmVsKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN0eWxlcztcbiAgICB9XG59XG5cbkRhc1RpZXIucHJvdG90eXBlLm5lZWRzU2VxdWVuY2UgPSBmdW5jdGlvbihzY2FsZSkge1xuICAgIHZhciBzb3VyY2VDb25maWdOZWVkc1NlcSA9IGZ1bmN0aW9uKHMpIHtcbiAgICAgICAgaWYgKHMuYmFtVVJJIHx8IHMuYmFtQmxvYiB8fCBzLmJ3Z1VSSSB8fCBzLmJ3Z0Jsb2IpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9IGVsc2UgaWYgKHMub3ZlcmxheSkge1xuICAgICAgICAgICAgcmV0dXJuIHMub3ZlcmxheS5zb21lKHNvdXJjZUNvbmZpZ05lZWRzU2VxKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLnNlcXVlbmNlU291cmNlICYmIHNjYWxlIDwgNSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGVsc2UgaWYgKHNvdXJjZUNvbmZpZ05lZWRzU2VxKHRoaXMuZGFzU291cmNlKSAmJiBzY2FsZSA8IDIwKSB7XG4gICAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cblxuRGFzVGllci5wcm90b3R5cGUuc2V0RmVhdHVyZXMgPSBmdW5jdGlvbihjaHIsIGNvdmVyYWdlLCBzY2FsZSwgZmVhdHVyZXMsIHNlcXVlbmNlKSB7XG4gICAgdGhpcy5jdXJyZW50RmVhdHVyZXMgPSBmZWF0dXJlcztcbiAgICB0aGlzLmN1cnJlbnRTZXF1ZW5jZSA9IHNlcXVlbmNlOyAgICBcbiAgICB0aGlzLmtub3duQ2hyID0gY2hyO1xuICAgIHRoaXMua25vd25Db3ZlcmFnZSA9IGNvdmVyYWdlO1xuICAgIFxuXG4gICAgLy8gb25seSBub3RpZnkgZmVhdHVyZXMgbG9hZGVkLCBpZiB0aGV5IGFyZSB2YWxpZFxuICAgIGlmIChmZWF0dXJlcykge1xuICAgICAgICBzb3J0RmVhdHVyZXModGhpcyk7XG4gICAgICAgIHRoaXMubm90aWZ5RmVhdHVyZXNMb2FkZWQoKTtcbiAgICB9XG59XG5cblxuRGFzVGllci5wcm90b3R5cGUuZHJhdyA9IGZ1bmN0aW9uKCkge1xuICAgIGNvbnNvbGUubG9nKFwiVXNlIGJyb3dzZXIuZ2V0VGllclJlbmRlcmVyKHRpZXIpLmRyYXdUaWVyKHRpZXIpXCIpO1xufVxuXG5EYXNUaWVyLnByb3RvdHlwZS5maW5kTmV4dEZlYXR1cmUgPSBmdW5jdGlvbihjaHIsIHBvcywgZGlyLCBmZWRnZSwgY2FsbGJhY2spIHtcbiAgICBpZiAodGhpcy5xdWFudExlYXBUaHJlc2hvbGQpIHtcbiAgICAgICAgdmFyIHdpZHRoID0gdGhpcy5icm93c2VyLnZpZXdFbmQgLSB0aGlzLmJyb3dzZXIudmlld1N0YXJ0ICsgMTtcbiAgICAgICAgcG9zID0gKHBvcyArICAoKHdpZHRoICogZGlyKSAvIDIpKXwwXG4gICAgICAgIHRoaXMuZmVhdHVyZVNvdXJjZS5xdWFudEZpbmROZXh0RmVhdHVyZShjaHIsIHBvcywgZGlyLCB0aGlzLnF1YW50TGVhcFRocmVzaG9sZCwgY2FsbGJhY2spO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICh0aGlzLmtub3duQ292ZXJhZ2UgJiYgcG9zID49IHRoaXMua25vd25Db3ZlcmFnZS5taW4oKSAmJiBwb3MgPD0gdGhpcy5rbm93bkNvdmVyYWdlLm1heCgpKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5jdXJyZW50RmVhdHVyZXMpIHtcbiAgICAgICAgICAgICAgICB2YXIgYmVzdEZlYXR1cmUgPSBudWxsO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGZpID0gMDsgZmkgPCB0aGlzLmN1cnJlbnRGZWF0dXJlcy5sZW5ndGg7ICsrZmkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGYgPSB0aGlzLmN1cnJlbnRGZWF0dXJlc1tmaV07XG4gICAgICAgICAgICAgICAgICAgIGlmICghZi5taW4gfHwgIWYubWF4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoZi5wYXJlbnRzICYmIGYucGFyZW50cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoZGlyIDwgMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZlZGdlID09IDEgJiYgZi5tYXggPj0gcG9zICYmIGYubWluIDwgcG9zKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFiZXN0RmVhdHVyZSB8fCBmLm1pbiA+IGJlc3RGZWF0dXJlLm1pbiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZi5taW4gPT0gYmVzdEZlYXR1cmUubWluICYmIGYubWF4IDwgYmVzdEZlYXR1cmUubWF4KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZXN0RmVhdHVyZSA9IGY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChmLm1heCA8IHBvcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghYmVzdEZlYXR1cmUgfHwgZi5tYXggPiBiZXN0RmVhdHVyZS5tYXggfHwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChmLm1heCA9PSBiZXN0RmVhdHVyZS5tYXggJiYgZi5taW4gPCBiZXN0RmVhdHVyZS5taW4pIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChmLm1pbiA9PSBiZXN0RmVhdHVyZS5tbWluICYmIGJlc3RGZWF0dXJlLm1heCA+PSBwb3MpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlc3RGZWF0dXJlID0gZjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZlZGdlID09IDEgJiYgZi5taW4gPD0gcG9zICYmIGYubWF4ID4gcG9zKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFiZXN0RmVhdHVyZSB8fCBmLm1heCA8IGJlc3RGZWF0dXJlLm1heCB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZi5tYXggPT0gYmVzdEZlYXR1cmUubWF4ICYmIGYubWluID4gYmVzdEZlYXR1cmUubWluKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZXN0RmVhdHVyZSA9IGY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChmLm1pbiA+IHBvcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghYmVzdEZlYXR1cmUgfHwgZi5taW4gPCBiZXN0RmVhdHVyZS5taW4gfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGYubWluID09IGJlc3RGZWF0dXJlLm1pbiAmJiBmLm1heCA+IGJlc3RGZWF0dXJlLm1heCkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGYubWF4ID09IGJlc3RGZWF0dXJlLm1heCAmJiBiZXN0RmVhdHVyZS5taW4gPD0gcG9zKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZXN0RmVhdHVyZSA9IGY7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChiZXN0RmVhdHVyZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soYmVzdEZlYXR1cmUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZGlyIDwgMCkge1xuICAgICAgICAgICAgICAgICAgICBwb3MgPSB0aGlzLmJyb3dzZXIua25vd25TcGFjZS5taW47XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcG9zID0gdGhpcy5icm93c2VyLmtub3duU3BhY2UubWF4O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMudHJ5U291cmNlRk5GKGNociwgcG9zLCBkaXIsIGNhbGxiYWNrKTtcbiAgICB9XG59XG5cbkRhc1RpZXIucHJvdG90eXBlLnRyeVNvdXJjZUZORiA9IGZ1bmN0aW9uKGNociwgcG9zLCBkaXIsIGNhbGxiYWNrKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHRoaXMuZmVhdHVyZVNvdXJjZS5maW5kTmV4dEZlYXR1cmUoY2hyLCBwb3MsIGRpciwgZnVuY3Rpb24oZmVhdHVyZSkge1xuICAgICAgICBpZiAoIWZlYXR1cmUpXG4gICAgICAgICAgICBjYWxsYmFjayhmZWF0dXJlKTtcblxuICAgICAgICB2YXIgc3MgPSBzZWxmLmJyb3dzZXIuZ2V0U2VxdWVuY2VTb3VyY2UoKTtcbiAgICAgICAgaWYgKCFzcykgLy8gV2UncmUgcHJvYmFibHkgaW4gdHJvdWJsZSwgYnV0IHJldHVybiBhbnl3YXkuXG4gICAgICAgICAgICBjYWxsYmFjayhmZWF0dXJlKVxuXG4gICAgICAgIHNzLmdldFNlcUluZm8oZmVhdHVyZS5zZWdtZW50LCBmdW5jdGlvbihzaSkge1xuICAgICAgICAgICAgaWYgKHNpKVxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGZlYXR1cmUpO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHNlbGYudHJ5U291cmNlRk5GKGZlYXR1cmUuc2VnbWVudCwgZGlyID4gMCA/IDEwMDAwMDAwMDAwIDogMCwgZGlyLCBjYWxsYmFjayk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxuXG5cbkRhc1RpZXIucHJvdG90eXBlLnVwZGF0ZUxhYmVsID0gZnVuY3Rpb24oKSB7XG4gICB0aGlzLmJ1bXBCdXR0b24uY2xhc3NOYW1lID0gdGhpcy5idW1wZWQgPyAnZmEgZmEtbWludXMtY2lyY2xlJyA6ICdmYSBmYS1wbHVzLWNpcmNsZSc7XG4gICBpZiAodGhpcy5kYXNTb3VyY2UuY29sbGFwc2VTdXBlckdyb3Vwcykge1xuICAgICAgICB0aGlzLmJ1bXBCdXR0b24uc3R5bGUuZGlzcGxheSA9ICdpbmxpbmUtYmxvY2snO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuYnVtcEJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgIH1cbn1cblxuRGFzVGllci5wcm90b3R5cGUudXBkYXRlSGVpZ2h0ID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5jdXJyZW50SGVpZ2h0ID0gTWF0aC5tYXgoTWF0aC5tYXgodGhpcy5sYXlvdXRIZWlnaHQsIHRoaXMubGFiZWwuY2xpZW50SGVpZ2h0ICsgMiksIHRoaXMuYnJvd3Nlci5taW5UaWVySGVpZ2h0KTtcbiAgICB0aGlzLnJvdy5zdHlsZS5oZWlnaHQgPSAnJyArIHRoaXMuY3VycmVudEhlaWdodCArICdweCc7XG4gICAgdGhpcy5icm93c2VyLnVwZGF0ZUhlaWdodCgpO1xuIH1cblxuXG5EYXNUaWVyLnByb3RvdHlwZS5kcmF3T3ZlcmxheSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciB0ID0gdGhpcztcbiAgICB2YXIgYiA9IHRoaXMuYnJvd3NlcjtcbiAgICB2YXIgcmV0aW5hID0gYi5yZXRpbmEgJiYgd2luZG93LmRldmljZVBpeGVsUmF0aW8gPiAxO1xuICAgIFxuICAgIHQub3ZlcmxheS5oZWlnaHQgPSB0LnZpZXdwb3J0LmhlaWdodDtcbiAgICB0Lm92ZXJsYXkud2lkdGggPSByZXRpbmEgPyBiLmZlYXR1cmVQYW5lbFdpZHRoICogMiA6IGIuZmVhdHVyZVBhbmVsV2lkdGg7XG5cbiAgICB2YXIgZyA9IHQub3ZlcmxheS5nZXRDb250ZXh0KCcyZCcpO1xuICAgIGlmIChyZXRpbmEpIHtcbiAgICAgICAgZy5zY2FsZSgyLCAyKTtcbiAgICB9XG4gICAgXG4gICAgdmFyIG9yaWdpbiA9IGIudmlld1N0YXJ0O1xuICAgIHZhciB2aXNTdGFydCA9IGIudmlld1N0YXJ0O1xuICAgIHZhciB2aXNFbmQgPSBiLnZpZXdFbmQ7XG5cbiAgICBpZiAodGhpcy5vdmVybGF5TGFiZWxDYW52YXMpIHtcbiAgICAgICAgdmFyIG9mZnNldCA9ICgodGhpcy5nbHlwaENhY2hlT3JpZ2luIC0gdGhpcy5icm93c2VyLnZpZXdTdGFydCkqdGhpcy5icm93c2VyLnNjYWxlKTtcbiAgICAgICAgZy5zYXZlKCk7XG4gICAgICAgIGcudHJhbnNsYXRlKG9mZnNldCwgMCk7XG4gICAgICAgIHZhciBkcmF3U3RhcnQgPSAtb2Zmc2V0ICsgMjtcbiAgICAgICAgaWYgKHRoaXMuZGFzU291cmNlLnRpZXJHcm91cClcbiAgICAgICAgICAgIGRyYXdTdGFydCArPSAxNTtcbiAgICAgICAgdGhpcy5vdmVybGF5TGFiZWxDYW52YXMuZHJhdyhnLCBkcmF3U3RhcnQsIGIuZmVhdHVyZVBhbmVsV2lkdGgtb2Zmc2V0KTtcbiAgICAgICAgZy5yZXN0b3JlKCk7XG4gICAgfVxuXG4gICAgZm9yICh2YXIgaGkgPSAwOyBoaSA8IGIuaGlnaGxpZ2h0cy5sZW5ndGg7ICsraGkpIHtcbiAgICAgICAgdmFyIGggPSBiLmhpZ2hsaWdodHNbaGldO1xuICAgICAgICBpZiAoKChoLmNociA9PT0gYi5jaHIpIHx8IChoLmNociA9PT0gKCdjaHInICsgYi5jaHIpKSkgJiYgaC5taW4gPCB2aXNFbmQgJiYgaC5tYXggPiB2aXNTdGFydCkge1xuICAgICAgICAgICAgZy5nbG9iYWxBbHBoYSA9IGIuZGVmYXVsdEhpZ2hsaWdodEFscGhhO1xuICAgICAgICAgICAgZy5maWxsU3R5bGUgPSBiLmRlZmF1bHRIaWdobGlnaHRGaWxsO1xuICAgICAgICAgICAgZy5maWxsUmVjdCgoaC5taW4gLSBvcmlnaW4pICogYi5zY2FsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgMCxcbiAgICAgICAgICAgICAgICAgICAgICAgKGgubWF4IC0gaC5taW4pICogYi5zY2FsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgdC5vdmVybGF5LmhlaWdodCk7XG4gICAgICAgIH1cbiAgICB9IFxuXG4gICAgLy8gdC5vb3JpZ2luID0gYi52aWV3U3RhcnQ7XG4gICAgdC5vdmVybGF5LnN0eWxlLndpZHRoID0gYi5mZWF0dXJlUGFuZWxXaWR0aDtcbiAgICB0Lm92ZXJsYXkuc3R5bGUuaGVpZ2h0ID0gdC52aWV3cG9ydC5zdHlsZS5oZWlnaHQ7XG4gICAgdC5vdmVybGF5LnN0eWxlLmxlZnQgPSAnMHB4Jztcbn1cblxuXG5EYXNUaWVyLnByb3RvdHlwZS51cGRhdGVTdGF0dXMgPSBmdW5jdGlvbihzdGF0dXMpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgaWYgKHN0YXR1cykge1xuICAgICAgICB0aGlzLnN0YXR1cyA9IHN0YXR1cztcbiAgICAgICAgdGhpcy5fbm90aWZpZXJUb1N0YXR1cygpO1xuICAgICAgICB2YXIgc2QgPSBzb3VyY2VEYXRhVVJJKHRoaXMuZGFzU291cmNlKTtcbiAgICAgICAgaWYgKHdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbCA9PT0gJ2h0dHBzOicgJiYgc291cmNlRGF0YVVSSSh0aGlzLmRhc1NvdXJjZSkuaW5kZXhPZignaHR0cDonKSA9PSAwICYmICF0aGlzLmNoZWNrZWRIVFRQKSB7XG4gICAgICAgICAgICB0aGlzLmNoZWNrZWRIVFRQID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuYnJvd3Nlci5jYW5GZXRjaFBsYWluSFRUUCgpLnRoZW4oXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24oY2FuKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghY2FuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLndhcm5IVFRQID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX25vdGlmaWVyVG9TdGF0dXMoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICBpZiAodGhpcy5zdGF0dXMpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhdHVzID0gbnVsbFxuICAgICAgICAgICAgdGhpcy5fbm90aWZpZXJUb1N0YXR1cygpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5EYXNUaWVyLnByb3RvdHlwZS5ub3RpZnkgPSBmdW5jdGlvbihtZXNzYWdlLCB0aW1lb3V0KSB7XG4gICAgaWYgKHR5cGVvZih0aW1lb3V0KSAhPT0gJ251bWJlcicpXG4gICAgICAgIHRpbWVvdXQgPSAyMDAwO1xuXG4gICAgaWYgKHRoaXMubm90aWZpZXJGYWRlVGltZW91dCkge1xuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5ub3RpZmllckZhZGVUaW1lb3V0KTtcbiAgICAgICAgdGhpcy5ub3RpZmllckZhZGVUaW1lb3V0ID0gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAobWVzc2FnZSkge1xuICAgICAgICB0aGlzLl9ub3RpZmllck9uKG1lc3NhZ2UpO1xuICAgICAgICBpZiAodGltZW91dCA+IDApIHtcbiAgICAgICAgICAgIHZhciB0aGlzQiA9IHRoaXM7XG4gICAgICAgICAgICB0aGlzLm5vdGlmaWVyRmFkZVRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHRoaXNCLl9ub3RpZmllclRvU3RhdHVzKCk7XG4gICAgICAgICAgICB9LCB0aW1lb3V0KTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX25vdGlmaWVyVG9TdGF0dXMoKTtcbiAgICB9XG59XG5cbkRhc1RpZXIucHJvdG90eXBlLl9ub3RpZmllck9uID0gZnVuY3Rpb24obWVzc2FnZSwgd2FybkhUVFApIHtcbiAgICByZW1vdmVDaGlsZHJlbih0aGlzLm5vdGlmaWVyKTtcbiAgICBpZiAod2FybkhUVFApIHtcbiAgICAgICAgdGhpcy5ub3RpZmllci5hcHBlbmRDaGlsZChcbiAgICAgICAgICAgIG1ha2VFbGVtZW50KFxuICAgICAgICAgICAgICAgICdzcGFuJyxcbiAgICAgICAgICAgICAgICBbbWFrZUVsZW1lbnQoJ2EnLCAnW0hUVFAgV2FybmluZ10gJywge2hyZWY6IHRoaXMuYnJvd3Nlci5odHRwV2FybmluZ1VSTCwgdGFyZ2V0OiBcIl9ibGFua1wifSksXG4gICAgICAgICAgICAgICAgIG1lc3NhZ2VdXG4gICAgICAgICAgICApXG4gICAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5ub3RpZmllci50ZXh0Q29udGVudCA9IG1lc3NhZ2U7XG4gICAgfVxuICAgIHRoaXMubm90aWZpZXIuc3R5bGUub3BhY2l0eSA9IDAuODtcbn1cblxuRGFzVGllci5wcm90b3R5cGUuX25vdGlmaWVyT2ZmID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5ub3RpZmllci5zdHlsZS5vcGFjaXR5ID0gMDtcbn1cblxuRGFzVGllci5wcm90b3R5cGUuX25vdGlmaWVyVG9TdGF0dXMgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAodGhpcy5zdGF0dXMpIHtcbiAgICAgICAgdGhpcy5fbm90aWZpZXJPbih0aGlzLnN0YXR1cywgdGhpcy53YXJuSFRUUClcbiAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9ub3RpZmllck9mZigpO1xuICAgIH1cbn1cblxuRGFzVGllci5wcm90b3R5cGUuc2V0Q29uZmlnID0gZnVuY3Rpb24oY29uZmlnKSB7XG4gICAgdGhpcy5jb25maWcgPSBjb25maWcgfHwge307XG4gICAgdGhpcy5fdXBkYXRlRnJvbUNvbmZpZygpO1xuICAgIHRoaXMubm90aWZ5VGllckxpc3RlbmVycygpO1xufVxuXG5EYXNUaWVyLnByb3RvdHlwZS5tZXJnZVN0eWxlc2hlZXQgPSBmdW5jdGlvbihuZXdTdHlsZSkge1xuICAgIHRoaXMubWVyZ2VDb25maWcoe1xuICAgICAgICBzdHlsZXNoZWV0OiBuZXdTdHlsZSwgXG4gICAgICAgIHN0eWxlc2hlZXRWYWxpZGl0eTogdGhpcy5iYXNlU3R5bGVzaGVldFZhbGlkaXR5XG4gICAgfSk7XG59XG5cbkRhc1RpZXIucHJvdG90eXBlLm1lcmdlQ29uZmlnID0gZnVuY3Rpb24obmV3Q29uZmlnKSB7XG4gICAgZm9yICh2YXIgayBpbiBuZXdDb25maWcpIHtcbiAgICAgICAgdGhpcy5jb25maWdba10gPSBuZXdDb25maWdba107XG4gICAgfVxuICAgIHRoaXMuX3VwZGF0ZUZyb21Db25maWcoKTtcbiAgICB0aGlzLm5vdGlmeVRpZXJMaXN0ZW5lcnMoKTtcbn1cblxuRGFzVGllci5wcm90b3R5cGUuX3VwZGF0ZUZyb21Db25maWcgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgbmVlZHNSZWZyZXNoID0gZmFsc2U7XG4gICAgdmFyIG5lZWRzUmVvcmRlciA9IGZhbHNlO1xuXG4gICAgaWYgKHR5cGVvZiB0aGlzLmNvbmZpZy5uYW1lID09PSAnc3RyaW5nJylcbiAgICAgICAgdGhpcy5uYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IHRoaXMuY29uZmlnLm5hbWU7XG4gICAgZWxzZVxuICAgICAgICB0aGlzLm5hbWVFbGVtZW50LnRleHRDb250ZW50ID0gdGhpcy5kYXNTb3VyY2UubmFtZTtcblxuICAgIHZhciB3YW50ZWRIZWlnaHQgPSB0aGlzLmNvbmZpZy5oZWlnaHQgfHwgdGhpcy5kYXNTb3VyY2UuZm9yY2VIZWlnaHQ7XG4gICAgaWYgKHdhbnRlZEhlaWdodCAhPSB0aGlzLmZvcmNlSGVpZ2h0KSB7XG4gICAgICAgIHRoaXMuZm9yY2VIZWlnaHQgPSB3YW50ZWRIZWlnaHQ7XG4gICAgICAgIG5lZWRzUmVmcmVzaCA9IHRydWU7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZm9yY2VNaW5EeW5hbWljICE9IHRoaXMuY29uZmlnLmZvcmNlTWluRHluYW1pYykge1xuICAgICAgICB0aGlzLmZvcmNlTWluRHluYW1pYyA9IHRoaXMuY29uZmlnLmZvcmNlTWluRHluYW1pYztcbiAgICAgICAgbmVlZHNSZWZyZXNoID0gdHJ1ZTtcbiAgICB9XG5cbiAgICB2YXIgZm9yY2VNaW4gPSB0aGlzLmNvbmZpZy5mb3JjZU1pbiAhPSB1bmRlZmluZWQgPyB0aGlzLmNvbmZpZy5mb3JjZU1pbiA6IHRoaXMuZGFzU291cmNlLmZvcmNlTWluO1xuICAgIGlmICh0aGlzLmZvcmNlTWluICE9IGZvcmNlTWluKSB7XG4gICAgICAgIHRoaXMuZm9yY2VNaW4gPSBmb3JjZU1pbjtcbiAgICAgICAgbmVlZHNSZWZyZXNoID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5mb3JjZU1heER5bmFtaWMgIT0gdGhpcy5jb25maWcuZm9yY2VNYXhEeW5hbWljKSB7XG4gICAgICAgIHRoaXMuZm9yY2VNYXhEeW5hbWljID0gdGhpcy5jb25maWcuZm9yY2VNYXhEeW5hbWljO1xuICAgICAgICBuZWVkc1JlZnJlc2ggPSB0cnVlO1xuICAgIH1cbiAgICBcbiAgICB2YXIgZm9yY2VNYXggPSB0aGlzLmNvbmZpZy5mb3JjZU1heCAhPSB1bmRlZmluZWQgPyB0aGlzLmNvbmZpZy5mb3JjZU1heCA6IHRoaXMuZGFzU291cmNlLmZvcmNlTWF4O1xuICAgIGlmICh0aGlzLmZvcmNlTWF4ICE9IGZvcmNlTWF4KSB7XG4gICAgICAgIHRoaXMuZm9yY2VNYXggPSBmb3JjZU1heDtcbiAgICAgICAgbmVlZHNSZWZyZXNoID0gdHJ1ZTtcbiAgICB9XG5cbiAgICB2YXIgcXVhbnRMZWFwVGhyZXNob2xkID0gbnVsbDtcbiAgICBpZiAodGhpcy5jb25maWcucXVhbnRMZWFwVGhyZXNob2xkICE9PSB1bmRlZmluZWQpXG4gICAgICAgIHF1YW50TGVhcFRocmVzaG9sZCA9IHRoaXMuY29uZmlnLnF1YW50TGVhcFRocmVzaG9sZDtcbiAgICBlbHNlIGlmICh0aGlzLmRhc1NvdXJjZS5xdWFudExlYXBUaHJlc2hvbGQgIT09IHVuZGVmaW5lZClcbiAgICAgICAgcXVhbnRMZWFwVGhyZXNob2xkID0gdGhpcy5kYXNTb3VyY2UucXVhbnRMZWFwVGhyZXNob2xkO1xuICAgIGlmIChxdWFudExlYXBUaHJlc2hvbGQgIT0gdGhpcy5xdWFudExlYXBUaHJlc2hvbGQpIHtcbiAgICAgICAgdGhpcy5xdWFudExlYXBUaHJlc2hvbGQgPSBxdWFudExlYXBUaHJlc2hvbGQ7XG4gICAgICAgIG5lZWRzUmVmcmVzaCA9IHRydWU7XG4gICAgfVxuICAgIFxuICAgIC8vIFBvc3NpYmxlIEZJWE1FIC0tIGFyZSB0aGVyZSBjYXNlcyB3aGVyZSBzdHlsZSBJRHMgbmVlZCB0byBiZSByZWFzc2lnbmVkP1xuICAgIHZhciBzdHlsZXNoZWV0ID0gbnVsbDtcbiAgICBpZiAodGhpcy5jb25maWcuc3R5bGVzaGVldFZhbGlkaXR5ID09IHRoaXMuYmFzZVN0eWxlc2hlZXRWYWxpZGl0eSlcbiAgICAgICAgc3R5bGVzaGVldCA9IHRoaXMuY29uZmlnLnN0eWxlc2hlZXQ7XG4gICAgc3R5bGVzaGVldCA9IHN0eWxlc2hlZXQgfHwgdGhpcy5iYXNlU3R5bGVzaGVldDtcbiAgICBpZiAodGhpcy5zdHlsZXNoZWV0ICE9PSBzdHlsZXNoZWV0KSB7XG4gICAgICAgIHRoaXMuc3R5bGVzaGVldCA9IHN0eWxlc2hlZXQ7XG4gICAgICAgIG5lZWRzUmVmcmVzaCA9IHRydWU7XG4gICAgfVxuXG4gICAgdmFyIHdhbnRlZFBpbm5lZCA9IHRoaXMuY29uZmlnLnBpbm5lZCAhPT0gdW5kZWZpbmVkID8gdGhpcy5jb25maWcucGlubmVkIDogdGhpcy5kYXNTb3VyY2UucGlubmVkO1xuICAgIGlmICh3YW50ZWRQaW5uZWQgIT09IHRoaXMucGlubmVkKSB7XG4gICAgICAgIHRoaXMucGlubmVkID0gd2FudGVkUGlubmVkO1xuICAgICAgICBuZWVkc1Jlb3JkZXIgPSB0cnVlO1xuICAgIH1cblxuICAgIHZhciB3YW50ZWRTdWJ0aWVyTWF4ID0gKHR5cGVvZih0aGlzLmNvbmZpZy5zdWJ0aWVyTWF4ID09PSAnbnVtYmVyJykgPyBcbiAgICAgICAgdGhpcy5jb25maWcuc3VidGllck1heCA6IHRoaXMuZGFzU291cmNlLnN1YnRpZXJNYXggfHwgdGhpcy5icm93c2VyLmRlZmF1bHRTdWJ0aWVyTWF4KTtcbiAgICBpZiAod2FudGVkU3VidGllck1heCAhPSB0aGlzLnN1YnRpZXJNYXgpIHtcbiAgICAgICAgdGhpcy5zdWJ0aWVyTWF4ID0gd2FudGVkU3VidGllck1heDtcbiAgICAgICAgbmVlZHNSZWZyZXNoID0gdHJ1ZTtcbiAgICB9XG5cbiAgICB2YXIgd2FudGVkQnVtcGVkO1xuICAgIGlmICh0aGlzLmNvbmZpZy5idW1wZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB3YW50ZWRCdW1wZWQgPSB0aGlzLmNvbmZpZy5idW1wZWQ7XG4gICAgfSBlbHNlIGlmICh0aGlzLmRhc1NvdXJjZS5idW1wZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB3YW50ZWRCdW1wZWQgPSB0aGlzLmRhc1NvdXJjZS5idW1wZWQ7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgd2FudGVkQnVtcGVkID0gdGhpcy5kYXNTb3VyY2UuY29sbGFwc2VTdXBlckdyb3VwcyA/IGZhbHNlIDogdHJ1ZTtcbiAgICB9XG4gICAgaWYgKHdhbnRlZEJ1bXBlZCAhPT0gdGhpcy5idW1wZWQpIHtcbiAgICAgICAgdGhpcy5idW1wZWQgPSB3YW50ZWRCdW1wZWQ7XG4gICAgICAgIG5lZWRzUmVmcmVzaCA9IHRydWU7XG4gICAgICAgIHRoaXMudXBkYXRlTGFiZWwoKTtcbiAgICB9XG5cbiAgICBpZiAobmVlZHNSZWZyZXNoKVxuICAgICAgICB0aGlzLnNjaGVkdWxlUmVkcmF3KCk7XG5cbiAgICBpZiAobmVlZHNSZW9yZGVyKVxuICAgICAgICB0aGlzLmJyb3dzZXIucmVvcmRlclRpZXJzKCk7XG59XG5cbkRhc1RpZXIucHJvdG90eXBlLnNjaGVkdWxlUmVkcmF3ID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKCF0aGlzLmN1cnJlbnRGZWF0dXJlcylcbiAgICAgICAgcmV0dXJuO1xuICAgIFxuICAgIHZhciB0aWVyID0gdGhpcztcblxuICAgIGlmICghdGhpcy5yZWRyYXdUaW1lb3V0KSB7XG4gICAgICAgIHRoaXMucmVkcmF3VGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzb3J0RmVhdHVyZXModGllcik7ICAgLy8gU29tZSByZW5kZXIgYWN0aW9ucyBtdXRhdGUgdGhlIHJlc3VsdHMgb2YgdGhpcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyA9PiBuZWVkIHRvIHJlLXJ1biBiZWZvcmUgcmVmcmVzaGluZy5cbiAgICAgICAgICAgIHZhciByZW5kZXJlciA9IHRpZXIuYnJvd3Nlci5nZXRUaWVyUmVuZGVyZXIodGllcik7XG4gICAgICAgICAgICByZW5kZXJlci5kcmF3VGllcih0aWVyKTtcbiAgICAgICAgICAgIHRpZXIucmVkcmF3VGltZW91dCA9IG51bGw7XG4gICAgICAgIH0sIDEwKTtcbiAgICB9XG59XG5EYXNUaWVyLnByb3RvdHlwZS5jbGVhclRpZXJMaXN0ZW5lcnMgPSBmdW5jdGlvbigpIHtcblx0dGhpcy5saXN0ZW5lcnMgPSBbXTtcbn1cblxuXG5EYXNUaWVyLnByb3RvdHlwZS5hZGRUaWVyTGlzdGVuZXIgPSBmdW5jdGlvbihsKSB7XG4gICAgdGhpcy5saXN0ZW5lcnMucHVzaChsKTtcbn1cblxuRGFzVGllci5wcm90b3R5cGUucmVtb3ZlVGllckxpc3RlbmVyID0gZnVuY3Rpb24obCkge1xuICAgIHZhciBpZHggPSBhcnJheUluZGV4T2YodGhpcy5saXN0ZW5lcnMsIGwpO1xuICAgIGlmIChpZHggPj0gMCkge1xuICAgICAgICB0aGlzLmxpc3RlbmVycy5zcGxpY2UoaWR4LCAxKTtcbiAgICB9XG59XG5cbkRhc1RpZXIucHJvdG90eXBlLm5vdGlmeVRpZXJMaXN0ZW5lcnMgPSBmdW5jdGlvbihjaGFuZ2UpIHtcbiAgICBmb3IgKHZhciBsaSA9IDA7IGxpIDwgdGhpcy5saXN0ZW5lcnMubGVuZ3RoOyArK2xpKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLmxpc3RlbmVyc1tsaV0oY2hhbmdlKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5icm93c2VyLm5vdGlmeVRpZXIoKTtcbn1cblxuRGFzVGllci5wcm90b3R5cGUuY2xlYXJGZWF0dXJlc0xvYWRlZExpc3RlbmVycyA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLmZlYXR1cmVzTG9hZGVkTGlzdGVuZXJzID0gW107XG59XG5cbkRhc1RpZXIucHJvdG90eXBlLmFkZEZlYXR1cmVzTG9hZGVkTGlzdGVuZXIgPSBmdW5jdGlvbihoYW5kbGVyKSB7XG4gICAgdGhpcy5mZWF0dXJlc0xvYWRlZExpc3RlbmVycy5wdXNoKGhhbmRsZXIpO1xufVxuXG5EYXNUaWVyLnByb3RvdHlwZS5yZW1vdmVGZWF0dXJlc0xvYWRlZExpc3RlbmVyID0gZnVuY3Rpb24oaGFuZGxlcikge1xuICAgIHZhciBpZHggPSBhcnJheUluZGV4T2YodGhpcy5mZWF0dXJlc0xvYWRlZExpc3RlbmVycywgaGFuZGxlcik7XG4gICAgaWYgKGlkeCA+PSAwKSB7XG4gICAgICAgIHRoaXMuZmVhdHVyZXNMb2FkZWRMaXN0ZW5lcnMuc3BsaWNlKGlkeCwgMSk7XG4gICAgfVxufVxuXG5EYXNUaWVyLnByb3RvdHlwZS5ub3RpZnlGZWF0dXJlc0xvYWRlZCA9IGZ1bmN0aW9uKCkge1xuICAgIGZvciAodmFyIGxpID0gMDsgbGkgPCB0aGlzLmZlYXR1cmVzTG9hZGVkTGlzdGVuZXJzLmxlbmd0aDsgKytsaSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5mZWF0dXJlc0xvYWRlZExpc3RlbmVyc1tsaV0uY2FsbCh0aGlzKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbkRhc1RpZXIucHJvdG90eXBlLndhc1JlbmRlcmVkID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5fcmVzb2x2ZUZpcnN0UmVuZGVyUHJvbWlzZSgpO1xufVxuXG5pZiAodHlwZW9mKG1vZHVsZSkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgICAgIERhc1RpZXI6IERhc1RpZXJcbiAgICB9O1xuXG4gICAgLy8gSW1wb3J0ZWQgZm9yIHNpZGUgZWZmZWN0c1xuICAgIHZhciBmZCA9IHJlcXVpcmUoJy4vZmVhdHVyZS1kcmF3Jyk7XG59XG4iLCIvKiAtKi0gbW9kZTogamF2YXNjcmlwdDsgYy1iYXNpYy1vZmZzZXQ6IDQ7IGluZGVudC10YWJzLW1vZGU6IG5pbCAtKi0gKi9cblxuLy8gXG4vLyBEYWxsaWFuY2UgR2Vub21lIEV4cGxvcmVyXG4vLyAoYykgVGhvbWFzIERvd24gMjAwNi0yMDEwXG4vL1xuLy8gdHJhY2stYWRkZXIuanNcbi8vXG5cblwidXNlIHN0cmljdFwiO1xuXG5pZiAodHlwZW9mKHJlcXVpcmUpICE9PSAndW5kZWZpbmVkJykge1xuICAgIHZhciBicm93c2VyID0gcmVxdWlyZSgnLi9jYnJvd3NlcicpO1xuICAgIHZhciBCcm93c2VyID0gYnJvd3Nlci5Ccm93c2VyO1xuXG4gICAgdmFyIHNjID0gcmVxdWlyZSgnLi9zb3VyY2Vjb21wYXJlJyk7XG4gICAgdmFyIHNvdXJjZXNBcmVFcXVhbCA9IHNjLnNvdXJjZXNBcmVFcXVhbDtcblxuICAgIHZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcbiAgICB2YXIgbWFrZUVsZW1lbnQgPSB1dGlscy5tYWtlRWxlbWVudDtcbiAgICB2YXIgcmVtb3ZlQ2hpbGRyZW4gPSB1dGlscy5yZW1vdmVDaGlsZHJlbjtcbiAgICB2YXIgT2JzZXJ2ZWQgPSB1dGlscy5PYnNlcnZlZDtcblxuICAgIHZhciB0aHViID0gcmVxdWlyZSgnLi90aHViJyk7XG4gICAgdmFyIFRIVUJfQ09NUEFSRSA9IHRodWIuVEhVQl9DT01QQVJFO1xuICAgIHZhciBjb25uZWN0VHJhY2tIdWIgPSB0aHViLmNvbm5lY3RUcmFja0h1YjtcblxuICAgIHZhciBkb211aSA9IHJlcXVpcmUoJy4vZG9tdWknKTtcbiAgICB2YXIgbWFrZVRyZWVUYWJsZVNlY3Rpb24gPSBkb211aS5tYWtlVHJlZVRhYmxlU2VjdGlvbjtcblxuICAgIHZhciBwcm9iZVJlc291cmNlID0gcmVxdWlyZSgnLi9wcm9iZScpLnByb2JlUmVzb3VyY2U7XG5cblxuICAgIC8vIE1vc3Qgb2YgdGhpcyBjb3VsZCBkaXNhcHBlYXIgaWYgd2UgbGVhdmUgYWxsIHByb2JpbmcgdG8gdGhlIHByb2JlIG1vZHVsZS4uLlxuICAgIHZhciBiaW4gPSByZXF1aXJlKCcuL2JpbicpO1xuICAgIHZhciBVUkxGZXRjaGFibGUgPSBiaW4uVVJMRmV0Y2hhYmxlO1xuICAgIHZhciBCbG9iRmV0Y2hhYmxlID0gYmluLkJsb2JGZXRjaGFibGU7XG4gICAgdmFyIHJlYWRJbnQgPSBiaW4ucmVhZEludDtcblxuICAgIHZhciBsaDN1dGlscyA9IHJlcXVpcmUoJy4vbGgzdXRpbHMnKTtcbiAgICB2YXIgdW5iZ3pmID0gbGgzdXRpbHMudW5iZ3pmO1xuXG4gICAgdmFyIGJhbSA9IHJlcXVpcmUoJy4vYmFtJyk7XG4gICAgdmFyIEJBTV9NQUdJQyA9IGJhbS5CQU1fTUFHSUM7XG4gICAgdmFyIEJBSV9NQUdJQyA9IGJhbS5CQUlfTUFHSUM7XG5cbiAgICB2YXIgdGJpID0gcmVxdWlyZSgnLi90YWJpeCcpO1xuICAgIHZhciBUQUJJWF9NQUdJQyA9IHRiaS5UQUJJWF9NQUdJQztcblxuICAgIHZhciBkYXMgPSByZXF1aXJlKCcuL2RhcycpO1xuICAgIHZhciBEQVNTb3VyY2UgPSBkYXMuREFTU291cmNlO1xuICAgIHZhciBEQVNTZWdtZW50ID0gZGFzLkRBU1NlZ21lbnQ7XG4gICAgdmFyIERBU1JlZ2lzdHJ5ID0gZGFzLkRBU1JlZ2lzdHJ5O1xuICAgIHZhciBjb29yZHNNYXRjaCA9IGRhcy5jb29yZHNNYXRjaDtcblxuICAgIHZhciBFbmNvZGVGZXRjaGFibGUgPSByZXF1aXJlKCcuL2VuY29kZScpLkVuY29kZUZldGNoYWJsZTtcbn1cblxuQnJvd3Nlci5wcm90b3R5cGUuY3VycmVudGx5QWN0aXZlID0gZnVuY3Rpb24oc291cmNlKSB7XG4gICAgZm9yICh2YXIgdGkgPSAwOyB0aSA8IHRoaXMudGllcnMubGVuZ3RoOyArK3RpKSB7XG4gICAgICAgIGlmIChzb3VyY2VzQXJlRXF1YWwodGhpcy50aWVyc1t0aV0uZGFzU291cmNlLCBzb3VyY2UpKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudGllcnNbdGldO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5cbkJyb3dzZXIucHJvdG90eXBlLm1ha2VCdXR0b24gPSBmdW5jdGlvbihuYW1lLCB0b29sdGlwKSB7XG4gICAgdmFyIHJlZ0J1dHRvbiA9IG1ha2VFbGVtZW50KCdhJywgbmFtZSwge2hyZWY6ICcjJ30pO1xuICAgIGlmICh0b29sdGlwKSB7XG4gICAgICAgIHRoaXMubWFrZVRvb2x0aXAocmVnQnV0dG9uLCB0b29sdGlwKTtcbiAgICB9XG4gICAgcmV0dXJuIG1ha2VFbGVtZW50KCdsaScsIHJlZ0J1dHRvbik7XG59XG5cbmZ1bmN0aW9uIGFjdGl2YXRlQnV0dG9uKGFkZE1vZGVCdXR0b25zLCB3aGljaCkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYWRkTW9kZUJ1dHRvbnMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgdmFyIGIgPSBhZGRNb2RlQnV0dG9uc1tpXTtcbiAgICAgICAgaWYgKGIgPT09IHdoaWNoKSB7XG4gICAgICAgICAgICBiLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYi5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuQnJvd3Nlci5wcm90b3R5cGUuc2hvd1RyYWNrQWRkZXIgPSBmdW5jdGlvbihldikge1xuICAgIGlmICh0aGlzLnVpTW9kZSA9PT0gJ2FkZCcpIHtcbiAgICAgICAgdGhpcy5oaWRlVG9vbFBhbmVsKCk7XG4gICAgICAgIHRoaXMuc2V0VWlNb2RlKCdub25lJyk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgdGhpc0IgPSB0aGlzO1xuXG4gICAgdmFyIHBvcHVwID0gbWFrZUVsZW1lbnQoJ2RpdicsIG51bGwsIHtjbGFzc05hbWU6ICdkYWxsaWFuY2UnfSAsIHt3aWR0aDogJzEwMCUnLCBkaXNwbGF5OiAnaW5saW5lLWJsb2NrJywgYm94U2l6aW5nOiAnYm9yZGVyLWJveCcsIE1vekJveFNpemluZzogJ2JvcmRlci1ib3gnLCB2ZXJ0aWNhbEFsaWduOiAndG9wJywgcGFkZGluZ1JpZ2h0OiAnMTVweCd9KTtcblxuICAgIHZhciBhZGRNb2RlQnV0dG9ucyA9IFtdO1xuICAgIHZhciBtYWtlU3RhYiwgbWFrZVN0YWJPYnNlcnZlcjtcblxuXG4gICAgaWYgKCF0aGlzLm5vUmVnaXN0cnlUYWJzKSB7XG4gICAgICAgIHZhciByZWdCdXR0b24gPSB0aGlzLm1ha2VCdXR0b24oJ1JlZ2lzdHJ5JywgJ0Jyb3dzZSBjb21wYXRpYmxlIGRhdGFzb3VyY2VzIGZyb20gdGhlIERBUyByZWdpc3RyeScpO1xuICAgICAgICBhZGRNb2RlQnV0dG9ucy5wdXNoKHJlZ0J1dHRvbik7XG4gICAgICAgIFxuICAgICAgICBmb3IgKHZhciBtIGluIHRoaXMubWFwcGFibGVTb3VyY2VzKSB7XG4gICAgICAgICAgICB2YXIgbWYgID0gZnVuY3Rpb24obW0pIHtcbiAgICAgICAgICAgICAgICB2YXIgbWFwQnV0dG9uID0gdGhpc0IubWFrZUJ1dHRvbih0aGlzQi5jaGFpbnNbbW1dLnNyY1RhZywgJ0Jyb3dzZSBkYXRhc291cmNlcyBtYXBwZWQgZnJvbSAnICsgdGhpc0IuY2hhaW5zW21tXS5zcmNUYWcpO1xuICAgICAgICAgICAgICAgIGFkZE1vZGVCdXR0b25zLnB1c2gobWFwQnV0dG9uKTtcbiAgICAgICAgICAgICAgICBtYXBCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldikge1xuICAgICAgICAgICAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpOyBldi5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgYWN0aXZhdGVCdXR0b24oYWRkTW9kZUJ1dHRvbnMsIG1hcEJ1dHRvbik7XG4gICAgICAgICAgICAgICAgICAgIG1ha2VTdGFiKHRoaXNCLm1hcHBhYmxlU291cmNlc1ttbV0sIG1tKTtcbiAgICAgICAgICAgICAgICB9LCBmYWxzZSk7XG4gICAgICAgICAgICB9OyBtZihtKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHZhciBncm91cGVkRGVmYXVsdHMgPSB7fTtcbiAgICBmb3IgKHZhciBzaSA9IDA7IHNpIDwgdGhpcy5kZWZhdWx0U291cmNlcy5sZW5ndGg7ICsrc2kpIHtcbiAgICAgICAgdmFyIHMgPSB0aGlzLmRlZmF1bHRTb3VyY2VzW3NpXTtcbiAgICAgICAgdmFyIGcgPSBzLmdyb3VwIHx8ICdEZWZhdWx0cyc7XG4gICAgICAgIGlmIChncm91cGVkRGVmYXVsdHNbZ10pIHtcbiAgICAgICAgICAgIGdyb3VwZWREZWZhdWx0c1tnXS5wdXNoKHMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZ3JvdXBlZERlZmF1bHRzW2ddID0gW3NdO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuXG4gICAgdmFyIG1ha2VIdWJCdXR0b24gPSBmdW5jdGlvbih0ZGIpIHtcbiAgICAgICAgdmFyIGh1YiA9IHRkYi5odWI7XG4gICAgICAgIHZhciBodWJNZW51QnV0dG9uID0gbWFrZUVsZW1lbnQoJ2knLCBudWxsLCB7Y2xhc3NOYW1lOiAnZmEgZmEtbGlzdC1hbHQnfSwge2N1cnNvcjogJ2NvbnRleHQtbWVudSd9KTtcbiAgICAgICAgdmFyIGxhYmVsID0gaHViLmFsdExhYmVsIHx8IGh1Yi5zaG9ydExhYmVsIHx8ICdVbmtub3duJztcbiAgICAgICAgaWYgKHRkYi5tYXBwaW5nKVxuICAgICAgICAgICAgbGFiZWwgPSBsYWJlbCArICcgKCcgKyB0ZGIuZ2Vub21lICsgJyknO1xuICAgICAgICB2YXIgaGJDb250ZW50ID0gbWFrZUVsZW1lbnQoJ3NwYW4nLCBbbGFiZWwsICcgJywgaHViTWVudUJ1dHRvbl0pO1xuICAgICAgICB2YXIgaHViQnV0dG9uID0gdGhpc0IubWFrZUJ1dHRvbihoYkNvbnRlbnQsIGh1Yi5sb25nTGFiZWwpO1xuICAgICAgICBodWJCdXR0b24uaHViID0gdGRiO1xuICAgICAgICBhZGRNb2RlQnV0dG9ucy5wdXNoKGh1YkJ1dHRvbik7XG4gICAgICAgIFxuICAgICAgICBodWJCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldikge1xuICAgICAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTsgZXYuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICBhY3RpdmF0ZUJ1dHRvbihhZGRNb2RlQnV0dG9ucywgaHViQnV0dG9uKTtcbiAgICAgICAgICAgIHJlbW92ZUNoaWxkcmVuKHN0YWJIb2xkZXIpO1xuICAgICAgICAgICAgdmFyIGxvYWRlciA9IHRoaXNCLm1ha2VMb2FkZXIoMjQpO1xuICAgICAgICAgICAgbG9hZGVyLnN0eWxlLm1hcmdpbkxlZnQgPSAnYXV0byc7XG4gICAgICAgICAgICBsb2FkZXIuc3R5bGUubWFyZ2luUmlnaHQgPSAnYXV0byc7XG4gICAgICAgICAgICBsb2FkZXIuc3R5bGUubWFyZ2luVG9wID0gJzEwMHB4JztcbiAgICAgICAgICAgIHN0YWJIb2xkZXIuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ2RpdicsIGxvYWRlciwgbnVsbCwge3RleHRBbGlnbjogJ2NlbnRlcid9KSk7XG5cbiAgICAgICAgICAgIHJlZnJlc2hCdXR0b24uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgIGFkZEJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgY2FuQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cbiAgICAgICAgICAgIHRkYi5nZXRUcmFja3MoZnVuY3Rpb24odHJhY2tzLCBlcnIpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIG1ha2VIdWJTdGFiKHRyYWNrcyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSwgZmFsc2UpO1xuXG4gICAgICAgIGh1Yk1lbnVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldikge1xuICAgICAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTsgZXYuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZhciByZW1vdmVIdWJJdGVtID0gbWFrZUVsZW1lbnQoJ2xpJywgbWFrZUVsZW1lbnQoJ2EnLCAnUmVtb3ZlIGh1YicpKTtcbiAgICAgICAgICAgIHZhciBhbGxPbkl0ZW0gPSBtYWtlRWxlbWVudCgnbGknLCAgbWFrZUVsZW1lbnQoJ2EnLCAnRW5hYmxlIGFsbCcpKTtcbiAgICAgICAgICAgIHZhciBhbGxPZmZJdGVtID0gbWFrZUVsZW1lbnQoJ2xpJywgIG1ha2VFbGVtZW50KCdhJywgJ0Rpc2FibGUgYWxsJykpO1xuICAgICAgICAgICAgdmFyIGh1Yk1lbnUgPSBtYWtlRWxlbWVudCgndWwnLCBbcmVtb3ZlSHViSXRlbSwgYWxsT25JdGVtLCBhbGxPZmZJdGVtXSwge2NsYXNzTmFtZTogJ2Ryb3Bkb3duLW1lbnUnfSwge2Rpc3BsYXk6ICdibG9jayd9KTtcblxuICAgICAgICAgICAgdmFyIG14ID0gIGV2LmNsaWVudFgsIG15ID0gZXYuY2xpZW50WTtcbiAgICAgICAgICAgIG14ICs9ICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdCB8fCBkb2N1bWVudC5ib2R5LnNjcm9sbExlZnQ7XG4gICAgICAgICAgICBteSArPSAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCB8fCBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcDtcblxuICAgICAgICAgICAgaHViTWVudS5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgICAgICAgICBodWJNZW51LnN0eWxlLnRvcCA9ICcnICsgKG15KzEwKSArICdweCc7XG4gICAgICAgICAgICBodWJNZW51LnN0eWxlLmxlZnQgPSAnJyArIChteC0zMCkgKyAncHgnO1xuICAgICAgICAgICAgdGhpc0IuaFBvcHVwSG9sZGVyLmFwcGVuZENoaWxkKGh1Yk1lbnUpO1xuXG4gICAgICAgICAgICB2YXIgY2xpY2tDYXRjaGVyID0gZnVuY3Rpb24oZXYpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnY2MnKTtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xpY2tDYXRjaGVyLCB0cnVlKTtcbiAgICAgICAgICAgICAgICB0aGlzQi5oUG9wdXBIb2xkZXIucmVtb3ZlQ2hpbGQoaHViTWVudSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNsaWNrQ2F0Y2hlciwgdHJ1ZSk7XG5cbiAgICAgICAgICAgIHJlbW92ZUh1Ykl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldikge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGhpID0gMDsgaGkgPCB0aGlzQi5odWJPYmplY3RzLmxlbmd0aDsgKytoaSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpc0IuaHViT2JqZWN0c1toaV0uYWJzVVJMID09IHRkYi5hYnNVUkwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNCLmh1Yk9iamVjdHMuc3BsaWNlKGhpLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvciAodmFyIGhpID0gMDsgaGkgPCB0aGlzQi5odWJzLmxlbmd0aDsgKytoaSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaGMgPSB0aGlzQi5odWJzW2hpXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBoYyA9PT0gJ3N0cmluZycpXG4gICAgICAgICAgICAgICAgICAgICAgICBoYyA9IHt1cmw6IGhjfTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGhjLnVybCA9PSB0ZGIuaHViLnVybCAmJiAhaGMuZ2Vub21lIHx8IGhjLmdlbm9tZSA9PSB0ZGIuZ2Vub21lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzQi5odWJzLnNwbGljZShoaSwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdGhpc0Iubm90aWZ5VGllcigpO1xuXG4gICAgICAgICAgICAgICAgbW9kZUJ1dHRvbkhvbGRlci5yZW1vdmVDaGlsZChodWJCdXR0b24pO1xuICAgICAgICAgICAgICAgIGFjdGl2YXRlQnV0dG9uKGFkZE1vZGVCdXR0b25zLCBhZGRIdWJCdXR0b24pO1xuICAgICAgICAgICAgICAgIHN3aXRjaFRvSHViQ29ubmVjdE1vZGUoKTtcbiAgICAgICAgICAgIH0sIGZhbHNlKTtcblxuXG4gICAgICAgICAgICBhbGxPbkl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldikge1xuICAgICAgICAgICAgICAgIHRkYi5nZXRUcmFja3MoZnVuY3Rpb24odHJhY2tzLCBlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgdGkgPSAwOyB0aSA8IHRyYWNrcy5sZW5ndGg7ICsrdGkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkcyA9IHRyYWNrc1t0aV0udG9EYWxsaWFuY2VTb3VyY2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpc0IuY3VycmVudGx5QWN0aXZlKGRzKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNCLmFkZFRpZXIoZHMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LCBmYWxzZSk7XG5cbiAgICAgICAgICAgIGFsbE9mZkl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldikge1xuICAgICAgICAgICAgICAgIHRkYi5nZXRUcmFja3MoZnVuY3Rpb24odHJhY2tzLCBlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgdGkgPSAwOyB0aSA8IHRyYWNrcy5sZW5ndGg7ICsrdGkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkcyA9IHRyYWNrc1t0aV0udG9EYWxsaWFuY2VTb3VyY2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzQi5jdXJyZW50bHlBY3RpdmUoZHMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc0IucmVtb3ZlVGllcihkcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sIGZhbHNlKTtcbiAgICAgICAgfSwgZmFsc2UpO1xuXG4gICAgICAgIHJldHVybiBodWJCdXR0b247XG4gICAgfVxuXG4gICAgdmFyIGZpcnN0RGVmQnV0dG9uID0gbnVsbDtcbiAgICB2YXIgZmlyc3REZWZTb3VyY2VzID0gbnVsbDtcbiAgICBmb3IgKHZhciBnIGluIGdyb3VwZWREZWZhdWx0cykge1xuICAgICAgICAoZnVuY3Rpb24oZywgZHMpIHtcbiAgICAgICAgICAgIHZhciBkZWZCdXR0b24gPSB0aGlzQi5tYWtlQnV0dG9uKGcsICdCcm93c2UgdGhlIGRlZmF1bHQgc2V0IG9mIGRhdGEgZm9yIHRoaXMgYnJvd3NlcicpO1xuICAgICAgICAgICAgZGVmQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXYpIHtcbiAgICAgICAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpOyBldi5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICBhY3RpdmF0ZUJ1dHRvbihhZGRNb2RlQnV0dG9ucywgZGVmQnV0dG9uKTtcbiAgICAgICAgICAgICAgICBtYWtlU3RhYihuZXcgT2JzZXJ2ZWQoZHMpKTtcbiAgICAgICAgICAgIH0sIGZhbHNlKTtcbiAgICAgICAgICAgIGFkZE1vZGVCdXR0b25zLnB1c2goZGVmQnV0dG9uKTtcblxuICAgICAgICAgICAgaWYgKCFmaXJzdERlZkJ1dHRvbiB8fCB0aGlzQi5kZWZhdWx0VHJhY2tBZGRlclRhYiAmJiB0aGlzQi5kZWZhdWx0VHJhY2tBZGRlclRhYiA9PSBnKSB7XG4gICAgICAgICAgICAgICAgZmlyc3REZWZCdXR0b24gPSBkZWZCdXR0b247XG4gICAgICAgICAgICAgICAgZmlyc3REZWZTb3VyY2VzID0gZHM7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKGcsIGdyb3VwZWREZWZhdWx0c1tnXSk7XG4gICAgfSAgIFxuICAgIHZhciBjdXN0QnV0dG9uID0gdGhpcy5tYWtlQnV0dG9uKCdEQVMnLCAnQWRkIGRhdGEgdXNpbmcgdGhlIERBUyBwcm90b2NvbCcpO1xuICAgIGFkZE1vZGVCdXR0b25zLnB1c2goY3VzdEJ1dHRvbik7XG4gICAgdmFyIGJpbkJ1dHRvbiA9IHRoaXMubWFrZUJ1dHRvbignRmlsZXMnLCAnQWRkIGRhdGEgZnJvbSBmaWxlcyBvbiBkaXNrIG9yIHRoZSB3ZWInKTtcbiAgICBhZGRNb2RlQnV0dG9ucy5wdXNoKGJpbkJ1dHRvbik7XG5cblxuICAgIGZvciAodmFyIGhpID0gMDsgaGkgPCB0aGlzLmh1Yk9iamVjdHMubGVuZ3RoOyArK2hpKSB7XG4gICAgICAgIHZhciBodWIgPSB0aGlzLmh1Yk9iamVjdHNbaGldO1xuICAgICAgICBtYWtlSHViQnV0dG9uKGh1Yik7XG4gICAgfVxuXG4gICAgdmFyIGFkZEh1YkJ1dHRvbiA9IHRoaXMubWFrZUJ1dHRvbignKycsICdDb25uZWN0IHRvIGEgbmV3IHRyYWNrLWh1YicpO1xuICAgIGFkZE1vZGVCdXR0b25zLnB1c2goYWRkSHViQnV0dG9uKTtcblxuXG4gICAgdmFyIG1vZGVCdXR0b25Ib2xkZXIgPSBtYWtlRWxlbWVudCgndWwnLCBhZGRNb2RlQnV0dG9ucywge2NsYXNzTmFtZTogJ25hdiBuYXYtdGFicyd9LCB7bWFyZ2luQm90dG9tOiAnMHB4J30pO1xuICAgIHBvcHVwLmFwcGVuZENoaWxkKG1vZGVCdXR0b25Ib2xkZXIpO1xuICAgIFxuICAgIHZhciBjdXN0VVJMLCBjdXN0TmFtZSwgY3VzdENTLCBjdXN0UXVhbnQsIGN1c3RGaWxlLCBjdXN0VXNlciwgY3VzdFBhc3M7XG4gICAgdmFyIGN1c3RvbU1vZGUgPSBmYWxzZTtcbiAgICB2YXIgZGF0YVRvRmluYWxpemUgPSBudWxsO1xuXG4gICAgdmFyIGFzZm9ybSA9IG1ha2VFbGVtZW50KCdmb3JtJywgbnVsbCwge30sIHtkaXNwbGF5OiAnaW5saW5lLWJsb2NrJywgd2lkdGg6ICcxMDAlJ30pO1xuICAgIGFzZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBmdW5jdGlvbihldikge1xuICAgICAgICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7IGV2LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBkb0FkZCgpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0sIHRydWUpOyBcbiAgICB2YXIgc3RhYkhvbGRlciA9IG1ha2VFbGVtZW50KCdkaXYnKTtcbiAgICBzdGFiSG9sZGVyLnN0eWxlLnBvc2l0aW9uID0gJ3JlbGF0aXZlJztcbiAgICBzdGFiSG9sZGVyLnN0eWxlLm92ZXJmbG93ID0gJ3Njcm9sbCc7XG4gICAgLy8gc3RhYkhvbGRlci5zdHlsZS5oZWlnaHQgPSAnNTAwcHgnO1xuICAgIGFzZm9ybS5hcHBlbmRDaGlsZChzdGFiSG9sZGVyKTtcblxuICAgIHZhciBfX21hcHBpbmc7XG4gICAgdmFyIF9fc291cmNlSG9sZGVyO1xuXG5cbiAgICBtYWtlU3RhYiA9IGZ1bmN0aW9uKG1zb3VyY2VzLCBtYXBwaW5nKSB7XG4gICAgICAgIHJlZnJlc2hCdXR0b24uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgYWRkQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIGNhbkJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICBpZiAoX19zb3VyY2VIb2xkZXIpIHtcbiAgICAgICAgICAgIF9fc291cmNlSG9sZGVyLnJlbW92ZUxpc3RlbmVyKG1ha2VTdGFiT2JzZXJ2ZXIpO1xuICAgICAgICB9XG4gICAgICAgIF9fbWFwcGluZyA9IG1hcHBpbmc7XG4gICAgICAgIF9fc291cmNlSG9sZGVyID0gbXNvdXJjZXM7XG4gICAgICAgIF9fc291cmNlSG9sZGVyLmFkZExpc3RlbmVyQW5kRmlyZShtYWtlU3RhYk9ic2VydmVyKTtcbiAgICB9XG5cbiAgICBtYWtlU3RhYk9ic2VydmVyID0gZnVuY3Rpb24obXNvdXJjZXMpIHtcbiAgICAgICAgY3VzdG9tTW9kZSA9IGZhbHNlO1xuICAgICAgICB2YXIgYnV0dG9ucyA9IFtdO1xuICAgICAgICByZW1vdmVDaGlsZHJlbihzdGFiSG9sZGVyKTtcbiAgICAgICAgaWYgKCFtc291cmNlcykge1xuICAgICAgICAgICAgc3RhYkhvbGRlci5hcHBlbmRDaGlsZChtYWtlRWxlbWVudCgncCcsICdEYWxsaWFuY2Ugd2FzIHVuYWJsZSB0byByZXRyaWV2ZSBkYXRhIHNvdXJjZSBpbmZvcm1hdGlvbiBmcm9tIHRoZSBEQVMgcmVnaXN0cnksIHBsZWFzZSB0cnkgYWdhaW4gbGF0ZXInKSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHZhciBzdGFiQm9keSA9IG1ha2VFbGVtZW50KCd0Ym9keScsIG51bGwsIHtjbGFzc05hbWU6ICd0YWJsZSB0YWJsZS1zdHJpcGVkIHRhYmxlLWNvbmRlbnNlZCd9LCB7d2lkdGg6ICcxMDAlJ30pO1xuICAgICAgICB2YXIgc3RhYiA9IG1ha2VFbGVtZW50KCd0YWJsZScsIHN0YWJCb2R5LCB7Y2xhc3NOYW1lOiAndGFibGUgdGFibGUtc3RyaXBlZCB0YWJsZS1jb25kZW5zZWQnfSwge3dpZHRoOiAnMTAwJScsIHRhYmxlTGF5b3V0OiAnZml4ZWQnfSk7IFxuICAgICAgICB2YXIgaWR4ID0gMDtcblxuICAgICAgICB2YXIgc291cmNlcyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1zb3VyY2VzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICBzb3VyY2VzLnB1c2gobXNvdXJjZXNbaV0pO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBzb3VyY2VzLnNvcnQoZnVuY3Rpb24oYSwgYikge1xuICAgICAgICAgICAgcmV0dXJuIGEubmFtZS50b0xvd2VyQ2FzZSgpLnRyaW0oKS5sb2NhbGVDb21wYXJlKGIubmFtZS50b0xvd2VyQ2FzZSgpLnRyaW0oKSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc291cmNlcy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgdmFyIHNvdXJjZSA9IHNvdXJjZXNbaV07XG4gICAgICAgICAgICB2YXIgciA9IG1ha2VFbGVtZW50KCd0cicpO1xuXG4gICAgICAgICAgICB2YXIgYmQgPSBtYWtlRWxlbWVudCgndGQnLCBudWxsLCB7fSwge3dpZHRoOiAnMzBweCd9KTtcbiAgICAgICAgICAgIGJkLnN0eWxlLnRleHRBbGlnbiA9ICdjZW50ZXInO1xuICAgICAgICAgICAgaWYgKCFzb3VyY2UucHJvcHMgfHwgc291cmNlLnByb3BzLmNvcnMpIHtcbiAgICAgICAgICAgICAgICB2YXIgYiA9IG1ha2VFbGVtZW50KCdpbnB1dCcpO1xuICAgICAgICAgICAgICAgIGIudHlwZSA9ICdjaGVja2JveCc7XG4gICAgICAgICAgICAgICAgYi5kYWxsaWFuY2Vfc291cmNlID0gc291cmNlO1xuICAgICAgICAgICAgICAgIGIuaWQgPSAnc291cmNlY2InICsgaTtcbiAgICAgICAgICAgICAgICBpZiAoX19tYXBwaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIGIuZGFsbGlhbmNlX21hcHBpbmcgPSBfX21hcHBpbmc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIGIuY2hlY2tlZCA9IHRoaXNCLmN1cnJlbnRseUFjdGl2ZShzb3VyY2UpO1xuICAgICAgICAgICAgICAgIGJkLmFwcGVuZENoaWxkKGIpO1xuICAgICAgICAgICAgICAgIGJ1dHRvbnMucHVzaChiKTtcbiAgICAgICAgICAgICAgICBiLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChldi50YXJnZXQuY2hlY2tlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpc0IuYWRkVGllcihldi50YXJnZXQuZGFsbGlhbmNlX3NvdXJjZSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzQi5yZW1vdmVUaWVyKGV2LnRhcmdldC5kYWxsaWFuY2Vfc291cmNlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBiZC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgnIScpKTtcbiAgICAgICAgICAgICAgICB0aGlzQi5tYWtlVG9vbHRpcChiZCwgbWFrZUVsZW1lbnQoJ3NwYW4nLCBbXCJUaGlzIGRhdGEgc291cmNlIGlzbid0IGFjY2Vzc2libGUgYmVjYXVzZSBpdCBkb2Vzbid0IHN1cHBvcnQgXCIsIG1ha2VFbGVtZW50KCdhJywgXCJDT1JTXCIsIHtocmVmOiAnaHR0cDovL3d3dy53My5vcmcvVFIvY29ycy8nfSksIFwiLlwiXSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgci5hcHBlbmRDaGlsZChiZCk7XG4gICAgICAgICAgICB2YXIgbGQgPSBtYWtlRWxlbWVudCgnbGFiZWwnLCBudWxsLCB7aHRtbEZvcjogJ3NvdXJjZWNiJyArIGl9KTtcbiAgICAgICAgICAgIGxkLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHNvdXJjZS5uYW1lKSk7XG4gICAgICAgICAgICBpZiAoc291cmNlLmRlc2MgJiYgc291cmNlLmRlc2MubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHRoaXNCLm1ha2VUb29sdGlwKGxkLCBzb3VyY2UuZGVzYyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByLmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCd0ZCcsIGxkKSk7XG4gICAgICAgICAgICBzdGFiQm9keS5hcHBlbmRDaGlsZChyKTtcbiAgICAgICAgICAgICsraWR4O1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHNldENoZWNrcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgZm9yICh2YXIgYmkgPSAwOyBiaSA8IGJ1dHRvbnMubGVuZ3RoOyArK2JpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGIgPSBidXR0b25zW2JpXTtcbiAgICAgICAgICAgICAgICB2YXIgdCA9IHRoaXNCLmN1cnJlbnRseUFjdGl2ZShiLmRhbGxpYW5jZV9zb3VyY2UpO1xuICAgICAgICAgICAgICAgIGlmICh0KSB7XG4gICAgICAgICAgICAgICAgICAgIGIuY2hlY2tlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYi5jaGVja2VkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHNldENoZWNrcygpO1xuICAgICAgICB0aGlzQi5hZGRUaWVyTGlzdGVuZXIoZnVuY3Rpb24obCkge1xuICAgICAgICAgICAgc2V0Q2hlY2tzKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHN0YWJIb2xkZXIuYXBwZW5kQ2hpbGQoc3RhYik7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIG1ha2VIdWJTdGFiKHRyYWNrcykge1xuICAgICAgICByZWZyZXNoQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIGFkZEJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICBjYW5CdXR0b24uc3R5bGUuZGlzcGxheSA9ICdub25lJztcblxuICAgICAgICBjdXN0b21Nb2RlID0gZmFsc2U7XG4gICAgICAgIHJlbW92ZUNoaWxkcmVuKHN0YWJIb2xkZXIpO1xuICAgICAgICBcbiAgICAgICAgbGV0IGJ1dHRvbklkU2VlZCA9IDA7XG5cbiAgICAgICAgdmFyIHR0YWIgPSBtYWtlRWxlbWVudCgnZGl2JywgbnVsbCwge30sIHt3aWR0aDogJzEwMCUnfSk7XG4gICAgICAgIHZhciBzb3VyY2VzID0gW107XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdHJhY2tzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICBzb3VyY2VzLnB1c2godHJhY2tzW2ldKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgc291cmNlcy5zb3J0KGZ1bmN0aW9uKGEsIGIpIHtcbiAgICAgICAgICAgIHJldHVybiBhLnNob3J0TGFiZWwudG9Mb3dlckNhc2UoKS50cmltKCkubG9jYWxlQ29tcGFyZShiLnNob3J0TGFiZWwudG9Mb3dlckNhc2UoKS50cmltKCkpO1xuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgZ3JvdXBzID0gW107XG4gICAgICAgIHZhciB0b3BzID0gW107XG4gICAgICAgIFxuICAgICAgICBmb3IgKHZhciB0aSA9IDA7IHRpIDwgc291cmNlcy5sZW5ndGg7ICsrdGkpIHtcbiAgICAgICAgICAgIHZhciB0cmFjayA9IHNvdXJjZXNbdGldO1xuICAgICAgICAgICAgaWYgKHRyYWNrLmNoaWxkcmVuICYmIHRyYWNrLmNoaWxkcmVuLmxlbmd0aCA+IDAgJiYgdHJhY2suY29udGFpbmVyICE9ICdtdWx0aVdpZycpIHtcbiAgICAgICAgICAgICAgICBncm91cHMucHVzaCh0cmFjayk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRvcHMucHVzaCh0cmFjayk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRvcHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgZ3JvdXBzLnB1c2goe1xuICAgICAgICAgICAgICAgIHNob3J0TGFiZWw6ICdPdGhlcnMnLFxuICAgICAgICAgICAgICAgIHByaW9yaXR5OiAtMTAwMDAwMDAwLFxuICAgICAgICAgICAgICAgIGNoaWxkcmVuOiB0b3BzfSk7XG4gICAgICAgIH1cblxuICAgICAgICBncm91cHMuc29ydChUSFVCX0NPTVBBUkUpO1xuICAgICAgICBcbiAgICAgICAgdmFyIGJ1dHRvbnMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgZ2kgPSAwOyBnaSA8IGdyb3Vwcy5sZW5ndGg7ICsrZ2kpIHtcbiAgICAgICAgICAgIHZhciBncm91cCA9IGdyb3Vwc1tnaV07XG4gICAgICAgICAgICB2YXIgZGcgPSBncm91cDtcbiAgICAgICAgICAgIGlmICghZGcuZGltZW5zaW9ucyAmJiBkZy5fcGFyZW50ICYmIGRnLl9wYXJlbnQuZGltZW5zaW9ucylcbiAgICAgICAgICAgICAgICBkZyA9IGRnLl9wYXJlbnQ7XG5cbiAgICAgICAgICAgIHZhciBkcHJvcHMgPSB7fVxuICAgICAgICAgICAgaWYgKGRnLmRpbWVuc2lvbnMpIHtcbiAgICAgICAgICAgICAgICB2YXIgZHRva3MgPSBkZy5kaW1lbnNpb25zLnNwbGl0KC8oXFx3Kyk9KFxcdyspLyk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgZHRpID0gMDsgZHRpIDwgZHRva3MubGVuZ3RoIC0gMjsgZHRpICs9IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgZHByb3BzW2R0b2tzW2R0aSArIDFdXSA9IGR0b2tzW2R0aSArIDJdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGRwcm9wcy5kaW1YICYmIGRwcm9wcy5kaW1ZKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRpbVggPSBkcHJvcHMuZGltWCwgZGltWSA9IGRwcm9wcy5kaW1ZO1xuICAgICAgICAgICAgICAgIHZhciBzZ1ggPSBkZy5zdWJncm91cHNbZGltWF07XG4gICAgICAgICAgICAgICAgdmFyIHNnWSA9IGRnLnN1Ymdyb3Vwc1tkaW1ZXTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB2YXIgdHJrcyA9IHt9O1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGNpID0gMDsgY2kgPCBncm91cC5jaGlsZHJlbi5sZW5ndGg7ICsrY2kpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNoaWxkID0gZ3JvdXAuY2hpbGRyZW5bY2ldO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdlggPSBjaGlsZC5zZ21bZGltWF0sIHZZID0gY2hpbGQuc2dtW2RpbVldO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXRya3NbdlhdKVxuICAgICAgICAgICAgICAgICAgICAgICAgdHJrc1t2WF0gPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgdHJrc1t2WF1bdlldID0gY2hpbGQ7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIG1hdHJpeCA9IG1ha2VFbGVtZW50KCd0YWJsZScsIG51bGwsIHtjbGFzc05hbWU6ICd0YWJsZSB0YWJsZS1zdHJpcGVkIHRhYmxlLWNvbmRlbnNlZCd9LCB7dGFibGVMYXlvdXQ6ICdmaXhlZCd9KTtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBoZWFkZXIgPSBtYWtlRWxlbWVudCgndHInKTtcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyLmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCd0aCcsIG51bGwsIHt9LCB7d2lkdGg6ICcxNTBweCcsIGhlaWdodDogJzEwMHB4J30pKTsgICAvLyBibGFuayBjb3JuZXIgZWxlbWVudFxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBzaSA9IDA7IHNpIDwgc2dYLnRpdGxlcy5sZW5ndGg7ICsrc2kpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBoID0gbWFrZUVsZW1lbnQoJ3RoJywgbWFrZUVsZW1lbnQoJ2RpdicsIHNnWC50aXRsZXNbc2ldLCB7fSwge3RyYW5zZm9ybTogJ3JvdGF0ZSgtNjBkZWcpJywgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybU9yaWdpbjogJzAlIDEwMCUnLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2Via2l0VHJhbnNmb3JtOiAncm90YXRlKC02MGRlZykgdHJhbnNsYXRlKDIwcHgsMTBweCknLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2Via2l0VHJhbnNmb3JtT3JpZ2luOiAnMCUgMTAwJScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRBbGlnbjogJ2xlZnQnfSksIHt9LCB7d2lkdGg6ICczNXB4JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6ICcxMDBweCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVydGljYWxBbGlnbjogJ2JvdHRvbSd9KVxuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyLmFwcGVuZENoaWxkKGgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIG1hdHJpeC5hcHBlbmRDaGlsZChoZWFkZXIpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciBtYm9keSA9IG1ha2VFbGVtZW50KCd0Ym9keScsIG51bGwsIHtjbGFzc05hbWU6ICd0YWJsZSB0YWJsZS1zdHJpcGVkIHRhYmxlLWNvbmRlbnNlZCd9KVxuICAgICAgICAgICAgICAgIGZvciAodmFyIHlpID0gMDsgeWkgPCBzZ1kudGl0bGVzLmxlbmd0aDsgKyt5aSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdlkgPSBzZ1kudGFnc1t5aV07XG4gICAgICAgICAgICAgICAgICAgIHZhciByb3cgPSBtYWtlRWxlbWVudCgndHInKTtcbiAgICAgICAgICAgICAgICAgICAgcm93LmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCd0aCcsIHNnWS50aXRsZXNbeWldKSwge30pO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgeGkgPSAwOyB4aSA8IHNnWC50aXRsZXMubGVuZ3RoOyArK3hpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdlggPSBzZ1gudGFnc1t4aV07XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2VsbCA9IG1ha2VFbGVtZW50KCd0ZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRya3NbdlhdICYmIHRya3NbdlhdW3ZZXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0cmFjayA9IHRya3NbdlhdW3ZZXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZHMgPSB0cmFjay50b0RhbGxpYW5jZVNvdXJjZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZHMpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gbWFrZUVsZW1lbnQoJ3RyJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJkID0gbWFrZUVsZW1lbnQoJ3RkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmQuc3R5bGUudGV4dEFsaWduID0gJ2NlbnRlcic7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGIgPSBtYWtlRWxlbWVudCgnaW5wdXQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiLnR5cGUgPSAnY2hlY2tib3gnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGIuZGFsbGlhbmNlX3NvdXJjZSA9IGRzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfX21hcHBpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYi5kYWxsaWFuY2VfbWFwcGluZyA9IF9fbWFwcGluZztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9ucy5wdXNoKGIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGwuYXBwZW5kQ2hpbGQoYik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYi5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbihldikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXYudGFyZ2V0LmNoZWNrZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNCLmFkZFRpZXIoZXYudGFyZ2V0LmRhbGxpYW5jZV9zb3VyY2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc0IucmVtb3ZlVGllcihldi50YXJnZXQuZGFsbGlhbmNlX3NvdXJjZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcm93LmFwcGVuZENoaWxkKGNlbGwpO1xuICAgICAgICAgICAgICAgICAgICB9IFxuICAgICAgICAgICAgICAgICAgICBtYm9keS5hcHBlbmRDaGlsZChyb3cpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBtYXRyaXguYXBwZW5kQ2hpbGQobWJvZHkpO1xuICAgICAgICAgICAgICAgIHR0YWIuYXBwZW5kQ2hpbGQobWFrZVRyZWVUYWJsZVNlY3Rpb24oZ3JvdXAuc2hvcnRMYWJlbCwgbWF0cml4LCBnaT09MCkpOyAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIHN0YWJCb2R5ID0gbWFrZUVsZW1lbnQoJ3Rib2R5JywgbnVsbCwge2NsYXNzTmFtZTogJ3RhYmxlIHRhYmxlLXN0cmlwZWQgdGFibGUtY29uZGVuc2VkJ30pO1xuICAgICAgICAgICAgICAgIHZhciBzdGFiID0gbWFrZUVsZW1lbnQoJ3RhYmxlJywgc3RhYkJvZHksIHtjbGFzc05hbWU6ICd0YWJsZSB0YWJsZS1zdHJpcGVkIHRhYmxlLWNvbmRlbnNlZCd9LCB7d2lkdGg6ICcxMDAlJywgdGFibGVMYXlvdXQ6ICdmaXhlZCd9KTsgXG4gICAgICAgICAgICAgICAgdmFyIGlkeCA9IDA7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBncm91cC5jaGlsZHJlbi5zb3J0KFRIVUJfQ09NUEFSRSk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBncm91cC5jaGlsZHJlbi5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBidXR0b25JZCA9ICdoYicgKyAoKytidXR0b25JZFNlZWQpO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciB0cmFjayA9IGdyb3VwLmNoaWxkcmVuW2ldO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZHMgPSB0cmFjay50b0RhbGxpYW5jZVNvdXJjZSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWRzKVxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBtYWtlRWxlbWVudCgndHInKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJkID0gbWFrZUVsZW1lbnQoJ3RkJywgbnVsbCwge30sIHt3aWR0aDogJzMwcHgnfSk7XG4gICAgICAgICAgICAgICAgICAgIGJkLnN0eWxlLnRleHRBbGlnbiA9ICdjZW50ZXInO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgdmFyIGIgPSBtYWtlRWxlbWVudCgnaW5wdXQnKTtcbiAgICAgICAgICAgICAgICAgICAgYi50eXBlID0gJ2NoZWNrYm94JztcbiAgICAgICAgICAgICAgICAgICAgYi5kYWxsaWFuY2Vfc291cmNlID0gZHM7XG4gICAgICAgICAgICAgICAgICAgIGIuaWQgPSBidXR0b25JZDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKF9fbWFwcGluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgYi5kYWxsaWFuY2VfbWFwcGluZyA9IF9fbWFwcGluZztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBidXR0b25zLnB1c2goYik7XG4gICAgICAgICAgICAgICAgICAgIGJkLmFwcGVuZENoaWxkKGIpO1xuICAgICAgICAgICAgICAgICAgICBiLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXYudGFyZ2V0LmNoZWNrZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzQi5hZGRUaWVyKGV2LnRhcmdldC5kYWxsaWFuY2Vfc291cmNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc0IucmVtb3ZlVGllcihldi50YXJnZXQuZGFsbGlhbmNlX3NvdXJjZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIHIuYXBwZW5kQ2hpbGQoYmQpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbGQgPSBtYWtlRWxlbWVudCgnbGFiZWwnLCBudWxsLCB7aHRtbEZvcjogYnV0dG9uSWR9KTtcbiAgICAgICAgICAgICAgICAgICAgbGQuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodHJhY2suc2hvcnRMYWJlbCkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodHJhY2subG9uZ0xhYmVsICYmIHRyYWNrLmxvbmdMYWJlbC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzQi5tYWtlVG9vbHRpcChsZCwgdHJhY2subG9uZ0xhYmVsKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByLmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCd0ZCcsIGxkKSk7XG4gICAgICAgICAgICAgICAgICAgIHN0YWJCb2R5LmFwcGVuZENoaWxkKHIpO1xuICAgICAgICAgICAgICAgICAgICArK2lkeDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoZ3JvdXBzLmxlbmd0aCA+IDEgfHwgZ3JvdXAuc2hvcnRMYWJlbCAhPT0gJ090aGVycycpIHtcbiAgICAgICAgICAgICAgICAgICAgdHRhYi5hcHBlbmRDaGlsZChtYWtlVHJlZVRhYmxlU2VjdGlvbihncm91cC5zaG9ydExhYmVsLCBzdGFiLCBnaT09MCkpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHR0YWIuYXBwZW5kQ2hpbGQoc3RhYik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHNldENoZWNrcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgZm9yICh2YXIgYmkgPSAwOyBiaSA8IGJ1dHRvbnMubGVuZ3RoOyArK2JpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGIgPSBidXR0b25zW2JpXTtcbiAgICAgICAgICAgICAgICB2YXIgdCA9IHRoaXNCLmN1cnJlbnRseUFjdGl2ZShiLmRhbGxpYW5jZV9zb3VyY2UpO1xuICAgICAgICAgICAgICAgIGlmICh0KSB7XG4gICAgICAgICAgICAgICAgICAgIGIuY2hlY2tlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGIuZGlzYWJsZWQgPSB0LnNlcXVlbmNlU291cmNlICE9IG51bGw7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYi5jaGVja2VkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHNldENoZWNrcygpO1xuICAgICAgICB0aGlzQi5hZGRUaWVyTGlzdGVuZXIoZnVuY3Rpb24obCkge1xuICAgICAgICAgICAgc2V0Q2hlY2tzKCk7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgc3RhYkhvbGRlci5hcHBlbmRDaGlsZCh0dGFiKTtcbiAgICB9XG5cbiAgICBpZiAocmVnQnV0dG9uKSB7XG4gICAgICAgIHJlZ0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpOyBldi5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgIGFjdGl2YXRlQnV0dG9uKGFkZE1vZGVCdXR0b25zLCByZWdCdXR0b24pO1xuICAgICAgICAgICAgbWFrZVN0YWIodGhpc0IuYXZhaWxhYmxlU291cmNlcyk7XG4gICAgICAgIH0sIGZhbHNlKTtcbiAgICB9XG4gXG4gICAgYmluQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXYpIHtcbiAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTsgZXYuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIHN3aXRjaFRvQmluTW9kZSgpO1xuICAgIH0sIGZhbHNlKTtcbiAgICBhZGRIdWJCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldikge1xuICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpOyBldi5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgc3dpdGNoVG9IdWJDb25uZWN0TW9kZSgpO1xuICAgIH0sIGZhbHNlKTtcblxuXG4gICAgZnVuY3Rpb24gc3dpdGNoVG9CaW5Nb2RlKCkge1xuICAgICAgICBhY3RpdmF0ZUJ1dHRvbihhZGRNb2RlQnV0dG9ucywgYmluQnV0dG9uKTtcbiAgICAgICAgY3VzdG9tTW9kZSA9ICdiaW4nO1xuXG4gICAgICAgIHJlZnJlc2hCdXR0b24uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgYWRkQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnaW5saW5lJztcbiAgICAgICAgY2FuQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cbiAgICAgICAgcmVtb3ZlQ2hpbGRyZW4oc3RhYkhvbGRlcik7XG4gICAgICAgIHZhciBwYWdlSG9sZGVyID0gbWFrZUVsZW1lbnQoJ2RpdicsIG51bGwsIHt9LCB7cGFkZGluZ0xlZnQ6ICcxMHB4JywgcGFkZGluZ1JpZ2h0OiAnMTBweCd9KTtcbiAgICAgICAgcGFnZUhvbGRlci5hcHBlbmRDaGlsZChtYWtlRWxlbWVudCgnaDMnLCAnQWRkIGN1c3RvbSBVUkwtYmFzZWQgZGF0YScpKTtcbiAgICAgICAgcGFnZUhvbGRlci5hcHBlbmRDaGlsZChtYWtlRWxlbWVudCgncCcsIFsnWW91IGNhbiBhZGQgaW5kZXhlZCBiaW5hcnkgZGF0YSBob3N0ZWQgb24gYW4gd2ViIHNlcnZlciB0aGF0IHN1cHBvcnRzIENPUlMgKCcsIG1ha2VFbGVtZW50KCdhJywgJ2Z1bGwgZGV0YWlscycsIHtocmVmOiAnaHR0cDovL3d3dy5iaW9kYWxsaWFuY2Uub3JnL2Jpbi5odG1sJ30pLCAnKS4gIEN1cnJlbnRseSBzdXBwb3J0ZWQgZm9ybWF0cyBhcmUgYmlnd2lnLCBiaWdiZWQsIGFuZCBpbmRleGVkIEJBTS4nXSkpO1xuXG4gICAgICAgIHBhZ2VIb2xkZXIuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ2JyJykpO1xuICAgICAgICBwYWdlSG9sZGVyLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCdVUkw6ICcpKTtcbiAgICAgICAgY3VzdFVSTCA9IG1ha2VFbGVtZW50KCdpbnB1dCcsICcnLCB7c2l6ZTogODAsIHZhbHVlOiAnaHR0cDovL3d3dy5iaW9kYWxsaWFuY2Uub3JnL2RhdGFzZXRzL2Vuc0dlbmUuYmInfSwge3dpZHRoOiAnMTAwJSd9KTtcbiAgICAgICAgcGFnZUhvbGRlci5hcHBlbmRDaGlsZChjdXN0VVJMKTtcbiAgICAgICAgXG4gICAgICAgIHBhZ2VIb2xkZXIuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ2JyJykpO1xuICAgICAgICBwYWdlSG9sZGVyLmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCdiJywgJy0gb3IgLScpKTtcbiAgICAgICAgcGFnZUhvbGRlci5hcHBlbmRDaGlsZChtYWtlRWxlbWVudCgnYnInKSk7XG4gICAgICAgIHBhZ2VIb2xkZXIuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJ0ZpbGU6ICcpKTtcbiAgICAgICAgY3VzdEZpbGUgPSBtYWtlRWxlbWVudCgnaW5wdXQnLCBudWxsLCB7dHlwZTogJ2ZpbGUnLCBtdWx0aXBsZTogJ211bHRpcGxlJ30pO1xuICAgICAgICBwYWdlSG9sZGVyLmFwcGVuZENoaWxkKGN1c3RGaWxlKTtcbiAgICAgICAgXG4gICAgICAgIHBhZ2VIb2xkZXIuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ3AnLCAnQ2xpY2tpbmcgdGhlIFwiQWRkXCIgYnV0dG9uIGJlbG93IHdpbGwgaW5pdGlhdGUgYSBzZXJpZXMgb2YgdGVzdCBxdWVyaWVzLicpKTtcblxuICAgICAgICBzdGFiSG9sZGVyLmFwcGVuZENoaWxkKHBhZ2VIb2xkZXIpO1xuICAgICAgICBjdXN0VVJMLmZvY3VzKCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc3dpdGNoVG9IdWJDb25uZWN0TW9kZSgpIHtcbiAgICAgICAgYWN0aXZhdGVCdXR0b24oYWRkTW9kZUJ1dHRvbnMsIGFkZEh1YkJ1dHRvbik7XG4gICAgICAgIHJlZnJlc2hCdXR0b24uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgYWRkQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnaW5saW5lJztcbiAgICAgICAgY2FuQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cbiAgICAgICAgY3VzdG9tTW9kZSA9ICdodWItY29ubmVjdCc7XG4gICAgICAgIHJlZnJlc2hCdXR0b24uc3R5bGUudmlzaWJpbGl0eSA9ICdoaWRkZW4nO1xuXG4gICAgICAgIHJlbW92ZUNoaWxkcmVuKHN0YWJIb2xkZXIpO1xuXG4gICAgICAgIHZhciBwYWdlSG9sZGVyID0gbWFrZUVsZW1lbnQoJ2RpdicsIG51bGwsIHt9LCB7cGFkZGluZ0xlZnQ6ICcxMHB4JywgcGFkZGluZ1JpZ2h0OiAnMTBweCd9KTtcbiAgICAgICAgcGFnZUhvbGRlci5hcHBlbmRDaGlsZChtYWtlRWxlbWVudCgnaDMnLCAnQ29ubmVjdCB0byBhIHRyYWNrIGh1Yi4nKSk7XG4gICAgICAgIHBhZ2VIb2xkZXIuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ3AnLCBbJ0VudGVyIHRoZSB0b3AtbGV2ZWwgVVJMICh1c3VhbGx5IHBvaW50cyB0byBhIGZpbGUgY2FsbGVkIFwiaHViLnR4dFwiKSBvZiBhIFVDU0Mtc3R5bGUgdHJhY2sgaHViJ10pKTtcbiAgICAgICAgXG4gICAgICAgIGN1c3RVUkwgPSBtYWtlRWxlbWVudCgnaW5wdXQnLCAnJywge3NpemU6IDEyMCwgdmFsdWU6ICdodHRwOi8vd3d3LmJpb2RhbGxpYW5jZS5vcmcvZGF0YXNldHMvdGVzdGh1Yi9odWIudHh0J30sIHt3aWR0aDogJzEwMCUnfSk7XG4gICAgICAgIHBhZ2VIb2xkZXIuYXBwZW5kQ2hpbGQoY3VzdFVSTCk7XG4gICAgICAgIFxuICAgICAgICBzdGFiSG9sZGVyLmFwcGVuZENoaWxkKHBhZ2VIb2xkZXIpO1xuICAgICAgICBcbiAgICAgICAgY3VzdFVSTC5mb2N1cygpO1xuICAgIH1cblxuICAgIGN1c3RCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldikge1xuICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpOyBldi5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgc3dpdGNoVG9DdXN0b21Nb2RlKCk7XG4gICAgfSwgZmFsc2UpO1xuXG4gICAgZnVuY3Rpb24gc3dpdGNoVG9DdXN0b21Nb2RlKCkge1xuICAgICAgICBhY3RpdmF0ZUJ1dHRvbihhZGRNb2RlQnV0dG9ucywgY3VzdEJ1dHRvbik7XG4gICAgICAgIHJlZnJlc2hCdXR0b24uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgYWRkQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnaW5saW5lJztcbiAgICAgICAgY2FuQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cbiAgICAgICAgY3VzdG9tTW9kZSA9ICdkYXMnO1xuXG4gICAgICAgIHJlbW92ZUNoaWxkcmVuKHN0YWJIb2xkZXIpO1xuXG4gICAgICAgIHZhciBjdXN0b21Gb3JtID0gbWFrZUVsZW1lbnQoJ2RpdicsIG51bGwsIHt9LCAge3BhZGRpbmdMZWZ0OiAnMTBweCcsIHBhZGRpbmdSaWdodDogJzEwcHgnfSk7XG4gICAgICAgIGN1c3RvbUZvcm0uYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ2gzJywgJ0FkZCBjdXN0b20gREFTIGRhdGEnKSk7XG4gICAgICAgIGN1c3RvbUZvcm0uYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ3AnLCAnVGhpcyBpbnRlcmZhY2UgaXMgaW50ZW5kZWQgZm9yIGFkZGluZyBjdXN0b20gb3IgbGFiLXNwZWNpZmljIGRhdGEuICBQdWJsaWMgZGF0YSBjYW4gYmUgYWRkZWQgbW9yZSBlYXNpbHkgdmlhIHRoZSByZWdpc3RyeSBpbnRlcmZhY2UuJykpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICBjdXN0b21Gb3JtLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCdVUkw6ICcpKTtcbiAgICAgICAgY3VzdG9tRm9ybS5hcHBlbmRDaGlsZChtYWtlRWxlbWVudCgnYnInKSk7XG4gICAgICAgIGN1c3RVUkwgPSBtYWtlRWxlbWVudCgnaW5wdXQnLCAnJywge3NpemU6IDgwLCB2YWx1ZTogJ2h0dHA6Ly93d3cuZGVya2hvbG0ubmV0OjgwODAvZGFzL21lZGlwc2VxX3JlYWRzLyd9LCB7d2lkdGg6ICcxMDAlJ30pO1xuICAgICAgICBjdXN0b21Gb3JtLmFwcGVuZENoaWxkKGN1c3RVUkwpO1xuXG4gICAgICAgIGN1c3RvbUZvcm0uYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ3AnLCAnQ2xpY2tpbmcgdGhlIFwiQWRkXCIgYnV0dG9uIGJlbG93IHdpbGwgaW5pdGlhdGUgYSBzZXJpZXMgb2YgdGVzdCBxdWVyaWVzLiAgSWYgdGhlIHNvdXJjZSBpcyBwYXNzd29yZC1wcm90ZWN0ZWQsIHlvdSBtYXkgYmUgcHJvbXB0ZWQgdG8gZW50ZXIgY3JlZGVudGlhbHMuJykpO1xuICAgICAgICBzdGFiSG9sZGVyLmFwcGVuZENoaWxkKGN1c3RvbUZvcm0pO1xuXG4gICAgICAgIGN1c3RVUkwuZm9jdXMoKTtcbiAgICB9XG5cblxuXG4gICAgdmFyIGFkZEJ1dHRvbiA9IG1ha2VFbGVtZW50KCdidXR0b24nLCAnQWRkJywge2NsYXNzTmFtZTogJ2J0biBidG4tcHJpbWFyeSd9KTtcbiAgICBhZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldikge1xuICAgICAgICBldi5zdG9wUHJvcGFnYXRpb24oKTsgZXYucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZG9BZGQoKTtcbiAgICB9LCBmYWxzZSk7XG5cbiAgICBmdW5jdGlvbiBkb0FkZCgpIHtcbiAgICAgICAgaWYgKGN1c3RvbU1vZGUpIHtcbiAgICAgICAgICAgIGlmIChjdXN0b21Nb2RlID09PSAnZGFzJykge1xuICAgICAgICAgICAgICAgIHZhciBjdXJpID0gY3VzdFVSTC52YWx1ZS50cmltKCk7XG4gICAgICAgICAgICAgICAgaWYgKCEvXi4rOlxcL1xcLy8uZXhlYyhjdXJpKSkge1xuICAgICAgICAgICAgICAgICAgICBjdXJpID0gJ2h0dHA6Ly8nICsgY3VyaTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIG5kcyA9IG5ldyBEQVNTb3VyY2Uoe25hbWU6ICd0ZW1wb3JhcnknLCB1cmk6IGN1cml9KTtcbiAgICAgICAgICAgICAgICB0cnlBZGREQVMobmRzKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY3VzdG9tTW9kZSA9PT0gJ2JpbicpIHtcbiAgICAgICAgICAgICAgICB2YXIgZmlsZUxpc3QgPSBjdXN0RmlsZS5maWxlcztcblxuICAgICAgICAgICAgICAgIGlmIChmaWxlTGlzdCAmJiBmaWxlTGlzdC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyeUFkZE11bHRpcGxlKGZpbGVMaXN0KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY3VyaSA9IGN1c3RVUkwudmFsdWUudHJpbSgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIS9eLis6XFwvXFwvLy5leGVjKGN1cmkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJpID0gJ2h0dHA6Ly8nICsgY3VyaTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB2YXIgc291cmNlID0ge3VyaTogY3VyaX07XG4gICAgICAgICAgICAgICAgICAgIHZhciBsY3VyaSA9IGN1cmkudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxjdXJpLmluZGV4T2YoXCJodHRwczovL3d3dy5lbmNvZGVwcm9qZWN0Lm9yZy9cIikgPT0gMCAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgbGN1cmkuaW5kZXhPZihcIkBAZG93bmxvYWRcIikgPj0gMCkgXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZS50cmFuc3BvcnQgPSAnZW5jb2RlJztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0cnlBZGRCaW4oc291cmNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGN1c3RvbU1vZGUgPT09ICdyZXNldCcpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2hUb0N1c3RvbU1vZGUoKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY3VzdG9tTW9kZSA9PT0gJ3Jlc2V0LWJpbicpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2hUb0Jpbk1vZGUoKTsgXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGN1c3RvbU1vZGUgPT09ICdyZXNldC1odWInKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoVG9IdWJDb25uZWN0TW9kZSgpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChjdXN0b21Nb2RlID09PSAncHJvbXB0LWJhaScpIHtcbiAgICAgICAgICAgICAgICB2YXIgZmlsZUxpc3QgPSBjdXN0RmlsZS5maWxlcztcbiAgICAgICAgICAgICAgICBpZiAoZmlsZUxpc3QgJiYgZmlsZUxpc3QubGVuZ3RoID4gMCAmJiBmaWxlTGlzdFswXSkge1xuICAgICAgICAgICAgICAgICAgICBkYXRhVG9GaW5hbGl6ZS5iYWlCbG9iID0gZmlsZUxpc3RbMF07XG4gICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlQkFNKGRhdGFUb0ZpbmFsaXplKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBwcm9tcHRGb3JCQUkoZGF0YVRvRmluYWxpemUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY3VzdG9tTW9kZSA9PT0gJ3Byb21wdC10YmknKSB7XG4gICAgICAgICAgICAgICAgdmFyIGZpbGVMaXN0ID0gY3VzdEZpbGUuZmlsZXM7XG4gICAgICAgICAgICAgICAgaWYgKGZpbGVMaXN0ICYmIGZpbGVMaXN0Lmxlbmd0aCA+IDAgJiYgZmlsZUxpc3RbMF0pIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YVRvRmluYWxpemUuaW5kZXhCbG9iID0gZmlsZUxpc3RbMF07XG4gICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlVGFiaXhWQ0YoZGF0YVRvRmluYWxpemUpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHByb21wdEZvclRhYml4KGRhdGFUb0ZpbmFsaXplKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGN1c3RvbU1vZGUgPT09ICdmaW5hbGl6ZScgfHwgY3VzdG9tTW9kZSA9PT0gJ2ZpbmFsaXplLWJpbicpIHtcbiAgICAgICAgICAgICAgICBkYXRhVG9GaW5hbGl6ZS5uYW1lID0gY3VzdE5hbWUudmFsdWU7XG4gICAgICAgICAgICAgICAgdmFyIG0gPSBjdXN0Q1MudmFsdWU7XG4gICAgICAgICAgICAgICAgaWYgKG0gIT0gJ19fZGVmYXVsdF9fJykge1xuICAgICAgICAgICAgICAgICAgICBkYXRhVG9GaW5hbGl6ZS5tYXBwaW5nID0gbTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBkYXRhVG9GaW5hbGl6ZS5tYXBwaW5nID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoY3VzdFF1YW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGFUb0ZpbmFsaXplLm1heGJpbnMgPSBjdXN0UXVhbnQuY2hlY2tlZDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoY3VzdFVzZXIudmFsdWUubGVuZ3RoID4gMSAmJiBjdXN0UGFzcy52YWx1ZS5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGFUb0ZpbmFsaXplLnhVc2VyID0gY3VzdFVzZXIudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGRhdGFUb0ZpbmFsaXplLnhQYXNzID0gY3VzdFBhc3MudmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdGhpc0IuYWRkVGllcihkYXRhVG9GaW5hbGl6ZSk7XG5cbiAgICAgICAgICAgICAgICBpZiAoY3VzdG9tTW9kZSA9PSAnZmluYWxpemUtYmluJylcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoVG9CaW5Nb2RlKCk7XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2hUb0N1c3RvbU1vZGUoKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY3VzdG9tTW9kZSA9PT0gJ2h1Yi1jb25uZWN0Jykge1xuICAgICAgICAgICAgICAgIHZhciBjdXJpID0gY3VzdFVSTC52YWx1ZS50cmltKCk7XG4gICAgICAgICAgICAgICAgaWYgKCEvXi4rOlxcL1xcLy8uZXhlYyhjdXJpKSkge1xuICAgICAgICAgICAgICAgICAgICBjdXJpID0gJ2h0dHA6Ly8nICsgY3VyaTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdHJ5QWRkSHViKGN1cmkpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChjdXN0b21Nb2RlID09PSAnbXVsdGlwbGUnKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgbWkgPSAwOyBtaSA8IG11bHRpcGxlU2V0Lmxlbmd0aDsgKyttaSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcyA9IG11bHRpcGxlU2V0W21pXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHMuaGlkZGVuKVxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHMudGllcl90eXBlID09ICdiYW0nICYmICFzLmluZGV4QmxvYiAmJiAhcy5pbmRleFVyaSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICBpZiAocy50aWVyX3R5cGUgPT0gJ3RhYml4JyAmJiAhcy5pbmRleEJsb2IgJiYgIXMuaW5kZXhVcmkpXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgbmRzID0gbWFrZVNvdXJjZUNvbmZpZyhzKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5kcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmRzLm5vUGVyc2lzdCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzQi5hZGRUaWVyKG5kcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBzd2l0Y2hUb0Jpbk1vZGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXNCLnJlbW92ZUFsbFBvcHVwcygpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIHRyeUFkZEh1YihjdXJpLCBvcHRzLCByZXRyeSkge1xuICAgICAgICBvcHRzID0gb3B0cyB8fCB7fTtcbiAgICAgICAgZm9yICh2YXIgaGkgPSAwOyBoaSA8IHRoaXNCLmh1Yk9iamVjdHMubGVuZ3RoOyArK2hpKSB7XG4gICAgICAgICAgICB2YXIgaCA9IHRoaXNCLmh1Yk9iamVjdHNbaGldO1xuICAgICAgICAgICAgaWYgKGguaHViLnVybCA9PSBjdXJpKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgYmkgPSAwOyBiaSA8IGFkZE1vZGVCdXR0b25zLmxlbmd0aDsgKytiaSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoYWRkTW9kZUJ1dHRvbnNbYmldLmh1YiA9PSBoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmF0ZUJ1dHRvbihhZGRNb2RlQnV0dG9ucywgYWRkTW9kZUJ1dHRvbnNbYmldKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBoLmdldFRyYWNrcyhmdW5jdGlvbih0cmFja3MsIGVycikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIG1ha2VIdWJTdGFiKHRyYWNrcyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGNvbm5lY3RUcmFja0h1YihjdXJpLCBmdW5jdGlvbihodWIsIGVycikge1xuICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgIGlmICghcmV0cnkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRyeUFkZEh1YihjdXJpLCB7Y3JlZGVudGlhbHM6IHRydWV9LCB0cnVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVtb3ZlQ2hpbGRyZW4oc3RhYkhvbGRlcik7XG4gICAgICAgICAgICAgICAgc3RhYkhvbGRlci5hcHBlbmRDaGlsZChtYWtlRWxlbWVudCgnaDInLCAnRXJyb3IgY29ubmVjdGluZyB0byB0cmFjayBodWInKSlcbiAgICAgICAgICAgICAgICBzdGFiSG9sZGVyLmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCdwJywgZXJyKSk7XG4gICAgICAgICAgICAgICAgY3VzdG9tTW9kZSA9ICdyZXNldC1odWInO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIGJlc3RIdWIgPSBudWxsO1xuICAgICAgICAgICAgICAgIHZhciBiZXN0SHViQnV0dG9uID0gbnVsbDtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBnZW5vbWUgaW4gaHViLmdlbm9tZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1hcHBpbmcgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICB2YXIgb2theSA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChnZW5vbWUgPT0gdGhpc0IuY29vcmRTeXN0ZW0udWNzY05hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9rYXkgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIG1pZCBpbiB0aGlzQi5jaGFpbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbSA9IHRoaXNCLmNoYWluc1ttaWRdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnZW5vbWUgPT0gbS5jb29yZHMudWNzY05hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFwcGluZyA9IG1pZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2theSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChva2F5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaGMgPSB7dXJsOiBjdXJpLCBnZW5vbWU6IGdlbm9tZX07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0cy5jcmVkZW50aWFscylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYy5jcmVkZW50aWFscyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobWFwcGluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhjLm1hcHBpbmcgPSBtYXBwaW5nO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh1Yi5nZW5vbWVzW2dlbm9tZV0ubWFwcGluZyA9IG1hcHBpbmc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzQi5odWJzLnB1c2goaGMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpc0IuaHViT2JqZWN0cy5wdXNoKGh1Yi5nZW5vbWVzW2dlbm9tZV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaHViQnV0dG9uID0gbWFrZUh1YkJ1dHRvbihodWIuZ2Vub21lc1tnZW5vbWVdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVCdXR0b25Ib2xkZXIuYXBwZW5kQ2hpbGQoaHViQnV0dG9uKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFtYXBwaW5nIHx8ICFiZXN0SHViKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmVzdEh1YiA9IGh1Yi5nZW5vbWVzW2dlbm9tZV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmVzdEh1YkJ1dHRvbiA9IGh1YkJ1dHRvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChiZXN0SHViKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXNCLm5vdGlmeVRpZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgYWN0aXZhdGVCdXR0b24oYWRkTW9kZUJ1dHRvbnMsIGJlc3RIdWJCdXR0b24pO1xuICAgICAgICAgICAgICAgICAgICBiZXN0SHViLmdldFRyYWNrcyhmdW5jdGlvbih0cmFja3MsIGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWFrZUh1YlN0YWIodHJhY2tzKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlQ2hpbGRyZW4oc3RhYkhvbGRlcik7XG4gICAgICAgICAgICAgICAgICAgIHN0YWJIb2xkZXIuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ2gyJywgJ05vIGRhdGEgZm9yIHRoaXMgZ2Vub21lJykpXG4gICAgICAgICAgICAgICAgICAgIHN0YWJIb2xkZXIuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ3AnLCAnVGhpcyBVUkwgYXBwZWFycyB0byBiZSBhIHZhbGlkIHRyYWNrLWh1YiwgYnV0IGl0IGRvZXNuXFwndCBjb250YWluIGFueSBkYXRhIGZvciB0aGUgY29vcmRpbmF0ZSBzeXN0ZW0gb2YgdGhpcyBicm93c2VyJykpO1xuICAgICAgICAgICAgICAgICAgICBzdGFiSG9sZGVyLmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCdwJywgJ2Nvb3JkU3lzdGVtLnVjc2NOYW1lID0gJyArIHRoaXNCLmNvb3JkU3lzdGVtLnVjc2NOYW1lKSk7XG4gICAgICAgICAgICAgICAgICAgIGN1c3RvbU1vZGUgPSAncmVzZXQtaHViJztcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgb3B0cyk7XG4gICAgfVxuXG4gICAgdmFyIHRyeUFkZERBUyA9IGZ1bmN0aW9uKG5kcywgcmV0cnkpIHtcbiAgICAgICAgdmFyIGtub3duU3BhY2UgPSB0aGlzQi5rbm93blNwYWNlO1xuICAgICAgICBpZiAoIWtub3duU3BhY2UpIHtcbiAgICAgICAgICAgIGFsZXJ0KFwiQ2FuJ3QgY29uZmlybSB0cmFjay1hZGRpdGlvbiB0byBhbiB1bmluaXQgYnJvd3Nlci5cIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHRzbSA9IE1hdGgubWF4KGtub3duU3BhY2UubWluLCAoa25vd25TcGFjZS5taW4gKyBrbm93blNwYWNlLm1heCAtIDEwMCkgLyAyKXwwO1xuICAgICAgICB2YXIgdGVzdFNlZ21lbnQgPSBuZXcgREFTU2VnbWVudChrbm93blNwYWNlLmNociwgdHNtLCBNYXRoLm1pbih0c20gKyA5OSwga25vd25TcGFjZS5tYXgpKTtcbiAgICAgICAgbmRzLmZlYXR1cmVzKHRlc3RTZWdtZW50LCB7fSwgZnVuY3Rpb24oZmVhdHVyZXMsIHN0YXR1cykge1xuICAgICAgICAgICAgaWYgKHN0YXR1cykge1xuICAgICAgICAgICAgICAgIGlmICghcmV0cnkpIHtcbiAgICAgICAgICAgICAgICAgICAgbmRzLmNyZWRlbnRpYWxzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdHJ5QWRkREFTKG5kcywgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlQ2hpbGRyZW4oc3RhYkhvbGRlcik7XG4gICAgICAgICAgICAgICAgICAgIHN0YWJIb2xkZXIuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ2gyJywgJ0N1c3RvbSBkYXRhIG5vdCBmb3VuZCcpKTtcbiAgICAgICAgICAgICAgICAgICAgc3RhYkhvbGRlci5hcHBlbmRDaGlsZChtYWtlRWxlbWVudCgncCcsICdEQVMgdXJpOiAnICsgbmRzLnVyaSArICcgaXMgbm90IGFuc3dlcmluZyBmZWF0dXJlcyByZXF1ZXN0cycpKTtcbiAgICAgICAgICAgICAgICAgICAgY3VzdG9tTW9kZSA9ICdyZXNldCc7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBuYW1lRXh0cmFjdFBhdHRlcm4gPSBuZXcgUmVnRXhwKCcvKFteL10rKS8/JCcpO1xuICAgICAgICAgICAgICAgIHZhciBtYXRjaCA9IG5hbWVFeHRyYWN0UGF0dGVybi5leGVjKG5kcy51cmkpO1xuICAgICAgICAgICAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICAgICAgICAgICAgICBuZHMubmFtZSA9IG1hdGNoWzFdO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRyeUFkZERBU3hTb3VyY2VzKG5kcyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB0cnlBZGREQVN4U291cmNlcyhuZHMsIHJldHJ5KSB7XG4gICAgICAgIHZhciB1cmkgPSBuZHMudXJpO1xuICAgICAgICBpZiAocmV0cnkpIHtcbiAgICAgICAgICAgIHZhciBtYXRjaCA9IC8oLispXFwvW15cXC9dK1xcLz8vLmV4ZWModXJpKTtcbiAgICAgICAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICAgICAgICAgIHVyaSA9IG1hdGNoWzFdICsgJy9zb3VyY2VzJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBzcWZhaWwoKSB7XG4gICAgICAgICAgICBpZiAoIXJldHJ5KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRyeUFkZERBU3hTb3VyY2VzKG5kcywgdHJ1ZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBhZGREYXNDb21wbGV0aW9uUGFnZShuZHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIG5ldyBEQVNSZWdpc3RyeSh1cmksIHtjcmVkZW50aWFsczogbmRzLmNyZWRlbnRpYWxzfSkuc291cmNlcyhcbiAgICAgICAgICAgIGZ1bmN0aW9uKHNvdXJjZXMpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXNvdXJjZXMgfHwgc291cmNlcy5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3FmYWlsKCk7XG4gICAgICAgICAgICAgICAgfSBcblxuICAgICAgICAgICAgICAgIHZhciBmcyA9IG51bGw7XG4gICAgICAgICAgICAgICAgaWYgKHNvdXJjZXMubGVuZ3RoID09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgZnMgPSBzb3VyY2VzWzBdO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc291cmNlcy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNvdXJjZXNbaV0udXJpID09PSBuZHMudXJpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnMgPSBzb3VyY2VzW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIGNvb3Jkc0RldGVybWluZWQgPSBmYWxzZSwgcXVhbnREZXRlcm1pbmVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgaWYgKGZzKSB7XG4gICAgICAgICAgICAgICAgICAgIG5kcy5uYW1lID0gZnMubmFtZTtcbiAgICAgICAgICAgICAgICAgICAgbmRzLmRlc2MgPSBmcy5kZXNjO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZnMubWF4Ymlucykge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmRzLm1heGJpbnMgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmRzLm1heGJpbnMgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoZnMuY2FwYWJpbGl0aWVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZHMuY2FwYWJpbGl0aWVzID0gZnMuY2FwYWJpbGl0aWVzO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHF1YW50RGV0ZXJtaW5lZCA9IHRydWVcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGlmIChmcy5jb29yZHMgJiYgZnMuY29vcmRzLmxlbmd0aCA9PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29vcmRzID0gZnMuY29vcmRzWzBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvb3Jkc01hdGNoKGNvb3JkcywgdGhpc0IuY29vcmRTeXN0ZW0pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29vcmRzRGV0ZXJtaW5lZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXNCLmNoYWlucykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGsgaW4gdGhpc0IuY2hhaW5zKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb29yZHNNYXRjaChjb29yZHMsIHRoaXNCLmNoYWluc1trXS5jb29yZHMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZHMubWFwcGluZyA9IGs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb29yZHNEZXRlcm1pbmVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFkZERhc0NvbXBsZXRpb25QYWdlKG5kcywgY29vcmRzRGV0ZXJtaW5lZCwgcXVhbnREZXRlcm1pbmVkKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gc3FmYWlsKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgdmFyIG1ha2VTb3VyY2VDb25maWcgPSBmdW5jdGlvbihzKSB7XG4gICAgICAgIHZhciBuZHMgPSB7bmFtZTogcy5uYW1lfTtcbiAgICAgICAgaWYgKHMuY3JlZGVudGlhbHMpXG4gICAgICAgICAgICBuZHMuY3JlZGVudGlhbHMgPSBzLmNyZWRlbnRpYWxzO1xuICAgICAgICBcbiAgICAgICAgaWYgKHMubWFwcGluZyAmJiBzLm1hcHBpbmcgIT0gJ19fZGVmYXVsdF9fJylcbiAgICAgICAgICAgIG5kcy5tYXBwaW5nID0gcy5tYXBwaW5nO1xuXG4gICAgICAgIGlmIChzLnRyYW5zcG9ydClcbiAgICAgICAgICAgIG5kcy50cmFuc3BvcnQgPSBzLnRyYW5zcG9ydDtcblxuICAgICAgICBpZiAocy50aWVyX3R5cGUgPT0gJ2J3ZycpIHtcbiAgICAgICAgICAgIGlmIChzLmJsb2IpXG4gICAgICAgICAgICAgICAgbmRzLmJ3Z0Jsb2IgPSBzLmJsb2I7XG4gICAgICAgICAgICBlbHNlIGlmIChzLnVyaSlcbiAgICAgICAgICAgICAgICBuZHMuYndnVVJJID0gcy51cmk7XG4gICAgICAgICAgICByZXR1cm4gbmRzO1xuICAgICAgICB9IGVsc2UgaWYgKHMudGllcl90eXBlID09ICdiYW0nKSB7XG4gICAgICAgICAgICBpZiAocy5ibG9iKSB7XG4gICAgICAgICAgICAgICAgbmRzLmJhbUJsb2IgPSBzLmJsb2I7XG4gICAgICAgICAgICAgICAgbmRzLmJhaUJsb2IgPSBzLmluZGV4QmxvYjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbmRzLmJhbVVSSSA9IHMudXJpO1xuICAgICAgICAgICAgICAgIG5kcy5iYWlVUkkgPSBzLmluZGV4VXJpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5kcztcbiAgICAgICAgfSBlbHNlIGlmIChzLnRpZXJfdHlwZSA9PSAndGFiaXgnKSB7XG4gICAgICAgICAgICBuZHMudGllcl90eXBlID0gJ3RhYml4JztcbiAgICAgICAgICAgIG5kcy5wYXlsb2FkID0gcy5wYXlsb2FkO1xuICAgICAgICAgICAgaWYgKHMuYmxvYikge1xuICAgICAgICAgICAgICAgIG5kcy5ibG9iID0gcy5ibG9iO1xuICAgICAgICAgICAgICAgIG5kcy5pbmRleEJsb2IgPSBzLmluZGV4QmxvYjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbmRzLnVyaSA9IHMudXJpO1xuICAgICAgICAgICAgICAgIG5kcy5pbmRleFVyaSA9IHMuaW5kZXhVcmk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmRzO1xuICAgICAgICB9IGVsc2UgaWYgKHMudGllcl90eXBlID09ICdtZW1zdG9yZScpIHtcbiAgICAgICAgICAgIG5kcy50aWVyX3R5cGUgPSAnbWVtc3RvcmUnO1xuICAgICAgICAgICAgbmRzLnBheWxvYWQgPSBzLnBheWxvYWQ7XG4gICAgICAgICAgICBpZiAocy5ibG9iKVxuICAgICAgICAgICAgICAgIG5kcy5ibG9iID0gcy5ibG9iO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIG5kcy51cmkgPSBzLnVyaTtcbiAgICAgICAgICAgIHJldHVybiBuZHM7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgdHJ5QWRkQmluID0gZnVuY3Rpb24oc291cmNlKSB7XG4gICAgICAgIHByb2JlUmVzb3VyY2Uoc291cmNlLCBmdW5jdGlvbihzb3VyY2UsIGVycikge1xuICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgIHJlbW92ZUNoaWxkcmVuKHN0YWJIb2xkZXIpO1xuICAgICAgICAgICAgICAgIHZhciB0YWJFcnJvciA9IG1ha2VFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgICAgICB0YWJFcnJvci5hcHBlbmRDaGlsZChtYWtlRWxlbWVudCgnaDInLCBcIkNvdWxkbid0IGFjY2VzcyBjdXN0b20gZGF0YVwiKSk7XG4gICAgICAgICAgICAgICAgdGFiRXJyb3IuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ3AnLCAnJyArIGVycikpO1xuICAgICAgICAgICAgICAgIHN0YWJIb2xkZXIuYXBwZW5kQ2hpbGQodGFiRXJyb3IpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHNvdXJjZSk7XG4gICAgICAgICAgICAgICAgaWYgKHdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbCA9PT0gJ2h0dHBzOicgJiYgc291cmNlLnVyaS5pbmRleE9mKCdodHRwOicpID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpc0IuY2FuRmV0Y2hQbGFpbkhUVFAoKS50aGVuKFxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24oY2FuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjYW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFiRXJyb3IuYXBwZW5kQ2hpbGQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYWtlRWxlbWVudCgncCcsIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYWtlRWxlbWVudCgnc3Ryb25nJywgJ0hUVFAgd2FybmluZzogJyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3lvdSBtYXkgbm90IGJlIGFibGUgdG8gYWNjZXNzIEhUVFAgcmVzb3VyY2VzIGZyb20gYW4gaW5zdGFuY2Ugb2YgQmlvZGFsbGlhbmNlIHdoaWNoIHlvdSBhcmUgYWNjZXNzaW5nIHZpYSBIVFRQUy4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VFbGVtZW50KCdhJywgJ1tNb3JlIGluZm9dJywge2hyZWY6IHRoaXNCLmh0dHBXYXJuaW5nVVJMLCB0YXJnZXQ6IFwiX2JsYW5rXCJ9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGN1c3RvbU1vZGUgPSAncmVzZXQtYmluJztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIG5kcyA9IG1ha2VTb3VyY2VDb25maWcoc291cmNlKTtcbiAgICAgICAgICAgICAgICBpZiAoc291cmNlLnRpZXJfdHlwZSA9PSAnYmFtJykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29tcGxldGVCQU0obmRzKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNvdXJjZS50aWVyX3R5cGUgPT0gJ3RhYml4Jykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29tcGxldGVUYWJpeFZDRihuZHMpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhZGREYXNDb21wbGV0aW9uUGFnZShuZHMsIGZhbHNlLCBmYWxzZSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwcm9tcHRGb3JCQUkobmRzKSB7XG4gICAgICAgIHJlZnJlc2hCdXR0b24uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgYWRkQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnaW5saW5lJztcbiAgICAgICAgY2FuQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnaW5saW5lJztcblxuICAgICAgICByZW1vdmVDaGlsZHJlbihzdGFiSG9sZGVyKTtcbiAgICAgICAgY3VzdG9tTW9kZSA9ICdwcm9tcHQtYmFpJ1xuICAgICAgICBzdGFiSG9sZGVyLmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCdoMicsICdTZWxlY3QgYW4gaW5kZXggZmlsZScpKTtcbiAgICAgICAgc3RhYkhvbGRlci5hcHBlbmRDaGlsZChtYWtlRWxlbWVudCgncCcsICdEYWxsaWFuY2UgcmVxdWlyZXMgYSBCQU0gaW5kZXggKC5iYWkpIGZpbGUgd2hlbiBkaXNwbGF5aW5nIEJBTSBkYXRhLiAgVGhlc2Ugbm9ybWFsbHkgYWNjb21wYW55IEJBTSBmaWxlcy4gIEZvciBzZWN1cml0eSByZWFzb25zLCB3ZWIgYXBwbGljYXRpb25zIGxpa2UgRGFsbGlhbmNlIGNhbiBvbmx5IGFjY2VzcyBsb2NhbCBmaWxlcyB3aGljaCB5b3UgaGF2ZSBleHBsaWNpdHkgc2VsZWN0ZWQuICBQbGVhc2UgdXNlIHRoZSBmaWxlIGNob29zZXIgYmVsb3cgdG8gc2VsZWN0IHRoZSBhcHByb3ByaWF0ZSBCQUkgZmlsZScpKTtcblxuICAgICAgICBzdGFiSG9sZGVyLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCdJbmRleCBmaWxlOiAnKSk7XG4gICAgICAgIGN1c3RGaWxlID0gbWFrZUVsZW1lbnQoJ2lucHV0JywgbnVsbCwge3R5cGU6ICdmaWxlJ30pO1xuICAgICAgICBzdGFiSG9sZGVyLmFwcGVuZENoaWxkKGN1c3RGaWxlKTtcbiAgICAgICAgZGF0YVRvRmluYWxpemUgPSBuZHM7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcHJvbXB0Rm9yVGFiaXgobmRzKSB7XG4gICAgICAgIHJlZnJlc2hCdXR0b24uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgYWRkQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnaW5saW5lJztcbiAgICAgICAgY2FuQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnaW5saW5lJztcblxuICAgICAgICByZW1vdmVDaGlsZHJlbihzdGFiSG9sZGVyKTtcbiAgICAgICAgY3VzdG9tTW9kZSA9ICdwcm9tcHQtdGJpJ1xuICAgICAgICBzdGFiSG9sZGVyLmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCdoMicsICdTZWxlY3QgYW4gaW5kZXggZmlsZScpKTtcbiAgICAgICAgc3RhYkhvbGRlci5hcHBlbmRDaGlsZChtYWtlRWxlbWVudCgncCcsICdEYWxsaWFuY2UgcmVxdWlyZXMgYSBUYWJpeCBpbmRleCAoLnRiaSkgZmlsZSB3aGVuIGRpc3BsYXlpbmcgVkNGIGRhdGEuICBGb3Igc2VjdXJpdHkgcmVhc29ucywgd2ViIGFwcGxpY2F0aW9ucyBsaWtlIERhbGxpYW5jZSBjYW4gb25seSBhY2Nlc3MgbG9jYWwgZmlsZXMgd2hpY2ggeW91IGhhdmUgZXhwbGljaXR5IHNlbGVjdGVkLiAgUGxlYXNlIHVzZSB0aGUgZmlsZSBjaG9vc2VyIGJlbG93IHRvIHNlbGVjdCB0aGUgYXBwcm9wcmlhdGUgQkFJIGZpbGUnKSk7XG5cbiAgICAgICAgc3RhYkhvbGRlci5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgnSW5kZXggZmlsZTogJykpO1xuICAgICAgICBjdXN0RmlsZSA9IG1ha2VFbGVtZW50KCdpbnB1dCcsIG51bGwsIHt0eXBlOiAnZmlsZSd9KTtcbiAgICAgICAgc3RhYkhvbGRlci5hcHBlbmRDaGlsZChjdXN0RmlsZSk7XG4gICAgICAgIGRhdGFUb0ZpbmFsaXplID0gbmRzO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNvbXBsZXRlQkFNKG5kcykge1xuICAgICAgICB2YXIgaW5kZXhGO1xuICAgICAgICBpZiAobmRzLmJhaUJsb2IpIFxuICAgICAgICAgICAgaW5kZXhGID0gbmV3IEJsb2JGZXRjaGFibGUobmRzLmJhaUJsb2IpO1xuICAgICAgICBlbHNlIGlmIChuZHMudHJhbnNwb3J0ID09ICdlbmNvZGUnKVxuICAgICAgICAgICAgaW5kZXhGID0gbmV3IEVuY29kZUZldGNoYWJsZShuZHMuYmFtVVJJICsgJy5iYWknKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgaW5kZXhGID0gbmV3IFVSTEZldGNoYWJsZShuZHMuYmFtVVJJICsgJy5iYWknLCB7Y3JlZGVudGlhbHM6IG5kcy5jcmVkZW50aWFsc30pO1xuXG4gICAgICAgIGluZGV4Ri5zbGljZSgwLCAyNTYpLmZldGNoKGZ1bmN0aW9uKHIpIHtcbiAgICAgICAgICAgICAgICB2YXIgaGFzQkFJID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgaWYgKHIpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJhID0gbmV3IFVpbnQ4QXJyYXkocik7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtYWdpYzIgPSByZWFkSW50KGJhLCAwKTtcbiAgICAgICAgICAgICAgICAgICAgaGFzQkFJID0gKG1hZ2ljMiA9PSBCQUlfTUFHSUMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoaGFzQkFJKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhZGREYXNDb21wbGV0aW9uUGFnZShuZHMsIGZhbHNlLCBmYWxzZSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGJpbkZvcm1hdEVycm9yUGFnZSgnWW91IGhhdmUgc2VsZWN0ZWQgYSB2YWxpZCBCQU0gZmlsZSwgYnV0IGEgY29ycmVzcG9uZGluZyBpbmRleCAoLmJhaSkgZmlsZSB3YXMgbm90IGZvdW5kLiAgUGxlYXNlIGluZGV4IHlvdXIgQkFNIChzYW10b29scyBpbmRleCkgYW5kIHBsYWNlIHRoZSBCQUkgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnknKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNvbXBsZXRlVGFiaXhWQ0YobmRzKSB7XG4gICAgICAgIHZhciBpbmRleEY7XG4gICAgICAgIGlmIChuZHMuaW5kZXhCbG9iKSB7XG4gICAgICAgICAgICBpbmRleEYgPSBuZXcgQmxvYkZldGNoYWJsZShuZHMuaW5kZXhCbG9iKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGluZGV4RiA9IG5ldyBVUkxGZXRjaGFibGUobmRzLnVyaSArICcudGJpJyk7XG4gICAgICAgIH1cbiAgICAgICAgaW5kZXhGLnNsaWNlKDAsIDE8PDE2KS5mZXRjaChmdW5jdGlvbihyKSB7XG4gICAgICAgICAgICB2YXIgaGFzVGFiaXggPSBmYWxzZTtcbiAgICAgICAgICAgIGlmIChyKSB7XG4gICAgICAgICAgICAgICAgdmFyIGJhID0gbmV3IFVpbnQ4QXJyYXkocik7XG4gICAgICAgICAgICAgICAgaWYgKGJhWzBdID09IDMxIHx8IGJhWzFdID09IDEzOSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdW5jID0gdW5iZ3pmKHIpO1xuICAgICAgICAgICAgICAgICAgICBiYSA9IG5ldyBVaW50OEFycmF5KHVuYyk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtMiA9IHJlYWRJbnQoYmEsIDApO1xuICAgICAgICAgICAgICAgICAgICBoYXNUYWJpeCA9IChtMiA9PSBUQUJJWF9NQUdJQyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGhhc1RhYml4KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFkZERhc0NvbXBsZXRpb25QYWdlKG5kcywgZmFsc2UsIGZhbHNlLCB0cnVlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGJpbkZvcm1hdEVycm9yUGFnZSgnWW91IGhhdmUgc2VsZWN0ZWQgYSB2YWxpZCBWQ0YgZmlsZSwgYnV0IGEgY29ycmVzcG9uZGluZyBpbmRleCAoLnRiaSkgZmlsZSB3YXMgbm90IGZvdW5kLiAgUGxlYXNlIGluZGV4IHlvdXIgVkNGIChcInRhYml4IC1wIHZjZiAtZiBteWZpbGUudmNmLmd6XCIpIGFuZCBwbGFjZSB0aGUgLnRiaSBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBiaW5Gb3JtYXRFcnJvclBhZ2UobWVzc2FnZSkge1xuICAgICAgICByZWZyZXNoQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIGFkZEJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZSc7XG4gICAgICAgIGNhbkJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZSc7XG5cbiAgICAgICAgcmVtb3ZlQ2hpbGRyZW4oc3RhYkhvbGRlcik7XG4gICAgICAgIG1lc3NhZ2UgPSBtZXNzYWdlIHx8ICdDdXN0b20gZGF0YSBmb3JtYXQgbm90IHJlY29nbml6ZWQnO1xuICAgICAgICBzdGFiSG9sZGVyLmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCdoMicsICdFcnJvciBhZGRpbmcgY3VzdG9tIGRhdGEnKSk7XG4gICAgICAgIHN0YWJIb2xkZXIuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ3AnLCBtZXNzYWdlKSk7XG4gICAgICAgIHN0YWJIb2xkZXIuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ3AnLCAnQ3VycmVudGx5IHN1cHBvcnRlZCBmb3JtYXRzIGFyZSBiaWdCZWQsIGJpZ1dpZywgYW5kIEJBTS4nKSk7XG4gICAgICAgIGN1c3RvbU1vZGUgPSAncmVzZXQtYmluJztcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAgICAgICAgICAgICAgICAgIFxuICAgIHZhciBhZGREYXNDb21wbGV0aW9uUGFnZSA9IGZ1bmN0aW9uKG5kcywgY29vcmRzRGV0ZXJtaW5lZCwgcXVhbnREZXRlcm1pbmVkLCBxdWFudElycmVsZXZhbnQpIHtcbiAgICAgICAgcmVmcmVzaEJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICBhZGRCdXR0b24uc3R5bGUuZGlzcGxheSA9ICdpbmxpbmUnO1xuICAgICAgICBjYW5CdXR0b24uc3R5bGUuZGlzcGxheSA9ICdpbmxpbmUnO1xuXG4gICAgICAgIHJlbW92ZUNoaWxkcmVuKHN0YWJIb2xkZXIpO1xuICAgICAgICBzdGFiSG9sZGVyLmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCdoMicsICdBZGQgY3VzdG9tIGRhdGE6IHN0ZXAgMicpKTtcbiAgICAgICAgc3RhYkhvbGRlci5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgnTGFiZWw6ICcpKTtcbiAgICAgICAgY3VzdE5hbWUgPSBtYWtlRWxlbWVudCgnaW5wdXQnLCAnJywge3ZhbHVlOiBuZHMubmFtZX0pO1xuICAgICAgICBzdGFiSG9sZGVyLmFwcGVuZENoaWxkKGN1c3ROYW1lKTtcblxuXG4gICAgICAgIC8vIHN0YWJIb2xkZXIuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJ1VzZXI6ICcpKTtcbiAgICAgICAgY3VzdFVzZXIgPSBtYWtlRWxlbWVudCgnaW5wdXQnLCAnJyk7XG4gICAgICAgIC8vIHN0YWJIb2xkZXIuYXBwZW5kQ2hpbGQoY3VzdFVzZXIpO1xuICAgICAgICAvL3N0YWJIb2xkZXIuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJ1Bhc3M6ICcpKTtcbiAgICAgICAgY3VzdFBhc3MgPSBtYWtlRWxlbWVudCgnaW5wdXQnLCAnJyk7XG4gICAgICAgIC8vIHN0YWJIb2xkZXIuYXBwZW5kQ2hpbGQoY3VzdFBhc3MpO1xuICAgICAgICBcblxuICAgICAgICBzdGFiSG9sZGVyLmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCdicicpKTtcbiAgICAgICAgc3RhYkhvbGRlci5hcHBlbmRDaGlsZChtYWtlRWxlbWVudCgnYnInKSk7XG4gICAgICAgIHN0YWJIb2xkZXIuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ2g0JywgJ0Nvb3JkaW5hdGUgc3lzdGVtOiAnKSk7XG4gICAgICAgIGN1c3RDUyA9IG1ha2VFbGVtZW50KCdzZWxlY3QnLCBudWxsKTtcbiAgICAgICAgY3VzdENTLmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCdvcHRpb24nLCB0aGlzQi5uYW1lRm9yQ29vcmRTeXN0ZW0odGhpc0IuY29vcmRTeXN0ZW0pLCB7dmFsdWU6ICdfX2RlZmF1bHRfXyd9KSk7XG4gICAgICAgIGlmICh0aGlzQi5jaGFpbnMpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGNzayBpbiB0aGlzQi5jaGFpbnMpIHtcbiAgICAgICAgICAgICAgICB2YXIgY3MgPSB0aGlzQi5jaGFpbnNbY3NrXS5jb29yZHM7XG4gICAgICAgICAgICAgICAgY3VzdENTLmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCdvcHRpb24nLCB0aGlzQi5uYW1lRm9yQ29vcmRTeXN0ZW0oY3MpLCB7dmFsdWU6IGNza30pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjdXN0Q1MudmFsdWUgPSBuZHMubWFwcGluZyB8fCAnX19kZWZhdWx0X18nO1xuICAgICAgICBzdGFiSG9sZGVyLmFwcGVuZENoaWxkKGN1c3RDUyk7XG5cbiAgICAgICAgaWYgKGNvb3Jkc0RldGVybWluZWQpIHtcbiAgICAgICAgICAgIHN0YWJIb2xkZXIuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ3AnLCBcIihCYXNlZCBvbiBzZXJ2ZXIgcmVzcG9uc2UsIHByb2JhYmx5IGRvZXNuJ3QgbmVlZCBjaGFuZ2luZy4pXCIpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHN0YWJIb2xkZXIuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ3AnLCBbbWFrZUVsZW1lbnQoJ2InLCAnV2FybmluZzogJyksIFwidW5hYmxlIHRvIGRldGVybWluZSB0aGUgY29ycmVjdCB2YWx1ZSBmcm9tIHNlcnZlciByZXNwb25zZXMuICBQbGVhc2UgY2hlY2sgY2FyZWZ1bGx5LlwiXSkpO1xuICAgICAgICAgICAgc3RhYkhvbGRlci5hcHBlbmRDaGlsZChtYWtlRWxlbWVudCgncCcsIFwiSWYgeW91IGRvbid0IHNlZSB0aGUgbWFwcGluZyB5b3UncmUgbG9va2luZyBmb3IsIHBsZWFzZSBjb250YWN0IHRob21hc0BiaW9kYWxsaWFuY2Uub3JnXCIpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghcXVhbnRJcnJlbGV2YW50KSB7XG4gICAgICAgICAgICBzdGFiSG9sZGVyLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCdRdWFudGl0YXRpdmU6ICcpKTtcbiAgICAgICAgICAgIGN1c3RRdWFudCA9IG1ha2VFbGVtZW50KCdpbnB1dCcsIG51bGwsIHt0eXBlOiAnY2hlY2tib3gnLCBjaGVja2VkOiB0cnVlfSk7XG4gICAgICAgICAgICBpZiAodHlwZW9mIG5kcy5tYXhiaW5zICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIGN1c3RRdWFudC5jaGVja2VkID0gbmRzLm1heGJpbnM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzdGFiSG9sZGVyLmFwcGVuZENoaWxkKGN1c3RRdWFudCk7XG4gICAgICAgICAgICBpZiAocXVhbnREZXRlcm1pbmVkKSB7XG4gICAgICAgICAgICAgICAgc3RhYkhvbGRlci5hcHBlbmRDaGlsZChtYWtlRWxlbWVudCgncCcsIFwiKEJhc2VkIG9uIHNlcnZlciByZXNwb25zZSwgcHJvYmFibHkgZG9lc24ndCBuZWVkIGNoYW5naW5nLilcIikpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzdGFiSG9sZGVyLmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCdwJywgW21ha2VFbGVtZW50KCdiJywgXCJXYXJuaW5nOiBcIiksIFwidW5hYmxlIHRvIGRldGVybWluZSBjb3JyZWN0IHZhbHVlLiAgSWYgaW4gZG91YnQsIGxlYXZlIGNoZWNrZWQuXCJdKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobmRzLmJ3Z0Jsb2IpIHtcbiAgICAgICAgICAgIHN0YWJIb2xkZXIuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ3AnLCBbbWFrZUVsZW1lbnQoJ2InLCAnV2FybmluZzogJyksICdkYXRhIGFkZGVkIGZyb20gbG9jYWwgZmlsZS4gIER1ZSB0byB0aGUgYnJvd3NlciBzZWN1cml0eSBtb2RlbCwgdGhlIHRyYWNrIHdpbGwgZGlzYXBwZWFyIGlmIHlvdSByZWxvYWQgRGFsbGlhbmNlLiddKSk7XG4gICAgICAgIH1cblxuICAgICAgICBjdXN0TmFtZS5mb2N1cygpO1xuXG4gICAgICAgIGlmIChjdXN0b21Nb2RlID09PSAnYmluJyB8fCBjdXN0b21Nb2RlID09PSAncHJvbXB0LWJhaScgfHwgY3VzdG9tTW9kZSA9PT0gJ3Byb21wdC10YmknKVxuICAgICAgICAgICAgY3VzdG9tTW9kZSA9ICdmaW5hbGl6ZS1iaW4nO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICBjdXN0b21Nb2RlID0gJ2ZpbmFsaXplJztcbiAgICAgICAgZGF0YVRvRmluYWxpemUgPSBuZHM7XG4gICAgfVxuXG4gICAgdmFyIG11bHRpcGxlU2V0ID0gbnVsbDtcbiAgICB2YXIgdHJ5QWRkTXVsdGlwbGUgPSBmdW5jdGlvbihmaWxlTGlzdCkge1xuICAgICAgICB2YXIgbmV3U291cmNlcyA9IG11bHRpcGxlU2V0ID0gW107XG4gICAgICAgIGN1c3RvbU1vZGUgPSAnbXVsdGlwbGUnO1xuICAgICAgICBmb3IgKHZhciBmaSA9IDA7IGZpIDwgZmlsZUxpc3QubGVuZ3RoOyArK2ZpKSB7XG4gICAgICAgICAgICB2YXIgZiA9IGZpbGVMaXN0W2ZpXTtcbiAgICAgICAgICAgIGlmIChmKSB7XG4gICAgICAgICAgICAgICAgbmV3U291cmNlcy5wdXNoKHtibG9iOiBmfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKHZhciBmaSA9IDA7IGZpIDwgbmV3U291cmNlcy5sZW5ndGg7ICsrZmkpIHtcbiAgICAgICAgICAgIHByb2JlTXVsdGlwbGUobmV3U291cmNlc1tmaV0pO1xuICAgICAgICB9XG4gICAgICAgIHVwZGF0ZU11bHRpcGxlU3RhdHVzKCk7XG4gICAgfVxuXG4gICAgdmFyIHByb2JlTXVsdGlwbGUgPSBmdW5jdGlvbihucykge1xuICAgICAgICBwcm9iZVJlc291cmNlKG5zLCBmdW5jdGlvbihzb3VyY2UsIGVycikge1xuICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgIHNvdXJjZS5lcnJvciA9IGVycjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIHVzZWRJbmRpY2VzID0gW107XG4gICAgICAgICAgICB2YXIgYmFtcyA9IHt9LCB0YWJpeGVzID0ge307XG4gICAgICAgICAgICBmb3IgKHZhciBzaSA9IDA7IHNpIDwgbXVsdGlwbGVTZXQubGVuZ3RoOyArK3NpKSB7XG4gICAgICAgICAgICAgICAgdmFyIHMgPSBtdWx0aXBsZVNldFtzaV07XG4gICAgICAgICAgICAgICAgaWYgKHMudGllcl90eXBlID09ICdiYW0nICYmICFzLmluZGV4QmxvYikge1xuICAgICAgICAgICAgICAgICAgICBiYW1zW3MuYmxvYi5uYW1lXSA9IHM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChzLnRpZXJfdHlwZSA9PSAndGFiaXgnICYmICFzLmluZGV4QmxvYikge1xuICAgICAgICAgICAgICAgICAgICB0YWJpeGVzW3MuYmxvYi5uYW1lXSA9IHM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmb3IgKHZhciBzaSA9IDA7IHNpIDwgbXVsdGlwbGVTZXQubGVuZ3RoOyArK3NpKSB7XG4gICAgICAgICAgICAgICAgdmFyIHMgPSBtdWx0aXBsZVNldFtzaV07XG4gICAgICAgICAgICAgICAgaWYgKHMudGllcl90eXBlID09PSAnYmFpJykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgYmFpUGF0dGVybiA9IG5ldyBSZWdFeHAoJyguKylcXFxcLmJhaSQnKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1hdGNoID0gYmFpUGF0dGVybi5leGVjKHMuYmxvYi5uYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1hdGNoICYmIGJhbXNbbWF0Y2hbMV1dKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBiYW1zW21hdGNoWzFdXS5pbmRleEJsb2IgPSBzLmJsb2I7XG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VkSW5kaWNlcy5wdXNoKHNpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocy50aWVyX3R5cGUgPT09ICd0YWJpeC1pbmRleCcpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRiaVBhdHRlcm4gPSBuZXcgUmVnRXhwKCcoLispXFxcXC50YmkkJyk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtYXRjaCA9IHRiaVBhdHRlcm4uZXhlYyhzLmJsb2IubmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaCAmJiB0YWJpeGVzW21hdGNoWzFdXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFiaXhlc1ttYXRjaFsxXV0uaW5kZXhCbG9iID0gcy5ibG9iO1xuICAgICAgICAgICAgICAgICAgICAgICAgdXNlZEluZGljZXMucHVzaChzaSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZvciAodmFyIGJpID0gdXNlZEluZGljZXMubGVuZ3RoIC0gMTsgYmkgPj0gMDsgLS1iaSkge1xuICAgICAgICAgICAgICAgIG11bHRpcGxlU2V0LnNwbGljZSh1c2VkSW5kaWNlc1tiaV0sIDEpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB1cGRhdGVNdWx0aXBsZVN0YXR1cygpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICB2YXIgdXBkYXRlTXVsdGlwbGVTdGF0dXMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmVtb3ZlQ2hpbGRyZW4oc3RhYkhvbGRlcik7XG4gICAgICAgIHZhciBuZWVkc0luZGV4ID0gZmFsc2U7XG4gICAgICAgIHZhciBtdWx0VGFibGUgPSBtYWtlRWxlbWVudCgndGFibGUnLCBtdWx0aXBsZVNldFxuICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24ocykge3JldHVybiAhcy5oaWRkZW59KVxuICAgICAgICAgIC5tYXAoZnVuY3Rpb24ocykge1xuICAgICAgICAgICAgdmFyIHJvdyA9IG1ha2VFbGVtZW50KCd0cicpO1xuICAgICAgICAgICAgcm93LmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCd0ZCcsIHMubmFtZSB8fCBzLmJsb2IubmFtZSkpO1xuICAgICAgICAgICAgdmFyIHR5cGVDb250ZW50O1xuICAgICAgICAgICAgaWYgKHMuZXJyb3IpIHtcbiAgICAgICAgICAgICAgICB0eXBlQ29udGVudCA9IG1ha2VFbGVtZW50KCdzcGFuJywgJ0Vycm9yJywgbnVsbCwge2NvbG9yOiAncmVkJ30pO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChzLnRpZXJfdHlwZSkge1xuICAgICAgICAgICAgICAgIHR5cGVDb250ZW50ID0gcy5wYXlsb2FkIHx8IHMudGllcl90eXBlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0eXBlQ29udGVudCA9IHRoaXNCLm1ha2VMb2FkZXIoMTYpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgY2NzO1xuICAgICAgICAgICAgdmFyIHN0YXRlID0gJ3Vua25vd24nO1xuICAgICAgICAgICAgaWYgKHMudGllcl90eXBlID09ICdid2cnIHx8IHMudGllcl90eXBlID09ICdtZW1zdG9yZScpIHtcbiAgICAgICAgICAgICAgICBzdGF0ZSA9ICdva2F5JztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocy50aWVyX3R5cGUgPT0gJ2JhbScpIHtcbiAgICAgICAgICAgICAgICBzdGF0ZSA9IHMuaW5kZXhCbG9iID8gJ29rYXknIDogJ25lZWRzLWluZGV4JztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocy50aWVyX3R5cGUgPT0gJ3RhYml4Jykge1xuICAgICAgICAgICAgICAgIHN0YXRlID0gcy5pbmRleEJsb2IgPyAnb2theScgOiAnbmVlZHMtaW5kZXgnO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoc3RhdGUgPT0gJ29rYXknKSB7XG4gICAgICAgICAgICAgICAgY2NzID0gbWFrZUVsZW1lbnQoJ3NlbGVjdCcsIG51bGwsIG51bGwsIHt3aWR0aDogJzE1MHB4J30pO1xuICAgICAgICAgICAgICAgIGNjcy5hcHBlbmRDaGlsZChtYWtlRWxlbWVudCgnb3B0aW9uJywgdGhpc0IubmFtZUZvckNvb3JkU3lzdGVtKHRoaXNCLmNvb3JkU3lzdGVtKSwge3ZhbHVlOiAnX19kZWZhdWx0X18nfSkpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzQi5jaGFpbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgY3NrIGluIHRoaXNCLmNoYWlucykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNzID0gdGhpc0IuY2hhaW5zW2Nza10uY29vcmRzO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2NzLmFwcGVuZENoaWxkKG1ha2VFbGVtZW50KCdvcHRpb24nLCB0aGlzQi5uYW1lRm9yQ29vcmRTeXN0ZW0oY3MpLCB7dmFsdWU6IGNza30pKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjY3MudmFsdWUgPSBzLm1hcHBpbmcgfHwgJ19fZGVmYXVsdF9fJztcblxuICAgICAgICAgICAgICAgIGNjcy5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbihldikge1xuICAgICAgICAgICAgICAgICAgICBzLm1hcHBpbmcgPSBjY3MudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHMpO1xuICAgICAgICAgICAgICAgIH0sIGZhbHNlKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc3RhdGUgPT0gJ25lZWRzLWluZGV4Jykge1xuICAgICAgICAgICAgICAgIGNjcyA9IG1ha2VFbGVtZW50KCdzcGFuJywgJ05lZWRzIGluZGV4Jywge30sIHtjb2xvcjogJ3JlZCd9KTtcbiAgICAgICAgICAgICAgICBuZWVkc0luZGV4ID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIG1ha2VFbGVtZW50KCd0cicsIFttYWtlRWxlbWVudCgndGQnLCBzLm5hbWUgfHwgcy5ibG9iLm5hbWUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYWtlRWxlbWVudCgndGQnLCB0eXBlQ29udGVudCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ha2VFbGVtZW50KCd0ZCcsIGNjcyldKTtcblxuICAgICAgICB9KSwge2NsYXNzTmFtZTogJ3RhYmxlIHRhYmxlLXN0cmlwZWQgdGFibGUtY29uZGVuc2VkJ30pO1xuICAgICAgICBzdGFiSG9sZGVyLmFwcGVuZENoaWxkKG11bHRUYWJsZSk7XG5cbiAgICAgICAgaWYgKG5lZWRzSW5kZXgpIHtcbiAgICAgICAgICAgIHN0YWJIb2xkZXIuYXBwZW5kQ2hpbGQobWFrZUVsZW1lbnQoJ3AnLCAnU29tZSBvZiB0aGVzZSBmaWxlcyBhcmUgbWlzc2luZyByZXF1aXJlZCBpbmRleCAoLmJhaSBvciAudGJpKSBmaWxlcy4gIEZvciBzZWN1cml0eSByZWFzb25zLCB3ZWIgYXBwbGljYXRpb25zIGxpa2UgRGFsbGlhbmNlIGNhbiBvbmx5IGFjY2VzcyBsb2NhbCBmaWxlcyB3aGljaCB5b3UgaGF2ZSBleHBsaWNpdHkgc2VsZWN0ZWQuICBQbGVhc2UgdXNlIHRoZSBmaWxlIGNob29zZXIgYmVsb3cgdG8gc2VsZWN0IHRoZSBhcHByb3ByaWF0ZSBpbmRleCBmaWxlJykpO1xuICAgICAgICAgICAgc3RhYkhvbGRlci5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgnSW5kZXggZmlsZShzKTogJykpO1xuICAgICAgICAgICAgdmFyIGluZGV4RmlsZSA9IG1ha2VFbGVtZW50KCdpbnB1dCcsIG51bGwsIHt0eXBlOiAnZmlsZScsIG11bHRpcGxlOiAnbXVsdGlwbGUnfSk7XG4gICAgICAgICAgICBzdGFiSG9sZGVyLmFwcGVuZENoaWxkKGluZGV4RmlsZSk7XG4gICAgICAgICAgICBpbmRleEZpbGUuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZnVuY3Rpb24oZXYpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZmlsZXNldCBjaGFuZ2VkJyk7XG4gICAgICAgICAgICAgICAgdmFyIGZpbGVMaXN0ID0gaW5kZXhGaWxlLmZpbGVzIHx8IFtdO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGZpID0gMDsgZmkgPCBmaWxlTGlzdC5sZW5ndGg7ICsrZmkpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGYgPSBmaWxlTGlzdFtmaV07XG4gICAgICAgICAgICAgICAgICAgIGlmIChmKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbnMgPSB7YmxvYjogZiwgaGlkZGVuOiB0cnVlfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG11bHRpcGxlU2V0LnB1c2gobnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJvYmVNdWx0aXBsZShucyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgY2FuQnV0dG9uID0gbWFrZUVsZW1lbnQoJ2J1dHRvbicsICdDYW5jZWwnLCB7Y2xhc3NOYW1lOiAnYnRuJ30pO1xuICAgIGNhbkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpOyBldi5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBpZiAoY3VzdG9tTW9kZSA9PT0gJ2ZpbmFsaXplLWJpbicpXG4gICAgICAgICAgICBzd2l0Y2hUb0Jpbk1vZGUoKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgc3dpdGNoVG9DdXN0b21Nb2RlKCk7XG4gICAgfSwgZmFsc2UpO1xuXG4gICAgdmFyIHJlZnJlc2hCdXR0b24gPSBtYWtlRWxlbWVudCgnYnV0dG9uJywgJ1JlZnJlc2gnLCB7Y2xhc3NOYW1lOiAnYnRuJ30pO1xuICAgIHJlZnJlc2hCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldikge1xuICAgICAgICBldi5zdG9wUHJvcGFnYXRpb24oKTsgZXYucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdGhpc0IucXVlcnlSZWdpc3RyeShfX21hcHBpbmcpO1xuICAgIH0sIGZhbHNlKTtcbiAgICB0aGlzLm1ha2VUb29sdGlwKHJlZnJlc2hCdXR0b24sICdDbGljayB0byByZS1mZXRjaCBkYXRhIGZyb20gdGhlIERBUyByZWdpc3RyeScpO1xuXG4gICAgdmFyIGJ1dHRvbkhvbGRlciA9IG1ha2VFbGVtZW50KCdkaXYnLCBbYWRkQnV0dG9uLCAnICcsIGNhbkJ1dHRvbiwgJyAnLCByZWZyZXNoQnV0dG9uXSk7XG4gICAgYnV0dG9uSG9sZGVyLnN0eWxlLm1hcmdpbiA9ICcxMHB4JztcbiAgICBhc2Zvcm0uYXBwZW5kQ2hpbGQoYnV0dG9uSG9sZGVyKTtcblxuICAgIHBvcHVwLmFwcGVuZENoaWxkKGFzZm9ybSk7XG4gICAgbWFrZVN0YWIodGhpc0IuYXZhaWxhYmxlU291cmNlcyk7XG5cbiAgICB0aGlzLnNob3dUb29sUGFuZWwocG9wdXApO1xuICAgIHRoaXMuc2V0VWlNb2RlKCdhZGQnKTtcblxuICAgIGlmIChmaXJzdERlZkJ1dHRvbikge1xuICAgICAgICBhY3RpdmF0ZUJ1dHRvbihhZGRNb2RlQnV0dG9ucywgZmlyc3REZWZCdXR0b24pO1xuICAgICAgICBtYWtlU3RhYihuZXcgT2JzZXJ2ZWQoZmlyc3REZWZTb3VyY2VzKSk7XG4gICAgfVxufVxuIiwiLyogLSotIG1vZGU6IGphdmFzY3JpcHQ7IGMtYmFzaWMtb2Zmc2V0OiA0OyBpbmRlbnQtdGFicy1tb2RlOiBuaWwgLSotICovXG5cbi8vIFxuLy8gRGFsbGlhbmNlIEdlbm9tZSBFeHBsb3JlclxuLy8gKGMpIFRob21hcyBEb3duIDIwMDYtMjAxMFxuLy9cbi8vIHRyaXguanM6IFVDU0Mtc3R5bGUgZnJlZSB0ZXh0IGluZGljZXNcbi8vXG5cblwidXNlIHN0cmljdFwiO1xuXG5mdW5jdGlvbiBjb25uZWN0VHJpeChpeCwgaXh4LCBjYWxsYmFjaykge1xuICAgIGl4eC5mZXRjaEFzVGV4dChmdW5jdGlvbihpeHhEYXRhKSB7XG4gICAgICAgIGlmICghaXh4RGF0YSkgXG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCwgXCJDb3VsZG4ndCBmZXRjaCBpbmRleC1pbmRleFwiKTtcblxuICAgICAgICB2YXIgdG9rcyA9IGl4eERhdGEuc3BsaXQoLyguKykoWzAtOUEtRl17MTB9KVxcbi8pO1xuXG4gICAgICAgIHZhciBrZXlzID0gW107XG4gICAgICAgIHZhciBvZmZzZXRzID0gW107XG4gICAgICAgIGZvciAodmFyIHRpID0gMTsgdGkgPCB0b2tzLmxlbmd0aDsgdGkgKz0gMykge1xuICAgICAgICAgICAga2V5cy5wdXNoKHRva3NbdGldKTtcbiAgICAgICAgICAgIG9mZnNldHMucHVzaChwYXJzZUludCh0b2tzW3RpKzFdLCAxNikpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG5ldyBUcml4SW5kZXgoa2V5cywgb2Zmc2V0cywgaXgpKTtcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gVHJpeEluZGV4KGtleXMsIG9mZnNldHMsIGl4KSB7XG4gICAgdGhpcy5rZXlzID0ga2V5cztcbiAgICB0aGlzLm9mZnNldHMgPSBvZmZzZXRzO1xuICAgIHRoaXMuaXggPSBpeDtcbn1cblxuVHJpeEluZGV4LnByb3RvdHlwZS5sb29rdXAgPSBmdW5jdGlvbihxdWVyeSwgY2FsbGJhY2spIHtcbiAgICB2YXIgaXhzbGljZTtcblxuICAgIHZhciBxdGFnID0gKHF1ZXJ5ICsgJyAgICAgJykuc3Vic3RyaW5nKDAsNSkudG9Mb3dlckNhc2UoKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMua2V5cy5sZW5ndGg7ICsraSkge1xuICAgICAgICBpZiAocXRhZy5sb2NhbGVDb21wYXJlKHRoaXMua2V5c1tpXSkgPCAwKSB7XG4gICAgICAgICAgICBpeHNsaWNlID0gdGhpcy5peC5zbGljZSh0aGlzLm9mZnNldHNbaSAtIDFdLCB0aGlzLm9mZnNldHNbaV0gLSB0aGlzLm9mZnNldHNbaSAtIDFdKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCFpeHNsaWNlKSB7XG4gICAgICAgIGl4c2xpY2UgPSB0aGlzLml4LnNsaWNlKHRoaXMub2Zmc2V0c1t0aGlzLm9mZnNldHMubGVuZ3RoIC0gMV0pO1xuICAgIH1cblxuICAgIGl4c2xpY2UuZmV0Y2hBc1RleHQoZnVuY3Rpb24oaXN0KSB7XG4gICAgICAgIHZhciBsaW5lcyA9IGlzdC5zcGxpdCgnXFxuJyk7XG4gICAgICAgIGZvciAodmFyIGxpID0gMDsgbGkgPCBsaW5lcy5sZW5ndGg7ICsrbGkpIHtcbiAgICAgICAgICAgIGlmIChsaW5lc1tsaV0uaW5kZXhPZihxdWVyeS50b0xvd2VyQ2FzZSgpICsgJyAnKSA9PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGxpbmVzW2xpXS5zcGxpdCgnICcpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCk7XG4gICAgfSk7XG59XG5cbmlmICh0eXBlb2YobW9kdWxlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IHtcbiAgICAgICAgY29ubmVjdFRyaXg6IGNvbm5lY3RUcml4XG4gICAgfTtcbn0iLCIvKiAtKi0gbW9kZTogamF2YXNjcmlwdDsgYy1iYXNpYy1vZmZzZXQ6IDQ7IGluZGVudC10YWJzLW1vZGU6IG5pbCAtKi0gKi9cblxuLy8gXG4vLyBEYWxsaWFuY2UgR2Vub21lIEV4cGxvcmVyXG4vLyAoYykgVGhvbWFzIERvd24gMjAwNi0yMDEwXG4vL1xuLy8gdHdvQml0LmpzOiBwYWNrZWQtYmluYXJ5IHJlZmVyZW5jZSBzZXF1ZW5jZXNcbi8vXG5cblwidXNlIHN0cmljdFwiO1xuXG5pZiAodHlwZW9mKHJlcXVpcmUpICE9PSAndW5kZWZpbmVkJykge1xuICAgIHZhciBiaW4gPSByZXF1aXJlKCcuL2JpbicpO1xuICAgIHZhciByZWFkSW50ID0gYmluLnJlYWRJbnQ7XG4gICAgdmFyIHJlYWRJbnRCRSA9IGJpbi5yZWFkSW50QkU7XG5cbiAgICB2YXIgc3BhbnMgPSByZXF1aXJlKCcuL3NwYW5zJyk7XG4gICAgdmFyIFJhbmdlID0gc3BhbnMuUmFuZ2U7XG4gICAgdmFyIHVuaW9uID0gc3BhbnMudW5pb247XG4gICAgdmFyIGludGVyc2VjdGlvbiA9IHNwYW5zLmludGVyc2VjdGlvbjtcbn1cblxudmFyIFRXT0JJVF9NQUdJQyA9IDB4MWE0MTI3NDM7XG52YXIgVFdPQklUX01BR0lDX0JFID0gMHg0MzI3NDExYTtcbnZhciBIRUFERVJfQkxPQ0tfU0laRSA9IDEyNTAwO1xuXG5mdW5jdGlvbiBUd29CaXRGaWxlKCkge1xufVxuXG5mdW5jdGlvbiBtYWtlVHdvQml0KGZldGNoYWJsZSwgY250KSB7XG4gICAgdmFyIHRiID0gbmV3IFR3b0JpdEZpbGUoKTtcbiAgICB0Yi5kYXRhID0gZmV0Y2hhYmxlO1xuICAgIHZhciBoZWFkZXJCbG9ja1NpemUgPSBIRUFERVJfQkxPQ0tfU0laRTtcbiAgICB2YXIgaGVhZGVyQmxvY2tzRmV0Y2hlZD0wO1xuICAgIFxuICAgIHRiLmRhdGEuc2xpY2UoMCwgaGVhZGVyQmxvY2tTaXplKS5mZXRjaChmdW5jdGlvbihyKSB7XG4gICAgICAgIGlmICghcikge1xuICAgICAgICAgICAgcmV0dXJuIGNudChudWxsLCBcIkNvdWxkbid0IGFjY2VzcyBkYXRhXCIpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBiYSA9IG5ldyBVaW50OEFycmF5KHIpO1xuICAgICAgICB2YXIgbWFnaWMgPSByZWFkSW50KGJhLCAwKTtcbiAgICAgICAgaWYgKG1hZ2ljID09IFRXT0JJVF9NQUdJQykge1xuICAgICAgICAgICAgdGIucmVhZEludCA9IHJlYWRJbnQ7XG4gICAgICAgIH0gZWxzZSBpZiAobWFnaWMgPT0gVFdPQklUX01BR0lDX0JFKSB7XG4gICAgICAgICAgICB0Yi5yZWFkSW50ID0gcmVhZEludEJFO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGNudChudWxsLCBcIk5vdCBhIC4yYml0IGZpbGUsIG1hZ2ljPTB4XCIgKyBtYWdpYy50b1N0cmluZygxNikpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHZlcnNpb24gPSB0Yi5yZWFkSW50KGJhLCA0KTtcbiAgICAgICAgaWYgKHZlcnNpb24gIT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIGNudChudWxsLCAnVW5zdXBwb3J0ZWQgdmVyc2lvbiAnICsgdmVyc2lvbik7XG4gICAgICAgIH1cblxuICAgICAgICB0Yi5zZXFDb3VudCA9IHRiLnJlYWRJbnQoYmEsIDgpO1xuICAgICAgICB0Yi5zZXFEaWN0ID0ge307XG5cbiAgICAgICAgdmFyIHAgPSAxNiwgaT0wO1xuICAgICAgICB2YXIgbyA9IDA7ICAvLyBPZmZzZXQgb2YgdGhlIGN1cnJlbnQgYmxvY2sgaWYgd2UgbmVlZCB0byBmZXRjaCBtdWx0aXBsZSBoZWFkZXIgYmxvY2tzLlxuXG4gICAgICAgIHZhciBwYXJzZVNlcUluZm8gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHdoaWxlIChpIDwgdGIuc2VxQ291bnQpIHtcbiAgICAgICAgICAgICAgICB2YXIgbnMgPSBiYVtwXTtcbiAgICAgICAgICAgICAgICBpZiAocCArIG5zICsgNiA+PSBiYS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyQmxvY2tzRmV0Y2hlZCArPSBoZWFkZXJCbG9ja1NpemU7XG4gICAgICAgICAgICAgICAgICAgIGhlYWRlckJsb2NrU2l6ZSA9IE1hdGgubWF4KEhFQURFUl9CTE9DS19TSVpFLE1hdGguZmxvb3IoaGVhZGVyQmxvY2tzRmV0Y2hlZCp0Yi5zZXFDb3VudC9pKSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0Yi5kYXRhLnNsaWNlKG8gKyBwLCBoZWFkZXJCbG9ja1NpemUpLmZldGNoKGZ1bmN0aW9uIChyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvICs9IHA7XG4gICAgICAgICAgICAgICAgICAgICAgICBwID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhID0gbmV3IFVpbnQ4QXJyYXkocik7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZVNlcUluZm8oKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgKytwO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbmFtZSA9ICcnO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMTsgaiA8PSBuczsgKytqKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYmFbcCsrXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdmFyIG9mZnNldCA9IHRiLnJlYWRJbnQoYmEsIHApO1xuICAgICAgICAgICAgICAgICAgICBwICs9IDQ7XG4gICAgICAgICAgICAgICAgICAgIHRiLnNlcURpY3RbbmFtZV0gPSBuZXcgVHdvQml0U2VxKHRiLCBvZmZzZXQpO1xuICAgICAgICAgICAgICAgICAgICArK2k7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNudCh0Yik7XG4gICAgICAgIH1cblxuICAgICAgICBwYXJzZVNlcUluZm8oKTtcbiAgICAgICAgXG4gICAgfSk7XG59XG5cblR3b0JpdEZpbGUucHJvdG90eXBlLmdldFNlcSA9IGZ1bmN0aW9uKGNocikge1xuICAgIHZhciBzZXEgPSB0aGlzLnNlcURpY3RbY2hyXTtcbiAgICBpZiAoIXNlcSkge1xuICAgICAgICBzZXEgPSB0aGlzLnNlcURpY3RbJ2NocicgKyBjaHJdO1xuICAgIH1cbiAgICByZXR1cm4gc2VxO1xufVxuXG5Ud29CaXRGaWxlLnByb3RvdHlwZS5mZXRjaCA9IGZ1bmN0aW9uKGNociwgbWluLCBtYXgsIGNudCkge1xuICAgIHZhciBzZXEgPSB0aGlzLmdldFNlcShjaHIpO1xuICAgIGlmICghc2VxKSB7XG4gICAgICAgIHJldHVybiBjbnQobnVsbCwgXCJDb3VsZG4ndCBmaW5kIFwiICsgY2hyKTtcbiAgICB9IGVsc2UgaWYgKG1heCA8PSBtaW4pIHtcbiAgICAgICAgcmV0dXJuIGNudCgnJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgc2VxLmZldGNoKG1pbiwgbWF4LCBjbnQpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gVHdvQml0U2VxKHRiZiwgb2Zmc2V0KSB7XG4gICAgdGhpcy50YmYgPSB0YmY7XG4gICAgdGhpcy5vZmZzZXQgPSBvZmZzZXQ7XG59XG5cblR3b0JpdFNlcS5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uKGNudCkge1xuICAgIGlmICh0aGlzLnNlcU9mZnNldCkge1xuICAgICAgICByZXR1cm4gY250KCk7XG4gICAgfVxuXG4gICAgdmFyIHRoaXNCID0gdGhpcztcbiAgICB0aGlzQi50YmYuZGF0YS5zbGljZSh0aGlzQi5vZmZzZXQsIDgpLmZldGNoKGZ1bmN0aW9uKHIxKSB7XG4gICAgICAgIGlmICghcjEpIHtcbiAgICAgICAgICAgIHJldHVybiBjbnQoJ0ZldGNoIGZhaWxlZCcpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBiYSA9IG5ldyBVaW50OEFycmF5KHIxKTtcbiAgICAgICAgdGhpc0IuX2xlbmd0aCA9IHRoaXNCLnRiZi5yZWFkSW50KGJhLCAwKTtcbiAgICAgICAgdGhpc0IubkJsb2NrQ250ID0gdGhpc0IudGJmLnJlYWRJbnQoYmEsIDQpO1xuICAgICAgICB0aGlzQi50YmYuZGF0YS5zbGljZSh0aGlzQi5vZmZzZXQgKyA4LCB0aGlzQi5uQmxvY2tDbnQqOCArIDQpLmZldGNoKGZ1bmN0aW9uKHIyKSB7XG4gICAgICAgICAgICBpZiAoIXIyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNudCgnRmV0Y2ggZmFpbGVkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgYmEgPSBuZXcgVWludDhBcnJheShyMik7XG4gICAgICAgICAgICB2YXIgbmJzID0gbnVsbDtcbiAgICAgICAgICAgIGZvciAodmFyIGIgPSAwOyBiIDwgdGhpc0IubkJsb2NrQ250OyArK2IpIHtcbiAgICAgICAgICAgICAgICB2YXIgbmJNaW4gPSB0aGlzQi50YmYucmVhZEludChiYSwgYiAqIDQpO1xuICAgICAgICAgICAgICAgIHZhciBuYkxlbiA9IHRoaXNCLnRiZi5yZWFkSW50KGJhLCAoYiArIHRoaXNCLm5CbG9ja0NudCkgKiA0KTtcbiAgICAgICAgICAgICAgICB2YXIgbmIgPSBuZXcgUmFuZ2UobmJNaW4sIG5iTWluICsgbmJMZW4gLSAxKTtcbiAgICAgICAgICAgICAgICBpZiAoIW5icykge1xuICAgICAgICAgICAgICAgICAgICBuYnMgPSBuYjtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBuYnMgPSB1bmlvbihuYnMsIG5iKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzQi5uQmxvY2tzID0gbmJzO1xuICAgICAgICAgICAgdGhpc0IubUJsb2NrQ250ID0gdGhpc0IudGJmLnJlYWRJbnQoYmEsIHRoaXNCLm5CbG9ja0NudCo4KTtcbiAgICAgICAgICAgIHRoaXNCLnNlcUxlbmd0aCA9ICgodGhpc0IuX2xlbmd0aCArIDMpLzQpfDA7XG4gICAgICAgICAgICB0aGlzQi5zZXFPZmZzZXQgPSB0aGlzQi5vZmZzZXQgKyAxNiArICgodGhpc0IubkJsb2NrQ250ICsgdGhpc0IubUJsb2NrQ250KSAqIDgpO1xuICAgICAgICAgICAgcmV0dXJuIGNudCgpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn1cblxudmFyIFRXT0JJVF9UQUJMRSA9IFsnVCcsICdDJywgJ0EnLCAnRyddO1xuXG5Ud29CaXRTZXEucHJvdG90eXBlLmZldGNoID0gZnVuY3Rpb24obWluLCBtYXgsIGNudCkge1xuICAgIC0tbWluOyAtLW1heDsgICAgICAgLy8gU3dpdGNoIHRvIHplcm8tYmFzZWQuXG4gICAgdmFyIHRoaXNCID0gdGhpcztcbiAgICB0aGlzLmluaXQoZnVuY3Rpb24oZXJyb3IpIHtcbiAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4gY250KG51bGwsIGVycm9yKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBmZXRjaE1pbiA9IG1pbiA+PiAyO1xuICAgICAgICB2YXIgZmV0Y2hNYXggPSBtYXggKyAzID4+IDI7XG4gICAgICAgIGlmIChmZXRjaE1pbiA8IDAgfHwgZmV0Y2hNYXggPiB0aGlzQi5zZXFMZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiBjbnQoJ0Nvb3JkaW5hdGVzIG91dCBvZiBib3VuZHM6ICcgKyBtaW4gKyAnOicgKyBtYXgpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpc0IudGJmLmRhdGEuc2xpY2UodGhpc0Iuc2VxT2Zmc2V0ICsgZmV0Y2hNaW4sIGZldGNoTWF4IC0gZmV0Y2hNaW4pLnNhbHRlZCgpLmZldGNoKGZ1bmN0aW9uKHIpIHtcbiAgICAgICAgICAgIGlmIChyID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY250KCdTZXFGZXRjaCBmYWlsZWQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBzZXFEYXRhID0gbmV3IFVpbnQ4QXJyYXkocik7XG5cbiAgICAgICAgICAgIHZhciBuU3BhbnMgPSBbXTtcbiAgICAgICAgICAgIGlmICh0aGlzQi5uQmxvY2tzKSB7XG4gICAgICAgICAgICAgICAgdmFyIGludHIgPSBpbnRlcnNlY3Rpb24obmV3IFJhbmdlKG1pbiwgbWF4KSwgdGhpc0IubkJsb2Nrcyk7XG4gICAgICAgICAgICAgICAgaWYgKGludHIpIHtcbiAgICAgICAgICAgICAgICAgICAgblNwYW5zID0gaW50ci5yYW5nZXMoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZhciBzZXFzdHIgPSAnJztcbiAgICAgICAgICAgIHZhciBwdHIgPSBtaW47XG4gICAgICAgICAgICBmdW5jdGlvbiBmaWxsU2VxKGZzbSkge1xuICAgICAgICAgICAgICAgIHdoaWxlIChwdHIgPD0gZnNtKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBiYiA9IChwdHIgPj4gMikgLSBmZXRjaE1pbjtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5pID0gcHRyICYgMHgzO1xuICAgICAgICAgICAgICAgICAgICB2YXIgYnYgPSBzZXFEYXRhW2JiXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG47XG4gICAgICAgICAgICAgICAgICAgIGlmIChuaSA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuID0gKGJ2ID4+IDYpICYgMHgzO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5pID09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG4gPSAoYnYgPj4gNCkgJiAweDM7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobmkgPT0gMikge1xuICAgICAgICAgICAgICAgICAgICAgICAgbiA9IChidiA+PiAyKSAmIDB4MztcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG4gPSAoYnYpICYgMHgzO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHNlcXN0ciArPSBUV09CSVRfVEFCTEVbbl07XG4gICAgICAgICAgICAgICAgICAgICsrcHRyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZm9yICh2YXIgYiA9IDA7IGIgPCBuU3BhbnMubGVuZ3RoOyArK2IpIHtcbiAgICAgICAgICAgICAgICB2YXIgbmIgPSBuU3BhbnNbYl07XG4gICAgICAgICAgICAgICAgaWYgKHB0ciA+IG5iLm1pbigpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93ICdOIG1pc21hdGNoLi4uJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHB0ciA8IG5iLm1pbigpKSB7XG4gICAgICAgICAgICAgICAgICAgIGZpbGxTZXEobmIubWluKCkgLSAxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgd2hpbGUgKHB0ciA8PSBuYi5tYXgoKSkge1xuICAgICAgICAgICAgICAgICAgICBzZXFzdHIgKz0gJ04nO1xuICAgICAgICAgICAgICAgICAgICArK3B0cjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocHRyIDw9IG1heCkge1xuICAgICAgICAgICAgICAgIGZpbGxTZXEobWF4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjbnQoc2Vxc3RyKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG5cblR3b0JpdFNlcS5wcm90b3R5cGUubGVuZ3RoID0gZnVuY3Rpb24oY250KSB7XG4gICAgdmFyIHRoaXNCID0gdGhpcztcbiAgICB0aGlzLmluaXQoZnVuY3Rpb24oZXJyb3IpIHtcbiAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4gY250KG51bGwsIGVycm9yKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBjbnQodGhpc0IuX2xlbmd0aCk7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuaWYgKHR5cGVvZihtb2R1bGUpICE9PSAndW5kZWZpbmVkJykge1xuICAgIG1vZHVsZS5leHBvcnRzID0ge1xuICAgICAgICBtYWtlVHdvQml0OiBtYWtlVHdvQml0XG4gICAgfTtcbn1cbiIsIi8qIC0qLSBtb2RlOiBqYXZhc2NyaXB0OyBjLWJhc2ljLW9mZnNldDogNDsgaW5kZW50LXRhYnMtbW9kZTogbmlsIC0qLSAqL1xuXG4vLyBcbi8vIERhbGxpYW5jZSBHZW5vbWUgRXhwbG9yZXJcbi8vIChjKSBUaG9tYXMgRG93biAyMDA2LTIwMTBcbi8vXG4vLyB1dGlscy5qczogb2Rkcywgc29kcywgYW5kIGVuZHMuXG4vL1xuXG5cInVzZSBzdHJpY3RcIjtcblxuaWYgKHR5cGVvZihyZXF1aXJlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB2YXIgc2hhMSA9IHJlcXVpcmUoJy4vc2hhMScpO1xuICAgIHZhciBiNjRfc2hhMSA9IHNoYTEuYjY0X3NoYTE7XG59XG5cbnZhciBOVU1fUkVHRVhQID0gbmV3IFJlZ0V4cCgnWzAtOV0rJyk7XG5cbmZ1bmN0aW9uIHN0cmluZ1RvTnVtYmVyc0FycmF5KHN0cikge1xuICAgIHZhciBudW1zID0gbmV3IEFycmF5KCk7XG4gICAgdmFyIG07XG4gICAgd2hpbGUgKG0gPSBOVU1fUkVHRVhQLmV4ZWMoc3RyKSkge1xuICAgICAgICBudW1zLnB1c2gobVswXSk7XG4gICAgICAgIHN0cj1zdHIuc3Vic3RyaW5nKG0uaW5kZXggKyAobVswXS5sZW5ndGgpKTtcbiAgICB9XG4gICAgcmV0dXJuIG51bXM7XG59XG5cbnZhciBTVFJJQ1RfTlVNX1JFR0VYUCA9IG5ldyBSZWdFeHAoJ15bMC05XSskJyk7XG5cbmZ1bmN0aW9uIHN0cmluZ1RvSW50KHN0cikge1xuICAgIHN0ciA9IHN0ci5yZXBsYWNlKG5ldyBSZWdFeHAoJywnLCAnZycpLCAnJyk7XG4gICAgaWYgKCFTVFJJQ1RfTlVNX1JFR0VYUC50ZXN0KHN0cikpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHJldHVybiBzdHJ8MDtcbn1cblxuZnVuY3Rpb24gcHVzaG5ldyhhLCB2KSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIGlmIChhW2ldID09IHYpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhLnB1c2godik7XG59XG5cbmZ1bmN0aW9uIHB1c2hvKG9iaiwgaywgdikge1xuICAgIGlmIChvYmpba10pIHtcbiAgICAgICAgb2JqW2tdLnB1c2godik7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgb2JqW2tdID0gW3ZdO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gcHVzaG5ld28ob2JqLCBrLCB2KSB7XG4gICAgdmFyIGEgPSBvYmpba107XG4gICAgaWYgKGEpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhLmxlbmd0aDsgKytpKSB7ICAgIC8vIGluZGV4T2YgcmVxdWlyZXMgSlMxNiA6LSguXG4gICAgICAgICAgICBpZiAoYVtpXSA9PSB2KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGEucHVzaCh2KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBvYmpba10gPSBbdl07XG4gICAgfVxufVxuXG5cbmZ1bmN0aW9uIHBpY2soYSwgYiwgYywgZClcbntcbiAgICBpZiAoYSkge1xuICAgICAgICByZXR1cm4gYTtcbiAgICB9IGVsc2UgaWYgKGIpIHtcbiAgICAgICAgcmV0dXJuIGI7XG4gICAgfSBlbHNlIGlmIChjKSB7XG4gICAgICAgIHJldHVybiBjO1xuICAgIH0gZWxzZSBpZiAoZCkge1xuICAgICAgICByZXR1cm4gZDtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHB1c2huZXcobCwgbylcbntcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGwubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgaWYgKGxbaV0gPT0gbykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfVxuICAgIGwucHVzaChvKTtcbn1cblxuXG5cbmZ1bmN0aW9uIGFycmF5SW5kZXhPZihhLCB4KSB7XG4gICAgaWYgKCFhKSB7XG4gICAgICAgIHJldHVybiAtMTtcbiAgICB9XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGEubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgaWYgKGFbaV0gPT09IHgpIHtcbiAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiAtMTtcbn1cblxuZnVuY3Rpb24gYXJyYXlSZW1vdmUoYSwgeCkge1xuICAgIHZhciBpID0gYXJyYXlJbmRleE9mKGEsIHgpO1xuICAgIGlmIChpID49IDApIHtcbiAgICAgICAgYS5zcGxpY2UoaSwgMSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5cbi8vXG4vLyBET00gdXRpbGl0aWVzXG4vL1xuXG5cbmZ1bmN0aW9uIG1ha2VFbGVtZW50KHRhZywgY2hpbGRyZW4sIGF0dHJpYnMsIHN0eWxlcylcbntcbiAgICB2YXIgZWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWcpO1xuICAgIGlmIChjaGlsZHJlbikge1xuICAgICAgICBpZiAoISAoY2hpbGRyZW4gaW5zdGFuY2VvZiBBcnJheSkpIHtcbiAgICAgICAgICAgIGNoaWxkcmVuID0gW2NoaWxkcmVuXTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICB2YXIgYyA9IGNoaWxkcmVuW2ldO1xuICAgICAgICAgICAgaWYgKGMpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGMgPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgYyA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGMpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGMgPT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgICAgICAgYyA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCcnICsgYyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsZS5hcHBlbmRDaGlsZChjKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBpZiAoYXR0cmlicykge1xuICAgICAgICBmb3IgKHZhciBsIGluIGF0dHJpYnMpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgZWxlW2xdID0gYXR0cmlic1tsXTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZXJyb3Igc2V0dGluZyAnICsgbCk7XG4gICAgICAgICAgICAgICAgdGhyb3coZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKHN0eWxlcykge1xuICAgICAgICBmb3IgKHZhciBsIGluIHN0eWxlcykge1xuICAgICAgICAgICAgZWxlLnN0eWxlW2xdID0gc3R5bGVzW2xdO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBlbGU7XG59XG5cbmZ1bmN0aW9uIG1ha2VFbGVtZW50TlMobmFtZXNwYWNlLCB0YWcsIGNoaWxkcmVuLCBhdHRyaWJzKVxue1xuICAgIHZhciBlbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMobmFtZXNwYWNlLCB0YWcpO1xuICAgIGlmIChjaGlsZHJlbikge1xuICAgICAgICBpZiAoISAoY2hpbGRyZW4gaW5zdGFuY2VvZiBBcnJheSkpIHtcbiAgICAgICAgICAgIGNoaWxkcmVuID0gW2NoaWxkcmVuXTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICB2YXIgYyA9IGNoaWxkcmVuW2ldO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBjID09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgYyA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxlLmFwcGVuZENoaWxkKGMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIHNldEF0dHJzKGVsZSwgYXR0cmlicyk7XG4gICAgcmV0dXJuIGVsZTtcbn1cblxudmFyIGF0dHJfbmFtZV9jYWNoZSA9IHt9O1xuXG5mdW5jdGlvbiBzZXRBdHRyKG5vZGUsIGtleSwgdmFsdWUpXG57XG4gICAgdmFyIGF0dHIgPSBhdHRyX25hbWVfY2FjaGVba2V5XTtcbiAgICBpZiAoIWF0dHIpIHtcbiAgICAgICAgdmFyIF9hdHRyID0gJyc7XG4gICAgICAgIGZvciAodmFyIGMgPSAwOyBjIDwga2V5Lmxlbmd0aDsgKytjKSB7XG4gICAgICAgICAgICB2YXIgY2MgPSBrZXkuc3Vic3RyaW5nKGMsIGMrMSk7XG4gICAgICAgICAgICB2YXIgbGNjID0gY2MudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIGlmIChsY2MgIT0gY2MpIHtcbiAgICAgICAgICAgICAgICBfYXR0ciA9IF9hdHRyICsgJy0nICsgbGNjO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBfYXR0ciA9IF9hdHRyICsgY2M7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYXR0cl9uYW1lX2NhY2hlW2tleV0gPSBfYXR0cjtcbiAgICAgICAgYXR0ciA9IF9hdHRyO1xuICAgIH1cbiAgICBub2RlLnNldEF0dHJpYnV0ZShhdHRyLCB2YWx1ZSk7XG59XG5cbmZ1bmN0aW9uIHNldEF0dHJzKG5vZGUsIGF0dHJpYnMpXG57XG4gICAgaWYgKGF0dHJpYnMpIHtcbiAgICAgICAgZm9yICh2YXIgbCBpbiBhdHRyaWJzKSB7XG4gICAgICAgICAgICBzZXRBdHRyKG5vZGUsIGwsIGF0dHJpYnNbbF0pO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5cblxuZnVuY3Rpb24gcmVtb3ZlQ2hpbGRyZW4obm9kZSlcbntcbiAgICBpZiAoIW5vZGUgfHwgIW5vZGUuY2hpbGROb2Rlcykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgd2hpbGUgKG5vZGUuY2hpbGROb2Rlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIG5vZGUucmVtb3ZlQ2hpbGQobm9kZS5maXJzdENoaWxkKTtcbiAgICB9XG59XG5cblxuXG4vL1xuLy8gV0FSTklORzogbm90IGZvciBnZW5lcmFsIHVzZSFcbi8vXG5cbmZ1bmN0aW9uIG1pbmlKU09OaWZ5KG8sIGV4Yykge1xuICAgIGlmICh0eXBlb2YgbyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuICd1bmRlZmluZWQnO1xuICAgIH0gZWxzZSBpZiAobyA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiAnbnVsbCc7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgbyA9PSAnc3RyaW5nJykge1xuICAgICAgICByZXR1cm4gXCInXCIgKyBvICsgXCInXCI7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgbyA9PSAnbnVtYmVyJykge1xuICAgICAgICByZXR1cm4gXCJcIiArIG87XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgbyA9PSAnYm9vbGVhbicpIHtcbiAgICAgICAgcmV0dXJuIFwiXCIgKyBvO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIG8gPT0gJ29iamVjdCcpIHtcbiAgICAgICAgaWYgKG8gaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgICAgICAgdmFyIHMgPSBudWxsO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgcyA9IChzID09IG51bGwgPyAnJyA6IChzICsgJywgJykpICsgbWluaUpTT05pZnkob1tpXSwgZXhjKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAnWycgKyAocz9zOicnKSArICddJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGV4YyA9IGV4YyB8fCB7fTtcbiAgICAgICAgICAgIHZhciBzID0gbnVsbDtcbiAgICAgICAgICAgIGZvciAodmFyIGsgaW4gbykge1xuICAgICAgICAgICAgICAgIGlmIChleGNba10pXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGlmIChrICE9IHVuZGVmaW5lZCAmJiB0eXBlb2Yob1trXSkgIT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICBzID0gKHMgPT0gbnVsbCA/ICcnIDogKHMgKyAnLCAnKSkgKyBrICsgJzogJyArIG1pbmlKU09OaWZ5KG9ba10sIGV4Yyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuICd7JyArIChzP3M6JycpICsgJ30nO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuICh0eXBlb2Ygbyk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBzaGFsbG93Q29weShvKSB7XG4gICAgdmFyIG4gPSB7fTtcbiAgICBmb3IgKHZhciBrIGluIG8pIHtcbiAgICAgICAgbltrXSA9IG9ba107XG4gICAgfVxuICAgIHJldHVybiBuO1xufVxuXG5mdW5jdGlvbiBPYnNlcnZlZCh4KSB7XG4gICAgdGhpcy52YWx1ZSA9IHg7XG4gICAgdGhpcy5saXN0ZW5lcnMgPSBbXTtcbn1cblxuT2JzZXJ2ZWQucHJvdG90eXBlLmFkZExpc3RlbmVyID0gZnVuY3Rpb24oZikge1xuICAgIHRoaXMubGlzdGVuZXJzLnB1c2goZik7XG59XG5cbk9ic2VydmVkLnByb3RvdHlwZS5hZGRMaXN0ZW5lckFuZEZpcmUgPSBmdW5jdGlvbihmKSB7XG4gICAgdGhpcy5saXN0ZW5lcnMucHVzaChmKTtcbiAgICBmKHRoaXMudmFsdWUpO1xufVxuXG5PYnNlcnZlZC5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXIgPSBmdW5jdGlvbihmKSB7XG4gICAgYXJyYXlSZW1vdmUodGhpcy5saXN0ZW5lcnMsIGYpO1xufVxuXG5PYnNlcnZlZC5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMudmFsdWU7XG59XG5cbk9ic2VydmVkLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbih4KSB7XG4gICAgdGhpcy52YWx1ZSA9IHg7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxpc3RlbmVycy5sZW5ndGg7ICsraSkge1xuICAgICAgICB0aGlzLmxpc3RlbmVyc1tpXSh4KTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIEF3YWl0ZWQoKSB7XG4gICAgdGhpcy5xdWV1ZSA9IFtdO1xufVxuXG5Bd2FpdGVkLnByb3RvdHlwZS5wcm92aWRlID0gZnVuY3Rpb24oeCkge1xuICAgIGlmICh0aGlzLnJlcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRocm93IFwiUmVzb3VyY2UgaGFzIGFscmVhZHkgYmVlbiBwcm92aWRlZC5cIjtcbiAgICB9XG5cbiAgICB0aGlzLnJlcyA9IHg7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnF1ZXVlLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIHRoaXMucXVldWVbaV0oeCk7XG4gICAgfVxuICAgIHRoaXMucXVldWUgPSBudWxsOyAgIC8vIGF2b2lkIGxlYWtpbmcgY2xvc3VyZXMuXG59XG5cbkF3YWl0ZWQucHJvdG90eXBlLmF3YWl0ID0gZnVuY3Rpb24oZikge1xuICAgIGlmICh0aGlzLnJlcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGYodGhpcy5yZXMpO1xuICAgICAgICByZXR1cm4gdGhpcy5yZXM7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5xdWV1ZS5wdXNoKGYpO1xuICAgIH1cbn1cblxudmFyIF9fZGFsbGlhbmNlX3NhbHRTZWVkID0gMDtcblxuZnVuY3Rpb24gc2FsdFVSTCh1cmwpIHtcbiAgICByZXR1cm4gdXJsICsgJz9zYWx0PScgKyBiNjRfc2hhMSgnJyArIERhdGUubm93KCkgKyAnLCcgKyAoKytfX2RhbGxpYW5jZV9zYWx0U2VlZCkpO1xufVxuXG5mdW5jdGlvbiB0ZXh0WEhSKHVybCwgY2FsbGJhY2ssIG9wdHMpIHtcbiAgICBpZiAob3B0cyAmJiBvcHRzLnNhbHQpIFxuICAgICAgICB1cmwgPSBzYWx0VVJMKHVybCk7XG5cbiAgICB0cnkge1xuICAgICAgICB2YXIgdGltZW91dDtcbiAgICAgICAgaWYgKG9wdHMgJiYgb3B0cy50aW1lb3V0KSB7XG4gICAgICAgICAgICB0aW1lb3V0ID0gc2V0VGltZW91dChcbiAgICAgICAgICAgICAgICBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3RpbWluZyBvdXQgJyArIHVybCk7XG4gICAgICAgICAgICAgICAgICAgIHJlcS5hYm9ydCgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sobnVsbCwgJ1RpbWVvdXQnKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG9wdHMudGltZW91dFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciByZXEgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgICAgcmVxLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkge1xuICAgIFx0ICAgIGlmIChyZXEucmVhZHlTdGF0ZSA9PSA0KSB7XG4gICAgICAgICAgICAgICAgaWYgKHRpbWVvdXQpXG4gICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICBcdCAgICAgICAgaWYgKHJlcS5zdGF0dXMgPCAyMDAgfHwgcmVxLnN0YXR1cyA+PSAzMDApIHtcbiAgICBcdFx0ICAgIGNhbGxiYWNrKG51bGwsICdFcnJvciBjb2RlICcgKyByZXEuc3RhdHVzKTtcbiAgICBcdCAgICAgICAgfSBlbHNlIHtcbiAgICBcdFx0ICAgIGNhbGxiYWNrKHJlcS5yZXNwb25zZVRleHQpO1xuICAgIFx0ICAgICAgICB9XG4gICAgXHQgICAgfVxuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgcmVxLm9wZW4oJ0dFVCcsIHVybCwgdHJ1ZSk7XG4gICAgICAgIHJlcS5yZXNwb25zZVR5cGUgPSAndGV4dCc7XG5cbiAgICAgICAgaWYgKG9wdHMgJiYgb3B0cy5jcmVkZW50aWFscykge1xuICAgICAgICAgICAgcmVxLndpdGhDcmVkZW50aWFscyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmVxLnNlbmQoKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhbGxiYWNrKG51bGwsICdFeGNlcHRpb24gJyArIGUpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gcmVsYXRpdmVVUkwoYmFzZSwgcmVsKSB7XG4gICAgLy8gRklYTUUgcXVpdGUgbmFpdmUgLS0gZ29vZCBlbm91Z2ggZm9yIHRyYWNraHVicz9cblxuICAgIGlmIChyZWwuaW5kZXhPZignaHR0cDonKSA9PSAwIHx8IHJlbC5pbmRleE9mKCdodHRwczonKSA9PSAwKSB7XG4gICAgICAgIHJldHVybiByZWw7XG4gICAgfVxuXG4gICAgdmFyIGxpID0gYmFzZS5sYXN0SW5kZXhPZignLycpO1xuICAgIGlmIChsaSA+PSAwKSB7XG4gICAgICAgIHJldHVybiBiYXNlLnN1YnN0cigwLCBsaSArIDEpICsgcmVsO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiByZWw7XG4gICAgfVxufVxuXG52YXIgQU1JTk9fQUNJRF9UUkFOU0xBVElPTiA9IHtcbiAgICAnVFRUJzogJ0YnLFxuICAgICdUVEMnOiAnRicsXG4gICAgJ1RUQSc6ICdMJyxcbiAgICAnVFRHJzogJ0wnLFxuICAgICdDVFQnOiAnTCcsXG4gICAgJ0NUQyc6ICdMJyxcbiAgICAnQ1RBJzogJ0wnLFxuICAgICdDVEcnOiAnTCcsXG4gICAgJ0FUVCc6ICdJJyxcbiAgICAnQVRDJzogJ0knLFxuICAgICdBVEEnOiAnSScsXG4gICAgJ0FURyc6ICdNJyxcbiAgICAnR1RUJzogJ1YnLFxuICAgICdHVEMnOiAnVicsXG4gICAgJ0dUQSc6ICdWJyxcbiAgICAnR1RHJzogJ1YnLFxuICAgICdUQ1QnOiAnUycsXG4gICAgJ1RDQyc6ICdTJyxcbiAgICAnVENBJzogJ1MnLFxuICAgICdUQ0cnOiAnUycsXG4gICAgJ0NDVCc6ICdQJyxcbiAgICAnQ0NDJzogJ1AnLFxuICAgICdDQ0EnOiAnUCcsXG4gICAgJ0NDRyc6ICdQJyxcbiAgICAnQUNUJzogJ1QnLFxuICAgICdBQ0MnOiAnVCcsXG4gICAgJ0FDQSc6ICdUJyxcbiAgICAnQUNHJzogJ1QnLFxuICAgICdHQ1QnOiAnQScsXG4gICAgJ0dDQyc6ICdBJyxcbiAgICAnR0NBJzogJ0EnLFxuICAgICdHQ0cnOiAnQScsXG4gICAgJ1RBVCc6ICdZJyxcbiAgICAnVEFDJzogJ1knLFxuICAgICdUQUEnOiAnKicsICAvLyBzdG9wXG4gICAgJ1RBRyc6ICcqJywgIC8vIHN0b3BcbiAgICAnQ0FUJzogJ0gnLFxuICAgICdDQUMnOiAnSCcsXG4gICAgJ0NBQSc6ICdRJyxcbiAgICAnQ0FHJzogJ1EnLFxuICAgICdBQVQnOiAnTicsXG4gICAgJ0FBQyc6ICdOJyxcbiAgICAnQUFBJzogJ0snLFxuICAgICdBQUcnOiAnSycsXG4gICAgJ0dBVCc6ICdEJyxcbiAgICAnR0FDJzogJ0QnLFxuICAgICdHQUEnOiAnRScsXG4gICAgJ0dBRyc6ICdFJyxcbiAgICAnVEdUJzogJ0MnLFxuICAgICdUR0MnOiAnQycsXG4gICAgJ1RHQSc6ICcqJywgIC8vIHN0b3BcbiAgICAnVEdHJzogJ1cnLFxuICAgICdDR1QnOiAnUicsXG4gICAgJ0NHQyc6ICdSJyxcbiAgICAnQ0dBJzogJ1InLFxuICAgICdDR0cnOiAnUicsXG4gICAgJ0FHVCc6ICdTJyxcbiAgICAnQUdDJzogJ1MnLFxuICAgICdBR0EnOiAnUicsXG4gICAgJ0FHRyc6ICdSJyxcbiAgICAnR0dUJzogJ0cnLFxuICAgICdHR0MnOiAnRycsXG4gICAgJ0dHQSc6ICdHJyxcbiAgICAnR0dHJzogJ0cnXG59XG5cbmZ1bmN0aW9uIHJlc29sdmVVcmxUb1BhZ2UocmVsKSB7XG4gICAgcmV0dXJuIG1ha2VFbGVtZW50KCdhJywgbnVsbCwge2hyZWY6IHJlbH0pLmhyZWY7XG59XG5cbi8vXG4vLyBNaXNzaW5nIEFQSXNcbi8vIFxuXG5pZiAoISgndHJpbScgaW4gU3RyaW5nLnByb3RvdHlwZSkpIHtcbiAgICBTdHJpbmcucHJvdG90eXBlLnRyaW0gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVwbGFjZSgvXlxccysvLCAnJykucmVwbGFjZSgvXFxzKyQvLCAnJyk7XG4gICAgfTtcbn1cblxuaWYgKHR5cGVvZihtb2R1bGUpICE9PSAndW5kZWZpbmVkJykge1xuICAgIG1vZHVsZS5leHBvcnRzID0ge1xuICAgICAgICB0ZXh0WEhSOiB0ZXh0WEhSLFxuICAgICAgICByZWxhdGl2ZVVSTDogcmVsYXRpdmVVUkwsXG4gICAgICAgIHJlc29sdmVVcmxUb1BhZ2U6IHJlc29sdmVVcmxUb1BhZ2UsXG4gICAgICAgIHNoYWxsb3dDb3B5OiBzaGFsbG93Q29weSxcbiAgICAgICAgcHVzaG86IHB1c2hvLFxuICAgICAgICBwdXNobmV3OiBwdXNobmV3LFxuICAgICAgICBwdXNobmV3bzogcHVzaG5ld28sXG4gICAgICAgIGFycmF5SW5kZXhPZjogYXJyYXlJbmRleE9mLFxuICAgICAgICBwaWNrOiBwaWNrLFxuXG4gICAgICAgIG1ha2VFbGVtZW50OiBtYWtlRWxlbWVudCxcbiAgICAgICAgbWFrZUVsZW1lbnROUzogbWFrZUVsZW1lbnROUyxcbiAgICAgICAgcmVtb3ZlQ2hpbGRyZW46IHJlbW92ZUNoaWxkcmVuLFxuXG4gICAgICAgIG1pbmlKU09OaWZ5OiBtaW5pSlNPTmlmeSxcblxuICAgICAgICBPYnNlcnZlZDogT2JzZXJ2ZWQsXG4gICAgICAgIEF3YWl0ZWQ6IEF3YWl0ZWQsXG5cbiAgICAgICAgQU1JTk9fQUNJRF9UUkFOU0xBVElPTjogQU1JTk9fQUNJRF9UUkFOU0xBVElPTlxuICAgIH1cbn1cbiIsIi8qIC0qLSBtb2RlOiBqYXZhc2NyaXB0OyBjLWJhc2ljLW9mZnNldDogNDsgaW5kZW50LXRhYnMtbW9kZTogbmlsIC0qLSAqL1xuXG4vLyBcbi8vIERhbGxpYW5jZSBHZW5vbWUgRXhwbG9yZXJcbi8vIChjKSBUaG9tYXMgRG93biAyMDA2LTIwMTRcbi8vXG4vLyB2Y2YuanNcbi8vXG5cblwidXNlIHN0cmljdFwiO1xuXG5pZiAodHlwZW9mKHJlcXVpcmUpICE9PSAndW5kZWZpbmVkJykge1xuICAgIHZhciBzYSA9IHJlcXVpcmUoJy4vc291cmNlYWRhcHRlcnMnKTtcbiAgICB2YXIgZGFsbGlhbmNlX3JlZ2lzdGVyUGFyc2VyRmFjdG9yeSA9IHNhLnJlZ2lzdGVyUGFyc2VyRmFjdG9yeTtcblxuICAgIHZhciBkYXMgPSByZXF1aXJlKCcuL2RhcycpO1xuICAgIHZhciBEQVNTdHlsZXNoZWV0ID0gZGFzLkRBU1N0eWxlc2hlZXQ7XG4gICAgdmFyIERBU1N0eWxlID0gZGFzLkRBU1N0eWxlO1xuICAgIHZhciBEQVNGZWF0dXJlID0gZGFzLkRBU0ZlYXR1cmU7XG4gICAgdmFyIERBU0dyb3VwID0gZGFzLkRBU0dyb3VwO1xufVxuXG5mdW5jdGlvbiBWQ0ZQYXJzZXIoKSB7XG4gICAgdGhpcy5pbmZvID0gW107XG59XG5cbnZhciBWQ0ZfSU5GT19SRSA9IC8oW147PV0rKSg9KFteO10rKSk/Oz8vO1xudmFyIFZDRl9JTkZPX0hFQURFUiA9IC8jI0lORk89PChbXj5dKyk+LztcbnZhciBWQ0ZfSU5GT19IRUFERVJfVE9LID0gLyhbXiw9XSspPShbXixdK3xcIlteXCJdK1wiKSw/L1xuXG5WQ0ZQYXJzZXIucHJvdG90eXBlLmNyZWF0ZVNlc3Npb24gPSBmdW5jdGlvbihzaW5rKSB7XG4gICAgcmV0dXJuIG5ldyBWQ0ZQYXJzZVNlc3Npb24odGhpcywgc2luayk7XG59XG5cbmZ1bmN0aW9uIFZDRlBhcnNlU2Vzc2lvbihwYXJzZXIsIHNpbmspIHtcbiAgICB0aGlzLnBhcnNlciA9IHBhcnNlcjtcbiAgICB0aGlzLnNpbmsgID0gc2luaztcbn1cblxuVkNGUGFyc2VTZXNzaW9uLnByb3RvdHlwZS5wYXJzZSA9IGZ1bmN0aW9uKGxpbmUpIHtcbiAgICBpZiAobGluZS5sZW5ndGggPT0gMClcbiAgICAgICAgcmV0dXJuO1xuICAgIGlmIChsaW5lWzBdID09ICcjJykge1xuICAgICAgICBpZiAobGluZS5sZW5ndGggPiAxICYmIGxpbmVbMV0gPT0gJyMnKSB7XG4gICAgICAgICAgICB2YXIgbSA9IFZDRl9JTkZPX0hFQURFUi5leGVjKGxpbmUpO1xuICAgICAgICAgICAgaWYgKG0pIHtcbiAgICAgICAgICAgICAgICB2YXIgdG9rcyA9IG1bMV0uc3BsaXQoVkNGX0lORk9fSEVBREVSX1RPSyk7XG4gICAgICAgICAgICAgICAgdmFyIGlkID0gbnVsbCwgZGVzYyA9IG51bGw7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgdGkgPSAwOyB0aSA8IHRva3MubGVuZ3RoIC0gMTsgdGkgKz0gMykge1xuICAgICAgICAgICAgICAgICAgICB2YXIga2V5ID0gdG9rc1t0aSArIDFdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSB0b2tzW3RpICsgMl0ucmVwbGFjZSgvXCIvZywgJycpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoa2V5ID09ICdJRCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoa2V5ID09ICdEZXNjcmlwdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2MgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoaWQgJiYgZGVzYykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcnNlci5pbmZvLnB1c2goXG4gICAgICAgICAgICAgICAgICAgICAgICB7aWQ6IGlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2M6IGRlc2N9XG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdmFyIHRva3MgPSBsaW5lLnNwbGl0KCdcXHQnKTtcbiAgICB2YXIgZiA9IG5ldyBEQVNGZWF0dXJlKCk7XG4gICAgZi5zZWdtZW50ID0gdG9rc1swXTtcbiAgICBmLmlkID0gdG9rc1syXVxuICAgIGYucmVmQWxsZWxlID0gdG9rc1szXTtcbiAgICBmLmFsdEFsbGVsZXMgPSB0b2tzWzRdLnNwbGl0KCcsJyk7XG4gICAgZi5taW4gPSBwYXJzZUludCh0b2tzWzFdKTtcbiAgICBmLm1heCA9IGYubWluICsgZi5yZWZBbGxlbGUubGVuZ3RoIC0gMTtcblxuICAgIHZhciBpbmZvVG9rcyA9IHRva3NbN10uc3BsaXQoVkNGX0lORk9fUkUpO1xuICAgIGYuaW5mbyA9IHt9O1xuICAgIGZvciAodmFyIHRpID0gMDsgdGkgPCBpbmZvVG9rcy5sZW5ndGg7IHRpICs9IDQpIHtcbiAgICAgICAgZi5pbmZvW2luZm9Ub2tzW3RpICsgMV1dID0gaW5mb1Rva3NbdGkgKyAzXTtcbiAgICB9XG5cblxuICAgIHZhciBhbHQgPSBmLmFsdEFsbGVsZXNbMF07XG4gICAgdmFyIHJlZiA9IGYucmVmQWxsZWxlO1xuICAgIGlmIChhbHQubGVuZ3RoID4gcmVmLmxlbmd0aCkge1xuICAgICAgICBmLnR5cGUgPSBcImluc2VydGlvblwiO1xuICAgICAgICBpZiAoYWx0LmluZGV4T2YocmVmKSA9PSAwKSB7XG4gICAgICAgICAgICBmLmluc2VydGlvbiA9IGFsdC5zdWJzdHIocmVmLmxlbmd0aCk7XG4gICAgICAgICAgICBmLm1pbiArPSByZWYubGVuZ3RoO1xuICAgICAgICAgICAgZi5tYXggPSBmLm1pbiAtIDE7IC8vIEVmZmVjdGl2ZWx5IFwiYmV0d2VlblwiIGJhc2VzLlxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZi5pbnNlcnRpb24gPSBhbHQ7XG4gICAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGFsdC5sZW5ndGggPCByZWYubGVuZ3RoKSB7XG4gICAgICAgIGYudHlwZSA9IFwiZGVsZXRpb25cIjtcbiAgICB9IGVsc2Uge1xuICAgICAgICBmLnR5cGUgPSAnc3Vic3RpdHV0aW9uJztcbiAgICB9XG5cbiAgICB0aGlzLnNpbmsoZik7XG59XG5cblZDRlBhcnNlU2Vzc2lvbi5wcm90b3R5cGUuZmx1c2ggPSBmdW5jdGlvbigpIHt9O1xuXG5WQ0ZQYXJzZXIucHJvdG90eXBlLmdldFN0eWxlU2hlZXQgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgIHZhciBzdHlsZXNoZWV0ID0gbmV3IERBU1N0eWxlc2hlZXQoKTtcblxuICAgIHtcbiAgICAgICAgdmFyIHZhclN0eWxlID0gbmV3IERBU1N0eWxlKCk7XG4gICAgICAgIHZhclN0eWxlLmdseXBoID0gJ19fSU5TRVJUSU9OJztcbiAgICAgICAgdmFyU3R5bGUuQlVNUCA9ICd5ZXMnO1xuICAgICAgICB2YXJTdHlsZS5MQUJFTCA9ICdubyc7XG4gICAgICAgIHZhclN0eWxlLkZHQ09MT1IgPSAncmdiKDUwLDgwLDI1NSknO1xuICAgICAgICB2YXJTdHlsZS5CR0NPTE9SID0gJyM4ODg4ODgnO1xuICAgICAgICB2YXJTdHlsZS5TVFJPS0VDT0xPUiA9ICdibGFjayc7XG4gICAgICAgIHN0eWxlc2hlZXQucHVzaFN0eWxlKHt0eXBlOiAnaW5zZXJ0aW9uJ30sIG51bGwsIHZhclN0eWxlKTtcbiAgICB9XG4gICAge1xuICAgICAgICB2YXIgdmFyU3R5bGUgPSBuZXcgREFTU3R5bGUoKTtcbiAgICAgICAgdmFyU3R5bGUuZ2x5cGggPSAnUExJTVNPTEwnO1xuICAgICAgICB2YXJTdHlsZS5CVU1QID0gJ3llcyc7XG4gICAgICAgIHZhclN0eWxlLkxBQkVMID0gJ25vJztcbiAgICAgICAgdmFyU3R5bGUuRkdDT0xPUiA9ICdyZ2IoMjU1LCA2MCwgNjApJztcbiAgICAgICAgdmFyU3R5bGUuQkdDT0xPUiA9ICcjODg4ODg4JztcbiAgICAgICAgdmFyU3R5bGUuU1RST0tFQ09MT1IgPSAnYmxhY2snO1xuICAgICAgICBzdHlsZXNoZWV0LnB1c2hTdHlsZSh7dHlwZTogJ2RlbGV0aW9uJ30sIG51bGwsIHZhclN0eWxlKTtcbiAgICB9XG4gICAge1xuICAgICAgICB2YXIgdmFyU3R5bGUgPSBuZXcgREFTU3R5bGUoKTtcbiAgICAgICAgdmFyU3R5bGUuZ2x5cGggPSAnUExJTVNPTEwnO1xuICAgICAgICB2YXJTdHlsZS5CVU1QID0gJ3llcyc7XG4gICAgICAgIHZhclN0eWxlLkxBQkVMID0gJ25vJztcbiAgICAgICAgdmFyU3R5bGUuRkdDT0xPUiA9ICdyZ2IoNTAsODAsMjU1KSc7XG4gICAgICAgIHZhclN0eWxlLkJHQ09MT1IgPSAnIzg4ODg4OCc7XG4gICAgICAgIHZhclN0eWxlLlNUUk9LRUNPTE9SID0gJ2JsYWNrJztcbiAgICAgICAgc3R5bGVzaGVldC5wdXNoU3R5bGUoe3R5cGU6ICdkZWZhdWx0J30sIG51bGwsIHZhclN0eWxlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gY2FsbGJhY2soc3R5bGVzaGVldCk7XG59XG5cblZDRlBhcnNlci5wcm90b3R5cGUuZ2V0RGVmYXVsdEZJUHMgPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgZmlwID0gZnVuY3Rpb24oZmVhdHVyZSwgZmVhdHVyZUluZm8pIHtcbiAgICAgICAgZmVhdHVyZUluZm8uYWRkKFwiUmVmLiBhbGxlbGVcIiwgZmVhdHVyZS5yZWZBbGxlbGUpO1xuICAgICAgICBmZWF0dXJlSW5mby5hZGQoXCJBbHQuIGFsbGVsZXNcIiwgZmVhdHVyZS5hbHRBbGxlbGVzLmpvaW4oJywnKSk7XG5cbiAgICAgICAgaWYgKGZlYXR1cmUuaW5mbykge1xuICAgICAgICAgICAgZm9yICh2YXIgaWkgPSAwOyBpaSA8IHNlbGYuaW5mby5sZW5ndGg7ICsraWkpIHtcbiAgICAgICAgICAgICAgICB2YXIgaW5mbyA9IHNlbGYuaW5mb1tpaV07XG4gICAgICAgICAgICAgICAgdmFyIHZhbCA9IGZlYXR1cmUuaW5mb1tpbmZvLmlkXTtcbiAgICAgICAgICAgICAgICBpZiAodmFsICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgZmVhdHVyZUluZm8uYWRkKGluZm8uZGVzYywgdmFsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGNhbGxiYWNrKGZpcCk7XG59XG5cbmRhbGxpYW5jZV9yZWdpc3RlclBhcnNlckZhY3RvcnkoJ3ZjZicsIGZ1bmN0aW9uKCkge3JldHVybiBuZXcgVkNGUGFyc2VyKCl9KTtcbiIsIi8qIC0qLSBtb2RlOiBqYXZhc2NyaXB0OyBjLWJhc2ljLW9mZnNldDogNDsgaW5kZW50LXRhYnMtbW9kZTogbmlsIC0qLSAqL1xuXG4vLyBcbi8vIERhbGxpYW5jZSBHZW5vbWUgRXhwbG9yZXJcbi8vIChjKSBUaG9tYXMgRG93biAyMDA2LTIwMTBcbi8vXG4vLyB2ZXJzaW9uLmpzXG4vL1xuXG5cInVzZSBzdHJpY3RcIjtcblxudmFyIFZFUlNJT04gPSB7XG4gICAgQ09ORklHOiA1LFxuICAgIE1BSk9SOiAgMCxcbiAgICBNSU5PUjogIDEzLFxuICAgIE1JQ1JPOiAgNyxcbiAgICBCUkFOQ0g6ICdkZXYnXG59O1xuXG5WRVJTSU9OLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHZzID0gJycgKyB0aGlzLk1BSk9SICsgJy4nICsgdGhpcy5NSU5PUiArICcuJyArIHRoaXMuTUlDUk87XG4gICAgaWYgKHRoaXMuUEFUQ0gpIHtcbiAgICAgICAgdnMgPSB2cyArIHRoaXMuUEFUQ0g7XG4gICAgfVxuICAgIGlmICh0aGlzLkJSQU5DSCAmJiB0aGlzLkJSQU5DSCAhPSAnJykge1xuICAgICAgICB2cyA9IHZzICsgJy0nICsgdGhpcy5CUkFOQ0g7XG4gICAgfVxuICAgIHJldHVybiB2cztcbn1cblxuaWYgKHR5cGVvZihtb2R1bGUpICE9PSAndW5kZWZpbmVkJykge1xuICAgIG1vZHVsZS5leHBvcnRzID0gVkVSU0lPTjtcbn1cbiIsIi8qIC0qLSBtb2RlOiBqYXZhc2NyaXB0OyBjLWJhc2ljLW9mZnNldDogNDsgaW5kZW50LXRhYnMtbW9kZTogbmlsIC0qLSAqL1xuXG4vLyBcbi8vIERhbGxpYW5jZSBHZW5vbWUgRXhwbG9yZXJcbi8vIChjKSBUaG9tYXMgRG93biAyMDA2LTIwMTRcbi8vXG4vLyB6b29tc2xpZGVyLmpzOiBjdXN0b20gc2xpZGVyIGNvbXBvbmVudFxuLy9cblxuXG5cInVzZSBzdHJpY3RcIjtcblxuaWYgKHR5cGVvZihyZXF1aXJlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB2YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XG4gICAgdmFyIG1ha2VFbGVtZW50ID0gdXRpbHMubWFrZUVsZW1lbnQ7XG59XG5cbmZ1bmN0aW9uIG1ha2Vab29tU2xpZGVyKG9wdHMpIHtcbiAgICBvcHRzID0gb3B0cyB8fCB7fTtcbiAgICBcbiAgICB2YXIgbWluUG9zID0gMCwgbWF4UG9zID0gb3B0cy53aWR0aCB8fCAyMDA7XG4gICAgdmFyIG1pbiA9IDAsIG1heCA9IDIwMDtcbiAgICB2YXIgcG9zID0gNTAsIHBvczIgPSAxMDA7XG4gICAgdmFyIGxhYmVscyA9IFtdO1xuICAgIHZhciB0cmFjayA9IG1ha2VFbGVtZW50KCdocicsIG51bGwsIHtjbGFzc05hbWU6ICdzbGlkZXItdHJhY2snfSwge3dpZHRoOiAnJyArIChtYXhQb3N8MCkgKyAncHgnfSk7XG4gICAgdmFyIHRodW1iID0gbWFrZUVsZW1lbnQoJ2hyJywgbnVsbCwge2NsYXNzTmFtZTogJ3NsaWRlci10aHVtYiBhY3RpdmUnfSk7XG4gICAgdmFyIHRodW1iMiA9IG1ha2VFbGVtZW50KCdocicsIG51bGwsIHtjbGFzc05hbWU6ICdzbGlkZXItdGh1bWInfSk7XG4gICAgdmFyIHNsaWRlciA9IG1ha2VFbGVtZW50KCdkaXYnLCBbdHJhY2ssIHRodW1iLCB0aHVtYjJdLCB7Y2xhc3NOYW1lOiAnc2xpZGVyJ30sICB7d2lkdGg6ICcnICsgKChtYXhQb3N8MCkgKyAxMCkgKyAncHgnfSk7XG5cbiAgICBzbGlkZXIucmVtb3ZlTGFiZWxzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGZvciAodmFyIGxpID0gMDsgbGkgPCBsYWJlbHMubGVuZ3RoOyArK2xpKSB7XG4gICAgICAgICAgICBzbGlkZXIucmVtb3ZlQ2hpbGQobGFiZWxzW2xpXSk7XG4gICAgICAgIH1cbiAgICAgICAgbGFiZWxzID0gW107XG4gICAgfVxuXG4gICAgc2xpZGVyLmFkZExhYmVsID0gZnVuY3Rpb24odmFsLCB0eHQpIHtcbiAgICAgICAgdmFyIHBvcyA9IChtaW5Qb3MgKyAoKHZhbCAtIG1pbikgKiAobWF4UG9zIC0gbWluUG9zKSkvKG1heC1taW4pKXwwO1xuICAgICAgICB2YXIgbGFiZWwgPSBtYWtlRWxlbWVudCgnZGl2JywgdHh0LCB7Y2xhc3NOYW1lOiAnc2xpZGVyLWxhYmVsJ30sIHtcbiAgICAgICAgICAgIGxlZnQ6ICcnICsgKChtaW5Qb3MgKyAoKHZhbCAtIG1pbikgKiAobWF4UG9zIC0gbWluUG9zKSkvKG1heC1taW4pKXwwKSArICdweCdcbiAgICAgICAgfSk7XG4gICAgICAgIHNsaWRlci5hcHBlbmRDaGlsZChsYWJlbCk7XG4gICAgICAgIGxhYmVscy5wdXNoKGxhYmVsKTtcbiAgICB9XG5cbiAgICB2YXIgb25DaGFuZ2UgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnSFRNTEV2ZW50cycpO1xuICAgIG9uQ2hhbmdlLmluaXRFdmVudCgnY2hhbmdlJywgdHJ1ZSwgZmFsc2UpO1xuXG4gICAgZnVuY3Rpb24gc2V0UG9zKG5wKSB7XG4gICAgICAgIG5wID0gTWF0aC5taW4obnAsIG1heFBvcyk7XG4gICAgICAgIG5wID0gTWF0aC5tYXgobnAsIG1pblBvcyk7XG4gICAgICAgIHBvcyA9IG5wO1xuICAgICAgICB0aHVtYi5zdHlsZS5sZWZ0ID0gJycgKyBwb3MgKyAncHgnO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNldFBvczIobnApIHtcbiAgICAgICAgbnAgPSBNYXRoLm1pbihucCwgbWF4UG9zKTtcbiAgICAgICAgbnAgPSBNYXRoLm1heChucCwgbWluUG9zKTtcbiAgICAgICAgcG9zMiA9IG5wO1xuICAgICAgICB0aHVtYjIuc3R5bGUubGVmdCA9ICcnICsgcG9zMiArICdweCc7XG4gICAgfVxuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHNsaWRlciwgJ3ZhbHVlJywge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkgIHtyZXR1cm4gbWluICsgKCgocG9zLW1pblBvcykgKiAobWF4LW1pbikpIC8gKG1heFBvcyAtIG1pblBvcykpO30sXG4gICAgICAgIHNldDogZnVuY3Rpb24odikge1xuICAgICAgICAgIHZhciBucCA9IG1pblBvcyArICgodi1taW4pICogKG1heFBvcy1taW5Qb3MpKS8obWF4LW1pbik7XG4gICAgICAgICAgc2V0UG9zKG5wKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHNsaWRlciwgJ3ZhbHVlMicsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbigpICB7cmV0dXJuIG1pbiArICgoKHBvczItbWluUG9zKSAqIChtYXgtbWluKSkgLyAobWF4UG9zIC0gbWluUG9zKSk7fSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbih2KSB7XG4gICAgICAgICAgdmFyIG5wID0gbWluUG9zICsgKCh2LW1pbikgKiAobWF4UG9zLW1pblBvcykpLyhtYXgtbWluKTtcbiAgICAgICAgICBzZXRQb3MyKG5wKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHNsaWRlciwgJ2FjdGl2ZScsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbigpIHtyZXR1cm4gdGh1bWIuY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSA/IDEgOiAyfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbih4KSB7XG4gICAgICAgICAgICBpZiAoeCA9PSAxKSB7XG4gICAgICAgICAgICAgICAgdGh1bWIuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgdGh1bWIyLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHVtYjIuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgdGh1bWIuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzbGlkZXIsICdtaW4nLCB7XG4gICAgICBnZXQ6IGZ1bmN0aW9uKCkge3JldHVybiBtaW59LFxuICAgICAgc2V0OiBmdW5jdGlvbih2KSB7bWluID0gdn1cbiAgICB9KTtcblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzbGlkZXIsICdtYXgnLCB7XG4gICAgICBnZXQ6IGZ1bmN0aW9uKCkge3JldHVybiBtYXh9LFxuICAgICAgc2V0OiBmdW5jdGlvbih2KSB7bWF4ID0gdn1cbiAgICB9KTtcblxuICAgIHZhciBvZmZzZXQ7XG4gICAgdmFyIHdoaWNoO1xuXG4gICAgdmFyIHRodW1iTW91c2VEb3duID0gZnVuY3Rpb24oZXYpIHtcbiAgICAgICAgd2hpY2ggPSB0aGlzID09IHRodW1iID8gMSA6IDI7XG4gICAgICAgIGlmICh3aGljaCAhPSBzbGlkZXIuYWN0aXZlKSB7XG4gICAgICAgICAgICBzbGlkZXIuYWN0aXZlID0gd2hpY2g7XG4gICAgICAgICAgICBzbGlkZXIuZGlzcGF0Y2hFdmVudChvbkNoYW5nZSk7XG4gICAgICAgIH1cbiAgICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7IGV2LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aHVtYkRyYWdIYW5kbGVyLCBmYWxzZSk7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdGh1bWJEcmFnRW5kSGFuZGxlciwgZmFsc2UpO1xuICAgICAgICBvZmZzZXQgPSBldi5jbGllbnRYIC0gKHdoaWNoID09IDEgPyBwb3MgOiBwb3MyKTtcbiAgICB9O1xuXG4gICAgdGh1bWIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGh1bWJNb3VzZURvd24sIGZhbHNlKTtcbiAgICB0aHVtYjIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGh1bWJNb3VzZURvd24sIGZhbHNlKTtcblxuICAgIHZhciB0aHVtYkRyYWdIYW5kbGVyID0gZnVuY3Rpb24oZXYpIHtcbiAgICAgICAgaWYgKHdoaWNoID09IDEpXG4gICAgICAgICAgICBzZXRQb3MoZXYuY2xpZW50WCAtIG9mZnNldCk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHNldFBvczIoZXYuY2xpZW50WCAtIG9mZnNldCk7XG4gICAgICAgIHNsaWRlci5kaXNwYXRjaEV2ZW50KG9uQ2hhbmdlKTtcbiAgICB9O1xuXG4gICAgdmFyIHRodW1iRHJhZ0VuZEhhbmRsZXIgPSBmdW5jdGlvbihldikge1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGh1bWJEcmFnSGFuZGxlciwgZmFsc2UpO1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRodW1iRHJhZ0VuZEhhbmRsZXIsIGZhbHNlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gc2xpZGVyO1xufVxuXG5pZiAodHlwZW9mKG1vZHVsZSkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBtYWtlWm9vbVNsaWRlcjtcbn1cbiIsIi8qIVxuICogQG92ZXJ2aWV3IGVzNi1wcm9taXNlIC0gYSB0aW55IGltcGxlbWVudGF0aW9uIG9mIFByb21pc2VzL0ErLlxuICogQGNvcHlyaWdodCBDb3B5cmlnaHQgKGMpIDIwMTQgWWVodWRhIEthdHosIFRvbSBEYWxlLCBTdGVmYW4gUGVubmVyIGFuZCBjb250cmlidXRvcnMgKENvbnZlcnNpb24gdG8gRVM2IEFQSSBieSBKYWtlIEFyY2hpYmFsZClcbiAqIEBsaWNlbnNlICAgTGljZW5zZWQgdW5kZXIgTUlUIGxpY2Vuc2VcbiAqICAgICAgICAgICAgU2VlIGh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9qYWtlYXJjaGliYWxkL2VzNi1wcm9taXNlL21hc3Rlci9MSUNFTlNFXG4gKiBAdmVyc2lvbiAgIDMuMC4yXG4gKi9cblxuKGZ1bmN0aW9uKCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSR1dGlscyQkb2JqZWN0T3JGdW5jdGlvbih4KSB7XG4gICAgICByZXR1cm4gdHlwZW9mIHggPT09ICdmdW5jdGlvbicgfHwgKHR5cGVvZiB4ID09PSAnb2JqZWN0JyAmJiB4ICE9PSBudWxsKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkdXRpbHMkJGlzRnVuY3Rpb24oeCkge1xuICAgICAgcmV0dXJuIHR5cGVvZiB4ID09PSAnZnVuY3Rpb24nO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSR1dGlscyQkaXNNYXliZVRoZW5hYmxlKHgpIHtcbiAgICAgIHJldHVybiB0eXBlb2YgeCA9PT0gJ29iamVjdCcgJiYgeCAhPT0gbnVsbDtcbiAgICB9XG5cbiAgICB2YXIgbGliJGVzNiRwcm9taXNlJHV0aWxzJCRfaXNBcnJheTtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkpIHtcbiAgICAgIGxpYiRlczYkcHJvbWlzZSR1dGlscyQkX2lzQXJyYXkgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHgpID09PSAnW29iamVjdCBBcnJheV0nO1xuICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGliJGVzNiRwcm9taXNlJHV0aWxzJCRfaXNBcnJheSA9IEFycmF5LmlzQXJyYXk7XG4gICAgfVxuXG4gICAgdmFyIGxpYiRlczYkcHJvbWlzZSR1dGlscyQkaXNBcnJheSA9IGxpYiRlczYkcHJvbWlzZSR1dGlscyQkX2lzQXJyYXk7XG4gICAgdmFyIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRsZW4gPSAwO1xuICAgIHZhciBsaWIkZXM2JHByb21pc2UkYXNhcCQkdG9TdHJpbmcgPSB7fS50b1N0cmluZztcbiAgICB2YXIgbGliJGVzNiRwcm9taXNlJGFzYXAkJHZlcnR4TmV4dDtcbiAgICB2YXIgbGliJGVzNiRwcm9taXNlJGFzYXAkJGN1c3RvbVNjaGVkdWxlckZuO1xuXG4gICAgdmFyIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRhc2FwID0gZnVuY3Rpb24gYXNhcChjYWxsYmFjaywgYXJnKSB7XG4gICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkcXVldWVbbGliJGVzNiRwcm9taXNlJGFzYXAkJGxlbl0gPSBjYWxsYmFjaztcbiAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRxdWV1ZVtsaWIkZXM2JHByb21pc2UkYXNhcCQkbGVuICsgMV0gPSBhcmc7XG4gICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkbGVuICs9IDI7XG4gICAgICBpZiAobGliJGVzNiRwcm9taXNlJGFzYXAkJGxlbiA9PT0gMikge1xuICAgICAgICAvLyBJZiBsZW4gaXMgMiwgdGhhdCBtZWFucyB0aGF0IHdlIG5lZWQgdG8gc2NoZWR1bGUgYW4gYXN5bmMgZmx1c2guXG4gICAgICAgIC8vIElmIGFkZGl0aW9uYWwgY2FsbGJhY2tzIGFyZSBxdWV1ZWQgYmVmb3JlIHRoZSBxdWV1ZSBpcyBmbHVzaGVkLCB0aGV5XG4gICAgICAgIC8vIHdpbGwgYmUgcHJvY2Vzc2VkIGJ5IHRoaXMgZmx1c2ggdGhhdCB3ZSBhcmUgc2NoZWR1bGluZy5cbiAgICAgICAgaWYgKGxpYiRlczYkcHJvbWlzZSRhc2FwJCRjdXN0b21TY2hlZHVsZXJGbikge1xuICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRjdXN0b21TY2hlZHVsZXJGbihsaWIkZXM2JHByb21pc2UkYXNhcCQkZmx1c2gpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRzY2hlZHVsZUZsdXNoKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkYXNhcCQkc2V0U2NoZWR1bGVyKHNjaGVkdWxlRm4pIHtcbiAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRjdXN0b21TY2hlZHVsZXJGbiA9IHNjaGVkdWxlRm47XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJGFzYXAkJHNldEFzYXAoYXNhcEZuKSB7XG4gICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkYXNhcCA9IGFzYXBGbjtcbiAgICB9XG5cbiAgICB2YXIgbGliJGVzNiRwcm9taXNlJGFzYXAkJGJyb3dzZXJXaW5kb3cgPSAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpID8gd2luZG93IDogdW5kZWZpbmVkO1xuICAgIHZhciBsaWIkZXM2JHByb21pc2UkYXNhcCQkYnJvd3Nlckdsb2JhbCA9IGxpYiRlczYkcHJvbWlzZSRhc2FwJCRicm93c2VyV2luZG93IHx8IHt9O1xuICAgIHZhciBsaWIkZXM2JHByb21pc2UkYXNhcCQkQnJvd3Nlck11dGF0aW9uT2JzZXJ2ZXIgPSBsaWIkZXM2JHByb21pc2UkYXNhcCQkYnJvd3Nlckdsb2JhbC5NdXRhdGlvbk9ic2VydmVyIHx8IGxpYiRlczYkcHJvbWlzZSRhc2FwJCRicm93c2VyR2xvYmFsLldlYktpdE11dGF0aW9uT2JzZXJ2ZXI7XG4gICAgdmFyIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRpc05vZGUgPSB0eXBlb2YgcHJvY2VzcyAhPT0gJ3VuZGVmaW5lZCcgJiYge30udG9TdHJpbmcuY2FsbChwcm9jZXNzKSA9PT0gJ1tvYmplY3QgcHJvY2Vzc10nO1xuXG4gICAgLy8gdGVzdCBmb3Igd2ViIHdvcmtlciBidXQgbm90IGluIElFMTBcbiAgICB2YXIgbGliJGVzNiRwcm9taXNlJGFzYXAkJGlzV29ya2VyID0gdHlwZW9mIFVpbnQ4Q2xhbXBlZEFycmF5ICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgdHlwZW9mIGltcG9ydFNjcmlwdHMgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICB0eXBlb2YgTWVzc2FnZUNoYW5uZWwgIT09ICd1bmRlZmluZWQnO1xuXG4gICAgLy8gbm9kZVxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRhc2FwJCR1c2VOZXh0VGljaygpIHtcbiAgICAgIC8vIG5vZGUgdmVyc2lvbiAwLjEwLnggZGlzcGxheXMgYSBkZXByZWNhdGlvbiB3YXJuaW5nIHdoZW4gbmV4dFRpY2sgaXMgdXNlZCByZWN1cnNpdmVseVxuICAgICAgLy8gc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9jdWpvanMvd2hlbi9pc3N1ZXMvNDEwIGZvciBkZXRhaWxzXG4gICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgIHByb2Nlc3MubmV4dFRpY2sobGliJGVzNiRwcm9taXNlJGFzYXAkJGZsdXNoKTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gdmVydHhcbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkYXNhcCQkdXNlVmVydHhUaW1lcigpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJHZlcnR4TmV4dChsaWIkZXM2JHByb21pc2UkYXNhcCQkZmx1c2gpO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkYXNhcCQkdXNlTXV0YXRpb25PYnNlcnZlcigpIHtcbiAgICAgIHZhciBpdGVyYXRpb25zID0gMDtcbiAgICAgIHZhciBvYnNlcnZlciA9IG5ldyBsaWIkZXM2JHByb21pc2UkYXNhcCQkQnJvd3Nlck11dGF0aW9uT2JzZXJ2ZXIobGliJGVzNiRwcm9taXNlJGFzYXAkJGZsdXNoKTtcbiAgICAgIHZhciBub2RlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJycpO1xuICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZShub2RlLCB7IGNoYXJhY3RlckRhdGE6IHRydWUgfSk7XG5cbiAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgbm9kZS5kYXRhID0gKGl0ZXJhdGlvbnMgPSArK2l0ZXJhdGlvbnMgJSAyKTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gd2ViIHdvcmtlclxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRhc2FwJCR1c2VNZXNzYWdlQ2hhbm5lbCgpIHtcbiAgICAgIHZhciBjaGFubmVsID0gbmV3IE1lc3NhZ2VDaGFubmVsKCk7XG4gICAgICBjaGFubmVsLnBvcnQxLm9ubWVzc2FnZSA9IGxpYiRlczYkcHJvbWlzZSRhc2FwJCRmbHVzaDtcbiAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNoYW5uZWwucG9ydDIucG9zdE1lc3NhZ2UoMCk7XG4gICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRhc2FwJCR1c2VTZXRUaW1lb3V0KCkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICBzZXRUaW1lb3V0KGxpYiRlczYkcHJvbWlzZSRhc2FwJCRmbHVzaCwgMSk7XG4gICAgICB9O1xuICAgIH1cblxuICAgIHZhciBsaWIkZXM2JHByb21pc2UkYXNhcCQkcXVldWUgPSBuZXcgQXJyYXkoMTAwMCk7XG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJGFzYXAkJGZsdXNoKCkge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaWIkZXM2JHByb21pc2UkYXNhcCQkbGVuOyBpKz0yKSB7XG4gICAgICAgIHZhciBjYWxsYmFjayA9IGxpYiRlczYkcHJvbWlzZSRhc2FwJCRxdWV1ZVtpXTtcbiAgICAgICAgdmFyIGFyZyA9IGxpYiRlczYkcHJvbWlzZSRhc2FwJCRxdWV1ZVtpKzFdO1xuXG4gICAgICAgIGNhbGxiYWNrKGFyZyk7XG5cbiAgICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJHF1ZXVlW2ldID0gdW5kZWZpbmVkO1xuICAgICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkcXVldWVbaSsxXSA9IHVuZGVmaW5lZDtcbiAgICAgIH1cblxuICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJGxlbiA9IDA7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJGFzYXAkJGF0dGVtcHRWZXJ0eCgpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHZhciByID0gcmVxdWlyZTtcbiAgICAgICAgdmFyIHZlcnR4ID0gcigndmVydHgnKTtcbiAgICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJHZlcnR4TmV4dCA9IHZlcnR4LnJ1bk9uTG9vcCB8fCB2ZXJ0eC5ydW5PbkNvbnRleHQ7XG4gICAgICAgIHJldHVybiBsaWIkZXM2JHByb21pc2UkYXNhcCQkdXNlVmVydHhUaW1lcigpO1xuICAgICAgfSBjYXRjaChlKSB7XG4gICAgICAgIHJldHVybiBsaWIkZXM2JHByb21pc2UkYXNhcCQkdXNlU2V0VGltZW91dCgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBsaWIkZXM2JHByb21pc2UkYXNhcCQkc2NoZWR1bGVGbHVzaDtcbiAgICAvLyBEZWNpZGUgd2hhdCBhc3luYyBtZXRob2QgdG8gdXNlIHRvIHRyaWdnZXJpbmcgcHJvY2Vzc2luZyBvZiBxdWV1ZWQgY2FsbGJhY2tzOlxuICAgIGlmIChsaWIkZXM2JHByb21pc2UkYXNhcCQkaXNOb2RlKSB7XG4gICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkc2NoZWR1bGVGbHVzaCA9IGxpYiRlczYkcHJvbWlzZSRhc2FwJCR1c2VOZXh0VGljaygpO1xuICAgIH0gZWxzZSBpZiAobGliJGVzNiRwcm9taXNlJGFzYXAkJEJyb3dzZXJNdXRhdGlvbk9ic2VydmVyKSB7XG4gICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkc2NoZWR1bGVGbHVzaCA9IGxpYiRlczYkcHJvbWlzZSRhc2FwJCR1c2VNdXRhdGlvbk9ic2VydmVyKCk7XG4gICAgfSBlbHNlIGlmIChsaWIkZXM2JHByb21pc2UkYXNhcCQkaXNXb3JrZXIpIHtcbiAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRzY2hlZHVsZUZsdXNoID0gbGliJGVzNiRwcm9taXNlJGFzYXAkJHVzZU1lc3NhZ2VDaGFubmVsKCk7XG4gICAgfSBlbHNlIGlmIChsaWIkZXM2JHByb21pc2UkYXNhcCQkYnJvd3NlcldpbmRvdyA9PT0gdW5kZWZpbmVkICYmIHR5cGVvZiByZXF1aXJlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkc2NoZWR1bGVGbHVzaCA9IGxpYiRlczYkcHJvbWlzZSRhc2FwJCRhdHRlbXB0VmVydHgoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJHNjaGVkdWxlRmx1c2ggPSBsaWIkZXM2JHByb21pc2UkYXNhcCQkdXNlU2V0VGltZW91dCgpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJG5vb3AoKSB7fVxuXG4gICAgdmFyIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFBFTkRJTkcgICA9IHZvaWQgMDtcbiAgICB2YXIgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkRlVMRklMTEVEID0gMTtcbiAgICB2YXIgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUkVKRUNURUQgID0gMjtcblxuICAgIHZhciBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRHRVRfVEhFTl9FUlJPUiA9IG5ldyBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRFcnJvck9iamVjdCgpO1xuXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkc2VsZkZ1bGZpbGxtZW50KCkge1xuICAgICAgcmV0dXJuIG5ldyBUeXBlRXJyb3IoXCJZb3UgY2Fubm90IHJlc29sdmUgYSBwcm9taXNlIHdpdGggaXRzZWxmXCIpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGNhbm5vdFJldHVybk93bigpIHtcbiAgICAgIHJldHVybiBuZXcgVHlwZUVycm9yKCdBIHByb21pc2VzIGNhbGxiYWNrIGNhbm5vdCByZXR1cm4gdGhhdCBzYW1lIHByb21pc2UuJyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkZ2V0VGhlbihwcm9taXNlKSB7XG4gICAgICB0cnkge1xuICAgICAgICByZXR1cm4gcHJvbWlzZS50aGVuO1xuICAgICAgfSBjYXRjaChlcnJvcikge1xuICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRHRVRfVEhFTl9FUlJPUi5lcnJvciA9IGVycm9yO1xuICAgICAgICByZXR1cm4gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkR0VUX1RIRU5fRVJST1I7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkdHJ5VGhlbih0aGVuLCB2YWx1ZSwgZnVsZmlsbG1lbnRIYW5kbGVyLCByZWplY3Rpb25IYW5kbGVyKSB7XG4gICAgICB0cnkge1xuICAgICAgICB0aGVuLmNhbGwodmFsdWUsIGZ1bGZpbGxtZW50SGFuZGxlciwgcmVqZWN0aW9uSGFuZGxlcik7XG4gICAgICB9IGNhdGNoKGUpIHtcbiAgICAgICAgcmV0dXJuIGU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaGFuZGxlRm9yZWlnblRoZW5hYmxlKHByb21pc2UsIHRoZW5hYmxlLCB0aGVuKSB7XG4gICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJGFzYXAoZnVuY3Rpb24ocHJvbWlzZSkge1xuICAgICAgICB2YXIgc2VhbGVkID0gZmFsc2U7XG4gICAgICAgIHZhciBlcnJvciA9IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHRyeVRoZW4odGhlbiwgdGhlbmFibGUsIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgaWYgKHNlYWxlZCkgeyByZXR1cm47IH1cbiAgICAgICAgICBzZWFsZWQgPSB0cnVlO1xuICAgICAgICAgIGlmICh0aGVuYWJsZSAhPT0gdmFsdWUpIHtcbiAgICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlc29sdmUocHJvbWlzZSwgdmFsdWUpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRmdWxmaWxsKHByb21pc2UsIHZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sIGZ1bmN0aW9uKHJlYXNvbikge1xuICAgICAgICAgIGlmIChzZWFsZWQpIHsgcmV0dXJuOyB9XG4gICAgICAgICAgc2VhbGVkID0gdHJ1ZTtcblxuICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlamVjdChwcm9taXNlLCByZWFzb24pO1xuICAgICAgICB9LCAnU2V0dGxlOiAnICsgKHByb21pc2UuX2xhYmVsIHx8ICcgdW5rbm93biBwcm9taXNlJykpO1xuXG4gICAgICAgIGlmICghc2VhbGVkICYmIGVycm9yKSB7XG4gICAgICAgICAgc2VhbGVkID0gdHJ1ZTtcbiAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZWplY3QocHJvbWlzZSwgZXJyb3IpO1xuICAgICAgICB9XG4gICAgICB9LCBwcm9taXNlKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRoYW5kbGVPd25UaGVuYWJsZShwcm9taXNlLCB0aGVuYWJsZSkge1xuICAgICAgaWYgKHRoZW5hYmxlLl9zdGF0ZSA9PT0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkRlVMRklMTEVEKSB7XG4gICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGZ1bGZpbGwocHJvbWlzZSwgdGhlbmFibGUuX3Jlc3VsdCk7XG4gICAgICB9IGVsc2UgaWYgKHRoZW5hYmxlLl9zdGF0ZSA9PT0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUkVKRUNURUQpIHtcbiAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVqZWN0KHByb21pc2UsIHRoZW5hYmxlLl9yZXN1bHQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkc3Vic2NyaWJlKHRoZW5hYmxlLCB1bmRlZmluZWQsIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSk7XG4gICAgICAgIH0sIGZ1bmN0aW9uKHJlYXNvbikge1xuICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlamVjdChwcm9taXNlLCByZWFzb24pO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRoYW5kbGVNYXliZVRoZW5hYmxlKHByb21pc2UsIG1heWJlVGhlbmFibGUpIHtcbiAgICAgIGlmIChtYXliZVRoZW5hYmxlLmNvbnN0cnVjdG9yID09PSBwcm9taXNlLmNvbnN0cnVjdG9yKSB7XG4gICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGhhbmRsZU93blRoZW5hYmxlKHByb21pc2UsIG1heWJlVGhlbmFibGUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHRoZW4gPSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRnZXRUaGVuKG1heWJlVGhlbmFibGUpO1xuXG4gICAgICAgIGlmICh0aGVuID09PSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRHRVRfVEhFTl9FUlJPUikge1xuICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlamVjdChwcm9taXNlLCBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRHRVRfVEhFTl9FUlJPUi5lcnJvcik7XG4gICAgICAgIH0gZWxzZSBpZiAodGhlbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkZnVsZmlsbChwcm9taXNlLCBtYXliZVRoZW5hYmxlKTtcbiAgICAgICAgfSBlbHNlIGlmIChsaWIkZXM2JHByb21pc2UkdXRpbHMkJGlzRnVuY3Rpb24odGhlbikpIHtcbiAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRoYW5kbGVGb3JlaWduVGhlbmFibGUocHJvbWlzZSwgbWF5YmVUaGVuYWJsZSwgdGhlbik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkZnVsZmlsbChwcm9taXNlLCBtYXliZVRoZW5hYmxlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlc29sdmUocHJvbWlzZSwgdmFsdWUpIHtcbiAgICAgIGlmIChwcm9taXNlID09PSB2YWx1ZSkge1xuICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZWplY3QocHJvbWlzZSwgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkc2VsZkZ1bGZpbGxtZW50KCkpO1xuICAgICAgfSBlbHNlIGlmIChsaWIkZXM2JHByb21pc2UkdXRpbHMkJG9iamVjdE9yRnVuY3Rpb24odmFsdWUpKSB7XG4gICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGhhbmRsZU1heWJlVGhlbmFibGUocHJvbWlzZSwgdmFsdWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkZnVsZmlsbChwcm9taXNlLCB2YWx1ZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcHVibGlzaFJlamVjdGlvbihwcm9taXNlKSB7XG4gICAgICBpZiAocHJvbWlzZS5fb25lcnJvcikge1xuICAgICAgICBwcm9taXNlLl9vbmVycm9yKHByb21pc2UuX3Jlc3VsdCk7XG4gICAgICB9XG5cbiAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHB1Ymxpc2gocHJvbWlzZSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkZnVsZmlsbChwcm9taXNlLCB2YWx1ZSkge1xuICAgICAgaWYgKHByb21pc2UuX3N0YXRlICE9PSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRQRU5ESU5HKSB7IHJldHVybjsgfVxuXG4gICAgICBwcm9taXNlLl9yZXN1bHQgPSB2YWx1ZTtcbiAgICAgIHByb21pc2UuX3N0YXRlID0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkRlVMRklMTEVEO1xuXG4gICAgICBpZiAocHJvbWlzZS5fc3Vic2NyaWJlcnMubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRhc2FwKGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHB1Ymxpc2gsIHByb21pc2UpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlamVjdChwcm9taXNlLCByZWFzb24pIHtcbiAgICAgIGlmIChwcm9taXNlLl9zdGF0ZSAhPT0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUEVORElORykgeyByZXR1cm47IH1cbiAgICAgIHByb21pc2UuX3N0YXRlID0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUkVKRUNURUQ7XG4gICAgICBwcm9taXNlLl9yZXN1bHQgPSByZWFzb247XG5cbiAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRhc2FwKGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHB1Ymxpc2hSZWplY3Rpb24sIHByb21pc2UpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHN1YnNjcmliZShwYXJlbnQsIGNoaWxkLCBvbkZ1bGZpbGxtZW50LCBvblJlamVjdGlvbikge1xuICAgICAgdmFyIHN1YnNjcmliZXJzID0gcGFyZW50Ll9zdWJzY3JpYmVycztcbiAgICAgIHZhciBsZW5ndGggPSBzdWJzY3JpYmVycy5sZW5ndGg7XG5cbiAgICAgIHBhcmVudC5fb25lcnJvciA9IG51bGw7XG5cbiAgICAgIHN1YnNjcmliZXJzW2xlbmd0aF0gPSBjaGlsZDtcbiAgICAgIHN1YnNjcmliZXJzW2xlbmd0aCArIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJEZVTEZJTExFRF0gPSBvbkZ1bGZpbGxtZW50O1xuICAgICAgc3Vic2NyaWJlcnNbbGVuZ3RoICsgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUkVKRUNURURdICA9IG9uUmVqZWN0aW9uO1xuXG4gICAgICBpZiAobGVuZ3RoID09PSAwICYmIHBhcmVudC5fc3RhdGUpIHtcbiAgICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJGFzYXAobGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcHVibGlzaCwgcGFyZW50KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRwdWJsaXNoKHByb21pc2UpIHtcbiAgICAgIHZhciBzdWJzY3JpYmVycyA9IHByb21pc2UuX3N1YnNjcmliZXJzO1xuICAgICAgdmFyIHNldHRsZWQgPSBwcm9taXNlLl9zdGF0ZTtcblxuICAgICAgaWYgKHN1YnNjcmliZXJzLmxlbmd0aCA9PT0gMCkgeyByZXR1cm47IH1cblxuICAgICAgdmFyIGNoaWxkLCBjYWxsYmFjaywgZGV0YWlsID0gcHJvbWlzZS5fcmVzdWx0O1xuXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN1YnNjcmliZXJzLmxlbmd0aDsgaSArPSAzKSB7XG4gICAgICAgIGNoaWxkID0gc3Vic2NyaWJlcnNbaV07XG4gICAgICAgIGNhbGxiYWNrID0gc3Vic2NyaWJlcnNbaSArIHNldHRsZWRdO1xuXG4gICAgICAgIGlmIChjaGlsZCkge1xuICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGludm9rZUNhbGxiYWNrKHNldHRsZWQsIGNoaWxkLCBjYWxsYmFjaywgZGV0YWlsKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjYWxsYmFjayhkZXRhaWwpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHByb21pc2UuX3N1YnNjcmliZXJzLmxlbmd0aCA9IDA7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkRXJyb3JPYmplY3QoKSB7XG4gICAgICB0aGlzLmVycm9yID0gbnVsbDtcbiAgICB9XG5cbiAgICB2YXIgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkVFJZX0NBVENIX0VSUk9SID0gbmV3IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJEVycm9yT2JqZWN0KCk7XG5cbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCR0cnlDYXRjaChjYWxsYmFjaywgZGV0YWlsKSB7XG4gICAgICB0cnkge1xuICAgICAgICByZXR1cm4gY2FsbGJhY2soZGV0YWlsKTtcbiAgICAgIH0gY2F0Y2goZSkge1xuICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRUUllfQ0FUQ0hfRVJST1IuZXJyb3IgPSBlO1xuICAgICAgICByZXR1cm4gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkVFJZX0NBVENIX0VSUk9SO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGludm9rZUNhbGxiYWNrKHNldHRsZWQsIHByb21pc2UsIGNhbGxiYWNrLCBkZXRhaWwpIHtcbiAgICAgIHZhciBoYXNDYWxsYmFjayA9IGxpYiRlczYkcHJvbWlzZSR1dGlscyQkaXNGdW5jdGlvbihjYWxsYmFjayksXG4gICAgICAgICAgdmFsdWUsIGVycm9yLCBzdWNjZWVkZWQsIGZhaWxlZDtcblxuICAgICAgaWYgKGhhc0NhbGxiYWNrKSB7XG4gICAgICAgIHZhbHVlID0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkdHJ5Q2F0Y2goY2FsbGJhY2ssIGRldGFpbCk7XG5cbiAgICAgICAgaWYgKHZhbHVlID09PSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRUUllfQ0FUQ0hfRVJST1IpIHtcbiAgICAgICAgICBmYWlsZWQgPSB0cnVlO1xuICAgICAgICAgIGVycm9yID0gdmFsdWUuZXJyb3I7XG4gICAgICAgICAgdmFsdWUgPSBudWxsO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN1Y2NlZWRlZCA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocHJvbWlzZSA9PT0gdmFsdWUpIHtcbiAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZWplY3QocHJvbWlzZSwgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkY2Fubm90UmV0dXJuT3duKCkpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YWx1ZSA9IGRldGFpbDtcbiAgICAgICAgc3VjY2VlZGVkID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKHByb21pc2UuX3N0YXRlICE9PSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRQRU5ESU5HKSB7XG4gICAgICAgIC8vIG5vb3BcbiAgICAgIH0gZWxzZSBpZiAoaGFzQ2FsbGJhY2sgJiYgc3VjY2VlZGVkKSB7XG4gICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlc29sdmUocHJvbWlzZSwgdmFsdWUpO1xuICAgICAgfSBlbHNlIGlmIChmYWlsZWQpIHtcbiAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVqZWN0KHByb21pc2UsIGVycm9yKTtcbiAgICAgIH0gZWxzZSBpZiAoc2V0dGxlZCA9PT0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkRlVMRklMTEVEKSB7XG4gICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGZ1bGZpbGwocHJvbWlzZSwgdmFsdWUpO1xuICAgICAgfSBlbHNlIGlmIChzZXR0bGVkID09PSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRSRUpFQ1RFRCkge1xuICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZWplY3QocHJvbWlzZSwgdmFsdWUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGluaXRpYWxpemVQcm9taXNlKHByb21pc2UsIHJlc29sdmVyKSB7XG4gICAgICB0cnkge1xuICAgICAgICByZXNvbHZlcihmdW5jdGlvbiByZXNvbHZlUHJvbWlzZSh2YWx1ZSl7XG4gICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSk7XG4gICAgICAgIH0sIGZ1bmN0aW9uIHJlamVjdFByb21pc2UocmVhc29uKSB7XG4gICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVqZWN0KHByb21pc2UsIHJlYXNvbik7XG4gICAgICAgIH0pO1xuICAgICAgfSBjYXRjaChlKSB7XG4gICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlamVjdChwcm9taXNlLCBlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkZW51bWVyYXRvciQkRW51bWVyYXRvcihDb25zdHJ1Y3RvciwgaW5wdXQpIHtcbiAgICAgIHZhciBlbnVtZXJhdG9yID0gdGhpcztcblxuICAgICAgZW51bWVyYXRvci5faW5zdGFuY2VDb25zdHJ1Y3RvciA9IENvbnN0cnVjdG9yO1xuICAgICAgZW51bWVyYXRvci5wcm9taXNlID0gbmV3IENvbnN0cnVjdG9yKGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJG5vb3ApO1xuXG4gICAgICBpZiAoZW51bWVyYXRvci5fdmFsaWRhdGVJbnB1dChpbnB1dCkpIHtcbiAgICAgICAgZW51bWVyYXRvci5faW5wdXQgICAgID0gaW5wdXQ7XG4gICAgICAgIGVudW1lcmF0b3IubGVuZ3RoICAgICA9IGlucHV0Lmxlbmd0aDtcbiAgICAgICAgZW51bWVyYXRvci5fcmVtYWluaW5nID0gaW5wdXQubGVuZ3RoO1xuXG4gICAgICAgIGVudW1lcmF0b3IuX2luaXQoKTtcblxuICAgICAgICBpZiAoZW51bWVyYXRvci5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRmdWxmaWxsKGVudW1lcmF0b3IucHJvbWlzZSwgZW51bWVyYXRvci5fcmVzdWx0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBlbnVtZXJhdG9yLmxlbmd0aCA9IGVudW1lcmF0b3IubGVuZ3RoIHx8IDA7XG4gICAgICAgICAgZW51bWVyYXRvci5fZW51bWVyYXRlKCk7XG4gICAgICAgICAgaWYgKGVudW1lcmF0b3IuX3JlbWFpbmluZyA9PT0gMCkge1xuICAgICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkZnVsZmlsbChlbnVtZXJhdG9yLnByb21pc2UsIGVudW1lcmF0b3IuX3Jlc3VsdCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZWplY3QoZW51bWVyYXRvci5wcm9taXNlLCBlbnVtZXJhdG9yLl92YWxpZGF0aW9uRXJyb3IoKSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgbGliJGVzNiRwcm9taXNlJGVudW1lcmF0b3IkJEVudW1lcmF0b3IucHJvdG90eXBlLl92YWxpZGF0ZUlucHV0ID0gZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgIHJldHVybiBsaWIkZXM2JHByb21pc2UkdXRpbHMkJGlzQXJyYXkoaW5wdXQpO1xuICAgIH07XG5cbiAgICBsaWIkZXM2JHByb21pc2UkZW51bWVyYXRvciQkRW51bWVyYXRvci5wcm90b3R5cGUuX3ZhbGlkYXRpb25FcnJvciA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIG5ldyBFcnJvcignQXJyYXkgTWV0aG9kcyBtdXN0IGJlIHByb3ZpZGVkIGFuIEFycmF5Jyk7XG4gICAgfTtcblxuICAgIGxpYiRlczYkcHJvbWlzZSRlbnVtZXJhdG9yJCRFbnVtZXJhdG9yLnByb3RvdHlwZS5faW5pdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy5fcmVzdWx0ID0gbmV3IEFycmF5KHRoaXMubGVuZ3RoKTtcbiAgICB9O1xuXG4gICAgdmFyIGxpYiRlczYkcHJvbWlzZSRlbnVtZXJhdG9yJCRkZWZhdWx0ID0gbGliJGVzNiRwcm9taXNlJGVudW1lcmF0b3IkJEVudW1lcmF0b3I7XG5cbiAgICBsaWIkZXM2JHByb21pc2UkZW51bWVyYXRvciQkRW51bWVyYXRvci5wcm90b3R5cGUuX2VudW1lcmF0ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGVudW1lcmF0b3IgPSB0aGlzO1xuXG4gICAgICB2YXIgbGVuZ3RoICA9IGVudW1lcmF0b3IubGVuZ3RoO1xuICAgICAgdmFyIHByb21pc2UgPSBlbnVtZXJhdG9yLnByb21pc2U7XG4gICAgICB2YXIgaW5wdXQgICA9IGVudW1lcmF0b3IuX2lucHV0O1xuXG4gICAgICBmb3IgKHZhciBpID0gMDsgcHJvbWlzZS5fc3RhdGUgPT09IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFBFTkRJTkcgJiYgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGVudW1lcmF0b3IuX2VhY2hFbnRyeShpbnB1dFtpXSwgaSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGxpYiRlczYkcHJvbWlzZSRlbnVtZXJhdG9yJCRFbnVtZXJhdG9yLnByb3RvdHlwZS5fZWFjaEVudHJ5ID0gZnVuY3Rpb24oZW50cnksIGkpIHtcbiAgICAgIHZhciBlbnVtZXJhdG9yID0gdGhpcztcbiAgICAgIHZhciBjID0gZW51bWVyYXRvci5faW5zdGFuY2VDb25zdHJ1Y3RvcjtcblxuICAgICAgaWYgKGxpYiRlczYkcHJvbWlzZSR1dGlscyQkaXNNYXliZVRoZW5hYmxlKGVudHJ5KSkge1xuICAgICAgICBpZiAoZW50cnkuY29uc3RydWN0b3IgPT09IGMgJiYgZW50cnkuX3N0YXRlICE9PSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRQRU5ESU5HKSB7XG4gICAgICAgICAgZW50cnkuX29uZXJyb3IgPSBudWxsO1xuICAgICAgICAgIGVudW1lcmF0b3IuX3NldHRsZWRBdChlbnRyeS5fc3RhdGUsIGksIGVudHJ5Ll9yZXN1bHQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGVudW1lcmF0b3IuX3dpbGxTZXR0bGVBdChjLnJlc29sdmUoZW50cnkpLCBpKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZW51bWVyYXRvci5fcmVtYWluaW5nLS07XG4gICAgICAgIGVudW1lcmF0b3IuX3Jlc3VsdFtpXSA9IGVudHJ5O1xuICAgICAgfVxuICAgIH07XG5cbiAgICBsaWIkZXM2JHByb21pc2UkZW51bWVyYXRvciQkRW51bWVyYXRvci5wcm90b3R5cGUuX3NldHRsZWRBdCA9IGZ1bmN0aW9uKHN0YXRlLCBpLCB2YWx1ZSkge1xuICAgICAgdmFyIGVudW1lcmF0b3IgPSB0aGlzO1xuICAgICAgdmFyIHByb21pc2UgPSBlbnVtZXJhdG9yLnByb21pc2U7XG5cbiAgICAgIGlmIChwcm9taXNlLl9zdGF0ZSA9PT0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUEVORElORykge1xuICAgICAgICBlbnVtZXJhdG9yLl9yZW1haW5pbmctLTtcblxuICAgICAgICBpZiAoc3RhdGUgPT09IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFJFSkVDVEVEKSB7XG4gICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVqZWN0KHByb21pc2UsIHZhbHVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBlbnVtZXJhdG9yLl9yZXN1bHRbaV0gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoZW51bWVyYXRvci5fcmVtYWluaW5nID09PSAwKSB7XG4gICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGZ1bGZpbGwocHJvbWlzZSwgZW51bWVyYXRvci5fcmVzdWx0KTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgbGliJGVzNiRwcm9taXNlJGVudW1lcmF0b3IkJEVudW1lcmF0b3IucHJvdG90eXBlLl93aWxsU2V0dGxlQXQgPSBmdW5jdGlvbihwcm9taXNlLCBpKSB7XG4gICAgICB2YXIgZW51bWVyYXRvciA9IHRoaXM7XG5cbiAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHN1YnNjcmliZShwcm9taXNlLCB1bmRlZmluZWQsIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIGVudW1lcmF0b3IuX3NldHRsZWRBdChsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRGVUxGSUxMRUQsIGksIHZhbHVlKTtcbiAgICAgIH0sIGZ1bmN0aW9uKHJlYXNvbikge1xuICAgICAgICBlbnVtZXJhdG9yLl9zZXR0bGVkQXQobGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUkVKRUNURUQsIGksIHJlYXNvbik7XG4gICAgICB9KTtcbiAgICB9O1xuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJGFsbCQkYWxsKGVudHJpZXMpIHtcbiAgICAgIHJldHVybiBuZXcgbGliJGVzNiRwcm9taXNlJGVudW1lcmF0b3IkJGRlZmF1bHQodGhpcywgZW50cmllcykucHJvbWlzZTtcbiAgICB9XG4gICAgdmFyIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJGFsbCQkZGVmYXVsdCA9IGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJGFsbCQkYWxsO1xuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJHJhY2UkJHJhY2UoZW50cmllcykge1xuICAgICAgLypqc2hpbnQgdmFsaWR0aGlzOnRydWUgKi9cbiAgICAgIHZhciBDb25zdHJ1Y3RvciA9IHRoaXM7XG5cbiAgICAgIHZhciBwcm9taXNlID0gbmV3IENvbnN0cnVjdG9yKGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJG5vb3ApO1xuXG4gICAgICBpZiAoIWxpYiRlczYkcHJvbWlzZSR1dGlscyQkaXNBcnJheShlbnRyaWVzKSkge1xuICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZWplY3QocHJvbWlzZSwgbmV3IFR5cGVFcnJvcignWW91IG11c3QgcGFzcyBhbiBhcnJheSB0byByYWNlLicpKTtcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgICB9XG5cbiAgICAgIHZhciBsZW5ndGggPSBlbnRyaWVzLmxlbmd0aDtcblxuICAgICAgZnVuY3Rpb24gb25GdWxmaWxsbWVudCh2YWx1ZSkge1xuICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZXNvbHZlKHByb21pc2UsIHZhbHVlKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gb25SZWplY3Rpb24ocmVhc29uKSB7XG4gICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlamVjdChwcm9taXNlLCByZWFzb24pO1xuICAgICAgfVxuXG4gICAgICBmb3IgKHZhciBpID0gMDsgcHJvbWlzZS5fc3RhdGUgPT09IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFBFTkRJTkcgJiYgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHN1YnNjcmliZShDb25zdHJ1Y3Rvci5yZXNvbHZlKGVudHJpZXNbaV0pLCB1bmRlZmluZWQsIG9uRnVsZmlsbG1lbnQsIG9uUmVqZWN0aW9uKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgfVxuICAgIHZhciBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRyYWNlJCRkZWZhdWx0ID0gbGliJGVzNiRwcm9taXNlJHByb21pc2UkcmFjZSQkcmFjZTtcbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRyZXNvbHZlJCRyZXNvbHZlKG9iamVjdCkge1xuICAgICAgLypqc2hpbnQgdmFsaWR0aGlzOnRydWUgKi9cbiAgICAgIHZhciBDb25zdHJ1Y3RvciA9IHRoaXM7XG5cbiAgICAgIGlmIChvYmplY3QgJiYgdHlwZW9mIG9iamVjdCA9PT0gJ29iamVjdCcgJiYgb2JqZWN0LmNvbnN0cnVjdG9yID09PSBDb25zdHJ1Y3Rvcikge1xuICAgICAgICByZXR1cm4gb2JqZWN0O1xuICAgICAgfVxuXG4gICAgICB2YXIgcHJvbWlzZSA9IG5ldyBDb25zdHJ1Y3RvcihsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRub29wKTtcbiAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlc29sdmUocHJvbWlzZSwgb2JqZWN0KTtcbiAgICAgIHJldHVybiBwcm9taXNlO1xuICAgIH1cbiAgICB2YXIgbGliJGVzNiRwcm9taXNlJHByb21pc2UkcmVzb2x2ZSQkZGVmYXVsdCA9IGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJHJlc29sdmUkJHJlc29sdmU7XG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJHByb21pc2UkcmVqZWN0JCRyZWplY3QocmVhc29uKSB7XG4gICAgICAvKmpzaGludCB2YWxpZHRoaXM6dHJ1ZSAqL1xuICAgICAgdmFyIENvbnN0cnVjdG9yID0gdGhpcztcbiAgICAgIHZhciBwcm9taXNlID0gbmV3IENvbnN0cnVjdG9yKGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJG5vb3ApO1xuICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVqZWN0KHByb21pc2UsIHJlYXNvbik7XG4gICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICB9XG4gICAgdmFyIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJHJlamVjdCQkZGVmYXVsdCA9IGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJHJlamVjdCQkcmVqZWN0O1xuXG4gICAgdmFyIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRjb3VudGVyID0gMDtcblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRuZWVkc1Jlc29sdmVyKCkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignWW91IG11c3QgcGFzcyBhIHJlc29sdmVyIGZ1bmN0aW9uIGFzIHRoZSBmaXJzdCBhcmd1bWVudCB0byB0aGUgcHJvbWlzZSBjb25zdHJ1Y3RvcicpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRuZWVkc05ldygpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJGYWlsZWQgdG8gY29uc3RydWN0ICdQcm9taXNlJzogUGxlYXNlIHVzZSB0aGUgJ25ldycgb3BlcmF0b3IsIHRoaXMgb2JqZWN0IGNvbnN0cnVjdG9yIGNhbm5vdCBiZSBjYWxsZWQgYXMgYSBmdW5jdGlvbi5cIik7XG4gICAgfVxuXG4gICAgdmFyIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRkZWZhdWx0ID0gbGliJGVzNiRwcm9taXNlJHByb21pc2UkJFByb21pc2U7XG4gICAgLyoqXG4gICAgICBQcm9taXNlIG9iamVjdHMgcmVwcmVzZW50IHRoZSBldmVudHVhbCByZXN1bHQgb2YgYW4gYXN5bmNocm9ub3VzIG9wZXJhdGlvbi4gVGhlXG4gICAgICBwcmltYXJ5IHdheSBvZiBpbnRlcmFjdGluZyB3aXRoIGEgcHJvbWlzZSBpcyB0aHJvdWdoIGl0cyBgdGhlbmAgbWV0aG9kLCB3aGljaFxuICAgICAgcmVnaXN0ZXJzIGNhbGxiYWNrcyB0byByZWNlaXZlIGVpdGhlciBhIHByb21pc2UncyBldmVudHVhbCB2YWx1ZSBvciB0aGUgcmVhc29uXG4gICAgICB3aHkgdGhlIHByb21pc2UgY2Fubm90IGJlIGZ1bGZpbGxlZC5cblxuICAgICAgVGVybWlub2xvZ3lcbiAgICAgIC0tLS0tLS0tLS0tXG5cbiAgICAgIC0gYHByb21pc2VgIGlzIGFuIG9iamVjdCBvciBmdW5jdGlvbiB3aXRoIGEgYHRoZW5gIG1ldGhvZCB3aG9zZSBiZWhhdmlvciBjb25mb3JtcyB0byB0aGlzIHNwZWNpZmljYXRpb24uXG4gICAgICAtIGB0aGVuYWJsZWAgaXMgYW4gb2JqZWN0IG9yIGZ1bmN0aW9uIHRoYXQgZGVmaW5lcyBhIGB0aGVuYCBtZXRob2QuXG4gICAgICAtIGB2YWx1ZWAgaXMgYW55IGxlZ2FsIEphdmFTY3JpcHQgdmFsdWUgKGluY2x1ZGluZyB1bmRlZmluZWQsIGEgdGhlbmFibGUsIG9yIGEgcHJvbWlzZSkuXG4gICAgICAtIGBleGNlcHRpb25gIGlzIGEgdmFsdWUgdGhhdCBpcyB0aHJvd24gdXNpbmcgdGhlIHRocm93IHN0YXRlbWVudC5cbiAgICAgIC0gYHJlYXNvbmAgaXMgYSB2YWx1ZSB0aGF0IGluZGljYXRlcyB3aHkgYSBwcm9taXNlIHdhcyByZWplY3RlZC5cbiAgICAgIC0gYHNldHRsZWRgIHRoZSBmaW5hbCByZXN0aW5nIHN0YXRlIG9mIGEgcHJvbWlzZSwgZnVsZmlsbGVkIG9yIHJlamVjdGVkLlxuXG4gICAgICBBIHByb21pc2UgY2FuIGJlIGluIG9uZSBvZiB0aHJlZSBzdGF0ZXM6IHBlbmRpbmcsIGZ1bGZpbGxlZCwgb3IgcmVqZWN0ZWQuXG5cbiAgICAgIFByb21pc2VzIHRoYXQgYXJlIGZ1bGZpbGxlZCBoYXZlIGEgZnVsZmlsbG1lbnQgdmFsdWUgYW5kIGFyZSBpbiB0aGUgZnVsZmlsbGVkXG4gICAgICBzdGF0ZS4gIFByb21pc2VzIHRoYXQgYXJlIHJlamVjdGVkIGhhdmUgYSByZWplY3Rpb24gcmVhc29uIGFuZCBhcmUgaW4gdGhlXG4gICAgICByZWplY3RlZCBzdGF0ZS4gIEEgZnVsZmlsbG1lbnQgdmFsdWUgaXMgbmV2ZXIgYSB0aGVuYWJsZS5cblxuICAgICAgUHJvbWlzZXMgY2FuIGFsc28gYmUgc2FpZCB0byAqcmVzb2x2ZSogYSB2YWx1ZS4gIElmIHRoaXMgdmFsdWUgaXMgYWxzbyBhXG4gICAgICBwcm9taXNlLCB0aGVuIHRoZSBvcmlnaW5hbCBwcm9taXNlJ3Mgc2V0dGxlZCBzdGF0ZSB3aWxsIG1hdGNoIHRoZSB2YWx1ZSdzXG4gICAgICBzZXR0bGVkIHN0YXRlLiAgU28gYSBwcm9taXNlIHRoYXQgKnJlc29sdmVzKiBhIHByb21pc2UgdGhhdCByZWplY3RzIHdpbGxcbiAgICAgIGl0c2VsZiByZWplY3QsIGFuZCBhIHByb21pc2UgdGhhdCAqcmVzb2x2ZXMqIGEgcHJvbWlzZSB0aGF0IGZ1bGZpbGxzIHdpbGxcbiAgICAgIGl0c2VsZiBmdWxmaWxsLlxuXG5cbiAgICAgIEJhc2ljIFVzYWdlOlxuICAgICAgLS0tLS0tLS0tLS0tXG5cbiAgICAgIGBgYGpzXG4gICAgICB2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAvLyBvbiBzdWNjZXNzXG4gICAgICAgIHJlc29sdmUodmFsdWUpO1xuXG4gICAgICAgIC8vIG9uIGZhaWx1cmVcbiAgICAgICAgcmVqZWN0KHJlYXNvbik7XG4gICAgICB9KTtcblxuICAgICAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIC8vIG9uIGZ1bGZpbGxtZW50XG4gICAgICB9LCBmdW5jdGlvbihyZWFzb24pIHtcbiAgICAgICAgLy8gb24gcmVqZWN0aW9uXG4gICAgICB9KTtcbiAgICAgIGBgYFxuXG4gICAgICBBZHZhbmNlZCBVc2FnZTpcbiAgICAgIC0tLS0tLS0tLS0tLS0tLVxuXG4gICAgICBQcm9taXNlcyBzaGluZSB3aGVuIGFic3RyYWN0aW5nIGF3YXkgYXN5bmNocm9ub3VzIGludGVyYWN0aW9ucyBzdWNoIGFzXG4gICAgICBgWE1MSHR0cFJlcXVlc3Rgcy5cblxuICAgICAgYGBganNcbiAgICAgIGZ1bmN0aW9uIGdldEpTT04odXJsKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3Qpe1xuICAgICAgICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblxuICAgICAgICAgIHhoci5vcGVuKCdHRVQnLCB1cmwpO1xuICAgICAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBoYW5kbGVyO1xuICAgICAgICAgIHhoci5yZXNwb25zZVR5cGUgPSAnanNvbic7XG4gICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoJ0FjY2VwdCcsICdhcHBsaWNhdGlvbi9qc29uJyk7XG4gICAgICAgICAgeGhyLnNlbmQoKTtcblxuICAgICAgICAgIGZ1bmN0aW9uIGhhbmRsZXIoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5yZWFkeVN0YXRlID09PSB0aGlzLkRPTkUpIHtcbiAgICAgICAgICAgICAgaWYgKHRoaXMuc3RhdHVzID09PSAyMDApIHtcbiAgICAgICAgICAgICAgICByZXNvbHZlKHRoaXMucmVzcG9uc2UpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoJ2dldEpTT046IGAnICsgdXJsICsgJ2AgZmFpbGVkIHdpdGggc3RhdHVzOiBbJyArIHRoaXMuc3RhdHVzICsgJ10nKSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgZ2V0SlNPTignL3Bvc3RzLmpzb24nKS50aGVuKGZ1bmN0aW9uKGpzb24pIHtcbiAgICAgICAgLy8gb24gZnVsZmlsbG1lbnRcbiAgICAgIH0sIGZ1bmN0aW9uKHJlYXNvbikge1xuICAgICAgICAvLyBvbiByZWplY3Rpb25cbiAgICAgIH0pO1xuICAgICAgYGBgXG5cbiAgICAgIFVubGlrZSBjYWxsYmFja3MsIHByb21pc2VzIGFyZSBncmVhdCBjb21wb3NhYmxlIHByaW1pdGl2ZXMuXG5cbiAgICAgIGBgYGpzXG4gICAgICBQcm9taXNlLmFsbChbXG4gICAgICAgIGdldEpTT04oJy9wb3N0cycpLFxuICAgICAgICBnZXRKU09OKCcvY29tbWVudHMnKVxuICAgICAgXSkudGhlbihmdW5jdGlvbih2YWx1ZXMpe1xuICAgICAgICB2YWx1ZXNbMF0gLy8gPT4gcG9zdHNKU09OXG4gICAgICAgIHZhbHVlc1sxXSAvLyA9PiBjb21tZW50c0pTT05cblxuICAgICAgICByZXR1cm4gdmFsdWVzO1xuICAgICAgfSk7XG4gICAgICBgYGBcblxuICAgICAgQGNsYXNzIFByb21pc2VcbiAgICAgIEBwYXJhbSB7ZnVuY3Rpb259IHJlc29sdmVyXG4gICAgICBVc2VmdWwgZm9yIHRvb2xpbmcuXG4gICAgICBAY29uc3RydWN0b3JcbiAgICAqL1xuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRQcm9taXNlKHJlc29sdmVyKSB7XG4gICAgICB0aGlzLl9pZCA9IGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRjb3VudGVyKys7XG4gICAgICB0aGlzLl9zdGF0ZSA9IHVuZGVmaW5lZDtcbiAgICAgIHRoaXMuX3Jlc3VsdCA9IHVuZGVmaW5lZDtcbiAgICAgIHRoaXMuX3N1YnNjcmliZXJzID0gW107XG5cbiAgICAgIGlmIChsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRub29wICE9PSByZXNvbHZlcikge1xuICAgICAgICBpZiAoIWxpYiRlczYkcHJvbWlzZSR1dGlscyQkaXNGdW5jdGlvbihyZXNvbHZlcikpIHtcbiAgICAgICAgICBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkbmVlZHNSZXNvbHZlcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRQcm9taXNlKSkge1xuICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRuZWVkc05ldygpO1xuICAgICAgICB9XG5cbiAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaW5pdGlhbGl6ZVByb21pc2UodGhpcywgcmVzb2x2ZXIpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRQcm9taXNlLmFsbCA9IGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJGFsbCQkZGVmYXVsdDtcbiAgICBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkUHJvbWlzZS5yYWNlID0gbGliJGVzNiRwcm9taXNlJHByb21pc2UkcmFjZSQkZGVmYXVsdDtcbiAgICBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkUHJvbWlzZS5yZXNvbHZlID0gbGliJGVzNiRwcm9taXNlJHByb21pc2UkcmVzb2x2ZSQkZGVmYXVsdDtcbiAgICBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkUHJvbWlzZS5yZWplY3QgPSBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRyZWplY3QkJGRlZmF1bHQ7XG4gICAgbGliJGVzNiRwcm9taXNlJHByb21pc2UkJFByb21pc2UuX3NldFNjaGVkdWxlciA9IGxpYiRlczYkcHJvbWlzZSRhc2FwJCRzZXRTY2hlZHVsZXI7XG4gICAgbGliJGVzNiRwcm9taXNlJHByb21pc2UkJFByb21pc2UuX3NldEFzYXAgPSBsaWIkZXM2JHByb21pc2UkYXNhcCQkc2V0QXNhcDtcbiAgICBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkUHJvbWlzZS5fYXNhcCA9IGxpYiRlczYkcHJvbWlzZSRhc2FwJCRhc2FwO1xuXG4gICAgbGliJGVzNiRwcm9taXNlJHByb21pc2UkJFByb21pc2UucHJvdG90eXBlID0ge1xuICAgICAgY29uc3RydWN0b3I6IGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRQcm9taXNlLFxuXG4gICAgLyoqXG4gICAgICBUaGUgcHJpbWFyeSB3YXkgb2YgaW50ZXJhY3Rpbmcgd2l0aCBhIHByb21pc2UgaXMgdGhyb3VnaCBpdHMgYHRoZW5gIG1ldGhvZCxcbiAgICAgIHdoaWNoIHJlZ2lzdGVycyBjYWxsYmFja3MgdG8gcmVjZWl2ZSBlaXRoZXIgYSBwcm9taXNlJ3MgZXZlbnR1YWwgdmFsdWUgb3IgdGhlXG4gICAgICByZWFzb24gd2h5IHRoZSBwcm9taXNlIGNhbm5vdCBiZSBmdWxmaWxsZWQuXG5cbiAgICAgIGBgYGpzXG4gICAgICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24odXNlcil7XG4gICAgICAgIC8vIHVzZXIgaXMgYXZhaWxhYmxlXG4gICAgICB9LCBmdW5jdGlvbihyZWFzb24pe1xuICAgICAgICAvLyB1c2VyIGlzIHVuYXZhaWxhYmxlLCBhbmQgeW91IGFyZSBnaXZlbiB0aGUgcmVhc29uIHdoeVxuICAgICAgfSk7XG4gICAgICBgYGBcblxuICAgICAgQ2hhaW5pbmdcbiAgICAgIC0tLS0tLS0tXG5cbiAgICAgIFRoZSByZXR1cm4gdmFsdWUgb2YgYHRoZW5gIGlzIGl0c2VsZiBhIHByb21pc2UuICBUaGlzIHNlY29uZCwgJ2Rvd25zdHJlYW0nXG4gICAgICBwcm9taXNlIGlzIHJlc29sdmVkIHdpdGggdGhlIHJldHVybiB2YWx1ZSBvZiB0aGUgZmlyc3QgcHJvbWlzZSdzIGZ1bGZpbGxtZW50XG4gICAgICBvciByZWplY3Rpb24gaGFuZGxlciwgb3IgcmVqZWN0ZWQgaWYgdGhlIGhhbmRsZXIgdGhyb3dzIGFuIGV4Y2VwdGlvbi5cblxuICAgICAgYGBganNcbiAgICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikge1xuICAgICAgICByZXR1cm4gdXNlci5uYW1lO1xuICAgICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgICByZXR1cm4gJ2RlZmF1bHQgbmFtZSc7XG4gICAgICB9KS50aGVuKGZ1bmN0aW9uICh1c2VyTmFtZSkge1xuICAgICAgICAvLyBJZiBgZmluZFVzZXJgIGZ1bGZpbGxlZCwgYHVzZXJOYW1lYCB3aWxsIGJlIHRoZSB1c2VyJ3MgbmFtZSwgb3RoZXJ3aXNlIGl0XG4gICAgICAgIC8vIHdpbGwgYmUgYCdkZWZhdWx0IG5hbWUnYFxuICAgICAgfSk7XG5cbiAgICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZvdW5kIHVzZXIsIGJ1dCBzdGlsbCB1bmhhcHB5Jyk7XG4gICAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignYGZpbmRVc2VyYCByZWplY3RlZCBhbmQgd2UncmUgdW5oYXBweScpO1xuICAgICAgfSkudGhlbihmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgLy8gbmV2ZXIgcmVhY2hlZFxuICAgICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgICAvLyBpZiBgZmluZFVzZXJgIGZ1bGZpbGxlZCwgYHJlYXNvbmAgd2lsbCBiZSAnRm91bmQgdXNlciwgYnV0IHN0aWxsIHVuaGFwcHknLlxuICAgICAgICAvLyBJZiBgZmluZFVzZXJgIHJlamVjdGVkLCBgcmVhc29uYCB3aWxsIGJlICdgZmluZFVzZXJgIHJlamVjdGVkIGFuZCB3ZSdyZSB1bmhhcHB5Jy5cbiAgICAgIH0pO1xuICAgICAgYGBgXG4gICAgICBJZiB0aGUgZG93bnN0cmVhbSBwcm9taXNlIGRvZXMgbm90IHNwZWNpZnkgYSByZWplY3Rpb24gaGFuZGxlciwgcmVqZWN0aW9uIHJlYXNvbnMgd2lsbCBiZSBwcm9wYWdhdGVkIGZ1cnRoZXIgZG93bnN0cmVhbS5cblxuICAgICAgYGBganNcbiAgICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikge1xuICAgICAgICB0aHJvdyBuZXcgUGVkYWdvZ2ljYWxFeGNlcHRpb24oJ1Vwc3RyZWFtIGVycm9yJyk7XG4gICAgICB9KS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAvLyBuZXZlciByZWFjaGVkXG4gICAgICB9KS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAvLyBuZXZlciByZWFjaGVkXG4gICAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICAgIC8vIFRoZSBgUGVkZ2Fnb2NpYWxFeGNlcHRpb25gIGlzIHByb3BhZ2F0ZWQgYWxsIHRoZSB3YXkgZG93biB0byBoZXJlXG4gICAgICB9KTtcbiAgICAgIGBgYFxuXG4gICAgICBBc3NpbWlsYXRpb25cbiAgICAgIC0tLS0tLS0tLS0tLVxuXG4gICAgICBTb21ldGltZXMgdGhlIHZhbHVlIHlvdSB3YW50IHRvIHByb3BhZ2F0ZSB0byBhIGRvd25zdHJlYW0gcHJvbWlzZSBjYW4gb25seSBiZVxuICAgICAgcmV0cmlldmVkIGFzeW5jaHJvbm91c2x5LiBUaGlzIGNhbiBiZSBhY2hpZXZlZCBieSByZXR1cm5pbmcgYSBwcm9taXNlIGluIHRoZVxuICAgICAgZnVsZmlsbG1lbnQgb3IgcmVqZWN0aW9uIGhhbmRsZXIuIFRoZSBkb3duc3RyZWFtIHByb21pc2Ugd2lsbCB0aGVuIGJlIHBlbmRpbmdcbiAgICAgIHVudGlsIHRoZSByZXR1cm5lZCBwcm9taXNlIGlzIHNldHRsZWQuIFRoaXMgaXMgY2FsbGVkICphc3NpbWlsYXRpb24qLlxuXG4gICAgICBgYGBqc1xuICAgICAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgICAgIHJldHVybiBmaW5kQ29tbWVudHNCeUF1dGhvcih1c2VyKTtcbiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKGNvbW1lbnRzKSB7XG4gICAgICAgIC8vIFRoZSB1c2VyJ3MgY29tbWVudHMgYXJlIG5vdyBhdmFpbGFibGVcbiAgICAgIH0pO1xuICAgICAgYGBgXG5cbiAgICAgIElmIHRoZSBhc3NpbWxpYXRlZCBwcm9taXNlIHJlamVjdHMsIHRoZW4gdGhlIGRvd25zdHJlYW0gcHJvbWlzZSB3aWxsIGFsc28gcmVqZWN0LlxuXG4gICAgICBgYGBqc1xuICAgICAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgICAgIHJldHVybiBmaW5kQ29tbWVudHNCeUF1dGhvcih1c2VyKTtcbiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKGNvbW1lbnRzKSB7XG4gICAgICAgIC8vIElmIGBmaW5kQ29tbWVudHNCeUF1dGhvcmAgZnVsZmlsbHMsIHdlJ2xsIGhhdmUgdGhlIHZhbHVlIGhlcmVcbiAgICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgICAgLy8gSWYgYGZpbmRDb21tZW50c0J5QXV0aG9yYCByZWplY3RzLCB3ZSdsbCBoYXZlIHRoZSByZWFzb24gaGVyZVxuICAgICAgfSk7XG4gICAgICBgYGBcblxuICAgICAgU2ltcGxlIEV4YW1wbGVcbiAgICAgIC0tLS0tLS0tLS0tLS0tXG5cbiAgICAgIFN5bmNocm9ub3VzIEV4YW1wbGVcblxuICAgICAgYGBgamF2YXNjcmlwdFxuICAgICAgdmFyIHJlc3VsdDtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgcmVzdWx0ID0gZmluZFJlc3VsdCgpO1xuICAgICAgICAvLyBzdWNjZXNzXG4gICAgICB9IGNhdGNoKHJlYXNvbikge1xuICAgICAgICAvLyBmYWlsdXJlXG4gICAgICB9XG4gICAgICBgYGBcblxuICAgICAgRXJyYmFjayBFeGFtcGxlXG5cbiAgICAgIGBgYGpzXG4gICAgICBmaW5kUmVzdWx0KGZ1bmN0aW9uKHJlc3VsdCwgZXJyKXtcbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgIC8vIGZhaWx1cmVcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBzdWNjZXNzXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgYGBgXG5cbiAgICAgIFByb21pc2UgRXhhbXBsZTtcblxuICAgICAgYGBgamF2YXNjcmlwdFxuICAgICAgZmluZFJlc3VsdCgpLnRoZW4oZnVuY3Rpb24ocmVzdWx0KXtcbiAgICAgICAgLy8gc3VjY2Vzc1xuICAgICAgfSwgZnVuY3Rpb24ocmVhc29uKXtcbiAgICAgICAgLy8gZmFpbHVyZVxuICAgICAgfSk7XG4gICAgICBgYGBcblxuICAgICAgQWR2YW5jZWQgRXhhbXBsZVxuICAgICAgLS0tLS0tLS0tLS0tLS1cblxuICAgICAgU3luY2hyb25vdXMgRXhhbXBsZVxuXG4gICAgICBgYGBqYXZhc2NyaXB0XG4gICAgICB2YXIgYXV0aG9yLCBib29rcztcblxuICAgICAgdHJ5IHtcbiAgICAgICAgYXV0aG9yID0gZmluZEF1dGhvcigpO1xuICAgICAgICBib29rcyAgPSBmaW5kQm9va3NCeUF1dGhvcihhdXRob3IpO1xuICAgICAgICAvLyBzdWNjZXNzXG4gICAgICB9IGNhdGNoKHJlYXNvbikge1xuICAgICAgICAvLyBmYWlsdXJlXG4gICAgICB9XG4gICAgICBgYGBcblxuICAgICAgRXJyYmFjayBFeGFtcGxlXG5cbiAgICAgIGBgYGpzXG5cbiAgICAgIGZ1bmN0aW9uIGZvdW5kQm9va3MoYm9va3MpIHtcblxuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBmYWlsdXJlKHJlYXNvbikge1xuXG4gICAgICB9XG5cbiAgICAgIGZpbmRBdXRob3IoZnVuY3Rpb24oYXV0aG9yLCBlcnIpe1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgZmFpbHVyZShlcnIpO1xuICAgICAgICAgIC8vIGZhaWx1cmVcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgZmluZEJvb29rc0J5QXV0aG9yKGF1dGhvciwgZnVuY3Rpb24oYm9va3MsIGVycikge1xuICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgZmFpbHVyZShlcnIpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICBmb3VuZEJvb2tzKGJvb2tzKTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoKHJlYXNvbikge1xuICAgICAgICAgICAgICAgICAgZmFpbHVyZShyZWFzb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBjYXRjaChlcnJvcikge1xuICAgICAgICAgICAgZmFpbHVyZShlcnIpO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBzdWNjZXNzXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgYGBgXG5cbiAgICAgIFByb21pc2UgRXhhbXBsZTtcblxuICAgICAgYGBgamF2YXNjcmlwdFxuICAgICAgZmluZEF1dGhvcigpLlxuICAgICAgICB0aGVuKGZpbmRCb29rc0J5QXV0aG9yKS5cbiAgICAgICAgdGhlbihmdW5jdGlvbihib29rcyl7XG4gICAgICAgICAgLy8gZm91bmQgYm9va3NcbiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uKHJlYXNvbil7XG4gICAgICAgIC8vIHNvbWV0aGluZyB3ZW50IHdyb25nXG4gICAgICB9KTtcbiAgICAgIGBgYFxuXG4gICAgICBAbWV0aG9kIHRoZW5cbiAgICAgIEBwYXJhbSB7RnVuY3Rpb259IG9uRnVsZmlsbGVkXG4gICAgICBAcGFyYW0ge0Z1bmN0aW9ufSBvblJlamVjdGVkXG4gICAgICBVc2VmdWwgZm9yIHRvb2xpbmcuXG4gICAgICBAcmV0dXJuIHtQcm9taXNlfVxuICAgICovXG4gICAgICB0aGVuOiBmdW5jdGlvbihvbkZ1bGZpbGxtZW50LCBvblJlamVjdGlvbikge1xuICAgICAgICB2YXIgcGFyZW50ID0gdGhpcztcbiAgICAgICAgdmFyIHN0YXRlID0gcGFyZW50Ll9zdGF0ZTtcblxuICAgICAgICBpZiAoc3RhdGUgPT09IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJEZVTEZJTExFRCAmJiAhb25GdWxmaWxsbWVudCB8fCBzdGF0ZSA9PT0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUkVKRUNURUQgJiYgIW9uUmVqZWN0aW9uKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgY2hpbGQgPSBuZXcgdGhpcy5jb25zdHJ1Y3RvcihsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRub29wKTtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHBhcmVudC5fcmVzdWx0O1xuXG4gICAgICAgIGlmIChzdGF0ZSkge1xuICAgICAgICAgIHZhciBjYWxsYmFjayA9IGFyZ3VtZW50c1tzdGF0ZSAtIDFdO1xuICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRhc2FwKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRpbnZva2VDYWxsYmFjayhzdGF0ZSwgY2hpbGQsIGNhbGxiYWNrLCByZXN1bHQpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHN1YnNjcmliZShwYXJlbnQsIGNoaWxkLCBvbkZ1bGZpbGxtZW50LCBvblJlamVjdGlvbik7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gY2hpbGQ7XG4gICAgICB9LFxuXG4gICAgLyoqXG4gICAgICBgY2F0Y2hgIGlzIHNpbXBseSBzdWdhciBmb3IgYHRoZW4odW5kZWZpbmVkLCBvblJlamVjdGlvbilgIHdoaWNoIG1ha2VzIGl0IHRoZSBzYW1lXG4gICAgICBhcyB0aGUgY2F0Y2ggYmxvY2sgb2YgYSB0cnkvY2F0Y2ggc3RhdGVtZW50LlxuXG4gICAgICBgYGBqc1xuICAgICAgZnVuY3Rpb24gZmluZEF1dGhvcigpe1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NvdWxkbid0IGZpbmQgdGhhdCBhdXRob3InKTtcbiAgICAgIH1cblxuICAgICAgLy8gc3luY2hyb25vdXNcbiAgICAgIHRyeSB7XG4gICAgICAgIGZpbmRBdXRob3IoKTtcbiAgICAgIH0gY2F0Y2gocmVhc29uKSB7XG4gICAgICAgIC8vIHNvbWV0aGluZyB3ZW50IHdyb25nXG4gICAgICB9XG5cbiAgICAgIC8vIGFzeW5jIHdpdGggcHJvbWlzZXNcbiAgICAgIGZpbmRBdXRob3IoKS5jYXRjaChmdW5jdGlvbihyZWFzb24pe1xuICAgICAgICAvLyBzb21ldGhpbmcgd2VudCB3cm9uZ1xuICAgICAgfSk7XG4gICAgICBgYGBcblxuICAgICAgQG1ldGhvZCBjYXRjaFxuICAgICAgQHBhcmFtIHtGdW5jdGlvbn0gb25SZWplY3Rpb25cbiAgICAgIFVzZWZ1bCBmb3IgdG9vbGluZy5cbiAgICAgIEByZXR1cm4ge1Byb21pc2V9XG4gICAgKi9cbiAgICAgICdjYXRjaCc6IGZ1bmN0aW9uKG9uUmVqZWN0aW9uKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRoZW4obnVsbCwgb25SZWplY3Rpb24pO1xuICAgICAgfVxuICAgIH07XG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJHBvbHlmaWxsJCRwb2x5ZmlsbCgpIHtcbiAgICAgIHZhciBsb2NhbDtcblxuICAgICAgaWYgKHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgbG9jYWwgPSBnbG9iYWw7XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGxvY2FsID0gc2VsZjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgbG9jYWwgPSBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdwb2x5ZmlsbCBmYWlsZWQgYmVjYXVzZSBnbG9iYWwgb2JqZWN0IGlzIHVuYXZhaWxhYmxlIGluIHRoaXMgZW52aXJvbm1lbnQnKTtcbiAgICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHZhciBQID0gbG9jYWwuUHJvbWlzZTtcblxuICAgICAgaWYgKFAgJiYgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKFAucmVzb2x2ZSgpKSA9PT0gJ1tvYmplY3QgUHJvbWlzZV0nICYmICFQLmNhc3QpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBsb2NhbC5Qcm9taXNlID0gbGliJGVzNiRwcm9taXNlJHByb21pc2UkJGRlZmF1bHQ7XG4gICAgfVxuICAgIHZhciBsaWIkZXM2JHByb21pc2UkcG9seWZpbGwkJGRlZmF1bHQgPSBsaWIkZXM2JHByb21pc2UkcG9seWZpbGwkJHBvbHlmaWxsO1xuXG4gICAgdmFyIGxpYiRlczYkcHJvbWlzZSR1bWQkJEVTNlByb21pc2UgPSB7XG4gICAgICAnUHJvbWlzZSc6IGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRkZWZhdWx0LFxuICAgICAgJ3BvbHlmaWxsJzogbGliJGVzNiRwcm9taXNlJHBvbHlmaWxsJCRkZWZhdWx0XG4gICAgfTtcblxuICAgIC8qIGdsb2JhbCBkZWZpbmU6dHJ1ZSBtb2R1bGU6dHJ1ZSB3aW5kb3c6IHRydWUgKi9cbiAgICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmVbJ2FtZCddKSB7XG4gICAgICBkZWZpbmUoZnVuY3Rpb24oKSB7IHJldHVybiBsaWIkZXM2JHByb21pc2UkdW1kJCRFUzZQcm9taXNlOyB9KTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnICYmIG1vZHVsZVsnZXhwb3J0cyddKSB7XG4gICAgICBtb2R1bGVbJ2V4cG9ydHMnXSA9IGxpYiRlczYkcHJvbWlzZSR1bWQkJEVTNlByb21pc2U7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgdGhpcyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXNbJ0VTNlByb21pc2UnXSA9IGxpYiRlczYkcHJvbWlzZSR1bWQkJEVTNlByb21pc2U7XG4gICAgfVxuXG4gICAgbGliJGVzNiRwcm9taXNlJHBvbHlmaWxsJCRkZWZhdWx0KCk7XG59KS5jYWxsKHRoaXMpO1xuXG4iLCIvKiAtKi0gbW9kZTogamF2YXNjcmlwdDsgYy1iYXNpYy1vZmZzZXQ6IDQ7IGluZGVudC10YWJzLW1vZGU6IG5pbCAtKi0gKi9cblxuLy8gXG4vLyBKYXZhc2NyaXB0IFpMaWJcbi8vIEJ5IFRob21hcyBEb3duIDIwMTAtMjAxMVxuLy9cbi8vIEJhc2VkIHZlcnkgaGVhdmlseSBvbiBwb3J0aW9ucyBvZiBqemxpYiAoYnkgeW1ua0BqY3JhZnQuY29tKSwgd2hvIGluXG4vLyB0dXJuIGNyZWRpdHMgSmVhbi1sb3VwIEdhaWxseSBhbmQgTWFyayBBZGxlciBmb3IgdGhlIG9yaWdpbmFsIHpsaWIgY29kZS5cbi8vXG4vLyBpbmZsYXRlLmpzOiBaTGliIGluZmxhdGUgY29kZVxuLy9cblxuLy9cbi8vIFNoYXJlZCBjb25zdGFudHNcbi8vXG5cbnZhciBNQVhfV0JJVFM9MTU7IC8vIDMySyBMWjc3IHdpbmRvd1xudmFyIERFRl9XQklUUz1NQVhfV0JJVFM7XG52YXIgTUFYX01FTV9MRVZFTD05O1xudmFyIE1BTlk9MTQ0MDtcbnZhciBCTUFYID0gMTU7XG5cbi8vIHByZXNldCBkaWN0aW9uYXJ5IGZsYWcgaW4gemxpYiBoZWFkZXJcbnZhciBQUkVTRVRfRElDVD0weDIwO1xuXG52YXIgWl9OT19GTFVTSD0wO1xudmFyIFpfUEFSVElBTF9GTFVTSD0xO1xudmFyIFpfU1lOQ19GTFVTSD0yO1xudmFyIFpfRlVMTF9GTFVTSD0zO1xudmFyIFpfRklOSVNIPTQ7XG5cbnZhciBaX0RFRkxBVEVEPTg7XG5cbnZhciBaX09LPTA7XG52YXIgWl9TVFJFQU1fRU5EPTE7XG52YXIgWl9ORUVEX0RJQ1Q9MjtcbnZhciBaX0VSUk5PPS0xO1xudmFyIFpfU1RSRUFNX0VSUk9SPS0yO1xudmFyIFpfREFUQV9FUlJPUj0tMztcbnZhciBaX01FTV9FUlJPUj0tNDtcbnZhciBaX0JVRl9FUlJPUj0tNTtcbnZhciBaX1ZFUlNJT05fRVJST1I9LTY7XG5cbnZhciBNRVRIT0Q9MDsgICAvLyB3YWl0aW5nIGZvciBtZXRob2QgYnl0ZVxudmFyIEZMQUc9MTsgICAgIC8vIHdhaXRpbmcgZm9yIGZsYWcgYnl0ZVxudmFyIERJQ1Q0PTI7ICAgIC8vIGZvdXIgZGljdGlvbmFyeSBjaGVjayBieXRlcyB0byBnb1xudmFyIERJQ1QzPTM7ICAgIC8vIHRocmVlIGRpY3Rpb25hcnkgY2hlY2sgYnl0ZXMgdG8gZ29cbnZhciBESUNUMj00OyAgICAvLyB0d28gZGljdGlvbmFyeSBjaGVjayBieXRlcyB0byBnb1xudmFyIERJQ1QxPTU7ICAgIC8vIG9uZSBkaWN0aW9uYXJ5IGNoZWNrIGJ5dGUgdG8gZ29cbnZhciBESUNUMD02OyAgICAvLyB3YWl0aW5nIGZvciBpbmZsYXRlU2V0RGljdGlvbmFyeVxudmFyIEJMT0NLUz03OyAgIC8vIGRlY29tcHJlc3NpbmcgYmxvY2tzXG52YXIgQ0hFQ0s0PTg7ICAgLy8gZm91ciBjaGVjayBieXRlcyB0byBnb1xudmFyIENIRUNLMz05OyAgIC8vIHRocmVlIGNoZWNrIGJ5dGVzIHRvIGdvXG52YXIgQ0hFQ0syPTEwOyAgLy8gdHdvIGNoZWNrIGJ5dGVzIHRvIGdvXG52YXIgQ0hFQ0sxPTExOyAgLy8gb25lIGNoZWNrIGJ5dGUgdG8gZ29cbnZhciBET05FPTEyOyAgICAvLyBmaW5pc2hlZCBjaGVjaywgZG9uZVxudmFyIEJBRD0xMzsgICAgIC8vIGdvdCBhbiBlcnJvci0tc3RheSBoZXJlXG5cbnZhciBpbmZsYXRlX21hc2sgPSBbMHgwMDAwMDAwMCwgMHgwMDAwMDAwMSwgMHgwMDAwMDAwMywgMHgwMDAwMDAwNywgMHgwMDAwMDAwZiwgMHgwMDAwMDAxZiwgMHgwMDAwMDAzZiwgMHgwMDAwMDA3ZiwgMHgwMDAwMDBmZiwgMHgwMDAwMDFmZiwgMHgwMDAwMDNmZiwgMHgwMDAwMDdmZiwgMHgwMDAwMGZmZiwgMHgwMDAwMWZmZiwgMHgwMDAwM2ZmZiwgMHgwMDAwN2ZmZiwgMHgwMDAwZmZmZl07XG5cbnZhciBJQl9UWVBFPTA7ICAvLyBnZXQgdHlwZSBiaXRzICgzLCBpbmNsdWRpbmcgZW5kIGJpdClcbnZhciBJQl9MRU5TPTE7ICAvLyBnZXQgbGVuZ3RocyBmb3Igc3RvcmVkXG52YXIgSUJfU1RPUkVEPTI7Ly8gcHJvY2Vzc2luZyBzdG9yZWQgYmxvY2tcbnZhciBJQl9UQUJMRT0zOyAvLyBnZXQgdGFibGUgbGVuZ3Roc1xudmFyIElCX0JUUkVFPTQ7IC8vIGdldCBiaXQgbGVuZ3RocyB0cmVlIGZvciBhIGR5bmFtaWMgYmxvY2tcbnZhciBJQl9EVFJFRT01OyAvLyBnZXQgbGVuZ3RoLCBkaXN0YW5jZSB0cmVlcyBmb3IgYSBkeW5hbWljIGJsb2NrXG52YXIgSUJfQ09ERVM9NjsgLy8gcHJvY2Vzc2luZyBmaXhlZCBvciBkeW5hbWljIGJsb2NrXG52YXIgSUJfRFJZPTc7ICAgLy8gb3V0cHV0IHJlbWFpbmluZyB3aW5kb3cgYnl0ZXNcbnZhciBJQl9ET05FPTg7ICAvLyBmaW5pc2hlZCBsYXN0IGJsb2NrLCBkb25lXG52YXIgSUJfQkFEPTk7ICAgLy8gb3QgYSBkYXRhIGVycm9yLS1zdHVjayBoZXJlXG5cbnZhciBmaXhlZF9ibCA9IDk7XG52YXIgZml4ZWRfYmQgPSA1O1xuXG52YXIgZml4ZWRfdGwgPSBbXG4gICAgOTYsNywyNTYsIDAsOCw4MCwgMCw4LDE2LCA4NCw4LDExNSxcbiAgICA4Miw3LDMxLCAwLDgsMTEyLCAwLDgsNDgsIDAsOSwxOTIsXG4gICAgODAsNywxMCwgMCw4LDk2LCAwLDgsMzIsIDAsOSwxNjAsXG4gICAgMCw4LDAsIDAsOCwxMjgsIDAsOCw2NCwgMCw5LDIyNCxcbiAgICA4MCw3LDYsIDAsOCw4OCwgMCw4LDI0LCAwLDksMTQ0LFxuICAgIDgzLDcsNTksIDAsOCwxMjAsIDAsOCw1NiwgMCw5LDIwOCxcbiAgICA4MSw3LDE3LCAwLDgsMTA0LCAwLDgsNDAsIDAsOSwxNzYsXG4gICAgMCw4LDgsIDAsOCwxMzYsIDAsOCw3MiwgMCw5LDI0MCxcbiAgICA4MCw3LDQsIDAsOCw4NCwgMCw4LDIwLCA4NSw4LDIyNyxcbiAgICA4Myw3LDQzLCAwLDgsMTE2LCAwLDgsNTIsIDAsOSwyMDAsXG4gICAgODEsNywxMywgMCw4LDEwMCwgMCw4LDM2LCAwLDksMTY4LFxuICAgIDAsOCw0LCAwLDgsMTMyLCAwLDgsNjgsIDAsOSwyMzIsXG4gICAgODAsNyw4LCAwLDgsOTIsIDAsOCwyOCwgMCw5LDE1MixcbiAgICA4NCw3LDgzLCAwLDgsMTI0LCAwLDgsNjAsIDAsOSwyMTYsXG4gICAgODIsNywyMywgMCw4LDEwOCwgMCw4LDQ0LCAwLDksMTg0LFxuICAgIDAsOCwxMiwgMCw4LDE0MCwgMCw4LDc2LCAwLDksMjQ4LFxuICAgIDgwLDcsMywgMCw4LDgyLCAwLDgsMTgsIDg1LDgsMTYzLFxuICAgIDgzLDcsMzUsIDAsOCwxMTQsIDAsOCw1MCwgMCw5LDE5NixcbiAgICA4MSw3LDExLCAwLDgsOTgsIDAsOCwzNCwgMCw5LDE2NCxcbiAgICAwLDgsMiwgMCw4LDEzMCwgMCw4LDY2LCAwLDksMjI4LFxuICAgIDgwLDcsNywgMCw4LDkwLCAwLDgsMjYsIDAsOSwxNDgsXG4gICAgODQsNyw2NywgMCw4LDEyMiwgMCw4LDU4LCAwLDksMjEyLFxuICAgIDgyLDcsMTksIDAsOCwxMDYsIDAsOCw0MiwgMCw5LDE4MCxcbiAgICAwLDgsMTAsIDAsOCwxMzgsIDAsOCw3NCwgMCw5LDI0NCxcbiAgICA4MCw3LDUsIDAsOCw4NiwgMCw4LDIyLCAxOTIsOCwwLFxuICAgIDgzLDcsNTEsIDAsOCwxMTgsIDAsOCw1NCwgMCw5LDIwNCxcbiAgICA4MSw3LDE1LCAwLDgsMTAyLCAwLDgsMzgsIDAsOSwxNzIsXG4gICAgMCw4LDYsIDAsOCwxMzQsIDAsOCw3MCwgMCw5LDIzNixcbiAgICA4MCw3LDksIDAsOCw5NCwgMCw4LDMwLCAwLDksMTU2LFxuICAgIDg0LDcsOTksIDAsOCwxMjYsIDAsOCw2MiwgMCw5LDIyMCxcbiAgICA4Miw3LDI3LCAwLDgsMTEwLCAwLDgsNDYsIDAsOSwxODgsXG4gICAgMCw4LDE0LCAwLDgsMTQyLCAwLDgsNzgsIDAsOSwyNTIsXG4gICAgOTYsNywyNTYsIDAsOCw4MSwgMCw4LDE3LCA4NSw4LDEzMSxcbiAgICA4Miw3LDMxLCAwLDgsMTEzLCAwLDgsNDksIDAsOSwxOTQsXG4gICAgODAsNywxMCwgMCw4LDk3LCAwLDgsMzMsIDAsOSwxNjIsXG4gICAgMCw4LDEsIDAsOCwxMjksIDAsOCw2NSwgMCw5LDIyNixcbiAgICA4MCw3LDYsIDAsOCw4OSwgMCw4LDI1LCAwLDksMTQ2LFxuICAgIDgzLDcsNTksIDAsOCwxMjEsIDAsOCw1NywgMCw5LDIxMCxcbiAgICA4MSw3LDE3LCAwLDgsMTA1LCAwLDgsNDEsIDAsOSwxNzgsXG4gICAgMCw4LDksIDAsOCwxMzcsIDAsOCw3MywgMCw5LDI0MixcbiAgICA4MCw3LDQsIDAsOCw4NSwgMCw4LDIxLCA4MCw4LDI1OCxcbiAgICA4Myw3LDQzLCAwLDgsMTE3LCAwLDgsNTMsIDAsOSwyMDIsXG4gICAgODEsNywxMywgMCw4LDEwMSwgMCw4LDM3LCAwLDksMTcwLFxuICAgIDAsOCw1LCAwLDgsMTMzLCAwLDgsNjksIDAsOSwyMzQsXG4gICAgODAsNyw4LCAwLDgsOTMsIDAsOCwyOSwgMCw5LDE1NCxcbiAgICA4NCw3LDgzLCAwLDgsMTI1LCAwLDgsNjEsIDAsOSwyMTgsXG4gICAgODIsNywyMywgMCw4LDEwOSwgMCw4LDQ1LCAwLDksMTg2LFxuICAgIDAsOCwxMywgMCw4LDE0MSwgMCw4LDc3LCAwLDksMjUwLFxuICAgIDgwLDcsMywgMCw4LDgzLCAwLDgsMTksIDg1LDgsMTk1LFxuICAgIDgzLDcsMzUsIDAsOCwxMTUsIDAsOCw1MSwgMCw5LDE5OCxcbiAgICA4MSw3LDExLCAwLDgsOTksIDAsOCwzNSwgMCw5LDE2NixcbiAgICAwLDgsMywgMCw4LDEzMSwgMCw4LDY3LCAwLDksMjMwLFxuICAgIDgwLDcsNywgMCw4LDkxLCAwLDgsMjcsIDAsOSwxNTAsXG4gICAgODQsNyw2NywgMCw4LDEyMywgMCw4LDU5LCAwLDksMjE0LFxuICAgIDgyLDcsMTksIDAsOCwxMDcsIDAsOCw0MywgMCw5LDE4MixcbiAgICAwLDgsMTEsIDAsOCwxMzksIDAsOCw3NSwgMCw5LDI0NixcbiAgICA4MCw3LDUsIDAsOCw4NywgMCw4LDIzLCAxOTIsOCwwLFxuICAgIDgzLDcsNTEsIDAsOCwxMTksIDAsOCw1NSwgMCw5LDIwNixcbiAgICA4MSw3LDE1LCAwLDgsMTAzLCAwLDgsMzksIDAsOSwxNzQsXG4gICAgMCw4LDcsIDAsOCwxMzUsIDAsOCw3MSwgMCw5LDIzOCxcbiAgICA4MCw3LDksIDAsOCw5NSwgMCw4LDMxLCAwLDksMTU4LFxuICAgIDg0LDcsOTksIDAsOCwxMjcsIDAsOCw2MywgMCw5LDIyMixcbiAgICA4Miw3LDI3LCAwLDgsMTExLCAwLDgsNDcsIDAsOSwxOTAsXG4gICAgMCw4LDE1LCAwLDgsMTQzLCAwLDgsNzksIDAsOSwyNTQsXG4gICAgOTYsNywyNTYsIDAsOCw4MCwgMCw4LDE2LCA4NCw4LDExNSxcbiAgICA4Miw3LDMxLCAwLDgsMTEyLCAwLDgsNDgsIDAsOSwxOTMsXG5cbiAgICA4MCw3LDEwLCAwLDgsOTYsIDAsOCwzMiwgMCw5LDE2MSxcbiAgICAwLDgsMCwgMCw4LDEyOCwgMCw4LDY0LCAwLDksMjI1LFxuICAgIDgwLDcsNiwgMCw4LDg4LCAwLDgsMjQsIDAsOSwxNDUsXG4gICAgODMsNyw1OSwgMCw4LDEyMCwgMCw4LDU2LCAwLDksMjA5LFxuICAgIDgxLDcsMTcsIDAsOCwxMDQsIDAsOCw0MCwgMCw5LDE3NyxcbiAgICAwLDgsOCwgMCw4LDEzNiwgMCw4LDcyLCAwLDksMjQxLFxuICAgIDgwLDcsNCwgMCw4LDg0LCAwLDgsMjAsIDg1LDgsMjI3LFxuICAgIDgzLDcsNDMsIDAsOCwxMTYsIDAsOCw1MiwgMCw5LDIwMSxcbiAgICA4MSw3LDEzLCAwLDgsMTAwLCAwLDgsMzYsIDAsOSwxNjksXG4gICAgMCw4LDQsIDAsOCwxMzIsIDAsOCw2OCwgMCw5LDIzMyxcbiAgICA4MCw3LDgsIDAsOCw5MiwgMCw4LDI4LCAwLDksMTUzLFxuICAgIDg0LDcsODMsIDAsOCwxMjQsIDAsOCw2MCwgMCw5LDIxNyxcbiAgICA4Miw3LDIzLCAwLDgsMTA4LCAwLDgsNDQsIDAsOSwxODUsXG4gICAgMCw4LDEyLCAwLDgsMTQwLCAwLDgsNzYsIDAsOSwyNDksXG4gICAgODAsNywzLCAwLDgsODIsIDAsOCwxOCwgODUsOCwxNjMsXG4gICAgODMsNywzNSwgMCw4LDExNCwgMCw4LDUwLCAwLDksMTk3LFxuICAgIDgxLDcsMTEsIDAsOCw5OCwgMCw4LDM0LCAwLDksMTY1LFxuICAgIDAsOCwyLCAwLDgsMTMwLCAwLDgsNjYsIDAsOSwyMjksXG4gICAgODAsNyw3LCAwLDgsOTAsIDAsOCwyNiwgMCw5LDE0OSxcbiAgICA4NCw3LDY3LCAwLDgsMTIyLCAwLDgsNTgsIDAsOSwyMTMsXG4gICAgODIsNywxOSwgMCw4LDEwNiwgMCw4LDQyLCAwLDksMTgxLFxuICAgIDAsOCwxMCwgMCw4LDEzOCwgMCw4LDc0LCAwLDksMjQ1LFxuICAgIDgwLDcsNSwgMCw4LDg2LCAwLDgsMjIsIDE5Miw4LDAsXG4gICAgODMsNyw1MSwgMCw4LDExOCwgMCw4LDU0LCAwLDksMjA1LFxuICAgIDgxLDcsMTUsIDAsOCwxMDIsIDAsOCwzOCwgMCw5LDE3MyxcbiAgICAwLDgsNiwgMCw4LDEzNCwgMCw4LDcwLCAwLDksMjM3LFxuICAgIDgwLDcsOSwgMCw4LDk0LCAwLDgsMzAsIDAsOSwxNTcsXG4gICAgODQsNyw5OSwgMCw4LDEyNiwgMCw4LDYyLCAwLDksMjIxLFxuICAgIDgyLDcsMjcsIDAsOCwxMTAsIDAsOCw0NiwgMCw5LDE4OSxcbiAgICAwLDgsMTQsIDAsOCwxNDIsIDAsOCw3OCwgMCw5LDI1MyxcbiAgICA5Niw3LDI1NiwgMCw4LDgxLCAwLDgsMTcsIDg1LDgsMTMxLFxuICAgIDgyLDcsMzEsIDAsOCwxMTMsIDAsOCw0OSwgMCw5LDE5NSxcbiAgICA4MCw3LDEwLCAwLDgsOTcsIDAsOCwzMywgMCw5LDE2MyxcbiAgICAwLDgsMSwgMCw4LDEyOSwgMCw4LDY1LCAwLDksMjI3LFxuICAgIDgwLDcsNiwgMCw4LDg5LCAwLDgsMjUsIDAsOSwxNDcsXG4gICAgODMsNyw1OSwgMCw4LDEyMSwgMCw4LDU3LCAwLDksMjExLFxuICAgIDgxLDcsMTcsIDAsOCwxMDUsIDAsOCw0MSwgMCw5LDE3OSxcbiAgICAwLDgsOSwgMCw4LDEzNywgMCw4LDczLCAwLDksMjQzLFxuICAgIDgwLDcsNCwgMCw4LDg1LCAwLDgsMjEsIDgwLDgsMjU4LFxuICAgIDgzLDcsNDMsIDAsOCwxMTcsIDAsOCw1MywgMCw5LDIwMyxcbiAgICA4MSw3LDEzLCAwLDgsMTAxLCAwLDgsMzcsIDAsOSwxNzEsXG4gICAgMCw4LDUsIDAsOCwxMzMsIDAsOCw2OSwgMCw5LDIzNSxcbiAgICA4MCw3LDgsIDAsOCw5MywgMCw4LDI5LCAwLDksMTU1LFxuICAgIDg0LDcsODMsIDAsOCwxMjUsIDAsOCw2MSwgMCw5LDIxOSxcbiAgICA4Miw3LDIzLCAwLDgsMTA5LCAwLDgsNDUsIDAsOSwxODcsXG4gICAgMCw4LDEzLCAwLDgsMTQxLCAwLDgsNzcsIDAsOSwyNTEsXG4gICAgODAsNywzLCAwLDgsODMsIDAsOCwxOSwgODUsOCwxOTUsXG4gICAgODMsNywzNSwgMCw4LDExNSwgMCw4LDUxLCAwLDksMTk5LFxuICAgIDgxLDcsMTEsIDAsOCw5OSwgMCw4LDM1LCAwLDksMTY3LFxuICAgIDAsOCwzLCAwLDgsMTMxLCAwLDgsNjcsIDAsOSwyMzEsXG4gICAgODAsNyw3LCAwLDgsOTEsIDAsOCwyNywgMCw5LDE1MSxcbiAgICA4NCw3LDY3LCAwLDgsMTIzLCAwLDgsNTksIDAsOSwyMTUsXG4gICAgODIsNywxOSwgMCw4LDEwNywgMCw4LDQzLCAwLDksMTgzLFxuICAgIDAsOCwxMSwgMCw4LDEzOSwgMCw4LDc1LCAwLDksMjQ3LFxuICAgIDgwLDcsNSwgMCw4LDg3LCAwLDgsMjMsIDE5Miw4LDAsXG4gICAgODMsNyw1MSwgMCw4LDExOSwgMCw4LDU1LCAwLDksMjA3LFxuICAgIDgxLDcsMTUsIDAsOCwxMDMsIDAsOCwzOSwgMCw5LDE3NSxcbiAgICAwLDgsNywgMCw4LDEzNSwgMCw4LDcxLCAwLDksMjM5LFxuICAgIDgwLDcsOSwgMCw4LDk1LCAwLDgsMzEsIDAsOSwxNTksXG4gICAgODQsNyw5OSwgMCw4LDEyNywgMCw4LDYzLCAwLDksMjIzLFxuICAgIDgyLDcsMjcsIDAsOCwxMTEsIDAsOCw0NywgMCw5LDE5MSxcbiAgICAwLDgsMTUsIDAsOCwxNDMsIDAsOCw3OSwgMCw5LDI1NVxuXTtcbnZhciBmaXhlZF90ZCA9IFtcbiAgICA4MCw1LDEsIDg3LDUsMjU3LCA4Myw1LDE3LCA5MSw1LDQwOTcsXG4gICAgODEsNSw1LCA4OSw1LDEwMjUsIDg1LDUsNjUsIDkzLDUsMTYzODUsXG4gICAgODAsNSwzLCA4OCw1LDUxMywgODQsNSwzMywgOTIsNSw4MTkzLFxuICAgIDgyLDUsOSwgOTAsNSwyMDQ5LCA4Niw1LDEyOSwgMTkyLDUsMjQ1NzcsXG4gICAgODAsNSwyLCA4Nyw1LDM4NSwgODMsNSwyNSwgOTEsNSw2MTQ1LFxuICAgIDgxLDUsNywgODksNSwxNTM3LCA4NSw1LDk3LCA5Myw1LDI0NTc3LFxuICAgIDgwLDUsNCwgODgsNSw3NjksIDg0LDUsNDksIDkyLDUsMTIyODksXG4gICAgODIsNSwxMywgOTAsNSwzMDczLCA4Niw1LDE5MywgMTkyLDUsMjQ1Nzdcbl07XG5cbiAgLy8gVGFibGVzIGZvciBkZWZsYXRlIGZyb20gUEtaSVAncyBhcHBub3RlLnR4dC5cbiAgdmFyIGNwbGVucyA9IFsgLy8gQ29weSBsZW5ndGhzIGZvciBsaXRlcmFsIGNvZGVzIDI1Ny4uMjg1XG4gICAgICAgIDMsIDQsIDUsIDYsIDcsIDgsIDksIDEwLCAxMSwgMTMsIDE1LCAxNywgMTksIDIzLCAyNywgMzEsXG4gICAgICAgIDM1LCA0MywgNTEsIDU5LCA2NywgODMsIDk5LCAxMTUsIDEzMSwgMTYzLCAxOTUsIDIyNywgMjU4LCAwLCAwXG4gIF07XG5cbiAgLy8gc2VlIG5vdGUgIzEzIGFib3ZlIGFib3V0IDI1OFxuICB2YXIgY3BsZXh0ID0gWyAvLyBFeHRyYSBiaXRzIGZvciBsaXRlcmFsIGNvZGVzIDI1Ny4uMjg1XG4gICAgICAgIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDAsIDEsIDEsIDEsIDEsIDIsIDIsIDIsIDIsXG4gICAgICAgIDMsIDMsIDMsIDMsIDQsIDQsIDQsIDQsIDUsIDUsIDUsIDUsIDAsIDExMiwgMTEyICAvLyAxMTI9PWludmFsaWRcbiAgXTtcblxuIHZhciBjcGRpc3QgPSBbIC8vIENvcHkgb2Zmc2V0cyBmb3IgZGlzdGFuY2UgY29kZXMgMC4uMjlcbiAgICAgICAgMSwgMiwgMywgNCwgNSwgNywgOSwgMTMsIDE3LCAyNSwgMzMsIDQ5LCA2NSwgOTcsIDEyOSwgMTkzLFxuICAgICAgICAyNTcsIDM4NSwgNTEzLCA3NjksIDEwMjUsIDE1MzcsIDIwNDksIDMwNzMsIDQwOTcsIDYxNDUsXG4gICAgICAgIDgxOTMsIDEyMjg5LCAxNjM4NSwgMjQ1NzdcbiAgXTtcblxuICB2YXIgY3BkZXh0ID0gWyAvLyBFeHRyYSBiaXRzIGZvciBkaXN0YW5jZSBjb2Rlc1xuICAgICAgICAwLCAwLCAwLCAwLCAxLCAxLCAyLCAyLCAzLCAzLCA0LCA0LCA1LCA1LCA2LCA2LFxuICAgICAgICA3LCA3LCA4LCA4LCA5LCA5LCAxMCwgMTAsIDExLCAxMSxcbiAgICAgICAgMTIsIDEyLCAxMywgMTNdO1xuXG4vL1xuLy8gWlN0cmVhbS5qYXZhXG4vL1xuXG5mdW5jdGlvbiBaU3RyZWFtKCkge1xufVxuXG5cblpTdHJlYW0ucHJvdG90eXBlLmluZmxhdGVJbml0ID0gZnVuY3Rpb24odywgbm93cmFwKSB7XG4gICAgaWYgKCF3KSB7XG5cdHcgPSBERUZfV0JJVFM7XG4gICAgfVxuICAgIGlmIChub3dyYXApIHtcblx0bm93cmFwID0gZmFsc2U7XG4gICAgfVxuICAgIHRoaXMuaXN0YXRlID0gbmV3IEluZmxhdGUoKTtcbiAgICByZXR1cm4gdGhpcy5pc3RhdGUuaW5mbGF0ZUluaXQodGhpcywgbm93cmFwPy13OncpO1xufVxuXG5aU3RyZWFtLnByb3RvdHlwZS5pbmZsYXRlID0gZnVuY3Rpb24oZikge1xuICAgIGlmKHRoaXMuaXN0YXRlPT1udWxsKSByZXR1cm4gWl9TVFJFQU1fRVJST1I7XG4gICAgcmV0dXJuIHRoaXMuaXN0YXRlLmluZmxhdGUodGhpcywgZik7XG59XG5cblpTdHJlYW0ucHJvdG90eXBlLmluZmxhdGVFbmQgPSBmdW5jdGlvbigpe1xuICAgIGlmKHRoaXMuaXN0YXRlPT1udWxsKSByZXR1cm4gWl9TVFJFQU1fRVJST1I7XG4gICAgdmFyIHJldD1pc3RhdGUuaW5mbGF0ZUVuZCh0aGlzKTtcbiAgICB0aGlzLmlzdGF0ZSA9IG51bGw7XG4gICAgcmV0dXJuIHJldDtcbn1cblpTdHJlYW0ucHJvdG90eXBlLmluZmxhdGVTeW5jID0gZnVuY3Rpb24oKXtcbiAgICAvLyBpZihpc3RhdGUgPT0gbnVsbCkgcmV0dXJuIFpfU1RSRUFNX0VSUk9SO1xuICAgIHJldHVybiBpc3RhdGUuaW5mbGF0ZVN5bmModGhpcyk7XG59XG5aU3RyZWFtLnByb3RvdHlwZS5pbmZsYXRlU2V0RGljdGlvbmFyeSA9IGZ1bmN0aW9uKGRpY3Rpb25hcnksIGRpY3RMZW5ndGgpe1xuICAgIC8vIGlmKGlzdGF0ZSA9PSBudWxsKSByZXR1cm4gWl9TVFJFQU1fRVJST1I7XG4gICAgcmV0dXJuIGlzdGF0ZS5pbmZsYXRlU2V0RGljdGlvbmFyeSh0aGlzLCBkaWN0aW9uYXJ5LCBkaWN0TGVuZ3RoKTtcbn1cblxuLypcblxuICBwdWJsaWMgaW50IGRlZmxhdGVJbml0KGludCBsZXZlbCl7XG4gICAgcmV0dXJuIGRlZmxhdGVJbml0KGxldmVsLCBNQVhfV0JJVFMpO1xuICB9XG4gIHB1YmxpYyBpbnQgZGVmbGF0ZUluaXQoaW50IGxldmVsLCBib29sZWFuIG5vd3JhcCl7XG4gICAgcmV0dXJuIGRlZmxhdGVJbml0KGxldmVsLCBNQVhfV0JJVFMsIG5vd3JhcCk7XG4gIH1cbiAgcHVibGljIGludCBkZWZsYXRlSW5pdChpbnQgbGV2ZWwsIGludCBiaXRzKXtcbiAgICByZXR1cm4gZGVmbGF0ZUluaXQobGV2ZWwsIGJpdHMsIGZhbHNlKTtcbiAgfVxuICBwdWJsaWMgaW50IGRlZmxhdGVJbml0KGludCBsZXZlbCwgaW50IGJpdHMsIGJvb2xlYW4gbm93cmFwKXtcbiAgICBkc3RhdGU9bmV3IERlZmxhdGUoKTtcbiAgICByZXR1cm4gZHN0YXRlLmRlZmxhdGVJbml0KHRoaXMsIGxldmVsLCBub3dyYXA/LWJpdHM6Yml0cyk7XG4gIH1cbiAgcHVibGljIGludCBkZWZsYXRlKGludCBmbHVzaCl7XG4gICAgaWYoZHN0YXRlPT1udWxsKXtcbiAgICAgIHJldHVybiBaX1NUUkVBTV9FUlJPUjtcbiAgICB9XG4gICAgcmV0dXJuIGRzdGF0ZS5kZWZsYXRlKHRoaXMsIGZsdXNoKTtcbiAgfVxuICBwdWJsaWMgaW50IGRlZmxhdGVFbmQoKXtcbiAgICBpZihkc3RhdGU9PW51bGwpIHJldHVybiBaX1NUUkVBTV9FUlJPUjtcbiAgICBpbnQgcmV0PWRzdGF0ZS5kZWZsYXRlRW5kKCk7XG4gICAgZHN0YXRlPW51bGw7XG4gICAgcmV0dXJuIHJldDtcbiAgfVxuICBwdWJsaWMgaW50IGRlZmxhdGVQYXJhbXMoaW50IGxldmVsLCBpbnQgc3RyYXRlZ3kpe1xuICAgIGlmKGRzdGF0ZT09bnVsbCkgcmV0dXJuIFpfU1RSRUFNX0VSUk9SO1xuICAgIHJldHVybiBkc3RhdGUuZGVmbGF0ZVBhcmFtcyh0aGlzLCBsZXZlbCwgc3RyYXRlZ3kpO1xuICB9XG4gIHB1YmxpYyBpbnQgZGVmbGF0ZVNldERpY3Rpb25hcnkgKGJ5dGVbXSBkaWN0aW9uYXJ5LCBpbnQgZGljdExlbmd0aCl7XG4gICAgaWYoZHN0YXRlID09IG51bGwpXG4gICAgICByZXR1cm4gWl9TVFJFQU1fRVJST1I7XG4gICAgcmV0dXJuIGRzdGF0ZS5kZWZsYXRlU2V0RGljdGlvbmFyeSh0aGlzLCBkaWN0aW9uYXJ5LCBkaWN0TGVuZ3RoKTtcbiAgfVxuXG4qL1xuXG4vKlxuICAvLyBGbHVzaCBhcyBtdWNoIHBlbmRpbmcgb3V0cHV0IGFzIHBvc3NpYmxlLiBBbGwgZGVmbGF0ZSgpIG91dHB1dCBnb2VzXG4gIC8vIHRocm91Z2ggdGhpcyBmdW5jdGlvbiBzbyBzb21lIGFwcGxpY2F0aW9ucyBtYXkgd2lzaCB0byBtb2RpZnkgaXRcbiAgLy8gdG8gYXZvaWQgYWxsb2NhdGluZyBhIGxhcmdlIHN0cm0tPm5leHRfb3V0IGJ1ZmZlciBhbmQgY29weWluZyBpbnRvIGl0LlxuICAvLyAoU2VlIGFsc28gcmVhZF9idWYoKSkuXG4gIHZvaWQgZmx1c2hfcGVuZGluZygpe1xuICAgIGludCBsZW49ZHN0YXRlLnBlbmRpbmc7XG5cbiAgICBpZihsZW4+YXZhaWxfb3V0KSBsZW49YXZhaWxfb3V0O1xuICAgIGlmKGxlbj09MCkgcmV0dXJuO1xuXG4gICAgaWYoZHN0YXRlLnBlbmRpbmdfYnVmLmxlbmd0aDw9ZHN0YXRlLnBlbmRpbmdfb3V0IHx8XG4gICAgICAgbmV4dF9vdXQubGVuZ3RoPD1uZXh0X291dF9pbmRleCB8fFxuICAgICAgIGRzdGF0ZS5wZW5kaW5nX2J1Zi5sZW5ndGg8KGRzdGF0ZS5wZW5kaW5nX291dCtsZW4pIHx8XG4gICAgICAgbmV4dF9vdXQubGVuZ3RoPChuZXh0X291dF9pbmRleCtsZW4pKXtcbiAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihkc3RhdGUucGVuZGluZ19idWYubGVuZ3RoK1wiLCBcIitkc3RhdGUucGVuZGluZ19vdXQrXG5cdFx0XHQgXCIsIFwiK25leHRfb3V0Lmxlbmd0aCtcIiwgXCIrbmV4dF9vdXRfaW5kZXgrXCIsIFwiK2xlbik7XG4gICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXCJhdmFpbF9vdXQ9XCIrYXZhaWxfb3V0KTtcbiAgICB9XG5cbiAgICBTeXN0ZW0uYXJyYXljb3B5KGRzdGF0ZS5wZW5kaW5nX2J1ZiwgZHN0YXRlLnBlbmRpbmdfb3V0LFxuXHRcdCAgICAgbmV4dF9vdXQsIG5leHRfb3V0X2luZGV4LCBsZW4pO1xuXG4gICAgbmV4dF9vdXRfaW5kZXgrPWxlbjtcbiAgICBkc3RhdGUucGVuZGluZ19vdXQrPWxlbjtcbiAgICB0b3RhbF9vdXQrPWxlbjtcbiAgICBhdmFpbF9vdXQtPWxlbjtcbiAgICBkc3RhdGUucGVuZGluZy09bGVuO1xuICAgIGlmKGRzdGF0ZS5wZW5kaW5nPT0wKXtcbiAgICAgIGRzdGF0ZS5wZW5kaW5nX291dD0wO1xuICAgIH1cbiAgfVxuXG4gIC8vIFJlYWQgYSBuZXcgYnVmZmVyIGZyb20gdGhlIGN1cnJlbnQgaW5wdXQgc3RyZWFtLCB1cGRhdGUgdGhlIGFkbGVyMzJcbiAgLy8gYW5kIHRvdGFsIG51bWJlciBvZiBieXRlcyByZWFkLiAgQWxsIGRlZmxhdGUoKSBpbnB1dCBnb2VzIHRocm91Z2hcbiAgLy8gdGhpcyBmdW5jdGlvbiBzbyBzb21lIGFwcGxpY2F0aW9ucyBtYXkgd2lzaCB0byBtb2RpZnkgaXQgdG8gYXZvaWRcbiAgLy8gYWxsb2NhdGluZyBhIGxhcmdlIHN0cm0tPm5leHRfaW4gYnVmZmVyIGFuZCBjb3B5aW5nIGZyb20gaXQuXG4gIC8vIChTZWUgYWxzbyBmbHVzaF9wZW5kaW5nKCkpLlxuICBpbnQgcmVhZF9idWYoYnl0ZVtdIGJ1ZiwgaW50IHN0YXJ0LCBpbnQgc2l6ZSkge1xuICAgIGludCBsZW49YXZhaWxfaW47XG5cbiAgICBpZihsZW4+c2l6ZSkgbGVuPXNpemU7XG4gICAgaWYobGVuPT0wKSByZXR1cm4gMDtcblxuICAgIGF2YWlsX2luLT1sZW47XG5cbiAgICBpZihkc3RhdGUubm9oZWFkZXI9PTApIHtcbiAgICAgIGFkbGVyPV9hZGxlci5hZGxlcjMyKGFkbGVyLCBuZXh0X2luLCBuZXh0X2luX2luZGV4LCBsZW4pO1xuICAgIH1cbiAgICBTeXN0ZW0uYXJyYXljb3B5KG5leHRfaW4sIG5leHRfaW5faW5kZXgsIGJ1Ziwgc3RhcnQsIGxlbik7XG4gICAgbmV4dF9pbl9pbmRleCAgKz0gbGVuO1xuICAgIHRvdGFsX2luICs9IGxlbjtcbiAgICByZXR1cm4gbGVuO1xuICB9XG5cbiAgcHVibGljIHZvaWQgZnJlZSgpe1xuICAgIG5leHRfaW49bnVsbDtcbiAgICBuZXh0X291dD1udWxsO1xuICAgIG1zZz1udWxsO1xuICAgIF9hZGxlcj1udWxsO1xuICB9XG59XG4qL1xuXG5cbi8vXG4vLyBJbmZsYXRlLmphdmFcbi8vXG5cbmZ1bmN0aW9uIEluZmxhdGUoKSB7XG4gICAgdGhpcy53YXMgPSBbMF07XG59XG5cbkluZmxhdGUucHJvdG90eXBlLmluZmxhdGVSZXNldCA9IGZ1bmN0aW9uKHopIHtcbiAgICBpZih6ID09IG51bGwgfHwgei5pc3RhdGUgPT0gbnVsbCkgcmV0dXJuIFpfU1RSRUFNX0VSUk9SO1xuICAgIFxuICAgIHoudG90YWxfaW4gPSB6LnRvdGFsX291dCA9IDA7XG4gICAgei5tc2cgPSBudWxsO1xuICAgIHouaXN0YXRlLm1vZGUgPSB6LmlzdGF0ZS5ub3dyYXAhPTAgPyBCTE9DS1MgOiBNRVRIT0Q7XG4gICAgei5pc3RhdGUuYmxvY2tzLnJlc2V0KHosIG51bGwpO1xuICAgIHJldHVybiBaX09LO1xufVxuXG5JbmZsYXRlLnByb3RvdHlwZS5pbmZsYXRlRW5kID0gZnVuY3Rpb24oeil7XG4gICAgaWYodGhpcy5ibG9ja3MgIT0gbnVsbClcbiAgICAgIHRoaXMuYmxvY2tzLmZyZWUoeik7XG4gICAgdGhpcy5ibG9ja3M9bnVsbDtcbiAgICByZXR1cm4gWl9PSztcbn1cblxuSW5mbGF0ZS5wcm90b3R5cGUuaW5mbGF0ZUluaXQgPSBmdW5jdGlvbih6LCB3KXtcbiAgICB6Lm1zZyA9IG51bGw7XG4gICAgdGhpcy5ibG9ja3MgPSBudWxsO1xuXG4gICAgLy8gaGFuZGxlIHVuZG9jdW1lbnRlZCBub3dyYXAgb3B0aW9uIChubyB6bGliIGhlYWRlciBvciBjaGVjaylcbiAgICBub3dyYXAgPSAwO1xuICAgIGlmKHcgPCAwKXtcbiAgICAgIHcgPSAtIHc7XG4gICAgICBub3dyYXAgPSAxO1xuICAgIH1cblxuICAgIC8vIHNldCB3aW5kb3cgc2l6ZVxuICAgIGlmKHc8OCB8fHc+MTUpe1xuICAgICAgdGhpcy5pbmZsYXRlRW5kKHopO1xuICAgICAgcmV0dXJuIFpfU1RSRUFNX0VSUk9SO1xuICAgIH1cbiAgICB0aGlzLndiaXRzPXc7XG5cbiAgICB6LmlzdGF0ZS5ibG9ja3M9bmV3IEluZkJsb2Nrcyh6LCBcblx0XHRcdFx0ICB6LmlzdGF0ZS5ub3dyYXAhPTAgPyBudWxsIDogdGhpcyxcblx0XHRcdFx0ICAxPDx3KTtcblxuICAgIC8vIHJlc2V0IHN0YXRlXG4gICAgdGhpcy5pbmZsYXRlUmVzZXQoeik7XG4gICAgcmV0dXJuIFpfT0s7XG4gIH1cblxuSW5mbGF0ZS5wcm90b3R5cGUuaW5mbGF0ZSA9IGZ1bmN0aW9uKHosIGYpe1xuICAgIHZhciByLCBiO1xuXG4gICAgaWYoeiA9PSBudWxsIHx8IHouaXN0YXRlID09IG51bGwgfHwgei5uZXh0X2luID09IG51bGwpXG4gICAgICByZXR1cm4gWl9TVFJFQU1fRVJST1I7XG4gICAgZiA9IGYgPT0gWl9GSU5JU0ggPyBaX0JVRl9FUlJPUiA6IFpfT0s7XG4gICAgciA9IFpfQlVGX0VSUk9SO1xuICAgIHdoaWxlICh0cnVlKXtcbiAgICAgIHN3aXRjaCAoei5pc3RhdGUubW9kZSl7XG4gICAgICBjYXNlIE1FVEhPRDpcblxuICAgICAgICBpZih6LmF2YWlsX2luPT0wKXJldHVybiByO3I9ZjtcblxuICAgICAgICB6LmF2YWlsX2luLS07IHoudG90YWxfaW4rKztcbiAgICAgICAgaWYoKCh6LmlzdGF0ZS5tZXRob2QgPSB6Lm5leHRfaW5bei5uZXh0X2luX2luZGV4KytdKSYweGYpIT1aX0RFRkxBVEVEKXtcbiAgICAgICAgICB6LmlzdGF0ZS5tb2RlID0gQkFEO1xuICAgICAgICAgIHoubXNnPVwidW5rbm93biBjb21wcmVzc2lvbiBtZXRob2RcIjtcbiAgICAgICAgICB6LmlzdGF0ZS5tYXJrZXIgPSA1OyAgICAgICAvLyBjYW4ndCB0cnkgaW5mbGF0ZVN5bmNcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBpZigoei5pc3RhdGUubWV0aG9kPj40KSs4PnouaXN0YXRlLndiaXRzKXtcbiAgICAgICAgICB6LmlzdGF0ZS5tb2RlID0gQkFEO1xuICAgICAgICAgIHoubXNnPVwiaW52YWxpZCB3aW5kb3cgc2l6ZVwiO1xuICAgICAgICAgIHouaXN0YXRlLm1hcmtlciA9IDU7ICAgICAgIC8vIGNhbid0IHRyeSBpbmZsYXRlU3luY1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHouaXN0YXRlLm1vZGU9RkxBRztcbiAgICAgIGNhc2UgRkxBRzpcblxuICAgICAgICBpZih6LmF2YWlsX2luPT0wKXJldHVybiByO3I9ZjtcblxuICAgICAgICB6LmF2YWlsX2luLS07IHoudG90YWxfaW4rKztcbiAgICAgICAgYiA9ICh6Lm5leHRfaW5bei5uZXh0X2luX2luZGV4KytdKSYweGZmO1xuXG4gICAgICAgIGlmKCgoKHouaXN0YXRlLm1ldGhvZCA8PCA4KStiKSAlIDMxKSE9MCl7XG4gICAgICAgICAgei5pc3RhdGUubW9kZSA9IEJBRDtcbiAgICAgICAgICB6Lm1zZyA9IFwiaW5jb3JyZWN0IGhlYWRlciBjaGVja1wiO1xuICAgICAgICAgIHouaXN0YXRlLm1hcmtlciA9IDU7ICAgICAgIC8vIGNhbid0IHRyeSBpbmZsYXRlU3luY1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYoKGImUFJFU0VUX0RJQ1QpPT0wKXtcbiAgICAgICAgICB6LmlzdGF0ZS5tb2RlID0gQkxPQ0tTO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHouaXN0YXRlLm1vZGUgPSBESUNUNDtcbiAgICAgIGNhc2UgRElDVDQ6XG5cbiAgICAgICAgaWYoei5hdmFpbF9pbj09MClyZXR1cm4gcjtyPWY7XG5cbiAgICAgICAgei5hdmFpbF9pbi0tOyB6LnRvdGFsX2luKys7XG4gICAgICAgIHouaXN0YXRlLm5lZWQ9KCh6Lm5leHRfaW5bei5uZXh0X2luX2luZGV4KytdJjB4ZmYpPDwyNCkmMHhmZjAwMDAwMDtcbiAgICAgICAgei5pc3RhdGUubW9kZT1ESUNUMztcbiAgICAgIGNhc2UgRElDVDM6XG5cbiAgICAgICAgaWYoei5hdmFpbF9pbj09MClyZXR1cm4gcjtyPWY7XG5cbiAgICAgICAgei5hdmFpbF9pbi0tOyB6LnRvdGFsX2luKys7XG4gICAgICAgIHouaXN0YXRlLm5lZWQrPSgoei5uZXh0X2luW3oubmV4dF9pbl9pbmRleCsrXSYweGZmKTw8MTYpJjB4ZmYwMDAwO1xuICAgICAgICB6LmlzdGF0ZS5tb2RlPURJQ1QyO1xuICAgICAgY2FzZSBESUNUMjpcblxuICAgICAgICBpZih6LmF2YWlsX2luPT0wKXJldHVybiByO3I9ZjtcblxuICAgICAgICB6LmF2YWlsX2luLS07IHoudG90YWxfaW4rKztcbiAgICAgICAgei5pc3RhdGUubmVlZCs9KCh6Lm5leHRfaW5bei5uZXh0X2luX2luZGV4KytdJjB4ZmYpPDw4KSYweGZmMDA7XG4gICAgICAgIHouaXN0YXRlLm1vZGU9RElDVDE7XG4gICAgICBjYXNlIERJQ1QxOlxuXG4gICAgICAgIGlmKHouYXZhaWxfaW49PTApcmV0dXJuIHI7cj1mO1xuXG4gICAgICAgIHouYXZhaWxfaW4tLTsgei50b3RhbF9pbisrO1xuICAgICAgICB6LmlzdGF0ZS5uZWVkICs9ICh6Lm5leHRfaW5bei5uZXh0X2luX2luZGV4KytdJjB4ZmYpO1xuICAgICAgICB6LmFkbGVyID0gei5pc3RhdGUubmVlZDtcbiAgICAgICAgei5pc3RhdGUubW9kZSA9IERJQ1QwO1xuICAgICAgICByZXR1cm4gWl9ORUVEX0RJQ1Q7XG4gICAgICBjYXNlIERJQ1QwOlxuICAgICAgICB6LmlzdGF0ZS5tb2RlID0gQkFEO1xuICAgICAgICB6Lm1zZyA9IFwibmVlZCBkaWN0aW9uYXJ5XCI7XG4gICAgICAgIHouaXN0YXRlLm1hcmtlciA9IDA7ICAgICAgIC8vIGNhbiB0cnkgaW5mbGF0ZVN5bmNcbiAgICAgICAgcmV0dXJuIFpfU1RSRUFNX0VSUk9SO1xuICAgICAgY2FzZSBCTE9DS1M6XG5cbiAgICAgICAgciA9IHouaXN0YXRlLmJsb2Nrcy5wcm9jKHosIHIpO1xuICAgICAgICBpZihyID09IFpfREFUQV9FUlJPUil7XG4gICAgICAgICAgei5pc3RhdGUubW9kZSA9IEJBRDtcbiAgICAgICAgICB6LmlzdGF0ZS5tYXJrZXIgPSAwOyAgICAgLy8gY2FuIHRyeSBpbmZsYXRlU3luY1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGlmKHIgPT0gWl9PSyl7XG4gICAgICAgICAgciA9IGY7XG4gICAgICAgIH1cbiAgICAgICAgaWYociAhPSBaX1NUUkVBTV9FTkQpe1xuICAgICAgICAgIHJldHVybiByO1xuICAgICAgICB9XG4gICAgICAgIHIgPSBmO1xuICAgICAgICB6LmlzdGF0ZS5ibG9ja3MucmVzZXQoeiwgei5pc3RhdGUud2FzKTtcbiAgICAgICAgaWYoei5pc3RhdGUubm93cmFwIT0wKXtcbiAgICAgICAgICB6LmlzdGF0ZS5tb2RlPURPTkU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgei5pc3RhdGUubW9kZT1DSEVDSzQ7XG4gICAgICBjYXNlIENIRUNLNDpcblxuICAgICAgICBpZih6LmF2YWlsX2luPT0wKXJldHVybiByO3I9ZjtcblxuICAgICAgICB6LmF2YWlsX2luLS07IHoudG90YWxfaW4rKztcbiAgICAgICAgei5pc3RhdGUubmVlZD0oKHoubmV4dF9pblt6Lm5leHRfaW5faW5kZXgrK10mMHhmZik8PDI0KSYweGZmMDAwMDAwO1xuICAgICAgICB6LmlzdGF0ZS5tb2RlPUNIRUNLMztcbiAgICAgIGNhc2UgQ0hFQ0szOlxuXG4gICAgICAgIGlmKHouYXZhaWxfaW49PTApcmV0dXJuIHI7cj1mO1xuXG4gICAgICAgIHouYXZhaWxfaW4tLTsgei50b3RhbF9pbisrO1xuICAgICAgICB6LmlzdGF0ZS5uZWVkKz0oKHoubmV4dF9pblt6Lm5leHRfaW5faW5kZXgrK10mMHhmZik8PDE2KSYweGZmMDAwMDtcbiAgICAgICAgei5pc3RhdGUubW9kZSA9IENIRUNLMjtcbiAgICAgIGNhc2UgQ0hFQ0syOlxuXG4gICAgICAgIGlmKHouYXZhaWxfaW49PTApcmV0dXJuIHI7cj1mO1xuXG4gICAgICAgIHouYXZhaWxfaW4tLTsgei50b3RhbF9pbisrO1xuICAgICAgICB6LmlzdGF0ZS5uZWVkKz0oKHoubmV4dF9pblt6Lm5leHRfaW5faW5kZXgrK10mMHhmZik8PDgpJjB4ZmYwMDtcbiAgICAgICAgei5pc3RhdGUubW9kZSA9IENIRUNLMTtcbiAgICAgIGNhc2UgQ0hFQ0sxOlxuXG4gICAgICAgIGlmKHouYXZhaWxfaW49PTApcmV0dXJuIHI7cj1mO1xuXG4gICAgICAgIHouYXZhaWxfaW4tLTsgei50b3RhbF9pbisrO1xuICAgICAgICB6LmlzdGF0ZS5uZWVkKz0oei5uZXh0X2luW3oubmV4dF9pbl9pbmRleCsrXSYweGZmKTtcblxuICAgICAgICBpZigoKHouaXN0YXRlLndhc1swXSkpICE9ICgoei5pc3RhdGUubmVlZCkpKXtcbiAgICAgICAgICB6LmlzdGF0ZS5tb2RlID0gQkFEO1xuICAgICAgICAgIHoubXNnID0gXCJpbmNvcnJlY3QgZGF0YSBjaGVja1wiO1xuICAgICAgICAgIHouaXN0YXRlLm1hcmtlciA9IDU7ICAgICAgIC8vIGNhbid0IHRyeSBpbmZsYXRlU3luY1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgei5pc3RhdGUubW9kZSA9IERPTkU7XG4gICAgICBjYXNlIERPTkU6XG4gICAgICAgIHJldHVybiBaX1NUUkVBTV9FTkQ7XG4gICAgICBjYXNlIEJBRDpcbiAgICAgICAgcmV0dXJuIFpfREFUQV9FUlJPUjtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBaX1NUUkVBTV9FUlJPUjtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuXG5JbmZsYXRlLnByb3RvdHlwZS5pbmZsYXRlU2V0RGljdGlvbmFyeSA9IGZ1bmN0aW9uKHosICBkaWN0aW9uYXJ5LCBkaWN0TGVuZ3RoKSB7XG4gICAgdmFyIGluZGV4PTA7XG4gICAgdmFyIGxlbmd0aCA9IGRpY3RMZW5ndGg7XG4gICAgaWYoej09bnVsbCB8fCB6LmlzdGF0ZSA9PSBudWxsfHwgei5pc3RhdGUubW9kZSAhPSBESUNUMClcbiAgICAgIHJldHVybiBaX1NUUkVBTV9FUlJPUjtcblxuICAgIGlmKHouX2FkbGVyLmFkbGVyMzIoMSwgZGljdGlvbmFyeSwgMCwgZGljdExlbmd0aCkhPXouYWRsZXIpe1xuICAgICAgcmV0dXJuIFpfREFUQV9FUlJPUjtcbiAgICB9XG5cbiAgICB6LmFkbGVyID0gei5fYWRsZXIuYWRsZXIzMigwLCBudWxsLCAwLCAwKTtcblxuICAgIGlmKGxlbmd0aCA+PSAoMTw8ei5pc3RhdGUud2JpdHMpKXtcbiAgICAgIGxlbmd0aCA9ICgxPDx6LmlzdGF0ZS53Yml0cyktMTtcbiAgICAgIGluZGV4PWRpY3RMZW5ndGggLSBsZW5ndGg7XG4gICAgfVxuICAgIHouaXN0YXRlLmJsb2Nrcy5zZXRfZGljdGlvbmFyeShkaWN0aW9uYXJ5LCBpbmRleCwgbGVuZ3RoKTtcbiAgICB6LmlzdGF0ZS5tb2RlID0gQkxPQ0tTO1xuICAgIHJldHVybiBaX09LO1xuICB9XG5cbi8vICBzdGF0aWMgcHJpdmF0ZSBieXRlW10gbWFyayA9IHsoYnl0ZSkwLCAoYnl0ZSkwLCAoYnl0ZSkweGZmLCAoYnl0ZSkweGZmfTtcbnZhciBtYXJrID0gWzAsIDAsIDI1NSwgMjU1XVxuXG5JbmZsYXRlLnByb3RvdHlwZS5pbmZsYXRlU3luYyA9IGZ1bmN0aW9uKHope1xuICAgIHZhciBuOyAgICAgICAvLyBudW1iZXIgb2YgYnl0ZXMgdG8gbG9vayBhdFxuICAgIHZhciBwOyAgICAgICAvLyBwb2ludGVyIHRvIGJ5dGVzXG4gICAgdmFyIG07ICAgICAgIC8vIG51bWJlciBvZiBtYXJrZXIgYnl0ZXMgZm91bmQgaW4gYSByb3dcbiAgICB2YXIgciwgdzsgICAvLyB0ZW1wb3JhcmllcyB0byBzYXZlIHRvdGFsX2luIGFuZCB0b3RhbF9vdXRcblxuICAgIC8vIHNldCB1cFxuICAgIGlmKHogPT0gbnVsbCB8fCB6LmlzdGF0ZSA9PSBudWxsKVxuICAgICAgcmV0dXJuIFpfU1RSRUFNX0VSUk9SO1xuICAgIGlmKHouaXN0YXRlLm1vZGUgIT0gQkFEKXtcbiAgICAgIHouaXN0YXRlLm1vZGUgPSBCQUQ7XG4gICAgICB6LmlzdGF0ZS5tYXJrZXIgPSAwO1xuICAgIH1cbiAgICBpZigobj16LmF2YWlsX2luKT09MClcbiAgICAgIHJldHVybiBaX0JVRl9FUlJPUjtcbiAgICBwPXoubmV4dF9pbl9pbmRleDtcbiAgICBtPXouaXN0YXRlLm1hcmtlcjtcblxuICAgIC8vIHNlYXJjaFxuICAgIHdoaWxlIChuIT0wICYmIG0gPCA0KXtcbiAgICAgIGlmKHoubmV4dF9pbltwXSA9PSBtYXJrW21dKXtcbiAgICAgICAgbSsrO1xuICAgICAgfVxuICAgICAgZWxzZSBpZih6Lm5leHRfaW5bcF0hPTApe1xuICAgICAgICBtID0gMDtcbiAgICAgIH1cbiAgICAgIGVsc2V7XG4gICAgICAgIG0gPSA0IC0gbTtcbiAgICAgIH1cbiAgICAgIHArKzsgbi0tO1xuICAgIH1cblxuICAgIC8vIHJlc3RvcmVcbiAgICB6LnRvdGFsX2luICs9IHAtei5uZXh0X2luX2luZGV4O1xuICAgIHoubmV4dF9pbl9pbmRleCA9IHA7XG4gICAgei5hdmFpbF9pbiA9IG47XG4gICAgei5pc3RhdGUubWFya2VyID0gbTtcblxuICAgIC8vIHJldHVybiBubyBqb3kgb3Igc2V0IHVwIHRvIHJlc3RhcnQgb24gYSBuZXcgYmxvY2tcbiAgICBpZihtICE9IDQpe1xuICAgICAgcmV0dXJuIFpfREFUQV9FUlJPUjtcbiAgICB9XG4gICAgcj16LnRvdGFsX2luOyAgdz16LnRvdGFsX291dDtcbiAgICB0aGlzLmluZmxhdGVSZXNldCh6KTtcbiAgICB6LnRvdGFsX2luPXI7ICB6LnRvdGFsX291dCA9IHc7XG4gICAgei5pc3RhdGUubW9kZSA9IEJMT0NLUztcbiAgICByZXR1cm4gWl9PSztcbn1cblxuICAvLyBSZXR1cm5zIHRydWUgaWYgaW5mbGF0ZSBpcyBjdXJyZW50bHkgYXQgdGhlIGVuZCBvZiBhIGJsb2NrIGdlbmVyYXRlZFxuICAvLyBieSBaX1NZTkNfRkxVU0ggb3IgWl9GVUxMX0ZMVVNILiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgYnkgb25lIFBQUFxuICAvLyBpbXBsZW1lbnRhdGlvbiB0byBwcm92aWRlIGFuIGFkZGl0aW9uYWwgc2FmZXR5IGNoZWNrLiBQUFAgdXNlcyBaX1NZTkNfRkxVU0hcbiAgLy8gYnV0IHJlbW92ZXMgdGhlIGxlbmd0aCBieXRlcyBvZiB0aGUgcmVzdWx0aW5nIGVtcHR5IHN0b3JlZCBibG9jay4gV2hlblxuICAvLyBkZWNvbXByZXNzaW5nLCBQUFAgY2hlY2tzIHRoYXQgYXQgdGhlIGVuZCBvZiBpbnB1dCBwYWNrZXQsIGluZmxhdGUgaXNcbiAgLy8gd2FpdGluZyBmb3IgdGhlc2UgbGVuZ3RoIGJ5dGVzLlxuSW5mbGF0ZS5wcm90b3R5cGUuaW5mbGF0ZVN5bmNQb2ludCA9IGZ1bmN0aW9uKHope1xuICAgIGlmKHogPT0gbnVsbCB8fCB6LmlzdGF0ZSA9PSBudWxsIHx8IHouaXN0YXRlLmJsb2NrcyA9PSBudWxsKVxuICAgICAgcmV0dXJuIFpfU1RSRUFNX0VSUk9SO1xuICAgIHJldHVybiB6LmlzdGF0ZS5ibG9ja3Muc3luY19wb2ludCgpO1xufVxuXG5cbi8vXG4vLyBJbmZCbG9ja3MuamF2YVxuLy9cblxudmFyIElORkJMT0NLU19CT1JERVIgPSBbMTYsIDE3LCAxOCwgMCwgOCwgNywgOSwgNiwgMTAsIDUsIDExLCA0LCAxMiwgMywgMTMsIDIsIDE0LCAxLCAxNV07XG5cbmZ1bmN0aW9uIEluZkJsb2Nrcyh6LCBjaGVja2ZuLCB3KSB7XG4gICAgdGhpcy5odWZ0cz1uZXcgSW50MzJBcnJheShNQU5ZKjMpO1xuICAgIHRoaXMud2luZG93PW5ldyBVaW50OEFycmF5KHcpO1xuICAgIHRoaXMuZW5kPXc7XG4gICAgdGhpcy5jaGVja2ZuID0gY2hlY2tmbjtcbiAgICB0aGlzLm1vZGUgPSBJQl9UWVBFO1xuICAgIHRoaXMucmVzZXQoeiwgbnVsbCk7XG5cbiAgICB0aGlzLmxlZnQgPSAwOyAgICAgICAgICAgIC8vIGlmIFNUT1JFRCwgYnl0ZXMgbGVmdCB0byBjb3B5IFxuXG4gICAgdGhpcy50YWJsZSA9IDA7ICAgICAgICAgICAvLyB0YWJsZSBsZW5ndGhzICgxNCBiaXRzKSBcbiAgICB0aGlzLmluZGV4ID0gMDsgICAgICAgICAgIC8vIGluZGV4IGludG8gYmxlbnMgKG9yIGJvcmRlcikgXG4gICAgdGhpcy5ibGVucyA9IG51bGw7ICAgICAgICAgLy8gYml0IGxlbmd0aHMgb2YgY29kZXMgXG4gICAgdGhpcy5iYj1uZXcgSW50MzJBcnJheSgxKTsgLy8gYml0IGxlbmd0aCB0cmVlIGRlcHRoIFxuICAgIHRoaXMudGI9bmV3IEludDMyQXJyYXkoMSk7IC8vIGJpdCBsZW5ndGggZGVjb2RpbmcgdHJlZSBcblxuICAgIHRoaXMuY29kZXMgPSBuZXcgSW5mQ29kZXMoKTtcblxuICAgIHRoaXMubGFzdCA9IDA7ICAgICAgICAgICAgLy8gdHJ1ZSBpZiB0aGlzIGJsb2NrIGlzIHRoZSBsYXN0IGJsb2NrIFxuXG4gIC8vIG1vZGUgaW5kZXBlbmRlbnQgaW5mb3JtYXRpb24gXG4gICAgdGhpcy5iaXRrID0gMDsgICAgICAgICAgICAvLyBiaXRzIGluIGJpdCBidWZmZXIgXG4gICAgdGhpcy5iaXRiID0gMDsgICAgICAgICAgICAvLyBiaXQgYnVmZmVyIFxuICAgIHRoaXMucmVhZCA9IDA7ICAgICAgICAgICAgLy8gd2luZG93IHJlYWQgcG9pbnRlciBcbiAgICB0aGlzLndyaXRlID0gMDsgICAgICAgICAgIC8vIHdpbmRvdyB3cml0ZSBwb2ludGVyIFxuICAgIHRoaXMuY2hlY2sgPSAwOyAgICAgICAgICAvLyBjaGVjayBvbiBvdXRwdXQgXG5cbiAgICB0aGlzLmluZnRyZWU9bmV3IEluZlRyZWUoKTtcbn1cblxuXG5cblxuSW5mQmxvY2tzLnByb3RvdHlwZS5yZXNldCA9IGZ1bmN0aW9uKHosIGMpe1xuICAgIGlmKGMpIGNbMF09dGhpcy5jaGVjaztcbiAgICBpZih0aGlzLm1vZGU9PUlCX0NPREVTKXtcbiAgICAgIHRoaXMuY29kZXMuZnJlZSh6KTtcbiAgICB9XG4gICAgdGhpcy5tb2RlPUlCX1RZUEU7XG4gICAgdGhpcy5iaXRrPTA7XG4gICAgdGhpcy5iaXRiPTA7XG4gICAgdGhpcy5yZWFkPXRoaXMud3JpdGU9MDtcblxuICAgIGlmKHRoaXMuY2hlY2tmbilcbiAgICAgIHouYWRsZXI9dGhpcy5jaGVjaz16Ll9hZGxlci5hZGxlcjMyKDAsIG51bGwsIDAsIDApO1xuICB9XG5cbiBJbmZCbG9ja3MucHJvdG90eXBlLnByb2MgPSBmdW5jdGlvbih6LCByKXtcbiAgICB2YXIgdDsgICAgICAgICAgICAgIC8vIHRlbXBvcmFyeSBzdG9yYWdlXG4gICAgdmFyIGI7ICAgICAgICAgICAgICAvLyBiaXQgYnVmZmVyXG4gICAgdmFyIGs7ICAgICAgICAgICAgICAvLyBiaXRzIGluIGJpdCBidWZmZXJcbiAgICB2YXIgcDsgICAgICAgICAgICAgIC8vIGlucHV0IGRhdGEgcG9pbnRlclxuICAgIHZhciBuOyAgICAgICAgICAgICAgLy8gYnl0ZXMgYXZhaWxhYmxlIHRoZXJlXG4gICAgdmFyIHE7ICAgICAgICAgICAgICAvLyBvdXRwdXQgd2luZG93IHdyaXRlIHBvaW50ZXJcbiAgICB2YXIgbTsgICAgICAgICAgICAgIC8vIGJ5dGVzIHRvIGVuZCBvZiB3aW5kb3cgb3IgcmVhZCBwb2ludGVyXG5cbiAgICAvLyBjb3B5IGlucHV0L291dHB1dCBpbmZvcm1hdGlvbiB0byBsb2NhbHMgKFVQREFURSBtYWNybyByZXN0b3JlcylcbiAgICB7cD16Lm5leHRfaW5faW5kZXg7bj16LmF2YWlsX2luO2I9dGhpcy5iaXRiO2s9dGhpcy5iaXRrO31cbiAgICB7cT10aGlzLndyaXRlO209KHE8dGhpcy5yZWFkID8gdGhpcy5yZWFkLXEtMSA6IHRoaXMuZW5kLXEpO31cblxuICAgIC8vIHByb2Nlc3MgaW5wdXQgYmFzZWQgb24gY3VycmVudCBzdGF0ZVxuICAgIHdoaWxlKHRydWUpe1xuICAgICAgc3dpdGNoICh0aGlzLm1vZGUpe1xuICAgICAgY2FzZSBJQl9UWVBFOlxuXG5cdHdoaWxlKGs8KDMpKXtcblx0ICBpZihuIT0wKXtcblx0ICAgIHI9Wl9PSztcblx0ICB9XG5cdCAgZWxzZXtcblx0ICAgIHRoaXMuYml0Yj1iOyB0aGlzLmJpdGs9azsgXG5cdCAgICB6LmF2YWlsX2luPW47XG5cdCAgICB6LnRvdGFsX2luKz1wLXoubmV4dF9pbl9pbmRleDt6Lm5leHRfaW5faW5kZXg9cDtcblx0ICAgIHRoaXMud3JpdGU9cTtcblx0ICAgIHJldHVybiB0aGlzLmluZmxhdGVfZmx1c2goeixyKTtcblx0ICB9O1xuXHQgIG4tLTtcblx0ICBifD0oei5uZXh0X2luW3ArK10mMHhmZik8PGs7XG5cdCAgays9ODtcblx0fVxuXHR0ID0gKGIgJiA3KTtcblx0dGhpcy5sYXN0ID0gdCAmIDE7XG5cblx0c3dpdGNoICh0ID4+PiAxKXtcbiAgICAgICAgY2FzZSAwOiAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzdG9yZWQgXG4gICAgICAgICAge2I+Pj49KDMpO2stPSgzKTt9XG4gICAgICAgICAgdCA9IGsgJiA3OyAgICAgICAgICAgICAgICAgICAgLy8gZ28gdG8gYnl0ZSBib3VuZGFyeVxuXG4gICAgICAgICAge2I+Pj49KHQpO2stPSh0KTt9XG4gICAgICAgICAgdGhpcy5tb2RlID0gSUJfTEVOUzsgICAgICAgICAgICAgICAgICAvLyBnZXQgbGVuZ3RoIG9mIHN0b3JlZCBibG9ja1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDE6ICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZpeGVkXG4gICAgICAgICAge1xuICAgICAgICAgICAgICB2YXIgYmw9bmV3IEludDMyQXJyYXkoMSk7XG5cdCAgICAgIHZhciBiZD1uZXcgSW50MzJBcnJheSgxKTtcbiAgICAgICAgICAgICAgdmFyIHRsPVtdO1xuXHQgICAgICB2YXIgdGQ9W107XG5cblx0ICAgICAgaW5mbGF0ZV90cmVlc19maXhlZChibCwgYmQsIHRsLCB0ZCwgeik7XG4gICAgICAgICAgICAgIHRoaXMuY29kZXMuaW5pdChibFswXSwgYmRbMF0sIHRsWzBdLCAwLCB0ZFswXSwgMCwgeik7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAge2I+Pj49KDMpO2stPSgzKTt9XG5cbiAgICAgICAgICB0aGlzLm1vZGUgPSBJQl9DT0RFUztcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAyOiAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkeW5hbWljXG5cbiAgICAgICAgICB7Yj4+Pj0oMyk7ay09KDMpO31cblxuICAgICAgICAgIHRoaXMubW9kZSA9IElCX1RBQkxFO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDM6ICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlsbGVnYWxcblxuICAgICAgICAgIHtiPj4+PSgzKTtrLT0oMyk7fVxuICAgICAgICAgIHRoaXMubW9kZSA9IEJBRDtcbiAgICAgICAgICB6Lm1zZyA9IFwiaW52YWxpZCBibG9jayB0eXBlXCI7XG4gICAgICAgICAgciA9IFpfREFUQV9FUlJPUjtcblxuXHQgIHRoaXMuYml0Yj1iOyB0aGlzLmJpdGs9azsgXG5cdCAgei5hdmFpbF9pbj1uO3oudG90YWxfaW4rPXAtei5uZXh0X2luX2luZGV4O3oubmV4dF9pbl9pbmRleD1wO1xuXHQgIHRoaXMud3JpdGU9cTtcblx0ICByZXR1cm4gdGhpcy5pbmZsYXRlX2ZsdXNoKHoscik7XG5cdH1cblx0YnJlYWs7XG4gICAgICBjYXNlIElCX0xFTlM6XG5cdHdoaWxlKGs8KDMyKSl7XG5cdCAgaWYobiE9MCl7XG5cdCAgICByPVpfT0s7XG5cdCAgfVxuXHQgIGVsc2V7XG5cdCAgICB0aGlzLmJpdGI9YjsgdGhpcy5iaXRrPWs7IFxuXHQgICAgei5hdmFpbF9pbj1uO1xuXHQgICAgei50b3RhbF9pbis9cC16Lm5leHRfaW5faW5kZXg7ei5uZXh0X2luX2luZGV4PXA7XG5cdCAgICB0aGlzLndyaXRlPXE7XG5cdCAgICByZXR1cm4gdGhpcy5pbmZsYXRlX2ZsdXNoKHoscik7XG5cdCAgfTtcblx0ICBuLS07XG5cdCAgYnw9KHoubmV4dF9pbltwKytdJjB4ZmYpPDxrO1xuXHQgIGsrPTg7XG5cdH1cblxuXHRpZiAoKCgofmIpID4+PiAxNikgJiAweGZmZmYpICE9IChiICYgMHhmZmZmKSl7XG5cdCAgdGhpcy5tb2RlID0gQkFEO1xuXHQgIHoubXNnID0gXCJpbnZhbGlkIHN0b3JlZCBibG9jayBsZW5ndGhzXCI7XG5cdCAgciA9IFpfREFUQV9FUlJPUjtcblxuXHQgIHRoaXMuYml0Yj1iOyB0aGlzLmJpdGs9azsgXG5cdCAgei5hdmFpbF9pbj1uO3oudG90YWxfaW4rPXAtei5uZXh0X2luX2luZGV4O3oubmV4dF9pbl9pbmRleD1wO1xuXHQgIHRoaXMud3JpdGU9cTtcblx0ICByZXR1cm4gdGhpcy5pbmZsYXRlX2ZsdXNoKHoscik7XG5cdH1cblx0dGhpcy5sZWZ0ID0gKGIgJiAweGZmZmYpO1xuXHRiID0gayA9IDA7ICAgICAgICAgICAgICAgICAgICAgICAvLyBkdW1wIGJpdHNcblx0dGhpcy5tb2RlID0gdGhpcy5sZWZ0IT0wID8gSUJfU1RPUkVEIDogKHRoaXMubGFzdCE9MCA/IElCX0RSWSA6IElCX1RZUEUpO1xuXHRicmVhaztcbiAgICAgIGNhc2UgSUJfU1RPUkVEOlxuXHRpZiAobiA9PSAwKXtcblx0ICB0aGlzLmJpdGI9YjsgdGhpcy5iaXRrPWs7IFxuXHQgIHouYXZhaWxfaW49bjt6LnRvdGFsX2luKz1wLXoubmV4dF9pbl9pbmRleDt6Lm5leHRfaW5faW5kZXg9cDtcblx0ICB3cml0ZT1xO1xuXHQgIHJldHVybiB0aGlzLmluZmxhdGVfZmx1c2goeixyKTtcblx0fVxuXG5cdGlmKG09PTApe1xuXHQgIGlmKHE9PWVuZCYmcmVhZCE9MCl7XG5cdCAgICBxPTA7IG09KHE8dGhpcy5yZWFkID8gdGhpcy5yZWFkLXEtMSA6IHRoaXMuZW5kLXEpO1xuXHQgIH1cblx0ICBpZihtPT0wKXtcblx0ICAgIHRoaXMud3JpdGU9cTsgXG5cdCAgICByPXRoaXMuaW5mbGF0ZV9mbHVzaCh6LHIpO1xuXHQgICAgcT10aGlzLndyaXRlOyBtID0gKHEgPCB0aGlzLnJlYWQgPyB0aGlzLnJlYWQtcS0xIDogdGhpcy5lbmQtcSk7XG5cdCAgICBpZihxPT10aGlzLmVuZCAmJiB0aGlzLnJlYWQgIT0gMCl7XG5cdCAgICAgIHE9MDsgbSA9IChxIDwgdGhpcy5yZWFkID8gdGhpcy5yZWFkLXEtMSA6IHRoaXMuZW5kLXEpO1xuXHQgICAgfVxuXHQgICAgaWYobT09MCl7XG5cdCAgICAgIHRoaXMuYml0Yj1iOyB0aGlzLmJpdGs9azsgXG5cdCAgICAgIHouYXZhaWxfaW49bjt6LnRvdGFsX2luKz1wLXoubmV4dF9pbl9pbmRleDt6Lm5leHRfaW5faW5kZXg9cDtcblx0ICAgICAgdGhpcy53cml0ZT1xO1xuXHQgICAgICByZXR1cm4gdGhpcy5pbmZsYXRlX2ZsdXNoKHoscik7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdHI9Wl9PSztcblxuXHR0ID0gdGhpcy5sZWZ0O1xuXHRpZih0Pm4pIHQgPSBuO1xuXHRpZih0Pm0pIHQgPSBtO1xuXHRhcnJheUNvcHkoei5uZXh0X2luLCBwLCB0aGlzLndpbmRvdywgcSwgdCk7XG5cdHAgKz0gdDsgIG4gLT0gdDtcblx0cSArPSB0OyAgbSAtPSB0O1xuXHRpZiAoKHRoaXMubGVmdCAtPSB0KSAhPSAwKVxuXHQgIGJyZWFrO1xuXHR0aGlzLm1vZGUgPSAodGhpcy5sYXN0ICE9IDAgPyBJQl9EUlkgOiBJQl9UWVBFKTtcblx0YnJlYWs7XG4gICAgICBjYXNlIElCX1RBQkxFOlxuXG5cdHdoaWxlKGs8KDE0KSl7XG5cdCAgaWYobiE9MCl7XG5cdCAgICByPVpfT0s7XG5cdCAgfVxuXHQgIGVsc2V7XG5cdCAgICB0aGlzLmJpdGI9YjsgdGhpcy5iaXRrPWs7IFxuXHQgICAgei5hdmFpbF9pbj1uO1xuXHQgICAgei50b3RhbF9pbis9cC16Lm5leHRfaW5faW5kZXg7ei5uZXh0X2luX2luZGV4PXA7XG5cdCAgICB0aGlzLndyaXRlPXE7XG5cdCAgICByZXR1cm4gdGhpcy5pbmZsYXRlX2ZsdXNoKHoscik7XG5cdCAgfTtcblx0ICBuLS07XG5cdCAgYnw9KHoubmV4dF9pbltwKytdJjB4ZmYpPDxrO1xuXHQgIGsrPTg7XG5cdH1cblxuXHR0aGlzLnRhYmxlID0gdCA9IChiICYgMHgzZmZmKTtcblx0aWYgKCh0ICYgMHgxZikgPiAyOSB8fCAoKHQgPj4gNSkgJiAweDFmKSA+IDI5KVxuXHQgIHtcblx0ICAgIHRoaXMubW9kZSA9IElCX0JBRDtcblx0ICAgIHoubXNnID0gXCJ0b28gbWFueSBsZW5ndGggb3IgZGlzdGFuY2Ugc3ltYm9sc1wiO1xuXHQgICAgciA9IFpfREFUQV9FUlJPUjtcblxuXHQgICAgdGhpcy5iaXRiPWI7IHRoaXMuYml0az1rOyBcblx0ICAgIHouYXZhaWxfaW49bjt6LnRvdGFsX2luKz1wLXoubmV4dF9pbl9pbmRleDt6Lm5leHRfaW5faW5kZXg9cDtcblx0ICAgIHRoaXMud3JpdGU9cTtcblx0ICAgIHJldHVybiB0aGlzLmluZmxhdGVfZmx1c2goeixyKTtcblx0ICB9XG5cdHQgPSAyNTggKyAodCAmIDB4MWYpICsgKCh0ID4+IDUpICYgMHgxZik7XG5cdGlmKHRoaXMuYmxlbnM9PW51bGwgfHwgdGhpcy5ibGVucy5sZW5ndGg8dCl7XG5cdCAgICB0aGlzLmJsZW5zPW5ldyBJbnQzMkFycmF5KHQpO1xuXHR9XG5cdGVsc2V7XG5cdCAgZm9yKHZhciBpPTA7IGk8dDsgaSsrKXtcbiAgICAgICAgICAgICAgdGhpcy5ibGVuc1tpXT0wO1xuICAgICAgICAgIH1cblx0fVxuXG5cdHtiPj4+PSgxNCk7ay09KDE0KTt9XG5cblx0dGhpcy5pbmRleCA9IDA7XG5cdG1vZGUgPSBJQl9CVFJFRTtcbiAgICAgIGNhc2UgSUJfQlRSRUU6XG5cdHdoaWxlICh0aGlzLmluZGV4IDwgNCArICh0aGlzLnRhYmxlID4+PiAxMCkpe1xuXHQgIHdoaWxlKGs8KDMpKXtcblx0ICAgIGlmKG4hPTApe1xuXHQgICAgICByPVpfT0s7XG5cdCAgICB9XG5cdCAgICBlbHNle1xuXHQgICAgICB0aGlzLmJpdGI9YjsgdGhpcy5iaXRrPWs7IFxuXHQgICAgICB6LmF2YWlsX2luPW47XG5cdCAgICAgIHoudG90YWxfaW4rPXAtei5uZXh0X2luX2luZGV4O3oubmV4dF9pbl9pbmRleD1wO1xuXHQgICAgICB0aGlzLndyaXRlPXE7XG5cdCAgICAgIHJldHVybiB0aGlzLmluZmxhdGVfZmx1c2goeixyKTtcblx0ICAgIH07XG5cdCAgICBuLS07XG5cdCAgICBifD0oei5uZXh0X2luW3ArK10mMHhmZik8PGs7XG5cdCAgICBrKz04O1xuXHQgIH1cblxuXHQgIHRoaXMuYmxlbnNbSU5GQkxPQ0tTX0JPUkRFUlt0aGlzLmluZGV4KytdXSA9IGImNztcblxuXHQgIHtiPj4+PSgzKTtrLT0oMyk7fVxuXHR9XG5cblx0d2hpbGUodGhpcy5pbmRleCA8IDE5KXtcblx0ICB0aGlzLmJsZW5zW0lORkJMT0NLU19CT1JERVJbdGhpcy5pbmRleCsrXV0gPSAwO1xuXHR9XG5cblx0dGhpcy5iYlswXSA9IDc7XG5cdHQgPSB0aGlzLmluZnRyZWUuaW5mbGF0ZV90cmVlc19iaXRzKHRoaXMuYmxlbnMsIHRoaXMuYmIsIHRoaXMudGIsIHRoaXMuaHVmdHMsIHopO1xuXHRpZiAodCAhPSBaX09LKXtcblx0ICByID0gdDtcblx0ICBpZiAociA9PSBaX0RBVEFfRVJST1Ipe1xuXHQgICAgdGhpcy5ibGVucz1udWxsO1xuXHQgICAgdGhpcy5tb2RlID0gSUJfQkFEO1xuXHQgIH1cblxuXHQgIHRoaXMuYml0Yj1iOyB0aGlzLmJpdGs9azsgXG5cdCAgei5hdmFpbF9pbj1uO3oudG90YWxfaW4rPXAtei5uZXh0X2luX2luZGV4O3oubmV4dF9pbl9pbmRleD1wO1xuXHQgIHdyaXRlPXE7XG5cdCAgcmV0dXJuIHRoaXMuaW5mbGF0ZV9mbHVzaCh6LHIpO1xuXHR9XG5cblx0dGhpcy5pbmRleCA9IDA7XG5cdHRoaXMubW9kZSA9IElCX0RUUkVFO1xuICAgICAgY2FzZSBJQl9EVFJFRTpcblx0d2hpbGUgKHRydWUpe1xuXHQgIHQgPSB0aGlzLnRhYmxlO1xuXHQgIGlmKCEodGhpcy5pbmRleCA8IDI1OCArICh0ICYgMHgxZikgKyAoKHQgPj4gNSkgJiAweDFmKSkpe1xuXHQgICAgYnJlYWs7XG5cdCAgfVxuXG5cdCAgdmFyIGg7IC8vaW50W11cblx0ICB2YXIgaSwgaiwgYztcblxuXHQgIHQgPSB0aGlzLmJiWzBdO1xuXG5cdCAgd2hpbGUoazwodCkpe1xuXHQgICAgaWYobiE9MCl7XG5cdCAgICAgIHI9Wl9PSztcblx0ICAgIH1cblx0ICAgIGVsc2V7XG5cdCAgICAgIHRoaXMuYml0Yj1iOyB0aGlzLmJpdGs9azsgXG5cdCAgICAgIHouYXZhaWxfaW49bjtcblx0ICAgICAgei50b3RhbF9pbis9cC16Lm5leHRfaW5faW5kZXg7ei5uZXh0X2luX2luZGV4PXA7XG5cdCAgICAgIHRoaXMud3JpdGU9cTtcblx0ICAgICAgcmV0dXJuIHRoaXMuaW5mbGF0ZV9mbHVzaCh6LHIpO1xuXHQgICAgfTtcblx0ICAgIG4tLTtcblx0ICAgIGJ8PSh6Lm5leHRfaW5bcCsrXSYweGZmKTw8aztcblx0ICAgIGsrPTg7XG5cdCAgfVxuXG4vL1x0ICBpZiAodGhpcy50YlswXT09LTEpe1xuLy8gICAgICAgICAgICBkbG9nKFwibnVsbC4uLlwiKTtcbi8vXHQgIH1cblxuXHQgIHQ9dGhpcy5odWZ0c1sodGhpcy50YlswXSsoYiAmIGluZmxhdGVfbWFza1t0XSkpKjMrMV07XG5cdCAgYz10aGlzLmh1ZnRzWyh0aGlzLnRiWzBdKyhiICYgaW5mbGF0ZV9tYXNrW3RdKSkqMysyXTtcblxuXHQgIGlmIChjIDwgMTYpe1xuXHQgICAgYj4+Pj0odCk7ay09KHQpO1xuXHQgICAgdGhpcy5ibGVuc1t0aGlzLmluZGV4KytdID0gYztcblx0ICB9XG5cdCAgZWxzZSB7IC8vIGMgPT0gMTYuLjE4XG5cdCAgICBpID0gYyA9PSAxOCA/IDcgOiBjIC0gMTQ7XG5cdCAgICBqID0gYyA9PSAxOCA/IDExIDogMztcblxuXHQgICAgd2hpbGUoazwodCtpKSl7XG5cdCAgICAgIGlmKG4hPTApe1xuXHRcdHI9Wl9PSztcblx0ICAgICAgfVxuXHQgICAgICBlbHNle1xuXHRcdHRoaXMuYml0Yj1iOyB0aGlzLmJpdGs9azsgXG5cdFx0ei5hdmFpbF9pbj1uO1xuXHRcdHoudG90YWxfaW4rPXAtei5uZXh0X2luX2luZGV4O3oubmV4dF9pbl9pbmRleD1wO1xuXHRcdHRoaXMud3JpdGU9cTtcblx0XHRyZXR1cm4gdGhpcy5pbmZsYXRlX2ZsdXNoKHoscik7XG5cdCAgICAgIH07XG5cdCAgICAgIG4tLTtcblx0ICAgICAgYnw9KHoubmV4dF9pbltwKytdJjB4ZmYpPDxrO1xuXHQgICAgICBrKz04O1xuXHQgICAgfVxuXG5cdCAgICBiPj4+PSh0KTtrLT0odCk7XG5cblx0ICAgIGogKz0gKGIgJiBpbmZsYXRlX21hc2tbaV0pO1xuXG5cdCAgICBiPj4+PShpKTtrLT0oaSk7XG5cblx0ICAgIGkgPSB0aGlzLmluZGV4O1xuXHQgICAgdCA9IHRoaXMudGFibGU7XG5cdCAgICBpZiAoaSArIGogPiAyNTggKyAodCAmIDB4MWYpICsgKCh0ID4+IDUpICYgMHgxZikgfHxcblx0XHQoYyA9PSAxNiAmJiBpIDwgMSkpe1xuXHQgICAgICB0aGlzLmJsZW5zPW51bGw7XG5cdCAgICAgIHRoaXMubW9kZSA9IElCX0JBRDtcblx0ICAgICAgei5tc2cgPSBcImludmFsaWQgYml0IGxlbmd0aCByZXBlYXRcIjtcblx0ICAgICAgciA9IFpfREFUQV9FUlJPUjtcblxuXHQgICAgICB0aGlzLmJpdGI9YjsgdGhpcy5iaXRrPWs7IFxuXHQgICAgICB6LmF2YWlsX2luPW47ei50b3RhbF9pbis9cC16Lm5leHRfaW5faW5kZXg7ei5uZXh0X2luX2luZGV4PXA7XG5cdCAgICAgIHRoaXMud3JpdGU9cTtcblx0ICAgICAgcmV0dXJuIHRoaXMuaW5mbGF0ZV9mbHVzaCh6LHIpO1xuXHQgICAgfVxuXG5cdCAgICBjID0gYyA9PSAxNiA/IHRoaXMuYmxlbnNbaS0xXSA6IDA7XG5cdCAgICBkb3tcblx0ICAgICAgdGhpcy5ibGVuc1tpKytdID0gYztcblx0ICAgIH1cblx0ICAgIHdoaWxlICgtLWohPTApO1xuXHQgICAgdGhpcy5pbmRleCA9IGk7XG5cdCAgfVxuXHR9XG5cblx0dGhpcy50YlswXT0tMTtcblx0e1xuXHQgICAgdmFyIGJsPW5ldyBJbnQzMkFycmF5KDEpO1xuXHQgICAgdmFyIGJkPW5ldyBJbnQzMkFycmF5KDEpO1xuXHQgICAgdmFyIHRsPW5ldyBJbnQzMkFycmF5KDEpO1xuXHQgICAgdmFyIHRkPW5ldyBJbnQzMkFycmF5KDEpO1xuXHQgICAgYmxbMF0gPSA5OyAgICAgICAgIC8vIG11c3QgYmUgPD0gOSBmb3IgbG9va2FoZWFkIGFzc3VtcHRpb25zXG5cdCAgICBiZFswXSA9IDY7ICAgICAgICAgLy8gbXVzdCBiZSA8PSA5IGZvciBsb29rYWhlYWQgYXNzdW1wdGlvbnNcblxuXHQgICAgdCA9IHRoaXMudGFibGU7XG5cdCAgICB0ID0gdGhpcy5pbmZ0cmVlLmluZmxhdGVfdHJlZXNfZHluYW1pYygyNTcgKyAodCAmIDB4MWYpLCBcblx0XHRcdFx0XHQgICAgICAxICsgKCh0ID4+IDUpICYgMHgxZiksXG5cdFx0XHRcdFx0ICAgICAgdGhpcy5ibGVucywgYmwsIGJkLCB0bCwgdGQsIHRoaXMuaHVmdHMsIHopO1xuXG5cdCAgICBpZiAodCAhPSBaX09LKXtcblx0ICAgICAgICBpZiAodCA9PSBaX0RBVEFfRVJST1Ipe1xuXHQgICAgICAgICAgICB0aGlzLmJsZW5zPW51bGw7XG5cdCAgICAgICAgICAgIHRoaXMubW9kZSA9IEJBRDtcblx0ICAgICAgICB9XG5cdCAgICAgICAgciA9IHQ7XG5cblx0ICAgICAgICB0aGlzLmJpdGI9YjsgdGhpcy5iaXRrPWs7IFxuXHQgICAgICAgIHouYXZhaWxfaW49bjt6LnRvdGFsX2luKz1wLXoubmV4dF9pbl9pbmRleDt6Lm5leHRfaW5faW5kZXg9cDtcblx0ICAgICAgICB0aGlzLndyaXRlPXE7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuaW5mbGF0ZV9mbHVzaCh6LHIpO1xuXHQgICAgfVxuXHQgICAgdGhpcy5jb2Rlcy5pbml0KGJsWzBdLCBiZFswXSwgdGhpcy5odWZ0cywgdGxbMF0sIHRoaXMuaHVmdHMsIHRkWzBdLCB6KTtcblx0fVxuXHR0aGlzLm1vZGUgPSBJQl9DT0RFUztcbiAgICAgIGNhc2UgSUJfQ09ERVM6XG5cdHRoaXMuYml0Yj1iOyB0aGlzLmJpdGs9aztcblx0ei5hdmFpbF9pbj1uOyB6LnRvdGFsX2luKz1wLXoubmV4dF9pbl9pbmRleDt6Lm5leHRfaW5faW5kZXg9cDtcblx0dGhpcy53cml0ZT1xO1xuXG5cdGlmICgociA9IHRoaXMuY29kZXMucHJvYyh0aGlzLCB6LCByKSkgIT0gWl9TVFJFQU1fRU5EKXtcblx0ICByZXR1cm4gdGhpcy5pbmZsYXRlX2ZsdXNoKHosIHIpO1xuXHR9XG5cdHIgPSBaX09LO1xuXHR0aGlzLmNvZGVzLmZyZWUoeik7XG5cblx0cD16Lm5leHRfaW5faW5kZXg7IG49ei5hdmFpbF9pbjtiPXRoaXMuYml0YjtrPXRoaXMuYml0aztcblx0cT10aGlzLndyaXRlO20gPSAocSA8IHRoaXMucmVhZCA/IHRoaXMucmVhZC1xLTEgOiB0aGlzLmVuZC1xKTtcblxuXHRpZiAodGhpcy5sYXN0PT0wKXtcblx0ICB0aGlzLm1vZGUgPSBJQl9UWVBFO1xuXHQgIGJyZWFrO1xuXHR9XG5cdHRoaXMubW9kZSA9IElCX0RSWTtcbiAgICAgIGNhc2UgSUJfRFJZOlxuXHR0aGlzLndyaXRlPXE7IFxuXHRyID0gdGhpcy5pbmZsYXRlX2ZsdXNoKHosIHIpOyBcblx0cT10aGlzLndyaXRlOyBtID0gKHEgPCB0aGlzLnJlYWQgPyB0aGlzLnJlYWQtcS0xIDogdGhpcy5lbmQtcSk7XG5cdGlmICh0aGlzLnJlYWQgIT0gdGhpcy53cml0ZSl7XG5cdCAgdGhpcy5iaXRiPWI7IHRoaXMuYml0az1rOyBcblx0ICB6LmF2YWlsX2luPW47ei50b3RhbF9pbis9cC16Lm5leHRfaW5faW5kZXg7ei5uZXh0X2luX2luZGV4PXA7XG5cdCAgdGhpcy53cml0ZT1xO1xuXHQgIHJldHVybiB0aGlzLmluZmxhdGVfZmx1c2goeiwgcik7XG5cdH1cblx0bW9kZSA9IERPTkU7XG4gICAgICBjYXNlIElCX0RPTkU6XG5cdHIgPSBaX1NUUkVBTV9FTkQ7XG5cblx0dGhpcy5iaXRiPWI7IHRoaXMuYml0az1rOyBcblx0ei5hdmFpbF9pbj1uO3oudG90YWxfaW4rPXAtei5uZXh0X2luX2luZGV4O3oubmV4dF9pbl9pbmRleD1wO1xuXHR0aGlzLndyaXRlPXE7XG5cdHJldHVybiB0aGlzLmluZmxhdGVfZmx1c2goeiwgcik7XG4gICAgICBjYXNlIElCX0JBRDpcblx0ciA9IFpfREFUQV9FUlJPUjtcblxuXHR0aGlzLmJpdGI9YjsgdGhpcy5iaXRrPWs7IFxuXHR6LmF2YWlsX2luPW47ei50b3RhbF9pbis9cC16Lm5leHRfaW5faW5kZXg7ei5uZXh0X2luX2luZGV4PXA7XG5cdHRoaXMud3JpdGU9cTtcblx0cmV0dXJuIHRoaXMuaW5mbGF0ZV9mbHVzaCh6LCByKTtcblxuICAgICAgZGVmYXVsdDpcblx0ciA9IFpfU1RSRUFNX0VSUk9SO1xuXG5cdHRoaXMuYml0Yj1iOyB0aGlzLmJpdGs9azsgXG5cdHouYXZhaWxfaW49bjt6LnRvdGFsX2luKz1wLXoubmV4dF9pbl9pbmRleDt6Lm5leHRfaW5faW5kZXg9cDtcblx0dGhpcy53cml0ZT1xO1xuXHRyZXR1cm4gdGhpcy5pbmZsYXRlX2ZsdXNoKHosIHIpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG5JbmZCbG9ja3MucHJvdG90eXBlLmZyZWUgPSBmdW5jdGlvbih6KXtcbiAgICB0aGlzLnJlc2V0KHosIG51bGwpO1xuICAgIHRoaXMud2luZG93PW51bGw7XG4gICAgdGhpcy5odWZ0cz1udWxsO1xufVxuXG5JbmZCbG9ja3MucHJvdG90eXBlLnNldF9kaWN0aW9uYXJ5ID0gZnVuY3Rpb24oZCwgc3RhcnQsIG4pe1xuICAgIGFycmF5Q29weShkLCBzdGFydCwgd2luZG93LCAwLCBuKTtcbiAgICB0aGlzLnJlYWQgPSB0aGlzLndyaXRlID0gbjtcbn1cblxuICAvLyBSZXR1cm5zIHRydWUgaWYgaW5mbGF0ZSBpcyBjdXJyZW50bHkgYXQgdGhlIGVuZCBvZiBhIGJsb2NrIGdlbmVyYXRlZFxuICAvLyBieSBaX1NZTkNfRkxVU0ggb3IgWl9GVUxMX0ZMVVNILiBcbkluZkJsb2Nrcy5wcm90b3R5cGUuc3luY19wb2ludCA9IGZ1bmN0aW9uKCl7XG4gICAgcmV0dXJuIHRoaXMubW9kZSA9PSBJQl9MRU5TO1xufVxuXG4gIC8vIGNvcHkgYXMgbXVjaCBhcyBwb3NzaWJsZSBmcm9tIHRoZSBzbGlkaW5nIHdpbmRvdyB0byB0aGUgb3V0cHV0IGFyZWFcbkluZkJsb2Nrcy5wcm90b3R5cGUuaW5mbGF0ZV9mbHVzaCA9IGZ1bmN0aW9uKHosIHIpe1xuICAgIHZhciBuO1xuICAgIHZhciBwO1xuICAgIHZhciBxO1xuXG4gICAgLy8gbG9jYWwgY29waWVzIG9mIHNvdXJjZSBhbmQgZGVzdGluYXRpb24gcG9pbnRlcnNcbiAgICBwID0gei5uZXh0X291dF9pbmRleDtcbiAgICBxID0gdGhpcy5yZWFkO1xuXG4gICAgLy8gY29tcHV0ZSBudW1iZXIgb2YgYnl0ZXMgdG8gY29weSBhcyBmYXIgYXMgZW5kIG9mIHdpbmRvd1xuICAgIG4gPSAoKHEgPD0gdGhpcy53cml0ZSA/IHRoaXMud3JpdGUgOiB0aGlzLmVuZCkgLSBxKTtcbiAgICBpZiAobiA+IHouYXZhaWxfb3V0KSBuID0gei5hdmFpbF9vdXQ7XG4gICAgaWYgKG4hPTAgJiYgciA9PSBaX0JVRl9FUlJPUikgciA9IFpfT0s7XG5cbiAgICAvLyB1cGRhdGUgY291bnRlcnNcbiAgICB6LmF2YWlsX291dCAtPSBuO1xuICAgIHoudG90YWxfb3V0ICs9IG47XG5cbiAgICAvLyB1cGRhdGUgY2hlY2sgaW5mb3JtYXRpb25cbiAgICBpZih0aGlzLmNoZWNrZm4gIT0gbnVsbClcbiAgICAgIHouYWRsZXI9dGhpcy5jaGVjaz16Ll9hZGxlci5hZGxlcjMyKHRoaXMuY2hlY2ssIHRoaXMud2luZG93LCBxLCBuKTtcblxuICAgIC8vIGNvcHkgYXMgZmFyIGFzIGVuZCBvZiB3aW5kb3dcbiAgICBhcnJheUNvcHkodGhpcy53aW5kb3csIHEsIHoubmV4dF9vdXQsIHAsIG4pO1xuICAgIHAgKz0gbjtcbiAgICBxICs9IG47XG5cbiAgICAvLyBzZWUgaWYgbW9yZSB0byBjb3B5IGF0IGJlZ2lubmluZyBvZiB3aW5kb3dcbiAgICBpZiAocSA9PSB0aGlzLmVuZCl7XG4gICAgICAvLyB3cmFwIHBvaW50ZXJzXG4gICAgICBxID0gMDtcbiAgICAgIGlmICh0aGlzLndyaXRlID09IHRoaXMuZW5kKVxuICAgICAgICB0aGlzLndyaXRlID0gMDtcblxuICAgICAgLy8gY29tcHV0ZSBieXRlcyB0byBjb3B5XG4gICAgICBuID0gdGhpcy53cml0ZSAtIHE7XG4gICAgICBpZiAobiA+IHouYXZhaWxfb3V0KSBuID0gei5hdmFpbF9vdXQ7XG4gICAgICBpZiAobiE9MCAmJiByID09IFpfQlVGX0VSUk9SKSByID0gWl9PSztcblxuICAgICAgLy8gdXBkYXRlIGNvdW50ZXJzXG4gICAgICB6LmF2YWlsX291dCAtPSBuO1xuICAgICAgei50b3RhbF9vdXQgKz0gbjtcblxuICAgICAgLy8gdXBkYXRlIGNoZWNrIGluZm9ybWF0aW9uXG4gICAgICBpZih0aGlzLmNoZWNrZm4gIT0gbnVsbClcblx0ei5hZGxlcj10aGlzLmNoZWNrPXouX2FkbGVyLmFkbGVyMzIodGhpcy5jaGVjaywgdGhpcy53aW5kb3csIHEsIG4pO1xuXG4gICAgICAvLyBjb3B5XG4gICAgICBhcnJheUNvcHkodGhpcy53aW5kb3csIHEsIHoubmV4dF9vdXQsIHAsIG4pO1xuICAgICAgcCArPSBuO1xuICAgICAgcSArPSBuO1xuICAgIH1cblxuICAgIC8vIHVwZGF0ZSBwb2ludGVyc1xuICAgIHoubmV4dF9vdXRfaW5kZXggPSBwO1xuICAgIHRoaXMucmVhZCA9IHE7XG5cbiAgICAvLyBkb25lXG4gICAgcmV0dXJuIHI7XG4gIH1cblxuLy9cbi8vIEluZkNvZGVzLmphdmFcbi8vXG5cbnZhciBJQ19TVEFSVD0wOyAgLy8geDogc2V0IHVwIGZvciBMRU5cbnZhciBJQ19MRU49MTsgICAgLy8gaTogZ2V0IGxlbmd0aC9saXRlcmFsL2VvYiBuZXh0XG52YXIgSUNfTEVORVhUPTI7IC8vIGk6IGdldHRpbmcgbGVuZ3RoIGV4dHJhIChoYXZlIGJhc2UpXG52YXIgSUNfRElTVD0zOyAgIC8vIGk6IGdldCBkaXN0YW5jZSBuZXh0XG52YXIgSUNfRElTVEVYVD00Oy8vIGk6IGdldHRpbmcgZGlzdGFuY2UgZXh0cmFcbnZhciBJQ19DT1BZPTU7ICAgLy8gbzogY29weWluZyBieXRlcyBpbiB3aW5kb3csIHdhaXRpbmcgZm9yIHNwYWNlXG52YXIgSUNfTElUPTY7ICAgIC8vIG86IGdvdCBsaXRlcmFsLCB3YWl0aW5nIGZvciBvdXRwdXQgc3BhY2VcbnZhciBJQ19XQVNIPTc7ICAgLy8gbzogZ290IGVvYiwgcG9zc2libHkgc3RpbGwgb3V0cHV0IHdhaXRpbmdcbnZhciBJQ19FTkQ9ODsgICAgLy8geDogZ290IGVvYiBhbmQgYWxsIGRhdGEgZmx1c2hlZFxudmFyIElDX0JBRENPREU9OTsvLyB4OiBnb3QgZXJyb3JcblxuZnVuY3Rpb24gSW5mQ29kZXMoKSB7XG59XG5cbkluZkNvZGVzLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24oYmwsIGJkLCB0bCwgdGxfaW5kZXgsIHRkLCB0ZF9pbmRleCwgeikge1xuICAgIHRoaXMubW9kZT1JQ19TVEFSVDtcbiAgICB0aGlzLmxiaXRzPWJsO1xuICAgIHRoaXMuZGJpdHM9YmQ7XG4gICAgdGhpcy5sdHJlZT10bDtcbiAgICB0aGlzLmx0cmVlX2luZGV4PXRsX2luZGV4O1xuICAgIHRoaXMuZHRyZWUgPSB0ZDtcbiAgICB0aGlzLmR0cmVlX2luZGV4PXRkX2luZGV4O1xuICAgIHRoaXMudHJlZT1udWxsO1xufVxuXG5JbmZDb2Rlcy5wcm90b3R5cGUucHJvYyA9IGZ1bmN0aW9uKHMsIHosIHIpeyBcbiAgICB2YXIgajsgICAgICAgICAgICAgIC8vIHRlbXBvcmFyeSBzdG9yYWdlXG4gICAgdmFyIHQ7ICAgICAgICAgICAgICAvLyB0ZW1wb3JhcnkgcG9pbnRlciAoaW50W10pXG4gICAgdmFyIHRpbmRleDsgICAgICAgICAvLyB0ZW1wb3JhcnkgcG9pbnRlclxuICAgIHZhciBlOyAgICAgICAgICAgICAgLy8gZXh0cmEgYml0cyBvciBvcGVyYXRpb25cbiAgICB2YXIgYj0wOyAgICAgICAgICAgIC8vIGJpdCBidWZmZXJcbiAgICB2YXIgaz0wOyAgICAgICAgICAgIC8vIGJpdHMgaW4gYml0IGJ1ZmZlclxuICAgIHZhciBwPTA7ICAgICAgICAgICAgLy8gaW5wdXQgZGF0YSBwb2ludGVyXG4gICAgdmFyIG47ICAgICAgICAgICAgICAvLyBieXRlcyBhdmFpbGFibGUgdGhlcmVcbiAgICB2YXIgcTsgICAgICAgICAgICAgIC8vIG91dHB1dCB3aW5kb3cgd3JpdGUgcG9pbnRlclxuICAgIHZhciBtOyAgICAgICAgICAgICAgLy8gYnl0ZXMgdG8gZW5kIG9mIHdpbmRvdyBvciByZWFkIHBvaW50ZXJcbiAgICB2YXIgZjsgICAgICAgICAgICAgIC8vIHBvaW50ZXIgdG8gY29weSBzdHJpbmdzIGZyb21cblxuICAgIC8vIGNvcHkgaW5wdXQvb3V0cHV0IGluZm9ybWF0aW9uIHRvIGxvY2FscyAoVVBEQVRFIG1hY3JvIHJlc3RvcmVzKVxuICAgIHA9ei5uZXh0X2luX2luZGV4O249ei5hdmFpbF9pbjtiPXMuYml0YjtrPXMuYml0aztcbiAgICBxPXMud3JpdGU7bT1xPHMucmVhZD9zLnJlYWQtcS0xOnMuZW5kLXE7XG5cbiAgICAvLyBwcm9jZXNzIGlucHV0IGFuZCBvdXRwdXQgYmFzZWQgb24gY3VycmVudCBzdGF0ZVxuICAgIHdoaWxlICh0cnVlKXtcbiAgICAgIHN3aXRjaCAodGhpcy5tb2RlKXtcblx0Ly8gd2FpdGluZyBmb3IgXCJpOlwiPWlucHV0LCBcIm86XCI9b3V0cHV0LCBcIng6XCI9bm90aGluZ1xuICAgICAgY2FzZSBJQ19TVEFSVDogICAgICAgICAvLyB4OiBzZXQgdXAgZm9yIExFTlxuXHRpZiAobSA+PSAyNTggJiYgbiA+PSAxMCl7XG5cblx0ICBzLmJpdGI9YjtzLmJpdGs9aztcblx0ICB6LmF2YWlsX2luPW47ei50b3RhbF9pbis9cC16Lm5leHRfaW5faW5kZXg7ei5uZXh0X2luX2luZGV4PXA7XG5cdCAgcy53cml0ZT1xO1xuXHQgIHIgPSB0aGlzLmluZmxhdGVfZmFzdCh0aGlzLmxiaXRzLCB0aGlzLmRiaXRzLCBcblx0XHRcdCAgIHRoaXMubHRyZWUsIHRoaXMubHRyZWVfaW5kZXgsIFxuXHRcdFx0ICAgdGhpcy5kdHJlZSwgdGhpcy5kdHJlZV9pbmRleCxcblx0XHRcdCAgIHMsIHopO1xuXG5cdCAgcD16Lm5leHRfaW5faW5kZXg7bj16LmF2YWlsX2luO2I9cy5iaXRiO2s9cy5iaXRrO1xuXHQgIHE9cy53cml0ZTttPXE8cy5yZWFkP3MucmVhZC1xLTE6cy5lbmQtcTtcblxuXHQgIGlmIChyICE9IFpfT0spe1xuXHQgICAgdGhpcy5tb2RlID0gciA9PSBaX1NUUkVBTV9FTkQgPyBJQ19XQVNIIDogSUNfQkFEQ09ERTtcblx0ICAgIGJyZWFrO1xuXHQgIH1cblx0fVxuXHR0aGlzLm5lZWQgPSB0aGlzLmxiaXRzO1xuXHR0aGlzLnRyZWUgPSB0aGlzLmx0cmVlO1xuXHR0aGlzLnRyZWVfaW5kZXg9dGhpcy5sdHJlZV9pbmRleDtcblxuXHR0aGlzLm1vZGUgPSBJQ19MRU47XG4gICAgICBjYXNlIElDX0xFTjogICAgICAgICAgIC8vIGk6IGdldCBsZW5ndGgvbGl0ZXJhbC9lb2IgbmV4dFxuXHRqID0gdGhpcy5uZWVkO1xuXG5cdHdoaWxlKGs8KGopKXtcblx0ICBpZihuIT0wKXI9Wl9PSztcblx0ICBlbHNle1xuXG5cdCAgICBzLmJpdGI9YjtzLmJpdGs9aztcblx0ICAgIHouYXZhaWxfaW49bjt6LnRvdGFsX2luKz1wLXoubmV4dF9pbl9pbmRleDt6Lm5leHRfaW5faW5kZXg9cDtcblx0ICAgIHMud3JpdGU9cTtcblx0ICAgIHJldHVybiBzLmluZmxhdGVfZmx1c2goeixyKTtcblx0ICB9XG5cdCAgbi0tO1xuXHQgIGJ8PSh6Lm5leHRfaW5bcCsrXSYweGZmKTw8aztcblx0ICBrKz04O1xuXHR9XG5cblx0dGluZGV4PSh0aGlzLnRyZWVfaW5kZXgrKGImaW5mbGF0ZV9tYXNrW2pdKSkqMztcblxuXHRiPj4+PSh0aGlzLnRyZWVbdGluZGV4KzFdKTtcblx0ay09KHRoaXMudHJlZVt0aW5kZXgrMV0pO1xuXG5cdGU9dGhpcy50cmVlW3RpbmRleF07XG5cblx0aWYoZSA9PSAwKXsgICAgICAgICAgICAgICAvLyBsaXRlcmFsXG5cdCAgdGhpcy5saXQgPSB0aGlzLnRyZWVbdGluZGV4KzJdO1xuXHQgIHRoaXMubW9kZSA9IElDX0xJVDtcblx0ICBicmVhaztcblx0fVxuXHRpZigoZSAmIDE2KSE9MCApeyAgICAgICAgICAvLyBsZW5ndGhcblx0ICB0aGlzLmdldCA9IGUgJiAxNTtcblx0ICB0aGlzLmxlbiA9IHRoaXMudHJlZVt0aW5kZXgrMl07XG5cdCAgdGhpcy5tb2RlID0gSUNfTEVORVhUO1xuXHQgIGJyZWFrO1xuXHR9XG5cdGlmICgoZSAmIDY0KSA9PSAwKXsgICAgICAgIC8vIG5leHQgdGFibGVcblx0ICB0aGlzLm5lZWQgPSBlO1xuXHQgIHRoaXMudHJlZV9pbmRleCA9IHRpbmRleC8zICsgdGhpcy50cmVlW3RpbmRleCsyXTtcblx0ICBicmVhaztcblx0fVxuXHRpZiAoKGUgJiAzMikhPTApeyAgICAgICAgICAgICAgIC8vIGVuZCBvZiBibG9ja1xuXHQgIHRoaXMubW9kZSA9IElDX1dBU0g7XG5cdCAgYnJlYWs7XG5cdH1cblx0dGhpcy5tb2RlID0gSUNfQkFEQ09ERTsgICAgICAgIC8vIGludmFsaWQgY29kZVxuXHR6Lm1zZyA9IFwiaW52YWxpZCBsaXRlcmFsL2xlbmd0aCBjb2RlXCI7XG5cdHIgPSBaX0RBVEFfRVJST1I7XG5cblx0cy5iaXRiPWI7cy5iaXRrPWs7XG5cdHouYXZhaWxfaW49bjt6LnRvdGFsX2luKz1wLXoubmV4dF9pbl9pbmRleDt6Lm5leHRfaW5faW5kZXg9cDtcblx0cy53cml0ZT1xO1xuXHRyZXR1cm4gcy5pbmZsYXRlX2ZsdXNoKHoscik7XG5cbiAgICAgIGNhc2UgSUNfTEVORVhUOiAgICAgICAgLy8gaTogZ2V0dGluZyBsZW5ndGggZXh0cmEgKGhhdmUgYmFzZSlcblx0aiA9IHRoaXMuZ2V0O1xuXG5cdHdoaWxlKGs8KGopKXtcblx0ICBpZihuIT0wKXI9Wl9PSztcblx0ICBlbHNle1xuXG5cdCAgICBzLmJpdGI9YjtzLmJpdGs9aztcblx0ICAgIHouYXZhaWxfaW49bjt6LnRvdGFsX2luKz1wLXoubmV4dF9pbl9pbmRleDt6Lm5leHRfaW5faW5kZXg9cDtcblx0ICAgIHMud3JpdGU9cTtcblx0ICAgIHJldHVybiBzLmluZmxhdGVfZmx1c2goeixyKTtcblx0ICB9XG5cdCAgbi0tOyBifD0oei5uZXh0X2luW3ArK10mMHhmZik8PGs7XG5cdCAgays9ODtcblx0fVxuXG5cdHRoaXMubGVuICs9IChiICYgaW5mbGF0ZV9tYXNrW2pdKTtcblxuXHRiPj49ajtcblx0ay09ajtcblxuXHR0aGlzLm5lZWQgPSB0aGlzLmRiaXRzO1xuXHR0aGlzLnRyZWUgPSB0aGlzLmR0cmVlO1xuXHR0aGlzLnRyZWVfaW5kZXggPSB0aGlzLmR0cmVlX2luZGV4O1xuXHR0aGlzLm1vZGUgPSBJQ19ESVNUO1xuICAgICAgY2FzZSBJQ19ESVNUOiAgICAgICAgICAvLyBpOiBnZXQgZGlzdGFuY2UgbmV4dFxuXHRqID0gdGhpcy5uZWVkO1xuXG5cdHdoaWxlKGs8KGopKXtcblx0ICBpZihuIT0wKXI9Wl9PSztcblx0ICBlbHNle1xuXG5cdCAgICBzLmJpdGI9YjtzLmJpdGs9aztcblx0ICAgIHouYXZhaWxfaW49bjt6LnRvdGFsX2luKz1wLXoubmV4dF9pbl9pbmRleDt6Lm5leHRfaW5faW5kZXg9cDtcblx0ICAgIHMud3JpdGU9cTtcblx0ICAgIHJldHVybiBzLmluZmxhdGVfZmx1c2goeixyKTtcblx0ICB9XG5cdCAgbi0tOyBifD0oei5uZXh0X2luW3ArK10mMHhmZik8PGs7XG5cdCAgays9ODtcblx0fVxuXG5cdHRpbmRleD0odGhpcy50cmVlX2luZGV4KyhiICYgaW5mbGF0ZV9tYXNrW2pdKSkqMztcblxuXHRiPj49dGhpcy50cmVlW3RpbmRleCsxXTtcblx0ay09dGhpcy50cmVlW3RpbmRleCsxXTtcblxuXHRlID0gKHRoaXMudHJlZVt0aW5kZXhdKTtcblx0aWYoKGUgJiAxNikhPTApeyAgICAgICAgICAgICAgIC8vIGRpc3RhbmNlXG5cdCAgdGhpcy5nZXQgPSBlICYgMTU7XG5cdCAgdGhpcy5kaXN0ID0gdGhpcy50cmVlW3RpbmRleCsyXTtcblx0ICB0aGlzLm1vZGUgPSBJQ19ESVNURVhUO1xuXHQgIGJyZWFrO1xuXHR9XG5cdGlmICgoZSAmIDY0KSA9PSAwKXsgICAgICAgIC8vIG5leHQgdGFibGVcblx0ICB0aGlzLm5lZWQgPSBlO1xuXHQgIHRoaXMudHJlZV9pbmRleCA9IHRpbmRleC8zICsgdGhpcy50cmVlW3RpbmRleCsyXTtcblx0ICBicmVhaztcblx0fVxuXHR0aGlzLm1vZGUgPSBJQ19CQURDT0RFOyAgICAgICAgLy8gaW52YWxpZCBjb2RlXG5cdHoubXNnID0gXCJpbnZhbGlkIGRpc3RhbmNlIGNvZGVcIjtcblx0ciA9IFpfREFUQV9FUlJPUjtcblxuXHRzLmJpdGI9YjtzLmJpdGs9aztcblx0ei5hdmFpbF9pbj1uO3oudG90YWxfaW4rPXAtei5uZXh0X2luX2luZGV4O3oubmV4dF9pbl9pbmRleD1wO1xuXHRzLndyaXRlPXE7XG5cdHJldHVybiBzLmluZmxhdGVfZmx1c2goeixyKTtcblxuICAgICAgY2FzZSBJQ19ESVNURVhUOiAgICAgICAvLyBpOiBnZXR0aW5nIGRpc3RhbmNlIGV4dHJhXG5cdGogPSB0aGlzLmdldDtcblxuXHR3aGlsZShrPChqKSl7XG5cdCAgaWYobiE9MClyPVpfT0s7XG5cdCAgZWxzZXtcblxuXHQgICAgcy5iaXRiPWI7cy5iaXRrPWs7XG5cdCAgICB6LmF2YWlsX2luPW47ei50b3RhbF9pbis9cC16Lm5leHRfaW5faW5kZXg7ei5uZXh0X2luX2luZGV4PXA7XG5cdCAgICBzLndyaXRlPXE7XG5cdCAgICByZXR1cm4gcy5pbmZsYXRlX2ZsdXNoKHoscik7XG5cdCAgfVxuXHQgIG4tLTsgYnw9KHoubmV4dF9pbltwKytdJjB4ZmYpPDxrO1xuXHQgIGsrPTg7XG5cdH1cblxuXHR0aGlzLmRpc3QgKz0gKGIgJiBpbmZsYXRlX21hc2tbal0pO1xuXG5cdGI+Pj1qO1xuXHRrLT1qO1xuXG5cdHRoaXMubW9kZSA9IElDX0NPUFk7XG4gICAgICBjYXNlIElDX0NPUFk6ICAgICAgICAgIC8vIG86IGNvcHlpbmcgYnl0ZXMgaW4gd2luZG93LCB3YWl0aW5nIGZvciBzcGFjZVxuICAgICAgICBmID0gcSAtIHRoaXMuZGlzdDtcbiAgICAgICAgd2hpbGUoZiA8IDApeyAgICAgLy8gbW9kdWxvIHdpbmRvdyBzaXplLVwid2hpbGVcIiBpbnN0ZWFkXG4gICAgICAgICAgZiArPSBzLmVuZDsgICAgIC8vIG9mIFwiaWZcIiBoYW5kbGVzIGludmFsaWQgZGlzdGFuY2VzXG5cdH1cblx0d2hpbGUgKHRoaXMubGVuIT0wKXtcblxuXHQgIGlmKG09PTApe1xuXHQgICAgaWYocT09cy5lbmQmJnMucmVhZCE9MCl7cT0wO209cTxzLnJlYWQ/cy5yZWFkLXEtMTpzLmVuZC1xO31cblx0ICAgIGlmKG09PTApe1xuXHQgICAgICBzLndyaXRlPXE7IHI9cy5pbmZsYXRlX2ZsdXNoKHoscik7XG5cdCAgICAgIHE9cy53cml0ZTttPXE8cy5yZWFkP3MucmVhZC1xLTE6cy5lbmQtcTtcblxuXHQgICAgICBpZihxPT1zLmVuZCYmcy5yZWFkIT0wKXtxPTA7bT1xPHMucmVhZD9zLnJlYWQtcS0xOnMuZW5kLXE7fVxuXG5cdCAgICAgIGlmKG09PTApe1xuXHRcdHMuYml0Yj1iO3MuYml0az1rO1xuXHRcdHouYXZhaWxfaW49bjt6LnRvdGFsX2luKz1wLXoubmV4dF9pbl9pbmRleDt6Lm5leHRfaW5faW5kZXg9cDtcblx0XHRzLndyaXRlPXE7XG5cdFx0cmV0dXJuIHMuaW5mbGF0ZV9mbHVzaCh6LHIpO1xuXHQgICAgICB9ICBcblx0ICAgIH1cblx0ICB9XG5cblx0ICBzLndpbmRvd1txKytdPXMud2luZG93W2YrK107IG0tLTtcblxuXHQgIGlmIChmID09IHMuZW5kKVxuICAgICAgICAgICAgZiA9IDA7XG5cdCAgdGhpcy5sZW4tLTtcblx0fVxuXHR0aGlzLm1vZGUgPSBJQ19TVEFSVDtcblx0YnJlYWs7XG4gICAgICBjYXNlIElDX0xJVDogICAgICAgICAgIC8vIG86IGdvdCBsaXRlcmFsLCB3YWl0aW5nIGZvciBvdXRwdXQgc3BhY2Vcblx0aWYobT09MCl7XG5cdCAgaWYocT09cy5lbmQmJnMucmVhZCE9MCl7cT0wO209cTxzLnJlYWQ/cy5yZWFkLXEtMTpzLmVuZC1xO31cblx0ICBpZihtPT0wKXtcblx0ICAgIHMud3JpdGU9cTsgcj1zLmluZmxhdGVfZmx1c2goeixyKTtcblx0ICAgIHE9cy53cml0ZTttPXE8cy5yZWFkP3MucmVhZC1xLTE6cy5lbmQtcTtcblxuXHQgICAgaWYocT09cy5lbmQmJnMucmVhZCE9MCl7cT0wO209cTxzLnJlYWQ/cy5yZWFkLXEtMTpzLmVuZC1xO31cblx0ICAgIGlmKG09PTApe1xuXHQgICAgICBzLmJpdGI9YjtzLmJpdGs9aztcblx0ICAgICAgei5hdmFpbF9pbj1uO3oudG90YWxfaW4rPXAtei5uZXh0X2luX2luZGV4O3oubmV4dF9pbl9pbmRleD1wO1xuXHQgICAgICBzLndyaXRlPXE7XG5cdCAgICAgIHJldHVybiBzLmluZmxhdGVfZmx1c2goeixyKTtcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0cj1aX09LO1xuXG5cdHMud2luZG93W3ErK109dGhpcy5saXQ7IG0tLTtcblxuXHR0aGlzLm1vZGUgPSBJQ19TVEFSVDtcblx0YnJlYWs7XG4gICAgICBjYXNlIElDX1dBU0g6ICAgICAgICAgICAvLyBvOiBnb3QgZW9iLCBwb3NzaWJseSBtb3JlIG91dHB1dFxuXHRpZiAoayA+IDcpeyAgICAgICAgLy8gcmV0dXJuIHVudXNlZCBieXRlLCBpZiBhbnlcblx0ICBrIC09IDg7XG5cdCAgbisrO1xuXHQgIHAtLTsgICAgICAgICAgICAgLy8gY2FuIGFsd2F5cyByZXR1cm4gb25lXG5cdH1cblxuXHRzLndyaXRlPXE7IHI9cy5pbmZsYXRlX2ZsdXNoKHoscik7XG5cdHE9cy53cml0ZTttPXE8cy5yZWFkP3MucmVhZC1xLTE6cy5lbmQtcTtcblxuXHRpZiAocy5yZWFkICE9IHMud3JpdGUpe1xuXHQgIHMuYml0Yj1iO3MuYml0az1rO1xuXHQgIHouYXZhaWxfaW49bjt6LnRvdGFsX2luKz1wLXoubmV4dF9pbl9pbmRleDt6Lm5leHRfaW5faW5kZXg9cDtcblx0ICBzLndyaXRlPXE7XG5cdCAgcmV0dXJuIHMuaW5mbGF0ZV9mbHVzaCh6LHIpO1xuXHR9XG5cdHRoaXMubW9kZSA9IElDX0VORDtcbiAgICAgIGNhc2UgSUNfRU5EOlxuXHRyID0gWl9TVFJFQU1fRU5EO1xuXHRzLmJpdGI9YjtzLmJpdGs9aztcblx0ei5hdmFpbF9pbj1uO3oudG90YWxfaW4rPXAtei5uZXh0X2luX2luZGV4O3oubmV4dF9pbl9pbmRleD1wO1xuXHRzLndyaXRlPXE7XG5cdHJldHVybiBzLmluZmxhdGVfZmx1c2goeixyKTtcblxuICAgICAgY2FzZSBJQ19CQURDT0RFOiAgICAgICAvLyB4OiBnb3QgZXJyb3JcblxuXHRyID0gWl9EQVRBX0VSUk9SO1xuXG5cdHMuYml0Yj1iO3MuYml0az1rO1xuXHR6LmF2YWlsX2luPW47ei50b3RhbF9pbis9cC16Lm5leHRfaW5faW5kZXg7ei5uZXh0X2luX2luZGV4PXA7XG5cdHMud3JpdGU9cTtcblx0cmV0dXJuIHMuaW5mbGF0ZV9mbHVzaCh6LHIpO1xuXG4gICAgICBkZWZhdWx0OlxuXHRyID0gWl9TVFJFQU1fRVJST1I7XG5cblx0cy5iaXRiPWI7cy5iaXRrPWs7XG5cdHouYXZhaWxfaW49bjt6LnRvdGFsX2luKz1wLXoubmV4dF9pbl9pbmRleDt6Lm5leHRfaW5faW5kZXg9cDtcblx0cy53cml0ZT1xO1xuXHRyZXR1cm4gcy5pbmZsYXRlX2ZsdXNoKHoscik7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbkluZkNvZGVzLnByb3RvdHlwZS5mcmVlID0gZnVuY3Rpb24oeil7XG4gICAgLy8gIFpGUkVFKHosIGMpO1xufVxuXG4gIC8vIENhbGxlZCB3aXRoIG51bWJlciBvZiBieXRlcyBsZWZ0IHRvIHdyaXRlIGluIHdpbmRvdyBhdCBsZWFzdCAyNThcbiAgLy8gKHRoZSBtYXhpbXVtIHN0cmluZyBsZW5ndGgpIGFuZCBudW1iZXIgb2YgaW5wdXQgYnl0ZXMgYXZhaWxhYmxlXG4gIC8vIGF0IGxlYXN0IHRlbi4gIFRoZSB0ZW4gYnl0ZXMgYXJlIHNpeCBieXRlcyBmb3IgdGhlIGxvbmdlc3QgbGVuZ3RoL1xuICAvLyBkaXN0YW5jZSBwYWlyIHBsdXMgZm91ciBieXRlcyBmb3Igb3ZlcmxvYWRpbmcgdGhlIGJpdCBidWZmZXIuXG5cbkluZkNvZGVzLnByb3RvdHlwZS5pbmZsYXRlX2Zhc3QgPSBmdW5jdGlvbihibCwgYmQsIHRsLCB0bF9pbmRleCwgdGQsIHRkX2luZGV4LCBzLCB6KSB7XG4gICAgdmFyIHQ7ICAgICAgICAgICAgICAgIC8vIHRlbXBvcmFyeSBwb2ludGVyXG4gICAgdmFyICAgdHA7ICAgICAgICAgICAgIC8vIHRlbXBvcmFyeSBwb2ludGVyIChpbnRbXSlcbiAgICB2YXIgdHBfaW5kZXg7ICAgICAgICAgLy8gdGVtcG9yYXJ5IHBvaW50ZXJcbiAgICB2YXIgZTsgICAgICAgICAgICAgICAgLy8gZXh0cmEgYml0cyBvciBvcGVyYXRpb25cbiAgICB2YXIgYjsgICAgICAgICAgICAgICAgLy8gYml0IGJ1ZmZlclxuICAgIHZhciBrOyAgICAgICAgICAgICAgICAvLyBiaXRzIGluIGJpdCBidWZmZXJcbiAgICB2YXIgcDsgICAgICAgICAgICAgICAgLy8gaW5wdXQgZGF0YSBwb2ludGVyXG4gICAgdmFyIG47ICAgICAgICAgICAgICAgIC8vIGJ5dGVzIGF2YWlsYWJsZSB0aGVyZVxuICAgIHZhciBxOyAgICAgICAgICAgICAgICAvLyBvdXRwdXQgd2luZG93IHdyaXRlIHBvaW50ZXJcbiAgICB2YXIgbTsgICAgICAgICAgICAgICAgLy8gYnl0ZXMgdG8gZW5kIG9mIHdpbmRvdyBvciByZWFkIHBvaW50ZXJcbiAgICB2YXIgbWw7ICAgICAgICAgICAgICAgLy8gbWFzayBmb3IgbGl0ZXJhbC9sZW5ndGggdHJlZVxuICAgIHZhciBtZDsgICAgICAgICAgICAgICAvLyBtYXNrIGZvciBkaXN0YW5jZSB0cmVlXG4gICAgdmFyIGM7ICAgICAgICAgICAgICAgIC8vIGJ5dGVzIHRvIGNvcHlcbiAgICB2YXIgZDsgICAgICAgICAgICAgICAgLy8gZGlzdGFuY2UgYmFjayB0byBjb3B5IGZyb21cbiAgICB2YXIgcjsgICAgICAgICAgICAgICAgLy8gY29weSBzb3VyY2UgcG9pbnRlclxuXG4gICAgdmFyIHRwX2luZGV4X3RfMzsgICAgIC8vICh0cF9pbmRleCt0KSozXG5cbiAgICAvLyBsb2FkIGlucHV0LCBvdXRwdXQsIGJpdCB2YWx1ZXNcbiAgICBwPXoubmV4dF9pbl9pbmRleDtuPXouYXZhaWxfaW47Yj1zLmJpdGI7az1zLmJpdGs7XG4gICAgcT1zLndyaXRlO209cTxzLnJlYWQ/cy5yZWFkLXEtMTpzLmVuZC1xO1xuXG4gICAgLy8gaW5pdGlhbGl6ZSBtYXNrc1xuICAgIG1sID0gaW5mbGF0ZV9tYXNrW2JsXTtcbiAgICBtZCA9IGluZmxhdGVfbWFza1tiZF07XG5cbiAgICAvLyBkbyB1bnRpbCBub3QgZW5vdWdoIGlucHV0IG9yIG91dHB1dCBzcGFjZSBmb3IgZmFzdCBsb29wXG4gICAgZG8geyAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYXNzdW1lIGNhbGxlZCB3aXRoIG0gPj0gMjU4ICYmIG4gPj0gMTBcbiAgICAgIC8vIGdldCBsaXRlcmFsL2xlbmd0aCBjb2RlXG4gICAgICB3aGlsZShrPCgyMCkpeyAgICAgICAgICAgICAgLy8gbWF4IGJpdHMgZm9yIGxpdGVyYWwvbGVuZ3RoIGNvZGVcblx0bi0tO1xuXHRifD0oei5uZXh0X2luW3ArK10mMHhmZik8PGs7ays9ODtcbiAgICAgIH1cblxuICAgICAgdD0gYiZtbDtcbiAgICAgIHRwPXRsOyBcbiAgICAgIHRwX2luZGV4PXRsX2luZGV4O1xuICAgICAgdHBfaW5kZXhfdF8zPSh0cF9pbmRleCt0KSozO1xuICAgICAgaWYgKChlID0gdHBbdHBfaW5kZXhfdF8zXSkgPT0gMCl7XG5cdGI+Pj0odHBbdHBfaW5kZXhfdF8zKzFdKTsgay09KHRwW3RwX2luZGV4X3RfMysxXSk7XG5cblx0cy53aW5kb3dbcSsrXSA9IHRwW3RwX2luZGV4X3RfMysyXTtcblx0bS0tO1xuXHRjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGRvIHtcblxuXHRiPj49KHRwW3RwX2luZGV4X3RfMysxXSk7IGstPSh0cFt0cF9pbmRleF90XzMrMV0pO1xuXG5cdGlmKChlJjE2KSE9MCl7XG5cdCAgZSAmPSAxNTtcblx0ICBjID0gdHBbdHBfaW5kZXhfdF8zKzJdICsgKGIgJiBpbmZsYXRlX21hc2tbZV0pO1xuXG5cdCAgYj4+PWU7IGstPWU7XG5cblx0ICAvLyBkZWNvZGUgZGlzdGFuY2UgYmFzZSBvZiBibG9jayB0byBjb3B5XG5cdCAgd2hpbGUoazwoMTUpKXsgICAgICAgICAgIC8vIG1heCBiaXRzIGZvciBkaXN0YW5jZSBjb2RlXG5cdCAgICBuLS07XG5cdCAgICBifD0oei5uZXh0X2luW3ArK10mMHhmZik8PGs7ays9ODtcblx0ICB9XG5cblx0ICB0PSBiJm1kO1xuXHQgIHRwPXRkO1xuXHQgIHRwX2luZGV4PXRkX2luZGV4O1xuICAgICAgICAgIHRwX2luZGV4X3RfMz0odHBfaW5kZXgrdCkqMztcblx0ICBlID0gdHBbdHBfaW5kZXhfdF8zXTtcblxuXHQgIGRvIHtcblxuXHQgICAgYj4+PSh0cFt0cF9pbmRleF90XzMrMV0pOyBrLT0odHBbdHBfaW5kZXhfdF8zKzFdKTtcblxuXHQgICAgaWYoKGUmMTYpIT0wKXtcblx0ICAgICAgLy8gZ2V0IGV4dHJhIGJpdHMgdG8gYWRkIHRvIGRpc3RhbmNlIGJhc2Vcblx0ICAgICAgZSAmPSAxNTtcblx0ICAgICAgd2hpbGUoazwoZSkpeyAgICAgICAgIC8vIGdldCBleHRyYSBiaXRzICh1cCB0byAxMylcblx0XHRuLS07XG5cdFx0Ynw9KHoubmV4dF9pbltwKytdJjB4ZmYpPDxrO2srPTg7XG5cdCAgICAgIH1cblxuXHQgICAgICBkID0gdHBbdHBfaW5kZXhfdF8zKzJdICsgKGImaW5mbGF0ZV9tYXNrW2VdKTtcblxuXHQgICAgICBiPj49KGUpOyBrLT0oZSk7XG5cblx0ICAgICAgLy8gZG8gdGhlIGNvcHlcblx0ICAgICAgbSAtPSBjO1xuXHQgICAgICBpZiAocSA+PSBkKXsgICAgICAgICAgICAgICAgLy8gb2Zmc2V0IGJlZm9yZSBkZXN0XG5cdFx0Ly8gIGp1c3QgY29weVxuXHRcdHI9cS1kO1xuXHRcdGlmKHEtcj4wICYmIDI+KHEtcikpeyAgICAgICAgICAgXG5cdFx0ICBzLndpbmRvd1txKytdPXMud2luZG93W3IrK107IC8vIG1pbmltdW0gY291bnQgaXMgdGhyZWUsXG5cdFx0ICBzLndpbmRvd1txKytdPXMud2luZG93W3IrK107IC8vIHNvIHVucm9sbCBsb29wIGEgbGl0dGxlXG5cdFx0ICBjLT0yO1xuXHRcdH1cblx0XHRlbHNle1xuXHRcdCAgcy53aW5kb3dbcSsrXT1zLndpbmRvd1tyKytdOyAvLyBtaW5pbXVtIGNvdW50IGlzIHRocmVlLFxuXHRcdCAgcy53aW5kb3dbcSsrXT1zLndpbmRvd1tyKytdOyAvLyBzbyB1bnJvbGwgbG9vcCBhIGxpdHRsZVxuXHRcdCAgYy09Mjtcblx0XHR9XG5cdCAgICAgIH1cblx0ICAgICAgZWxzZXsgICAgICAgICAgICAgICAgICAvLyBlbHNlIG9mZnNldCBhZnRlciBkZXN0aW5hdGlvblxuICAgICAgICAgICAgICAgIHI9cS1kO1xuICAgICAgICAgICAgICAgIGRve1xuICAgICAgICAgICAgICAgICAgcis9cy5lbmQ7ICAgICAgICAgIC8vIGZvcmNlIHBvaW50ZXIgaW4gd2luZG93XG4gICAgICAgICAgICAgICAgfXdoaWxlKHI8MCk7ICAgICAgICAgLy8gY292ZXJzIGludmFsaWQgZGlzdGFuY2VzXG5cdFx0ZT1zLmVuZC1yO1xuXHRcdGlmKGM+ZSl7ICAgICAgICAgICAgIC8vIGlmIHNvdXJjZSBjcm9zc2VzLFxuXHRcdCAgYy09ZTsgICAgICAgICAgICAgIC8vIHdyYXBwZWQgY29weVxuXHRcdCAgaWYocS1yPjAgJiYgZT4ocS1yKSl7ICAgICAgICAgICBcblx0XHQgICAgZG97cy53aW5kb3dbcSsrXSA9IHMud2luZG93W3IrK107fVxuXHRcdCAgICB3aGlsZSgtLWUhPTApO1xuXHRcdCAgfVxuXHRcdCAgZWxzZXtcblx0XHQgICAgYXJyYXlDb3B5KHMud2luZG93LCByLCBzLndpbmRvdywgcSwgZSk7XG5cdFx0ICAgIHErPWU7IHIrPWU7IGU9MDtcblx0XHQgIH1cblx0XHQgIHIgPSAwOyAgICAgICAgICAgICAgICAgIC8vIGNvcHkgcmVzdCBmcm9tIHN0YXJ0IG9mIHdpbmRvd1xuXHRcdH1cblxuXHQgICAgICB9XG5cblx0ICAgICAgLy8gY29weSBhbGwgb3Igd2hhdCdzIGxlZnRcbiAgICAgICAgICAgICAgZG97cy53aW5kb3dbcSsrXSA9IHMud2luZG93W3IrK107fVxuXHRcdHdoaWxlKC0tYyE9MCk7XG5cdCAgICAgIGJyZWFrO1xuXHQgICAgfVxuXHQgICAgZWxzZSBpZigoZSY2NCk9PTApe1xuXHQgICAgICB0Kz10cFt0cF9pbmRleF90XzMrMl07XG5cdCAgICAgIHQrPShiJmluZmxhdGVfbWFza1tlXSk7XG5cdCAgICAgIHRwX2luZGV4X3RfMz0odHBfaW5kZXgrdCkqMztcblx0ICAgICAgZT10cFt0cF9pbmRleF90XzNdO1xuXHQgICAgfVxuXHQgICAgZWxzZXtcblx0ICAgICAgei5tc2cgPSBcImludmFsaWQgZGlzdGFuY2UgY29kZVwiO1xuXG5cdCAgICAgIGM9ei5hdmFpbF9pbi1uO2M9KGs+PjMpPGM/az4+MzpjO24rPWM7cC09YztrLT1jPDwzO1xuXG5cdCAgICAgIHMuYml0Yj1iO3MuYml0az1rO1xuXHQgICAgICB6LmF2YWlsX2luPW47ei50b3RhbF9pbis9cC16Lm5leHRfaW5faW5kZXg7ei5uZXh0X2luX2luZGV4PXA7XG5cdCAgICAgIHMud3JpdGU9cTtcblxuXHQgICAgICByZXR1cm4gWl9EQVRBX0VSUk9SO1xuXHQgICAgfVxuXHQgIH1cblx0ICB3aGlsZSh0cnVlKTtcblx0ICBicmVhaztcblx0fVxuXG5cdGlmKChlJjY0KT09MCl7XG5cdCAgdCs9dHBbdHBfaW5kZXhfdF8zKzJdO1xuXHQgIHQrPShiJmluZmxhdGVfbWFza1tlXSk7XG5cdCAgdHBfaW5kZXhfdF8zPSh0cF9pbmRleCt0KSozO1xuXHQgIGlmKChlPXRwW3RwX2luZGV4X3RfM10pPT0wKXtcblxuXHQgICAgYj4+PSh0cFt0cF9pbmRleF90XzMrMV0pOyBrLT0odHBbdHBfaW5kZXhfdF8zKzFdKTtcblxuXHQgICAgcy53aW5kb3dbcSsrXT10cFt0cF9pbmRleF90XzMrMl07XG5cdCAgICBtLS07XG5cdCAgICBicmVhaztcblx0ICB9XG5cdH1cblx0ZWxzZSBpZigoZSYzMikhPTApe1xuXG5cdCAgYz16LmF2YWlsX2luLW47Yz0oaz4+Myk8Yz9rPj4zOmM7bis9YztwLT1jO2stPWM8PDM7XG4gXG5cdCAgcy5iaXRiPWI7cy5iaXRrPWs7XG5cdCAgei5hdmFpbF9pbj1uO3oudG90YWxfaW4rPXAtei5uZXh0X2luX2luZGV4O3oubmV4dF9pbl9pbmRleD1wO1xuXHQgIHMud3JpdGU9cTtcblxuXHQgIHJldHVybiBaX1NUUkVBTV9FTkQ7XG5cdH1cblx0ZWxzZXtcblx0ICB6Lm1zZz1cImludmFsaWQgbGl0ZXJhbC9sZW5ndGggY29kZVwiO1xuXG5cdCAgYz16LmF2YWlsX2luLW47Yz0oaz4+Myk8Yz9rPj4zOmM7bis9YztwLT1jO2stPWM8PDM7XG5cblx0ICBzLmJpdGI9YjtzLmJpdGs9aztcblx0ICB6LmF2YWlsX2luPW47ei50b3RhbF9pbis9cC16Lm5leHRfaW5faW5kZXg7ei5uZXh0X2luX2luZGV4PXA7XG5cdCAgcy53cml0ZT1xO1xuXG5cdCAgcmV0dXJuIFpfREFUQV9FUlJPUjtcblx0fVxuICAgICAgfSBcbiAgICAgIHdoaWxlKHRydWUpO1xuICAgIH0gXG4gICAgd2hpbGUobT49MjU4ICYmIG4+PSAxMCk7XG5cbiAgICAvLyBub3QgZW5vdWdoIGlucHV0IG9yIG91dHB1dC0tcmVzdG9yZSBwb2ludGVycyBhbmQgcmV0dXJuXG4gICAgYz16LmF2YWlsX2luLW47Yz0oaz4+Myk8Yz9rPj4zOmM7bis9YztwLT1jO2stPWM8PDM7XG5cbiAgICBzLmJpdGI9YjtzLmJpdGs9aztcbiAgICB6LmF2YWlsX2luPW47ei50b3RhbF9pbis9cC16Lm5leHRfaW5faW5kZXg7ei5uZXh0X2luX2luZGV4PXA7XG4gICAgcy53cml0ZT1xO1xuXG4gICAgcmV0dXJuIFpfT0s7XG59XG5cbi8vXG4vLyBJbmZUcmVlLmphdmFcbi8vXG5cbmZ1bmN0aW9uIEluZlRyZWUoKSB7XG59XG5cbkluZlRyZWUucHJvdG90eXBlLmh1ZnRfYnVpbGQgPSBmdW5jdGlvbihiLCBiaW5kZXgsIG4sIHMsIGQsIGUsIHQsIG0sIGhwLCBobiwgdikge1xuXG4gICAgLy8gR2l2ZW4gYSBsaXN0IG9mIGNvZGUgbGVuZ3RocyBhbmQgYSBtYXhpbXVtIHRhYmxlIHNpemUsIG1ha2UgYSBzZXQgb2ZcbiAgICAvLyB0YWJsZXMgdG8gZGVjb2RlIHRoYXQgc2V0IG9mIGNvZGVzLiAgUmV0dXJuIFpfT0sgb24gc3VjY2VzcywgWl9CVUZfRVJST1JcbiAgICAvLyBpZiB0aGUgZ2l2ZW4gY29kZSBzZXQgaXMgaW5jb21wbGV0ZSAodGhlIHRhYmxlcyBhcmUgc3RpbGwgYnVpbHQgaW4gdGhpc1xuICAgIC8vIGNhc2UpLCBaX0RBVEFfRVJST1IgaWYgdGhlIGlucHV0IGlzIGludmFsaWQgKGFuIG92ZXItc3Vic2NyaWJlZCBzZXQgb2ZcbiAgICAvLyBsZW5ndGhzKSwgb3IgWl9NRU1fRVJST1IgaWYgbm90IGVub3VnaCBtZW1vcnkuXG5cbiAgICB2YXIgYTsgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvdW50ZXIgZm9yIGNvZGVzIG9mIGxlbmd0aCBrXG4gICAgdmFyIGY7ICAgICAgICAgICAgICAgICAgICAgICAvLyBpIHJlcGVhdHMgaW4gdGFibGUgZXZlcnkgZiBlbnRyaWVzXG4gICAgdmFyIGc7ICAgICAgICAgICAgICAgICAgICAgICAvLyBtYXhpbXVtIGNvZGUgbGVuZ3RoXG4gICAgdmFyIGg7ICAgICAgICAgICAgICAgICAgICAgICAvLyB0YWJsZSBsZXZlbFxuICAgIHZhciBpOyAgICAgICAgICAgICAgICAgICAgICAgLy8gY291bnRlciwgY3VycmVudCBjb2RlXG4gICAgdmFyIGo7ICAgICAgICAgICAgICAgICAgICAgICAvLyBjb3VudGVyXG4gICAgdmFyIGs7ICAgICAgICAgICAgICAgICAgICAgICAvLyBudW1iZXIgb2YgYml0cyBpbiBjdXJyZW50IGNvZGVcbiAgICB2YXIgbDsgICAgICAgICAgICAgICAgICAgICAgIC8vIGJpdHMgcGVyIHRhYmxlIChyZXR1cm5lZCBpbiBtKVxuICAgIHZhciBtYXNrOyAgICAgICAgICAgICAgICAgICAgLy8gKDEgPDwgdykgLSAxLCB0byBhdm9pZCBjYyAtTyBidWcgb24gSFBcbiAgICB2YXIgcDsgICAgICAgICAgICAgICAgICAgICAgIC8vIHBvaW50ZXIgaW50byBjW10sIGJbXSwgb3IgdltdXG4gICAgdmFyIHE7ICAgICAgICAgICAgICAgICAgICAgICAvLyBwb2ludHMgdG8gY3VycmVudCB0YWJsZVxuICAgIHZhciB3OyAgICAgICAgICAgICAgICAgICAgICAgLy8gYml0cyBiZWZvcmUgdGhpcyB0YWJsZSA9PSAobCAqIGgpXG4gICAgdmFyIHhwOyAgICAgICAgICAgICAgICAgICAgICAvLyBwb2ludGVyIGludG8geFxuICAgIHZhciB5OyAgICAgICAgICAgICAgICAgICAgICAgLy8gbnVtYmVyIG9mIGR1bW15IGNvZGVzIGFkZGVkXG4gICAgdmFyIHo7ICAgICAgICAgICAgICAgICAgICAgICAvLyBudW1iZXIgb2YgZW50cmllcyBpbiBjdXJyZW50IHRhYmxlXG5cbiAgICAvLyBHZW5lcmF0ZSBjb3VudHMgZm9yIGVhY2ggYml0IGxlbmd0aFxuXG4gICAgcCA9IDA7IGkgPSBuO1xuICAgIGRvIHtcbiAgICAgIHRoaXMuY1tiW2JpbmRleCtwXV0rKzsgcCsrOyBpLS07ICAgLy8gYXNzdW1lIGFsbCBlbnRyaWVzIDw9IEJNQVhcbiAgICB9d2hpbGUoaSE9MCk7XG5cbiAgICBpZih0aGlzLmNbMF0gPT0gbil7ICAgICAgICAgICAgICAgIC8vIG51bGwgaW5wdXQtLWFsbCB6ZXJvIGxlbmd0aCBjb2Rlc1xuICAgICAgdFswXSA9IC0xO1xuICAgICAgbVswXSA9IDA7XG4gICAgICByZXR1cm4gWl9PSztcbiAgICB9XG5cbiAgICAvLyBGaW5kIG1pbmltdW0gYW5kIG1heGltdW0gbGVuZ3RoLCBib3VuZCAqbSBieSB0aG9zZVxuICAgIGwgPSBtWzBdO1xuICAgIGZvciAoaiA9IDE7IGogPD0gQk1BWDsgaisrKVxuICAgICAgaWYodGhpcy5jW2pdIT0wKSBicmVhaztcbiAgICBrID0gajsgICAgICAgICAgICAgICAgICAgICAgICAvLyBtaW5pbXVtIGNvZGUgbGVuZ3RoXG4gICAgaWYobCA8IGope1xuICAgICAgbCA9IGo7XG4gICAgfVxuICAgIGZvciAoaSA9IEJNQVg7IGkhPTA7IGktLSl7XG4gICAgICBpZih0aGlzLmNbaV0hPTApIGJyZWFrO1xuICAgIH1cbiAgICBnID0gaTsgICAgICAgICAgICAgICAgICAgICAgICAvLyBtYXhpbXVtIGNvZGUgbGVuZ3RoXG4gICAgaWYobCA+IGkpe1xuICAgICAgbCA9IGk7XG4gICAgfVxuICAgIG1bMF0gPSBsO1xuXG4gICAgLy8gQWRqdXN0IGxhc3QgbGVuZ3RoIGNvdW50IHRvIGZpbGwgb3V0IGNvZGVzLCBpZiBuZWVkZWRcbiAgICBmb3IgKHkgPSAxIDw8IGo7IGogPCBpOyBqKyssIHkgPDw9IDEpe1xuICAgICAgaWYgKCh5IC09IHRoaXMuY1tqXSkgPCAwKXtcbiAgICAgICAgcmV0dXJuIFpfREFUQV9FUlJPUjtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCh5IC09IHRoaXMuY1tpXSkgPCAwKXtcbiAgICAgIHJldHVybiBaX0RBVEFfRVJST1I7XG4gICAgfVxuICAgIHRoaXMuY1tpXSArPSB5O1xuXG4gICAgLy8gR2VuZXJhdGUgc3RhcnRpbmcgb2Zmc2V0cyBpbnRvIHRoZSB2YWx1ZSB0YWJsZSBmb3IgZWFjaCBsZW5ndGhcbiAgICB0aGlzLnhbMV0gPSBqID0gMDtcbiAgICBwID0gMTsgIHhwID0gMjtcbiAgICB3aGlsZSAoLS1pIT0wKSB7ICAgICAgICAgICAgICAgICAvLyBub3RlIHRoYXQgaSA9PSBnIGZyb20gYWJvdmVcbiAgICAgIHRoaXMueFt4cF0gPSAoaiArPSB0aGlzLmNbcF0pO1xuICAgICAgeHArKztcbiAgICAgIHArKztcbiAgICB9XG5cbiAgICAvLyBNYWtlIGEgdGFibGUgb2YgdmFsdWVzIGluIG9yZGVyIG9mIGJpdCBsZW5ndGhzXG4gICAgaSA9IDA7IHAgPSAwO1xuICAgIGRvIHtcbiAgICAgIGlmICgoaiA9IGJbYmluZGV4K3BdKSAhPSAwKXtcbiAgICAgICAgdGhpcy52W3RoaXMueFtqXSsrXSA9IGk7XG4gICAgICB9XG4gICAgICBwKys7XG4gICAgfVxuICAgIHdoaWxlICgrK2kgPCBuKTtcbiAgICBuID0gdGhpcy54W2ddOyAgICAgICAgICAgICAgICAgICAgIC8vIHNldCBuIHRvIGxlbmd0aCBvZiB2XG5cbiAgICAvLyBHZW5lcmF0ZSB0aGUgSHVmZm1hbiBjb2RlcyBhbmQgZm9yIGVhY2gsIG1ha2UgdGhlIHRhYmxlIGVudHJpZXNcbiAgICB0aGlzLnhbMF0gPSBpID0gMDsgICAgICAgICAgICAgICAgIC8vIGZpcnN0IEh1ZmZtYW4gY29kZSBpcyB6ZXJvXG4gICAgcCA9IDA7ICAgICAgICAgICAgICAgICAgICAgICAgLy8gZ3JhYiB2YWx1ZXMgaW4gYml0IG9yZGVyXG4gICAgaCA9IC0xOyAgICAgICAgICAgICAgICAgICAgICAgLy8gbm8gdGFibGVzIHlldC0tbGV2ZWwgLTFcbiAgICB3ID0gLWw7ICAgICAgICAgICAgICAgICAgICAgICAvLyBiaXRzIGRlY29kZWQgPT0gKGwgKiBoKVxuICAgIHRoaXMudVswXSA9IDA7ICAgICAgICAgICAgICAgICAgICAgLy8ganVzdCB0byBrZWVwIGNvbXBpbGVycyBoYXBweVxuICAgIHEgPSAwOyAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRpdHRvXG4gICAgeiA9IDA7ICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGl0dG9cblxuICAgIC8vIGdvIHRocm91Z2ggdGhlIGJpdCBsZW5ndGhzIChrIGFscmVhZHkgaXMgYml0cyBpbiBzaG9ydGVzdCBjb2RlKVxuICAgIGZvciAoOyBrIDw9IGc7IGsrKyl7XG4gICAgICBhID0gdGhpcy5jW2tdO1xuICAgICAgd2hpbGUgKGEtLSE9MCl7XG5cdC8vIGhlcmUgaSBpcyB0aGUgSHVmZm1hbiBjb2RlIG9mIGxlbmd0aCBrIGJpdHMgZm9yIHZhbHVlICpwXG5cdC8vIG1ha2UgdGFibGVzIHVwIHRvIHJlcXVpcmVkIGxldmVsXG4gICAgICAgIHdoaWxlIChrID4gdyArIGwpe1xuICAgICAgICAgIGgrKztcbiAgICAgICAgICB3ICs9IGw7ICAgICAgICAgICAgICAgICAvLyBwcmV2aW91cyB0YWJsZSBhbHdheXMgbCBiaXRzXG5cdCAgLy8gY29tcHV0ZSBtaW5pbXVtIHNpemUgdGFibGUgbGVzcyB0aGFuIG9yIGVxdWFsIHRvIGwgYml0c1xuICAgICAgICAgIHogPSBnIC0gdztcbiAgICAgICAgICB6ID0gKHogPiBsKSA/IGwgOiB6OyAgICAgICAgLy8gdGFibGUgc2l6ZSB1cHBlciBsaW1pdFxuICAgICAgICAgIGlmKChmPTE8PChqPWstdykpPmErMSl7ICAgICAvLyB0cnkgYSBrLXcgYml0IHRhYmxlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRvbyBmZXcgY29kZXMgZm9yIGstdyBiaXQgdGFibGVcbiAgICAgICAgICAgIGYgLT0gYSArIDE7ICAgICAgICAgICAgICAgLy8gZGVkdWN0IGNvZGVzIGZyb20gcGF0dGVybnMgbGVmdFxuICAgICAgICAgICAgeHAgPSBrO1xuICAgICAgICAgICAgaWYoaiA8IHope1xuICAgICAgICAgICAgICB3aGlsZSAoKytqIDwgeil7ICAgICAgICAvLyB0cnkgc21hbGxlciB0YWJsZXMgdXAgdG8geiBiaXRzXG4gICAgICAgICAgICAgICAgaWYoKGYgPDw9IDEpIDw9IHRoaXMuY1srK3hwXSlcbiAgICAgICAgICAgICAgICAgIGJyZWFrOyAgICAgICAgICAgICAgLy8gZW5vdWdoIGNvZGVzIHRvIHVzZSB1cCBqIGJpdHNcbiAgICAgICAgICAgICAgICBmIC09IHRoaXMuY1t4cF07ICAgICAgICAgICAvLyBlbHNlIGRlZHVjdCBjb2RlcyBmcm9tIHBhdHRlcm5zXG4gICAgICAgICAgICAgIH1cblx0ICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgeiA9IDEgPDwgajsgICAgICAgICAgICAgICAgIC8vIHRhYmxlIGVudHJpZXMgZm9yIGotYml0IHRhYmxlXG5cblx0ICAvLyBhbGxvY2F0ZSBuZXcgdGFibGVcbiAgICAgICAgICBpZiAodGhpcy5oblswXSArIHogPiBNQU5ZKXsgICAgICAgLy8gKG5vdGU6IGRvZXNuJ3QgbWF0dGVyIGZvciBmaXhlZClcbiAgICAgICAgICAgIHJldHVybiBaX0RBVEFfRVJST1I7ICAgICAgIC8vIG92ZXJmbG93IG9mIE1BTllcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy51W2hdID0gcSA9IC8qaHArKi8gdGhpcy5oblswXTsgICAvLyBERUJVR1xuICAgICAgICAgIHRoaXMuaG5bMF0gKz0gejtcbiBcblx0ICAvLyBjb25uZWN0IHRvIGxhc3QgdGFibGUsIGlmIHRoZXJlIGlzIG9uZVxuXHQgIGlmKGghPTApe1xuICAgICAgICAgICAgdGhpcy54W2hdPWk7ICAgICAgICAgICAvLyBzYXZlIHBhdHRlcm4gZm9yIGJhY2tpbmcgdXBcbiAgICAgICAgICAgIHRoaXMuclswXT1qOyAgICAgLy8gYml0cyBpbiB0aGlzIHRhYmxlXG4gICAgICAgICAgICB0aGlzLnJbMV09bDsgICAgIC8vIGJpdHMgdG8gZHVtcCBiZWZvcmUgdGhpcyB0YWJsZVxuICAgICAgICAgICAgaj1pPj4+KHcgLSBsKTtcbiAgICAgICAgICAgIHRoaXMuclsyXSA9IChxIC0gdGhpcy51W2gtMV0gLSBqKTsgICAgICAgICAgICAgICAvLyBvZmZzZXQgdG8gdGhpcyB0YWJsZVxuICAgICAgICAgICAgYXJyYXlDb3B5KHRoaXMuciwgMCwgaHAsICh0aGlzLnVbaC0xXStqKSozLCAzKTsgLy8gY29ubmVjdCB0byBsYXN0IHRhYmxlXG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2V7XG4gICAgICAgICAgICB0WzBdID0gcTsgICAgICAgICAgICAgICAvLyBmaXJzdCB0YWJsZSBpcyByZXR1cm5lZCByZXN1bHRcblx0ICB9XG4gICAgICAgIH1cblxuXHQvLyBzZXQgdXAgdGFibGUgZW50cnkgaW4gclxuICAgICAgICB0aGlzLnJbMV0gPSAoayAtIHcpO1xuICAgICAgICBpZiAocCA+PSBuKXtcbiAgICAgICAgICB0aGlzLnJbMF0gPSAxMjggKyA2NDsgICAgICAvLyBvdXQgb2YgdmFsdWVzLS1pbnZhbGlkIGNvZGVcblx0fVxuICAgICAgICBlbHNlIGlmICh2W3BdIDwgcyl7XG4gICAgICAgICAgdGhpcy5yWzBdID0gKHRoaXMudltwXSA8IDI1NiA/IDAgOiAzMiArIDY0KTsgIC8vIDI1NiBpcyBlbmQtb2YtYmxvY2tcbiAgICAgICAgICB0aGlzLnJbMl0gPSB0aGlzLnZbcCsrXTsgICAgICAgICAgLy8gc2ltcGxlIGNvZGUgaXMganVzdCB0aGUgdmFsdWVcbiAgICAgICAgfVxuICAgICAgICBlbHNle1xuICAgICAgICAgIHRoaXMuclswXT0oZVt0aGlzLnZbcF0tc10rMTYrNjQpOyAvLyBub24tc2ltcGxlLS1sb29rIHVwIGluIGxpc3RzXG4gICAgICAgICAgdGhpcy5yWzJdPWRbdGhpcy52W3ArK10gLSBzXTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGZpbGwgY29kZS1saWtlIGVudHJpZXMgd2l0aCByXG4gICAgICAgIGY9MTw8KGstdyk7XG4gICAgICAgIGZvciAoaj1pPj4+dztqPHo7ais9Zil7XG4gICAgICAgICAgYXJyYXlDb3B5KHRoaXMuciwgMCwgaHAsIChxK2opKjMsIDMpO1xuXHR9XG5cblx0Ly8gYmFja3dhcmRzIGluY3JlbWVudCB0aGUgay1iaXQgY29kZSBpXG4gICAgICAgIGZvciAoaiA9IDEgPDwgKGsgLSAxKTsgKGkgJiBqKSE9MDsgaiA+Pj49IDEpe1xuICAgICAgICAgIGkgXj0gajtcblx0fVxuICAgICAgICBpIF49IGo7XG5cblx0Ly8gYmFja3VwIG92ZXIgZmluaXNoZWQgdGFibGVzXG4gICAgICAgIG1hc2sgPSAoMSA8PCB3KSAtIDE7ICAgICAgLy8gbmVlZGVkIG9uIEhQLCBjYyAtTyBidWdcbiAgICAgICAgd2hpbGUgKChpICYgbWFzaykgIT0gdGhpcy54W2hdKXtcbiAgICAgICAgICBoLS07ICAgICAgICAgICAgICAgICAgICAvLyBkb24ndCBuZWVkIHRvIHVwZGF0ZSBxXG4gICAgICAgICAgdyAtPSBsO1xuICAgICAgICAgIG1hc2sgPSAoMSA8PCB3KSAtIDE7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgLy8gUmV0dXJuIFpfQlVGX0VSUk9SIGlmIHdlIHdlcmUgZ2l2ZW4gYW4gaW5jb21wbGV0ZSB0YWJsZVxuICAgIHJldHVybiB5ICE9IDAgJiYgZyAhPSAxID8gWl9CVUZfRVJST1IgOiBaX09LO1xufVxuXG5JbmZUcmVlLnByb3RvdHlwZS5pbmZsYXRlX3RyZWVzX2JpdHMgPSBmdW5jdGlvbihjLCBiYiwgdGIsIGhwLCB6KSB7XG4gICAgdmFyIHJlc3VsdDtcbiAgICB0aGlzLmluaXRXb3JrQXJlYSgxOSk7XG4gICAgdGhpcy5oblswXT0wO1xuICAgIHJlc3VsdCA9IHRoaXMuaHVmdF9idWlsZChjLCAwLCAxOSwgMTksIG51bGwsIG51bGwsIHRiLCBiYiwgaHAsIHRoaXMuaG4sIHRoaXMudik7XG5cbiAgICBpZihyZXN1bHQgPT0gWl9EQVRBX0VSUk9SKXtcbiAgICAgIHoubXNnID0gXCJvdmVyc3Vic2NyaWJlZCBkeW5hbWljIGJpdCBsZW5ndGhzIHRyZWVcIjtcbiAgICB9XG4gICAgZWxzZSBpZihyZXN1bHQgPT0gWl9CVUZfRVJST1IgfHwgYmJbMF0gPT0gMCl7XG4gICAgICB6Lm1zZyA9IFwiaW5jb21wbGV0ZSBkeW5hbWljIGJpdCBsZW5ndGhzIHRyZWVcIjtcbiAgICAgIHJlc3VsdCA9IFpfREFUQV9FUlJPUjtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cblxuSW5mVHJlZS5wcm90b3R5cGUuaW5mbGF0ZV90cmVlc19keW5hbWljID0gZnVuY3Rpb24obmwsIG5kLCBjLCBibCwgYmQsIHRsLCB0ZCwgaHAsIHopIHtcbiAgICB2YXIgcmVzdWx0O1xuXG4gICAgLy8gYnVpbGQgbGl0ZXJhbC9sZW5ndGggdHJlZVxuICAgIHRoaXMuaW5pdFdvcmtBcmVhKDI4OCk7XG4gICAgdGhpcy5oblswXT0wO1xuICAgIHJlc3VsdCA9IHRoaXMuaHVmdF9idWlsZChjLCAwLCBubCwgMjU3LCBjcGxlbnMsIGNwbGV4dCwgdGwsIGJsLCBocCwgdGhpcy5obiwgdGhpcy52KTtcbiAgICBpZiAocmVzdWx0ICE9IFpfT0sgfHwgYmxbMF0gPT0gMCl7XG4gICAgICBpZihyZXN1bHQgPT0gWl9EQVRBX0VSUk9SKXtcbiAgICAgICAgei5tc2cgPSBcIm92ZXJzdWJzY3JpYmVkIGxpdGVyYWwvbGVuZ3RoIHRyZWVcIjtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKHJlc3VsdCAhPSBaX01FTV9FUlJPUil7XG4gICAgICAgIHoubXNnID0gXCJpbmNvbXBsZXRlIGxpdGVyYWwvbGVuZ3RoIHRyZWVcIjtcbiAgICAgICAgcmVzdWx0ID0gWl9EQVRBX0VSUk9SO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICAvLyBidWlsZCBkaXN0YW5jZSB0cmVlXG4gICAgdGhpcy5pbml0V29ya0FyZWEoMjg4KTtcbiAgICByZXN1bHQgPSB0aGlzLmh1ZnRfYnVpbGQoYywgbmwsIG5kLCAwLCBjcGRpc3QsIGNwZGV4dCwgdGQsIGJkLCBocCwgdGhpcy5obiwgdGhpcy52KTtcblxuICAgIGlmIChyZXN1bHQgIT0gWl9PSyB8fCAoYmRbMF0gPT0gMCAmJiBubCA+IDI1Nykpe1xuICAgICAgaWYgKHJlc3VsdCA9PSBaX0RBVEFfRVJST1Ipe1xuICAgICAgICB6Lm1zZyA9IFwib3ZlcnN1YnNjcmliZWQgZGlzdGFuY2UgdHJlZVwiO1xuICAgICAgfVxuICAgICAgZWxzZSBpZiAocmVzdWx0ID09IFpfQlVGX0VSUk9SKSB7XG4gICAgICAgIHoubXNnID0gXCJpbmNvbXBsZXRlIGRpc3RhbmNlIHRyZWVcIjtcbiAgICAgICAgcmVzdWx0ID0gWl9EQVRBX0VSUk9SO1xuICAgICAgfVxuICAgICAgZWxzZSBpZiAocmVzdWx0ICE9IFpfTUVNX0VSUk9SKXtcbiAgICAgICAgei5tc2cgPSBcImVtcHR5IGRpc3RhbmNlIHRyZWUgd2l0aCBsZW5ndGhzXCI7XG4gICAgICAgIHJlc3VsdCA9IFpfREFUQV9FUlJPUjtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIFpfT0s7XG59XG4vKlxuICBzdGF0aWMgaW50IGluZmxhdGVfdHJlZXNfZml4ZWQoaW50W10gYmwsICAvL2xpdGVyYWwgZGVzaXJlZC9hY3R1YWwgYml0IGRlcHRoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnRbXSBiZCwgIC8vZGlzdGFuY2UgZGVzaXJlZC9hY3R1YWwgYml0IGRlcHRoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnRbXVtdIHRsLC8vbGl0ZXJhbC9sZW5ndGggdHJlZSByZXN1bHRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludFtdW10gdGQsLy9kaXN0YW5jZSB0cmVlIHJlc3VsdCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFpTdHJlYW0geiAgLy9mb3IgbWVtb3J5IGFsbG9jYXRpb25cblx0XHRcdFx0ICl7XG5cbiovXG5cbmZ1bmN0aW9uIGluZmxhdGVfdHJlZXNfZml4ZWQoYmwsIGJkLCB0bCwgdGQsIHopIHtcbiAgICBibFswXT1maXhlZF9ibDtcbiAgICBiZFswXT1maXhlZF9iZDtcbiAgICB0bFswXT1maXhlZF90bDtcbiAgICB0ZFswXT1maXhlZF90ZDtcbiAgICByZXR1cm4gWl9PSztcbn1cblxuSW5mVHJlZS5wcm90b3R5cGUuaW5pdFdvcmtBcmVhID0gZnVuY3Rpb24odnNpemUpe1xuICAgIGlmKHRoaXMuaG49PW51bGwpe1xuICAgICAgICB0aGlzLmhuPW5ldyBJbnQzMkFycmF5KDEpO1xuICAgICAgICB0aGlzLnY9bmV3IEludDMyQXJyYXkodnNpemUpO1xuICAgICAgICB0aGlzLmM9bmV3IEludDMyQXJyYXkoQk1BWCsxKTtcbiAgICAgICAgdGhpcy5yPW5ldyBJbnQzMkFycmF5KDMpO1xuICAgICAgICB0aGlzLnU9bmV3IEludDMyQXJyYXkoQk1BWCk7XG4gICAgICAgIHRoaXMueD1uZXcgSW50MzJBcnJheShCTUFYKzEpO1xuICAgIH1cbiAgICBpZih0aGlzLnYubGVuZ3RoPHZzaXplKXsgXG4gICAgICAgIHRoaXMudj1uZXcgSW50MzJBcnJheSh2c2l6ZSk7IFxuICAgIH1cbiAgICBmb3IodmFyIGk9MDsgaTx2c2l6ZTsgaSsrKXt0aGlzLnZbaV09MDt9XG4gICAgZm9yKHZhciBpPTA7IGk8Qk1BWCsxOyBpKyspe3RoaXMuY1tpXT0wO31cbiAgICBmb3IodmFyIGk9MDsgaTwzOyBpKyspe3RoaXMucltpXT0wO31cbi8vICBmb3IoaW50IGk9MDsgaTxCTUFYOyBpKyspe3VbaV09MDt9XG4gICAgYXJyYXlDb3B5KHRoaXMuYywgMCwgdGhpcy51LCAwLCBCTUFYKTtcbi8vICBmb3IoaW50IGk9MDsgaTxCTUFYKzE7IGkrKyl7eFtpXT0wO31cbiAgICBhcnJheUNvcHkodGhpcy5jLCAwLCB0aGlzLngsIDAsIEJNQVgrMSk7XG59XG5cbnZhciB0ZXN0QXJyYXkgPSBuZXcgVWludDhBcnJheSgxKTtcbnZhciBoYXNTdWJhcnJheSA9ICh0eXBlb2YgdGVzdEFycmF5LnN1YmFycmF5ID09PSAnZnVuY3Rpb24nKTtcbnZhciBoYXNTbGljZSA9IGZhbHNlOyAvKiAodHlwZW9mIHRlc3RBcnJheS5zbGljZSA9PT0gJ2Z1bmN0aW9uJyk7ICovIC8vIENocm9tZSBzbGljZSBwZXJmb3JtYW5jZSBpcyBzbyBkaXJlIHRoYXQgd2UncmUgY3VycmVudGx5IG5vdCB1c2luZyBpdC4uLlxuXG5mdW5jdGlvbiBhcnJheUNvcHkoc3JjLCBzcmNPZmZzZXQsIGRlc3QsIGRlc3RPZmZzZXQsIGNvdW50KSB7XG4gICAgaWYgKGNvdW50ID09IDApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH0gXG4gICAgaWYgKCFzcmMpIHtcbiAgICAgICAgdGhyb3cgXCJVbmRlZiBzcmNcIjtcbiAgICB9IGVsc2UgaWYgKCFkZXN0KSB7XG4gICAgICAgIHRocm93IFwiVW5kZWYgZGVzdFwiO1xuICAgIH1cblxuICAgIGlmIChzcmNPZmZzZXQgPT0gMCAmJiBjb3VudCA9PSBzcmMubGVuZ3RoKSB7XG4gICAgICAgIGFycmF5Q29weV9mYXN0KHNyYywgZGVzdCwgZGVzdE9mZnNldCk7XG4gICAgfSBlbHNlIGlmIChoYXNTdWJhcnJheSkge1xuICAgICAgICBhcnJheUNvcHlfZmFzdChzcmMuc3ViYXJyYXkoc3JjT2Zmc2V0LCBzcmNPZmZzZXQgKyBjb3VudCksIGRlc3QsIGRlc3RPZmZzZXQpOyBcbiAgICB9IGVsc2UgaWYgKHNyYy5CWVRFU19QRVJfRUxFTUVOVCA9PSAxICYmIGNvdW50ID4gMTAwKSB7XG4gICAgICAgIGFycmF5Q29weV9mYXN0KG5ldyBVaW50OEFycmF5KHNyYy5idWZmZXIsIHNyYy5ieXRlT2Zmc2V0ICsgc3JjT2Zmc2V0LCBjb3VudCksIGRlc3QsIGRlc3RPZmZzZXQpO1xuICAgIH0gZWxzZSB7IFxuICAgICAgICBhcnJheUNvcHlfc2xvdyhzcmMsIHNyY09mZnNldCwgZGVzdCwgZGVzdE9mZnNldCwgY291bnQpO1xuICAgIH1cblxufVxuXG5mdW5jdGlvbiBhcnJheUNvcHlfc2xvdyhzcmMsIHNyY09mZnNldCwgZGVzdCwgZGVzdE9mZnNldCwgY291bnQpIHtcblxuICAgIC8vIGRsb2coJ19zbG93IGNhbGw6IHNyY09mZnNldD0nICsgc3JjT2Zmc2V0ICsgJzsgZGVzdE9mZnNldD0nICsgZGVzdE9mZnNldCArICc7IGNvdW50PScgKyBjb3VudCk7XG5cbiAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb3VudDsgKytpKSB7XG4gICAgICAgIGRlc3RbZGVzdE9mZnNldCArIGldID0gc3JjW3NyY09mZnNldCArIGldO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gYXJyYXlDb3B5X2Zhc3Qoc3JjLCBkZXN0LCBkZXN0T2Zmc2V0KSB7XG4gICAgZGVzdC5zZXQoc3JjLCBkZXN0T2Zmc2V0KTtcbn1cblxuXG4gIC8vIGxhcmdlc3QgcHJpbWUgc21hbGxlciB0aGFuIDY1NTM2XG52YXIgQURMRVJfQkFTRT02NTUyMTsgXG4gIC8vIE5NQVggaXMgdGhlIGxhcmdlc3QgbiBzdWNoIHRoYXQgMjU1bihuKzEpLzIgKyAobisxKShCQVNFLTEpIDw9IDJeMzItMVxudmFyIEFETEVSX05NQVg9NTU1MjtcblxuZnVuY3Rpb24gYWRsZXIzMihhZGxlciwgLyogYnl0ZVtdICovIGJ1ZiwgIGluZGV4LCBsZW4pe1xuICAgIGlmKGJ1ZiA9PSBudWxsKXsgcmV0dXJuIDE7IH1cblxuICAgIHZhciBzMT1hZGxlciYweGZmZmY7XG4gICAgdmFyIHMyPShhZGxlcj4+MTYpJjB4ZmZmZjtcbiAgICB2YXIgaztcblxuICAgIHdoaWxlKGxlbiA+IDApIHtcbiAgICAgIGs9bGVuPEFETEVSX05NQVg/bGVuOkFETEVSX05NQVg7XG4gICAgICBsZW4tPWs7XG4gICAgICB3aGlsZShrPj0xNil7XG4gICAgICAgIHMxKz1idWZbaW5kZXgrK10mMHhmZjsgczIrPXMxO1xuICAgICAgICBzMSs9YnVmW2luZGV4KytdJjB4ZmY7IHMyKz1zMTtcbiAgICAgICAgczErPWJ1ZltpbmRleCsrXSYweGZmOyBzMis9czE7XG4gICAgICAgIHMxKz1idWZbaW5kZXgrK10mMHhmZjsgczIrPXMxO1xuICAgICAgICBzMSs9YnVmW2luZGV4KytdJjB4ZmY7IHMyKz1zMTtcbiAgICAgICAgczErPWJ1ZltpbmRleCsrXSYweGZmOyBzMis9czE7XG4gICAgICAgIHMxKz1idWZbaW5kZXgrK10mMHhmZjsgczIrPXMxO1xuICAgICAgICBzMSs9YnVmW2luZGV4KytdJjB4ZmY7IHMyKz1zMTtcbiAgICAgICAgczErPWJ1ZltpbmRleCsrXSYweGZmOyBzMis9czE7XG4gICAgICAgIHMxKz1idWZbaW5kZXgrK10mMHhmZjsgczIrPXMxO1xuICAgICAgICBzMSs9YnVmW2luZGV4KytdJjB4ZmY7IHMyKz1zMTtcbiAgICAgICAgczErPWJ1ZltpbmRleCsrXSYweGZmOyBzMis9czE7XG4gICAgICAgIHMxKz1idWZbaW5kZXgrK10mMHhmZjsgczIrPXMxO1xuICAgICAgICBzMSs9YnVmW2luZGV4KytdJjB4ZmY7IHMyKz1zMTtcbiAgICAgICAgczErPWJ1ZltpbmRleCsrXSYweGZmOyBzMis9czE7XG4gICAgICAgIHMxKz1idWZbaW5kZXgrK10mMHhmZjsgczIrPXMxO1xuICAgICAgICBrLT0xNjtcbiAgICAgIH1cbiAgICAgIGlmKGshPTApe1xuICAgICAgICBkb3tcbiAgICAgICAgICBzMSs9YnVmW2luZGV4KytdJjB4ZmY7IHMyKz1zMTtcbiAgICAgICAgfVxuICAgICAgICB3aGlsZSgtLWshPTApO1xuICAgICAgfVxuICAgICAgczElPUFETEVSX0JBU0U7XG4gICAgICBzMiU9QURMRVJfQkFTRTtcbiAgICB9XG4gICAgcmV0dXJuIChzMjw8MTYpfHMxO1xufVxuXG5cblxuZnVuY3Rpb24ganN6bGliX2luZmxhdGVfYnVmZmVyKGJ1ZmZlciwgc3RhcnQsIGxlbmd0aCwgYWZ0ZXJVbmNPZmZzZXQpIHtcbiAgICBpZiAoIXN0YXJ0KSB7XG4gICAgICAgIGJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KGJ1ZmZlcik7XG4gICAgfSBlbHNlIGlmICghbGVuZ3RoKSB7XG4gICAgICAgIGJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KGJ1ZmZlciwgc3RhcnQsIGJ1ZmZlci5ieXRlTGVuZ3RoIC0gc3RhcnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KGJ1ZmZlciwgc3RhcnQsIGxlbmd0aCk7XG4gICAgfVxuXG4gICAgdmFyIHogPSBuZXcgWlN0cmVhbSgpO1xuICAgIHouaW5mbGF0ZUluaXQoREVGX1dCSVRTLCB0cnVlKTtcbiAgICB6Lm5leHRfaW4gPSBidWZmZXI7XG4gICAgei5uZXh0X2luX2luZGV4ID0gMDtcbiAgICB6LmF2YWlsX2luID0gYnVmZmVyLmxlbmd0aDtcblxuICAgIHZhciBvQmxvY2tMaXN0ID0gW107XG4gICAgdmFyIHRvdGFsU2l6ZSA9IDA7XG4gICAgd2hpbGUgKHRydWUpIHtcbiAgICAgICAgdmFyIG9idWYgPSBuZXcgVWludDhBcnJheSgzMjAwMCk7XG4gICAgICAgIHoubmV4dF9vdXQgPSBvYnVmO1xuICAgICAgICB6Lm5leHRfb3V0X2luZGV4ID0gMDtcbiAgICAgICAgei5hdmFpbF9vdXQgPSBvYnVmLmxlbmd0aDtcbiAgICAgICAgdmFyIHN0YXR1cyA9IHouaW5mbGF0ZShaX05PX0ZMVVNIKTtcbiAgICAgICAgaWYgKHN0YXR1cyAhPSBaX09LICYmIHN0YXR1cyAhPSBaX1NUUkVBTV9FTkQgJiYgc3RhdHVzICE9IFpfQlVGX0VSUk9SKSB7XG4gICAgICAgICAgICB0aHJvdyB6Lm1zZztcbiAgICAgICAgfVxuICAgICAgICBpZiAoei5hdmFpbF9vdXQgIT0gMCkge1xuICAgICAgICAgICAgdmFyIG5ld29iID0gbmV3IFVpbnQ4QXJyYXkob2J1Zi5sZW5ndGggLSB6LmF2YWlsX291dCk7XG4gICAgICAgICAgICBhcnJheUNvcHkob2J1ZiwgMCwgbmV3b2IsIDAsIChvYnVmLmxlbmd0aCAtIHouYXZhaWxfb3V0KSk7XG4gICAgICAgICAgICBvYnVmID0gbmV3b2I7XG4gICAgICAgIH1cbiAgICAgICAgb0Jsb2NrTGlzdC5wdXNoKG9idWYpO1xuICAgICAgICB0b3RhbFNpemUgKz0gb2J1Zi5sZW5ndGg7XG4gICAgICAgIGlmIChzdGF0dXMgPT0gWl9TVFJFQU1fRU5EIHx8IHN0YXR1cyA9PSBaX0JVRl9FUlJPUikge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoYWZ0ZXJVbmNPZmZzZXQpIHtcbiAgICAgICAgYWZ0ZXJVbmNPZmZzZXRbMF0gPSAoc3RhcnQgfHwgMCkgKyB6Lm5leHRfaW5faW5kZXg7XG4gICAgfVxuXG4gICAgaWYgKG9CbG9ja0xpc3QubGVuZ3RoID09IDEpIHtcbiAgICAgICAgcmV0dXJuIG9CbG9ja0xpc3RbMF0uYnVmZmVyO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBvdXQgPSBuZXcgVWludDhBcnJheSh0b3RhbFNpemUpO1xuICAgICAgICB2YXIgY3Vyc29yID0gMDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvQmxvY2tMaXN0Lmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICB2YXIgYiA9IG9CbG9ja0xpc3RbaV07XG4gICAgICAgICAgICBhcnJheUNvcHkoYiwgMCwgb3V0LCBjdXJzb3IsIGIubGVuZ3RoKTtcbiAgICAgICAgICAgIGN1cnNvciArPSBiLmxlbmd0aDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0LmJ1ZmZlcjtcbiAgICB9XG59XG5cbmlmICh0eXBlb2YobW9kdWxlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgbW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgaW5mbGF0ZUJ1ZmZlcjoganN6bGliX2luZmxhdGVfYnVmZmVyLFxuICAgIGFycmF5Q29weTogYXJyYXlDb3B5XG4gIH07XG59XG4iLCIvLyBzaGltIGZvciB1c2luZyBwcm9jZXNzIGluIGJyb3dzZXJcbnZhciBwcm9jZXNzID0gbW9kdWxlLmV4cG9ydHMgPSB7fTtcblxuLy8gY2FjaGVkIGZyb20gd2hhdGV2ZXIgZ2xvYmFsIGlzIHByZXNlbnQgc28gdGhhdCB0ZXN0IHJ1bm5lcnMgdGhhdCBzdHViIGl0XG4vLyBkb24ndCBicmVhayB0aGluZ3MuICBCdXQgd2UgbmVlZCB0byB3cmFwIGl0IGluIGEgdHJ5IGNhdGNoIGluIGNhc2UgaXQgaXNcbi8vIHdyYXBwZWQgaW4gc3RyaWN0IG1vZGUgY29kZSB3aGljaCBkb2Vzbid0IGRlZmluZSBhbnkgZ2xvYmFscy4gIEl0J3MgaW5zaWRlIGFcbi8vIGZ1bmN0aW9uIGJlY2F1c2UgdHJ5L2NhdGNoZXMgZGVvcHRpbWl6ZSBpbiBjZXJ0YWluIGVuZ2luZXMuXG5cbnZhciBjYWNoZWRTZXRUaW1lb3V0O1xudmFyIGNhY2hlZENsZWFyVGltZW91dDtcblxuZnVuY3Rpb24gZGVmYXVsdFNldFRpbW91dCgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3NldFRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbmZ1bmN0aW9uIGRlZmF1bHRDbGVhclRpbWVvdXQgKCkge1xuICAgIHRocm93IG5ldyBFcnJvcignY2xlYXJUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG4oZnVuY3Rpb24gKCkge1xuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc2V0VGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2YgY2xlYXJUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgIH1cbn0gKCkpXG5mdW5jdGlvbiBydW5UaW1lb3V0KGZ1bikge1xuICAgIGlmIChjYWNoZWRTZXRUaW1lb3V0ID09PSBzZXRUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICAvLyBpZiBzZXRUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkU2V0VGltZW91dCA9PT0gZGVmYXVsdFNldFRpbW91dCB8fCAhY2FjaGVkU2V0VGltZW91dCkgJiYgc2V0VGltZW91dCkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dChmdW4sIDApO1xuICAgIH0gY2F0Y2goZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwobnVsbCwgZnVuLCAwKTtcbiAgICAgICAgfSBjYXRjaChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yXG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKHRoaXMsIGZ1biwgMCk7XG4gICAgICAgIH1cbiAgICB9XG5cblxufVxuZnVuY3Rpb24gcnVuQ2xlYXJUaW1lb3V0KG1hcmtlcikge1xuICAgIGlmIChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGNsZWFyVGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICAvLyBpZiBjbGVhclRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGRlZmF1bHRDbGVhclRpbWVvdXQgfHwgIWNhY2hlZENsZWFyVGltZW91dCkgJiYgY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCAgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbChudWxsLCBtYXJrZXIpO1xuICAgICAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yLlxuICAgICAgICAgICAgLy8gU29tZSB2ZXJzaW9ucyBvZiBJLkUuIGhhdmUgZGlmZmVyZW50IHJ1bGVzIGZvciBjbGVhclRpbWVvdXQgdnMgc2V0VGltZW91dFxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKHRoaXMsIG1hcmtlcik7XG4gICAgICAgIH1cbiAgICB9XG5cblxuXG59XG52YXIgcXVldWUgPSBbXTtcbnZhciBkcmFpbmluZyA9IGZhbHNlO1xudmFyIGN1cnJlbnRRdWV1ZTtcbnZhciBxdWV1ZUluZGV4ID0gLTE7XG5cbmZ1bmN0aW9uIGNsZWFuVXBOZXh0VGljaygpIHtcbiAgICBpZiAoIWRyYWluaW5nIHx8ICFjdXJyZW50UXVldWUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIGlmIChjdXJyZW50UXVldWUubGVuZ3RoKSB7XG4gICAgICAgIHF1ZXVlID0gY3VycmVudFF1ZXVlLmNvbmNhdChxdWV1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgIH1cbiAgICBpZiAocXVldWUubGVuZ3RoKSB7XG4gICAgICAgIGRyYWluUXVldWUoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGRyYWluUXVldWUoKSB7XG4gICAgaWYgKGRyYWluaW5nKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHRpbWVvdXQgPSBydW5UaW1lb3V0KGNsZWFuVXBOZXh0VGljayk7XG4gICAgZHJhaW5pbmcgPSB0cnVlO1xuXG4gICAgdmFyIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB3aGlsZShsZW4pIHtcbiAgICAgICAgY3VycmVudFF1ZXVlID0gcXVldWU7XG4gICAgICAgIHF1ZXVlID0gW107XG4gICAgICAgIHdoaWxlICgrK3F1ZXVlSW5kZXggPCBsZW4pIHtcbiAgICAgICAgICAgIGlmIChjdXJyZW50UXVldWUpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50UXVldWVbcXVldWVJbmRleF0ucnVuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgICAgICBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgfVxuICAgIGN1cnJlbnRRdWV1ZSA9IG51bGw7XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBydW5DbGVhclRpbWVvdXQodGltZW91dCk7XG59XG5cbnByb2Nlc3MubmV4dFRpY2sgPSBmdW5jdGlvbiAoZnVuKSB7XG4gICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcXVldWUucHVzaChuZXcgSXRlbShmdW4sIGFyZ3MpKTtcbiAgICBpZiAocXVldWUubGVuZ3RoID09PSAxICYmICFkcmFpbmluZykge1xuICAgICAgICBydW5UaW1lb3V0KGRyYWluUXVldWUpO1xuICAgIH1cbn07XG5cbi8vIHY4IGxpa2VzIHByZWRpY3RpYmxlIG9iamVjdHNcbmZ1bmN0aW9uIEl0ZW0oZnVuLCBhcnJheSkge1xuICAgIHRoaXMuZnVuID0gZnVuO1xuICAgIHRoaXMuYXJyYXkgPSBhcnJheTtcbn1cbkl0ZW0ucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmZ1bi5hcHBseShudWxsLCB0aGlzLmFycmF5KTtcbn07XG5wcm9jZXNzLnRpdGxlID0gJ2Jyb3dzZXInO1xucHJvY2Vzcy5icm93c2VyID0gdHJ1ZTtcbnByb2Nlc3MuZW52ID0ge307XG5wcm9jZXNzLmFyZ3YgPSBbXTtcbnByb2Nlc3MudmVyc2lvbiA9ICcnOyAvLyBlbXB0eSBzdHJpbmcgdG8gYXZvaWQgcmVnZXhwIGlzc3Vlc1xucHJvY2Vzcy52ZXJzaW9ucyA9IHt9O1xuXG5mdW5jdGlvbiBub29wKCkge31cblxucHJvY2Vzcy5vbiA9IG5vb3A7XG5wcm9jZXNzLmFkZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3Mub25jZSA9IG5vb3A7XG5wcm9jZXNzLm9mZiA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUxpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlQWxsTGlzdGVuZXJzID0gbm9vcDtcbnByb2Nlc3MuZW1pdCA9IG5vb3A7XG5cbnByb2Nlc3MuYmluZGluZyA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcblxucHJvY2Vzcy5jd2QgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnLycgfTtcbnByb2Nlc3MuY2hkaXIgPSBmdW5jdGlvbiAoZGlyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5wcm9jZXNzLnVtYXNrID0gZnVuY3Rpb24oKSB7IHJldHVybiAwOyB9O1xuIiwiLy8gIFJhbWRhIHYwLjIxLjBcbi8vICBodHRwczovL2dpdGh1Yi5jb20vcmFtZGEvcmFtZGFcbi8vICAoYykgMjAxMy0yMDE2IFNjb3R0IFNhdXlldCwgTWljaGFlbCBIdXJsZXksIGFuZCBEYXZpZCBDaGFtYmVyc1xuLy8gIFJhbWRhIG1heSBiZSBmcmVlbHkgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuXG47KGZ1bmN0aW9uKCkge1xuXG4gICd1c2Ugc3RyaWN0JztcblxuICAvKipcbiAgICAgKiBBIHNwZWNpYWwgcGxhY2Vob2xkZXIgdmFsdWUgdXNlZCB0byBzcGVjaWZ5IFwiZ2Fwc1wiIHdpdGhpbiBjdXJyaWVkIGZ1bmN0aW9ucyxcbiAgICAgKiBhbGxvd2luZyBwYXJ0aWFsIGFwcGxpY2F0aW9uIG9mIGFueSBjb21iaW5hdGlvbiBvZiBhcmd1bWVudHMsIHJlZ2FyZGxlc3Mgb2ZcbiAgICAgKiB0aGVpciBwb3NpdGlvbnMuXG4gICAgICpcbiAgICAgKiBJZiBgZ2AgaXMgYSBjdXJyaWVkIHRlcm5hcnkgZnVuY3Rpb24gYW5kIGBfYCBpcyBgUi5fX2AsIHRoZSBmb2xsb3dpbmcgYXJlXG4gICAgICogZXF1aXZhbGVudDpcbiAgICAgKlxuICAgICAqICAgLSBgZygxLCAyLCAzKWBcbiAgICAgKiAgIC0gYGcoXywgMiwgMykoMSlgXG4gICAgICogICAtIGBnKF8sIF8sIDMpKDEpKDIpYFxuICAgICAqICAgLSBgZyhfLCBfLCAzKSgxLCAyKWBcbiAgICAgKiAgIC0gYGcoXywgMiwgXykoMSwgMylgXG4gICAgICogICAtIGBnKF8sIDIpKDEpKDMpYFxuICAgICAqICAgLSBgZyhfLCAyKSgxLCAzKWBcbiAgICAgKiAgIC0gYGcoXywgMikoXywgMykoMSlgXG4gICAgICpcbiAgICAgKiBAY29uc3RhbnRcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC42LjBcbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgZ3JlZXQgPSBSLnJlcGxhY2UoJ3tuYW1lfScsIFIuX18sICdIZWxsbywge25hbWV9IScpO1xuICAgICAqICAgICAgZ3JlZXQoJ0FsaWNlJyk7IC8vPT4gJ0hlbGxvLCBBbGljZSEnXG4gICAgICovXG4gICAgdmFyIF9fID0geyAnQEBmdW5jdGlvbmFsL3BsYWNlaG9sZGVyJzogdHJ1ZSB9O1xuXG4gICAgLyogZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLXZhcnMgKi9cbiAgICB2YXIgX2FyaXR5ID0gZnVuY3Rpb24gX2FyaXR5KG4sIGZuKSB7XG4gICAgICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLXVudXNlZC12YXJzICovXG4gICAgICAgIHN3aXRjaCAobikge1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhMCwgYTEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoYTAsIGExLCBhMikge1xuICAgICAgICAgICAgICAgIHJldHVybiBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhMCwgYTEsIGEyLCBhMykge1xuICAgICAgICAgICAgICAgIHJldHVybiBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhMCwgYTEsIGEyLCBhMywgYTQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIGNhc2UgNjpcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoYTAsIGExLCBhMiwgYTMsIGE0LCBhNSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSA3OlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhMCwgYTEsIGEyLCBhMywgYTQsIGE1LCBhNikge1xuICAgICAgICAgICAgICAgIHJldHVybiBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSA4OlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhMCwgYTEsIGEyLCBhMywgYTQsIGE1LCBhNiwgYTcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIGNhc2UgOTpcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoYTAsIGExLCBhMiwgYTMsIGE0LCBhNSwgYTYsIGE3LCBhOCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSAxMDpcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoYTAsIGExLCBhMiwgYTMsIGE0LCBhNSwgYTYsIGE3LCBhOCwgYTkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZpcnN0IGFyZ3VtZW50IHRvIF9hcml0eSBtdXN0IGJlIGEgbm9uLW5lZ2F0aXZlIGludGVnZXIgbm8gZ3JlYXRlciB0aGFuIHRlbicpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHZhciBfYXJyYXlGcm9tSXRlcmF0b3IgPSBmdW5jdGlvbiBfYXJyYXlGcm9tSXRlcmF0b3IoaXRlcikge1xuICAgICAgICB2YXIgbGlzdCA9IFtdO1xuICAgICAgICB2YXIgbmV4dDtcbiAgICAgICAgd2hpbGUgKCEobmV4dCA9IGl0ZXIubmV4dCgpKS5kb25lKSB7XG4gICAgICAgICAgICBsaXN0LnB1c2gobmV4dC52YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGxpc3Q7XG4gICAgfTtcblxuICAgIHZhciBfYXJyYXlPZiA9IGZ1bmN0aW9uIF9hcnJheU9mKCkge1xuICAgICAgICByZXR1cm4gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKTtcbiAgICB9O1xuXG4gICAgdmFyIF9jbG9uZVJlZ0V4cCA9IGZ1bmN0aW9uIF9jbG9uZVJlZ0V4cChwYXR0ZXJuKSB7XG4gICAgICAgIHJldHVybiBuZXcgUmVnRXhwKHBhdHRlcm4uc291cmNlLCAocGF0dGVybi5nbG9iYWwgPyAnZycgOiAnJykgKyAocGF0dGVybi5pZ25vcmVDYXNlID8gJ2knIDogJycpICsgKHBhdHRlcm4ubXVsdGlsaW5lID8gJ20nIDogJycpICsgKHBhdHRlcm4uc3RpY2t5ID8gJ3knIDogJycpICsgKHBhdHRlcm4udW5pY29kZSA/ICd1JyA6ICcnKSk7XG4gICAgfTtcblxuICAgIHZhciBfY29tcGxlbWVudCA9IGZ1bmN0aW9uIF9jb21wbGVtZW50KGYpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAhZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICB9O1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBQcml2YXRlIGBjb25jYXRgIGZ1bmN0aW9uIHRvIG1lcmdlIHR3byBhcnJheS1saWtlIG9iamVjdHMuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7QXJyYXl8QXJndW1lbnRzfSBbc2V0MT1bXV0gQW4gYXJyYXktbGlrZSBvYmplY3QuXG4gICAgICogQHBhcmFtIHtBcnJheXxBcmd1bWVudHN9IFtzZXQyPVtdXSBBbiBhcnJheS1saWtlIG9iamVjdC5cbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gQSBuZXcsIG1lcmdlZCBhcnJheS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBfY29uY2F0KFs0LCA1LCA2XSwgWzEsIDIsIDNdKTsgLy89PiBbNCwgNSwgNiwgMSwgMiwgM11cbiAgICAgKi9cbiAgICB2YXIgX2NvbmNhdCA9IGZ1bmN0aW9uIF9jb25jYXQoc2V0MSwgc2V0Mikge1xuICAgICAgICBzZXQxID0gc2V0MSB8fCBbXTtcbiAgICAgICAgc2V0MiA9IHNldDIgfHwgW107XG4gICAgICAgIHZhciBpZHg7XG4gICAgICAgIHZhciBsZW4xID0gc2V0MS5sZW5ndGg7XG4gICAgICAgIHZhciBsZW4yID0gc2V0Mi5sZW5ndGg7XG4gICAgICAgIHZhciByZXN1bHQgPSBbXTtcbiAgICAgICAgaWR4ID0gMDtcbiAgICAgICAgd2hpbGUgKGlkeCA8IGxlbjEpIHtcbiAgICAgICAgICAgIHJlc3VsdFtyZXN1bHQubGVuZ3RoXSA9IHNldDFbaWR4XTtcbiAgICAgICAgICAgIGlkeCArPSAxO1xuICAgICAgICB9XG4gICAgICAgIGlkeCA9IDA7XG4gICAgICAgIHdoaWxlIChpZHggPCBsZW4yKSB7XG4gICAgICAgICAgICByZXN1bHRbcmVzdWx0Lmxlbmd0aF0gPSBzZXQyW2lkeF07XG4gICAgICAgICAgICBpZHggKz0gMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG5cbiAgICB2YXIgX2NvbnRhaW5zV2l0aCA9IGZ1bmN0aW9uIF9jb250YWluc1dpdGgocHJlZCwgeCwgbGlzdCkge1xuICAgICAgICB2YXIgaWR4ID0gMDtcbiAgICAgICAgdmFyIGxlbiA9IGxpc3QubGVuZ3RoO1xuICAgICAgICB3aGlsZSAoaWR4IDwgbGVuKSB7XG4gICAgICAgICAgICBpZiAocHJlZCh4LCBsaXN0W2lkeF0pKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZHggKz0gMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcblxuICAgIHZhciBfZmlsdGVyID0gZnVuY3Rpb24gX2ZpbHRlcihmbiwgbGlzdCkge1xuICAgICAgICB2YXIgaWR4ID0gMDtcbiAgICAgICAgdmFyIGxlbiA9IGxpc3QubGVuZ3RoO1xuICAgICAgICB2YXIgcmVzdWx0ID0gW107XG4gICAgICAgIHdoaWxlIChpZHggPCBsZW4pIHtcbiAgICAgICAgICAgIGlmIChmbihsaXN0W2lkeF0pKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0W3Jlc3VsdC5sZW5ndGhdID0gbGlzdFtpZHhdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWR4ICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xuXG4gICAgdmFyIF9mb3JjZVJlZHVjZWQgPSBmdW5jdGlvbiBfZm9yY2VSZWR1Y2VkKHgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICdAQHRyYW5zZHVjZXIvdmFsdWUnOiB4LFxuICAgICAgICAgICAgJ0BAdHJhbnNkdWNlci9yZWR1Y2VkJzogdHJ1ZVxuICAgICAgICB9O1xuICAgIH07XG5cbiAgICAvLyBTdHJpbmcoeCA9PiB4KSBldmFsdWF0ZXMgdG8gXCJ4ID0+IHhcIiwgc28gdGhlIHBhdHRlcm4gbWF5IG5vdCBtYXRjaC5cbiAgICB2YXIgX2Z1bmN0aW9uTmFtZSA9IGZ1bmN0aW9uIF9mdW5jdGlvbk5hbWUoZikge1xuICAgICAgICAvLyBTdHJpbmcoeCA9PiB4KSBldmFsdWF0ZXMgdG8gXCJ4ID0+IHhcIiwgc28gdGhlIHBhdHRlcm4gbWF5IG5vdCBtYXRjaC5cbiAgICAgICAgdmFyIG1hdGNoID0gU3RyaW5nKGYpLm1hdGNoKC9eZnVuY3Rpb24gKFxcdyopLyk7XG4gICAgICAgIHJldHVybiBtYXRjaCA9PSBudWxsID8gJycgOiBtYXRjaFsxXTtcbiAgICB9O1xuXG4gICAgdmFyIF9oYXMgPSBmdW5jdGlvbiBfaGFzKHByb3AsIG9iaikge1xuICAgICAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCk7XG4gICAgfTtcblxuICAgIHZhciBfaWRlbnRpdHkgPSBmdW5jdGlvbiBfaWRlbnRpdHkoeCkge1xuICAgICAgICByZXR1cm4geDtcbiAgICB9O1xuXG4gICAgdmFyIF9pc0FyZ3VtZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcbiAgICAgICAgcmV0dXJuIHRvU3RyaW5nLmNhbGwoYXJndW1lbnRzKSA9PT0gJ1tvYmplY3QgQXJndW1lbnRzXScgPyBmdW5jdGlvbiBfaXNBcmd1bWVudHMoeCkge1xuICAgICAgICAgICAgcmV0dXJuIHRvU3RyaW5nLmNhbGwoeCkgPT09ICdbb2JqZWN0IEFyZ3VtZW50c10nO1xuICAgICAgICB9IDogZnVuY3Rpb24gX2lzQXJndW1lbnRzKHgpIHtcbiAgICAgICAgICAgIHJldHVybiBfaGFzKCdjYWxsZWUnLCB4KTtcbiAgICAgICAgfTtcbiAgICB9KCk7XG5cbiAgICAvKipcbiAgICAgKiBUZXN0cyB3aGV0aGVyIG9yIG5vdCBhbiBvYmplY3QgaXMgYW4gYXJyYXkuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7Kn0gdmFsIFRoZSBvYmplY3QgdG8gdGVzdC5cbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufSBgdHJ1ZWAgaWYgYHZhbGAgaXMgYW4gYXJyYXksIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIF9pc0FycmF5KFtdKTsgLy89PiB0cnVlXG4gICAgICogICAgICBfaXNBcnJheShudWxsKTsgLy89PiBmYWxzZVxuICAgICAqICAgICAgX2lzQXJyYXkoe30pOyAvLz0+IGZhbHNlXG4gICAgICovXG4gICAgdmFyIF9pc0FycmF5ID0gQXJyYXkuaXNBcnJheSB8fCBmdW5jdGlvbiBfaXNBcnJheSh2YWwpIHtcbiAgICAgICAgcmV0dXJuIHZhbCAhPSBudWxsICYmIHZhbC5sZW5ndGggPj0gMCAmJiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgQXJyYXldJztcbiAgICB9O1xuXG4gICAgdmFyIF9pc0Z1bmN0aW9uID0gZnVuY3Rpb24gX2lzTnVtYmVyKHgpIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh4KSA9PT0gJ1tvYmplY3QgRnVuY3Rpb25dJztcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogRGV0ZXJtaW5lIGlmIHRoZSBwYXNzZWQgYXJndW1lbnQgaXMgYW4gaW50ZWdlci5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHsqfSBuXG4gICAgICogQGNhdGVnb3J5IFR5cGVcbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgICAqL1xuICAgIHZhciBfaXNJbnRlZ2VyID0gTnVtYmVyLmlzSW50ZWdlciB8fCBmdW5jdGlvbiBfaXNJbnRlZ2VyKG4pIHtcbiAgICAgICAgcmV0dXJuIG4gPDwgMCA9PT0gbjtcbiAgICB9O1xuXG4gICAgdmFyIF9pc051bWJlciA9IGZ1bmN0aW9uIF9pc051bWJlcih4KSB7XG4gICAgICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoeCkgPT09ICdbb2JqZWN0IE51bWJlcl0nO1xuICAgIH07XG5cbiAgICB2YXIgX2lzT2JqZWN0ID0gZnVuY3Rpb24gX2lzT2JqZWN0KHgpIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh4KSA9PT0gJ1tvYmplY3QgT2JqZWN0XSc7XG4gICAgfTtcblxuICAgIHZhciBfaXNQbGFjZWhvbGRlciA9IGZ1bmN0aW9uIF9pc1BsYWNlaG9sZGVyKGEpIHtcbiAgICAgICAgcmV0dXJuIGEgIT0gbnVsbCAmJiB0eXBlb2YgYSA9PT0gJ29iamVjdCcgJiYgYVsnQEBmdW5jdGlvbmFsL3BsYWNlaG9sZGVyJ10gPT09IHRydWU7XG4gICAgfTtcblxuICAgIHZhciBfaXNSZWdFeHAgPSBmdW5jdGlvbiBfaXNSZWdFeHAoeCkge1xuICAgICAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHgpID09PSAnW29iamVjdCBSZWdFeHBdJztcbiAgICB9O1xuXG4gICAgdmFyIF9pc1N0cmluZyA9IGZ1bmN0aW9uIF9pc1N0cmluZyh4KSB7XG4gICAgICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoeCkgPT09ICdbb2JqZWN0IFN0cmluZ10nO1xuICAgIH07XG5cbiAgICB2YXIgX2lzVHJhbnNmb3JtZXIgPSBmdW5jdGlvbiBfaXNUcmFuc2Zvcm1lcihvYmopIHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBvYmpbJ0BAdHJhbnNkdWNlci9zdGVwJ10gPT09ICdmdW5jdGlvbic7XG4gICAgfTtcblxuICAgIHZhciBfbWFwID0gZnVuY3Rpb24gX21hcChmbiwgZnVuY3Rvcikge1xuICAgICAgICB2YXIgaWR4ID0gMDtcbiAgICAgICAgdmFyIGxlbiA9IGZ1bmN0b3IubGVuZ3RoO1xuICAgICAgICB2YXIgcmVzdWx0ID0gQXJyYXkobGVuKTtcbiAgICAgICAgd2hpbGUgKGlkeCA8IGxlbikge1xuICAgICAgICAgICAgcmVzdWx0W2lkeF0gPSBmbihmdW5jdG9yW2lkeF0pO1xuICAgICAgICAgICAgaWR4ICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xuXG4gICAgLy8gQmFzZWQgb24gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4vZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvT2JqZWN0L2Fzc2lnblxuICAgIHZhciBfb2JqZWN0QXNzaWduID0gZnVuY3Rpb24gX29iamVjdEFzc2lnbih0YXJnZXQpIHtcbiAgICAgICAgaWYgKHRhcmdldCA9PSBudWxsKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgY29udmVydCB1bmRlZmluZWQgb3IgbnVsbCB0byBvYmplY3QnKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgb3V0cHV0ID0gT2JqZWN0KHRhcmdldCk7XG4gICAgICAgIHZhciBpZHggPSAxO1xuICAgICAgICB2YXIgbGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICAgICAgd2hpbGUgKGlkeCA8IGxlbmd0aCkge1xuICAgICAgICAgICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpZHhdO1xuICAgICAgICAgICAgaWYgKHNvdXJjZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgbmV4dEtleSBpbiBzb3VyY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKF9oYXMobmV4dEtleSwgc291cmNlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0W25leHRLZXldID0gc291cmNlW25leHRLZXldO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWR4ICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICB9O1xuXG4gICAgdmFyIF9vZiA9IGZ1bmN0aW9uIF9vZih4KSB7XG4gICAgICAgIHJldHVybiBbeF07XG4gICAgfTtcblxuICAgIHZhciBfcGlwZSA9IGZ1bmN0aW9uIF9waXBlKGYsIGcpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBnLmNhbGwodGhpcywgZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcbiAgICAgICAgfTtcbiAgICB9O1xuXG4gICAgdmFyIF9waXBlUCA9IGZ1bmN0aW9uIF9waXBlUChmLCBnKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgY3R4ID0gdGhpcztcbiAgICAgICAgICAgIHJldHVybiBmLmFwcGx5KGN0eCwgYXJndW1lbnRzKS50aGVuKGZ1bmN0aW9uICh4KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGcuY2FsbChjdHgsIHgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgfTtcblxuICAgIC8vIFxcYiBtYXRjaGVzIHdvcmQgYm91bmRhcnk7IFtcXGJdIG1hdGNoZXMgYmFja3NwYWNlXG4gICAgdmFyIF9xdW90ZSA9IGZ1bmN0aW9uIF9xdW90ZShzKSB7XG4gICAgICAgIHZhciBlc2NhcGVkID0gcy5yZXBsYWNlKC9cXFxcL2csICdcXFxcXFxcXCcpLnJlcGxhY2UoL1tcXGJdL2csICdcXFxcYicpICAgIC8vIFxcYiBtYXRjaGVzIHdvcmQgYm91bmRhcnk7IFtcXGJdIG1hdGNoZXMgYmFja3NwYWNlXG4gICAgLnJlcGxhY2UoL1xcZi9nLCAnXFxcXGYnKS5yZXBsYWNlKC9cXG4vZywgJ1xcXFxuJykucmVwbGFjZSgvXFxyL2csICdcXFxccicpLnJlcGxhY2UoL1xcdC9nLCAnXFxcXHQnKS5yZXBsYWNlKC9cXHYvZywgJ1xcXFx2JykucmVwbGFjZSgvXFwwL2csICdcXFxcMCcpO1xuICAgICAgICByZXR1cm4gJ1wiJyArIGVzY2FwZWQucmVwbGFjZSgvXCIvZywgJ1xcXFxcIicpICsgJ1wiJztcbiAgICB9O1xuXG4gICAgdmFyIF9yZWR1Y2VkID0gZnVuY3Rpb24gX3JlZHVjZWQoeCkge1xuICAgICAgICByZXR1cm4geCAmJiB4WydAQHRyYW5zZHVjZXIvcmVkdWNlZCddID8geCA6IHtcbiAgICAgICAgICAgICdAQHRyYW5zZHVjZXIvdmFsdWUnOiB4LFxuICAgICAgICAgICAgJ0BAdHJhbnNkdWNlci9yZWR1Y2VkJzogdHJ1ZVxuICAgICAgICB9O1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBBbiBvcHRpbWl6ZWQsIHByaXZhdGUgYXJyYXkgYHNsaWNlYCBpbXBsZW1lbnRhdGlvbi5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtBcmd1bWVudHN8QXJyYXl9IGFyZ3MgVGhlIGFycmF5IG9yIGFyZ3VtZW50cyBvYmplY3QgdG8gY29uc2lkZXIuXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IFtmcm9tPTBdIFRoZSBhcnJheSBpbmRleCB0byBzbGljZSBmcm9tLCBpbmNsdXNpdmUuXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IFt0bz1hcmdzLmxlbmd0aF0gVGhlIGFycmF5IGluZGV4IHRvIHNsaWNlIHRvLCBleGNsdXNpdmUuXG4gICAgICogQHJldHVybiB7QXJyYXl9IEEgbmV3LCBzbGljZWQgYXJyYXkuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgX3NsaWNlKFsxLCAyLCAzLCA0LCA1XSwgMSwgMyk7IC8vPT4gWzIsIDNdXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBmaXJzdFRocmVlQXJncyA9IGZ1bmN0aW9uKGEsIGIsIGMsIGQpIHtcbiAgICAgKiAgICAgICAgcmV0dXJuIF9zbGljZShhcmd1bWVudHMsIDAsIDMpO1xuICAgICAqICAgICAgfTtcbiAgICAgKiAgICAgIGZpcnN0VGhyZWVBcmdzKDEsIDIsIDMsIDQpOyAvLz0+IFsxLCAyLCAzXVxuICAgICAqL1xuICAgIHZhciBfc2xpY2UgPSBmdW5jdGlvbiBfc2xpY2UoYXJncywgZnJvbSwgdG8pIHtcbiAgICAgICAgc3dpdGNoIChhcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIHJldHVybiBfc2xpY2UoYXJncywgMCwgYXJncy5sZW5ndGgpO1xuICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICByZXR1cm4gX3NsaWNlKGFyZ3MsIGZyb20sIGFyZ3MubGVuZ3RoKTtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHZhciBsaXN0ID0gW107XG4gICAgICAgICAgICB2YXIgaWR4ID0gMDtcbiAgICAgICAgICAgIHZhciBsZW4gPSBNYXRoLm1heCgwLCBNYXRoLm1pbihhcmdzLmxlbmd0aCwgdG8pIC0gZnJvbSk7XG4gICAgICAgICAgICB3aGlsZSAoaWR4IDwgbGVuKSB7XG4gICAgICAgICAgICAgICAgbGlzdFtpZHhdID0gYXJnc1tmcm9tICsgaWR4XTtcbiAgICAgICAgICAgICAgICBpZHggKz0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBsaXN0O1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFBvbHlmaWxsIGZyb20gPGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0RhdGUvdG9JU09TdHJpbmc+LlxuICAgICAqL1xuICAgIHZhciBfdG9JU09TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBwYWQgPSBmdW5jdGlvbiBwYWQobikge1xuICAgICAgICAgICAgcmV0dXJuIChuIDwgMTAgPyAnMCcgOiAnJykgKyBuO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gdHlwZW9mIERhdGUucHJvdG90eXBlLnRvSVNPU3RyaW5nID09PSAnZnVuY3Rpb24nID8gZnVuY3Rpb24gX3RvSVNPU3RyaW5nKGQpIHtcbiAgICAgICAgICAgIHJldHVybiBkLnRvSVNPU3RyaW5nKCk7XG4gICAgICAgIH0gOiBmdW5jdGlvbiBfdG9JU09TdHJpbmcoZCkge1xuICAgICAgICAgICAgcmV0dXJuIGQuZ2V0VVRDRnVsbFllYXIoKSArICctJyArIHBhZChkLmdldFVUQ01vbnRoKCkgKyAxKSArICctJyArIHBhZChkLmdldFVUQ0RhdGUoKSkgKyAnVCcgKyBwYWQoZC5nZXRVVENIb3VycygpKSArICc6JyArIHBhZChkLmdldFVUQ01pbnV0ZXMoKSkgKyAnOicgKyBwYWQoZC5nZXRVVENTZWNvbmRzKCkpICsgJy4nICsgKGQuZ2V0VVRDTWlsbGlzZWNvbmRzKCkgLyAxMDAwKS50b0ZpeGVkKDMpLnNsaWNlKDIsIDUpICsgJ1onO1xuICAgICAgICB9O1xuICAgIH0oKTtcblxuICAgIHZhciBfeGZCYXNlID0ge1xuICAgICAgICBpbml0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy54ZlsnQEB0cmFuc2R1Y2VyL2luaXQnXSgpO1xuICAgICAgICB9LFxuICAgICAgICByZXN1bHQ6IGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnhmWydAQHRyYW5zZHVjZXIvcmVzdWx0J10ocmVzdWx0KTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgX3h3cmFwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBYV3JhcChmbikge1xuICAgICAgICAgICAgdGhpcy5mID0gZm47XG4gICAgICAgIH1cbiAgICAgICAgWFdyYXAucHJvdG90eXBlWydAQHRyYW5zZHVjZXIvaW5pdCddID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdpbml0IG5vdCBpbXBsZW1lbnRlZCBvbiBYV3JhcCcpO1xuICAgICAgICB9O1xuICAgICAgICBYV3JhcC5wcm90b3R5cGVbJ0BAdHJhbnNkdWNlci9yZXN1bHQnXSA9IGZ1bmN0aW9uIChhY2MpIHtcbiAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgIH07XG4gICAgICAgIFhXcmFwLnByb3RvdHlwZVsnQEB0cmFuc2R1Y2VyL3N0ZXAnXSA9IGZ1bmN0aW9uIChhY2MsIHgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmYoYWNjLCB4KTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIF94d3JhcChmbikge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBYV3JhcChmbik7XG4gICAgICAgIH07XG4gICAgfSgpO1xuXG4gICAgdmFyIF9hcGVydHVyZSA9IGZ1bmN0aW9uIF9hcGVydHVyZShuLCBsaXN0KSB7XG4gICAgICAgIHZhciBpZHggPSAwO1xuICAgICAgICB2YXIgbGltaXQgPSBsaXN0Lmxlbmd0aCAtIChuIC0gMSk7XG4gICAgICAgIHZhciBhY2MgPSBuZXcgQXJyYXkobGltaXQgPj0gMCA/IGxpbWl0IDogMCk7XG4gICAgICAgIHdoaWxlIChpZHggPCBsaW1pdCkge1xuICAgICAgICAgICAgYWNjW2lkeF0gPSBfc2xpY2UobGlzdCwgaWR4LCBpZHggKyBuKTtcbiAgICAgICAgICAgIGlkeCArPSAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhY2M7XG4gICAgfTtcblxuICAgIHZhciBfYXNzaWduID0gdHlwZW9mIE9iamVjdC5hc3NpZ24gPT09ICdmdW5jdGlvbicgPyBPYmplY3QuYXNzaWduIDogX29iamVjdEFzc2lnbjtcblxuICAgIC8qKlxuICAgICAqIFNpbWlsYXIgdG8gaGFzTWV0aG9kLCB0aGlzIGNoZWNrcyB3aGV0aGVyIGEgZnVuY3Rpb24gaGFzIGEgW21ldGhvZG5hbWVdXG4gICAgICogZnVuY3Rpb24uIElmIGl0IGlzbid0IGFuIGFycmF5IGl0IHdpbGwgZXhlY3V0ZSB0aGF0IGZ1bmN0aW9uIG90aGVyd2lzZSBpdFxuICAgICAqIHdpbGwgZGVmYXVsdCB0byB0aGUgcmFtZGEgaW1wbGVtZW50YXRpb24uXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIHJhbWRhIGltcGxlbXRhdGlvblxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXRob2RuYW1lIHByb3BlcnR5IHRvIGNoZWNrIGZvciBhIGN1c3RvbSBpbXBsZW1lbnRhdGlvblxuICAgICAqIEByZXR1cm4ge09iamVjdH0gV2hhdGV2ZXIgdGhlIHJldHVybiB2YWx1ZSBvZiB0aGUgbWV0aG9kIGlzLlxuICAgICAqL1xuICAgIHZhciBfY2hlY2tGb3JNZXRob2QgPSBmdW5jdGlvbiBfY2hlY2tGb3JNZXRob2QobWV0aG9kbmFtZSwgZm4pIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBsZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoO1xuICAgICAgICAgICAgaWYgKGxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIG9iaiA9IGFyZ3VtZW50c1tsZW5ndGggLSAxXTtcbiAgICAgICAgICAgIHJldHVybiBfaXNBcnJheShvYmopIHx8IHR5cGVvZiBvYmpbbWV0aG9kbmFtZV0gIT09ICdmdW5jdGlvbicgPyBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpIDogb2JqW21ldGhvZG5hbWVdLmFwcGx5KG9iaiwgX3NsaWNlKGFyZ3VtZW50cywgMCwgbGVuZ3RoIC0gMSkpO1xuICAgICAgICB9O1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBPcHRpbWl6ZWQgaW50ZXJuYWwgb25lLWFyaXR5IGN1cnJ5IGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgZnVuY3Rpb24gdG8gY3VycnkuXG4gICAgICogQHJldHVybiB7RnVuY3Rpb259IFRoZSBjdXJyaWVkIGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIHZhciBfY3VycnkxID0gZnVuY3Rpb24gX2N1cnJ5MShmbikge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gZjEoYSkge1xuICAgICAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDAgfHwgX2lzUGxhY2Vob2xkZXIoYSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZjE7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBPcHRpbWl6ZWQgaW50ZXJuYWwgdHdvLWFyaXR5IGN1cnJ5IGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgZnVuY3Rpb24gdG8gY3VycnkuXG4gICAgICogQHJldHVybiB7RnVuY3Rpb259IFRoZSBjdXJyaWVkIGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIHZhciBfY3VycnkyID0gZnVuY3Rpb24gX2N1cnJ5Mihmbikge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gZjIoYSwgYikge1xuICAgICAgICAgICAgc3dpdGNoIChhcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGYyO1xuICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgIHJldHVybiBfaXNQbGFjZWhvbGRlcihhKSA/IGYyIDogX2N1cnJ5MShmdW5jdGlvbiAoX2IpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZuKGEsIF9iKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9pc1BsYWNlaG9sZGVyKGEpICYmIF9pc1BsYWNlaG9sZGVyKGIpID8gZjIgOiBfaXNQbGFjZWhvbGRlcihhKSA/IF9jdXJyeTEoZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmbihfYSwgYik7XG4gICAgICAgICAgICAgICAgfSkgOiBfaXNQbGFjZWhvbGRlcihiKSA/IF9jdXJyeTEoZnVuY3Rpb24gKF9iKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmbihhLCBfYik7XG4gICAgICAgICAgICAgICAgfSkgOiBmbihhLCBiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogT3B0aW1pemVkIGludGVybmFsIHRocmVlLWFyaXR5IGN1cnJ5IGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgZnVuY3Rpb24gdG8gY3VycnkuXG4gICAgICogQHJldHVybiB7RnVuY3Rpb259IFRoZSBjdXJyaWVkIGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIHZhciBfY3VycnkzID0gZnVuY3Rpb24gX2N1cnJ5Myhmbikge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gZjMoYSwgYiwgYykge1xuICAgICAgICAgICAgc3dpdGNoIChhcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGYzO1xuICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgIHJldHVybiBfaXNQbGFjZWhvbGRlcihhKSA/IGYzIDogX2N1cnJ5MihmdW5jdGlvbiAoX2IsIF9jKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmbihhLCBfYiwgX2MpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgIHJldHVybiBfaXNQbGFjZWhvbGRlcihhKSAmJiBfaXNQbGFjZWhvbGRlcihiKSA/IGYzIDogX2lzUGxhY2Vob2xkZXIoYSkgPyBfY3VycnkyKGZ1bmN0aW9uIChfYSwgX2MpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZuKF9hLCBiLCBfYyk7XG4gICAgICAgICAgICAgICAgfSkgOiBfaXNQbGFjZWhvbGRlcihiKSA/IF9jdXJyeTIoZnVuY3Rpb24gKF9iLCBfYykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZm4oYSwgX2IsIF9jKTtcbiAgICAgICAgICAgICAgICB9KSA6IF9jdXJyeTEoZnVuY3Rpb24gKF9jKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmbihhLCBiLCBfYyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiBfaXNQbGFjZWhvbGRlcihhKSAmJiBfaXNQbGFjZWhvbGRlcihiKSAmJiBfaXNQbGFjZWhvbGRlcihjKSA/IGYzIDogX2lzUGxhY2Vob2xkZXIoYSkgJiYgX2lzUGxhY2Vob2xkZXIoYikgPyBfY3VycnkyKGZ1bmN0aW9uIChfYSwgX2IpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZuKF9hLCBfYiwgYyk7XG4gICAgICAgICAgICAgICAgfSkgOiBfaXNQbGFjZWhvbGRlcihhKSAmJiBfaXNQbGFjZWhvbGRlcihjKSA/IF9jdXJyeTIoZnVuY3Rpb24gKF9hLCBfYykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZm4oX2EsIGIsIF9jKTtcbiAgICAgICAgICAgICAgICB9KSA6IF9pc1BsYWNlaG9sZGVyKGIpICYmIF9pc1BsYWNlaG9sZGVyKGMpID8gX2N1cnJ5MihmdW5jdGlvbiAoX2IsIF9jKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmbihhLCBfYiwgX2MpO1xuICAgICAgICAgICAgICAgIH0pIDogX2lzUGxhY2Vob2xkZXIoYSkgPyBfY3VycnkxKGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZm4oX2EsIGIsIGMpO1xuICAgICAgICAgICAgICAgIH0pIDogX2lzUGxhY2Vob2xkZXIoYikgPyBfY3VycnkxKGZ1bmN0aW9uIChfYikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZm4oYSwgX2IsIGMpO1xuICAgICAgICAgICAgICAgIH0pIDogX2lzUGxhY2Vob2xkZXIoYykgPyBfY3VycnkxKGZ1bmN0aW9uIChfYykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZm4oYSwgYiwgX2MpO1xuICAgICAgICAgICAgICAgIH0pIDogZm4oYSwgYiwgYyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEludGVybmFsIGN1cnJ5TiBmdW5jdGlvbi5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGxlbmd0aCBUaGUgYXJpdHkgb2YgdGhlIGN1cnJpZWQgZnVuY3Rpb24uXG4gICAgICogQHBhcmFtIHtBcnJheX0gcmVjZWl2ZWQgQW4gYXJyYXkgb2YgYXJndW1lbnRzIHJlY2VpdmVkIHRodXMgZmFyLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBmdW5jdGlvbiB0byBjdXJyeS5cbiAgICAgKiBAcmV0dXJuIHtGdW5jdGlvbn0gVGhlIGN1cnJpZWQgZnVuY3Rpb24uXG4gICAgICovXG4gICAgdmFyIF9jdXJyeU4gPSBmdW5jdGlvbiBfY3VycnlOKGxlbmd0aCwgcmVjZWl2ZWQsIGZuKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgY29tYmluZWQgPSBbXTtcbiAgICAgICAgICAgIHZhciBhcmdzSWR4ID0gMDtcbiAgICAgICAgICAgIHZhciBsZWZ0ID0gbGVuZ3RoO1xuICAgICAgICAgICAgdmFyIGNvbWJpbmVkSWR4ID0gMDtcbiAgICAgICAgICAgIHdoaWxlIChjb21iaW5lZElkeCA8IHJlY2VpdmVkLmxlbmd0aCB8fCBhcmdzSWR4IDwgYXJndW1lbnRzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHZhciByZXN1bHQ7XG4gICAgICAgICAgICAgICAgaWYgKGNvbWJpbmVkSWR4IDwgcmVjZWl2ZWQubGVuZ3RoICYmICghX2lzUGxhY2Vob2xkZXIocmVjZWl2ZWRbY29tYmluZWRJZHhdKSB8fCBhcmdzSWR4ID49IGFyZ3VtZW50cy5sZW5ndGgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHJlY2VpdmVkW2NvbWJpbmVkSWR4XTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBhcmd1bWVudHNbYXJnc0lkeF07XG4gICAgICAgICAgICAgICAgICAgIGFyZ3NJZHggKz0gMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29tYmluZWRbY29tYmluZWRJZHhdID0gcmVzdWx0O1xuICAgICAgICAgICAgICAgIGlmICghX2lzUGxhY2Vob2xkZXIocmVzdWx0KSkge1xuICAgICAgICAgICAgICAgICAgICBsZWZ0IC09IDE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbWJpbmVkSWR4ICs9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbGVmdCA8PSAwID8gZm4uYXBwbHkodGhpcywgY29tYmluZWQpIDogX2FyaXR5KGxlZnQsIF9jdXJyeU4obGVuZ3RoLCBjb21iaW5lZCwgZm4pKTtcbiAgICAgICAgfTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIGZ1bmN0aW9uIHRoYXQgZGlzcGF0Y2hlcyB3aXRoIGRpZmZlcmVudCBzdHJhdGVnaWVzIGJhc2VkIG9uIHRoZVxuICAgICAqIG9iamVjdCBpbiBsaXN0IHBvc2l0aW9uIChsYXN0IGFyZ3VtZW50KS4gSWYgaXQgaXMgYW4gYXJyYXksIGV4ZWN1dGVzIFtmbl0uXG4gICAgICogT3RoZXJ3aXNlLCBpZiBpdCBoYXMgYSBmdW5jdGlvbiB3aXRoIFttZXRob2RuYW1lXSwgaXQgd2lsbCBleGVjdXRlIHRoYXRcbiAgICAgKiBmdW5jdGlvbiAoZnVuY3RvciBjYXNlKS4gT3RoZXJ3aXNlLCBpZiBpdCBpcyBhIHRyYW5zZm9ybWVyLCB1c2VzIHRyYW5zZHVjZXJcbiAgICAgKiBbeGZdIHRvIHJldHVybiBhIG5ldyB0cmFuc2Zvcm1lciAodHJhbnNkdWNlciBjYXNlKS4gT3RoZXJ3aXNlLCBpdCB3aWxsXG4gICAgICogZGVmYXVsdCB0byBleGVjdXRpbmcgW2ZuXS5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG1ldGhvZG5hbWUgcHJvcGVydHkgdG8gY2hlY2sgZm9yIGEgY3VzdG9tIGltcGxlbWVudGF0aW9uXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0geGYgdHJhbnNkdWNlciB0byBpbml0aWFsaXplIGlmIG9iamVjdCBpcyB0cmFuc2Zvcm1lclxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIGRlZmF1bHQgcmFtZGEgaW1wbGVtZW50YXRpb25cbiAgICAgKiBAcmV0dXJuIHtGdW5jdGlvbn0gQSBmdW5jdGlvbiB0aGF0IGRpc3BhdGNoZXMgb24gb2JqZWN0IGluIGxpc3QgcG9zaXRpb25cbiAgICAgKi9cbiAgICB2YXIgX2Rpc3BhdGNoYWJsZSA9IGZ1bmN0aW9uIF9kaXNwYXRjaGFibGUobWV0aG9kbmFtZSwgeGYsIGZuKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgbGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICAgICAgICAgIGlmIChsZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZm4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBvYmogPSBhcmd1bWVudHNbbGVuZ3RoIC0gMV07XG4gICAgICAgICAgICBpZiAoIV9pc0FycmF5KG9iaikpIHtcbiAgICAgICAgICAgICAgICB2YXIgYXJncyA9IF9zbGljZShhcmd1bWVudHMsIDAsIGxlbmd0aCAtIDEpO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb2JqW21ldGhvZG5hbWVdID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvYmpbbWV0aG9kbmFtZV0uYXBwbHkob2JqLCBhcmdzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKF9pc1RyYW5zZm9ybWVyKG9iaikpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRyYW5zZHVjZXIgPSB4Zi5hcHBseShudWxsLCBhcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRyYW5zZHVjZXIob2JqKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgfTtcbiAgICB9O1xuXG4gICAgdmFyIF9kcm9wTGFzdFdoaWxlID0gZnVuY3Rpb24gZHJvcExhc3RXaGlsZShwcmVkLCBsaXN0KSB7XG4gICAgICAgIHZhciBpZHggPSBsaXN0Lmxlbmd0aCAtIDE7XG4gICAgICAgIHdoaWxlIChpZHggPj0gMCAmJiBwcmVkKGxpc3RbaWR4XSkpIHtcbiAgICAgICAgICAgIGlkeCAtPSAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfc2xpY2UobGlzdCwgMCwgaWR4ICsgMSk7XG4gICAgfTtcblxuICAgIHZhciBfeGFsbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gWEFsbChmLCB4Zikge1xuICAgICAgICAgICAgdGhpcy54ZiA9IHhmO1xuICAgICAgICAgICAgdGhpcy5mID0gZjtcbiAgICAgICAgICAgIHRoaXMuYWxsID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBYQWxsLnByb3RvdHlwZVsnQEB0cmFuc2R1Y2VyL2luaXQnXSA9IF94ZkJhc2UuaW5pdDtcbiAgICAgICAgWEFsbC5wcm90b3R5cGVbJ0BAdHJhbnNkdWNlci9yZXN1bHQnXSA9IGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmFsbCkge1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMueGZbJ0BAdHJhbnNkdWNlci9zdGVwJ10ocmVzdWx0LCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLnhmWydAQHRyYW5zZHVjZXIvcmVzdWx0J10ocmVzdWx0KTtcbiAgICAgICAgfTtcbiAgICAgICAgWEFsbC5wcm90b3R5cGVbJ0BAdHJhbnNkdWNlci9zdGVwJ10gPSBmdW5jdGlvbiAocmVzdWx0LCBpbnB1dCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmYoaW5wdXQpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hbGwgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBfcmVkdWNlZCh0aGlzLnhmWydAQHRyYW5zZHVjZXIvc3RlcCddKHJlc3VsdCwgZmFsc2UpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBfY3VycnkyKGZ1bmN0aW9uIF94YWxsKGYsIHhmKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFhBbGwoZiwgeGYpO1xuICAgICAgICB9KTtcbiAgICB9KCk7XG5cbiAgICB2YXIgX3hhbnkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFhBbnkoZiwgeGYpIHtcbiAgICAgICAgICAgIHRoaXMueGYgPSB4ZjtcbiAgICAgICAgICAgIHRoaXMuZiA9IGY7XG4gICAgICAgICAgICB0aGlzLmFueSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIFhBbnkucHJvdG90eXBlWydAQHRyYW5zZHVjZXIvaW5pdCddID0gX3hmQmFzZS5pbml0O1xuICAgICAgICBYQW55LnByb3RvdHlwZVsnQEB0cmFuc2R1Y2VyL3Jlc3VsdCddID0gZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmFueSkge1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMueGZbJ0BAdHJhbnNkdWNlci9zdGVwJ10ocmVzdWx0LCBmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy54ZlsnQEB0cmFuc2R1Y2VyL3Jlc3VsdCddKHJlc3VsdCk7XG4gICAgICAgIH07XG4gICAgICAgIFhBbnkucHJvdG90eXBlWydAQHRyYW5zZHVjZXIvc3RlcCddID0gZnVuY3Rpb24gKHJlc3VsdCwgaW5wdXQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmYoaW5wdXQpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hbnkgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IF9yZWR1Y2VkKHRoaXMueGZbJ0BAdHJhbnNkdWNlci9zdGVwJ10ocmVzdWx0LCB0cnVlKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gX2N1cnJ5MihmdW5jdGlvbiBfeGFueShmLCB4Zikge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBYQW55KGYsIHhmKTtcbiAgICAgICAgfSk7XG4gICAgfSgpO1xuXG4gICAgdmFyIF94YXBlcnR1cmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFhBcGVydHVyZShuLCB4Zikge1xuICAgICAgICAgICAgdGhpcy54ZiA9IHhmO1xuICAgICAgICAgICAgdGhpcy5wb3MgPSAwO1xuICAgICAgICAgICAgdGhpcy5mdWxsID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmFjYyA9IG5ldyBBcnJheShuKTtcbiAgICAgICAgfVxuICAgICAgICBYQXBlcnR1cmUucHJvdG90eXBlWydAQHRyYW5zZHVjZXIvaW5pdCddID0gX3hmQmFzZS5pbml0O1xuICAgICAgICBYQXBlcnR1cmUucHJvdG90eXBlWydAQHRyYW5zZHVjZXIvcmVzdWx0J10gPSBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICB0aGlzLmFjYyA9IG51bGw7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy54ZlsnQEB0cmFuc2R1Y2VyL3Jlc3VsdCddKHJlc3VsdCk7XG4gICAgICAgIH07XG4gICAgICAgIFhBcGVydHVyZS5wcm90b3R5cGVbJ0BAdHJhbnNkdWNlci9zdGVwJ10gPSBmdW5jdGlvbiAocmVzdWx0LCBpbnB1dCkge1xuICAgICAgICAgICAgdGhpcy5zdG9yZShpbnB1dCk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5mdWxsID8gdGhpcy54ZlsnQEB0cmFuc2R1Y2VyL3N0ZXAnXShyZXN1bHQsIHRoaXMuZ2V0Q29weSgpKSA6IHJlc3VsdDtcbiAgICAgICAgfTtcbiAgICAgICAgWEFwZXJ0dXJlLnByb3RvdHlwZS5zdG9yZSA9IGZ1bmN0aW9uIChpbnB1dCkge1xuICAgICAgICAgICAgdGhpcy5hY2NbdGhpcy5wb3NdID0gaW5wdXQ7XG4gICAgICAgICAgICB0aGlzLnBvcyArPSAxO1xuICAgICAgICAgICAgaWYgKHRoaXMucG9zID09PSB0aGlzLmFjYy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBvcyA9IDA7XG4gICAgICAgICAgICAgICAgdGhpcy5mdWxsID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgWEFwZXJ0dXJlLnByb3RvdHlwZS5nZXRDb3B5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9jb25jYXQoX3NsaWNlKHRoaXMuYWNjLCB0aGlzLnBvcyksIF9zbGljZSh0aGlzLmFjYywgMCwgdGhpcy5wb3MpKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIF9jdXJyeTIoZnVuY3Rpb24gX3hhcGVydHVyZShuLCB4Zikge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBYQXBlcnR1cmUobiwgeGYpO1xuICAgICAgICB9KTtcbiAgICB9KCk7XG5cbiAgICB2YXIgX3hkcm9wID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBYRHJvcChuLCB4Zikge1xuICAgICAgICAgICAgdGhpcy54ZiA9IHhmO1xuICAgICAgICAgICAgdGhpcy5uID0gbjtcbiAgICAgICAgfVxuICAgICAgICBYRHJvcC5wcm90b3R5cGVbJ0BAdHJhbnNkdWNlci9pbml0J10gPSBfeGZCYXNlLmluaXQ7XG4gICAgICAgIFhEcm9wLnByb3RvdHlwZVsnQEB0cmFuc2R1Y2VyL3Jlc3VsdCddID0gX3hmQmFzZS5yZXN1bHQ7XG4gICAgICAgIFhEcm9wLnByb3RvdHlwZVsnQEB0cmFuc2R1Y2VyL3N0ZXAnXSA9IGZ1bmN0aW9uIChyZXN1bHQsIGlucHV0KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5uID4gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMubiAtPSAxO1xuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy54ZlsnQEB0cmFuc2R1Y2VyL3N0ZXAnXShyZXN1bHQsIGlucHV0KTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIF9jdXJyeTIoZnVuY3Rpb24gX3hkcm9wKG4sIHhmKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFhEcm9wKG4sIHhmKTtcbiAgICAgICAgfSk7XG4gICAgfSgpO1xuXG4gICAgdmFyIF94ZHJvcExhc3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFhEcm9wTGFzdChuLCB4Zikge1xuICAgICAgICAgICAgdGhpcy54ZiA9IHhmO1xuICAgICAgICAgICAgdGhpcy5wb3MgPSAwO1xuICAgICAgICAgICAgdGhpcy5mdWxsID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmFjYyA9IG5ldyBBcnJheShuKTtcbiAgICAgICAgfVxuICAgICAgICBYRHJvcExhc3QucHJvdG90eXBlWydAQHRyYW5zZHVjZXIvaW5pdCddID0gX3hmQmFzZS5pbml0O1xuICAgICAgICBYRHJvcExhc3QucHJvdG90eXBlWydAQHRyYW5zZHVjZXIvcmVzdWx0J10gPSBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICB0aGlzLmFjYyA9IG51bGw7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy54ZlsnQEB0cmFuc2R1Y2VyL3Jlc3VsdCddKHJlc3VsdCk7XG4gICAgICAgIH07XG4gICAgICAgIFhEcm9wTGFzdC5wcm90b3R5cGVbJ0BAdHJhbnNkdWNlci9zdGVwJ10gPSBmdW5jdGlvbiAocmVzdWx0LCBpbnB1dCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuZnVsbCkge1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMueGZbJ0BAdHJhbnNkdWNlci9zdGVwJ10ocmVzdWx0LCB0aGlzLmFjY1t0aGlzLnBvc10pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zdG9yZShpbnB1dCk7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9O1xuICAgICAgICBYRHJvcExhc3QucHJvdG90eXBlLnN0b3JlID0gZnVuY3Rpb24gKGlucHV0KSB7XG4gICAgICAgICAgICB0aGlzLmFjY1t0aGlzLnBvc10gPSBpbnB1dDtcbiAgICAgICAgICAgIHRoaXMucG9zICs9IDE7XG4gICAgICAgICAgICBpZiAodGhpcy5wb3MgPT09IHRoaXMuYWNjLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRoaXMucG9zID0gMDtcbiAgICAgICAgICAgICAgICB0aGlzLmZ1bGwgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gX2N1cnJ5MihmdW5jdGlvbiBfeGRyb3BMYXN0KG4sIHhmKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFhEcm9wTGFzdChuLCB4Zik7XG4gICAgICAgIH0pO1xuICAgIH0oKTtcblxuICAgIHZhciBfeGRyb3BSZXBlYXRzV2l0aCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gWERyb3BSZXBlYXRzV2l0aChwcmVkLCB4Zikge1xuICAgICAgICAgICAgdGhpcy54ZiA9IHhmO1xuICAgICAgICAgICAgdGhpcy5wcmVkID0gcHJlZDtcbiAgICAgICAgICAgIHRoaXMubGFzdFZhbHVlID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgdGhpcy5zZWVuRmlyc3RWYWx1ZSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIFhEcm9wUmVwZWF0c1dpdGgucHJvdG90eXBlWydAQHRyYW5zZHVjZXIvaW5pdCddID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMueGZbJ0BAdHJhbnNkdWNlci9pbml0J10oKTtcbiAgICAgICAgfTtcbiAgICAgICAgWERyb3BSZXBlYXRzV2l0aC5wcm90b3R5cGVbJ0BAdHJhbnNkdWNlci9yZXN1bHQnXSA9IGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnhmWydAQHRyYW5zZHVjZXIvcmVzdWx0J10ocmVzdWx0KTtcbiAgICAgICAgfTtcbiAgICAgICAgWERyb3BSZXBlYXRzV2l0aC5wcm90b3R5cGVbJ0BAdHJhbnNkdWNlci9zdGVwJ10gPSBmdW5jdGlvbiAocmVzdWx0LCBpbnB1dCkge1xuICAgICAgICAgICAgdmFyIHNhbWVBc0xhc3QgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmICghdGhpcy5zZWVuRmlyc3RWYWx1ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VlbkZpcnN0VmFsdWUgPSB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnByZWQodGhpcy5sYXN0VmFsdWUsIGlucHV0KSkge1xuICAgICAgICAgICAgICAgIHNhbWVBc0xhc3QgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5sYXN0VmFsdWUgPSBpbnB1dDtcbiAgICAgICAgICAgIHJldHVybiBzYW1lQXNMYXN0ID8gcmVzdWx0IDogdGhpcy54ZlsnQEB0cmFuc2R1Y2VyL3N0ZXAnXShyZXN1bHQsIGlucHV0KTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIF9jdXJyeTIoZnVuY3Rpb24gX3hkcm9wUmVwZWF0c1dpdGgocHJlZCwgeGYpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgWERyb3BSZXBlYXRzV2l0aChwcmVkLCB4Zik7XG4gICAgICAgIH0pO1xuICAgIH0oKTtcblxuICAgIHZhciBfeGRyb3BXaGlsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gWERyb3BXaGlsZShmLCB4Zikge1xuICAgICAgICAgICAgdGhpcy54ZiA9IHhmO1xuICAgICAgICAgICAgdGhpcy5mID0gZjtcbiAgICAgICAgfVxuICAgICAgICBYRHJvcFdoaWxlLnByb3RvdHlwZVsnQEB0cmFuc2R1Y2VyL2luaXQnXSA9IF94ZkJhc2UuaW5pdDtcbiAgICAgICAgWERyb3BXaGlsZS5wcm90b3R5cGVbJ0BAdHJhbnNkdWNlci9yZXN1bHQnXSA9IF94ZkJhc2UucmVzdWx0O1xuICAgICAgICBYRHJvcFdoaWxlLnByb3RvdHlwZVsnQEB0cmFuc2R1Y2VyL3N0ZXAnXSA9IGZ1bmN0aW9uIChyZXN1bHQsIGlucHV0KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5mKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZihpbnB1dCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5mID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLnhmWydAQHRyYW5zZHVjZXIvc3RlcCddKHJlc3VsdCwgaW5wdXQpO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gX2N1cnJ5MihmdW5jdGlvbiBfeGRyb3BXaGlsZShmLCB4Zikge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBYRHJvcFdoaWxlKGYsIHhmKTtcbiAgICAgICAgfSk7XG4gICAgfSgpO1xuXG4gICAgdmFyIF94ZmlsdGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBYRmlsdGVyKGYsIHhmKSB7XG4gICAgICAgICAgICB0aGlzLnhmID0geGY7XG4gICAgICAgICAgICB0aGlzLmYgPSBmO1xuICAgICAgICB9XG4gICAgICAgIFhGaWx0ZXIucHJvdG90eXBlWydAQHRyYW5zZHVjZXIvaW5pdCddID0gX3hmQmFzZS5pbml0O1xuICAgICAgICBYRmlsdGVyLnByb3RvdHlwZVsnQEB0cmFuc2R1Y2VyL3Jlc3VsdCddID0gX3hmQmFzZS5yZXN1bHQ7XG4gICAgICAgIFhGaWx0ZXIucHJvdG90eXBlWydAQHRyYW5zZHVjZXIvc3RlcCddID0gZnVuY3Rpb24gKHJlc3VsdCwgaW5wdXQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmYoaW5wdXQpID8gdGhpcy54ZlsnQEB0cmFuc2R1Y2VyL3N0ZXAnXShyZXN1bHQsIGlucHV0KSA6IHJlc3VsdDtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIF9jdXJyeTIoZnVuY3Rpb24gX3hmaWx0ZXIoZiwgeGYpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgWEZpbHRlcihmLCB4Zik7XG4gICAgICAgIH0pO1xuICAgIH0oKTtcblxuICAgIHZhciBfeGZpbmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFhGaW5kKGYsIHhmKSB7XG4gICAgICAgICAgICB0aGlzLnhmID0geGY7XG4gICAgICAgICAgICB0aGlzLmYgPSBmO1xuICAgICAgICAgICAgdGhpcy5mb3VuZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIFhGaW5kLnByb3RvdHlwZVsnQEB0cmFuc2R1Y2VyL2luaXQnXSA9IF94ZkJhc2UuaW5pdDtcbiAgICAgICAgWEZpbmQucHJvdG90eXBlWydAQHRyYW5zZHVjZXIvcmVzdWx0J10gPSBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuZm91bmQpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSB0aGlzLnhmWydAQHRyYW5zZHVjZXIvc3RlcCddKHJlc3VsdCwgdm9pZCAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLnhmWydAQHRyYW5zZHVjZXIvcmVzdWx0J10ocmVzdWx0KTtcbiAgICAgICAgfTtcbiAgICAgICAgWEZpbmQucHJvdG90eXBlWydAQHRyYW5zZHVjZXIvc3RlcCddID0gZnVuY3Rpb24gKHJlc3VsdCwgaW5wdXQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmYoaW5wdXQpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5mb3VuZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gX3JlZHVjZWQodGhpcy54ZlsnQEB0cmFuc2R1Y2VyL3N0ZXAnXShyZXN1bHQsIGlucHV0KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gX2N1cnJ5MihmdW5jdGlvbiBfeGZpbmQoZiwgeGYpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgWEZpbmQoZiwgeGYpO1xuICAgICAgICB9KTtcbiAgICB9KCk7XG5cbiAgICB2YXIgX3hmaW5kSW5kZXggPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFhGaW5kSW5kZXgoZiwgeGYpIHtcbiAgICAgICAgICAgIHRoaXMueGYgPSB4ZjtcbiAgICAgICAgICAgIHRoaXMuZiA9IGY7XG4gICAgICAgICAgICB0aGlzLmlkeCA9IC0xO1xuICAgICAgICAgICAgdGhpcy5mb3VuZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIFhGaW5kSW5kZXgucHJvdG90eXBlWydAQHRyYW5zZHVjZXIvaW5pdCddID0gX3hmQmFzZS5pbml0O1xuICAgICAgICBYRmluZEluZGV4LnByb3RvdHlwZVsnQEB0cmFuc2R1Y2VyL3Jlc3VsdCddID0gZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmZvdW5kKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy54ZlsnQEB0cmFuc2R1Y2VyL3N0ZXAnXShyZXN1bHQsIC0xKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLnhmWydAQHRyYW5zZHVjZXIvcmVzdWx0J10ocmVzdWx0KTtcbiAgICAgICAgfTtcbiAgICAgICAgWEZpbmRJbmRleC5wcm90b3R5cGVbJ0BAdHJhbnNkdWNlci9zdGVwJ10gPSBmdW5jdGlvbiAocmVzdWx0LCBpbnB1dCkge1xuICAgICAgICAgICAgdGhpcy5pZHggKz0gMTtcbiAgICAgICAgICAgIGlmICh0aGlzLmYoaW5wdXQpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5mb3VuZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gX3JlZHVjZWQodGhpcy54ZlsnQEB0cmFuc2R1Y2VyL3N0ZXAnXShyZXN1bHQsIHRoaXMuaWR4KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gX2N1cnJ5MihmdW5jdGlvbiBfeGZpbmRJbmRleChmLCB4Zikge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBYRmluZEluZGV4KGYsIHhmKTtcbiAgICAgICAgfSk7XG4gICAgfSgpO1xuXG4gICAgdmFyIF94ZmluZExhc3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFhGaW5kTGFzdChmLCB4Zikge1xuICAgICAgICAgICAgdGhpcy54ZiA9IHhmO1xuICAgICAgICAgICAgdGhpcy5mID0gZjtcbiAgICAgICAgfVxuICAgICAgICBYRmluZExhc3QucHJvdG90eXBlWydAQHRyYW5zZHVjZXIvaW5pdCddID0gX3hmQmFzZS5pbml0O1xuICAgICAgICBYRmluZExhc3QucHJvdG90eXBlWydAQHRyYW5zZHVjZXIvcmVzdWx0J10gPSBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy54ZlsnQEB0cmFuc2R1Y2VyL3Jlc3VsdCddKHRoaXMueGZbJ0BAdHJhbnNkdWNlci9zdGVwJ10ocmVzdWx0LCB0aGlzLmxhc3QpKTtcbiAgICAgICAgfTtcbiAgICAgICAgWEZpbmRMYXN0LnByb3RvdHlwZVsnQEB0cmFuc2R1Y2VyL3N0ZXAnXSA9IGZ1bmN0aW9uIChyZXN1bHQsIGlucHV0KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5mKGlucHV0KSkge1xuICAgICAgICAgICAgICAgIHRoaXMubGFzdCA9IGlucHV0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIF9jdXJyeTIoZnVuY3Rpb24gX3hmaW5kTGFzdChmLCB4Zikge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBYRmluZExhc3QoZiwgeGYpO1xuICAgICAgICB9KTtcbiAgICB9KCk7XG5cbiAgICB2YXIgX3hmaW5kTGFzdEluZGV4ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBYRmluZExhc3RJbmRleChmLCB4Zikge1xuICAgICAgICAgICAgdGhpcy54ZiA9IHhmO1xuICAgICAgICAgICAgdGhpcy5mID0gZjtcbiAgICAgICAgICAgIHRoaXMuaWR4ID0gLTE7XG4gICAgICAgICAgICB0aGlzLmxhc3RJZHggPSAtMTtcbiAgICAgICAgfVxuICAgICAgICBYRmluZExhc3RJbmRleC5wcm90b3R5cGVbJ0BAdHJhbnNkdWNlci9pbml0J10gPSBfeGZCYXNlLmluaXQ7XG4gICAgICAgIFhGaW5kTGFzdEluZGV4LnByb3RvdHlwZVsnQEB0cmFuc2R1Y2VyL3Jlc3VsdCddID0gZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMueGZbJ0BAdHJhbnNkdWNlci9yZXN1bHQnXSh0aGlzLnhmWydAQHRyYW5zZHVjZXIvc3RlcCddKHJlc3VsdCwgdGhpcy5sYXN0SWR4KSk7XG4gICAgICAgIH07XG4gICAgICAgIFhGaW5kTGFzdEluZGV4LnByb3RvdHlwZVsnQEB0cmFuc2R1Y2VyL3N0ZXAnXSA9IGZ1bmN0aW9uIChyZXN1bHQsIGlucHV0KSB7XG4gICAgICAgICAgICB0aGlzLmlkeCArPSAxO1xuICAgICAgICAgICAgaWYgKHRoaXMuZihpbnB1dCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxhc3RJZHggPSB0aGlzLmlkeDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBfY3VycnkyKGZ1bmN0aW9uIF94ZmluZExhc3RJbmRleChmLCB4Zikge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBYRmluZExhc3RJbmRleChmLCB4Zik7XG4gICAgICAgIH0pO1xuICAgIH0oKTtcblxuICAgIHZhciBfeG1hcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gWE1hcChmLCB4Zikge1xuICAgICAgICAgICAgdGhpcy54ZiA9IHhmO1xuICAgICAgICAgICAgdGhpcy5mID0gZjtcbiAgICAgICAgfVxuICAgICAgICBYTWFwLnByb3RvdHlwZVsnQEB0cmFuc2R1Y2VyL2luaXQnXSA9IF94ZkJhc2UuaW5pdDtcbiAgICAgICAgWE1hcC5wcm90b3R5cGVbJ0BAdHJhbnNkdWNlci9yZXN1bHQnXSA9IF94ZkJhc2UucmVzdWx0O1xuICAgICAgICBYTWFwLnByb3RvdHlwZVsnQEB0cmFuc2R1Y2VyL3N0ZXAnXSA9IGZ1bmN0aW9uIChyZXN1bHQsIGlucHV0KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy54ZlsnQEB0cmFuc2R1Y2VyL3N0ZXAnXShyZXN1bHQsIHRoaXMuZihpbnB1dCkpO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gX2N1cnJ5MihmdW5jdGlvbiBfeG1hcChmLCB4Zikge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBYTWFwKGYsIHhmKTtcbiAgICAgICAgfSk7XG4gICAgfSgpO1xuXG4gICAgdmFyIF94dGFrZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gWFRha2UobiwgeGYpIHtcbiAgICAgICAgICAgIHRoaXMueGYgPSB4ZjtcbiAgICAgICAgICAgIHRoaXMubiA9IG47XG4gICAgICAgIH1cbiAgICAgICAgWFRha2UucHJvdG90eXBlWydAQHRyYW5zZHVjZXIvaW5pdCddID0gX3hmQmFzZS5pbml0O1xuICAgICAgICBYVGFrZS5wcm90b3R5cGVbJ0BAdHJhbnNkdWNlci9yZXN1bHQnXSA9IF94ZkJhc2UucmVzdWx0O1xuICAgICAgICBYVGFrZS5wcm90b3R5cGVbJ0BAdHJhbnNkdWNlci9zdGVwJ10gPSBmdW5jdGlvbiAocmVzdWx0LCBpbnB1dCkge1xuICAgICAgICAgICAgaWYgKHRoaXMubiA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBfcmVkdWNlZChyZXN1bHQpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLm4gLT0gMTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy54ZlsnQEB0cmFuc2R1Y2VyL3N0ZXAnXShyZXN1bHQsIGlucHV0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIF9jdXJyeTIoZnVuY3Rpb24gX3h0YWtlKG4sIHhmKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFhUYWtlKG4sIHhmKTtcbiAgICAgICAgfSk7XG4gICAgfSgpO1xuXG4gICAgdmFyIF94dGFrZVdoaWxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBYVGFrZVdoaWxlKGYsIHhmKSB7XG4gICAgICAgICAgICB0aGlzLnhmID0geGY7XG4gICAgICAgICAgICB0aGlzLmYgPSBmO1xuICAgICAgICB9XG4gICAgICAgIFhUYWtlV2hpbGUucHJvdG90eXBlWydAQHRyYW5zZHVjZXIvaW5pdCddID0gX3hmQmFzZS5pbml0O1xuICAgICAgICBYVGFrZVdoaWxlLnByb3RvdHlwZVsnQEB0cmFuc2R1Y2VyL3Jlc3VsdCddID0gX3hmQmFzZS5yZXN1bHQ7XG4gICAgICAgIFhUYWtlV2hpbGUucHJvdG90eXBlWydAQHRyYW5zZHVjZXIvc3RlcCddID0gZnVuY3Rpb24gKHJlc3VsdCwgaW5wdXQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmYoaW5wdXQpID8gdGhpcy54ZlsnQEB0cmFuc2R1Y2VyL3N0ZXAnXShyZXN1bHQsIGlucHV0KSA6IF9yZWR1Y2VkKHJlc3VsdCk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBfY3VycnkyKGZ1bmN0aW9uIF94dGFrZVdoaWxlKGYsIHhmKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFhUYWtlV2hpbGUoZiwgeGYpO1xuICAgICAgICB9KTtcbiAgICB9KCk7XG5cbiAgICAvKipcbiAgICAgKiBBZGRzIHR3byB2YWx1ZXMuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBNYXRoXG4gICAgICogQHNpZyBOdW1iZXIgLT4gTnVtYmVyIC0+IE51bWJlclxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBhXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGJcbiAgICAgKiBAcmV0dXJuIHtOdW1iZXJ9XG4gICAgICogQHNlZSBSLnN1YnRyYWN0XG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5hZGQoMiwgMyk7ICAgICAgIC8vPT4gIDVcbiAgICAgKiAgICAgIFIuYWRkKDcpKDEwKTsgICAgICAvLz0+IDE3XG4gICAgICovXG4gICAgdmFyIGFkZCA9IF9jdXJyeTIoZnVuY3Rpb24gYWRkKGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIE51bWJlcihhKSArIE51bWJlcihiKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIEFwcGxpZXMgYSBmdW5jdGlvbiB0byB0aGUgdmFsdWUgYXQgdGhlIGdpdmVuIGluZGV4IG9mIGFuIGFycmF5LCByZXR1cm5pbmcgYVxuICAgICAqIG5ldyBjb3B5IG9mIHRoZSBhcnJheSB3aXRoIHRoZSBlbGVtZW50IGF0IHRoZSBnaXZlbiBpbmRleCByZXBsYWNlZCB3aXRoIHRoZVxuICAgICAqIHJlc3VsdCBvZiB0aGUgZnVuY3Rpb24gYXBwbGljYXRpb24uXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjE0LjBcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgKGEgLT4gYSkgLT4gTnVtYmVyIC0+IFthXSAtPiBbYV1cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgZnVuY3Rpb24gdG8gYXBwbHkuXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGlkeCBUaGUgaW5kZXguXG4gICAgICogQHBhcmFtIHtBcnJheXxBcmd1bWVudHN9IGxpc3QgQW4gYXJyYXktbGlrZSBvYmplY3Qgd2hvc2UgdmFsdWVcbiAgICAgKiAgICAgICAgYXQgdGhlIHN1cHBsaWVkIGluZGV4IHdpbGwgYmUgcmVwbGFjZWQuXG4gICAgICogQHJldHVybiB7QXJyYXl9IEEgY29weSBvZiB0aGUgc3VwcGxpZWQgYXJyYXktbGlrZSBvYmplY3Qgd2l0aFxuICAgICAqICAgICAgICAgdGhlIGVsZW1lbnQgYXQgaW5kZXggYGlkeGAgcmVwbGFjZWQgd2l0aCB0aGUgdmFsdWVcbiAgICAgKiAgICAgICAgIHJldHVybmVkIGJ5IGFwcGx5aW5nIGBmbmAgdG8gdGhlIGV4aXN0aW5nIGVsZW1lbnQuXG4gICAgICogQHNlZSBSLnVwZGF0ZVxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIuYWRqdXN0KFIuYWRkKDEwKSwgMSwgWzAsIDEsIDJdKTsgICAgIC8vPT4gWzAsIDExLCAyXVxuICAgICAqICAgICAgUi5hZGp1c3QoUi5hZGQoMTApKSgxKShbMCwgMSwgMl0pOyAgICAgLy89PiBbMCwgMTEsIDJdXG4gICAgICovXG4gICAgdmFyIGFkanVzdCA9IF9jdXJyeTMoZnVuY3Rpb24gYWRqdXN0KGZuLCBpZHgsIGxpc3QpIHtcbiAgICAgICAgaWYgKGlkeCA+PSBsaXN0Lmxlbmd0aCB8fCBpZHggPCAtbGlzdC5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiBsaXN0O1xuICAgICAgICB9XG4gICAgICAgIHZhciBzdGFydCA9IGlkeCA8IDAgPyBsaXN0Lmxlbmd0aCA6IDA7XG4gICAgICAgIHZhciBfaWR4ID0gc3RhcnQgKyBpZHg7XG4gICAgICAgIHZhciBfbGlzdCA9IF9jb25jYXQobGlzdCk7XG4gICAgICAgIF9saXN0W19pZHhdID0gZm4obGlzdFtfaWR4XSk7XG4gICAgICAgIHJldHVybiBfbGlzdDtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYHRydWVgIGlmIGFsbCBlbGVtZW50cyBvZiB0aGUgbGlzdCBtYXRjaCB0aGUgcHJlZGljYXRlLCBgZmFsc2VgIGlmXG4gICAgICogdGhlcmUgYXJlIGFueSB0aGF0IGRvbid0LlxuICAgICAqXG4gICAgICogRGlzcGF0Y2hlcyB0byB0aGUgYGFsbGAgbWV0aG9kIG9mIHRoZSBzZWNvbmQgYXJndW1lbnQsIGlmIHByZXNlbnQuXG4gICAgICpcbiAgICAgKiBBY3RzIGFzIGEgdHJhbnNkdWNlciBpZiBhIHRyYW5zZm9ybWVyIGlzIGdpdmVuIGluIGxpc3QgcG9zaXRpb24uXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyAoYSAtPiBCb29sZWFuKSAtPiBbYV0gLT4gQm9vbGVhblxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBwcmVkaWNhdGUgZnVuY3Rpb24uXG4gICAgICogQHBhcmFtIHtBcnJheX0gbGlzdCBUaGUgYXJyYXkgdG8gY29uc2lkZXIuXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn0gYHRydWVgIGlmIHRoZSBwcmVkaWNhdGUgaXMgc2F0aXNmaWVkIGJ5IGV2ZXJ5IGVsZW1lbnQsIGBmYWxzZWBcbiAgICAgKiAgICAgICAgIG90aGVyd2lzZS5cbiAgICAgKiBAc2VlIFIuYW55LCBSLm5vbmUsIFIudHJhbnNkdWNlXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIGxlc3NUaGFuMiA9IFIuZmxpcChSLmx0KSgyKTtcbiAgICAgKiAgICAgIHZhciBsZXNzVGhhbjMgPSBSLmZsaXAoUi5sdCkoMyk7XG4gICAgICogICAgICBSLmFsbChsZXNzVGhhbjIpKFsxLCAyXSk7IC8vPT4gZmFsc2VcbiAgICAgKiAgICAgIFIuYWxsKGxlc3NUaGFuMykoWzEsIDJdKTsgLy89PiB0cnVlXG4gICAgICovXG4gICAgdmFyIGFsbCA9IF9jdXJyeTIoX2Rpc3BhdGNoYWJsZSgnYWxsJywgX3hhbGwsIGZ1bmN0aW9uIGFsbChmbiwgbGlzdCkge1xuICAgICAgICB2YXIgaWR4ID0gMDtcbiAgICAgICAgd2hpbGUgKGlkeCA8IGxpc3QubGVuZ3RoKSB7XG4gICAgICAgICAgICBpZiAoIWZuKGxpc3RbaWR4XSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZHggKz0gMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9KSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgZnVuY3Rpb24gdGhhdCBhbHdheXMgcmV0dXJucyB0aGUgZ2l2ZW4gdmFsdWUuIE5vdGUgdGhhdCBmb3JcbiAgICAgKiBub24tcHJpbWl0aXZlcyB0aGUgdmFsdWUgcmV0dXJuZWQgaXMgYSByZWZlcmVuY2UgdG8gdGhlIG9yaWdpbmFsIHZhbHVlLlxuICAgICAqXG4gICAgICogVGhpcyBmdW5jdGlvbiBpcyBrbm93biBhcyBgY29uc3RgLCBgY29uc3RhbnRgLCBvciBgS2AgKGZvciBLIGNvbWJpbmF0b3IpIGluXG4gICAgICogb3RoZXIgbGFuZ3VhZ2VzIGFuZCBsaWJyYXJpZXMuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICAgICAqIEBzaWcgYSAtPiAoKiAtPiBhKVxuICAgICAqIEBwYXJhbSB7Kn0gdmFsIFRoZSB2YWx1ZSB0byB3cmFwIGluIGEgZnVuY3Rpb25cbiAgICAgKiBAcmV0dXJuIHtGdW5jdGlvbn0gQSBGdW5jdGlvbiA6OiAqIC0+IHZhbC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgdCA9IFIuYWx3YXlzKCdUZWUnKTtcbiAgICAgKiAgICAgIHQoKTsgLy89PiAnVGVlJ1xuICAgICAqL1xuICAgIHZhciBhbHdheXMgPSBfY3VycnkxKGZ1bmN0aW9uIGFsd2F5cyh2YWwpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB2YWw7XG4gICAgICAgIH07XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGB0cnVlYCBpZiBib3RoIGFyZ3VtZW50cyBhcmUgYHRydWVgOyBgZmFsc2VgIG90aGVyd2lzZS5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4wXG4gICAgICogQGNhdGVnb3J5IExvZ2ljXG4gICAgICogQHNpZyAqIC0+ICogLT4gKlxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gYSBBIGJvb2xlYW4gdmFsdWVcbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IGIgQSBib29sZWFuIHZhbHVlXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn0gYHRydWVgIGlmIGJvdGggYXJndW1lbnRzIGFyZSBgdHJ1ZWAsIGBmYWxzZWAgb3RoZXJ3aXNlXG4gICAgICogQHNlZSBSLmJvdGhcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLmFuZCh0cnVlLCB0cnVlKTsgLy89PiB0cnVlXG4gICAgICogICAgICBSLmFuZCh0cnVlLCBmYWxzZSk7IC8vPT4gZmFsc2VcbiAgICAgKiAgICAgIFIuYW5kKGZhbHNlLCB0cnVlKTsgLy89PiBmYWxzZVxuICAgICAqICAgICAgUi5hbmQoZmFsc2UsIGZhbHNlKTsgLy89PiBmYWxzZVxuICAgICAqL1xuICAgIHZhciBhbmQgPSBfY3VycnkyKGZ1bmN0aW9uIGFuZChhLCBiKSB7XG4gICAgICAgIHJldHVybiBhICYmIGI7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGB0cnVlYCBpZiBhdCBsZWFzdCBvbmUgb2YgZWxlbWVudHMgb2YgdGhlIGxpc3QgbWF0Y2ggdGhlIHByZWRpY2F0ZSxcbiAgICAgKiBgZmFsc2VgIG90aGVyd2lzZS5cbiAgICAgKlxuICAgICAqIERpc3BhdGNoZXMgdG8gdGhlIGBhbnlgIG1ldGhvZCBvZiB0aGUgc2Vjb25kIGFyZ3VtZW50LCBpZiBwcmVzZW50LlxuICAgICAqXG4gICAgICogQWN0cyBhcyBhIHRyYW5zZHVjZXIgaWYgYSB0cmFuc2Zvcm1lciBpcyBnaXZlbiBpbiBsaXN0IHBvc2l0aW9uLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgKGEgLT4gQm9vbGVhbikgLT4gW2FdIC0+IEJvb2xlYW5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgcHJlZGljYXRlIGZ1bmN0aW9uLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGxpc3QgVGhlIGFycmF5IHRvIGNvbnNpZGVyLlxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IGB0cnVlYCBpZiB0aGUgcHJlZGljYXRlIGlzIHNhdGlzZmllZCBieSBhdCBsZWFzdCBvbmUgZWxlbWVudCwgYGZhbHNlYFxuICAgICAqICAgICAgICAgb3RoZXJ3aXNlLlxuICAgICAqIEBzZWUgUi5hbGwsIFIubm9uZSwgUi50cmFuc2R1Y2VcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgbGVzc1RoYW4wID0gUi5mbGlwKFIubHQpKDApO1xuICAgICAqICAgICAgdmFyIGxlc3NUaGFuMiA9IFIuZmxpcChSLmx0KSgyKTtcbiAgICAgKiAgICAgIFIuYW55KGxlc3NUaGFuMCkoWzEsIDJdKTsgLy89PiBmYWxzZVxuICAgICAqICAgICAgUi5hbnkobGVzc1RoYW4yKShbMSwgMl0pOyAvLz0+IHRydWVcbiAgICAgKi9cbiAgICB2YXIgYW55ID0gX2N1cnJ5MihfZGlzcGF0Y2hhYmxlKCdhbnknLCBfeGFueSwgZnVuY3Rpb24gYW55KGZuLCBsaXN0KSB7XG4gICAgICAgIHZhciBpZHggPSAwO1xuICAgICAgICB3aGlsZSAoaWR4IDwgbGlzdC5sZW5ndGgpIHtcbiAgICAgICAgICAgIGlmIChmbihsaXN0W2lkeF0pKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZHggKz0gMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSkpO1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIG5ldyBsaXN0LCBjb21wb3NlZCBvZiBuLXR1cGxlcyBvZiBjb25zZWN1dGl2ZSBlbGVtZW50cyBJZiBgbmAgaXNcbiAgICAgKiBncmVhdGVyIHRoYW4gdGhlIGxlbmd0aCBvZiB0aGUgbGlzdCwgYW4gZW1wdHkgbGlzdCBpcyByZXR1cm5lZC5cbiAgICAgKlxuICAgICAqIERpc3BhdGNoZXMgdG8gdGhlIGBhcGVydHVyZWAgbWV0aG9kIG9mIHRoZSBzZWNvbmQgYXJndW1lbnQsIGlmIHByZXNlbnQuXG4gICAgICpcbiAgICAgKiBBY3RzIGFzIGEgdHJhbnNkdWNlciBpZiBhIHRyYW5zZm9ybWVyIGlzIGdpdmVuIGluIGxpc3QgcG9zaXRpb24uXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEyLjBcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgTnVtYmVyIC0+IFthXSAtPiBbW2FdXVxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBuIFRoZSBzaXplIG9mIHRoZSB0dXBsZXMgdG8gY3JlYXRlXG4gICAgICogQHBhcmFtIHtBcnJheX0gbGlzdCBUaGUgbGlzdCB0byBzcGxpdCBpbnRvIGBuYC10dXBsZXNcbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gVGhlIG5ldyBsaXN0LlxuICAgICAqIEBzZWUgUi50cmFuc2R1Y2VcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLmFwZXJ0dXJlKDIsIFsxLCAyLCAzLCA0LCA1XSk7IC8vPT4gW1sxLCAyXSwgWzIsIDNdLCBbMywgNF0sIFs0LCA1XV1cbiAgICAgKiAgICAgIFIuYXBlcnR1cmUoMywgWzEsIDIsIDMsIDQsIDVdKTsgLy89PiBbWzEsIDIsIDNdLCBbMiwgMywgNF0sIFszLCA0LCA1XV1cbiAgICAgKiAgICAgIFIuYXBlcnR1cmUoNywgWzEsIDIsIDMsIDQsIDVdKTsgLy89PiBbXVxuICAgICAqL1xuICAgIHZhciBhcGVydHVyZSA9IF9jdXJyeTIoX2Rpc3BhdGNoYWJsZSgnYXBlcnR1cmUnLCBfeGFwZXJ0dXJlLCBfYXBlcnR1cmUpKTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBuZXcgbGlzdCBjb250YWluaW5nIHRoZSBjb250ZW50cyBvZiB0aGUgZ2l2ZW4gbGlzdCwgZm9sbG93ZWQgYnlcbiAgICAgKiB0aGUgZ2l2ZW4gZWxlbWVudC5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4wXG4gICAgICogQGNhdGVnb3J5IExpc3RcbiAgICAgKiBAc2lnIGEgLT4gW2FdIC0+IFthXVxuICAgICAqIEBwYXJhbSB7Kn0gZWwgVGhlIGVsZW1lbnQgdG8gYWRkIHRvIHRoZSBlbmQgb2YgdGhlIG5ldyBsaXN0LlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGxpc3QgVGhlIGxpc3Qgd2hvc2UgY29udGVudHMgd2lsbCBiZSBhZGRlZCB0byB0aGUgYmVnaW5uaW5nIG9mIHRoZSBvdXRwdXRcbiAgICAgKiAgICAgICAgbGlzdC5cbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gQSBuZXcgbGlzdCBjb250YWluaW5nIHRoZSBjb250ZW50cyBvZiB0aGUgb2xkIGxpc3QgZm9sbG93ZWQgYnkgYGVsYC5cbiAgICAgKiBAc2VlIFIucHJlcGVuZFxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIuYXBwZW5kKCd0ZXN0cycsIFsnd3JpdGUnLCAnbW9yZSddKTsgLy89PiBbJ3dyaXRlJywgJ21vcmUnLCAndGVzdHMnXVxuICAgICAqICAgICAgUi5hcHBlbmQoJ3Rlc3RzJywgW10pOyAvLz0+IFsndGVzdHMnXVxuICAgICAqICAgICAgUi5hcHBlbmQoWyd0ZXN0cyddLCBbJ3dyaXRlJywgJ21vcmUnXSk7IC8vPT4gWyd3cml0ZScsICdtb3JlJywgWyd0ZXN0cyddXVxuICAgICAqL1xuICAgIHZhciBhcHBlbmQgPSBfY3VycnkyKGZ1bmN0aW9uIGFwcGVuZChlbCwgbGlzdCkge1xuICAgICAgICByZXR1cm4gX2NvbmNhdChsaXN0LCBbZWxdKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIEFwcGxpZXMgZnVuY3Rpb24gYGZuYCB0byB0aGUgYXJndW1lbnQgbGlzdCBgYXJnc2AuIFRoaXMgaXMgdXNlZnVsIGZvclxuICAgICAqIGNyZWF0aW5nIGEgZml4ZWQtYXJpdHkgZnVuY3Rpb24gZnJvbSBhIHZhcmlhZGljIGZ1bmN0aW9uLiBgZm5gIHNob3VsZCBiZSBhXG4gICAgICogYm91bmQgZnVuY3Rpb24gaWYgY29udGV4dCBpcyBzaWduaWZpY2FudC5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuNy4wXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAgICogQHNpZyAoKi4uLiAtPiBhKSAtPiBbKl0gLT4gYVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJnc1xuICAgICAqIEByZXR1cm4geyp9XG4gICAgICogQHNlZSBSLmNhbGwsIFIudW5hcHBseVxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBudW1zID0gWzEsIDIsIDMsIC05OSwgNDIsIDYsIDddO1xuICAgICAqICAgICAgUi5hcHBseShNYXRoLm1heCwgbnVtcyk7IC8vPT4gNDJcbiAgICAgKi9cbiAgICB2YXIgYXBwbHkgPSBfY3VycnkyKGZ1bmN0aW9uIGFwcGx5KGZuLCBhcmdzKSB7XG4gICAgICAgIHJldHVybiBmbi5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIE1ha2VzIGEgc2hhbGxvdyBjbG9uZSBvZiBhbiBvYmplY3QsIHNldHRpbmcgb3Igb3ZlcnJpZGluZyB0aGUgc3BlY2lmaWVkXG4gICAgICogcHJvcGVydHkgd2l0aCB0aGUgZ2l2ZW4gdmFsdWUuIE5vdGUgdGhhdCB0aGlzIGNvcGllcyBhbmQgZmxhdHRlbnMgcHJvdG90eXBlXG4gICAgICogcHJvcGVydGllcyBvbnRvIHRoZSBuZXcgb2JqZWN0IGFzIHdlbGwuIEFsbCBub24tcHJpbWl0aXZlIHByb3BlcnRpZXMgYXJlXG4gICAgICogY29waWVkIGJ5IHJlZmVyZW5jZS5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuOC4wXG4gICAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgICAqIEBzaWcgU3RyaW5nIC0+IGEgLT4ge2s6IHZ9IC0+IHtrOiB2fVxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wIHRoZSBwcm9wZXJ0eSBuYW1lIHRvIHNldFxuICAgICAqIEBwYXJhbSB7Kn0gdmFsIHRoZSBuZXcgdmFsdWVcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqIHRoZSBvYmplY3QgdG8gY2xvbmVcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IGEgbmV3IG9iamVjdCBzaW1pbGFyIHRvIHRoZSBvcmlnaW5hbCBleGNlcHQgZm9yIHRoZSBzcGVjaWZpZWQgcHJvcGVydHkuXG4gICAgICogQHNlZSBSLmRpc3NvY1xuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIuYXNzb2MoJ2MnLCAzLCB7YTogMSwgYjogMn0pOyAvLz0+IHthOiAxLCBiOiAyLCBjOiAzfVxuICAgICAqL1xuICAgIHZhciBhc3NvYyA9IF9jdXJyeTMoZnVuY3Rpb24gYXNzb2MocHJvcCwgdmFsLCBvYmopIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgICAgICBmb3IgKHZhciBwIGluIG9iaikge1xuICAgICAgICAgICAgcmVzdWx0W3BdID0gb2JqW3BdO1xuICAgICAgICB9XG4gICAgICAgIHJlc3VsdFtwcm9wXSA9IHZhbDtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIE1ha2VzIGEgc2hhbGxvdyBjbG9uZSBvZiBhbiBvYmplY3QsIHNldHRpbmcgb3Igb3ZlcnJpZGluZyB0aGUgbm9kZXMgcmVxdWlyZWRcbiAgICAgKiB0byBjcmVhdGUgdGhlIGdpdmVuIHBhdGgsIGFuZCBwbGFjaW5nIHRoZSBzcGVjaWZpYyB2YWx1ZSBhdCB0aGUgdGFpbCBlbmQgb2ZcbiAgICAgKiB0aGF0IHBhdGguIE5vdGUgdGhhdCB0aGlzIGNvcGllcyBhbmQgZmxhdHRlbnMgcHJvdG90eXBlIHByb3BlcnRpZXMgb250byB0aGVcbiAgICAgKiBuZXcgb2JqZWN0IGFzIHdlbGwuIEFsbCBub24tcHJpbWl0aXZlIHByb3BlcnRpZXMgYXJlIGNvcGllZCBieSByZWZlcmVuY2UuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjguMFxuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAc2lnIFtTdHJpbmddIC0+IGEgLT4ge2s6IHZ9IC0+IHtrOiB2fVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IHBhdGggdGhlIHBhdGggdG8gc2V0XG4gICAgICogQHBhcmFtIHsqfSB2YWwgdGhlIG5ldyB2YWx1ZVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmogdGhlIG9iamVjdCB0byBjbG9uZVxuICAgICAqIEByZXR1cm4ge09iamVjdH0gYSBuZXcgb2JqZWN0IHNpbWlsYXIgdG8gdGhlIG9yaWdpbmFsIGV4Y2VwdCBhbG9uZyB0aGUgc3BlY2lmaWVkIHBhdGguXG4gICAgICogQHNlZSBSLmRpc3NvY1BhdGhcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLmFzc29jUGF0aChbJ2EnLCAnYicsICdjJ10sIDQyLCB7YToge2I6IHtjOiAwfX19KTsgLy89PiB7YToge2I6IHtjOiA0Mn19fVxuICAgICAqL1xuICAgIHZhciBhc3NvY1BhdGggPSBfY3VycnkzKGZ1bmN0aW9uIGFzc29jUGF0aChwYXRoLCB2YWwsIG9iaikge1xuICAgICAgICBzd2l0Y2ggKHBhdGgubGVuZ3RoKSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgIHJldHVybiB2YWw7XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIHJldHVybiBhc3NvYyhwYXRoWzBdLCB2YWwsIG9iaik7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gYXNzb2MocGF0aFswXSwgYXNzb2NQYXRoKF9zbGljZShwYXRoLCAxKSwgdmFsLCBPYmplY3Qob2JqW3BhdGhbMF1dKSksIG9iaik7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IGlzIGJvdW5kIHRvIGEgY29udGV4dC5cbiAgICAgKiBOb3RlOiBgUi5iaW5kYCBkb2VzIG5vdCBwcm92aWRlIHRoZSBhZGRpdGlvbmFsIGFyZ3VtZW50LWJpbmRpbmcgY2FwYWJpbGl0aWVzIG9mXG4gICAgICogW0Z1bmN0aW9uLnByb3RvdHlwZS5iaW5kXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9GdW5jdGlvbi9iaW5kKS5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuNi4wXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgICAqIEBzaWcgKCogLT4gKikgLT4geyp9IC0+ICgqIC0+ICopXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGZ1bmN0aW9uIHRvIGJpbmQgdG8gY29udGV4dFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSB0aGlzT2JqIFRoZSBjb250ZXh0IHRvIGJpbmQgYGZuYCB0b1xuICAgICAqIEByZXR1cm4ge0Z1bmN0aW9ufSBBIGZ1bmN0aW9uIHRoYXQgd2lsbCBleGVjdXRlIGluIHRoZSBjb250ZXh0IG9mIGB0aGlzT2JqYC5cbiAgICAgKiBAc2VlIFIucGFydGlhbFxuICAgICAqL1xuICAgIHZhciBiaW5kID0gX2N1cnJ5MihmdW5jdGlvbiBiaW5kKGZuLCB0aGlzT2JqKSB7XG4gICAgICAgIHJldHVybiBfYXJpdHkoZm4ubGVuZ3RoLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gZm4uYXBwbHkodGhpc09iaiwgYXJndW1lbnRzKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXN0cmljdHMgYSBudW1iZXIgdG8gYmUgd2l0aGluIGEgcmFuZ2UuXG4gICAgICpcbiAgICAgKiBBbHNvIHdvcmtzIGZvciBvdGhlciBvcmRlcmVkIHR5cGVzIHN1Y2ggYXMgU3RyaW5ncyBhbmQgRGF0ZXMuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjIwLjBcbiAgICAgKiBAY2F0ZWdvcnkgUmVsYXRpb25cbiAgICAgKiBAc2lnIE9yZCBhID0+IGEgLT4gYSAtPiBhIC0+IGFcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gbWluaW11bSBudW1iZXJcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gbWF4aW11bSBudW1iZXJcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gdmFsdWUgdG8gYmUgY2xhbXBlZFxuICAgICAqIEByZXR1cm4ge051bWJlcn0gUmV0dXJucyB0aGUgY2xhbXBlZCB2YWx1ZVxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIuY2xhbXAoMSwgMTAsIC0xKSAvLyA9PiAxXG4gICAgICogICAgICBSLmNsYW1wKDEsIDEwLCAxMSkgLy8gPT4gMTBcbiAgICAgKiAgICAgIFIuY2xhbXAoMSwgMTAsIDQpICAvLyA9PiA0XG4gICAgICovXG4gICAgdmFyIGNsYW1wID0gX2N1cnJ5MyhmdW5jdGlvbiBjbGFtcChtaW4sIG1heCwgdmFsdWUpIHtcbiAgICAgICAgaWYgKG1pbiA+IG1heCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdtaW4gbXVzdCBub3QgYmUgZ3JlYXRlciB0aGFuIG1heCBpbiBjbGFtcChtaW4sIG1heCwgdmFsdWUpJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbHVlIDwgbWluID8gbWluIDogdmFsdWUgPiBtYXggPyBtYXggOiB2YWx1ZTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIE1ha2VzIGEgY29tcGFyYXRvciBmdW5jdGlvbiBvdXQgb2YgYSBmdW5jdGlvbiB0aGF0IHJlcG9ydHMgd2hldGhlciB0aGUgZmlyc3RcbiAgICAgKiBlbGVtZW50IGlzIGxlc3MgdGhhbiB0aGUgc2Vjb25kLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICAgKiBAc2lnIChhLCBiIC0+IEJvb2xlYW4pIC0+IChhLCBiIC0+IE51bWJlcilcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcmVkIEEgcHJlZGljYXRlIGZ1bmN0aW9uIG9mIGFyaXR5IHR3by5cbiAgICAgKiBAcmV0dXJuIHtGdW5jdGlvbn0gQSBGdW5jdGlvbiA6OiBhIC0+IGIgLT4gSW50IHRoYXQgcmV0dXJucyBgLTFgIGlmIGEgPCBiLCBgMWAgaWYgYiA8IGEsIG90aGVyd2lzZSBgMGAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIGNtcCA9IFIuY29tcGFyYXRvcigoYSwgYikgPT4gYS5hZ2UgPCBiLmFnZSk7XG4gICAgICogICAgICB2YXIgcGVvcGxlID0gW1xuICAgICAqICAgICAgICAvLyAuLi5cbiAgICAgKiAgICAgIF07XG4gICAgICogICAgICBSLnNvcnQoY21wLCBwZW9wbGUpO1xuICAgICAqL1xuICAgIHZhciBjb21wYXJhdG9yID0gX2N1cnJ5MShmdW5jdGlvbiBjb21wYXJhdG9yKHByZWQpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgICAgICByZXR1cm4gcHJlZChhLCBiKSA/IC0xIDogcHJlZChiLCBhKSA/IDEgOiAwO1xuICAgICAgICB9O1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIGN1cnJpZWQgZXF1aXZhbGVudCBvZiB0aGUgcHJvdmlkZWQgZnVuY3Rpb24sIHdpdGggdGhlIHNwZWNpZmllZFxuICAgICAqIGFyaXR5LiBUaGUgY3VycmllZCBmdW5jdGlvbiBoYXMgdHdvIHVudXN1YWwgY2FwYWJpbGl0aWVzLiBGaXJzdCwgaXRzXG4gICAgICogYXJndW1lbnRzIG5lZWRuJ3QgYmUgcHJvdmlkZWQgb25lIGF0IGEgdGltZS4gSWYgYGdgIGlzIGBSLmN1cnJ5TigzLCBmKWAsIHRoZVxuICAgICAqIGZvbGxvd2luZyBhcmUgZXF1aXZhbGVudDpcbiAgICAgKlxuICAgICAqICAgLSBgZygxKSgyKSgzKWBcbiAgICAgKiAgIC0gYGcoMSkoMiwgMylgXG4gICAgICogICAtIGBnKDEsIDIpKDMpYFxuICAgICAqICAgLSBgZygxLCAyLCAzKWBcbiAgICAgKlxuICAgICAqIFNlY29uZGx5LCB0aGUgc3BlY2lhbCBwbGFjZWhvbGRlciB2YWx1ZSBgUi5fX2AgbWF5IGJlIHVzZWQgdG8gc3BlY2lmeVxuICAgICAqIFwiZ2Fwc1wiLCBhbGxvd2luZyBwYXJ0aWFsIGFwcGxpY2F0aW9uIG9mIGFueSBjb21iaW5hdGlvbiBvZiBhcmd1bWVudHMsXG4gICAgICogcmVnYXJkbGVzcyBvZiB0aGVpciBwb3NpdGlvbnMuIElmIGBnYCBpcyBhcyBhYm92ZSBhbmQgYF9gIGlzIGBSLl9fYCwgdGhlXG4gICAgICogZm9sbG93aW5nIGFyZSBlcXVpdmFsZW50OlxuICAgICAqXG4gICAgICogICAtIGBnKDEsIDIsIDMpYFxuICAgICAqICAgLSBgZyhfLCAyLCAzKSgxKWBcbiAgICAgKiAgIC0gYGcoXywgXywgMykoMSkoMilgXG4gICAgICogICAtIGBnKF8sIF8sIDMpKDEsIDIpYFxuICAgICAqICAgLSBgZyhfLCAyKSgxKSgzKWBcbiAgICAgKiAgIC0gYGcoXywgMikoMSwgMylgXG4gICAgICogICAtIGBnKF8sIDIpKF8sIDMpKDEpYFxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC41LjBcbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICAgKiBAc2lnIE51bWJlciAtPiAoKiAtPiBhKSAtPiAoKiAtPiBhKVxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBsZW5ndGggVGhlIGFyaXR5IGZvciB0aGUgcmV0dXJuZWQgZnVuY3Rpb24uXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGZ1bmN0aW9uIHRvIGN1cnJ5LlxuICAgICAqIEByZXR1cm4ge0Z1bmN0aW9ufSBBIG5ldywgY3VycmllZCBmdW5jdGlvbi5cbiAgICAgKiBAc2VlIFIuY3VycnlcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgc3VtQXJncyA9ICguLi5hcmdzKSA9PiBSLnN1bShhcmdzKTtcbiAgICAgKlxuICAgICAqICAgICAgdmFyIGN1cnJpZWRBZGRGb3VyTnVtYmVycyA9IFIuY3VycnlOKDQsIHN1bUFyZ3MpO1xuICAgICAqICAgICAgdmFyIGYgPSBjdXJyaWVkQWRkRm91ck51bWJlcnMoMSwgMik7XG4gICAgICogICAgICB2YXIgZyA9IGYoMyk7XG4gICAgICogICAgICBnKDQpOyAvLz0+IDEwXG4gICAgICovXG4gICAgdmFyIGN1cnJ5TiA9IF9jdXJyeTIoZnVuY3Rpb24gY3VycnlOKGxlbmd0aCwgZm4pIHtcbiAgICAgICAgaWYgKGxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgcmV0dXJuIF9jdXJyeTEoZm4pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfYXJpdHkobGVuZ3RoLCBfY3VycnlOKGxlbmd0aCwgW10sIGZuKSk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBEZWNyZW1lbnRzIGl0cyBhcmd1bWVudC5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuOS4wXG4gICAgICogQGNhdGVnb3J5IE1hdGhcbiAgICAgKiBAc2lnIE51bWJlciAtPiBOdW1iZXJcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gblxuICAgICAqIEByZXR1cm4ge051bWJlcn1cbiAgICAgKiBAc2VlIFIuaW5jXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5kZWMoNDIpOyAvLz0+IDQxXG4gICAgICovXG4gICAgdmFyIGRlYyA9IGFkZCgtMSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBzZWNvbmQgYXJndW1lbnQgaWYgaXQgaXMgbm90IGBudWxsYCwgYHVuZGVmaW5lZGAgb3IgYE5hTmBcbiAgICAgKiBvdGhlcndpc2UgdGhlIGZpcnN0IGFyZ3VtZW50IGlzIHJldHVybmVkLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xMC4wXG4gICAgICogQGNhdGVnb3J5IExvZ2ljXG4gICAgICogQHNpZyBhIC0+IGIgLT4gYSB8IGJcbiAgICAgKiBAcGFyYW0ge2F9IHZhbCBUaGUgZGVmYXVsdCB2YWx1ZS5cbiAgICAgKiBAcGFyYW0ge2J9IHZhbCBUaGUgdmFsdWUgdG8gcmV0dXJuIGlmIGl0IGlzIG5vdCBudWxsIG9yIHVuZGVmaW5lZFxuICAgICAqIEByZXR1cm4geyp9IFRoZSB0aGUgc2Vjb25kIHZhbHVlIG9yIHRoZSBkZWZhdWx0IHZhbHVlXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIGRlZmF1bHRUbzQyID0gUi5kZWZhdWx0VG8oNDIpO1xuICAgICAqXG4gICAgICogICAgICBkZWZhdWx0VG80MihudWxsKTsgIC8vPT4gNDJcbiAgICAgKiAgICAgIGRlZmF1bHRUbzQyKHVuZGVmaW5lZCk7ICAvLz0+IDQyXG4gICAgICogICAgICBkZWZhdWx0VG80MignUmFtZGEnKTsgIC8vPT4gJ1JhbWRhJ1xuICAgICAqICAgICAgZGVmYXVsdFRvNDIocGFyc2VJbnQoJ3N0cmluZycpKTsgLy89PiA0MlxuICAgICAqL1xuICAgIHZhciBkZWZhdWx0VG8gPSBfY3VycnkyKGZ1bmN0aW9uIGRlZmF1bHRUbyhkLCB2KSB7XG4gICAgICAgIHJldHVybiB2ID09IG51bGwgfHwgdiAhPT0gdiA/IGQgOiB2O1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogRmluZHMgdGhlIHNldCAoaS5lLiBubyBkdXBsaWNhdGVzKSBvZiBhbGwgZWxlbWVudHMgaW4gdGhlIGZpcnN0IGxpc3Qgbm90XG4gICAgICogY29udGFpbmVkIGluIHRoZSBzZWNvbmQgbGlzdC4gRHVwbGljYXRpb24gaXMgZGV0ZXJtaW5lZCBhY2NvcmRpbmcgdG8gdGhlXG4gICAgICogdmFsdWUgcmV0dXJuZWQgYnkgYXBwbHlpbmcgdGhlIHN1cHBsaWVkIHByZWRpY2F0ZSB0byB0d28gbGlzdCBlbGVtZW50cy5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4wXG4gICAgICogQGNhdGVnb3J5IFJlbGF0aW9uXG4gICAgICogQHNpZyAoYSAtPiBhIC0+IEJvb2xlYW4pIC0+IFsqXSAtPiBbKl0gLT4gWypdXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gcHJlZCBBIHByZWRpY2F0ZSB1c2VkIHRvIHRlc3Qgd2hldGhlciB0d28gaXRlbXMgYXJlIGVxdWFsLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGxpc3QxIFRoZSBmaXJzdCBsaXN0LlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGxpc3QyIFRoZSBzZWNvbmQgbGlzdC5cbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gVGhlIGVsZW1lbnRzIGluIGBsaXN0MWAgdGhhdCBhcmUgbm90IGluIGBsaXN0MmAuXG4gICAgICogQHNlZSBSLmRpZmZlcmVuY2VcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgY21wID0gKHgsIHkpID0+IHguYSA9PT0geS5hO1xuICAgICAqICAgICAgdmFyIGwxID0gW3thOiAxfSwge2E6IDJ9LCB7YTogM31dO1xuICAgICAqICAgICAgdmFyIGwyID0gW3thOiAzfSwge2E6IDR9XTtcbiAgICAgKiAgICAgIFIuZGlmZmVyZW5jZVdpdGgoY21wLCBsMSwgbDIpOyAvLz0+IFt7YTogMX0sIHthOiAyfV1cbiAgICAgKi9cbiAgICB2YXIgZGlmZmVyZW5jZVdpdGggPSBfY3VycnkzKGZ1bmN0aW9uIGRpZmZlcmVuY2VXaXRoKHByZWQsIGZpcnN0LCBzZWNvbmQpIHtcbiAgICAgICAgdmFyIG91dCA9IFtdO1xuICAgICAgICB2YXIgaWR4ID0gMDtcbiAgICAgICAgdmFyIGZpcnN0TGVuID0gZmlyc3QubGVuZ3RoO1xuICAgICAgICB3aGlsZSAoaWR4IDwgZmlyc3RMZW4pIHtcbiAgICAgICAgICAgIGlmICghX2NvbnRhaW5zV2l0aChwcmVkLCBmaXJzdFtpZHhdLCBzZWNvbmQpICYmICFfY29udGFpbnNXaXRoKHByZWQsIGZpcnN0W2lkeF0sIG91dCkpIHtcbiAgICAgICAgICAgICAgICBvdXQucHVzaChmaXJzdFtpZHhdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlkeCArPSAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgbmV3IG9iamVjdCB0aGF0IGRvZXMgbm90IGNvbnRhaW4gYSBgcHJvcGAgcHJvcGVydHkuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEwLjBcbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0XG4gICAgICogQHNpZyBTdHJpbmcgLT4ge2s6IHZ9IC0+IHtrOiB2fVxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wIHRoZSBuYW1lIG9mIHRoZSBwcm9wZXJ0eSB0byBkaXNzb2NpYXRlXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iaiB0aGUgb2JqZWN0IHRvIGNsb25lXG4gICAgICogQHJldHVybiB7T2JqZWN0fSBhIG5ldyBvYmplY3Qgc2ltaWxhciB0byB0aGUgb3JpZ2luYWwgYnV0IHdpdGhvdXQgdGhlIHNwZWNpZmllZCBwcm9wZXJ0eVxuICAgICAqIEBzZWUgUi5hc3NvY1xuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIuZGlzc29jKCdiJywge2E6IDEsIGI6IDIsIGM6IDN9KTsgLy89PiB7YTogMSwgYzogM31cbiAgICAgKi9cbiAgICB2YXIgZGlzc29jID0gX2N1cnJ5MihmdW5jdGlvbiBkaXNzb2MocHJvcCwgb2JqKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICAgICAgZm9yICh2YXIgcCBpbiBvYmopIHtcbiAgICAgICAgICAgIGlmIChwICE9PSBwcm9wKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0W3BdID0gb2JqW3BdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBNYWtlcyBhIHNoYWxsb3cgY2xvbmUgb2YgYW4gb2JqZWN0LCBvbWl0dGluZyB0aGUgcHJvcGVydHkgYXQgdGhlIGdpdmVuIHBhdGguXG4gICAgICogTm90ZSB0aGF0IHRoaXMgY29waWVzIGFuZCBmbGF0dGVucyBwcm90b3R5cGUgcHJvcGVydGllcyBvbnRvIHRoZSBuZXcgb2JqZWN0XG4gICAgICogYXMgd2VsbC4gQWxsIG5vbi1wcmltaXRpdmUgcHJvcGVydGllcyBhcmUgY29waWVkIGJ5IHJlZmVyZW5jZS5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMTEuMFxuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAc2lnIFtTdHJpbmddIC0+IHtrOiB2fSAtPiB7azogdn1cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBwYXRoIHRoZSBwYXRoIHRvIHNldFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmogdGhlIG9iamVjdCB0byBjbG9uZVxuICAgICAqIEByZXR1cm4ge09iamVjdH0gYSBuZXcgb2JqZWN0IHdpdGhvdXQgdGhlIHByb3BlcnR5IGF0IHBhdGhcbiAgICAgKiBAc2VlIFIuYXNzb2NQYXRoXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5kaXNzb2NQYXRoKFsnYScsICdiJywgJ2MnXSwge2E6IHtiOiB7YzogNDJ9fX0pOyAvLz0+IHthOiB7Yjoge319fVxuICAgICAqL1xuICAgIHZhciBkaXNzb2NQYXRoID0gX2N1cnJ5MihmdW5jdGlvbiBkaXNzb2NQYXRoKHBhdGgsIG9iaikge1xuICAgICAgICBzd2l0Y2ggKHBhdGgubGVuZ3RoKSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgIHJldHVybiBvYmo7XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIHJldHVybiBkaXNzb2MocGF0aFswXSwgb2JqKTtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHZhciBoZWFkID0gcGF0aFswXTtcbiAgICAgICAgICAgIHZhciB0YWlsID0gX3NsaWNlKHBhdGgsIDEpO1xuICAgICAgICAgICAgcmV0dXJuIG9ialtoZWFkXSA9PSBudWxsID8gb2JqIDogYXNzb2MoaGVhZCwgZGlzc29jUGF0aCh0YWlsLCBvYmpbaGVhZF0pLCBvYmopO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBEaXZpZGVzIHR3byBudW1iZXJzLiBFcXVpdmFsZW50IHRvIGBhIC8gYmAuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBNYXRoXG4gICAgICogQHNpZyBOdW1iZXIgLT4gTnVtYmVyIC0+IE51bWJlclxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBhIFRoZSBmaXJzdCB2YWx1ZS5cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gYiBUaGUgc2Vjb25kIHZhbHVlLlxuICAgICAqIEByZXR1cm4ge051bWJlcn0gVGhlIHJlc3VsdCBvZiBgYSAvIGJgLlxuICAgICAqIEBzZWUgUi5tdWx0aXBseVxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIuZGl2aWRlKDcxLCAxMDApOyAvLz0+IDAuNzFcbiAgICAgKlxuICAgICAqICAgICAgdmFyIGhhbGYgPSBSLmRpdmlkZShSLl9fLCAyKTtcbiAgICAgKiAgICAgIGhhbGYoNDIpOyAvLz0+IDIxXG4gICAgICpcbiAgICAgKiAgICAgIHZhciByZWNpcHJvY2FsID0gUi5kaXZpZGUoMSk7XG4gICAgICogICAgICByZWNpcHJvY2FsKDQpOyAgIC8vPT4gMC4yNVxuICAgICAqL1xuICAgIHZhciBkaXZpZGUgPSBfY3VycnkyKGZ1bmN0aW9uIGRpdmlkZShhLCBiKSB7XG4gICAgICAgIHJldHVybiBhIC8gYjtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBuZXcgbGlzdCBjb250YWluaW5nIHRoZSBsYXN0IGBuYCBlbGVtZW50cyBvZiBhIGdpdmVuIGxpc3QsIHBhc3NpbmdcbiAgICAgKiBlYWNoIHZhbHVlIHRvIHRoZSBzdXBwbGllZCBwcmVkaWNhdGUgZnVuY3Rpb24sIHNraXBwaW5nIGVsZW1lbnRzIHdoaWxlIHRoZVxuICAgICAqIHByZWRpY2F0ZSBmdW5jdGlvbiByZXR1cm5zIGB0cnVlYC4gVGhlIHByZWRpY2F0ZSBmdW5jdGlvbiBpcyBwYXNzZWQgb25lXG4gICAgICogYXJndW1lbnQ6ICoodmFsdWUpKi5cbiAgICAgKlxuICAgICAqIERpc3BhdGNoZXMgdG8gdGhlIGBkcm9wV2hpbGVgIG1ldGhvZCBvZiB0aGUgc2Vjb25kIGFyZ3VtZW50LCBpZiBwcmVzZW50LlxuICAgICAqXG4gICAgICogQWN0cyBhcyBhIHRyYW5zZHVjZXIgaWYgYSB0cmFuc2Zvcm1lciBpcyBnaXZlbiBpbiBsaXN0IHBvc2l0aW9uLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC45LjBcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgKGEgLT4gQm9vbGVhbikgLT4gW2FdIC0+IFthXVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBmdW5jdGlvbiBjYWxsZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBsaXN0IFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gQSBuZXcgYXJyYXkuXG4gICAgICogQHNlZSBSLnRha2VXaGlsZSwgUi50cmFuc2R1Y2UsIFIuYWRkSW5kZXhcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgbHRlVHdvID0geCA9PiB4IDw9IDI7XG4gICAgICpcbiAgICAgKiAgICAgIFIuZHJvcFdoaWxlKGx0ZVR3bywgWzEsIDIsIDMsIDQsIDMsIDIsIDFdKTsgLy89PiBbMywgNCwgMywgMiwgMV1cbiAgICAgKi9cbiAgICB2YXIgZHJvcFdoaWxlID0gX2N1cnJ5MihfZGlzcGF0Y2hhYmxlKCdkcm9wV2hpbGUnLCBfeGRyb3BXaGlsZSwgZnVuY3Rpb24gZHJvcFdoaWxlKHByZWQsIGxpc3QpIHtcbiAgICAgICAgdmFyIGlkeCA9IDA7XG4gICAgICAgIHZhciBsZW4gPSBsaXN0Lmxlbmd0aDtcbiAgICAgICAgd2hpbGUgKGlkeCA8IGxlbiAmJiBwcmVkKGxpc3RbaWR4XSkpIHtcbiAgICAgICAgICAgIGlkeCArPSAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfc2xpY2UobGlzdCwgaWR4KTtcbiAgICB9KSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBlbXB0eSB2YWx1ZSBvZiBpdHMgYXJndW1lbnQncyB0eXBlLiBSYW1kYSBkZWZpbmVzIHRoZSBlbXB0eVxuICAgICAqIHZhbHVlIG9mIEFycmF5IChgW11gKSwgT2JqZWN0IChge31gKSwgU3RyaW5nIChgJydgKSwgYW5kIEFyZ3VtZW50cy4gT3RoZXJcbiAgICAgKiB0eXBlcyBhcmUgc3VwcG9ydGVkIGlmIHRoZXkgZGVmaW5lIGA8VHlwZT4uZW1wdHlgIGFuZC9vclxuICAgICAqIGA8VHlwZT4ucHJvdG90eXBlLmVtcHR5YC5cbiAgICAgKlxuICAgICAqIERpc3BhdGNoZXMgdG8gdGhlIGBlbXB0eWAgbWV0aG9kIG9mIHRoZSBmaXJzdCBhcmd1bWVudCwgaWYgcHJlc2VudC5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMy4wXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAgICogQHNpZyBhIC0+IGFcbiAgICAgKiBAcGFyYW0geyp9IHhcbiAgICAgKiBAcmV0dXJuIHsqfVxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIuZW1wdHkoSnVzdCg0MikpOyAgICAgIC8vPT4gTm90aGluZygpXG4gICAgICogICAgICBSLmVtcHR5KFsxLCAyLCAzXSk7ICAgICAvLz0+IFtdXG4gICAgICogICAgICBSLmVtcHR5KCd1bmljb3JucycpOyAgICAvLz0+ICcnXG4gICAgICogICAgICBSLmVtcHR5KHt4OiAxLCB5OiAyfSk7ICAvLz0+IHt9XG4gICAgICovXG4gICAgLy8gZWxzZVxuICAgIHZhciBlbXB0eSA9IF9jdXJyeTEoZnVuY3Rpb24gZW1wdHkoeCkge1xuICAgICAgICByZXR1cm4geCAhPSBudWxsICYmIHR5cGVvZiB4LmVtcHR5ID09PSAnZnVuY3Rpb24nID8geC5lbXB0eSgpIDogeCAhPSBudWxsICYmIHguY29uc3RydWN0b3IgIT0gbnVsbCAmJiB0eXBlb2YgeC5jb25zdHJ1Y3Rvci5lbXB0eSA9PT0gJ2Z1bmN0aW9uJyA/IHguY29uc3RydWN0b3IuZW1wdHkoKSA6IF9pc0FycmF5KHgpID8gW10gOiBfaXNTdHJpbmcoeCkgPyAnJyA6IF9pc09iamVjdCh4KSA/IHt9IDogX2lzQXJndW1lbnRzKHgpID8gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIGFyZ3VtZW50cztcbiAgICAgICAgfSgpIDogLy8gZWxzZVxuICAgICAgICB2b2lkIDA7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IG9iamVjdCBieSByZWN1cnNpdmVseSBldm9sdmluZyBhIHNoYWxsb3cgY29weSBvZiBgb2JqZWN0YCxcbiAgICAgKiBhY2NvcmRpbmcgdG8gdGhlIGB0cmFuc2Zvcm1hdGlvbmAgZnVuY3Rpb25zLiBBbGwgbm9uLXByaW1pdGl2ZSBwcm9wZXJ0aWVzXG4gICAgICogYXJlIGNvcGllZCBieSByZWZlcmVuY2UuXG4gICAgICpcbiAgICAgKiBBIGB0cmFuc2Zvcm1hdGlvbmAgZnVuY3Rpb24gd2lsbCBub3QgYmUgaW52b2tlZCBpZiBpdHMgY29ycmVzcG9uZGluZyBrZXlcbiAgICAgKiBkb2VzIG5vdCBleGlzdCBpbiB0aGUgZXZvbHZlZCBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjkuMFxuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAc2lnIHtrOiAodiAtPiB2KX0gLT4ge2s6IHZ9IC0+IHtrOiB2fVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSB0cmFuc2Zvcm1hdGlvbnMgVGhlIG9iamVjdCBzcGVjaWZ5aW5nIHRyYW5zZm9ybWF0aW9uIGZ1bmN0aW9ucyB0byBhcHBseVxuICAgICAqICAgICAgICB0byB0aGUgb2JqZWN0LlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBiZSB0cmFuc2Zvcm1lZC5cbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IFRoZSB0cmFuc2Zvcm1lZCBvYmplY3QuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIHRvbWF0byAgPSB7Zmlyc3ROYW1lOiAnICBUb21hdG8gJywgZGF0YToge2VsYXBzZWQ6IDEwMCwgcmVtYWluaW5nOiAxNDAwfSwgaWQ6MTIzfTtcbiAgICAgKiAgICAgIHZhciB0cmFuc2Zvcm1hdGlvbnMgPSB7XG4gICAgICogICAgICAgIGZpcnN0TmFtZTogUi50cmltLFxuICAgICAqICAgICAgICBsYXN0TmFtZTogUi50cmltLCAvLyBXaWxsIG5vdCBnZXQgaW52b2tlZC5cbiAgICAgKiAgICAgICAgZGF0YToge2VsYXBzZWQ6IFIuYWRkKDEpLCByZW1haW5pbmc6IFIuYWRkKC0xKX1cbiAgICAgKiAgICAgIH07XG4gICAgICogICAgICBSLmV2b2x2ZSh0cmFuc2Zvcm1hdGlvbnMsIHRvbWF0byk7IC8vPT4ge2ZpcnN0TmFtZTogJ1RvbWF0bycsIGRhdGE6IHtlbGFwc2VkOiAxMDEsIHJlbWFpbmluZzogMTM5OX0sIGlkOjEyM31cbiAgICAgKi9cbiAgICB2YXIgZXZvbHZlID0gX2N1cnJ5MihmdW5jdGlvbiBldm9sdmUodHJhbnNmb3JtYXRpb25zLCBvYmplY3QpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgICAgICB2YXIgdHJhbnNmb3JtYXRpb24sIGtleSwgdHlwZTtcbiAgICAgICAgZm9yIChrZXkgaW4gb2JqZWN0KSB7XG4gICAgICAgICAgICB0cmFuc2Zvcm1hdGlvbiA9IHRyYW5zZm9ybWF0aW9uc1trZXldO1xuICAgICAgICAgICAgdHlwZSA9IHR5cGVvZiB0cmFuc2Zvcm1hdGlvbjtcbiAgICAgICAgICAgIHJlc3VsdFtrZXldID0gdHlwZSA9PT0gJ2Z1bmN0aW9uJyA/IHRyYW5zZm9ybWF0aW9uKG9iamVjdFtrZXldKSA6IHR5cGUgPT09ICdvYmplY3QnID8gZXZvbHZlKHRyYW5zZm9ybWF0aW9uc1trZXldLCBvYmplY3Rba2V5XSkgOiBvYmplY3Rba2V5XTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgZmlyc3QgZWxlbWVudCBvZiB0aGUgbGlzdCB3aGljaCBtYXRjaGVzIHRoZSBwcmVkaWNhdGUsIG9yXG4gICAgICogYHVuZGVmaW5lZGAgaWYgbm8gZWxlbWVudCBtYXRjaGVzLlxuICAgICAqXG4gICAgICogRGlzcGF0Y2hlcyB0byB0aGUgYGZpbmRgIG1ldGhvZCBvZiB0aGUgc2Vjb25kIGFyZ3VtZW50LCBpZiBwcmVzZW50LlxuICAgICAqXG4gICAgICogQWN0cyBhcyBhIHRyYW5zZHVjZXIgaWYgYSB0cmFuc2Zvcm1lciBpcyBnaXZlbiBpbiBsaXN0IHBvc2l0aW9uLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgKGEgLT4gQm9vbGVhbikgLT4gW2FdIC0+IGEgfCB1bmRlZmluZWRcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgcHJlZGljYXRlIGZ1bmN0aW9uIHVzZWQgdG8gZGV0ZXJtaW5lIGlmIHRoZSBlbGVtZW50IGlzIHRoZVxuICAgICAqICAgICAgICBkZXNpcmVkIG9uZS5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBsaXN0IFRoZSBhcnJheSB0byBjb25zaWRlci5cbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IFRoZSBlbGVtZW50IGZvdW5kLCBvciBgdW5kZWZpbmVkYC5cbiAgICAgKiBAc2VlIFIudHJhbnNkdWNlXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIHhzID0gW3thOiAxfSwge2E6IDJ9LCB7YTogM31dO1xuICAgICAqICAgICAgUi5maW5kKFIucHJvcEVxKCdhJywgMikpKHhzKTsgLy89PiB7YTogMn1cbiAgICAgKiAgICAgIFIuZmluZChSLnByb3BFcSgnYScsIDQpKSh4cyk7IC8vPT4gdW5kZWZpbmVkXG4gICAgICovXG4gICAgdmFyIGZpbmQgPSBfY3VycnkyKF9kaXNwYXRjaGFibGUoJ2ZpbmQnLCBfeGZpbmQsIGZ1bmN0aW9uIGZpbmQoZm4sIGxpc3QpIHtcbiAgICAgICAgdmFyIGlkeCA9IDA7XG4gICAgICAgIHZhciBsZW4gPSBsaXN0Lmxlbmd0aDtcbiAgICAgICAgd2hpbGUgKGlkeCA8IGxlbikge1xuICAgICAgICAgICAgaWYgKGZuKGxpc3RbaWR4XSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbGlzdFtpZHhdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWR4ICs9IDE7XG4gICAgICAgIH1cbiAgICB9KSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgZmlyc3QgZWxlbWVudCBvZiB0aGUgbGlzdCB3aGljaCBtYXRjaGVzIHRoZVxuICAgICAqIHByZWRpY2F0ZSwgb3IgYC0xYCBpZiBubyBlbGVtZW50IG1hdGNoZXMuXG4gICAgICpcbiAgICAgKiBEaXNwYXRjaGVzIHRvIHRoZSBgZmluZEluZGV4YCBtZXRob2Qgb2YgdGhlIHNlY29uZCBhcmd1bWVudCwgaWYgcHJlc2VudC5cbiAgICAgKlxuICAgICAqIEFjdHMgYXMgYSB0cmFuc2R1Y2VyIGlmIGEgdHJhbnNmb3JtZXIgaXMgZ2l2ZW4gaW4gbGlzdCBwb3NpdGlvbi5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4xXG4gICAgICogQGNhdGVnb3J5IExpc3RcbiAgICAgKiBAc2lnIChhIC0+IEJvb2xlYW4pIC0+IFthXSAtPiBOdW1iZXJcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgcHJlZGljYXRlIGZ1bmN0aW9uIHVzZWQgdG8gZGV0ZXJtaW5lIGlmIHRoZSBlbGVtZW50IGlzIHRoZVxuICAgICAqIGRlc2lyZWQgb25lLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGxpc3QgVGhlIGFycmF5IHRvIGNvbnNpZGVyLlxuICAgICAqIEByZXR1cm4ge051bWJlcn0gVGhlIGluZGV4IG9mIHRoZSBlbGVtZW50IGZvdW5kLCBvciBgLTFgLlxuICAgICAqIEBzZWUgUi50cmFuc2R1Y2VcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgeHMgPSBbe2E6IDF9LCB7YTogMn0sIHthOiAzfV07XG4gICAgICogICAgICBSLmZpbmRJbmRleChSLnByb3BFcSgnYScsIDIpKSh4cyk7IC8vPT4gMVxuICAgICAqICAgICAgUi5maW5kSW5kZXgoUi5wcm9wRXEoJ2EnLCA0KSkoeHMpOyAvLz0+IC0xXG4gICAgICovXG4gICAgdmFyIGZpbmRJbmRleCA9IF9jdXJyeTIoX2Rpc3BhdGNoYWJsZSgnZmluZEluZGV4JywgX3hmaW5kSW5kZXgsIGZ1bmN0aW9uIGZpbmRJbmRleChmbiwgbGlzdCkge1xuICAgICAgICB2YXIgaWR4ID0gMDtcbiAgICAgICAgdmFyIGxlbiA9IGxpc3QubGVuZ3RoO1xuICAgICAgICB3aGlsZSAoaWR4IDwgbGVuKSB7XG4gICAgICAgICAgICBpZiAoZm4obGlzdFtpZHhdKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBpZHg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZHggKz0gMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gLTE7XG4gICAgfSkpO1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgbGFzdCBlbGVtZW50IG9mIHRoZSBsaXN0IHdoaWNoIG1hdGNoZXMgdGhlIHByZWRpY2F0ZSwgb3JcbiAgICAgKiBgdW5kZWZpbmVkYCBpZiBubyBlbGVtZW50IG1hdGNoZXMuXG4gICAgICpcbiAgICAgKiBEaXNwYXRjaGVzIHRvIHRoZSBgZmluZExhc3RgIG1ldGhvZCBvZiB0aGUgc2Vjb25kIGFyZ3VtZW50LCBpZiBwcmVzZW50LlxuICAgICAqXG4gICAgICogQWN0cyBhcyBhIHRyYW5zZHVjZXIgaWYgYSB0cmFuc2Zvcm1lciBpcyBnaXZlbiBpbiBsaXN0IHBvc2l0aW9uLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjFcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgKGEgLT4gQm9vbGVhbikgLT4gW2FdIC0+IGEgfCB1bmRlZmluZWRcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgcHJlZGljYXRlIGZ1bmN0aW9uIHVzZWQgdG8gZGV0ZXJtaW5lIGlmIHRoZSBlbGVtZW50IGlzIHRoZVxuICAgICAqIGRlc2lyZWQgb25lLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGxpc3QgVGhlIGFycmF5IHRvIGNvbnNpZGVyLlxuICAgICAqIEByZXR1cm4ge09iamVjdH0gVGhlIGVsZW1lbnQgZm91bmQsIG9yIGB1bmRlZmluZWRgLlxuICAgICAqIEBzZWUgUi50cmFuc2R1Y2VcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgeHMgPSBbe2E6IDEsIGI6IDB9LCB7YToxLCBiOiAxfV07XG4gICAgICogICAgICBSLmZpbmRMYXN0KFIucHJvcEVxKCdhJywgMSkpKHhzKTsgLy89PiB7YTogMSwgYjogMX1cbiAgICAgKiAgICAgIFIuZmluZExhc3QoUi5wcm9wRXEoJ2EnLCA0KSkoeHMpOyAvLz0+IHVuZGVmaW5lZFxuICAgICAqL1xuICAgIHZhciBmaW5kTGFzdCA9IF9jdXJyeTIoX2Rpc3BhdGNoYWJsZSgnZmluZExhc3QnLCBfeGZpbmRMYXN0LCBmdW5jdGlvbiBmaW5kTGFzdChmbiwgbGlzdCkge1xuICAgICAgICB2YXIgaWR4ID0gbGlzdC5sZW5ndGggLSAxO1xuICAgICAgICB3aGlsZSAoaWR4ID49IDApIHtcbiAgICAgICAgICAgIGlmIChmbihsaXN0W2lkeF0pKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGxpc3RbaWR4XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlkeCAtPSAxO1xuICAgICAgICB9XG4gICAgfSkpO1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIGxhc3QgZWxlbWVudCBvZiB0aGUgbGlzdCB3aGljaCBtYXRjaGVzIHRoZVxuICAgICAqIHByZWRpY2F0ZSwgb3IgYC0xYCBpZiBubyBlbGVtZW50IG1hdGNoZXMuXG4gICAgICpcbiAgICAgKiBEaXNwYXRjaGVzIHRvIHRoZSBgZmluZExhc3RJbmRleGAgbWV0aG9kIG9mIHRoZSBzZWNvbmQgYXJndW1lbnQsIGlmIHByZXNlbnQuXG4gICAgICpcbiAgICAgKiBBY3RzIGFzIGEgdHJhbnNkdWNlciBpZiBhIHRyYW5zZm9ybWVyIGlzIGdpdmVuIGluIGxpc3QgcG9zaXRpb24uXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMVxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyAoYSAtPiBCb29sZWFuKSAtPiBbYV0gLT4gTnVtYmVyXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIHByZWRpY2F0ZSBmdW5jdGlvbiB1c2VkIHRvIGRldGVybWluZSBpZiB0aGUgZWxlbWVudCBpcyB0aGVcbiAgICAgKiBkZXNpcmVkIG9uZS5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBsaXN0IFRoZSBhcnJheSB0byBjb25zaWRlci5cbiAgICAgKiBAcmV0dXJuIHtOdW1iZXJ9IFRoZSBpbmRleCBvZiB0aGUgZWxlbWVudCBmb3VuZCwgb3IgYC0xYC5cbiAgICAgKiBAc2VlIFIudHJhbnNkdWNlXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIHhzID0gW3thOiAxLCBiOiAwfSwge2E6MSwgYjogMX1dO1xuICAgICAqICAgICAgUi5maW5kTGFzdEluZGV4KFIucHJvcEVxKCdhJywgMSkpKHhzKTsgLy89PiAxXG4gICAgICogICAgICBSLmZpbmRMYXN0SW5kZXgoUi5wcm9wRXEoJ2EnLCA0KSkoeHMpOyAvLz0+IC0xXG4gICAgICovXG4gICAgdmFyIGZpbmRMYXN0SW5kZXggPSBfY3VycnkyKF9kaXNwYXRjaGFibGUoJ2ZpbmRMYXN0SW5kZXgnLCBfeGZpbmRMYXN0SW5kZXgsIGZ1bmN0aW9uIGZpbmRMYXN0SW5kZXgoZm4sIGxpc3QpIHtcbiAgICAgICAgdmFyIGlkeCA9IGxpc3QubGVuZ3RoIC0gMTtcbiAgICAgICAgd2hpbGUgKGlkeCA+PSAwKSB7XG4gICAgICAgICAgICBpZiAoZm4obGlzdFtpZHhdKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBpZHg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZHggLT0gMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gLTE7XG4gICAgfSkpO1xuXG4gICAgLyoqXG4gICAgICogSXRlcmF0ZSBvdmVyIGFuIGlucHV0IGBsaXN0YCwgY2FsbGluZyBhIHByb3ZpZGVkIGZ1bmN0aW9uIGBmbmAgZm9yIGVhY2hcbiAgICAgKiBlbGVtZW50IGluIHRoZSBsaXN0LlxuICAgICAqXG4gICAgICogYGZuYCByZWNlaXZlcyBvbmUgYXJndW1lbnQ6ICoodmFsdWUpKi5cbiAgICAgKlxuICAgICAqIE5vdGU6IGBSLmZvckVhY2hgIGRvZXMgbm90IHNraXAgZGVsZXRlZCBvciB1bmFzc2lnbmVkIGluZGljZXMgKHNwYXJzZVxuICAgICAqIGFycmF5cyksIHVubGlrZSB0aGUgbmF0aXZlIGBBcnJheS5wcm90b3R5cGUuZm9yRWFjaGAgbWV0aG9kLiBGb3IgbW9yZVxuICAgICAqIGRldGFpbHMgb24gdGhpcyBiZWhhdmlvciwgc2VlOlxuICAgICAqIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0FycmF5L2ZvckVhY2gjRGVzY3JpcHRpb25cbiAgICAgKlxuICAgICAqIEFsc28gbm90ZSB0aGF0LCB1bmxpa2UgYEFycmF5LnByb3RvdHlwZS5mb3JFYWNoYCwgUmFtZGEncyBgZm9yRWFjaGAgcmV0dXJuc1xuICAgICAqIHRoZSBvcmlnaW5hbCBhcnJheS4gSW4gc29tZSBsaWJyYXJpZXMgdGhpcyBmdW5jdGlvbiBpcyBuYW1lZCBgZWFjaGAuXG4gICAgICpcbiAgICAgKiBEaXNwYXRjaGVzIHRvIHRoZSBgZm9yRWFjaGAgbWV0aG9kIG9mIHRoZSBzZWNvbmQgYXJndW1lbnQsIGlmIHByZXNlbnQuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMVxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyAoYSAtPiAqKSAtPiBbYV0gLT4gW2FdXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGZ1bmN0aW9uIHRvIGludm9rZS4gUmVjZWl2ZXMgb25lIGFyZ3VtZW50LCBgdmFsdWVgLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGxpc3QgVGhlIGxpc3QgdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEByZXR1cm4ge0FycmF5fSBUaGUgb3JpZ2luYWwgbGlzdC5cbiAgICAgKiBAc2VlIFIuYWRkSW5kZXhcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgcHJpbnRYUGx1c0ZpdmUgPSB4ID0+IGNvbnNvbGUubG9nKHggKyA1KTtcbiAgICAgKiAgICAgIFIuZm9yRWFjaChwcmludFhQbHVzRml2ZSwgWzEsIDIsIDNdKTsgLy89PiBbMSwgMiwgM11cbiAgICAgKiAgICAgIC8vLT4gNlxuICAgICAqICAgICAgLy8tPiA3XG4gICAgICogICAgICAvLy0+IDhcbiAgICAgKi9cbiAgICB2YXIgZm9yRWFjaCA9IF9jdXJyeTIoX2NoZWNrRm9yTWV0aG9kKCdmb3JFYWNoJywgZnVuY3Rpb24gZm9yRWFjaChmbiwgbGlzdCkge1xuICAgICAgICB2YXIgbGVuID0gbGlzdC5sZW5ndGg7XG4gICAgICAgIHZhciBpZHggPSAwO1xuICAgICAgICB3aGlsZSAoaWR4IDwgbGVuKSB7XG4gICAgICAgICAgICBmbihsaXN0W2lkeF0pO1xuICAgICAgICAgICAgaWR4ICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGxpc3Q7XG4gICAgfSkpO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBvYmplY3Qgb3V0IG9mIGEgbGlzdCBrZXktdmFsdWUgcGFpcnMuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjMuMFxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyBbW2ssdl1dIC0+IHtrOiB2fVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IHBhaXJzIEFuIGFycmF5IG9mIHR3by1lbGVtZW50IGFycmF5cyB0aGF0IHdpbGwgYmUgdGhlIGtleXMgYW5kIHZhbHVlcyBvZiB0aGUgb3V0cHV0IG9iamVjdC5cbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IFRoZSBvYmplY3QgbWFkZSBieSBwYWlyaW5nIHVwIGBrZXlzYCBhbmQgYHZhbHVlc2AuXG4gICAgICogQHNlZSBSLnRvUGFpcnMsIFIucGFpclxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIuZnJvbVBhaXJzKFtbJ2EnLCAxXSwgWydiJywgMl0sICBbJ2MnLCAzXV0pOyAvLz0+IHthOiAxLCBiOiAyLCBjOiAzfVxuICAgICAqL1xuICAgIHZhciBmcm9tUGFpcnMgPSBfY3VycnkxKGZ1bmN0aW9uIGZyb21QYWlycyhwYWlycykge1xuICAgICAgICB2YXIgaWR4ID0gMDtcbiAgICAgICAgdmFyIGxlbiA9IHBhaXJzLmxlbmd0aDtcbiAgICAgICAgdmFyIG91dCA9IHt9O1xuICAgICAgICB3aGlsZSAoaWR4IDwgbGVuKSB7XG4gICAgICAgICAgICBpZiAoX2lzQXJyYXkocGFpcnNbaWR4XSkgJiYgcGFpcnNbaWR4XS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBvdXRbcGFpcnNbaWR4XVswXV0gPSBwYWlyc1tpZHhdWzFdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWR4ICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFRha2VzIGEgbGlzdCBhbmQgcmV0dXJucyBhIGxpc3Qgb2YgbGlzdHMgd2hlcmUgZWFjaCBzdWJsaXN0J3MgZWxlbWVudHMgYXJlXG4gICAgICogYWxsIFwiZXF1YWxcIiBhY2NvcmRpbmcgdG8gdGhlIHByb3ZpZGVkIGVxdWFsaXR5IGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4yMS4wXG4gICAgICogQGNhdGVnb3J5IExpc3RcbiAgICAgKiBAc2lnIChhLCBhIC0+IEJvb2xlYW4pIC0+IFthXSAtPiBbW2FdXVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIEZ1bmN0aW9uIGZvciBkZXRlcm1pbmluZyB3aGV0aGVyIHR3byBnaXZlbiAoYWRqYWNlbnQpXG4gICAgICogICAgICAgIGVsZW1lbnRzIHNob3VsZCBiZSBpbiB0aGUgc2FtZSBncm91cFxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGxpc3QgVGhlIGFycmF5IHRvIGdyb3VwLiBBbHNvIGFjY2VwdHMgYSBzdHJpbmcsIHdoaWNoIHdpbGwgYmVcbiAgICAgKiAgICAgICAgdHJlYXRlZCBhcyBhIGxpc3Qgb2YgY2hhcmFjdGVycy5cbiAgICAgKiBAcmV0dXJuIHtMaXN0fSBBIGxpc3QgdGhhdCBjb250YWlucyBzdWJsaXN0cyBvZiBlcXVhbCBlbGVtZW50cyxcbiAgICAgKiAgICAgICAgIHdob3NlIGNvbmNhdGVuYXRpb25zIGlzIGVxdWFsIHRvIHRoZSBvcmlnaW5hbCBsaXN0LlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICBncm91cFdpdGgoUi5lcXVhbHMsIFswLCAxLCAxLCAyLCAzLCA1LCA4LCAxMywgMjFdKVxuICAgICAqICAgIC8vIFtbMF0sIFsxLCAxXSwgWzIsIDMsIDUsIDgsIDEzLCAyMV1dXG4gICAgICpcbiAgICAgKiAgICBncm91cFdpdGgoKGEsIGIpID0+IGEgJSAyID09PSBiICUgMiwgWzAsIDEsIDEsIDIsIDMsIDUsIDgsIDEzLCAyMV0pXG4gICAgICogICAgLy8gW1swXSwgWzEsIDFdLCBbMl0sIFszLCA1XSwgWzhdLCBbMTMsIDIxXV1cbiAgICAgKlxuICAgICAqICAgIFIuZ3JvdXBXaXRoKFIuZXFCeShpc1Zvd2VsKSwgJ2Flc3Rpb3UnKVxuICAgICAqICAgIC8vIFsnYWUnLCAnc3QnLCAnaW91J11cbiAgICAgKi9cbiAgICB2YXIgZ3JvdXBXaXRoID0gX2N1cnJ5MihmdW5jdGlvbiAoZm4sIGxpc3QpIHtcbiAgICAgICAgdmFyIHJlcyA9IFtdO1xuICAgICAgICB2YXIgaWR4ID0gMDtcbiAgICAgICAgdmFyIGxlbiA9IGxpc3QubGVuZ3RoO1xuICAgICAgICB3aGlsZSAoaWR4IDwgbGVuKSB7XG4gICAgICAgICAgICB2YXIgbmV4dGlkeCA9IGlkeCArIDE7XG4gICAgICAgICAgICB3aGlsZSAobmV4dGlkeCA8IGxlbiAmJiBmbihsaXN0W2lkeF0sIGxpc3RbbmV4dGlkeF0pKSB7XG4gICAgICAgICAgICAgICAgbmV4dGlkeCArPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVzLnB1c2gobGlzdC5zbGljZShpZHgsIG5leHRpZHgpKTtcbiAgICAgICAgICAgIGlkeCA9IG5leHRpZHg7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYHRydWVgIGlmIHRoZSBmaXJzdCBhcmd1bWVudCBpcyBncmVhdGVyIHRoYW4gdGhlIHNlY29uZDsgYGZhbHNlYFxuICAgICAqIG90aGVyd2lzZS5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4wXG4gICAgICogQGNhdGVnb3J5IFJlbGF0aW9uXG4gICAgICogQHNpZyBPcmQgYSA9PiBhIC0+IGEgLT4gQm9vbGVhblxuICAgICAqIEBwYXJhbSB7Kn0gYVxuICAgICAqIEBwYXJhbSB7Kn0gYlxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAgICogQHNlZSBSLmx0XG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5ndCgyLCAxKTsgLy89PiB0cnVlXG4gICAgICogICAgICBSLmd0KDIsIDIpOyAvLz0+IGZhbHNlXG4gICAgICogICAgICBSLmd0KDIsIDMpOyAvLz0+IGZhbHNlXG4gICAgICogICAgICBSLmd0KCdhJywgJ3onKTsgLy89PiBmYWxzZVxuICAgICAqICAgICAgUi5ndCgneicsICdhJyk7IC8vPT4gdHJ1ZVxuICAgICAqL1xuICAgIHZhciBndCA9IF9jdXJyeTIoZnVuY3Rpb24gZ3QoYSwgYikge1xuICAgICAgICByZXR1cm4gYSA+IGI7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgZmlyc3QgYXJndW1lbnQgaXMgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvIHRoZSBzZWNvbmQ7XG4gICAgICogYGZhbHNlYCBvdGhlcndpc2UuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBSZWxhdGlvblxuICAgICAqIEBzaWcgT3JkIGEgPT4gYSAtPiBhIC0+IEJvb2xlYW5cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gYVxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBiXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn1cbiAgICAgKiBAc2VlIFIubHRlXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5ndGUoMiwgMSk7IC8vPT4gdHJ1ZVxuICAgICAqICAgICAgUi5ndGUoMiwgMik7IC8vPT4gdHJ1ZVxuICAgICAqICAgICAgUi5ndGUoMiwgMyk7IC8vPT4gZmFsc2VcbiAgICAgKiAgICAgIFIuZ3RlKCdhJywgJ3onKTsgLy89PiBmYWxzZVxuICAgICAqICAgICAgUi5ndGUoJ3onLCAnYScpOyAvLz0+IHRydWVcbiAgICAgKi9cbiAgICB2YXIgZ3RlID0gX2N1cnJ5MihmdW5jdGlvbiBndGUoYSwgYikge1xuICAgICAgICByZXR1cm4gYSA+PSBiO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB3aGV0aGVyIG9yIG5vdCBhbiBvYmplY3QgaGFzIGFuIG93biBwcm9wZXJ0eSB3aXRoIHRoZSBzcGVjaWZpZWQgbmFtZVxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC43LjBcbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0XG4gICAgICogQHNpZyBzIC0+IHtzOiB4fSAtPiBCb29sZWFuXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHByb3AgVGhlIG5hbWUgb2YgdGhlIHByb3BlcnR5IHRvIGNoZWNrIGZvci5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqIFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn0gV2hldGhlciB0aGUgcHJvcGVydHkgZXhpc3RzLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBoYXNOYW1lID0gUi5oYXMoJ25hbWUnKTtcbiAgICAgKiAgICAgIGhhc05hbWUoe25hbWU6ICdhbGljZSd9KTsgICAvLz0+IHRydWVcbiAgICAgKiAgICAgIGhhc05hbWUoe25hbWU6ICdib2InfSk7ICAgICAvLz0+IHRydWVcbiAgICAgKiAgICAgIGhhc05hbWUoe30pOyAgICAgICAgICAgICAgICAvLz0+IGZhbHNlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBwb2ludCA9IHt4OiAwLCB5OiAwfTtcbiAgICAgKiAgICAgIHZhciBwb2ludEhhcyA9IFIuaGFzKFIuX18sIHBvaW50KTtcbiAgICAgKiAgICAgIHBvaW50SGFzKCd4Jyk7ICAvLz0+IHRydWVcbiAgICAgKiAgICAgIHBvaW50SGFzKCd5Jyk7ICAvLz0+IHRydWVcbiAgICAgKiAgICAgIHBvaW50SGFzKCd6Jyk7ICAvLz0+IGZhbHNlXG4gICAgICovXG4gICAgdmFyIGhhcyA9IF9jdXJyeTIoX2hhcyk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHdoZXRoZXIgb3Igbm90IGFuIG9iamVjdCBvciBpdHMgcHJvdG90eXBlIGNoYWluIGhhcyBhIHByb3BlcnR5IHdpdGhcbiAgICAgKiB0aGUgc3BlY2lmaWVkIG5hbWVcbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuNy4wXG4gICAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgICAqIEBzaWcgcyAtPiB7czogeH0gLT4gQm9vbGVhblxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wIFRoZSBuYW1lIG9mIHRoZSBwcm9wZXJ0eSB0byBjaGVjayBmb3IuXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iaiBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IFdoZXRoZXIgdGhlIHByb3BlcnR5IGV4aXN0cy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBmdW5jdGlvbiBSZWN0YW5nbGUod2lkdGgsIGhlaWdodCkge1xuICAgICAqICAgICAgICB0aGlzLndpZHRoID0gd2lkdGg7XG4gICAgICogICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAqICAgICAgfVxuICAgICAqICAgICAgUmVjdGFuZ2xlLnByb3RvdHlwZS5hcmVhID0gZnVuY3Rpb24oKSB7XG4gICAgICogICAgICAgIHJldHVybiB0aGlzLndpZHRoICogdGhpcy5oZWlnaHQ7XG4gICAgICogICAgICB9O1xuICAgICAqXG4gICAgICogICAgICB2YXIgc3F1YXJlID0gbmV3IFJlY3RhbmdsZSgyLCAyKTtcbiAgICAgKiAgICAgIFIuaGFzSW4oJ3dpZHRoJywgc3F1YXJlKTsgIC8vPT4gdHJ1ZVxuICAgICAqICAgICAgUi5oYXNJbignYXJlYScsIHNxdWFyZSk7ICAvLz0+IHRydWVcbiAgICAgKi9cbiAgICB2YXIgaGFzSW4gPSBfY3VycnkyKGZ1bmN0aW9uIGhhc0luKHByb3AsIG9iaikge1xuICAgICAgICByZXR1cm4gcHJvcCBpbiBvYmo7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgaXRzIGFyZ3VtZW50cyBhcmUgaWRlbnRpY2FsLCBmYWxzZSBvdGhlcndpc2UuIFZhbHVlcyBhcmVcbiAgICAgKiBpZGVudGljYWwgaWYgdGhleSByZWZlcmVuY2UgdGhlIHNhbWUgbWVtb3J5LiBgTmFOYCBpcyBpZGVudGljYWwgdG8gYE5hTmA7XG4gICAgICogYDBgIGFuZCBgLTBgIGFyZSBub3QgaWRlbnRpY2FsLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xNS4wXG4gICAgICogQGNhdGVnb3J5IFJlbGF0aW9uXG4gICAgICogQHNpZyBhIC0+IGEgLT4gQm9vbGVhblxuICAgICAqIEBwYXJhbSB7Kn0gYVxuICAgICAqIEBwYXJhbSB7Kn0gYlxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIG8gPSB7fTtcbiAgICAgKiAgICAgIFIuaWRlbnRpY2FsKG8sIG8pOyAvLz0+IHRydWVcbiAgICAgKiAgICAgIFIuaWRlbnRpY2FsKDEsIDEpOyAvLz0+IHRydWVcbiAgICAgKiAgICAgIFIuaWRlbnRpY2FsKDEsICcxJyk7IC8vPT4gZmFsc2VcbiAgICAgKiAgICAgIFIuaWRlbnRpY2FsKFtdLCBbXSk7IC8vPT4gZmFsc2VcbiAgICAgKiAgICAgIFIuaWRlbnRpY2FsKDAsIC0wKTsgLy89PiBmYWxzZVxuICAgICAqICAgICAgUi5pZGVudGljYWwoTmFOLCBOYU4pOyAvLz0+IHRydWVcbiAgICAgKi9cbiAgICAvLyBTYW1lVmFsdWUgYWxnb3JpdGhtXG4gICAgLy8gU3RlcHMgMS01LCA3LTEwXG4gICAgLy8gU3RlcHMgNi5iLTYuZTogKzAgIT0gLTBcbiAgICAvLyBTdGVwIDYuYTogTmFOID09IE5hTlxuICAgIHZhciBpZGVudGljYWwgPSBfY3VycnkyKGZ1bmN0aW9uIGlkZW50aWNhbChhLCBiKSB7XG4gICAgICAgIC8vIFNhbWVWYWx1ZSBhbGdvcml0aG1cbiAgICAgICAgaWYgKGEgPT09IGIpIHtcbiAgICAgICAgICAgIC8vIFN0ZXBzIDEtNSwgNy0xMFxuICAgICAgICAgICAgLy8gU3RlcHMgNi5iLTYuZTogKzAgIT0gLTBcbiAgICAgICAgICAgIHJldHVybiBhICE9PSAwIHx8IDEgLyBhID09PSAxIC8gYjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIFN0ZXAgNi5hOiBOYU4gPT0gTmFOXG4gICAgICAgICAgICByZXR1cm4gYSAhPT0gYSAmJiBiICE9PSBiO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBBIGZ1bmN0aW9uIHRoYXQgZG9lcyBub3RoaW5nIGJ1dCByZXR1cm4gdGhlIHBhcmFtZXRlciBzdXBwbGllZCB0byBpdC4gR29vZFxuICAgICAqIGFzIGEgZGVmYXVsdCBvciBwbGFjZWhvbGRlciBmdW5jdGlvbi5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4wXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAgICogQHNpZyBhIC0+IGFcbiAgICAgKiBAcGFyYW0geyp9IHggVGhlIHZhbHVlIHRvIHJldHVybi5cbiAgICAgKiBAcmV0dXJuIHsqfSBUaGUgaW5wdXQgdmFsdWUsIGB4YC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLmlkZW50aXR5KDEpOyAvLz0+IDFcbiAgICAgKlxuICAgICAqICAgICAgdmFyIG9iaiA9IHt9O1xuICAgICAqICAgICAgUi5pZGVudGl0eShvYmopID09PSBvYmo7IC8vPT4gdHJ1ZVxuICAgICAqL1xuICAgIHZhciBpZGVudGl0eSA9IF9jdXJyeTEoX2lkZW50aXR5KTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IHdpbGwgcHJvY2VzcyBlaXRoZXIgdGhlIGBvblRydWVgIG9yIHRoZSBgb25GYWxzZWBcbiAgICAgKiBmdW5jdGlvbiBkZXBlbmRpbmcgdXBvbiB0aGUgcmVzdWx0IG9mIHRoZSBgY29uZGl0aW9uYCBwcmVkaWNhdGUuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjguMFxuICAgICAqIEBjYXRlZ29yeSBMb2dpY1xuICAgICAqIEBzaWcgKCouLi4gLT4gQm9vbGVhbikgLT4gKCouLi4gLT4gKikgLT4gKCouLi4gLT4gKikgLT4gKCouLi4gLT4gKilcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjb25kaXRpb24gQSBwcmVkaWNhdGUgZnVuY3Rpb25cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvblRydWUgQSBmdW5jdGlvbiB0byBpbnZva2Ugd2hlbiB0aGUgYGNvbmRpdGlvbmAgZXZhbHVhdGVzIHRvIGEgdHJ1dGh5IHZhbHVlLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IG9uRmFsc2UgQSBmdW5jdGlvbiB0byBpbnZva2Ugd2hlbiB0aGUgYGNvbmRpdGlvbmAgZXZhbHVhdGVzIHRvIGEgZmFsc3kgdmFsdWUuXG4gICAgICogQHJldHVybiB7RnVuY3Rpb259IEEgbmV3IHVuYXJ5IGZ1bmN0aW9uIHRoYXQgd2lsbCBwcm9jZXNzIGVpdGhlciB0aGUgYG9uVHJ1ZWAgb3IgdGhlIGBvbkZhbHNlYFxuICAgICAqICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBkZXBlbmRpbmcgdXBvbiB0aGUgcmVzdWx0IG9mIHRoZSBgY29uZGl0aW9uYCBwcmVkaWNhdGUuXG4gICAgICogQHNlZSBSLnVubGVzcywgUi53aGVuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIGluY0NvdW50ID0gUi5pZkVsc2UoXG4gICAgICogICAgICAgIFIuaGFzKCdjb3VudCcpLFxuICAgICAqICAgICAgICBSLm92ZXIoUi5sZW5zUHJvcCgnY291bnQnKSwgUi5pbmMpLFxuICAgICAqICAgICAgICBSLmFzc29jKCdjb3VudCcsIDEpXG4gICAgICogICAgICApO1xuICAgICAqICAgICAgaW5jQ291bnQoe30pOyAgICAgICAgICAgLy89PiB7IGNvdW50OiAxIH1cbiAgICAgKiAgICAgIGluY0NvdW50KHsgY291bnQ6IDEgfSk7IC8vPT4geyBjb3VudDogMiB9XG4gICAgICovXG4gICAgdmFyIGlmRWxzZSA9IF9jdXJyeTMoZnVuY3Rpb24gaWZFbHNlKGNvbmRpdGlvbiwgb25UcnVlLCBvbkZhbHNlKSB7XG4gICAgICAgIHJldHVybiBjdXJyeU4oTWF0aC5tYXgoY29uZGl0aW9uLmxlbmd0aCwgb25UcnVlLmxlbmd0aCwgb25GYWxzZS5sZW5ndGgpLCBmdW5jdGlvbiBfaWZFbHNlKCkge1xuICAgICAgICAgICAgcmV0dXJuIGNvbmRpdGlvbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpID8gb25UcnVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgOiBvbkZhbHNlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogSW5jcmVtZW50cyBpdHMgYXJndW1lbnQuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjkuMFxuICAgICAqIEBjYXRlZ29yeSBNYXRoXG4gICAgICogQHNpZyBOdW1iZXIgLT4gTnVtYmVyXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IG5cbiAgICAgKiBAcmV0dXJuIHtOdW1iZXJ9XG4gICAgICogQHNlZSBSLmRlY1xuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIuaW5jKDQyKTsgLy89PiA0M1xuICAgICAqL1xuICAgIHZhciBpbmMgPSBhZGQoMSk7XG5cbiAgICAvKipcbiAgICAgKiBJbnNlcnRzIHRoZSBzdXBwbGllZCBlbGVtZW50IGludG8gdGhlIGxpc3QsIGF0IGluZGV4IGBpbmRleGAuIF9Ob3RlIHRoYXRcbiAgICAgKiB0aGlzIGlzIG5vdCBkZXN0cnVjdGl2ZV86IGl0IHJldHVybnMgYSBjb3B5IG9mIHRoZSBsaXN0IHdpdGggdGhlIGNoYW5nZXMuXG4gICAgICogPHNtYWxsPk5vIGxpc3RzIGhhdmUgYmVlbiBoYXJtZWQgaW4gdGhlIGFwcGxpY2F0aW9uIG9mIHRoaXMgZnVuY3Rpb24uPC9zbWFsbD5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMi4yXG4gICAgICogQGNhdGVnb3J5IExpc3RcbiAgICAgKiBAc2lnIE51bWJlciAtPiBhIC0+IFthXSAtPiBbYV1cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gaW5kZXggVGhlIHBvc2l0aW9uIHRvIGluc2VydCB0aGUgZWxlbWVudFxuICAgICAqIEBwYXJhbSB7Kn0gZWx0IFRoZSBlbGVtZW50IHRvIGluc2VydCBpbnRvIHRoZSBBcnJheVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGxpc3QgVGhlIGxpc3QgdG8gaW5zZXJ0IGludG9cbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gQSBuZXcgQXJyYXkgd2l0aCBgZWx0YCBpbnNlcnRlZCBhdCBgaW5kZXhgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIuaW5zZXJ0KDIsICd4JywgWzEsMiwzLDRdKTsgLy89PiBbMSwyLCd4JywzLDRdXG4gICAgICovXG4gICAgdmFyIGluc2VydCA9IF9jdXJyeTMoZnVuY3Rpb24gaW5zZXJ0KGlkeCwgZWx0LCBsaXN0KSB7XG4gICAgICAgIGlkeCA9IGlkeCA8IGxpc3QubGVuZ3RoICYmIGlkeCA+PSAwID8gaWR4IDogbGlzdC5sZW5ndGg7XG4gICAgICAgIHZhciByZXN1bHQgPSBfc2xpY2UobGlzdCk7XG4gICAgICAgIHJlc3VsdC5zcGxpY2UoaWR4LCAwLCBlbHQpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogSW5zZXJ0cyB0aGUgc3ViLWxpc3QgaW50byB0aGUgbGlzdCwgYXQgaW5kZXggYGluZGV4YC4gX05vdGUgdGhhdCB0aGlzIGlzIG5vdFxuICAgICAqIGRlc3RydWN0aXZlXzogaXQgcmV0dXJucyBhIGNvcHkgb2YgdGhlIGxpc3Qgd2l0aCB0aGUgY2hhbmdlcy5cbiAgICAgKiA8c21hbGw+Tm8gbGlzdHMgaGF2ZSBiZWVuIGhhcm1lZCBpbiB0aGUgYXBwbGljYXRpb24gb2YgdGhpcyBmdW5jdGlvbi48L3NtYWxsPlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC45LjBcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgTnVtYmVyIC0+IFthXSAtPiBbYV0gLT4gW2FdXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4IFRoZSBwb3NpdGlvbiB0byBpbnNlcnQgdGhlIHN1Yi1saXN0XG4gICAgICogQHBhcmFtIHtBcnJheX0gZWx0cyBUaGUgc3ViLWxpc3QgdG8gaW5zZXJ0IGludG8gdGhlIEFycmF5XG4gICAgICogQHBhcmFtIHtBcnJheX0gbGlzdCBUaGUgbGlzdCB0byBpbnNlcnQgdGhlIHN1Yi1saXN0IGludG9cbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gQSBuZXcgQXJyYXkgd2l0aCBgZWx0c2AgaW5zZXJ0ZWQgc3RhcnRpbmcgYXQgYGluZGV4YC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLmluc2VydEFsbCgyLCBbJ3gnLCd5JywneiddLCBbMSwyLDMsNF0pOyAvLz0+IFsxLDIsJ3gnLCd5JywneicsMyw0XVxuICAgICAqL1xuICAgIHZhciBpbnNlcnRBbGwgPSBfY3VycnkzKGZ1bmN0aW9uIGluc2VydEFsbChpZHgsIGVsdHMsIGxpc3QpIHtcbiAgICAgICAgaWR4ID0gaWR4IDwgbGlzdC5sZW5ndGggJiYgaWR4ID49IDAgPyBpZHggOiBsaXN0Lmxlbmd0aDtcbiAgICAgICAgcmV0dXJuIF9jb25jYXQoX2NvbmNhdChfc2xpY2UobGlzdCwgMCwgaWR4KSwgZWx0cyksIF9zbGljZShsaXN0LCBpZHgpKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgbGlzdCB3aXRoIHRoZSBzZXBhcmF0b3IgaW50ZXJwb3NlZCBiZXR3ZWVuIGVsZW1lbnRzLlxuICAgICAqXG4gICAgICogRGlzcGF0Y2hlcyB0byB0aGUgYGludGVyc3BlcnNlYCBtZXRob2Qgb2YgdGhlIHNlY29uZCBhcmd1bWVudCwgaWYgcHJlc2VudC5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMTQuMFxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyBhIC0+IFthXSAtPiBbYV1cbiAgICAgKiBAcGFyYW0geyp9IHNlcGFyYXRvciBUaGUgZWxlbWVudCB0byBhZGQgdG8gdGhlIGxpc3QuXG4gICAgICogQHBhcmFtIHtBcnJheX0gbGlzdCBUaGUgbGlzdCB0byBiZSBpbnRlcnBvc2VkLlxuICAgICAqIEByZXR1cm4ge0FycmF5fSBUaGUgbmV3IGxpc3QuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5pbnRlcnNwZXJzZSgnbicsIFsnYmEnLCAnYScsICdhJ10pOyAvLz0+IFsnYmEnLCAnbicsICdhJywgJ24nLCAnYSddXG4gICAgICovXG4gICAgdmFyIGludGVyc3BlcnNlID0gX2N1cnJ5MihfY2hlY2tGb3JNZXRob2QoJ2ludGVyc3BlcnNlJywgZnVuY3Rpb24gaW50ZXJzcGVyc2Uoc2VwYXJhdG9yLCBsaXN0KSB7XG4gICAgICAgIHZhciBvdXQgPSBbXTtcbiAgICAgICAgdmFyIGlkeCA9IDA7XG4gICAgICAgIHZhciBsZW5ndGggPSBsaXN0Lmxlbmd0aDtcbiAgICAgICAgd2hpbGUgKGlkeCA8IGxlbmd0aCkge1xuICAgICAgICAgICAgaWYgKGlkeCA9PT0gbGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgICAgIG91dC5wdXNoKGxpc3RbaWR4XSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG91dC5wdXNoKGxpc3RbaWR4XSwgc2VwYXJhdG9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlkeCArPSAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfSkpO1xuXG4gICAgLyoqXG4gICAgICogU2VlIGlmIGFuIG9iamVjdCAoYHZhbGApIGlzIGFuIGluc3RhbmNlIG9mIHRoZSBzdXBwbGllZCBjb25zdHJ1Y3Rvci4gVGhpc1xuICAgICAqIGZ1bmN0aW9uIHdpbGwgY2hlY2sgdXAgdGhlIGluaGVyaXRhbmNlIGNoYWluLCBpZiBhbnkuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjMuMFxuICAgICAqIEBjYXRlZ29yeSBUeXBlXG4gICAgICogQHNpZyAoKiAtPiB7Kn0pIC0+IGEgLT4gQm9vbGVhblxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBjdG9yIEEgY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0geyp9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5pcyhPYmplY3QsIHt9KTsgLy89PiB0cnVlXG4gICAgICogICAgICBSLmlzKE51bWJlciwgMSk7IC8vPT4gdHJ1ZVxuICAgICAqICAgICAgUi5pcyhPYmplY3QsIDEpOyAvLz0+IGZhbHNlXG4gICAgICogICAgICBSLmlzKFN0cmluZywgJ3MnKTsgLy89PiB0cnVlXG4gICAgICogICAgICBSLmlzKFN0cmluZywgbmV3IFN0cmluZygnJykpOyAvLz0+IHRydWVcbiAgICAgKiAgICAgIFIuaXMoT2JqZWN0LCBuZXcgU3RyaW5nKCcnKSk7IC8vPT4gdHJ1ZVxuICAgICAqICAgICAgUi5pcyhPYmplY3QsICdzJyk7IC8vPT4gZmFsc2VcbiAgICAgKiAgICAgIFIuaXMoTnVtYmVyLCB7fSk7IC8vPT4gZmFsc2VcbiAgICAgKi9cbiAgICB2YXIgaXMgPSBfY3VycnkyKGZ1bmN0aW9uIGlzKEN0b3IsIHZhbCkge1xuICAgICAgICByZXR1cm4gdmFsICE9IG51bGwgJiYgdmFsLmNvbnN0cnVjdG9yID09PSBDdG9yIHx8IHZhbCBpbnN0YW5jZW9mIEN0b3I7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBUZXN0cyB3aGV0aGVyIG9yIG5vdCBhbiBvYmplY3QgaXMgc2ltaWxhciB0byBhbiBhcnJheS5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuNS4wXG4gICAgICogQGNhdGVnb3J5IFR5cGVcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgKiAtPiBCb29sZWFuXG4gICAgICogQHBhcmFtIHsqfSB4IFRoZSBvYmplY3QgdG8gdGVzdC5cbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufSBgdHJ1ZWAgaWYgYHhgIGhhcyBhIG51bWVyaWMgbGVuZ3RoIHByb3BlcnR5IGFuZCBleHRyZW1lIGluZGljZXMgZGVmaW5lZDsgYGZhbHNlYCBvdGhlcndpc2UuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5pc0FycmF5TGlrZShbXSk7IC8vPT4gdHJ1ZVxuICAgICAqICAgICAgUi5pc0FycmF5TGlrZSh0cnVlKTsgLy89PiBmYWxzZVxuICAgICAqICAgICAgUi5pc0FycmF5TGlrZSh7fSk7IC8vPT4gZmFsc2VcbiAgICAgKiAgICAgIFIuaXNBcnJheUxpa2Uoe2xlbmd0aDogMTB9KTsgLy89PiBmYWxzZVxuICAgICAqICAgICAgUi5pc0FycmF5TGlrZSh7MDogJ3plcm8nLCA5OiAnbmluZScsIGxlbmd0aDogMTB9KTsgLy89PiB0cnVlXG4gICAgICovXG4gICAgdmFyIGlzQXJyYXlMaWtlID0gX2N1cnJ5MShmdW5jdGlvbiBpc0FycmF5TGlrZSh4KSB7XG4gICAgICAgIGlmIChfaXNBcnJheSh4KSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF4KSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiB4ICE9PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh4IGluc3RhbmNlb2YgU3RyaW5nKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHgubm9kZVR5cGUgPT09IDEpIHtcbiAgICAgICAgICAgIHJldHVybiAhIXgubGVuZ3RoO1xuICAgICAgICB9XG4gICAgICAgIGlmICh4Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHgubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHguaGFzT3duUHJvcGVydHkoMCkgJiYgeC5oYXNPd25Qcm9wZXJ0eSh4Lmxlbmd0aCAtIDEpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpZiB0aGUgaW5wdXQgdmFsdWUgaXMgYG51bGxgIG9yIGB1bmRlZmluZWRgLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC45LjBcbiAgICAgKiBAY2F0ZWdvcnkgVHlwZVxuICAgICAqIEBzaWcgKiAtPiBCb29sZWFuXG4gICAgICogQHBhcmFtIHsqfSB4IFRoZSB2YWx1ZSB0byB0ZXN0LlxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IGB0cnVlYCBpZiBgeGAgaXMgYHVuZGVmaW5lZGAgb3IgYG51bGxgLCBvdGhlcndpc2UgYGZhbHNlYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLmlzTmlsKG51bGwpOyAvLz0+IHRydWVcbiAgICAgKiAgICAgIFIuaXNOaWwodW5kZWZpbmVkKTsgLy89PiB0cnVlXG4gICAgICogICAgICBSLmlzTmlsKDApOyAvLz0+IGZhbHNlXG4gICAgICogICAgICBSLmlzTmlsKFtdKTsgLy89PiBmYWxzZVxuICAgICAqL1xuICAgIHZhciBpc05pbCA9IF9jdXJyeTEoZnVuY3Rpb24gaXNOaWwoeCkge1xuICAgICAgICByZXR1cm4geCA9PSBudWxsO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIGxpc3QgY29udGFpbmluZyB0aGUgbmFtZXMgb2YgYWxsIHRoZSBlbnVtZXJhYmxlIG93biBwcm9wZXJ0aWVzIG9mXG4gICAgICogdGhlIHN1cHBsaWVkIG9iamVjdC5cbiAgICAgKiBOb3RlIHRoYXQgdGhlIG9yZGVyIG9mIHRoZSBvdXRwdXQgYXJyYXkgaXMgbm90IGd1YXJhbnRlZWQgdG8gYmUgY29uc2lzdGVudFxuICAgICAqIGFjcm9zcyBkaWZmZXJlbnQgSlMgcGxhdGZvcm1zLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0XG4gICAgICogQHNpZyB7azogdn0gLT4gW2tdXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iaiBUaGUgb2JqZWN0IHRvIGV4dHJhY3QgcHJvcGVydGllcyBmcm9tXG4gICAgICogQHJldHVybiB7QXJyYXl9IEFuIGFycmF5IG9mIHRoZSBvYmplY3QncyBvd24gcHJvcGVydGllcy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLmtleXMoe2E6IDEsIGI6IDIsIGM6IDN9KTsgLy89PiBbJ2EnLCAnYicsICdjJ11cbiAgICAgKi9cbiAgICAvLyBjb3ZlciBJRSA8IDkga2V5cyBpc3N1ZXNcbiAgICAvLyBTYWZhcmkgYnVnXG4gICAgdmFyIGtleXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vIGNvdmVyIElFIDwgOSBrZXlzIGlzc3Vlc1xuICAgICAgICB2YXIgaGFzRW51bUJ1ZyA9ICF7IHRvU3RyaW5nOiBudWxsIH0ucHJvcGVydHlJc0VudW1lcmFibGUoJ3RvU3RyaW5nJyk7XG4gICAgICAgIHZhciBub25FbnVtZXJhYmxlUHJvcHMgPSBbXG4gICAgICAgICAgICAnY29uc3RydWN0b3InLFxuICAgICAgICAgICAgJ3ZhbHVlT2YnLFxuICAgICAgICAgICAgJ2lzUHJvdG90eXBlT2YnLFxuICAgICAgICAgICAgJ3RvU3RyaW5nJyxcbiAgICAgICAgICAgICdwcm9wZXJ0eUlzRW51bWVyYWJsZScsXG4gICAgICAgICAgICAnaGFzT3duUHJvcGVydHknLFxuICAgICAgICAgICAgJ3RvTG9jYWxlU3RyaW5nJ1xuICAgICAgICBdO1xuICAgICAgICAvLyBTYWZhcmkgYnVnXG4gICAgICAgIHZhciBoYXNBcmdzRW51bUJ1ZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICd1c2Ugc3RyaWN0JztcbiAgICAgICAgICAgIHJldHVybiBhcmd1bWVudHMucHJvcGVydHlJc0VudW1lcmFibGUoJ2xlbmd0aCcpO1xuICAgICAgICB9KCk7XG4gICAgICAgIHZhciBjb250YWlucyA9IGZ1bmN0aW9uIGNvbnRhaW5zKGxpc3QsIGl0ZW0pIHtcbiAgICAgICAgICAgIHZhciBpZHggPSAwO1xuICAgICAgICAgICAgd2hpbGUgKGlkeCA8IGxpc3QubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgaWYgKGxpc3RbaWR4XSA9PT0gaXRlbSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWR4ICs9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0eXBlb2YgT2JqZWN0LmtleXMgPT09ICdmdW5jdGlvbicgJiYgIWhhc0FyZ3NFbnVtQnVnID8gX2N1cnJ5MShmdW5jdGlvbiBrZXlzKG9iaikge1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdChvYmopICE9PSBvYmogPyBbXSA6IE9iamVjdC5rZXlzKG9iaik7XG4gICAgICAgIH0pIDogX2N1cnJ5MShmdW5jdGlvbiBrZXlzKG9iaikge1xuICAgICAgICAgICAgaWYgKE9iamVjdChvYmopICE9PSBvYmopIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgcHJvcCwgbklkeDtcbiAgICAgICAgICAgIHZhciBrcyA9IFtdO1xuICAgICAgICAgICAgdmFyIGNoZWNrQXJnc0xlbmd0aCA9IGhhc0FyZ3NFbnVtQnVnICYmIF9pc0FyZ3VtZW50cyhvYmopO1xuICAgICAgICAgICAgZm9yIChwcm9wIGluIG9iaikge1xuICAgICAgICAgICAgICAgIGlmIChfaGFzKHByb3AsIG9iaikgJiYgKCFjaGVja0FyZ3NMZW5ndGggfHwgcHJvcCAhPT0gJ2xlbmd0aCcpKSB7XG4gICAgICAgICAgICAgICAgICAgIGtzW2tzLmxlbmd0aF0gPSBwcm9wO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChoYXNFbnVtQnVnKSB7XG4gICAgICAgICAgICAgICAgbklkeCA9IG5vbkVudW1lcmFibGVQcm9wcy5sZW5ndGggLSAxO1xuICAgICAgICAgICAgICAgIHdoaWxlIChuSWR4ID49IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvcCA9IG5vbkVudW1lcmFibGVQcm9wc1tuSWR4XTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKF9oYXMocHJvcCwgb2JqKSAmJiAhY29udGFpbnMoa3MsIHByb3ApKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBrc1trcy5sZW5ndGhdID0gcHJvcDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBuSWR4IC09IDE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGtzO1xuICAgICAgICB9KTtcbiAgICB9KCk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgbGlzdCBjb250YWluaW5nIHRoZSBuYW1lcyBvZiBhbGwgdGhlIHByb3BlcnRpZXMgb2YgdGhlIHN1cHBsaWVkXG4gICAgICogb2JqZWN0LCBpbmNsdWRpbmcgcHJvdG90eXBlIHByb3BlcnRpZXMuXG4gICAgICogTm90ZSB0aGF0IHRoZSBvcmRlciBvZiB0aGUgb3V0cHV0IGFycmF5IGlzIG5vdCBndWFyYW50ZWVkIHRvIGJlIGNvbnNpc3RlbnRcbiAgICAgKiBhY3Jvc3MgZGlmZmVyZW50IEpTIHBsYXRmb3Jtcy5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMi4wXG4gICAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgICAqIEBzaWcge2s6IHZ9IC0+IFtrXVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmogVGhlIG9iamVjdCB0byBleHRyYWN0IHByb3BlcnRpZXMgZnJvbVxuICAgICAqIEByZXR1cm4ge0FycmF5fSBBbiBhcnJheSBvZiB0aGUgb2JqZWN0J3Mgb3duIGFuZCBwcm90b3R5cGUgcHJvcGVydGllcy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgRiA9IGZ1bmN0aW9uKCkgeyB0aGlzLnggPSAnWCc7IH07XG4gICAgICogICAgICBGLnByb3RvdHlwZS55ID0gJ1knO1xuICAgICAqICAgICAgdmFyIGYgPSBuZXcgRigpO1xuICAgICAqICAgICAgUi5rZXlzSW4oZik7IC8vPT4gWyd4JywgJ3knXVxuICAgICAqL1xuICAgIHZhciBrZXlzSW4gPSBfY3VycnkxKGZ1bmN0aW9uIGtleXNJbihvYmopIHtcbiAgICAgICAgdmFyIHByb3A7XG4gICAgICAgIHZhciBrcyA9IFtdO1xuICAgICAgICBmb3IgKHByb3AgaW4gb2JqKSB7XG4gICAgICAgICAgICBrc1trcy5sZW5ndGhdID0gcHJvcDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ga3M7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBudW1iZXIgb2YgZWxlbWVudHMgaW4gdGhlIGFycmF5IGJ5IHJldHVybmluZyBgbGlzdC5sZW5ndGhgLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4zLjBcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgW2FdIC0+IE51bWJlclxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGxpc3QgVGhlIGFycmF5IHRvIGluc3BlY3QuXG4gICAgICogQHJldHVybiB7TnVtYmVyfSBUaGUgbGVuZ3RoIG9mIHRoZSBhcnJheS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLmxlbmd0aChbXSk7IC8vPT4gMFxuICAgICAqICAgICAgUi5sZW5ndGgoWzEsIDIsIDNdKTsgLy89PiAzXG4gICAgICovXG4gICAgdmFyIGxlbmd0aCA9IF9jdXJyeTEoZnVuY3Rpb24gbGVuZ3RoKGxpc3QpIHtcbiAgICAgICAgcmV0dXJuIGxpc3QgIT0gbnVsbCAmJiBpcyhOdW1iZXIsIGxpc3QubGVuZ3RoKSA/IGxpc3QubGVuZ3RoIDogTmFOO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGZpcnN0IGFyZ3VtZW50IGlzIGxlc3MgdGhhbiB0aGUgc2Vjb25kOyBgZmFsc2VgXG4gICAgICogb3RoZXJ3aXNlLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgUmVsYXRpb25cbiAgICAgKiBAc2lnIE9yZCBhID0+IGEgLT4gYSAtPiBCb29sZWFuXG4gICAgICogQHBhcmFtIHsqfSBhXG4gICAgICogQHBhcmFtIHsqfSBiXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn1cbiAgICAgKiBAc2VlIFIuZ3RcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLmx0KDIsIDEpOyAvLz0+IGZhbHNlXG4gICAgICogICAgICBSLmx0KDIsIDIpOyAvLz0+IGZhbHNlXG4gICAgICogICAgICBSLmx0KDIsIDMpOyAvLz0+IHRydWVcbiAgICAgKiAgICAgIFIubHQoJ2EnLCAneicpOyAvLz0+IHRydWVcbiAgICAgKiAgICAgIFIubHQoJ3onLCAnYScpOyAvLz0+IGZhbHNlXG4gICAgICovXG4gICAgdmFyIGx0ID0gX2N1cnJ5MihmdW5jdGlvbiBsdChhLCBiKSB7XG4gICAgICAgIHJldHVybiBhIDwgYjtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYHRydWVgIGlmIHRoZSBmaXJzdCBhcmd1bWVudCBpcyBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gdGhlIHNlY29uZDtcbiAgICAgKiBgZmFsc2VgIG90aGVyd2lzZS5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4wXG4gICAgICogQGNhdGVnb3J5IFJlbGF0aW9uXG4gICAgICogQHNpZyBPcmQgYSA9PiBhIC0+IGEgLT4gQm9vbGVhblxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBhXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGJcbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgICAqIEBzZWUgUi5ndGVcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLmx0ZSgyLCAxKTsgLy89PiBmYWxzZVxuICAgICAqICAgICAgUi5sdGUoMiwgMik7IC8vPT4gdHJ1ZVxuICAgICAqICAgICAgUi5sdGUoMiwgMyk7IC8vPT4gdHJ1ZVxuICAgICAqICAgICAgUi5sdGUoJ2EnLCAneicpOyAvLz0+IHRydWVcbiAgICAgKiAgICAgIFIubHRlKCd6JywgJ2EnKTsgLy89PiBmYWxzZVxuICAgICAqL1xuICAgIHZhciBsdGUgPSBfY3VycnkyKGZ1bmN0aW9uIGx0ZShhLCBiKSB7XG4gICAgICAgIHJldHVybiBhIDw9IGI7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgbWFwQWNjdW0gZnVuY3Rpb24gYmVoYXZlcyBsaWtlIGEgY29tYmluYXRpb24gb2YgbWFwIGFuZCByZWR1Y2U7IGl0XG4gICAgICogYXBwbGllcyBhIGZ1bmN0aW9uIHRvIGVhY2ggZWxlbWVudCBvZiBhIGxpc3QsIHBhc3NpbmcgYW4gYWNjdW11bGF0aW5nXG4gICAgICogcGFyYW1ldGVyIGZyb20gbGVmdCB0byByaWdodCwgYW5kIHJldHVybmluZyBhIGZpbmFsIHZhbHVlIG9mIHRoaXNcbiAgICAgKiBhY2N1bXVsYXRvciB0b2dldGhlciB3aXRoIHRoZSBuZXcgbGlzdC5cbiAgICAgKlxuICAgICAqIFRoZSBpdGVyYXRvciBmdW5jdGlvbiByZWNlaXZlcyB0d28gYXJndW1lbnRzLCAqYWNjKiBhbmQgKnZhbHVlKiwgYW5kIHNob3VsZFxuICAgICAqIHJldHVybiBhIHR1cGxlICpbYWNjLCB2YWx1ZV0qLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xMC4wXG4gICAgICogQGNhdGVnb3J5IExpc3RcbiAgICAgKiBAc2lnIChhY2MgLT4geCAtPiAoYWNjLCB5KSkgLT4gYWNjIC0+IFt4XSAtPiAoYWNjLCBbeV0pXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZCBvbiBldmVyeSBlbGVtZW50IG9mIHRoZSBpbnB1dCBgbGlzdGAuXG4gICAgICogQHBhcmFtIHsqfSBhY2MgVGhlIGFjY3VtdWxhdG9yIHZhbHVlLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGxpc3QgVGhlIGxpc3QgdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEByZXR1cm4geyp9IFRoZSBmaW5hbCwgYWNjdW11bGF0ZWQgdmFsdWUuXG4gICAgICogQHNlZSBSLmFkZEluZGV4XG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIGRpZ2l0cyA9IFsnMScsICcyJywgJzMnLCAnNCddO1xuICAgICAqICAgICAgdmFyIGFwcGVuZGVyID0gKGEsIGIpID0+IFthICsgYiwgYSArIGJdO1xuICAgICAqXG4gICAgICogICAgICBSLm1hcEFjY3VtKGFwcGVuZGVyLCAwLCBkaWdpdHMpOyAvLz0+IFsnMDEyMzQnLCBbJzAxJywgJzAxMicsICcwMTIzJywgJzAxMjM0J11dXG4gICAgICovXG4gICAgdmFyIG1hcEFjY3VtID0gX2N1cnJ5MyhmdW5jdGlvbiBtYXBBY2N1bShmbiwgYWNjLCBsaXN0KSB7XG4gICAgICAgIHZhciBpZHggPSAwO1xuICAgICAgICB2YXIgbGVuID0gbGlzdC5sZW5ndGg7XG4gICAgICAgIHZhciByZXN1bHQgPSBbXTtcbiAgICAgICAgdmFyIHR1cGxlID0gW2FjY107XG4gICAgICAgIHdoaWxlIChpZHggPCBsZW4pIHtcbiAgICAgICAgICAgIHR1cGxlID0gZm4odHVwbGVbMF0sIGxpc3RbaWR4XSk7XG4gICAgICAgICAgICByZXN1bHRbaWR4XSA9IHR1cGxlWzFdO1xuICAgICAgICAgICAgaWR4ICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIHR1cGxlWzBdLFxuICAgICAgICAgICAgcmVzdWx0XG4gICAgICAgIF07XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgbWFwQWNjdW1SaWdodCBmdW5jdGlvbiBiZWhhdmVzIGxpa2UgYSBjb21iaW5hdGlvbiBvZiBtYXAgYW5kIHJlZHVjZTsgaXRcbiAgICAgKiBhcHBsaWVzIGEgZnVuY3Rpb24gdG8gZWFjaCBlbGVtZW50IG9mIGEgbGlzdCwgcGFzc2luZyBhbiBhY2N1bXVsYXRpbmdcbiAgICAgKiBwYXJhbWV0ZXIgZnJvbSByaWdodCB0byBsZWZ0LCBhbmQgcmV0dXJuaW5nIGEgZmluYWwgdmFsdWUgb2YgdGhpc1xuICAgICAqIGFjY3VtdWxhdG9yIHRvZ2V0aGVyIHdpdGggdGhlIG5ldyBsaXN0LlxuICAgICAqXG4gICAgICogU2ltaWxhciB0byBgbWFwQWNjdW1gLCBleGNlcHQgbW92ZXMgdGhyb3VnaCB0aGUgaW5wdXQgbGlzdCBmcm9tIHRoZSByaWdodCB0b1xuICAgICAqIHRoZSBsZWZ0LlxuICAgICAqXG4gICAgICogVGhlIGl0ZXJhdG9yIGZ1bmN0aW9uIHJlY2VpdmVzIHR3byBhcmd1bWVudHMsICphY2MqIGFuZCAqdmFsdWUqLCBhbmQgc2hvdWxkXG4gICAgICogcmV0dXJuIGEgdHVwbGUgKlthY2MsIHZhbHVlXSouXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEwLjBcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgKGFjYyAtPiB4IC0+IChhY2MsIHkpKSAtPiBhY2MgLT4gW3hdIC0+IChhY2MsIFt5XSlcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIG9uIGV2ZXJ5IGVsZW1lbnQgb2YgdGhlIGlucHV0IGBsaXN0YC5cbiAgICAgKiBAcGFyYW0geyp9IGFjYyBUaGUgYWNjdW11bGF0b3IgdmFsdWUuXG4gICAgICogQHBhcmFtIHtBcnJheX0gbGlzdCBUaGUgbGlzdCB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHJldHVybiB7Kn0gVGhlIGZpbmFsLCBhY2N1bXVsYXRlZCB2YWx1ZS5cbiAgICAgKiBAc2VlIFIuYWRkSW5kZXhcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgZGlnaXRzID0gWycxJywgJzInLCAnMycsICc0J107XG4gICAgICogICAgICB2YXIgYXBwZW5kID0gKGEsIGIpID0+IFthICsgYiwgYSArIGJdO1xuICAgICAqXG4gICAgICogICAgICBSLm1hcEFjY3VtUmlnaHQoYXBwZW5kLCAwLCBkaWdpdHMpOyAvLz0+IFsnMDQzMjEnLCBbJzA0MzIxJywgJzA0MzInLCAnMDQzJywgJzA0J11dXG4gICAgICovXG4gICAgdmFyIG1hcEFjY3VtUmlnaHQgPSBfY3VycnkzKGZ1bmN0aW9uIG1hcEFjY3VtUmlnaHQoZm4sIGFjYywgbGlzdCkge1xuICAgICAgICB2YXIgaWR4ID0gbGlzdC5sZW5ndGggLSAxO1xuICAgICAgICB2YXIgcmVzdWx0ID0gW107XG4gICAgICAgIHZhciB0dXBsZSA9IFthY2NdO1xuICAgICAgICB3aGlsZSAoaWR4ID49IDApIHtcbiAgICAgICAgICAgIHR1cGxlID0gZm4odHVwbGVbMF0sIGxpc3RbaWR4XSk7XG4gICAgICAgICAgICByZXN1bHRbaWR4XSA9IHR1cGxlWzFdO1xuICAgICAgICAgICAgaWR4IC09IDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIHR1cGxlWzBdLFxuICAgICAgICAgICAgcmVzdWx0XG4gICAgICAgIF07XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBUZXN0cyBhIHJlZ3VsYXIgZXhwcmVzc2lvbiBhZ2FpbnN0IGEgU3RyaW5nLiBOb3RlIHRoYXQgdGhpcyBmdW5jdGlvbiB3aWxsXG4gICAgICogcmV0dXJuIGFuIGVtcHR5IGFycmF5IHdoZW4gdGhlcmUgYXJlIG5vIG1hdGNoZXMuIFRoaXMgZGlmZmVycyBmcm9tXG4gICAgICogW2BTdHJpbmcucHJvdG90eXBlLm1hdGNoYF0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvU3RyaW5nL21hdGNoKVxuICAgICAqIHdoaWNoIHJldHVybnMgYG51bGxgIHdoZW4gdGhlcmUgYXJlIG5vIG1hdGNoZXMuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBTdHJpbmdcbiAgICAgKiBAc2lnIFJlZ0V4cCAtPiBTdHJpbmcgLT4gW1N0cmluZyB8IFVuZGVmaW5lZF1cbiAgICAgKiBAcGFyYW0ge1JlZ0V4cH0gcnggQSByZWd1bGFyIGV4cHJlc3Npb24uXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHN0ciBUaGUgc3RyaW5nIHRvIG1hdGNoIGFnYWluc3RcbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gVGhlIGxpc3Qgb2YgbWF0Y2hlcyBvciBlbXB0eSBhcnJheS5cbiAgICAgKiBAc2VlIFIudGVzdFxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIubWF0Y2goLyhbYS16XWEpL2csICdiYW5hbmFzJyk7IC8vPT4gWydiYScsICduYScsICduYSddXG4gICAgICogICAgICBSLm1hdGNoKC9hLywgJ2InKTsgLy89PiBbXVxuICAgICAqICAgICAgUi5tYXRjaCgvYS8sIG51bGwpOyAvLz0+IFR5cGVFcnJvcjogbnVsbCBkb2VzIG5vdCBoYXZlIGEgbWV0aG9kIG5hbWVkIFwibWF0Y2hcIlxuICAgICAqL1xuICAgIHZhciBtYXRjaCA9IF9jdXJyeTIoZnVuY3Rpb24gbWF0Y2gocngsIHN0cikge1xuICAgICAgICByZXR1cm4gc3RyLm1hdGNoKHJ4KSB8fCBbXTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIG1hdGhNb2QgYmVoYXZlcyBsaWtlIHRoZSBtb2R1bG8gb3BlcmF0b3Igc2hvdWxkIG1hdGhlbWF0aWNhbGx5LCB1bmxpa2UgdGhlXG4gICAgICogYCVgIG9wZXJhdG9yIChhbmQgYnkgZXh0ZW5zaW9uLCBSLm1vZHVsbykuIFNvIHdoaWxlIFwiLTE3ICUgNVwiIGlzIC0yLFxuICAgICAqIG1hdGhNb2QoLTE3LCA1KSBpcyAzLiBtYXRoTW9kIHJlcXVpcmVzIEludGVnZXIgYXJndW1lbnRzLCBhbmQgcmV0dXJucyBOYU5cbiAgICAgKiB3aGVuIHRoZSBtb2R1bHVzIGlzIHplcm8gb3IgbmVnYXRpdmUuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjMuMFxuICAgICAqIEBjYXRlZ29yeSBNYXRoXG4gICAgICogQHNpZyBOdW1iZXIgLT4gTnVtYmVyIC0+IE51bWJlclxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBtIFRoZSBkaXZpZGVuZC5cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gcCB0aGUgbW9kdWx1cy5cbiAgICAgKiBAcmV0dXJuIHtOdW1iZXJ9IFRoZSByZXN1bHQgb2YgYGIgbW9kIGFgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIubWF0aE1vZCgtMTcsIDUpOyAgLy89PiAzXG4gICAgICogICAgICBSLm1hdGhNb2QoMTcsIDUpOyAgIC8vPT4gMlxuICAgICAqICAgICAgUi5tYXRoTW9kKDE3LCAtNSk7ICAvLz0+IE5hTlxuICAgICAqICAgICAgUi5tYXRoTW9kKDE3LCAwKTsgICAvLz0+IE5hTlxuICAgICAqICAgICAgUi5tYXRoTW9kKDE3LjIsIDUpOyAvLz0+IE5hTlxuICAgICAqICAgICAgUi5tYXRoTW9kKDE3LCA1LjMpOyAvLz0+IE5hTlxuICAgICAqXG4gICAgICogICAgICB2YXIgY2xvY2sgPSBSLm1hdGhNb2QoUi5fXywgMTIpO1xuICAgICAqICAgICAgY2xvY2soMTUpOyAvLz0+IDNcbiAgICAgKiAgICAgIGNsb2NrKDI0KTsgLy89PiAwXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBzZXZlbnRlZW5Nb2QgPSBSLm1hdGhNb2QoMTcpO1xuICAgICAqICAgICAgc2V2ZW50ZWVuTW9kKDMpOyAgLy89PiAyXG4gICAgICogICAgICBzZXZlbnRlZW5Nb2QoNCk7ICAvLz0+IDFcbiAgICAgKiAgICAgIHNldmVudGVlbk1vZCgxMCk7IC8vPT4gN1xuICAgICAqL1xuICAgIHZhciBtYXRoTW9kID0gX2N1cnJ5MihmdW5jdGlvbiBtYXRoTW9kKG0sIHApIHtcbiAgICAgICAgaWYgKCFfaXNJbnRlZ2VyKG0pKSB7XG4gICAgICAgICAgICByZXR1cm4gTmFOO1xuICAgICAgICB9XG4gICAgICAgIGlmICghX2lzSW50ZWdlcihwKSB8fCBwIDwgMSkge1xuICAgICAgICAgICAgcmV0dXJuIE5hTjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKG0gJSBwICsgcCkgJSBwO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgbGFyZ2VyIG9mIGl0cyB0d28gYXJndW1lbnRzLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgUmVsYXRpb25cbiAgICAgKiBAc2lnIE9yZCBhID0+IGEgLT4gYSAtPiBhXG4gICAgICogQHBhcmFtIHsqfSBhXG4gICAgICogQHBhcmFtIHsqfSBiXG4gICAgICogQHJldHVybiB7Kn1cbiAgICAgKiBAc2VlIFIubWF4QnksIFIubWluXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5tYXgoNzg5LCAxMjMpOyAvLz0+IDc4OVxuICAgICAqICAgICAgUi5tYXgoJ2EnLCAnYicpOyAvLz0+ICdiJ1xuICAgICAqL1xuICAgIHZhciBtYXggPSBfY3VycnkyKGZ1bmN0aW9uIG1heChhLCBiKSB7XG4gICAgICAgIHJldHVybiBiID4gYSA/IGIgOiBhO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogVGFrZXMgYSBmdW5jdGlvbiBhbmQgdHdvIHZhbHVlcywgYW5kIHJldHVybnMgd2hpY2hldmVyIHZhbHVlIHByb2R1Y2VzIHRoZVxuICAgICAqIGxhcmdlciByZXN1bHQgd2hlbiBwYXNzZWQgdG8gdGhlIHByb3ZpZGVkIGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC44LjBcbiAgICAgKiBAY2F0ZWdvcnkgUmVsYXRpb25cbiAgICAgKiBAc2lnIE9yZCBiID0+IChhIC0+IGIpIC0+IGEgLT4gYSAtPiBhXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZlxuICAgICAqIEBwYXJhbSB7Kn0gYVxuICAgICAqIEBwYXJhbSB7Kn0gYlxuICAgICAqIEByZXR1cm4geyp9XG4gICAgICogQHNlZSBSLm1heCwgUi5taW5CeVxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIC8vICBzcXVhcmUgOjogTnVtYmVyIC0+IE51bWJlclxuICAgICAqICAgICAgdmFyIHNxdWFyZSA9IG4gPT4gbiAqIG47XG4gICAgICpcbiAgICAgKiAgICAgIFIubWF4Qnkoc3F1YXJlLCAtMywgMik7IC8vPT4gLTNcbiAgICAgKlxuICAgICAqICAgICAgUi5yZWR1Y2UoUi5tYXhCeShzcXVhcmUpLCAwLCBbMywgLTUsIDQsIDEsIC0yXSk7IC8vPT4gLTVcbiAgICAgKiAgICAgIFIucmVkdWNlKFIubWF4Qnkoc3F1YXJlKSwgMCwgW10pOyAvLz0+IDBcbiAgICAgKi9cbiAgICB2YXIgbWF4QnkgPSBfY3VycnkzKGZ1bmN0aW9uIG1heEJ5KGYsIGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIGYoYikgPiBmKGEpID8gYiA6IGE7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBuZXcgb2JqZWN0IHdpdGggdGhlIG93biBwcm9wZXJ0aWVzIG9mIHRoZSBmaXJzdCBvYmplY3QgbWVyZ2VkIHdpdGhcbiAgICAgKiB0aGUgb3duIHByb3BlcnRpZXMgb2YgdGhlIHNlY29uZCBvYmplY3QuIElmIGEga2V5IGV4aXN0cyBpbiBib3RoIG9iamVjdHMsXG4gICAgICogdGhlIHZhbHVlIGZyb20gdGhlIHNlY29uZCBvYmplY3Qgd2lsbCBiZSB1c2VkLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0XG4gICAgICogQHNpZyB7azogdn0gLT4ge2s6IHZ9IC0+IHtrOiB2fVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBsXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHJcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAgICogQHNlZSBSLm1lcmdlV2l0aCwgUi5tZXJnZVdpdGhLZXlcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLm1lcmdlKHsgJ25hbWUnOiAnZnJlZCcsICdhZ2UnOiAxMCB9LCB7ICdhZ2UnOiA0MCB9KTtcbiAgICAgKiAgICAgIC8vPT4geyAnbmFtZSc6ICdmcmVkJywgJ2FnZSc6IDQwIH1cbiAgICAgKlxuICAgICAqICAgICAgdmFyIHJlc2V0VG9EZWZhdWx0ID0gUi5tZXJnZShSLl9fLCB7eDogMH0pO1xuICAgICAqICAgICAgcmVzZXRUb0RlZmF1bHQoe3g6IDUsIHk6IDJ9KTsgLy89PiB7eDogMCwgeTogMn1cbiAgICAgKi9cbiAgICB2YXIgbWVyZ2UgPSBfY3VycnkyKGZ1bmN0aW9uIG1lcmdlKGwsIHIpIHtcbiAgICAgICAgcmV0dXJuIF9hc3NpZ24oe30sIGwsIHIpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogTWVyZ2VzIGEgbGlzdCBvZiBvYmplY3RzIHRvZ2V0aGVyIGludG8gb25lIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMTAuMFxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyBbe2s6IHZ9XSAtPiB7azogdn1cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBsaXN0IEFuIGFycmF5IG9mIG9iamVjdHNcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IEEgbWVyZ2VkIG9iamVjdC5cbiAgICAgKiBAc2VlIFIucmVkdWNlXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5tZXJnZUFsbChbe2ZvbzoxfSx7YmFyOjJ9LHtiYXo6M31dKTsgLy89PiB7Zm9vOjEsYmFyOjIsYmF6OjN9XG4gICAgICogICAgICBSLm1lcmdlQWxsKFt7Zm9vOjF9LHtmb286Mn0se2JhcjoyfV0pOyAvLz0+IHtmb286MixiYXI6Mn1cbiAgICAgKi9cbiAgICB2YXIgbWVyZ2VBbGwgPSBfY3VycnkxKGZ1bmN0aW9uIG1lcmdlQWxsKGxpc3QpIHtcbiAgICAgICAgcmV0dXJuIF9hc3NpZ24uYXBwbHkobnVsbCwgW3t9XS5jb25jYXQobGlzdCkpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBvYmplY3Qgd2l0aCB0aGUgb3duIHByb3BlcnRpZXMgb2YgdGhlIHR3byBwcm92aWRlZCBvYmplY3RzLiBJZlxuICAgICAqIGEga2V5IGV4aXN0cyBpbiBib3RoIG9iamVjdHMsIHRoZSBwcm92aWRlZCBmdW5jdGlvbiBpcyBhcHBsaWVkIHRvIHRoZSBrZXlcbiAgICAgKiBhbmQgdGhlIHZhbHVlcyBhc3NvY2lhdGVkIHdpdGggdGhlIGtleSBpbiBlYWNoIG9iamVjdCwgd2l0aCB0aGUgcmVzdWx0IGJlaW5nXG4gICAgICogdXNlZCBhcyB0aGUgdmFsdWUgYXNzb2NpYXRlZCB3aXRoIHRoZSBrZXkgaW4gdGhlIHJldHVybmVkIG9iamVjdC4gVGhlIGtleVxuICAgICAqIHdpbGwgYmUgZXhjbHVkZWQgZnJvbSB0aGUgcmV0dXJuZWQgb2JqZWN0IGlmIHRoZSByZXN1bHRpbmcgdmFsdWUgaXNcbiAgICAgKiBgdW5kZWZpbmVkYC5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMTkuMFxuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAc2lnIChTdHJpbmcgLT4gYSAtPiBhIC0+IGEpIC0+IHthfSAtPiB7YX0gLT4ge2F9XG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gbFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSByXG4gICAgICogQHJldHVybiB7T2JqZWN0fVxuICAgICAqIEBzZWUgUi5tZXJnZSwgUi5tZXJnZVdpdGhcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBsZXQgY29uY2F0VmFsdWVzID0gKGssIGwsIHIpID0+IGsgPT0gJ3ZhbHVlcycgPyBSLmNvbmNhdChsLCByKSA6IHJcbiAgICAgKiAgICAgIFIubWVyZ2VXaXRoS2V5KGNvbmNhdFZhbHVlcyxcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgIHsgYTogdHJ1ZSwgdGhpbmc6ICdmb28nLCB2YWx1ZXM6IFsxMCwgMjBdIH0sXG4gICAgICogICAgICAgICAgICAgICAgICAgICB7IGI6IHRydWUsIHRoaW5nOiAnYmFyJywgdmFsdWVzOiBbMTUsIDM1XSB9KTtcbiAgICAgKiAgICAgIC8vPT4geyBhOiB0cnVlLCBiOiB0cnVlLCB0aGluZzogJ2JhcicsIHZhbHVlczogWzEwLCAyMCwgMTUsIDM1XSB9XG4gICAgICovXG4gICAgdmFyIG1lcmdlV2l0aEtleSA9IF9jdXJyeTMoZnVuY3Rpb24gbWVyZ2VXaXRoS2V5KGZuLCBsLCByKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICAgICAgdmFyIGs7XG4gICAgICAgIGZvciAoayBpbiBsKSB7XG4gICAgICAgICAgICBpZiAoX2hhcyhrLCBsKSkge1xuICAgICAgICAgICAgICAgIHJlc3VsdFtrXSA9IF9oYXMoaywgcikgPyBmbihrLCBsW2tdLCByW2tdKSA6IGxba107XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChrIGluIHIpIHtcbiAgICAgICAgICAgIGlmIChfaGFzKGssIHIpICYmICFfaGFzKGssIHJlc3VsdCkpIHtcbiAgICAgICAgICAgICAgICByZXN1bHRba10gPSByW2tdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBzbWFsbGVyIG9mIGl0cyB0d28gYXJndW1lbnRzLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgUmVsYXRpb25cbiAgICAgKiBAc2lnIE9yZCBhID0+IGEgLT4gYSAtPiBhXG4gICAgICogQHBhcmFtIHsqfSBhXG4gICAgICogQHBhcmFtIHsqfSBiXG4gICAgICogQHJldHVybiB7Kn1cbiAgICAgKiBAc2VlIFIubWluQnksIFIubWF4XG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5taW4oNzg5LCAxMjMpOyAvLz0+IDEyM1xuICAgICAqICAgICAgUi5taW4oJ2EnLCAnYicpOyAvLz0+ICdhJ1xuICAgICAqL1xuICAgIHZhciBtaW4gPSBfY3VycnkyKGZ1bmN0aW9uIG1pbihhLCBiKSB7XG4gICAgICAgIHJldHVybiBiIDwgYSA/IGIgOiBhO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogVGFrZXMgYSBmdW5jdGlvbiBhbmQgdHdvIHZhbHVlcywgYW5kIHJldHVybnMgd2hpY2hldmVyIHZhbHVlIHByb2R1Y2VzIHRoZVxuICAgICAqIHNtYWxsZXIgcmVzdWx0IHdoZW4gcGFzc2VkIHRvIHRoZSBwcm92aWRlZCBmdW5jdGlvbi5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuOC4wXG4gICAgICogQGNhdGVnb3J5IFJlbGF0aW9uXG4gICAgICogQHNpZyBPcmQgYiA9PiAoYSAtPiBiKSAtPiBhIC0+IGEgLT4gYVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZcbiAgICAgKiBAcGFyYW0geyp9IGFcbiAgICAgKiBAcGFyYW0geyp9IGJcbiAgICAgKiBAcmV0dXJuIHsqfVxuICAgICAqIEBzZWUgUi5taW4sIFIubWF4QnlcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICAvLyAgc3F1YXJlIDo6IE51bWJlciAtPiBOdW1iZXJcbiAgICAgKiAgICAgIHZhciBzcXVhcmUgPSBuID0+IG4gKiBuO1xuICAgICAqXG4gICAgICogICAgICBSLm1pbkJ5KHNxdWFyZSwgLTMsIDIpOyAvLz0+IDJcbiAgICAgKlxuICAgICAqICAgICAgUi5yZWR1Y2UoUi5taW5CeShzcXVhcmUpLCBJbmZpbml0eSwgWzMsIC01LCA0LCAxLCAtMl0pOyAvLz0+IDFcbiAgICAgKiAgICAgIFIucmVkdWNlKFIubWluQnkoc3F1YXJlKSwgSW5maW5pdHksIFtdKTsgLy89PiBJbmZpbml0eVxuICAgICAqL1xuICAgIHZhciBtaW5CeSA9IF9jdXJyeTMoZnVuY3Rpb24gbWluQnkoZiwgYSwgYikge1xuICAgICAgICByZXR1cm4gZihiKSA8IGYoYSkgPyBiIDogYTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIERpdmlkZXMgdGhlIHNlY29uZCBwYXJhbWV0ZXIgYnkgdGhlIGZpcnN0IGFuZCByZXR1cm5zIHRoZSByZW1haW5kZXIuIE5vdGVcbiAgICAgKiB0aGF0IHRoaXMgZnVuY3Rpb24gcHJlc2VydmVzIHRoZSBKYXZhU2NyaXB0LXN0eWxlIGJlaGF2aW9yIGZvciBtb2R1bG8uIEZvclxuICAgICAqIG1hdGhlbWF0aWNhbCBtb2R1bG8gc2VlIGBtYXRoTW9kYC5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4xXG4gICAgICogQGNhdGVnb3J5IE1hdGhcbiAgICAgKiBAc2lnIE51bWJlciAtPiBOdW1iZXIgLT4gTnVtYmVyXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGEgVGhlIHZhbHVlIHRvIHRoZSBkaXZpZGUuXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGIgVGhlIHBzZXVkby1tb2R1bHVzXG4gICAgICogQHJldHVybiB7TnVtYmVyfSBUaGUgcmVzdWx0IG9mIGBiICUgYWAuXG4gICAgICogQHNlZSBSLm1hdGhNb2RcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLm1vZHVsbygxNywgMyk7IC8vPT4gMlxuICAgICAqICAgICAgLy8gSlMgYmVoYXZpb3I6XG4gICAgICogICAgICBSLm1vZHVsbygtMTcsIDMpOyAvLz0+IC0yXG4gICAgICogICAgICBSLm1vZHVsbygxNywgLTMpOyAvLz0+IDJcbiAgICAgKlxuICAgICAqICAgICAgdmFyIGlzT2RkID0gUi5tb2R1bG8oUi5fXywgMik7XG4gICAgICogICAgICBpc09kZCg0Mik7IC8vPT4gMFxuICAgICAqICAgICAgaXNPZGQoMjEpOyAvLz0+IDFcbiAgICAgKi9cbiAgICB2YXIgbW9kdWxvID0gX2N1cnJ5MihmdW5jdGlvbiBtb2R1bG8oYSwgYikge1xuICAgICAgICByZXR1cm4gYSAlIGI7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBNdWx0aXBsaWVzIHR3byBudW1iZXJzLiBFcXVpdmFsZW50IHRvIGBhICogYmAgYnV0IGN1cnJpZWQuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBNYXRoXG4gICAgICogQHNpZyBOdW1iZXIgLT4gTnVtYmVyIC0+IE51bWJlclxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBhIFRoZSBmaXJzdCB2YWx1ZS5cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gYiBUaGUgc2Vjb25kIHZhbHVlLlxuICAgICAqIEByZXR1cm4ge051bWJlcn0gVGhlIHJlc3VsdCBvZiBgYSAqIGJgLlxuICAgICAqIEBzZWUgUi5kaXZpZGVcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgZG91YmxlID0gUi5tdWx0aXBseSgyKTtcbiAgICAgKiAgICAgIHZhciB0cmlwbGUgPSBSLm11bHRpcGx5KDMpO1xuICAgICAqICAgICAgZG91YmxlKDMpOyAgICAgICAvLz0+ICA2XG4gICAgICogICAgICB0cmlwbGUoNCk7ICAgICAgIC8vPT4gMTJcbiAgICAgKiAgICAgIFIubXVsdGlwbHkoMiwgNSk7ICAvLz0+IDEwXG4gICAgICovXG4gICAgdmFyIG11bHRpcGx5ID0gX2N1cnJ5MihmdW5jdGlvbiBtdWx0aXBseShhLCBiKSB7XG4gICAgICAgIHJldHVybiBhICogYjtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFdyYXBzIGEgZnVuY3Rpb24gb2YgYW55IGFyaXR5IChpbmNsdWRpbmcgbnVsbGFyeSkgaW4gYSBmdW5jdGlvbiB0aGF0IGFjY2VwdHNcbiAgICAgKiBleGFjdGx5IGBuYCBwYXJhbWV0ZXJzLiBBbnkgZXh0cmFuZW91cyBwYXJhbWV0ZXJzIHdpbGwgbm90IGJlIHBhc3NlZCB0byB0aGVcbiAgICAgKiBzdXBwbGllZCBmdW5jdGlvbi5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4wXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAgICogQHNpZyBOdW1iZXIgLT4gKCogLT4gYSkgLT4gKCogLT4gYSlcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gbiBUaGUgZGVzaXJlZCBhcml0eSBvZiB0aGUgbmV3IGZ1bmN0aW9uLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBmdW5jdGlvbiB0byB3cmFwLlxuICAgICAqIEByZXR1cm4ge0Z1bmN0aW9ufSBBIG5ldyBmdW5jdGlvbiB3cmFwcGluZyBgZm5gLiBUaGUgbmV3IGZ1bmN0aW9uIGlzIGd1YXJhbnRlZWQgdG8gYmUgb2ZcbiAgICAgKiAgICAgICAgIGFyaXR5IGBuYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgdGFrZXNUd29BcmdzID0gKGEsIGIpID0+IFthLCBiXTtcbiAgICAgKlxuICAgICAqICAgICAgdGFrZXNUd29BcmdzLmxlbmd0aDsgLy89PiAyXG4gICAgICogICAgICB0YWtlc1R3b0FyZ3MoMSwgMik7IC8vPT4gWzEsIDJdXG4gICAgICpcbiAgICAgKiAgICAgIHZhciB0YWtlc09uZUFyZyA9IFIubkFyeSgxLCB0YWtlc1R3b0FyZ3MpO1xuICAgICAqICAgICAgdGFrZXNPbmVBcmcubGVuZ3RoOyAvLz0+IDFcbiAgICAgKiAgICAgIC8vIE9ubHkgYG5gIGFyZ3VtZW50cyBhcmUgcGFzc2VkIHRvIHRoZSB3cmFwcGVkIGZ1bmN0aW9uXG4gICAgICogICAgICB0YWtlc09uZUFyZygxLCAyKTsgLy89PiBbMSwgdW5kZWZpbmVkXVxuICAgICAqL1xuICAgIHZhciBuQXJ5ID0gX2N1cnJ5MihmdW5jdGlvbiBuQXJ5KG4sIGZuKSB7XG4gICAgICAgIHN3aXRjaCAobikge1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmbi5jYWxsKHRoaXMpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmbi5jYWxsKHRoaXMsIGEwKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoYTAsIGExKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZuLmNhbGwodGhpcywgYTAsIGExKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoYTAsIGExLCBhMikge1xuICAgICAgICAgICAgICAgIHJldHVybiBmbi5jYWxsKHRoaXMsIGEwLCBhMSwgYTIpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhMCwgYTEsIGEyLCBhMykge1xuICAgICAgICAgICAgICAgIHJldHVybiBmbi5jYWxsKHRoaXMsIGEwLCBhMSwgYTIsIGEzKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoYTAsIGExLCBhMiwgYTMsIGE0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZuLmNhbGwodGhpcywgYTAsIGExLCBhMiwgYTMsIGE0KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIGNhc2UgNjpcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoYTAsIGExLCBhMiwgYTMsIGE0LCBhNSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmbi5jYWxsKHRoaXMsIGEwLCBhMSwgYTIsIGEzLCBhNCwgYTUpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSA3OlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhMCwgYTEsIGEyLCBhMywgYTQsIGE1LCBhNikge1xuICAgICAgICAgICAgICAgIHJldHVybiBmbi5jYWxsKHRoaXMsIGEwLCBhMSwgYTIsIGEzLCBhNCwgYTUsIGE2KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIGNhc2UgODpcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoYTAsIGExLCBhMiwgYTMsIGE0LCBhNSwgYTYsIGE3KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZuLmNhbGwodGhpcywgYTAsIGExLCBhMiwgYTMsIGE0LCBhNSwgYTYsIGE3KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIGNhc2UgOTpcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoYTAsIGExLCBhMiwgYTMsIGE0LCBhNSwgYTYsIGE3LCBhOCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmbi5jYWxsKHRoaXMsIGEwLCBhMSwgYTIsIGEzLCBhNCwgYTUsIGE2LCBhNywgYTgpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgY2FzZSAxMDpcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoYTAsIGExLCBhMiwgYTMsIGE0LCBhNSwgYTYsIGE3LCBhOCwgYTkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZm4uY2FsbCh0aGlzLCBhMCwgYTEsIGEyLCBhMywgYTQsIGE1LCBhNiwgYTcsIGE4LCBhOSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGaXJzdCBhcmd1bWVudCB0byBuQXJ5IG11c3QgYmUgYSBub24tbmVnYXRpdmUgaW50ZWdlciBubyBncmVhdGVyIHRoYW4gdGVuJyk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIE5lZ2F0ZXMgaXRzIGFyZ3VtZW50LlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC45LjBcbiAgICAgKiBAY2F0ZWdvcnkgTWF0aFxuICAgICAqIEBzaWcgTnVtYmVyIC0+IE51bWJlclxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBuXG4gICAgICogQHJldHVybiB7TnVtYmVyfVxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIubmVnYXRlKDQyKTsgLy89PiAtNDJcbiAgICAgKi9cbiAgICB2YXIgbmVnYXRlID0gX2N1cnJ5MShmdW5jdGlvbiBuZWdhdGUobikge1xuICAgICAgICByZXR1cm4gLW47XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGB0cnVlYCBpZiBubyBlbGVtZW50cyBvZiB0aGUgbGlzdCBtYXRjaCB0aGUgcHJlZGljYXRlLCBgZmFsc2VgXG4gICAgICogb3RoZXJ3aXNlLlxuICAgICAqXG4gICAgICogRGlzcGF0Y2hlcyB0byB0aGUgYGFueWAgbWV0aG9kIG9mIHRoZSBzZWNvbmQgYXJndW1lbnQsIGlmIHByZXNlbnQuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEyLjBcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgKGEgLT4gQm9vbGVhbikgLT4gW2FdIC0+IEJvb2xlYW5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgcHJlZGljYXRlIGZ1bmN0aW9uLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGxpc3QgVGhlIGFycmF5IHRvIGNvbnNpZGVyLlxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IGB0cnVlYCBpZiB0aGUgcHJlZGljYXRlIGlzIG5vdCBzYXRpc2ZpZWQgYnkgZXZlcnkgZWxlbWVudCwgYGZhbHNlYCBvdGhlcndpc2UuXG4gICAgICogQHNlZSBSLmFsbCwgUi5hbnlcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgaXNFdmVuID0gbiA9PiBuICUgMiA9PT0gMDtcbiAgICAgKlxuICAgICAqICAgICAgUi5ub25lKGlzRXZlbiwgWzEsIDMsIDUsIDcsIDksIDExXSk7IC8vPT4gdHJ1ZVxuICAgICAqICAgICAgUi5ub25lKGlzRXZlbiwgWzEsIDMsIDUsIDcsIDgsIDExXSk7IC8vPT4gZmFsc2VcbiAgICAgKi9cbiAgICB2YXIgbm9uZSA9IF9jdXJyeTIoX2NvbXBsZW1lbnQoX2Rpc3BhdGNoYWJsZSgnYW55JywgX3hhbnksIGFueSkpKTtcblxuICAgIC8qKlxuICAgICAqIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBgIWAgb2YgaXRzIGFyZ3VtZW50LiBJdCB3aWxsIHJldHVybiBgdHJ1ZWAgd2hlblxuICAgICAqIHBhc3NlZCBmYWxzZS15IHZhbHVlLCBhbmQgYGZhbHNlYCB3aGVuIHBhc3NlZCBhIHRydXRoLXkgb25lLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgTG9naWNcbiAgICAgKiBAc2lnICogLT4gQm9vbGVhblxuICAgICAqIEBwYXJhbSB7Kn0gYSBhbnkgdmFsdWVcbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufSB0aGUgbG9naWNhbCBpbnZlcnNlIG9mIHBhc3NlZCBhcmd1bWVudC5cbiAgICAgKiBAc2VlIFIuY29tcGxlbWVudFxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIubm90KHRydWUpOyAvLz0+IGZhbHNlXG4gICAgICogICAgICBSLm5vdChmYWxzZSk7IC8vPT4gdHJ1ZVxuICAgICAqICAgICAgUi5ub3QoMCk7ID0+IHRydWVcbiAgICAgKiAgICAgIFIubm90KDEpOyA9PiBmYWxzZVxuICAgICAqL1xuICAgIHZhciBub3QgPSBfY3VycnkxKGZ1bmN0aW9uIG5vdChhKSB7XG4gICAgICAgIHJldHVybiAhYTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIG50aCBlbGVtZW50IG9mIHRoZSBnaXZlbiBsaXN0IG9yIHN0cmluZy4gSWYgbiBpcyBuZWdhdGl2ZSB0aGVcbiAgICAgKiBlbGVtZW50IGF0IGluZGV4IGxlbmd0aCArIG4gaXMgcmV0dXJuZWQuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyBOdW1iZXIgLT4gW2FdIC0+IGEgfCBVbmRlZmluZWRcbiAgICAgKiBAc2lnIE51bWJlciAtPiBTdHJpbmcgLT4gU3RyaW5nXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IG9mZnNldFxuICAgICAqIEBwYXJhbSB7Kn0gbGlzdFxuICAgICAqIEByZXR1cm4geyp9XG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIGxpc3QgPSBbJ2ZvbycsICdiYXInLCAnYmF6JywgJ3F1dXgnXTtcbiAgICAgKiAgICAgIFIubnRoKDEsIGxpc3QpOyAvLz0+ICdiYXInXG4gICAgICogICAgICBSLm50aCgtMSwgbGlzdCk7IC8vPT4gJ3F1dXgnXG4gICAgICogICAgICBSLm50aCgtOTksIGxpc3QpOyAvLz0+IHVuZGVmaW5lZFxuICAgICAqXG4gICAgICogICAgICBSLm50aCgyLCAnYWJjJyk7IC8vPT4gJ2MnXG4gICAgICogICAgICBSLm50aCgzLCAnYWJjJyk7IC8vPT4gJydcbiAgICAgKi9cbiAgICB2YXIgbnRoID0gX2N1cnJ5MihmdW5jdGlvbiBudGgob2Zmc2V0LCBsaXN0KSB7XG4gICAgICAgIHZhciBpZHggPSBvZmZzZXQgPCAwID8gbGlzdC5sZW5ndGggKyBvZmZzZXQgOiBvZmZzZXQ7XG4gICAgICAgIHJldHVybiBfaXNTdHJpbmcobGlzdCkgPyBsaXN0LmNoYXJBdChpZHgpIDogbGlzdFtpZHhdO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIGZ1bmN0aW9uIHdoaWNoIHJldHVybnMgaXRzIG50aCBhcmd1bWVudC5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuOS4wXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAgICogQHNpZyBOdW1iZXIgLT4gKi4uLiAtPiAqXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IG5cbiAgICAgKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLm50aEFyZygxKSgnYScsICdiJywgJ2MnKTsgLy89PiAnYidcbiAgICAgKiAgICAgIFIubnRoQXJnKC0xKSgnYScsICdiJywgJ2MnKTsgLy89PiAnYydcbiAgICAgKi9cbiAgICB2YXIgbnRoQXJnID0gX2N1cnJ5MShmdW5jdGlvbiBudGhBcmcobikge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIG50aChuLCBhcmd1bWVudHMpO1xuICAgICAgICB9O1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbiBvYmplY3QgY29udGFpbmluZyBhIHNpbmdsZSBrZXk6dmFsdWUgcGFpci5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMTguMFxuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAc2lnIFN0cmluZyAtPiBhIC0+IHtTdHJpbmc6YX1cbiAgICAgKiBAcGFyYW0ge1N0cmluZ30ga2V5XG4gICAgICogQHBhcmFtIHsqfSB2YWxcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAgICogQHNlZSBSLnBhaXJcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgbWF0Y2hQaHJhc2VzID0gUi5jb21wb3NlKFxuICAgICAqICAgICAgICBSLm9iak9mKCdtdXN0JyksXG4gICAgICogICAgICAgIFIubWFwKFIub2JqT2YoJ21hdGNoX3BocmFzZScpKVxuICAgICAqICAgICAgKTtcbiAgICAgKiAgICAgIG1hdGNoUGhyYXNlcyhbJ2ZvbycsICdiYXInLCAnYmF6J10pOyAvLz0+IHttdXN0OiBbe21hdGNoX3BocmFzZTogJ2Zvbyd9LCB7bWF0Y2hfcGhyYXNlOiAnYmFyJ30sIHttYXRjaF9waHJhc2U6ICdiYXonfV19XG4gICAgICovXG4gICAgdmFyIG9iak9mID0gX2N1cnJ5MihmdW5jdGlvbiBvYmpPZihrZXksIHZhbCkge1xuICAgICAgICB2YXIgb2JqID0ge307XG4gICAgICAgIG9ialtrZXldID0gdmFsO1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIHNpbmdsZXRvbiBhcnJheSBjb250YWluaW5nIHRoZSB2YWx1ZSBwcm92aWRlZC5cbiAgICAgKlxuICAgICAqIE5vdGUgdGhpcyBgb2ZgIGlzIGRpZmZlcmVudCBmcm9tIHRoZSBFUzYgYG9mYDsgU2VlXG4gICAgICogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvQXJyYXkvb2ZcbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMy4wXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAgICogQHNpZyBhIC0+IFthXVxuICAgICAqIEBwYXJhbSB7Kn0geCBhbnkgdmFsdWVcbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gQW4gYXJyYXkgd3JhcHBpbmcgYHhgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIub2YobnVsbCk7IC8vPT4gW251bGxdXG4gICAgICogICAgICBSLm9mKFs0Ml0pOyAvLz0+IFtbNDJdXVxuICAgICAqL1xuICAgIHZhciBvZiA9IF9jdXJyeTEoX29mKTtcblxuICAgIC8qKlxuICAgICAqIEFjY2VwdHMgYSBmdW5jdGlvbiBgZm5gIGFuZCByZXR1cm5zIGEgZnVuY3Rpb24gdGhhdCBndWFyZHMgaW52b2NhdGlvbiBvZlxuICAgICAqIGBmbmAgc3VjaCB0aGF0IGBmbmAgY2FuIG9ubHkgZXZlciBiZSBjYWxsZWQgb25jZSwgbm8gbWF0dGVyIGhvdyBtYW55IHRpbWVzXG4gICAgICogdGhlIHJldHVybmVkIGZ1bmN0aW9uIGlzIGludm9rZWQuIFRoZSBmaXJzdCB2YWx1ZSBjYWxjdWxhdGVkIGlzIHJldHVybmVkIGluXG4gICAgICogc3Vic2VxdWVudCBpbnZvY2F0aW9ucy5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4wXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAgICogQHNpZyAoYS4uLiAtPiBiKSAtPiAoYS4uLiAtPiBiKVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBmdW5jdGlvbiB0byB3cmFwIGluIGEgY2FsbC1vbmx5LW9uY2Ugd3JhcHBlci5cbiAgICAgKiBAcmV0dXJuIHtGdW5jdGlvbn0gVGhlIHdyYXBwZWQgZnVuY3Rpb24uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIGFkZE9uZU9uY2UgPSBSLm9uY2UoeCA9PiB4ICsgMSk7XG4gICAgICogICAgICBhZGRPbmVPbmNlKDEwKTsgLy89PiAxMVxuICAgICAqICAgICAgYWRkT25lT25jZShhZGRPbmVPbmNlKDUwKSk7IC8vPT4gMTFcbiAgICAgKi9cbiAgICB2YXIgb25jZSA9IF9jdXJyeTEoZnVuY3Rpb24gb25jZShmbikge1xuICAgICAgICB2YXIgY2FsbGVkID0gZmFsc2U7XG4gICAgICAgIHZhciByZXN1bHQ7XG4gICAgICAgIHJldHVybiBfYXJpdHkoZm4ubGVuZ3RoLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoY2FsbGVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhbGxlZCA9IHRydWU7XG4gICAgICAgICAgICByZXN1bHQgPSBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGB0cnVlYCBpZiBvbmUgb3IgYm90aCBvZiBpdHMgYXJndW1lbnRzIGFyZSBgdHJ1ZWAuIFJldHVybnMgYGZhbHNlYFxuICAgICAqIGlmIGJvdGggYXJndW1lbnRzIGFyZSBgZmFsc2VgLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgTG9naWNcbiAgICAgKiBAc2lnICogLT4gKiAtPiAqXG4gICAgICogQHBhcmFtIHtCb29sZWFufSBhIEEgYm9vbGVhbiB2YWx1ZVxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gYiBBIGJvb2xlYW4gdmFsdWVcbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufSBgdHJ1ZWAgaWYgb25lIG9yIGJvdGggYXJndW1lbnRzIGFyZSBgdHJ1ZWAsIGBmYWxzZWAgb3RoZXJ3aXNlXG4gICAgICogQHNlZSBSLmVpdGhlclxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIub3IodHJ1ZSwgdHJ1ZSk7IC8vPT4gdHJ1ZVxuICAgICAqICAgICAgUi5vcih0cnVlLCBmYWxzZSk7IC8vPT4gdHJ1ZVxuICAgICAqICAgICAgUi5vcihmYWxzZSwgdHJ1ZSk7IC8vPT4gdHJ1ZVxuICAgICAqICAgICAgUi5vcihmYWxzZSwgZmFsc2UpOyAvLz0+IGZhbHNlXG4gICAgICovXG4gICAgdmFyIG9yID0gX2N1cnJ5MihmdW5jdGlvbiBvcihhLCBiKSB7XG4gICAgICAgIHJldHVybiBhIHx8IGI7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSByZXN1bHQgb2YgXCJzZXR0aW5nXCIgdGhlIHBvcnRpb24gb2YgdGhlIGdpdmVuIGRhdGEgc3RydWN0dXJlXG4gICAgICogZm9jdXNlZCBieSB0aGUgZ2l2ZW4gbGVucyB0byB0aGUgcmVzdWx0IG9mIGFwcGx5aW5nIHRoZSBnaXZlbiBmdW5jdGlvbiB0b1xuICAgICAqIHRoZSBmb2N1c2VkIHZhbHVlLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xNi4wXG4gICAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgICAqIEB0eXBlZGVmbiBMZW5zIHMgYSA9IEZ1bmN0b3IgZiA9PiAoYSAtPiBmIGEpIC0+IHMgLT4gZiBzXG4gICAgICogQHNpZyBMZW5zIHMgYSAtPiAoYSAtPiBhKSAtPiBzIC0+IHNcbiAgICAgKiBAcGFyYW0ge0xlbnN9IGxlbnNcbiAgICAgKiBAcGFyYW0geyp9IHZcbiAgICAgKiBAcGFyYW0geyp9IHhcbiAgICAgKiBAcmV0dXJuIHsqfVxuICAgICAqIEBzZWUgUi5wcm9wLCBSLmxlbnNJbmRleCwgUi5sZW5zUHJvcFxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBoZWFkTGVucyA9IFIubGVuc0luZGV4KDApO1xuICAgICAqXG4gICAgICogICAgICBSLm92ZXIoaGVhZExlbnMsIFIudG9VcHBlciwgWydmb28nLCAnYmFyJywgJ2JheiddKTsgLy89PiBbJ0ZPTycsICdiYXInLCAnYmF6J11cbiAgICAgKi9cbiAgICAvLyBgSWRlbnRpdHlgIGlzIGEgZnVuY3RvciB0aGF0IGhvbGRzIGEgc2luZ2xlIHZhbHVlLCB3aGVyZSBgbWFwYCBzaW1wbHlcbiAgICAvLyB0cmFuc2Zvcm1zIHRoZSBoZWxkIHZhbHVlIHdpdGggdGhlIHByb3ZpZGVkIGZ1bmN0aW9uLlxuICAgIC8vIFRoZSB2YWx1ZSByZXR1cm5lZCBieSB0aGUgZ2V0dGVyIGZ1bmN0aW9uIGlzIGZpcnN0IHRyYW5zZm9ybWVkIHdpdGggYGZgLFxuICAgIC8vIHRoZW4gc2V0IGFzIHRoZSB2YWx1ZSBvZiBhbiBgSWRlbnRpdHlgLiBUaGlzIGlzIHRoZW4gbWFwcGVkIG92ZXIgd2l0aCB0aGVcbiAgICAvLyBzZXR0ZXIgZnVuY3Rpb24gb2YgdGhlIGxlbnMuXG4gICAgdmFyIG92ZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vIGBJZGVudGl0eWAgaXMgYSBmdW5jdG9yIHRoYXQgaG9sZHMgYSBzaW5nbGUgdmFsdWUsIHdoZXJlIGBtYXBgIHNpbXBseVxuICAgICAgICAvLyB0cmFuc2Zvcm1zIHRoZSBoZWxkIHZhbHVlIHdpdGggdGhlIHByb3ZpZGVkIGZ1bmN0aW9uLlxuICAgICAgICB2YXIgSWRlbnRpdHkgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogeCxcbiAgICAgICAgICAgICAgICBtYXA6IGZ1bmN0aW9uIChmKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBJZGVudGl0eShmKHgpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gX2N1cnJ5MyhmdW5jdGlvbiBvdmVyKGxlbnMsIGYsIHgpIHtcbiAgICAgICAgICAgIC8vIFRoZSB2YWx1ZSByZXR1cm5lZCBieSB0aGUgZ2V0dGVyIGZ1bmN0aW9uIGlzIGZpcnN0IHRyYW5zZm9ybWVkIHdpdGggYGZgLFxuICAgICAgICAgICAgLy8gdGhlbiBzZXQgYXMgdGhlIHZhbHVlIG9mIGFuIGBJZGVudGl0eWAuIFRoaXMgaXMgdGhlbiBtYXBwZWQgb3ZlciB3aXRoIHRoZVxuICAgICAgICAgICAgLy8gc2V0dGVyIGZ1bmN0aW9uIG9mIHRoZSBsZW5zLlxuICAgICAgICAgICAgcmV0dXJuIGxlbnMoZnVuY3Rpb24gKHkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gSWRlbnRpdHkoZih5KSk7XG4gICAgICAgICAgICB9KSh4KS52YWx1ZTtcbiAgICAgICAgfSk7XG4gICAgfSgpO1xuXG4gICAgLyoqXG4gICAgICogVGFrZXMgdHdvIGFyZ3VtZW50cywgYGZzdGAgYW5kIGBzbmRgLCBhbmQgcmV0dXJucyBgW2ZzdCwgc25kXWAuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjE4LjBcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgYSAtPiBiIC0+IChhLGIpXG4gICAgICogQHBhcmFtIHsqfSBmc3RcbiAgICAgKiBAcGFyYW0geyp9IHNuZFxuICAgICAqIEByZXR1cm4ge0FycmF5fVxuICAgICAqIEBzZWUgUi5vYmpPZiwgUi5vZlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIucGFpcignZm9vJywgJ2JhcicpOyAvLz0+IFsnZm9vJywgJ2JhciddXG4gICAgICovXG4gICAgdmFyIHBhaXIgPSBfY3VycnkyKGZ1bmN0aW9uIHBhaXIoZnN0LCBzbmQpIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIGZzdCxcbiAgICAgICAgICAgIHNuZFxuICAgICAgICBdO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogUmV0cmlldmUgdGhlIHZhbHVlIGF0IGEgZ2l2ZW4gcGF0aC5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMi4wXG4gICAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgICAqIEBzaWcgW1N0cmluZ10gLT4ge2s6IHZ9IC0+IHYgfCBVbmRlZmluZWRcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBwYXRoIFRoZSBwYXRoIHRvIHVzZS5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqIFRoZSBvYmplY3QgdG8gcmV0cmlldmUgdGhlIG5lc3RlZCBwcm9wZXJ0eSBmcm9tLlxuICAgICAqIEByZXR1cm4geyp9IFRoZSBkYXRhIGF0IGBwYXRoYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLnBhdGgoWydhJywgJ2InXSwge2E6IHtiOiAyfX0pOyAvLz0+IDJcbiAgICAgKiAgICAgIFIucGF0aChbJ2EnLCAnYiddLCB7Yzoge2I6IDJ9fSk7IC8vPT4gdW5kZWZpbmVkXG4gICAgICovXG4gICAgdmFyIHBhdGggPSBfY3VycnkyKGZ1bmN0aW9uIHBhdGgocGF0aHMsIG9iaikge1xuICAgICAgICB2YXIgdmFsID0gb2JqO1xuICAgICAgICB2YXIgaWR4ID0gMDtcbiAgICAgICAgd2hpbGUgKGlkeCA8IHBhdGhzLmxlbmd0aCkge1xuICAgICAgICAgICAgaWYgKHZhbCA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFsID0gdmFsW3BhdGhzW2lkeF1dO1xuICAgICAgICAgICAgaWR4ICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbDtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIElmIHRoZSBnaXZlbiwgbm9uLW51bGwgb2JqZWN0IGhhcyBhIHZhbHVlIGF0IHRoZSBnaXZlbiBwYXRoLCByZXR1cm5zIHRoZVxuICAgICAqIHZhbHVlIGF0IHRoYXQgcGF0aC4gT3RoZXJ3aXNlIHJldHVybnMgdGhlIHByb3ZpZGVkIGRlZmF1bHQgdmFsdWUuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjE4LjBcbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0XG4gICAgICogQHNpZyBhIC0+IFtTdHJpbmddIC0+IE9iamVjdCAtPiBhXG4gICAgICogQHBhcmFtIHsqfSBkIFRoZSBkZWZhdWx0IHZhbHVlLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IHAgVGhlIHBhdGggdG8gdXNlLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmogVGhlIG9iamVjdCB0byByZXRyaWV2ZSB0aGUgbmVzdGVkIHByb3BlcnR5IGZyb20uXG4gICAgICogQHJldHVybiB7Kn0gVGhlIGRhdGEgYXQgYHBhdGhgIG9mIHRoZSBzdXBwbGllZCBvYmplY3Qgb3IgdGhlIGRlZmF1bHQgdmFsdWUuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5wYXRoT3IoJ04vQScsIFsnYScsICdiJ10sIHthOiB7YjogMn19KTsgLy89PiAyXG4gICAgICogICAgICBSLnBhdGhPcignTi9BJywgWydhJywgJ2InXSwge2M6IHtiOiAyfX0pOyAvLz0+IFwiTi9BXCJcbiAgICAgKi9cbiAgICB2YXIgcGF0aE9yID0gX2N1cnJ5MyhmdW5jdGlvbiBwYXRoT3IoZCwgcCwgb2JqKSB7XG4gICAgICAgIHJldHVybiBkZWZhdWx0VG8oZCwgcGF0aChwLCBvYmopKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYHRydWVgIGlmIHRoZSBzcGVjaWZpZWQgb2JqZWN0IHByb3BlcnR5IGF0IGdpdmVuIHBhdGggc2F0aXNmaWVzIHRoZVxuICAgICAqIGdpdmVuIHByZWRpY2F0ZTsgYGZhbHNlYCBvdGhlcndpc2UuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjE5LjBcbiAgICAgKiBAY2F0ZWdvcnkgTG9naWNcbiAgICAgKiBAc2lnIChhIC0+IEJvb2xlYW4pIC0+IFtTdHJpbmddIC0+IE9iamVjdCAtPiBCb29sZWFuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gcHJlZFxuICAgICAqIEBwYXJhbSB7QXJyYXl9IHByb3BQYXRoXG4gICAgICogQHBhcmFtIHsqfSBvYmpcbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgICAqIEBzZWUgUi5wcm9wU2F0aXNmaWVzLCBSLnBhdGhcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLnBhdGhTYXRpc2ZpZXMoeSA9PiB5ID4gMCwgWyd4JywgJ3knXSwge3g6IHt5OiAyfX0pOyAvLz0+IHRydWVcbiAgICAgKi9cbiAgICB2YXIgcGF0aFNhdGlzZmllcyA9IF9jdXJyeTMoZnVuY3Rpb24gcGF0aFNhdGlzZmllcyhwcmVkLCBwcm9wUGF0aCwgb2JqKSB7XG4gICAgICAgIHJldHVybiBwcm9wUGF0aC5sZW5ndGggPiAwICYmIHByZWQocGF0aChwcm9wUGF0aCwgb2JqKSk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgcGFydGlhbCBjb3B5IG9mIGFuIG9iamVjdCBjb250YWluaW5nIG9ubHkgdGhlIGtleXMgc3BlY2lmaWVkLiBJZlxuICAgICAqIHRoZSBrZXkgZG9lcyBub3QgZXhpc3QsIHRoZSBwcm9wZXJ0eSBpcyBpZ25vcmVkLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0XG4gICAgICogQHNpZyBba10gLT4ge2s6IHZ9IC0+IHtrOiB2fVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IG5hbWVzIGFuIGFycmF5IG9mIFN0cmluZyBwcm9wZXJ0eSBuYW1lcyB0byBjb3B5IG9udG8gYSBuZXcgb2JqZWN0XG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iaiBUaGUgb2JqZWN0IHRvIGNvcHkgZnJvbVxuICAgICAqIEByZXR1cm4ge09iamVjdH0gQSBuZXcgb2JqZWN0IHdpdGggb25seSBwcm9wZXJ0aWVzIGZyb20gYG5hbWVzYCBvbiBpdC5cbiAgICAgKiBAc2VlIFIub21pdCwgUi5wcm9wc1xuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIucGljayhbJ2EnLCAnZCddLCB7YTogMSwgYjogMiwgYzogMywgZDogNH0pOyAvLz0+IHthOiAxLCBkOiA0fVxuICAgICAqICAgICAgUi5waWNrKFsnYScsICdlJywgJ2YnXSwge2E6IDEsIGI6IDIsIGM6IDMsIGQ6IDR9KTsgLy89PiB7YTogMX1cbiAgICAgKi9cbiAgICB2YXIgcGljayA9IF9jdXJyeTIoZnVuY3Rpb24gcGljayhuYW1lcywgb2JqKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICAgICAgdmFyIGlkeCA9IDA7XG4gICAgICAgIHdoaWxlIChpZHggPCBuYW1lcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGlmIChuYW1lc1tpZHhdIGluIG9iaikge1xuICAgICAgICAgICAgICAgIHJlc3VsdFtuYW1lc1tpZHhdXSA9IG9ialtuYW1lc1tpZHhdXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlkeCArPSAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBTaW1pbGFyIHRvIGBwaWNrYCBleGNlcHQgdGhhdCB0aGlzIG9uZSBpbmNsdWRlcyBhIGBrZXk6IHVuZGVmaW5lZGAgcGFpciBmb3JcbiAgICAgKiBwcm9wZXJ0aWVzIHRoYXQgZG9uJ3QgZXhpc3QuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAc2lnIFtrXSAtPiB7azogdn0gLT4ge2s6IHZ9XG4gICAgICogQHBhcmFtIHtBcnJheX0gbmFtZXMgYW4gYXJyYXkgb2YgU3RyaW5nIHByb3BlcnR5IG5hbWVzIHRvIGNvcHkgb250byBhIG5ldyBvYmplY3RcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqIFRoZSBvYmplY3QgdG8gY29weSBmcm9tXG4gICAgICogQHJldHVybiB7T2JqZWN0fSBBIG5ldyBvYmplY3Qgd2l0aCBvbmx5IHByb3BlcnRpZXMgZnJvbSBgbmFtZXNgIG9uIGl0LlxuICAgICAqIEBzZWUgUi5waWNrXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5waWNrQWxsKFsnYScsICdkJ10sIHthOiAxLCBiOiAyLCBjOiAzLCBkOiA0fSk7IC8vPT4ge2E6IDEsIGQ6IDR9XG4gICAgICogICAgICBSLnBpY2tBbGwoWydhJywgJ2UnLCAnZiddLCB7YTogMSwgYjogMiwgYzogMywgZDogNH0pOyAvLz0+IHthOiAxLCBlOiB1bmRlZmluZWQsIGY6IHVuZGVmaW5lZH1cbiAgICAgKi9cbiAgICB2YXIgcGlja0FsbCA9IF9jdXJyeTIoZnVuY3Rpb24gcGlja0FsbChuYW1lcywgb2JqKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICAgICAgdmFyIGlkeCA9IDA7XG4gICAgICAgIHZhciBsZW4gPSBuYW1lcy5sZW5ndGg7XG4gICAgICAgIHdoaWxlIChpZHggPCBsZW4pIHtcbiAgICAgICAgICAgIHZhciBuYW1lID0gbmFtZXNbaWR4XTtcbiAgICAgICAgICAgIHJlc3VsdFtuYW1lXSA9IG9ialtuYW1lXTtcbiAgICAgICAgICAgIGlkeCArPSAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgcGFydGlhbCBjb3B5IG9mIGFuIG9iamVjdCBjb250YWluaW5nIG9ubHkgdGhlIGtleXMgdGhhdCBzYXRpc2Z5XG4gICAgICogdGhlIHN1cHBsaWVkIHByZWRpY2F0ZS5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuOC4wXG4gICAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgICAqIEBzaWcgKHYsIGsgLT4gQm9vbGVhbikgLT4ge2s6IHZ9IC0+IHtrOiB2fVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHByZWQgQSBwcmVkaWNhdGUgdG8gZGV0ZXJtaW5lIHdoZXRoZXIgb3Igbm90IGEga2V5XG4gICAgICogICAgICAgIHNob3VsZCBiZSBpbmNsdWRlZCBvbiB0aGUgb3V0cHV0IG9iamVjdC5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqIFRoZSBvYmplY3QgdG8gY29weSBmcm9tXG4gICAgICogQHJldHVybiB7T2JqZWN0fSBBIG5ldyBvYmplY3Qgd2l0aCBvbmx5IHByb3BlcnRpZXMgdGhhdCBzYXRpc2Z5IGBwcmVkYFxuICAgICAqICAgICAgICAgb24gaXQuXG4gICAgICogQHNlZSBSLnBpY2ssIFIuZmlsdGVyXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIGlzVXBwZXJDYXNlID0gKHZhbCwga2V5KSA9PiBrZXkudG9VcHBlckNhc2UoKSA9PT0ga2V5O1xuICAgICAqICAgICAgUi5waWNrQnkoaXNVcHBlckNhc2UsIHthOiAxLCBiOiAyLCBBOiAzLCBCOiA0fSk7IC8vPT4ge0E6IDMsIEI6IDR9XG4gICAgICovXG4gICAgdmFyIHBpY2tCeSA9IF9jdXJyeTIoZnVuY3Rpb24gcGlja0J5KHRlc3QsIG9iaikge1xuICAgICAgICB2YXIgcmVzdWx0ID0ge307XG4gICAgICAgIGZvciAodmFyIHByb3AgaW4gb2JqKSB7XG4gICAgICAgICAgICBpZiAodGVzdChvYmpbcHJvcF0sIHByb3AsIG9iaikpIHtcbiAgICAgICAgICAgICAgICByZXN1bHRbcHJvcF0gPSBvYmpbcHJvcF07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBuZXcgbGlzdCB3aXRoIHRoZSBnaXZlbiBlbGVtZW50IGF0IHRoZSBmcm9udCwgZm9sbG93ZWQgYnkgdGhlXG4gICAgICogY29udGVudHMgb2YgdGhlIGxpc3QuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyBhIC0+IFthXSAtPiBbYV1cbiAgICAgKiBAcGFyYW0geyp9IGVsIFRoZSBpdGVtIHRvIGFkZCB0byB0aGUgaGVhZCBvZiB0aGUgb3V0cHV0IGxpc3QuXG4gICAgICogQHBhcmFtIHtBcnJheX0gbGlzdCBUaGUgYXJyYXkgdG8gYWRkIHRvIHRoZSB0YWlsIG9mIHRoZSBvdXRwdXQgbGlzdC5cbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gQSBuZXcgYXJyYXkuXG4gICAgICogQHNlZSBSLmFwcGVuZFxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIucHJlcGVuZCgnZmVlJywgWydmaScsICdmbycsICdmdW0nXSk7IC8vPT4gWydmZWUnLCAnZmknLCAnZm8nLCAnZnVtJ11cbiAgICAgKi9cbiAgICB2YXIgcHJlcGVuZCA9IF9jdXJyeTIoZnVuY3Rpb24gcHJlcGVuZChlbCwgbGlzdCkge1xuICAgICAgICByZXR1cm4gX2NvbmNhdChbZWxdLCBsaXN0KTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBmdW5jdGlvbiB0aGF0IHdoZW4gc3VwcGxpZWQgYW4gb2JqZWN0IHJldHVybnMgdGhlIGluZGljYXRlZFxuICAgICAqIHByb3BlcnR5IG9mIHRoYXQgb2JqZWN0LCBpZiBpdCBleGlzdHMuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAc2lnIHMgLT4ge3M6IGF9IC0+IGEgfCBVbmRlZmluZWRcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gcCBUaGUgcHJvcGVydHkgbmFtZVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmogVGhlIG9iamVjdCB0byBxdWVyeVxuICAgICAqIEByZXR1cm4geyp9IFRoZSB2YWx1ZSBhdCBgb2JqLnBgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIucHJvcCgneCcsIHt4OiAxMDB9KTsgLy89PiAxMDBcbiAgICAgKiAgICAgIFIucHJvcCgneCcsIHt9KTsgLy89PiB1bmRlZmluZWRcbiAgICAgKi9cbiAgICB2YXIgcHJvcCA9IF9jdXJyeTIoZnVuY3Rpb24gcHJvcChwLCBvYmopIHtcbiAgICAgICAgcmV0dXJuIG9ialtwXTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIElmIHRoZSBnaXZlbiwgbm9uLW51bGwgb2JqZWN0IGhhcyBhbiBvd24gcHJvcGVydHkgd2l0aCB0aGUgc3BlY2lmaWVkIG5hbWUsXG4gICAgICogcmV0dXJucyB0aGUgdmFsdWUgb2YgdGhhdCBwcm9wZXJ0eS4gT3RoZXJ3aXNlIHJldHVybnMgdGhlIHByb3ZpZGVkIGRlZmF1bHRcbiAgICAgKiB2YWx1ZS5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuNi4wXG4gICAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgICAqIEBzaWcgYSAtPiBTdHJpbmcgLT4gT2JqZWN0IC0+IGFcbiAgICAgKiBAcGFyYW0geyp9IHZhbCBUaGUgZGVmYXVsdCB2YWx1ZS5cbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gcCBUaGUgbmFtZSBvZiB0aGUgcHJvcGVydHkgdG8gcmV0dXJuLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmogVGhlIG9iamVjdCB0byBxdWVyeS5cbiAgICAgKiBAcmV0dXJuIHsqfSBUaGUgdmFsdWUgb2YgZ2l2ZW4gcHJvcGVydHkgb2YgdGhlIHN1cHBsaWVkIG9iamVjdCBvciB0aGUgZGVmYXVsdCB2YWx1ZS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgYWxpY2UgPSB7XG4gICAgICogICAgICAgIG5hbWU6ICdBTElDRScsXG4gICAgICogICAgICAgIGFnZTogMTAxXG4gICAgICogICAgICB9O1xuICAgICAqICAgICAgdmFyIGZhdm9yaXRlID0gUi5wcm9wKCdmYXZvcml0ZUxpYnJhcnknKTtcbiAgICAgKiAgICAgIHZhciBmYXZvcml0ZVdpdGhEZWZhdWx0ID0gUi5wcm9wT3IoJ1JhbWRhJywgJ2Zhdm9yaXRlTGlicmFyeScpO1xuICAgICAqXG4gICAgICogICAgICBmYXZvcml0ZShhbGljZSk7ICAvLz0+IHVuZGVmaW5lZFxuICAgICAqICAgICAgZmF2b3JpdGVXaXRoRGVmYXVsdChhbGljZSk7ICAvLz0+ICdSYW1kYSdcbiAgICAgKi9cbiAgICB2YXIgcHJvcE9yID0gX2N1cnJ5MyhmdW5jdGlvbiBwcm9wT3IodmFsLCBwLCBvYmopIHtcbiAgICAgICAgcmV0dXJuIG9iaiAhPSBudWxsICYmIF9oYXMocCwgb2JqKSA/IG9ialtwXSA6IHZhbDtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYHRydWVgIGlmIHRoZSBzcGVjaWZpZWQgb2JqZWN0IHByb3BlcnR5IHNhdGlzZmllcyB0aGUgZ2l2ZW5cbiAgICAgKiBwcmVkaWNhdGU7IGBmYWxzZWAgb3RoZXJ3aXNlLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xNi4wXG4gICAgICogQGNhdGVnb3J5IExvZ2ljXG4gICAgICogQHNpZyAoYSAtPiBCb29sZWFuKSAtPiBTdHJpbmcgLT4ge1N0cmluZzogYX0gLT4gQm9vbGVhblxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHByZWRcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuICAgICAqIEBwYXJhbSB7Kn0gb2JqXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn1cbiAgICAgKiBAc2VlIFIucHJvcEVxLCBSLnByb3BJc1xuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIucHJvcFNhdGlzZmllcyh4ID0+IHggPiAwLCAneCcsIHt4OiAxLCB5OiAyfSk7IC8vPT4gdHJ1ZVxuICAgICAqL1xuICAgIHZhciBwcm9wU2F0aXNmaWVzID0gX2N1cnJ5MyhmdW5jdGlvbiBwcm9wU2F0aXNmaWVzKHByZWQsIG5hbWUsIG9iaikge1xuICAgICAgICByZXR1cm4gcHJlZChvYmpbbmFtZV0pO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogQWN0cyBhcyBtdWx0aXBsZSBgcHJvcGA6IGFycmF5IG9mIGtleXMgaW4sIGFycmF5IG9mIHZhbHVlcyBvdXQuIFByZXNlcnZlc1xuICAgICAqIG9yZGVyLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0XG4gICAgICogQHNpZyBba10gLT4ge2s6IHZ9IC0+IFt2XVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IHBzIFRoZSBwcm9wZXJ0eSBuYW1lcyB0byBmZXRjaFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmogVGhlIG9iamVjdCB0byBxdWVyeVxuICAgICAqIEByZXR1cm4ge0FycmF5fSBUaGUgY29ycmVzcG9uZGluZyB2YWx1ZXMgb3IgcGFydGlhbGx5IGFwcGxpZWQgZnVuY3Rpb24uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5wcm9wcyhbJ3gnLCAneSddLCB7eDogMSwgeTogMn0pOyAvLz0+IFsxLCAyXVxuICAgICAqICAgICAgUi5wcm9wcyhbJ2MnLCAnYScsICdiJ10sIHtiOiAyLCBhOiAxfSk7IC8vPT4gW3VuZGVmaW5lZCwgMSwgMl1cbiAgICAgKlxuICAgICAqICAgICAgdmFyIGZ1bGxOYW1lID0gUi5jb21wb3NlKFIuam9pbignICcpLCBSLnByb3BzKFsnZmlyc3QnLCAnbGFzdCddKSk7XG4gICAgICogICAgICBmdWxsTmFtZSh7bGFzdDogJ0J1bGxldC1Ub290aCcsIGFnZTogMzMsIGZpcnN0OiAnVG9ueSd9KTsgLy89PiAnVG9ueSBCdWxsZXQtVG9vdGgnXG4gICAgICovXG4gICAgdmFyIHByb3BzID0gX2N1cnJ5MihmdW5jdGlvbiBwcm9wcyhwcywgb2JqKSB7XG4gICAgICAgIHZhciBsZW4gPSBwcy5sZW5ndGg7XG4gICAgICAgIHZhciBvdXQgPSBbXTtcbiAgICAgICAgdmFyIGlkeCA9IDA7XG4gICAgICAgIHdoaWxlIChpZHggPCBsZW4pIHtcbiAgICAgICAgICAgIG91dFtpZHhdID0gb2JqW3BzW2lkeF1dO1xuICAgICAgICAgICAgaWR4ICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBsaXN0IG9mIG51bWJlcnMgZnJvbSBgZnJvbWAgKGluY2x1c2l2ZSkgdG8gYHRvYCAoZXhjbHVzaXZlKS5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4wXG4gICAgICogQGNhdGVnb3J5IExpc3RcbiAgICAgKiBAc2lnIE51bWJlciAtPiBOdW1iZXIgLT4gW051bWJlcl1cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gZnJvbSBUaGUgZmlyc3QgbnVtYmVyIGluIHRoZSBsaXN0LlxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSB0byBPbmUgbW9yZSB0aGFuIHRoZSBsYXN0IG51bWJlciBpbiB0aGUgbGlzdC5cbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gVGhlIGxpc3Qgb2YgbnVtYmVycyBpbiB0dGhlIHNldCBgW2EsIGIpYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLnJhbmdlKDEsIDUpOyAgICAvLz0+IFsxLCAyLCAzLCA0XVxuICAgICAqICAgICAgUi5yYW5nZSg1MCwgNTMpOyAgLy89PiBbNTAsIDUxLCA1Ml1cbiAgICAgKi9cbiAgICB2YXIgcmFuZ2UgPSBfY3VycnkyKGZ1bmN0aW9uIHJhbmdlKGZyb20sIHRvKSB7XG4gICAgICAgIGlmICghKF9pc051bWJlcihmcm9tKSAmJiBfaXNOdW1iZXIodG8pKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQm90aCBhcmd1bWVudHMgdG8gcmFuZ2UgbXVzdCBiZSBudW1iZXJzJyk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgICAgICB2YXIgbiA9IGZyb207XG4gICAgICAgIHdoaWxlIChuIDwgdG8pIHtcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKG4pO1xuICAgICAgICAgICAgbiArPSAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgc2luZ2xlIGl0ZW0gYnkgaXRlcmF0aW5nIHRocm91Z2ggdGhlIGxpc3QsIHN1Y2Nlc3NpdmVseSBjYWxsaW5nXG4gICAgICogdGhlIGl0ZXJhdG9yIGZ1bmN0aW9uIGFuZCBwYXNzaW5nIGl0IGFuIGFjY3VtdWxhdG9yIHZhbHVlIGFuZCB0aGUgY3VycmVudFxuICAgICAqIHZhbHVlIGZyb20gdGhlIGFycmF5LCBhbmQgdGhlbiBwYXNzaW5nIHRoZSByZXN1bHQgdG8gdGhlIG5leHQgY2FsbC5cbiAgICAgKlxuICAgICAqIFNpbWlsYXIgdG8gYHJlZHVjZWAsIGV4Y2VwdCBtb3ZlcyB0aHJvdWdoIHRoZSBpbnB1dCBsaXN0IGZyb20gdGhlIHJpZ2h0IHRvXG4gICAgICogdGhlIGxlZnQuXG4gICAgICpcbiAgICAgKiBUaGUgaXRlcmF0b3IgZnVuY3Rpb24gcmVjZWl2ZXMgdHdvIHZhbHVlczogKihhY2MsIHZhbHVlKSpcbiAgICAgKlxuICAgICAqIE5vdGU6IGBSLnJlZHVjZVJpZ2h0YCBkb2VzIG5vdCBza2lwIGRlbGV0ZWQgb3IgdW5hc3NpZ25lZCBpbmRpY2VzIChzcGFyc2VcbiAgICAgKiBhcnJheXMpLCB1bmxpa2UgdGhlIG5hdGl2ZSBgQXJyYXkucHJvdG90eXBlLnJlZHVjZWAgbWV0aG9kLiBGb3IgbW9yZSBkZXRhaWxzXG4gICAgICogb24gdGhpcyBiZWhhdmlvciwgc2VlOlxuICAgICAqIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0FycmF5L3JlZHVjZVJpZ2h0I0Rlc2NyaXB0aW9uXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyAoYSxiIC0+IGEpIC0+IGEgLT4gW2JdIC0+IGFcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgaXRlcmF0b3IgZnVuY3Rpb24uIFJlY2VpdmVzIHR3byB2YWx1ZXMsIHRoZSBhY2N1bXVsYXRvciBhbmQgdGhlXG4gICAgICogICAgICAgIGN1cnJlbnQgZWxlbWVudCBmcm9tIHRoZSBhcnJheS5cbiAgICAgKiBAcGFyYW0geyp9IGFjYyBUaGUgYWNjdW11bGF0b3IgdmFsdWUuXG4gICAgICogQHBhcmFtIHtBcnJheX0gbGlzdCBUaGUgbGlzdCB0byBpdGVyYXRlIG92ZXIuXG4gICAgICogQHJldHVybiB7Kn0gVGhlIGZpbmFsLCBhY2N1bXVsYXRlZCB2YWx1ZS5cbiAgICAgKiBAc2VlIFIuYWRkSW5kZXhcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgcGFpcnMgPSBbIFsnYScsIDFdLCBbJ2InLCAyXSwgWydjJywgM10gXTtcbiAgICAgKiAgICAgIHZhciBmbGF0dGVuUGFpcnMgPSAoYWNjLCBwYWlyKSA9PiBhY2MuY29uY2F0KHBhaXIpO1xuICAgICAqXG4gICAgICogICAgICBSLnJlZHVjZVJpZ2h0KGZsYXR0ZW5QYWlycywgW10sIHBhaXJzKTsgLy89PiBbICdjJywgMywgJ2InLCAyLCAnYScsIDEgXVxuICAgICAqL1xuICAgIHZhciByZWR1Y2VSaWdodCA9IF9jdXJyeTMoZnVuY3Rpb24gcmVkdWNlUmlnaHQoZm4sIGFjYywgbGlzdCkge1xuICAgICAgICB2YXIgaWR4ID0gbGlzdC5sZW5ndGggLSAxO1xuICAgICAgICB3aGlsZSAoaWR4ID49IDApIHtcbiAgICAgICAgICAgIGFjYyA9IGZuKGFjYywgbGlzdFtpZHhdKTtcbiAgICAgICAgICAgIGlkeCAtPSAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhY2M7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgdmFsdWUgd3JhcHBlZCB0byBpbmRpY2F0ZSB0aGF0IGl0IGlzIHRoZSBmaW5hbCB2YWx1ZSBvZiB0aGUgcmVkdWNlXG4gICAgICogYW5kIHRyYW5zZHVjZSBmdW5jdGlvbnMuIFRoZSByZXR1cm5lZCB2YWx1ZSBzaG91bGQgYmUgY29uc2lkZXJlZCBhIGJsYWNrXG4gICAgICogYm94OiB0aGUgaW50ZXJuYWwgc3RydWN0dXJlIGlzIG5vdCBndWFyYW50ZWVkIHRvIGJlIHN0YWJsZS5cbiAgICAgKlxuICAgICAqIE5vdGU6IHRoaXMgb3B0aW1pemF0aW9uIGlzIHVuYXZhaWxhYmxlIHRvIGZ1bmN0aW9ucyBub3QgZXhwbGljaXRseSBsaXN0ZWRcbiAgICAgKiBhYm92ZS4gRm9yIGluc3RhbmNlLCBpdCBpcyBub3QgY3VycmVudGx5IHN1cHBvcnRlZCBieSByZWR1Y2VSaWdodC5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMTUuMFxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyBhIC0+ICpcbiAgICAgKiBAcGFyYW0geyp9IHggVGhlIGZpbmFsIHZhbHVlIG9mIHRoZSByZWR1Y2UuXG4gICAgICogQHJldHVybiB7Kn0gVGhlIHdyYXBwZWQgdmFsdWUuXG4gICAgICogQHNlZSBSLnJlZHVjZSwgUi50cmFuc2R1Y2VcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLnJlZHVjZShcbiAgICAgKiAgICAgICAgUi5waXBlKFIuYWRkLCBSLndoZW4oUi5ndGUoUi5fXywgMTApLCBSLnJlZHVjZWQpKSxcbiAgICAgKiAgICAgICAgMCxcbiAgICAgKiAgICAgICAgWzEsIDIsIDMsIDQsIDVdKSAvLyAxMFxuICAgICAqL1xuICAgIHZhciByZWR1Y2VkID0gX2N1cnJ5MShfcmVkdWNlZCk7XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIHRoZSBzdWItbGlzdCBvZiBgbGlzdGAgc3RhcnRpbmcgYXQgaW5kZXggYHN0YXJ0YCBhbmQgY29udGFpbmluZ1xuICAgICAqIGBjb3VudGAgZWxlbWVudHMuIF9Ob3RlIHRoYXQgdGhpcyBpcyBub3QgZGVzdHJ1Y3RpdmVfOiBpdCByZXR1cm5zIGEgY29weSBvZlxuICAgICAqIHRoZSBsaXN0IHdpdGggdGhlIGNoYW5nZXMuXG4gICAgICogPHNtYWxsPk5vIGxpc3RzIGhhdmUgYmVlbiBoYXJtZWQgaW4gdGhlIGFwcGxpY2F0aW9uIG9mIHRoaXMgZnVuY3Rpb24uPC9zbWFsbD5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMi4yXG4gICAgICogQGNhdGVnb3J5IExpc3RcbiAgICAgKiBAc2lnIE51bWJlciAtPiBOdW1iZXIgLT4gW2FdIC0+IFthXVxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBzdGFydCBUaGUgcG9zaXRpb24gdG8gc3RhcnQgcmVtb3ZpbmcgZWxlbWVudHNcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gY291bnQgVGhlIG51bWJlciBvZiBlbGVtZW50cyB0byByZW1vdmVcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBsaXN0IFRoZSBsaXN0IHRvIHJlbW92ZSBmcm9tXG4gICAgICogQHJldHVybiB7QXJyYXl9IEEgbmV3IEFycmF5IHdpdGggYGNvdW50YCBlbGVtZW50cyBmcm9tIGBzdGFydGAgcmVtb3ZlZC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLnJlbW92ZSgyLCAzLCBbMSwyLDMsNCw1LDYsNyw4XSk7IC8vPT4gWzEsMiw2LDcsOF1cbiAgICAgKi9cbiAgICB2YXIgcmVtb3ZlID0gX2N1cnJ5MyhmdW5jdGlvbiByZW1vdmUoc3RhcnQsIGNvdW50LCBsaXN0KSB7XG4gICAgICAgIHJldHVybiBfY29uY2F0KF9zbGljZShsaXN0LCAwLCBNYXRoLm1pbihzdGFydCwgbGlzdC5sZW5ndGgpKSwgX3NsaWNlKGxpc3QsIE1hdGgubWluKGxpc3QubGVuZ3RoLCBzdGFydCArIGNvdW50KSkpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogUmVwbGFjZSBhIHN1YnN0cmluZyBvciByZWdleCBtYXRjaCBpbiBhIHN0cmluZyB3aXRoIGEgcmVwbGFjZW1lbnQuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjcuMFxuICAgICAqIEBjYXRlZ29yeSBTdHJpbmdcbiAgICAgKiBAc2lnIFJlZ0V4cHxTdHJpbmcgLT4gU3RyaW5nIC0+IFN0cmluZyAtPiBTdHJpbmdcbiAgICAgKiBAcGFyYW0ge1JlZ0V4cHxTdHJpbmd9IHBhdHRlcm4gQSByZWd1bGFyIGV4cHJlc3Npb24gb3IgYSBzdWJzdHJpbmcgdG8gbWF0Y2guXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHJlcGxhY2VtZW50IFRoZSBzdHJpbmcgdG8gcmVwbGFjZSB0aGUgbWF0Y2hlcyB3aXRoLlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBzdHIgVGhlIFN0cmluZyB0byBkbyB0aGUgc2VhcmNoIGFuZCByZXBsYWNlbWVudCBpbi5cbiAgICAgKiBAcmV0dXJuIHtTdHJpbmd9IFRoZSByZXN1bHQuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5yZXBsYWNlKCdmb28nLCAnYmFyJywgJ2ZvbyBmb28gZm9vJyk7IC8vPT4gJ2JhciBmb28gZm9vJ1xuICAgICAqICAgICAgUi5yZXBsYWNlKC9mb28vLCAnYmFyJywgJ2ZvbyBmb28gZm9vJyk7IC8vPT4gJ2JhciBmb28gZm9vJ1xuICAgICAqXG4gICAgICogICAgICAvLyBVc2UgdGhlIFwiZ1wiIChnbG9iYWwpIGZsYWcgdG8gcmVwbGFjZSBhbGwgb2NjdXJyZW5jZXM6XG4gICAgICogICAgICBSLnJlcGxhY2UoL2Zvby9nLCAnYmFyJywgJ2ZvbyBmb28gZm9vJyk7IC8vPT4gJ2JhciBiYXIgYmFyJ1xuICAgICAqL1xuICAgIHZhciByZXBsYWNlID0gX2N1cnJ5MyhmdW5jdGlvbiByZXBsYWNlKHJlZ2V4LCByZXBsYWNlbWVudCwgc3RyKSB7XG4gICAgICAgIHJldHVybiBzdHIucmVwbGFjZShyZWdleCwgcmVwbGFjZW1lbnQpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIG5ldyBsaXN0IG9yIHN0cmluZyB3aXRoIHRoZSBlbGVtZW50cyBvciBjaGFyYWN0ZXJzIGluIHJldmVyc2VcbiAgICAgKiBvcmRlci5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4wXG4gICAgICogQGNhdGVnb3J5IExpc3RcbiAgICAgKiBAc2lnIFthXSAtPiBbYV1cbiAgICAgKiBAc2lnIFN0cmluZyAtPiBTdHJpbmdcbiAgICAgKiBAcGFyYW0ge0FycmF5fFN0cmluZ30gbGlzdFxuICAgICAqIEByZXR1cm4ge0FycmF5fFN0cmluZ31cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLnJldmVyc2UoWzEsIDIsIDNdKTsgIC8vPT4gWzMsIDIsIDFdXG4gICAgICogICAgICBSLnJldmVyc2UoWzEsIDJdKTsgICAgIC8vPT4gWzIsIDFdXG4gICAgICogICAgICBSLnJldmVyc2UoWzFdKTsgICAgICAgIC8vPT4gWzFdXG4gICAgICogICAgICBSLnJldmVyc2UoW10pOyAgICAgICAgIC8vPT4gW11cbiAgICAgKlxuICAgICAqICAgICAgUi5yZXZlcnNlKCdhYmMnKTsgICAgICAvLz0+ICdjYmEnXG4gICAgICogICAgICBSLnJldmVyc2UoJ2FiJyk7ICAgICAgIC8vPT4gJ2JhJ1xuICAgICAqICAgICAgUi5yZXZlcnNlKCdhJyk7ICAgICAgICAvLz0+ICdhJ1xuICAgICAqICAgICAgUi5yZXZlcnNlKCcnKTsgICAgICAgICAvLz0+ICcnXG4gICAgICovXG4gICAgdmFyIHJldmVyc2UgPSBfY3VycnkxKGZ1bmN0aW9uIHJldmVyc2UobGlzdCkge1xuICAgICAgICByZXR1cm4gX2lzU3RyaW5nKGxpc3QpID8gbGlzdC5zcGxpdCgnJykucmV2ZXJzZSgpLmpvaW4oJycpIDogX3NsaWNlKGxpc3QpLnJldmVyc2UoKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFNjYW4gaXMgc2ltaWxhciB0byByZWR1Y2UsIGJ1dCByZXR1cm5zIGEgbGlzdCBvZiBzdWNjZXNzaXZlbHkgcmVkdWNlZCB2YWx1ZXNcbiAgICAgKiBmcm9tIHRoZSBsZWZ0XG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEwLjBcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgKGEsYiAtPiBhKSAtPiBhIC0+IFtiXSAtPiBbYV1cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgaXRlcmF0b3IgZnVuY3Rpb24uIFJlY2VpdmVzIHR3byB2YWx1ZXMsIHRoZSBhY2N1bXVsYXRvciBhbmQgdGhlXG4gICAgICogICAgICAgIGN1cnJlbnQgZWxlbWVudCBmcm9tIHRoZSBhcnJheVxuICAgICAqIEBwYXJhbSB7Kn0gYWNjIFRoZSBhY2N1bXVsYXRvciB2YWx1ZS5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBsaXN0IFRoZSBsaXN0IHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gQSBsaXN0IG9mIGFsbCBpbnRlcm1lZGlhdGVseSByZWR1Y2VkIHZhbHVlcy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgbnVtYmVycyA9IFsxLCAyLCAzLCA0XTtcbiAgICAgKiAgICAgIHZhciBmYWN0b3JpYWxzID0gUi5zY2FuKFIubXVsdGlwbHksIDEsIG51bWJlcnMpOyAvLz0+IFsxLCAxLCAyLCA2LCAyNF1cbiAgICAgKi9cbiAgICB2YXIgc2NhbiA9IF9jdXJyeTMoZnVuY3Rpb24gc2NhbihmbiwgYWNjLCBsaXN0KSB7XG4gICAgICAgIHZhciBpZHggPSAwO1xuICAgICAgICB2YXIgbGVuID0gbGlzdC5sZW5ndGg7XG4gICAgICAgIHZhciByZXN1bHQgPSBbYWNjXTtcbiAgICAgICAgd2hpbGUgKGlkeCA8IGxlbikge1xuICAgICAgICAgICAgYWNjID0gZm4oYWNjLCBsaXN0W2lkeF0pO1xuICAgICAgICAgICAgcmVzdWx0W2lkeCArIDFdID0gYWNjO1xuICAgICAgICAgICAgaWR4ICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHJlc3VsdCBvZiBcInNldHRpbmdcIiB0aGUgcG9ydGlvbiBvZiB0aGUgZ2l2ZW4gZGF0YSBzdHJ1Y3R1cmVcbiAgICAgKiBmb2N1c2VkIGJ5IHRoZSBnaXZlbiBsZW5zIHRvIHRoZSBnaXZlbiB2YWx1ZS5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMTYuMFxuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAdHlwZWRlZm4gTGVucyBzIGEgPSBGdW5jdG9yIGYgPT4gKGEgLT4gZiBhKSAtPiBzIC0+IGYgc1xuICAgICAqIEBzaWcgTGVucyBzIGEgLT4gYSAtPiBzIC0+IHNcbiAgICAgKiBAcGFyYW0ge0xlbnN9IGxlbnNcbiAgICAgKiBAcGFyYW0geyp9IHZcbiAgICAgKiBAcGFyYW0geyp9IHhcbiAgICAgKiBAcmV0dXJuIHsqfVxuICAgICAqIEBzZWUgUi5wcm9wLCBSLmxlbnNJbmRleCwgUi5sZW5zUHJvcFxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciB4TGVucyA9IFIubGVuc1Byb3AoJ3gnKTtcbiAgICAgKlxuICAgICAqICAgICAgUi5zZXQoeExlbnMsIDQsIHt4OiAxLCB5OiAyfSk7ICAvLz0+IHt4OiA0LCB5OiAyfVxuICAgICAqICAgICAgUi5zZXQoeExlbnMsIDgsIHt4OiAxLCB5OiAyfSk7ICAvLz0+IHt4OiA4LCB5OiAyfVxuICAgICAqL1xuICAgIHZhciBzZXQgPSBfY3VycnkzKGZ1bmN0aW9uIHNldChsZW5zLCB2LCB4KSB7XG4gICAgICAgIHJldHVybiBvdmVyKGxlbnMsIGFsd2F5cyh2KSwgeCk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBlbGVtZW50cyBvZiB0aGUgZ2l2ZW4gbGlzdCBvciBzdHJpbmcgKG9yIG9iamVjdCB3aXRoIGEgYHNsaWNlYFxuICAgICAqIG1ldGhvZCkgZnJvbSBgZnJvbUluZGV4YCAoaW5jbHVzaXZlKSB0byBgdG9JbmRleGAgKGV4Y2x1c2l2ZSkuXG4gICAgICpcbiAgICAgKiBEaXNwYXRjaGVzIHRvIHRoZSBgc2xpY2VgIG1ldGhvZCBvZiB0aGUgdGhpcmQgYXJndW1lbnQsIGlmIHByZXNlbnQuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuNFxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyBOdW1iZXIgLT4gTnVtYmVyIC0+IFthXSAtPiBbYV1cbiAgICAgKiBAc2lnIE51bWJlciAtPiBOdW1iZXIgLT4gU3RyaW5nIC0+IFN0cmluZ1xuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBmcm9tSW5kZXggVGhlIHN0YXJ0IGluZGV4IChpbmNsdXNpdmUpLlxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSB0b0luZGV4IFRoZSBlbmQgaW5kZXggKGV4Y2x1c2l2ZSkuXG4gICAgICogQHBhcmFtIHsqfSBsaXN0XG4gICAgICogQHJldHVybiB7Kn1cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLnNsaWNlKDEsIDMsIFsnYScsICdiJywgJ2MnLCAnZCddKTsgICAgICAgIC8vPT4gWydiJywgJ2MnXVxuICAgICAqICAgICAgUi5zbGljZSgxLCBJbmZpbml0eSwgWydhJywgJ2InLCAnYycsICdkJ10pOyAvLz0+IFsnYicsICdjJywgJ2QnXVxuICAgICAqICAgICAgUi5zbGljZSgwLCAtMSwgWydhJywgJ2InLCAnYycsICdkJ10pOyAgICAgICAvLz0+IFsnYScsICdiJywgJ2MnXVxuICAgICAqICAgICAgUi5zbGljZSgtMywgLTEsIFsnYScsICdiJywgJ2MnLCAnZCddKTsgICAgICAvLz0+IFsnYicsICdjJ11cbiAgICAgKiAgICAgIFIuc2xpY2UoMCwgMywgJ3JhbWRhJyk7ICAgICAgICAgICAgICAgICAgICAgLy89PiAncmFtJ1xuICAgICAqL1xuICAgIHZhciBzbGljZSA9IF9jdXJyeTMoX2NoZWNrRm9yTWV0aG9kKCdzbGljZScsIGZ1bmN0aW9uIHNsaWNlKGZyb21JbmRleCwgdG9JbmRleCwgbGlzdCkge1xuICAgICAgICByZXR1cm4gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwobGlzdCwgZnJvbUluZGV4LCB0b0luZGV4KTtcbiAgICB9KSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgY29weSBvZiB0aGUgbGlzdCwgc29ydGVkIGFjY29yZGluZyB0byB0aGUgY29tcGFyYXRvciBmdW5jdGlvbixcbiAgICAgKiB3aGljaCBzaG91bGQgYWNjZXB0IHR3byB2YWx1ZXMgYXQgYSB0aW1lIGFuZCByZXR1cm4gYSBuZWdhdGl2ZSBudW1iZXIgaWYgdGhlXG4gICAgICogZmlyc3QgdmFsdWUgaXMgc21hbGxlciwgYSBwb3NpdGl2ZSBudW1iZXIgaWYgaXQncyBsYXJnZXIsIGFuZCB6ZXJvIGlmIHRoZXlcbiAgICAgKiBhcmUgZXF1YWwuIFBsZWFzZSBub3RlIHRoYXQgdGhpcyBpcyBhICoqY29weSoqIG9mIHRoZSBsaXN0LiBJdCBkb2VzIG5vdFxuICAgICAqIG1vZGlmeSB0aGUgb3JpZ2luYWwuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyAoYSxhIC0+IE51bWJlcikgLT4gW2FdIC0+IFthXVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNvbXBhcmF0b3IgQSBzb3J0aW5nIGZ1bmN0aW9uIDo6IGEgLT4gYiAtPiBJbnRcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBsaXN0IFRoZSBsaXN0IHRvIHNvcnRcbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gYSBuZXcgYXJyYXkgd2l0aCBpdHMgZWxlbWVudHMgc29ydGVkIGJ5IHRoZSBjb21wYXJhdG9yIGZ1bmN0aW9uLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBkaWZmID0gZnVuY3Rpb24oYSwgYikgeyByZXR1cm4gYSAtIGI7IH07XG4gICAgICogICAgICBSLnNvcnQoZGlmZiwgWzQsMiw3LDVdKTsgLy89PiBbMiwgNCwgNSwgN11cbiAgICAgKi9cbiAgICB2YXIgc29ydCA9IF9jdXJyeTIoZnVuY3Rpb24gc29ydChjb21wYXJhdG9yLCBsaXN0KSB7XG4gICAgICAgIHJldHVybiBfc2xpY2UobGlzdCkuc29ydChjb21wYXJhdG9yKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFNvcnRzIHRoZSBsaXN0IGFjY29yZGluZyB0byB0aGUgc3VwcGxpZWQgZnVuY3Rpb24uXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBSZWxhdGlvblxuICAgICAqIEBzaWcgT3JkIGIgPT4gKGEgLT4gYikgLT4gW2FdIC0+IFthXVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gICAgICogQHBhcmFtIHtBcnJheX0gbGlzdCBUaGUgbGlzdCB0byBzb3J0LlxuICAgICAqIEByZXR1cm4ge0FycmF5fSBBIG5ldyBsaXN0IHNvcnRlZCBieSB0aGUga2V5cyBnZW5lcmF0ZWQgYnkgYGZuYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgc29ydEJ5Rmlyc3RJdGVtID0gUi5zb3J0QnkoUi5wcm9wKDApKTtcbiAgICAgKiAgICAgIHZhciBzb3J0QnlOYW1lQ2FzZUluc2Vuc2l0aXZlID0gUi5zb3J0QnkoUi5jb21wb3NlKFIudG9Mb3dlciwgUi5wcm9wKCduYW1lJykpKTtcbiAgICAgKiAgICAgIHZhciBwYWlycyA9IFtbLTEsIDFdLCBbLTIsIDJdLCBbLTMsIDNdXTtcbiAgICAgKiAgICAgIHNvcnRCeUZpcnN0SXRlbShwYWlycyk7IC8vPT4gW1stMywgM10sIFstMiwgMl0sIFstMSwgMV1dXG4gICAgICogICAgICB2YXIgYWxpY2UgPSB7XG4gICAgICogICAgICAgIG5hbWU6ICdBTElDRScsXG4gICAgICogICAgICAgIGFnZTogMTAxXG4gICAgICogICAgICB9O1xuICAgICAqICAgICAgdmFyIGJvYiA9IHtcbiAgICAgKiAgICAgICAgbmFtZTogJ0JvYicsXG4gICAgICogICAgICAgIGFnZTogLTEwXG4gICAgICogICAgICB9O1xuICAgICAqICAgICAgdmFyIGNsYXJhID0ge1xuICAgICAqICAgICAgICBuYW1lOiAnY2xhcmEnLFxuICAgICAqICAgICAgICBhZ2U6IDMxNC4xNTlcbiAgICAgKiAgICAgIH07XG4gICAgICogICAgICB2YXIgcGVvcGxlID0gW2NsYXJhLCBib2IsIGFsaWNlXTtcbiAgICAgKiAgICAgIHNvcnRCeU5hbWVDYXNlSW5zZW5zaXRpdmUocGVvcGxlKTsgLy89PiBbYWxpY2UsIGJvYiwgY2xhcmFdXG4gICAgICovXG4gICAgdmFyIHNvcnRCeSA9IF9jdXJyeTIoZnVuY3Rpb24gc29ydEJ5KGZuLCBsaXN0KSB7XG4gICAgICAgIHJldHVybiBfc2xpY2UobGlzdCkuc29ydChmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICAgICAgdmFyIGFhID0gZm4oYSk7XG4gICAgICAgICAgICB2YXIgYmIgPSBmbihiKTtcbiAgICAgICAgICAgIHJldHVybiBhYSA8IGJiID8gLTEgOiBhYSA+IGJiID8gMSA6IDA7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogU3BsaXRzIGEgZ2l2ZW4gbGlzdCBvciBzdHJpbmcgYXQgYSBnaXZlbiBpbmRleC5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMTkuMFxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyBOdW1iZXIgLT4gW2FdIC0+IFtbYV0sIFthXV1cbiAgICAgKiBAc2lnIE51bWJlciAtPiBTdHJpbmcgLT4gW1N0cmluZywgU3RyaW5nXVxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleCBUaGUgaW5kZXggd2hlcmUgdGhlIGFycmF5L3N0cmluZyBpcyBzcGxpdC5cbiAgICAgKiBAcGFyYW0ge0FycmF5fFN0cmluZ30gYXJyYXkgVGhlIGFycmF5L3N0cmluZyB0byBiZSBzcGxpdC5cbiAgICAgKiBAcmV0dXJuIHtBcnJheX1cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLnNwbGl0QXQoMSwgWzEsIDIsIDNdKTsgICAgICAgICAgLy89PiBbWzFdLCBbMiwgM11dXG4gICAgICogICAgICBSLnNwbGl0QXQoNSwgJ2hlbGxvIHdvcmxkJyk7ICAgICAgLy89PiBbJ2hlbGxvJywgJyB3b3JsZCddXG4gICAgICogICAgICBSLnNwbGl0QXQoLTEsICdmb29iYXInKTsgICAgICAgICAgLy89PiBbJ2Zvb2JhJywgJ3InXVxuICAgICAqL1xuICAgIHZhciBzcGxpdEF0ID0gX2N1cnJ5MihmdW5jdGlvbiBzcGxpdEF0KGluZGV4LCBhcnJheSkge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgc2xpY2UoMCwgaW5kZXgsIGFycmF5KSxcbiAgICAgICAgICAgIHNsaWNlKGluZGV4LCBsZW5ndGgoYXJyYXkpLCBhcnJheSlcbiAgICAgICAgXTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFNwbGl0cyBhIGNvbGxlY3Rpb24gaW50byBzbGljZXMgb2YgdGhlIHNwZWNpZmllZCBsZW5ndGguXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjE2LjBcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgTnVtYmVyIC0+IFthXSAtPiBbW2FdXVxuICAgICAqIEBzaWcgTnVtYmVyIC0+IFN0cmluZyAtPiBbU3RyaW5nXVxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBuXG4gICAgICogQHBhcmFtIHtBcnJheX0gbGlzdFxuICAgICAqIEByZXR1cm4ge0FycmF5fVxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIuc3BsaXRFdmVyeSgzLCBbMSwgMiwgMywgNCwgNSwgNiwgN10pOyAvLz0+IFtbMSwgMiwgM10sIFs0LCA1LCA2XSwgWzddXVxuICAgICAqICAgICAgUi5zcGxpdEV2ZXJ5KDMsICdmb29iYXJiYXonKTsgLy89PiBbJ2ZvbycsICdiYXInLCAnYmF6J11cbiAgICAgKi9cbiAgICB2YXIgc3BsaXRFdmVyeSA9IF9jdXJyeTIoZnVuY3Rpb24gc3BsaXRFdmVyeShuLCBsaXN0KSB7XG4gICAgICAgIGlmIChuIDw9IDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRmlyc3QgYXJndW1lbnQgdG8gc3BsaXRFdmVyeSBtdXN0IGJlIGEgcG9zaXRpdmUgaW50ZWdlcicpO1xuICAgICAgICB9XG4gICAgICAgIHZhciByZXN1bHQgPSBbXTtcbiAgICAgICAgdmFyIGlkeCA9IDA7XG4gICAgICAgIHdoaWxlIChpZHggPCBsaXN0Lmxlbmd0aCkge1xuICAgICAgICAgICAgcmVzdWx0LnB1c2goc2xpY2UoaWR4LCBpZHggKz0gbiwgbGlzdCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBUYWtlcyBhIGxpc3QgYW5kIGEgcHJlZGljYXRlIGFuZCByZXR1cm5zIGEgcGFpciBvZiBsaXN0cyB3aXRoIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllczpcbiAgICAgKlxuICAgICAqICAtIHRoZSByZXN1bHQgb2YgY29uY2F0ZW5hdGluZyB0aGUgdHdvIG91dHB1dCBsaXN0cyBpcyBlcXVpdmFsZW50IHRvIHRoZSBpbnB1dCBsaXN0O1xuICAgICAqICAtIG5vbmUgb2YgdGhlIGVsZW1lbnRzIG9mIHRoZSBmaXJzdCBvdXRwdXQgbGlzdCBzYXRpc2ZpZXMgdGhlIHByZWRpY2F0ZTsgYW5kXG4gICAgICogIC0gaWYgdGhlIHNlY29uZCBvdXRwdXQgbGlzdCBpcyBub24tZW1wdHksIGl0cyBmaXJzdCBlbGVtZW50IHNhdGlzZmllcyB0aGUgcHJlZGljYXRlLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xOS4wXG4gICAgICogQGNhdGVnb3J5IExpc3RcbiAgICAgKiBAc2lnIChhIC0+IEJvb2xlYW4pIC0+IFthXSAtPiBbW2FdLCBbYV1dXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gcHJlZCBUaGUgcHJlZGljYXRlIHRoYXQgZGV0ZXJtaW5lcyB3aGVyZSB0aGUgYXJyYXkgaXMgc3BsaXQuXG4gICAgICogQHBhcmFtIHtBcnJheX0gbGlzdCBUaGUgYXJyYXkgdG8gYmUgc3BsaXQuXG4gICAgICogQHJldHVybiB7QXJyYXl9XG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5zcGxpdFdoZW4oUi5lcXVhbHMoMiksIFsxLCAyLCAzLCAxLCAyLCAzXSk7ICAgLy89PiBbWzFdLCBbMiwgMywgMSwgMiwgM11dXG4gICAgICovXG4gICAgdmFyIHNwbGl0V2hlbiA9IF9jdXJyeTIoZnVuY3Rpb24gc3BsaXRXaGVuKHByZWQsIGxpc3QpIHtcbiAgICAgICAgdmFyIGlkeCA9IDA7XG4gICAgICAgIHZhciBsZW4gPSBsaXN0Lmxlbmd0aDtcbiAgICAgICAgdmFyIHByZWZpeCA9IFtdO1xuICAgICAgICB3aGlsZSAoaWR4IDwgbGVuICYmICFwcmVkKGxpc3RbaWR4XSkpIHtcbiAgICAgICAgICAgIHByZWZpeC5wdXNoKGxpc3RbaWR4XSk7XG4gICAgICAgICAgICBpZHggKz0gMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgcHJlZml4LFxuICAgICAgICAgICAgX3NsaWNlKGxpc3QsIGlkeClcbiAgICAgICAgXTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFN1YnRyYWN0cyBpdHMgc2Vjb25kIGFyZ3VtZW50IGZyb20gaXRzIGZpcnN0IGFyZ3VtZW50LlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgTWF0aFxuICAgICAqIEBzaWcgTnVtYmVyIC0+IE51bWJlciAtPiBOdW1iZXJcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gYSBUaGUgZmlyc3QgdmFsdWUuXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGIgVGhlIHNlY29uZCB2YWx1ZS5cbiAgICAgKiBAcmV0dXJuIHtOdW1iZXJ9IFRoZSByZXN1bHQgb2YgYGEgLSBiYC5cbiAgICAgKiBAc2VlIFIuYWRkXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5zdWJ0cmFjdCgxMCwgOCk7IC8vPT4gMlxuICAgICAqXG4gICAgICogICAgICB2YXIgbWludXM1ID0gUi5zdWJ0cmFjdChSLl9fLCA1KTtcbiAgICAgKiAgICAgIG1pbnVzNSgxNyk7IC8vPT4gMTJcbiAgICAgKlxuICAgICAqICAgICAgdmFyIGNvbXBsZW1lbnRhcnlBbmdsZSA9IFIuc3VidHJhY3QoOTApO1xuICAgICAqICAgICAgY29tcGxlbWVudGFyeUFuZ2xlKDMwKTsgLy89PiA2MFxuICAgICAqICAgICAgY29tcGxlbWVudGFyeUFuZ2xlKDcyKTsgLy89PiAxOFxuICAgICAqL1xuICAgIHZhciBzdWJ0cmFjdCA9IF9jdXJyeTIoZnVuY3Rpb24gc3VidHJhY3QoYSwgYikge1xuICAgICAgICByZXR1cm4gTnVtYmVyKGEpIC0gTnVtYmVyKGIpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhbGwgYnV0IHRoZSBmaXJzdCBlbGVtZW50IG9mIHRoZSBnaXZlbiBsaXN0IG9yIHN0cmluZyAob3Igb2JqZWN0XG4gICAgICogd2l0aCBhIGB0YWlsYCBtZXRob2QpLlxuICAgICAqXG4gICAgICogRGlzcGF0Y2hlcyB0byB0aGUgYHNsaWNlYCBtZXRob2Qgb2YgdGhlIGZpcnN0IGFyZ3VtZW50LCBpZiBwcmVzZW50LlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgW2FdIC0+IFthXVxuICAgICAqIEBzaWcgU3RyaW5nIC0+IFN0cmluZ1xuICAgICAqIEBwYXJhbSB7Kn0gbGlzdFxuICAgICAqIEByZXR1cm4geyp9XG4gICAgICogQHNlZSBSLmhlYWQsIFIuaW5pdCwgUi5sYXN0XG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi50YWlsKFsxLCAyLCAzXSk7ICAvLz0+IFsyLCAzXVxuICAgICAqICAgICAgUi50YWlsKFsxLCAyXSk7ICAgICAvLz0+IFsyXVxuICAgICAqICAgICAgUi50YWlsKFsxXSk7ICAgICAgICAvLz0+IFtdXG4gICAgICogICAgICBSLnRhaWwoW10pOyAgICAgICAgIC8vPT4gW11cbiAgICAgKlxuICAgICAqICAgICAgUi50YWlsKCdhYmMnKTsgIC8vPT4gJ2JjJ1xuICAgICAqICAgICAgUi50YWlsKCdhYicpOyAgIC8vPT4gJ2InXG4gICAgICogICAgICBSLnRhaWwoJ2EnKTsgICAgLy89PiAnJ1xuICAgICAqICAgICAgUi50YWlsKCcnKTsgICAgIC8vPT4gJydcbiAgICAgKi9cbiAgICB2YXIgdGFpbCA9IF9jaGVja0Zvck1ldGhvZCgndGFpbCcsIHNsaWNlKDEsIEluZmluaXR5KSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBmaXJzdCBgbmAgZWxlbWVudHMgb2YgdGhlIGdpdmVuIGxpc3QsIHN0cmluZywgb3JcbiAgICAgKiB0cmFuc2R1Y2VyL3RyYW5zZm9ybWVyIChvciBvYmplY3Qgd2l0aCBhIGB0YWtlYCBtZXRob2QpLlxuICAgICAqXG4gICAgICogRGlzcGF0Y2hlcyB0byB0aGUgYHRha2VgIG1ldGhvZCBvZiB0aGUgc2Vjb25kIGFyZ3VtZW50LCBpZiBwcmVzZW50LlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgTnVtYmVyIC0+IFthXSAtPiBbYV1cbiAgICAgKiBAc2lnIE51bWJlciAtPiBTdHJpbmcgLT4gU3RyaW5nXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IG5cbiAgICAgKiBAcGFyYW0geyp9IGxpc3RcbiAgICAgKiBAcmV0dXJuIHsqfVxuICAgICAqIEBzZWUgUi5kcm9wXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi50YWtlKDEsIFsnZm9vJywgJ2JhcicsICdiYXonXSk7IC8vPT4gWydmb28nXVxuICAgICAqICAgICAgUi50YWtlKDIsIFsnZm9vJywgJ2JhcicsICdiYXonXSk7IC8vPT4gWydmb28nLCAnYmFyJ11cbiAgICAgKiAgICAgIFIudGFrZSgzLCBbJ2ZvbycsICdiYXInLCAnYmF6J10pOyAvLz0+IFsnZm9vJywgJ2JhcicsICdiYXonXVxuICAgICAqICAgICAgUi50YWtlKDQsIFsnZm9vJywgJ2JhcicsICdiYXonXSk7IC8vPT4gWydmb28nLCAnYmFyJywgJ2JheiddXG4gICAgICogICAgICBSLnRha2UoMywgJ3JhbWRhJyk7ICAgICAgICAgICAgICAgLy89PiAncmFtJ1xuICAgICAqXG4gICAgICogICAgICB2YXIgcGVyc29ubmVsID0gW1xuICAgICAqICAgICAgICAnRGF2ZSBCcnViZWNrJyxcbiAgICAgKiAgICAgICAgJ1BhdWwgRGVzbW9uZCcsXG4gICAgICogICAgICAgICdFdWdlbmUgV3JpZ2h0JyxcbiAgICAgKiAgICAgICAgJ0pvZSBNb3JlbGxvJyxcbiAgICAgKiAgICAgICAgJ0dlcnJ5IE11bGxpZ2FuJyxcbiAgICAgKiAgICAgICAgJ0JvYiBCYXRlcycsXG4gICAgICogICAgICAgICdKb2UgRG9kZ2UnLFxuICAgICAqICAgICAgICAnUm9uIENyb3R0eSdcbiAgICAgKiAgICAgIF07XG4gICAgICpcbiAgICAgKiAgICAgIHZhciB0YWtlRml2ZSA9IFIudGFrZSg1KTtcbiAgICAgKiAgICAgIHRha2VGaXZlKHBlcnNvbm5lbCk7XG4gICAgICogICAgICAvLz0+IFsnRGF2ZSBCcnViZWNrJywgJ1BhdWwgRGVzbW9uZCcsICdFdWdlbmUgV3JpZ2h0JywgJ0pvZSBNb3JlbGxvJywgJ0dlcnJ5IE11bGxpZ2FuJ11cbiAgICAgKi9cbiAgICB2YXIgdGFrZSA9IF9jdXJyeTIoX2Rpc3BhdGNoYWJsZSgndGFrZScsIF94dGFrZSwgZnVuY3Rpb24gdGFrZShuLCB4cykge1xuICAgICAgICByZXR1cm4gc2xpY2UoMCwgbiA8IDAgPyBJbmZpbml0eSA6IG4sIHhzKTtcbiAgICB9KSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgbmV3IGxpc3QgY29udGFpbmluZyB0aGUgbGFzdCBgbmAgZWxlbWVudHMgb2YgYSBnaXZlbiBsaXN0LCBwYXNzaW5nXG4gICAgICogZWFjaCB2YWx1ZSB0byB0aGUgc3VwcGxpZWQgcHJlZGljYXRlIGZ1bmN0aW9uLCBhbmQgdGVybWluYXRpbmcgd2hlbiB0aGVcbiAgICAgKiBwcmVkaWNhdGUgZnVuY3Rpb24gcmV0dXJucyBgZmFsc2VgLiBFeGNsdWRlcyB0aGUgZWxlbWVudCB0aGF0IGNhdXNlZCB0aGVcbiAgICAgKiBwcmVkaWNhdGUgZnVuY3Rpb24gdG8gZmFpbC4gVGhlIHByZWRpY2F0ZSBmdW5jdGlvbiBpcyBwYXNzZWQgb25lIGFyZ3VtZW50OlxuICAgICAqICoodmFsdWUpKi5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMTYuMFxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyAoYSAtPiBCb29sZWFuKSAtPiBbYV0gLT4gW2FdXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGZ1bmN0aW9uIGNhbGxlZCBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGxpc3QgVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEByZXR1cm4ge0FycmF5fSBBIG5ldyBhcnJheS5cbiAgICAgKiBAc2VlIFIuZHJvcExhc3RXaGlsZSwgUi5hZGRJbmRleFxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBpc05vdE9uZSA9IHggPT4geCAhPT0gMTtcbiAgICAgKlxuICAgICAqICAgICAgUi50YWtlTGFzdFdoaWxlKGlzTm90T25lLCBbMSwgMiwgMywgNF0pOyAvLz0+IFsyLCAzLCA0XVxuICAgICAqL1xuICAgIHZhciB0YWtlTGFzdFdoaWxlID0gX2N1cnJ5MihmdW5jdGlvbiB0YWtlTGFzdFdoaWxlKGZuLCBsaXN0KSB7XG4gICAgICAgIHZhciBpZHggPSBsaXN0Lmxlbmd0aCAtIDE7XG4gICAgICAgIHdoaWxlIChpZHggPj0gMCAmJiBmbihsaXN0W2lkeF0pKSB7XG4gICAgICAgICAgICBpZHggLT0gMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX3NsaWNlKGxpc3QsIGlkeCArIDEsIEluZmluaXR5KTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBuZXcgbGlzdCBjb250YWluaW5nIHRoZSBmaXJzdCBgbmAgZWxlbWVudHMgb2YgYSBnaXZlbiBsaXN0LFxuICAgICAqIHBhc3NpbmcgZWFjaCB2YWx1ZSB0byB0aGUgc3VwcGxpZWQgcHJlZGljYXRlIGZ1bmN0aW9uLCBhbmQgdGVybWluYXRpbmcgd2hlblxuICAgICAqIHRoZSBwcmVkaWNhdGUgZnVuY3Rpb24gcmV0dXJucyBgZmFsc2VgLiBFeGNsdWRlcyB0aGUgZWxlbWVudCB0aGF0IGNhdXNlZCB0aGVcbiAgICAgKiBwcmVkaWNhdGUgZnVuY3Rpb24gdG8gZmFpbC4gVGhlIHByZWRpY2F0ZSBmdW5jdGlvbiBpcyBwYXNzZWQgb25lIGFyZ3VtZW50OlxuICAgICAqICoodmFsdWUpKi5cbiAgICAgKlxuICAgICAqIERpc3BhdGNoZXMgdG8gdGhlIGB0YWtlV2hpbGVgIG1ldGhvZCBvZiB0aGUgc2Vjb25kIGFyZ3VtZW50LCBpZiBwcmVzZW50LlxuICAgICAqXG4gICAgICogQWN0cyBhcyBhIHRyYW5zZHVjZXIgaWYgYSB0cmFuc2Zvcm1lciBpcyBnaXZlbiBpbiBsaXN0IHBvc2l0aW9uLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgKGEgLT4gQm9vbGVhbikgLT4gW2FdIC0+IFthXVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBmdW5jdGlvbiBjYWxsZWQgcGVyIGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBsaXN0IFRoZSBjb2xsZWN0aW9uIHRvIGl0ZXJhdGUgb3Zlci5cbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gQSBuZXcgYXJyYXkuXG4gICAgICogQHNlZSBSLmRyb3BXaGlsZSwgUi50cmFuc2R1Y2UsIFIuYWRkSW5kZXhcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgaXNOb3RGb3VyID0geCA9PiB4ICE9PSA0O1xuICAgICAqXG4gICAgICogICAgICBSLnRha2VXaGlsZShpc05vdEZvdXIsIFsxLCAyLCAzLCA0LCAzLCAyLCAxXSk7IC8vPT4gWzEsIDIsIDNdXG4gICAgICovXG4gICAgdmFyIHRha2VXaGlsZSA9IF9jdXJyeTIoX2Rpc3BhdGNoYWJsZSgndGFrZVdoaWxlJywgX3h0YWtlV2hpbGUsIGZ1bmN0aW9uIHRha2VXaGlsZShmbiwgbGlzdCkge1xuICAgICAgICB2YXIgaWR4ID0gMDtcbiAgICAgICAgdmFyIGxlbiA9IGxpc3QubGVuZ3RoO1xuICAgICAgICB3aGlsZSAoaWR4IDwgbGVuICYmIGZuKGxpc3RbaWR4XSkpIHtcbiAgICAgICAgICAgIGlkeCArPSAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfc2xpY2UobGlzdCwgMCwgaWR4KTtcbiAgICB9KSk7XG5cbiAgICAvKipcbiAgICAgKiBSdW5zIHRoZSBnaXZlbiBmdW5jdGlvbiB3aXRoIHRoZSBzdXBwbGllZCBvYmplY3QsIHRoZW4gcmV0dXJucyB0aGUgb2JqZWN0LlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICAgKiBAc2lnIChhIC0+ICopIC0+IGEgLT4gYVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBmdW5jdGlvbiB0byBjYWxsIHdpdGggYHhgLiBUaGUgcmV0dXJuIHZhbHVlIG9mIGBmbmAgd2lsbCBiZSB0aHJvd24gYXdheS5cbiAgICAgKiBAcGFyYW0geyp9IHhcbiAgICAgKiBAcmV0dXJuIHsqfSBgeGAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIHNheVggPSB4ID0+IGNvbnNvbGUubG9nKCd4IGlzICcgKyB4KTtcbiAgICAgKiAgICAgIFIudGFwKHNheVgsIDEwMCk7IC8vPT4gMTAwXG4gICAgICogICAgICAvLy0+ICd4IGlzIDEwMCdcbiAgICAgKi9cbiAgICB2YXIgdGFwID0gX2N1cnJ5MihmdW5jdGlvbiB0YXAoZm4sIHgpIHtcbiAgICAgICAgZm4oeCk7XG4gICAgICAgIHJldHVybiB4O1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogQ2FsbHMgYW4gaW5wdXQgZnVuY3Rpb24gYG5gIHRpbWVzLCByZXR1cm5pbmcgYW4gYXJyYXkgY29udGFpbmluZyB0aGUgcmVzdWx0c1xuICAgICAqIG9mIHRob3NlIGZ1bmN0aW9uIGNhbGxzLlxuICAgICAqXG4gICAgICogYGZuYCBpcyBwYXNzZWQgb25lIGFyZ3VtZW50OiBUaGUgY3VycmVudCB2YWx1ZSBvZiBgbmAsIHdoaWNoIGJlZ2lucyBhdCBgMGBcbiAgICAgKiBhbmQgaXMgZ3JhZHVhbGx5IGluY3JlbWVudGVkIHRvIGBuIC0gMWAuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjIuM1xuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyAoTnVtYmVyIC0+IGEpIC0+IE51bWJlciAtPiBbYV1cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgZnVuY3Rpb24gdG8gaW52b2tlLiBQYXNzZWQgb25lIGFyZ3VtZW50LCB0aGUgY3VycmVudCB2YWx1ZSBvZiBgbmAuXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IG4gQSB2YWx1ZSBiZXR3ZWVuIGAwYCBhbmQgYG4gLSAxYC4gSW5jcmVtZW50cyBhZnRlciBlYWNoIGZ1bmN0aW9uIGNhbGwuXG4gICAgICogQHJldHVybiB7QXJyYXl9IEFuIGFycmF5IGNvbnRhaW5pbmcgdGhlIHJldHVybiB2YWx1ZXMgb2YgYWxsIGNhbGxzIHRvIGBmbmAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi50aW1lcyhSLmlkZW50aXR5LCA1KTsgLy89PiBbMCwgMSwgMiwgMywgNF1cbiAgICAgKi9cbiAgICB2YXIgdGltZXMgPSBfY3VycnkyKGZ1bmN0aW9uIHRpbWVzKGZuLCBuKSB7XG4gICAgICAgIHZhciBsZW4gPSBOdW1iZXIobik7XG4gICAgICAgIHZhciBpZHggPSAwO1xuICAgICAgICB2YXIgbGlzdDtcbiAgICAgICAgaWYgKGxlbiA8IDAgfHwgaXNOYU4obGVuKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ24gbXVzdCBiZSBhIG5vbi1uZWdhdGl2ZSBudW1iZXInKTtcbiAgICAgICAgfVxuICAgICAgICBsaXN0ID0gbmV3IEFycmF5KGxlbik7XG4gICAgICAgIHdoaWxlIChpZHggPCBsZW4pIHtcbiAgICAgICAgICAgIGxpc3RbaWR4XSA9IGZuKGlkeCk7XG4gICAgICAgICAgICBpZHggKz0gMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbGlzdDtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIGFuIG9iamVjdCBpbnRvIGFuIGFycmF5IG9mIGtleSwgdmFsdWUgYXJyYXlzLiBPbmx5IHRoZSBvYmplY3Qnc1xuICAgICAqIG93biBwcm9wZXJ0aWVzIGFyZSB1c2VkLlxuICAgICAqIE5vdGUgdGhhdCB0aGUgb3JkZXIgb2YgdGhlIG91dHB1dCBhcnJheSBpcyBub3QgZ3VhcmFudGVlZCB0byBiZSBjb25zaXN0ZW50XG4gICAgICogYWNyb3NzIGRpZmZlcmVudCBKUyBwbGF0Zm9ybXMuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjQuMFxuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAc2lnIHtTdHJpbmc6ICp9IC0+IFtbU3RyaW5nLCpdXVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmogVGhlIG9iamVjdCB0byBleHRyYWN0IGZyb21cbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gQW4gYXJyYXkgb2Yga2V5LCB2YWx1ZSBhcnJheXMgZnJvbSB0aGUgb2JqZWN0J3Mgb3duIHByb3BlcnRpZXMuXG4gICAgICogQHNlZSBSLmZyb21QYWlyc1xuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIudG9QYWlycyh7YTogMSwgYjogMiwgYzogM30pOyAvLz0+IFtbJ2EnLCAxXSwgWydiJywgMl0sIFsnYycsIDNdXVxuICAgICAqL1xuICAgIHZhciB0b1BhaXJzID0gX2N1cnJ5MShmdW5jdGlvbiB0b1BhaXJzKG9iaikge1xuICAgICAgICB2YXIgcGFpcnMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgcHJvcCBpbiBvYmopIHtcbiAgICAgICAgICAgIGlmIChfaGFzKHByb3AsIG9iaikpIHtcbiAgICAgICAgICAgICAgICBwYWlyc1twYWlycy5sZW5ndGhdID0gW1xuICAgICAgICAgICAgICAgICAgICBwcm9wLFxuICAgICAgICAgICAgICAgICAgICBvYmpbcHJvcF1cbiAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwYWlycztcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIGFuIG9iamVjdCBpbnRvIGFuIGFycmF5IG9mIGtleSwgdmFsdWUgYXJyYXlzLiBUaGUgb2JqZWN0J3Mgb3duXG4gICAgICogcHJvcGVydGllcyBhbmQgcHJvdG90eXBlIHByb3BlcnRpZXMgYXJlIHVzZWQuIE5vdGUgdGhhdCB0aGUgb3JkZXIgb2YgdGhlXG4gICAgICogb3V0cHV0IGFycmF5IGlzIG5vdCBndWFyYW50ZWVkIHRvIGJlIGNvbnNpc3RlbnQgYWNyb3NzIGRpZmZlcmVudCBKU1xuICAgICAqIHBsYXRmb3Jtcy5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuNC4wXG4gICAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgICAqIEBzaWcge1N0cmluZzogKn0gLT4gW1tTdHJpbmcsKl1dXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iaiBUaGUgb2JqZWN0IHRvIGV4dHJhY3QgZnJvbVxuICAgICAqIEByZXR1cm4ge0FycmF5fSBBbiBhcnJheSBvZiBrZXksIHZhbHVlIGFycmF5cyBmcm9tIHRoZSBvYmplY3QncyBvd25cbiAgICAgKiAgICAgICAgIGFuZCBwcm90b3R5cGUgcHJvcGVydGllcy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgRiA9IGZ1bmN0aW9uKCkgeyB0aGlzLnggPSAnWCc7IH07XG4gICAgICogICAgICBGLnByb3RvdHlwZS55ID0gJ1knO1xuICAgICAqICAgICAgdmFyIGYgPSBuZXcgRigpO1xuICAgICAqICAgICAgUi50b1BhaXJzSW4oZik7IC8vPT4gW1sneCcsJ1gnXSwgWyd5JywnWSddXVxuICAgICAqL1xuICAgIHZhciB0b1BhaXJzSW4gPSBfY3VycnkxKGZ1bmN0aW9uIHRvUGFpcnNJbihvYmopIHtcbiAgICAgICAgdmFyIHBhaXJzID0gW107XG4gICAgICAgIGZvciAodmFyIHByb3AgaW4gb2JqKSB7XG4gICAgICAgICAgICBwYWlyc1twYWlycy5sZW5ndGhdID0gW1xuICAgICAgICAgICAgICAgIHByb3AsXG4gICAgICAgICAgICAgICAgb2JqW3Byb3BdXG4gICAgICAgICAgICBdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwYWlycztcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFRyYW5zcG9zZXMgdGhlIHJvd3MgYW5kIGNvbHVtbnMgb2YgYSAyRCBsaXN0LlxuICAgICAqIFdoZW4gcGFzc2VkIGEgbGlzdCBvZiBgbmAgbGlzdHMgb2YgbGVuZ3RoIGB4YCxcbiAgICAgKiByZXR1cm5zIGEgbGlzdCBvZiBgeGAgbGlzdHMgb2YgbGVuZ3RoIGBuYC5cbiAgICAgKlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xOS4wXG4gICAgICogQGNhdGVnb3J5IExpc3RcbiAgICAgKiBAc2lnIFtbYV1dIC0+IFtbYV1dXG4gICAgICogQHBhcmFtIHtBcnJheX0gbGlzdCBBIDJEIGxpc3RcbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gQSAyRCBsaXN0XG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi50cmFuc3Bvc2UoW1sxLCAnYSddLCBbMiwgJ2InXSwgWzMsICdjJ11dKSAvLz0+IFtbMSwgMiwgM10sIFsnYScsICdiJywgJ2MnXV1cbiAgICAgKiAgICAgIFIudHJhbnNwb3NlKFtbMSwgMiwgM10sIFsnYScsICdiJywgJ2MnXV0pIC8vPT4gW1sxLCAnYSddLCBbMiwgJ2InXSwgWzMsICdjJ11dXG4gICAgICpcbiAgICAgKiBJZiBzb21lIG9mIHRoZSByb3dzIGFyZSBzaG9ydGVyIHRoYW4gdGhlIGZvbGxvd2luZyByb3dzLCB0aGVpciBlbGVtZW50cyBhcmUgc2tpcHBlZDpcbiAgICAgKlxuICAgICAqICAgICAgUi50cmFuc3Bvc2UoW1sxMCwgMTFdLCBbMjBdLCBbXSwgWzMwLCAzMSwgMzJdXSkgLy89PiBbWzEwLCAyMCwgMzBdLCBbMTEsIDMxXSwgWzMyXV1cbiAgICAgKi9cbiAgICB2YXIgdHJhbnNwb3NlID0gX2N1cnJ5MShmdW5jdGlvbiB0cmFuc3Bvc2Uob3V0ZXJsaXN0KSB7XG4gICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgICAgICB3aGlsZSAoaSA8IG91dGVybGlzdC5sZW5ndGgpIHtcbiAgICAgICAgICAgIHZhciBpbm5lcmxpc3QgPSBvdXRlcmxpc3RbaV07XG4gICAgICAgICAgICB2YXIgaiA9IDA7XG4gICAgICAgICAgICB3aGlsZSAoaiA8IGlubmVybGlzdC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlc3VsdFtqXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0W2pdID0gW107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJlc3VsdFtqXS5wdXNoKGlubmVybGlzdFtqXSk7XG4gICAgICAgICAgICAgICAgaiArPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaSArPSAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIChzdHJpcHMpIHdoaXRlc3BhY2UgZnJvbSBib3RoIGVuZHMgb2YgdGhlIHN0cmluZy5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuNi4wXG4gICAgICogQGNhdGVnb3J5IFN0cmluZ1xuICAgICAqIEBzaWcgU3RyaW5nIC0+IFN0cmluZ1xuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBzdHIgVGhlIHN0cmluZyB0byB0cmltLlxuICAgICAqIEByZXR1cm4ge1N0cmluZ30gVHJpbW1lZCB2ZXJzaW9uIG9mIGBzdHJgLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIudHJpbSgnICAgeHl6ICAnKTsgLy89PiAneHl6J1xuICAgICAqICAgICAgUi5tYXAoUi50cmltLCBSLnNwbGl0KCcsJywgJ3gsIHksIHonKSk7IC8vPT4gWyd4JywgJ3knLCAneiddXG4gICAgICovXG4gICAgdmFyIHRyaW0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB3cyA9ICdcXHRcXG5cXHgwQlxcZlxcciBcXHhBMFxcdTE2ODBcXHUxODBFXFx1MjAwMFxcdTIwMDFcXHUyMDAyXFx1MjAwMycgKyAnXFx1MjAwNFxcdTIwMDVcXHUyMDA2XFx1MjAwN1xcdTIwMDhcXHUyMDA5XFx1MjAwQVxcdTIwMkZcXHUyMDVGXFx1MzAwMFxcdTIwMjgnICsgJ1xcdTIwMjlcXHVGRUZGJztcbiAgICAgICAgdmFyIHplcm9XaWR0aCA9ICdcXHUyMDBCJztcbiAgICAgICAgdmFyIGhhc1Byb3RvVHJpbSA9IHR5cGVvZiBTdHJpbmcucHJvdG90eXBlLnRyaW0gPT09ICdmdW5jdGlvbic7XG4gICAgICAgIGlmICghaGFzUHJvdG9UcmltIHx8ICh3cy50cmltKCkgfHwgIXplcm9XaWR0aC50cmltKCkpKSB7XG4gICAgICAgICAgICByZXR1cm4gX2N1cnJ5MShmdW5jdGlvbiB0cmltKHN0cikge1xuICAgICAgICAgICAgICAgIHZhciBiZWdpblJ4ID0gbmV3IFJlZ0V4cCgnXlsnICsgd3MgKyAnXVsnICsgd3MgKyAnXSonKTtcbiAgICAgICAgICAgICAgICB2YXIgZW5kUnggPSBuZXcgUmVnRXhwKCdbJyArIHdzICsgJ11bJyArIHdzICsgJ10qJCcpO1xuICAgICAgICAgICAgICAgIHJldHVybiBzdHIucmVwbGFjZShiZWdpblJ4LCAnJykucmVwbGFjZShlbmRSeCwgJycpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gX2N1cnJ5MShmdW5jdGlvbiB0cmltKHN0cikge1xuICAgICAgICAgICAgICAgIHJldHVybiBzdHIudHJpbSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KCk7XG5cbiAgICAvKipcbiAgICAgKiBgdHJ5Q2F0Y2hgIHRha2VzIHR3byBmdW5jdGlvbnMsIGEgYHRyeWVyYCBhbmQgYSBgY2F0Y2hlcmAuIFRoZSByZXR1cm5lZFxuICAgICAqIGZ1bmN0aW9uIGV2YWx1YXRlcyB0aGUgYHRyeWVyYDsgaWYgaXQgZG9lcyBub3QgdGhyb3csIGl0IHNpbXBseSByZXR1cm5zIHRoZVxuICAgICAqIHJlc3VsdC4gSWYgdGhlIGB0cnllcmAgKmRvZXMqIHRocm93LCB0aGUgcmV0dXJuZWQgZnVuY3Rpb24gZXZhbHVhdGVzIHRoZVxuICAgICAqIGBjYXRjaGVyYCBmdW5jdGlvbiBhbmQgcmV0dXJucyBpdHMgcmVzdWx0LiBOb3RlIHRoYXQgZm9yIGVmZmVjdGl2ZVxuICAgICAqIGNvbXBvc2l0aW9uIHdpdGggdGhpcyBmdW5jdGlvbiwgYm90aCB0aGUgYHRyeWVyYCBhbmQgYGNhdGNoZXJgIGZ1bmN0aW9uc1xuICAgICAqIG11c3QgcmV0dXJuIHRoZSBzYW1lIHR5cGUgb2YgcmVzdWx0cy5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMjAuMFxuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICAgICAqIEBzaWcgKC4uLnggLT4gYSkgLT4gKChlLCAuLi54KSAtPiBhKSAtPiAoLi4ueCAtPiBhKVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHRyeWVyIFRoZSBmdW5jdGlvbiB0aGF0IG1heSB0aHJvdy5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYXRjaGVyIFRoZSBmdW5jdGlvbiB0aGF0IHdpbGwgYmUgZXZhbHVhdGVkIGlmIGB0cnllcmAgdGhyb3dzLlxuICAgICAqIEByZXR1cm4ge0Z1bmN0aW9ufSBBIG5ldyBmdW5jdGlvbiB0aGF0IHdpbGwgY2F0Y2ggZXhjZXB0aW9ucyBhbmQgc2VuZCB0aGVuIHRvIHRoZSBjYXRjaGVyLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIudHJ5Q2F0Y2goUi5wcm9wKCd4JyksIFIuRiwge3g6IHRydWV9KTsgLy89PiB0cnVlXG4gICAgICogICAgICBSLnRyeUNhdGNoKFIucHJvcCgneCcpLCBSLkYsIG51bGwpOyAgICAgIC8vPT4gZmFsc2VcbiAgICAgKi9cbiAgICB2YXIgdHJ5Q2F0Y2ggPSBfY3VycnkyKGZ1bmN0aW9uIF90cnlDYXRjaCh0cnllciwgY2F0Y2hlcikge1xuICAgICAgICByZXR1cm4gX2FyaXR5KHRyeWVyLmxlbmd0aCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ5ZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2F0Y2hlci5hcHBseSh0aGlzLCBfY29uY2F0KFtlXSwgYXJndW1lbnRzKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogR2l2ZXMgYSBzaW5nbGUtd29yZCBzdHJpbmcgZGVzY3JpcHRpb24gb2YgdGhlIChuYXRpdmUpIHR5cGUgb2YgYSB2YWx1ZSxcbiAgICAgKiByZXR1cm5pbmcgc3VjaCBhbnN3ZXJzIGFzICdPYmplY3QnLCAnTnVtYmVyJywgJ0FycmF5Jywgb3IgJ051bGwnLiBEb2VzIG5vdFxuICAgICAqIGF0dGVtcHQgdG8gZGlzdGluZ3Vpc2ggdXNlciBPYmplY3QgdHlwZXMgYW55IGZ1cnRoZXIsIHJlcG9ydGluZyB0aGVtIGFsbCBhc1xuICAgICAqICdPYmplY3QnLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC44LjBcbiAgICAgKiBAY2F0ZWdvcnkgVHlwZVxuICAgICAqIEBzaWcgKCogLT4geyp9KSAtPiBTdHJpbmdcbiAgICAgKiBAcGFyYW0geyp9IHZhbCBUaGUgdmFsdWUgdG8gdGVzdFxuICAgICAqIEByZXR1cm4ge1N0cmluZ31cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLnR5cGUoe30pOyAvLz0+IFwiT2JqZWN0XCJcbiAgICAgKiAgICAgIFIudHlwZSgxKTsgLy89PiBcIk51bWJlclwiXG4gICAgICogICAgICBSLnR5cGUoZmFsc2UpOyAvLz0+IFwiQm9vbGVhblwiXG4gICAgICogICAgICBSLnR5cGUoJ3MnKTsgLy89PiBcIlN0cmluZ1wiXG4gICAgICogICAgICBSLnR5cGUobnVsbCk7IC8vPT4gXCJOdWxsXCJcbiAgICAgKiAgICAgIFIudHlwZShbXSk7IC8vPT4gXCJBcnJheVwiXG4gICAgICogICAgICBSLnR5cGUoL1tBLXpdLyk7IC8vPT4gXCJSZWdFeHBcIlxuICAgICAqL1xuICAgIHZhciB0eXBlID0gX2N1cnJ5MShmdW5jdGlvbiB0eXBlKHZhbCkge1xuICAgICAgICByZXR1cm4gdmFsID09PSBudWxsID8gJ051bGwnIDogdmFsID09PSB1bmRlZmluZWQgPyAnVW5kZWZpbmVkJyA6IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWwpLnNsaWNlKDgsIC0xKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFRha2VzIGEgZnVuY3Rpb24gYGZuYCwgd2hpY2ggdGFrZXMgYSBzaW5nbGUgYXJyYXkgYXJndW1lbnQsIGFuZCByZXR1cm5zIGFcbiAgICAgKiBmdW5jdGlvbiB3aGljaDpcbiAgICAgKlxuICAgICAqICAgLSB0YWtlcyBhbnkgbnVtYmVyIG9mIHBvc2l0aW9uYWwgYXJndW1lbnRzO1xuICAgICAqICAgLSBwYXNzZXMgdGhlc2UgYXJndW1lbnRzIHRvIGBmbmAgYXMgYW4gYXJyYXk7IGFuZFxuICAgICAqICAgLSByZXR1cm5zIHRoZSByZXN1bHQuXG4gICAgICpcbiAgICAgKiBJbiBvdGhlciB3b3JkcywgUi51bmFwcGx5IGRlcml2ZXMgYSB2YXJpYWRpYyBmdW5jdGlvbiBmcm9tIGEgZnVuY3Rpb24gd2hpY2hcbiAgICAgKiB0YWtlcyBhbiBhcnJheS4gUi51bmFwcGx5IGlzIHRoZSBpbnZlcnNlIG9mIFIuYXBwbHkuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjguMFxuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICAgICAqIEBzaWcgKFsqLi4uXSAtPiBhKSAtPiAoKi4uLiAtPiBhKVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gICAgICogQHJldHVybiB7RnVuY3Rpb259XG4gICAgICogQHNlZSBSLmFwcGx5XG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi51bmFwcGx5KEpTT04uc3RyaW5naWZ5KSgxLCAyLCAzKTsgLy89PiAnWzEsMiwzXSdcbiAgICAgKi9cbiAgICB2YXIgdW5hcHBseSA9IF9jdXJyeTEoZnVuY3Rpb24gdW5hcHBseShmbikge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIGZuKF9zbGljZShhcmd1bWVudHMpKTtcbiAgICAgICAgfTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFdyYXBzIGEgZnVuY3Rpb24gb2YgYW55IGFyaXR5IChpbmNsdWRpbmcgbnVsbGFyeSkgaW4gYSBmdW5jdGlvbiB0aGF0IGFjY2VwdHNcbiAgICAgKiBleGFjdGx5IDEgcGFyYW1ldGVyLiBBbnkgZXh0cmFuZW91cyBwYXJhbWV0ZXJzIHdpbGwgbm90IGJlIHBhc3NlZCB0byB0aGVcbiAgICAgKiBzdXBwbGllZCBmdW5jdGlvbi5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMi4wXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAgICogQHNpZyAoKiAtPiBiKSAtPiAoYSAtPiBiKVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBmdW5jdGlvbiB0byB3cmFwLlxuICAgICAqIEByZXR1cm4ge0Z1bmN0aW9ufSBBIG5ldyBmdW5jdGlvbiB3cmFwcGluZyBgZm5gLiBUaGUgbmV3IGZ1bmN0aW9uIGlzIGd1YXJhbnRlZWQgdG8gYmUgb2ZcbiAgICAgKiAgICAgICAgIGFyaXR5IDEuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIHRha2VzVHdvQXJncyA9IGZ1bmN0aW9uKGEsIGIpIHtcbiAgICAgKiAgICAgICAgcmV0dXJuIFthLCBiXTtcbiAgICAgKiAgICAgIH07XG4gICAgICogICAgICB0YWtlc1R3b0FyZ3MubGVuZ3RoOyAvLz0+IDJcbiAgICAgKiAgICAgIHRha2VzVHdvQXJncygxLCAyKTsgLy89PiBbMSwgMl1cbiAgICAgKlxuICAgICAqICAgICAgdmFyIHRha2VzT25lQXJnID0gUi51bmFyeSh0YWtlc1R3b0FyZ3MpO1xuICAgICAqICAgICAgdGFrZXNPbmVBcmcubGVuZ3RoOyAvLz0+IDFcbiAgICAgKiAgICAgIC8vIE9ubHkgMSBhcmd1bWVudCBpcyBwYXNzZWQgdG8gdGhlIHdyYXBwZWQgZnVuY3Rpb25cbiAgICAgKiAgICAgIHRha2VzT25lQXJnKDEsIDIpOyAvLz0+IFsxLCB1bmRlZmluZWRdXG4gICAgICovXG4gICAgdmFyIHVuYXJ5ID0gX2N1cnJ5MShmdW5jdGlvbiB1bmFyeShmbikge1xuICAgICAgICByZXR1cm4gbkFyeSgxLCBmbik7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgZnVuY3Rpb24gb2YgYXJpdHkgYG5gIGZyb20gYSAobWFudWFsbHkpIGN1cnJpZWQgZnVuY3Rpb24uXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjE0LjBcbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICAgKiBAc2lnIE51bWJlciAtPiAoYSAtPiBiKSAtPiAoYSAtPiBjKVxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBsZW5ndGggVGhlIGFyaXR5IGZvciB0aGUgcmV0dXJuZWQgZnVuY3Rpb24uXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGZ1bmN0aW9uIHRvIHVuY3VycnkuXG4gICAgICogQHJldHVybiB7RnVuY3Rpb259IEEgbmV3IGZ1bmN0aW9uLlxuICAgICAqIEBzZWUgUi5jdXJyeVxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBhZGRGb3VyID0gYSA9PiBiID0+IGMgPT4gZCA9PiBhICsgYiArIGMgKyBkO1xuICAgICAqXG4gICAgICogICAgICB2YXIgdW5jdXJyaWVkQWRkRm91ciA9IFIudW5jdXJyeU4oNCwgYWRkRm91cik7XG4gICAgICogICAgICB1bmN1cnJpZWRBZGRGb3VyKDEsIDIsIDMsIDQpOyAvLz0+IDEwXG4gICAgICovXG4gICAgdmFyIHVuY3VycnlOID0gX2N1cnJ5MihmdW5jdGlvbiB1bmN1cnJ5TihkZXB0aCwgZm4pIHtcbiAgICAgICAgcmV0dXJuIGN1cnJ5TihkZXB0aCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGN1cnJlbnREZXB0aCA9IDE7XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSBmbjtcbiAgICAgICAgICAgIHZhciBpZHggPSAwO1xuICAgICAgICAgICAgdmFyIGVuZElkeDtcbiAgICAgICAgICAgIHdoaWxlIChjdXJyZW50RGVwdGggPD0gZGVwdGggJiYgdHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgZW5kSWR4ID0gY3VycmVudERlcHRoID09PSBkZXB0aCA/IGFyZ3VtZW50cy5sZW5ndGggOiBpZHggKyB2YWx1ZS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS5hcHBseSh0aGlzLCBfc2xpY2UoYXJndW1lbnRzLCBpZHgsIGVuZElkeCkpO1xuICAgICAgICAgICAgICAgIGN1cnJlbnREZXB0aCArPSAxO1xuICAgICAgICAgICAgICAgIGlkeCA9IGVuZElkeDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBCdWlsZHMgYSBsaXN0IGZyb20gYSBzZWVkIHZhbHVlLiBBY2NlcHRzIGFuIGl0ZXJhdG9yIGZ1bmN0aW9uLCB3aGljaCByZXR1cm5zXG4gICAgICogZWl0aGVyIGZhbHNlIHRvIHN0b3AgaXRlcmF0aW9uIG9yIGFuIGFycmF5IG9mIGxlbmd0aCAyIGNvbnRhaW5pbmcgdGhlIHZhbHVlXG4gICAgICogdG8gYWRkIHRvIHRoZSByZXN1bHRpbmcgbGlzdCBhbmQgdGhlIHNlZWQgdG8gYmUgdXNlZCBpbiB0aGUgbmV4dCBjYWxsIHRvIHRoZVxuICAgICAqIGl0ZXJhdG9yIGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogVGhlIGl0ZXJhdG9yIGZ1bmN0aW9uIHJlY2VpdmVzIG9uZSBhcmd1bWVudDogKihzZWVkKSouXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEwLjBcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgKGEgLT4gW2JdKSAtPiAqIC0+IFtiXVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBpdGVyYXRvciBmdW5jdGlvbi4gcmVjZWl2ZXMgb25lIGFyZ3VtZW50LCBgc2VlZGAsIGFuZCByZXR1cm5zXG4gICAgICogICAgICAgIGVpdGhlciBmYWxzZSB0byBxdWl0IGl0ZXJhdGlvbiBvciBhbiBhcnJheSBvZiBsZW5ndGggdHdvIHRvIHByb2NlZWQuIFRoZSBlbGVtZW50XG4gICAgICogICAgICAgIGF0IGluZGV4IDAgb2YgdGhpcyBhcnJheSB3aWxsIGJlIGFkZGVkIHRvIHRoZSByZXN1bHRpbmcgYXJyYXksIGFuZCB0aGUgZWxlbWVudFxuICAgICAqICAgICAgICBhdCBpbmRleCAxIHdpbGwgYmUgcGFzc2VkIHRvIHRoZSBuZXh0IGNhbGwgdG8gYGZuYC5cbiAgICAgKiBAcGFyYW0geyp9IHNlZWQgVGhlIHNlZWQgdmFsdWUuXG4gICAgICogQHJldHVybiB7QXJyYXl9IFRoZSBmaW5hbCBsaXN0LlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBmID0gbiA9PiBuID4gNTAgPyBmYWxzZSA6IFstbiwgbiArIDEwXTtcbiAgICAgKiAgICAgIFIudW5mb2xkKGYsIDEwKTsgLy89PiBbLTEwLCAtMjAsIC0zMCwgLTQwLCAtNTBdXG4gICAgICovXG4gICAgdmFyIHVuZm9sZCA9IF9jdXJyeTIoZnVuY3Rpb24gdW5mb2xkKGZuLCBzZWVkKSB7XG4gICAgICAgIHZhciBwYWlyID0gZm4oc2VlZCk7XG4gICAgICAgIHZhciByZXN1bHQgPSBbXTtcbiAgICAgICAgd2hpbGUgKHBhaXIgJiYgcGFpci5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJlc3VsdFtyZXN1bHQubGVuZ3RoXSA9IHBhaXJbMF07XG4gICAgICAgICAgICBwYWlyID0gZm4ocGFpclsxXSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBuZXcgbGlzdCBjb250YWluaW5nIG9ubHkgb25lIGNvcHkgb2YgZWFjaCBlbGVtZW50IGluIHRoZSBvcmlnaW5hbFxuICAgICAqIGxpc3QsIGJhc2VkIHVwb24gdGhlIHZhbHVlIHJldHVybmVkIGJ5IGFwcGx5aW5nIHRoZSBzdXBwbGllZCBwcmVkaWNhdGUgdG9cbiAgICAgKiB0d28gbGlzdCBlbGVtZW50cy4gUHJlZmVycyB0aGUgZmlyc3QgaXRlbSBpZiB0d28gaXRlbXMgY29tcGFyZSBlcXVhbCBiYXNlZFxuICAgICAqIG9uIHRoZSBwcmVkaWNhdGUuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjIuMFxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyAoYSwgYSAtPiBCb29sZWFuKSAtPiBbYV0gLT4gW2FdXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gcHJlZCBBIHByZWRpY2F0ZSB1c2VkIHRvIHRlc3Qgd2hldGhlciB0d28gaXRlbXMgYXJlIGVxdWFsLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGxpc3QgVGhlIGFycmF5IHRvIGNvbnNpZGVyLlxuICAgICAqIEByZXR1cm4ge0FycmF5fSBUaGUgbGlzdCBvZiB1bmlxdWUgaXRlbXMuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIHN0ckVxID0gUi5lcUJ5KFN0cmluZyk7XG4gICAgICogICAgICBSLnVuaXFXaXRoKHN0ckVxKShbMSwgJzEnLCAyLCAxXSk7IC8vPT4gWzEsIDJdXG4gICAgICogICAgICBSLnVuaXFXaXRoKHN0ckVxKShbe30sIHt9XSk7ICAgICAgIC8vPT4gW3t9XVxuICAgICAqICAgICAgUi51bmlxV2l0aChzdHJFcSkoWzEsICcxJywgMV0pOyAgICAvLz0+IFsxXVxuICAgICAqICAgICAgUi51bmlxV2l0aChzdHJFcSkoWycxJywgMSwgMV0pOyAgICAvLz0+IFsnMSddXG4gICAgICovXG4gICAgdmFyIHVuaXFXaXRoID0gX2N1cnJ5MihmdW5jdGlvbiB1bmlxV2l0aChwcmVkLCBsaXN0KSB7XG4gICAgICAgIHZhciBpZHggPSAwO1xuICAgICAgICB2YXIgbGVuID0gbGlzdC5sZW5ndGg7XG4gICAgICAgIHZhciByZXN1bHQgPSBbXTtcbiAgICAgICAgdmFyIGl0ZW07XG4gICAgICAgIHdoaWxlIChpZHggPCBsZW4pIHtcbiAgICAgICAgICAgIGl0ZW0gPSBsaXN0W2lkeF07XG4gICAgICAgICAgICBpZiAoIV9jb250YWluc1dpdGgocHJlZCwgaXRlbSwgcmVzdWx0KSkge1xuICAgICAgICAgICAgICAgIHJlc3VsdFtyZXN1bHQubGVuZ3RoXSA9IGl0ZW07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZHggKz0gMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogVGVzdHMgdGhlIGZpbmFsIGFyZ3VtZW50IGJ5IHBhc3NpbmcgaXQgdG8gdGhlIGdpdmVuIHByZWRpY2F0ZSBmdW5jdGlvbi4gSWZcbiAgICAgKiB0aGUgcHJlZGljYXRlIGlzIG5vdCBzYXRpc2ZpZWQsIHRoZSBmdW5jdGlvbiB3aWxsIHJldHVybiB0aGUgcmVzdWx0IG9mXG4gICAgICogY2FsbGluZyB0aGUgYHdoZW5GYWxzZUZuYCBmdW5jdGlvbiB3aXRoIHRoZSBzYW1lIGFyZ3VtZW50LiBJZiB0aGUgcHJlZGljYXRlXG4gICAgICogaXMgc2F0aXNmaWVkLCB0aGUgYXJndW1lbnQgaXMgcmV0dXJuZWQgYXMgaXMuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjE4LjBcbiAgICAgKiBAY2F0ZWdvcnkgTG9naWNcbiAgICAgKiBAc2lnIChhIC0+IEJvb2xlYW4pIC0+IChhIC0+IGEpIC0+IGEgLT4gYVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHByZWQgICAgICAgIEEgcHJlZGljYXRlIGZ1bmN0aW9uXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gd2hlbkZhbHNlRm4gQSBmdW5jdGlvbiB0byBpbnZva2Ugd2hlbiB0aGUgYHByZWRgIGV2YWx1YXRlc1xuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvIGEgZmFsc3kgdmFsdWUuXG4gICAgICogQHBhcmFtIHsqfSAgICAgICAgeCAgICAgICAgICAgQW4gb2JqZWN0IHRvIHRlc3Qgd2l0aCB0aGUgYHByZWRgIGZ1bmN0aW9uIGFuZFxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhc3MgdG8gYHdoZW5GYWxzZUZuYCBpZiBuZWNlc3NhcnkuXG4gICAgICogQHJldHVybiB7Kn0gRWl0aGVyIGB4YCBvciB0aGUgcmVzdWx0IG9mIGFwcGx5aW5nIGB4YCB0byBgd2hlbkZhbHNlRm5gLlxuICAgICAqIEBzZWUgUi5pZkVsc2UsIFIud2hlblxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIC8vIGNvZXJjZUFycmF5IDo6IChhfFthXSkgLT4gW2FdXG4gICAgICogICAgICB2YXIgY29lcmNlQXJyYXkgPSBSLnVubGVzcyhSLmlzQXJyYXlMaWtlLCBSLm9mKTtcbiAgICAgKiAgICAgIGNvZXJjZUFycmF5KFsxLCAyLCAzXSk7IC8vPT4gWzEsIDIsIDNdXG4gICAgICogICAgICBjb2VyY2VBcnJheSgxKTsgICAgICAgICAvLz0+IFsxXVxuICAgICAqL1xuICAgIHZhciB1bmxlc3MgPSBfY3VycnkzKGZ1bmN0aW9uIHVubGVzcyhwcmVkLCB3aGVuRmFsc2VGbiwgeCkge1xuICAgICAgICByZXR1cm4gcHJlZCh4KSA/IHggOiB3aGVuRmFsc2VGbih4KTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFRha2VzIGEgcHJlZGljYXRlLCBhIHRyYW5zZm9ybWF0aW9uIGZ1bmN0aW9uLCBhbmQgYW4gaW5pdGlhbCB2YWx1ZSxcbiAgICAgKiBhbmQgcmV0dXJucyBhIHZhbHVlIG9mIHRoZSBzYW1lIHR5cGUgYXMgdGhlIGluaXRpYWwgdmFsdWUuXG4gICAgICogSXQgZG9lcyBzbyBieSBhcHBseWluZyB0aGUgdHJhbnNmb3JtYXRpb24gdW50aWwgdGhlIHByZWRpY2F0ZSBpcyBzYXRpc2ZpZWQsXG4gICAgICogYXQgd2hpY2ggcG9pbnQgaXQgcmV0dXJucyB0aGUgc2F0aXNmYWN0b3J5IHZhbHVlLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4yMC4wXG4gICAgICogQGNhdGVnb3J5IExvZ2ljXG4gICAgICogQHNpZyAoYSAtPiBCb29sZWFuKSAtPiAoYSAtPiBhKSAtPiBhIC0+IGFcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcmVkIEEgcHJlZGljYXRlIGZ1bmN0aW9uXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGl0ZXJhdG9yIGZ1bmN0aW9uXG4gICAgICogQHBhcmFtIHsqfSBpbml0IEluaXRpYWwgdmFsdWVcbiAgICAgKiBAcmV0dXJuIHsqfSBGaW5hbCB2YWx1ZSB0aGF0IHNhdGlzZmllcyBwcmVkaWNhdGVcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLnVudGlsKFIuZ3QoUi5fXywgMTAwKSwgUi5tdWx0aXBseSgyKSkoMSkgLy8gPT4gMTI4XG4gICAgICovXG4gICAgdmFyIHVudGlsID0gX2N1cnJ5MyhmdW5jdGlvbiB1bnRpbChwcmVkLCBmbiwgaW5pdCkge1xuICAgICAgICB2YXIgdmFsID0gaW5pdDtcbiAgICAgICAgd2hpbGUgKCFwcmVkKHZhbCkpIHtcbiAgICAgICAgICAgIHZhbCA9IGZuKHZhbCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbDtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBuZXcgY29weSBvZiB0aGUgYXJyYXkgd2l0aCB0aGUgZWxlbWVudCBhdCB0aGUgcHJvdmlkZWQgaW5kZXhcbiAgICAgKiByZXBsYWNlZCB3aXRoIHRoZSBnaXZlbiB2YWx1ZS5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMTQuMFxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyBOdW1iZXIgLT4gYSAtPiBbYV0gLT4gW2FdXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGlkeCBUaGUgaW5kZXggdG8gdXBkYXRlLlxuICAgICAqIEBwYXJhbSB7Kn0geCBUaGUgdmFsdWUgdG8gZXhpc3QgYXQgdGhlIGdpdmVuIGluZGV4IG9mIHRoZSByZXR1cm5lZCBhcnJheS5cbiAgICAgKiBAcGFyYW0ge0FycmF5fEFyZ3VtZW50c30gbGlzdCBUaGUgc291cmNlIGFycmF5LWxpa2Ugb2JqZWN0IHRvIGJlIHVwZGF0ZWQuXG4gICAgICogQHJldHVybiB7QXJyYXl9IEEgY29weSBvZiBgbGlzdGAgd2l0aCB0aGUgdmFsdWUgYXQgaW5kZXggYGlkeGAgcmVwbGFjZWQgd2l0aCBgeGAuXG4gICAgICogQHNlZSBSLmFkanVzdFxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIudXBkYXRlKDEsIDExLCBbMCwgMSwgMl0pOyAgICAgLy89PiBbMCwgMTEsIDJdXG4gICAgICogICAgICBSLnVwZGF0ZSgxKSgxMSkoWzAsIDEsIDJdKTsgICAgIC8vPT4gWzAsIDExLCAyXVxuICAgICAqL1xuICAgIHZhciB1cGRhdGUgPSBfY3VycnkzKGZ1bmN0aW9uIHVwZGF0ZShpZHgsIHgsIGxpc3QpIHtcbiAgICAgICAgcmV0dXJuIGFkanVzdChhbHdheXMoeCksIGlkeCwgbGlzdCk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBBY2NlcHRzIGEgZnVuY3Rpb24gYGZuYCBhbmQgYSBsaXN0IG9mIHRyYW5zZm9ybWVyIGZ1bmN0aW9ucyBhbmQgcmV0dXJucyBhXG4gICAgICogbmV3IGN1cnJpZWQgZnVuY3Rpb24uIFdoZW4gdGhlIG5ldyBmdW5jdGlvbiBpcyBpbnZva2VkLCBpdCBjYWxscyB0aGVcbiAgICAgKiBmdW5jdGlvbiBgZm5gIHdpdGggcGFyYW1ldGVycyBjb25zaXN0aW5nIG9mIHRoZSByZXN1bHQgb2YgY2FsbGluZyBlYWNoXG4gICAgICogc3VwcGxpZWQgaGFuZGxlciBvbiBzdWNjZXNzaXZlIGFyZ3VtZW50cyB0byB0aGUgbmV3IGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogSWYgbW9yZSBhcmd1bWVudHMgYXJlIHBhc3NlZCB0byB0aGUgcmV0dXJuZWQgZnVuY3Rpb24gdGhhbiB0cmFuc2Zvcm1lclxuICAgICAqIGZ1bmN0aW9ucywgdGhvc2UgYXJndW1lbnRzIGFyZSBwYXNzZWQgZGlyZWN0bHkgdG8gYGZuYCBhcyBhZGRpdGlvbmFsXG4gICAgICogcGFyYW1ldGVycy4gSWYgeW91IGV4cGVjdCBhZGRpdGlvbmFsIGFyZ3VtZW50cyB0aGF0IGRvbid0IG5lZWQgdG8gYmVcbiAgICAgKiB0cmFuc2Zvcm1lZCwgYWx0aG91Z2ggeW91IGNhbiBpZ25vcmUgdGhlbSwgaXQncyBiZXN0IHRvIHBhc3MgYW4gaWRlbnRpdHlcbiAgICAgKiBmdW5jdGlvbiBzbyB0aGF0IHRoZSBuZXcgZnVuY3Rpb24gcmVwb3J0cyB0aGUgY29ycmVjdCBhcml0eS5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4wXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAgICogQHNpZyAoeDEgLT4geDIgLT4gLi4uIC0+IHopIC0+IFsoYSAtPiB4MSksIChiIC0+IHgyKSwgLi4uXSAtPiAoYSAtPiBiIC0+IC4uLiAtPiB6KVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBmdW5jdGlvbiB0byB3cmFwLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IHRyYW5zZm9ybWVycyBBIGxpc3Qgb2YgdHJhbnNmb3JtZXIgZnVuY3Rpb25zXG4gICAgICogQHJldHVybiB7RnVuY3Rpb259IFRoZSB3cmFwcGVkIGZ1bmN0aW9uLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIudXNlV2l0aChNYXRoLnBvdywgW1IuaWRlbnRpdHksIFIuaWRlbnRpdHldKSgzLCA0KTsgLy89PiA4MVxuICAgICAqICAgICAgUi51c2VXaXRoKE1hdGgucG93LCBbUi5pZGVudGl0eSwgUi5pZGVudGl0eV0pKDMpKDQpOyAvLz0+IDgxXG4gICAgICogICAgICBSLnVzZVdpdGgoTWF0aC5wb3csIFtSLmRlYywgUi5pbmNdKSgzLCA0KTsgLy89PiAzMlxuICAgICAqICAgICAgUi51c2VXaXRoKE1hdGgucG93LCBbUi5kZWMsIFIuaW5jXSkoMykoNCk7IC8vPT4gMzJcbiAgICAgKi9cbiAgICB2YXIgdXNlV2l0aCA9IF9jdXJyeTIoZnVuY3Rpb24gdXNlV2l0aChmbiwgdHJhbnNmb3JtZXJzKSB7XG4gICAgICAgIHJldHVybiBjdXJyeU4odHJhbnNmb3JtZXJzLmxlbmd0aCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSBbXTtcbiAgICAgICAgICAgIHZhciBpZHggPSAwO1xuICAgICAgICAgICAgd2hpbGUgKGlkeCA8IHRyYW5zZm9ybWVycy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBhcmdzLnB1c2godHJhbnNmb3JtZXJzW2lkeF0uY2FsbCh0aGlzLCBhcmd1bWVudHNbaWR4XSkpO1xuICAgICAgICAgICAgICAgIGlkeCArPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZuLmFwcGx5KHRoaXMsIGFyZ3MuY29uY2F0KF9zbGljZShhcmd1bWVudHMsIHRyYW5zZm9ybWVycy5sZW5ndGgpKSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIGxpc3Qgb2YgYWxsIHRoZSBlbnVtZXJhYmxlIG93biBwcm9wZXJ0aWVzIG9mIHRoZSBzdXBwbGllZCBvYmplY3QuXG4gICAgICogTm90ZSB0aGF0IHRoZSBvcmRlciBvZiB0aGUgb3V0cHV0IGFycmF5IGlzIG5vdCBndWFyYW50ZWVkIGFjcm9zcyBkaWZmZXJlbnRcbiAgICAgKiBKUyBwbGF0Zm9ybXMuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAc2lnIHtrOiB2fSAtPiBbdl1cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqIFRoZSBvYmplY3QgdG8gZXh0cmFjdCB2YWx1ZXMgZnJvbVxuICAgICAqIEByZXR1cm4ge0FycmF5fSBBbiBhcnJheSBvZiB0aGUgdmFsdWVzIG9mIHRoZSBvYmplY3QncyBvd24gcHJvcGVydGllcy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLnZhbHVlcyh7YTogMSwgYjogMiwgYzogM30pOyAvLz0+IFsxLCAyLCAzXVxuICAgICAqL1xuICAgIHZhciB2YWx1ZXMgPSBfY3VycnkxKGZ1bmN0aW9uIHZhbHVlcyhvYmopIHtcbiAgICAgICAgdmFyIHByb3BzID0ga2V5cyhvYmopO1xuICAgICAgICB2YXIgbGVuID0gcHJvcHMubGVuZ3RoO1xuICAgICAgICB2YXIgdmFscyA9IFtdO1xuICAgICAgICB2YXIgaWR4ID0gMDtcbiAgICAgICAgd2hpbGUgKGlkeCA8IGxlbikge1xuICAgICAgICAgICAgdmFsc1tpZHhdID0gb2JqW3Byb3BzW2lkeF1dO1xuICAgICAgICAgICAgaWR4ICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbHM7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgbGlzdCBvZiBhbGwgdGhlIHByb3BlcnRpZXMsIGluY2x1ZGluZyBwcm90b3R5cGUgcHJvcGVydGllcywgb2YgdGhlXG4gICAgICogc3VwcGxpZWQgb2JqZWN0LlxuICAgICAqIE5vdGUgdGhhdCB0aGUgb3JkZXIgb2YgdGhlIG91dHB1dCBhcnJheSBpcyBub3QgZ3VhcmFudGVlZCB0byBiZSBjb25zaXN0ZW50XG4gICAgICogYWNyb3NzIGRpZmZlcmVudCBKUyBwbGF0Zm9ybXMuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjIuMFxuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAc2lnIHtrOiB2fSAtPiBbdl1cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqIFRoZSBvYmplY3QgdG8gZXh0cmFjdCB2YWx1ZXMgZnJvbVxuICAgICAqIEByZXR1cm4ge0FycmF5fSBBbiBhcnJheSBvZiB0aGUgdmFsdWVzIG9mIHRoZSBvYmplY3QncyBvd24gYW5kIHByb3RvdHlwZSBwcm9wZXJ0aWVzLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBGID0gZnVuY3Rpb24oKSB7IHRoaXMueCA9ICdYJzsgfTtcbiAgICAgKiAgICAgIEYucHJvdG90eXBlLnkgPSAnWSc7XG4gICAgICogICAgICB2YXIgZiA9IG5ldyBGKCk7XG4gICAgICogICAgICBSLnZhbHVlc0luKGYpOyAvLz0+IFsnWCcsICdZJ11cbiAgICAgKi9cbiAgICB2YXIgdmFsdWVzSW4gPSBfY3VycnkxKGZ1bmN0aW9uIHZhbHVlc0luKG9iaikge1xuICAgICAgICB2YXIgcHJvcDtcbiAgICAgICAgdmFyIHZzID0gW107XG4gICAgICAgIGZvciAocHJvcCBpbiBvYmopIHtcbiAgICAgICAgICAgIHZzW3ZzLmxlbmd0aF0gPSBvYmpbcHJvcF07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZzO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIFwidmlld1wiIG9mIHRoZSBnaXZlbiBkYXRhIHN0cnVjdHVyZSwgZGV0ZXJtaW5lZCBieSB0aGUgZ2l2ZW4gbGVucy5cbiAgICAgKiBUaGUgbGVucydzIGZvY3VzIGRldGVybWluZXMgd2hpY2ggcG9ydGlvbiBvZiB0aGUgZGF0YSBzdHJ1Y3R1cmUgaXMgdmlzaWJsZS5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMTYuMFxuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAdHlwZWRlZm4gTGVucyBzIGEgPSBGdW5jdG9yIGYgPT4gKGEgLT4gZiBhKSAtPiBzIC0+IGYgc1xuICAgICAqIEBzaWcgTGVucyBzIGEgLT4gcyAtPiBhXG4gICAgICogQHBhcmFtIHtMZW5zfSBsZW5zXG4gICAgICogQHBhcmFtIHsqfSB4XG4gICAgICogQHJldHVybiB7Kn1cbiAgICAgKiBAc2VlIFIucHJvcCwgUi5sZW5zSW5kZXgsIFIubGVuc1Byb3BcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgeExlbnMgPSBSLmxlbnNQcm9wKCd4Jyk7XG4gICAgICpcbiAgICAgKiAgICAgIFIudmlldyh4TGVucywge3g6IDEsIHk6IDJ9KTsgIC8vPT4gMVxuICAgICAqICAgICAgUi52aWV3KHhMZW5zLCB7eDogNCwgeTogMn0pOyAgLy89PiA0XG4gICAgICovXG4gICAgLy8gYENvbnN0YCBpcyBhIGZ1bmN0b3IgdGhhdCBlZmZlY3RpdmVseSBpZ25vcmVzIHRoZSBmdW5jdGlvbiBnaXZlbiB0byBgbWFwYC5cbiAgICAvLyBVc2luZyBgQ29uc3RgIGVmZmVjdGl2ZWx5IGlnbm9yZXMgdGhlIHNldHRlciBmdW5jdGlvbiBvZiB0aGUgYGxlbnNgLFxuICAgIC8vIGxlYXZpbmcgdGhlIHZhbHVlIHJldHVybmVkIGJ5IHRoZSBnZXR0ZXIgZnVuY3Rpb24gdW5tb2RpZmllZC5cbiAgICB2YXIgdmlldyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gYENvbnN0YCBpcyBhIGZ1bmN0b3IgdGhhdCBlZmZlY3RpdmVseSBpZ25vcmVzIHRoZSBmdW5jdGlvbiBnaXZlbiB0byBgbWFwYC5cbiAgICAgICAgdmFyIENvbnN0ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IHgsXG4gICAgICAgICAgICAgICAgbWFwOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBfY3VycnkyKGZ1bmN0aW9uIHZpZXcobGVucywgeCkge1xuICAgICAgICAgICAgLy8gVXNpbmcgYENvbnN0YCBlZmZlY3RpdmVseSBpZ25vcmVzIHRoZSBzZXR0ZXIgZnVuY3Rpb24gb2YgdGhlIGBsZW5zYCxcbiAgICAgICAgICAgIC8vIGxlYXZpbmcgdGhlIHZhbHVlIHJldHVybmVkIGJ5IHRoZSBnZXR0ZXIgZnVuY3Rpb24gdW5tb2RpZmllZC5cbiAgICAgICAgICAgIHJldHVybiBsZW5zKENvbnN0KSh4KS52YWx1ZTtcbiAgICAgICAgfSk7XG4gICAgfSgpO1xuXG4gICAgLyoqXG4gICAgICogVGVzdHMgdGhlIGZpbmFsIGFyZ3VtZW50IGJ5IHBhc3NpbmcgaXQgdG8gdGhlIGdpdmVuIHByZWRpY2F0ZSBmdW5jdGlvbi4gSWZcbiAgICAgKiB0aGUgcHJlZGljYXRlIGlzIHNhdGlzZmllZCwgdGhlIGZ1bmN0aW9uIHdpbGwgcmV0dXJuIHRoZSByZXN1bHQgb2YgY2FsbGluZ1xuICAgICAqIHRoZSBgd2hlblRydWVGbmAgZnVuY3Rpb24gd2l0aCB0aGUgc2FtZSBhcmd1bWVudC4gSWYgdGhlIHByZWRpY2F0ZSBpcyBub3RcbiAgICAgKiBzYXRpc2ZpZWQsIHRoZSBhcmd1bWVudCBpcyByZXR1cm5lZCBhcyBpcy5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMTguMFxuICAgICAqIEBjYXRlZ29yeSBMb2dpY1xuICAgICAqIEBzaWcgKGEgLT4gQm9vbGVhbikgLT4gKGEgLT4gYSkgLT4gYSAtPiBhXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gcHJlZCAgICAgICBBIHByZWRpY2F0ZSBmdW5jdGlvblxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHdoZW5UcnVlRm4gQSBmdW5jdGlvbiB0byBpbnZva2Ugd2hlbiB0aGUgYGNvbmRpdGlvbmBcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2YWx1YXRlcyB0byBhIHRydXRoeSB2YWx1ZS5cbiAgICAgKiBAcGFyYW0geyp9ICAgICAgICB4ICAgICAgICAgIEFuIG9iamVjdCB0byB0ZXN0IHdpdGggdGhlIGBwcmVkYCBmdW5jdGlvbiBhbmRcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhc3MgdG8gYHdoZW5UcnVlRm5gIGlmIG5lY2Vzc2FyeS5cbiAgICAgKiBAcmV0dXJuIHsqfSBFaXRoZXIgYHhgIG9yIHRoZSByZXN1bHQgb2YgYXBwbHlpbmcgYHhgIHRvIGB3aGVuVHJ1ZUZuYC5cbiAgICAgKiBAc2VlIFIuaWZFbHNlLCBSLnVubGVzc1xuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIC8vIHRydW5jYXRlIDo6IFN0cmluZyAtPiBTdHJpbmdcbiAgICAgKiAgICAgIHZhciB0cnVuY2F0ZSA9IFIud2hlbihcbiAgICAgKiAgICAgICAgUi5wcm9wU2F0aXNmaWVzKFIuZ3QoUi5fXywgMTApLCAnbGVuZ3RoJyksXG4gICAgICogICAgICAgIFIucGlwZShSLnRha2UoMTApLCBSLmFwcGVuZCgn4oCmJyksIFIuam9pbignJykpXG4gICAgICogICAgICApO1xuICAgICAqICAgICAgdHJ1bmNhdGUoJzEyMzQ1Jyk7ICAgICAgICAgLy89PiAnMTIzNDUnXG4gICAgICogICAgICB0cnVuY2F0ZSgnMDEyMzQ1Njc4OUFCQycpOyAvLz0+ICcwMTIzNDU2Nzg54oCmJ1xuICAgICAqL1xuICAgIHZhciB3aGVuID0gX2N1cnJ5MyhmdW5jdGlvbiB3aGVuKHByZWQsIHdoZW5UcnVlRm4sIHgpIHtcbiAgICAgICAgcmV0dXJuIHByZWQoeCkgPyB3aGVuVHJ1ZUZuKHgpIDogeDtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFRha2VzIGEgc3BlYyBvYmplY3QgYW5kIGEgdGVzdCBvYmplY3Q7IHJldHVybnMgdHJ1ZSBpZiB0aGUgdGVzdCBzYXRpc2ZpZXNcbiAgICAgKiB0aGUgc3BlYy4gRWFjaCBvZiB0aGUgc3BlYydzIG93biBwcm9wZXJ0aWVzIG11c3QgYmUgYSBwcmVkaWNhdGUgZnVuY3Rpb24uXG4gICAgICogRWFjaCBwcmVkaWNhdGUgaXMgYXBwbGllZCB0byB0aGUgdmFsdWUgb2YgdGhlIGNvcnJlc3BvbmRpbmcgcHJvcGVydHkgb2YgdGhlXG4gICAgICogdGVzdCBvYmplY3QuIGB3aGVyZWAgcmV0dXJucyB0cnVlIGlmIGFsbCB0aGUgcHJlZGljYXRlcyByZXR1cm4gdHJ1ZSwgZmFsc2VcbiAgICAgKiBvdGhlcndpc2UuXG4gICAgICpcbiAgICAgKiBgd2hlcmVgIGlzIHdlbGwgc3VpdGVkIHRvIGRlY2xhcmF0aXZlbHkgZXhwcmVzc2luZyBjb25zdHJhaW50cyBmb3Igb3RoZXJcbiAgICAgKiBmdW5jdGlvbnMgc3VjaCBhcyBgZmlsdGVyYCBhbmQgYGZpbmRgLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjFcbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0XG4gICAgICogQHNpZyB7U3RyaW5nOiAoKiAtPiBCb29sZWFuKX0gLT4ge1N0cmluZzogKn0gLT4gQm9vbGVhblxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBzcGVjXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHRlc3RPYmpcbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIC8vIHByZWQgOjogT2JqZWN0IC0+IEJvb2xlYW5cbiAgICAgKiAgICAgIHZhciBwcmVkID0gUi53aGVyZSh7XG4gICAgICogICAgICAgIGE6IFIuZXF1YWxzKCdmb28nKSxcbiAgICAgKiAgICAgICAgYjogUi5jb21wbGVtZW50KFIuZXF1YWxzKCdiYXInKSksXG4gICAgICogICAgICAgIHg6IFIuZ3QoXywgMTApLFxuICAgICAqICAgICAgICB5OiBSLmx0KF8sIDIwKVxuICAgICAqICAgICAgfSk7XG4gICAgICpcbiAgICAgKiAgICAgIHByZWQoe2E6ICdmb28nLCBiOiAneHh4JywgeDogMTEsIHk6IDE5fSk7IC8vPT4gdHJ1ZVxuICAgICAqICAgICAgcHJlZCh7YTogJ3h4eCcsIGI6ICd4eHgnLCB4OiAxMSwgeTogMTl9KTsgLy89PiBmYWxzZVxuICAgICAqICAgICAgcHJlZCh7YTogJ2ZvbycsIGI6ICdiYXInLCB4OiAxMSwgeTogMTl9KTsgLy89PiBmYWxzZVxuICAgICAqICAgICAgcHJlZCh7YTogJ2ZvbycsIGI6ICd4eHgnLCB4OiAxMCwgeTogMTl9KTsgLy89PiBmYWxzZVxuICAgICAqICAgICAgcHJlZCh7YTogJ2ZvbycsIGI6ICd4eHgnLCB4OiAxMSwgeTogMjB9KTsgLy89PiBmYWxzZVxuICAgICAqL1xuICAgIHZhciB3aGVyZSA9IF9jdXJyeTIoZnVuY3Rpb24gd2hlcmUoc3BlYywgdGVzdE9iaikge1xuICAgICAgICBmb3IgKHZhciBwcm9wIGluIHNwZWMpIHtcbiAgICAgICAgICAgIGlmIChfaGFzKHByb3AsIHNwZWMpICYmICFzcGVjW3Byb3BdKHRlc3RPYmpbcHJvcF0pKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogV3JhcCBhIGZ1bmN0aW9uIGluc2lkZSBhbm90aGVyIHRvIGFsbG93IHlvdSB0byBtYWtlIGFkanVzdG1lbnRzIHRvIHRoZVxuICAgICAqIHBhcmFtZXRlcnMsIG9yIGRvIG90aGVyIHByb2Nlc3NpbmcgZWl0aGVyIGJlZm9yZSB0aGUgaW50ZXJuYWwgZnVuY3Rpb24gaXNcbiAgICAgKiBjYWxsZWQgb3Igd2l0aCBpdHMgcmVzdWx0cy5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4wXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAgICogQHNpZyAoYS4uLiAtPiBiKSAtPiAoKGEuLi4gLT4gYikgLT4gYS4uLiAtPiBjKSAtPiAoYS4uLiAtPiBjKVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBmdW5jdGlvbiB0byB3cmFwLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHdyYXBwZXIgVGhlIHdyYXBwZXIgZnVuY3Rpb24uXG4gICAgICogQHJldHVybiB7RnVuY3Rpb259IFRoZSB3cmFwcGVkIGZ1bmN0aW9uLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBncmVldCA9IG5hbWUgPT4gJ0hlbGxvICcgKyBuYW1lO1xuICAgICAqXG4gICAgICogICAgICB2YXIgc2hvdXRlZEdyZWV0ID0gUi53cmFwKGdyZWV0LCAoZ3IsIG5hbWUpID0+IGdyKG5hbWUpLnRvVXBwZXJDYXNlKCkpO1xuICAgICAqXG4gICAgICogICAgICBzaG91dGVkR3JlZXQoXCJLYXRoeVwiKTsgLy89PiBcIkhFTExPIEtBVEhZXCJcbiAgICAgKlxuICAgICAqICAgICAgdmFyIHNob3J0ZW5lZEdyZWV0ID0gUi53cmFwKGdyZWV0LCBmdW5jdGlvbihnciwgbmFtZSkge1xuICAgICAqICAgICAgICByZXR1cm4gZ3IobmFtZS5zdWJzdHJpbmcoMCwgMykpO1xuICAgICAqICAgICAgfSk7XG4gICAgICogICAgICBzaG9ydGVuZWRHcmVldChcIlJvYmVydFwiKTsgLy89PiBcIkhlbGxvIFJvYlwiXG4gICAgICovXG4gICAgdmFyIHdyYXAgPSBfY3VycnkyKGZ1bmN0aW9uIHdyYXAoZm4sIHdyYXBwZXIpIHtcbiAgICAgICAgcmV0dXJuIGN1cnJ5Tihmbi5sZW5ndGgsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB3cmFwcGVyLmFwcGx5KHRoaXMsIF9jb25jYXQoW2ZuXSwgYXJndW1lbnRzKSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBsaXN0IG91dCBvZiB0aGUgdHdvIHN1cHBsaWVkIGJ5IGNyZWF0aW5nIGVhY2ggcG9zc2libGUgcGFpclxuICAgICAqIGZyb20gdGhlIGxpc3RzLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgW2FdIC0+IFtiXSAtPiBbW2EsYl1dXG4gICAgICogQHBhcmFtIHtBcnJheX0gYXMgVGhlIGZpcnN0IGxpc3QuXG4gICAgICogQHBhcmFtIHtBcnJheX0gYnMgVGhlIHNlY29uZCBsaXN0LlxuICAgICAqIEByZXR1cm4ge0FycmF5fSBUaGUgbGlzdCBtYWRlIGJ5IGNvbWJpbmluZyBlYWNoIHBvc3NpYmxlIHBhaXIgZnJvbVxuICAgICAqICAgICAgICAgYGFzYCBhbmQgYGJzYCBpbnRvIHBhaXJzIChgW2EsIGJdYCkuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi54cHJvZChbMSwgMl0sIFsnYScsICdiJ10pOyAvLz0+IFtbMSwgJ2EnXSwgWzEsICdiJ10sIFsyLCAnYSddLCBbMiwgJ2InXV1cbiAgICAgKi9cbiAgICAvLyA9IHhwcm9kV2l0aChwcmVwZW5kKTsgKHRha2VzIGFib3V0IDMgdGltZXMgYXMgbG9uZy4uLilcbiAgICB2YXIgeHByb2QgPSBfY3VycnkyKGZ1bmN0aW9uIHhwcm9kKGEsIGIpIHtcbiAgICAgICAgLy8gPSB4cHJvZFdpdGgocHJlcGVuZCk7ICh0YWtlcyBhYm91dCAzIHRpbWVzIGFzIGxvbmcuLi4pXG4gICAgICAgIHZhciBpZHggPSAwO1xuICAgICAgICB2YXIgaWxlbiA9IGEubGVuZ3RoO1xuICAgICAgICB2YXIgajtcbiAgICAgICAgdmFyIGpsZW4gPSBiLmxlbmd0aDtcbiAgICAgICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgICAgICB3aGlsZSAoaWR4IDwgaWxlbikge1xuICAgICAgICAgICAgaiA9IDA7XG4gICAgICAgICAgICB3aGlsZSAoaiA8IGpsZW4pIHtcbiAgICAgICAgICAgICAgICByZXN1bHRbcmVzdWx0Lmxlbmd0aF0gPSBbXG4gICAgICAgICAgICAgICAgICAgIGFbaWR4XSxcbiAgICAgICAgICAgICAgICAgICAgYltqXVxuICAgICAgICAgICAgICAgIF07XG4gICAgICAgICAgICAgICAgaiArPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWR4ICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgbGlzdCBvdXQgb2YgdGhlIHR3byBzdXBwbGllZCBieSBwYWlyaW5nIHVwIGVxdWFsbHktcG9zaXRpb25lZFxuICAgICAqIGl0ZW1zIGZyb20gYm90aCBsaXN0cy4gVGhlIHJldHVybmVkIGxpc3QgaXMgdHJ1bmNhdGVkIHRvIHRoZSBsZW5ndGggb2YgdGhlXG4gICAgICogc2hvcnRlciBvZiB0aGUgdHdvIGlucHV0IGxpc3RzLlxuICAgICAqIE5vdGU6IGB6aXBgIGlzIGVxdWl2YWxlbnQgdG8gYHppcFdpdGgoZnVuY3Rpb24oYSwgYikgeyByZXR1cm4gW2EsIGJdIH0pYC5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4wXG4gICAgICogQGNhdGVnb3J5IExpc3RcbiAgICAgKiBAc2lnIFthXSAtPiBbYl0gLT4gW1thLGJdXVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGxpc3QxIFRoZSBmaXJzdCBhcnJheSB0byBjb25zaWRlci5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBsaXN0MiBUaGUgc2Vjb25kIGFycmF5IHRvIGNvbnNpZGVyLlxuICAgICAqIEByZXR1cm4ge0FycmF5fSBUaGUgbGlzdCBtYWRlIGJ5IHBhaXJpbmcgdXAgc2FtZS1pbmRleGVkIGVsZW1lbnRzIG9mIGBsaXN0MWAgYW5kIGBsaXN0MmAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi56aXAoWzEsIDIsIDNdLCBbJ2EnLCAnYicsICdjJ10pOyAvLz0+IFtbMSwgJ2EnXSwgWzIsICdiJ10sIFszLCAnYyddXVxuICAgICAqL1xuICAgIHZhciB6aXAgPSBfY3VycnkyKGZ1bmN0aW9uIHppcChhLCBiKSB7XG4gICAgICAgIHZhciBydiA9IFtdO1xuICAgICAgICB2YXIgaWR4ID0gMDtcbiAgICAgICAgdmFyIGxlbiA9IE1hdGgubWluKGEubGVuZ3RoLCBiLmxlbmd0aCk7XG4gICAgICAgIHdoaWxlIChpZHggPCBsZW4pIHtcbiAgICAgICAgICAgIHJ2W2lkeF0gPSBbXG4gICAgICAgICAgICAgICAgYVtpZHhdLFxuICAgICAgICAgICAgICAgIGJbaWR4XVxuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGlkeCArPSAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBydjtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgb2JqZWN0IG91dCBvZiBhIGxpc3Qgb2Yga2V5cyBhbmQgYSBsaXN0IG9mIHZhbHVlcy5cbiAgICAgKiBLZXkvdmFsdWUgcGFpcmluZyBpcyB0cnVuY2F0ZWQgdG8gdGhlIGxlbmd0aCBvZiB0aGUgc2hvcnRlciBvZiB0aGUgdHdvIGxpc3RzLlxuICAgICAqIE5vdGU6IGB6aXBPYmpgIGlzIGVxdWl2YWxlbnQgdG8gYHBpcGUoemlwV2l0aChwYWlyKSwgZnJvbVBhaXJzKWAuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjMuMFxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyBbU3RyaW5nXSAtPiBbKl0gLT4ge1N0cmluZzogKn1cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBrZXlzIFRoZSBhcnJheSB0aGF0IHdpbGwgYmUgcHJvcGVydGllcyBvbiB0aGUgb3V0cHV0IG9iamVjdC5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSB2YWx1ZXMgVGhlIGxpc3Qgb2YgdmFsdWVzIG9uIHRoZSBvdXRwdXQgb2JqZWN0LlxuICAgICAqIEByZXR1cm4ge09iamVjdH0gVGhlIG9iamVjdCBtYWRlIGJ5IHBhaXJpbmcgdXAgc2FtZS1pbmRleGVkIGVsZW1lbnRzIG9mIGBrZXlzYCBhbmQgYHZhbHVlc2AuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi56aXBPYmooWydhJywgJ2InLCAnYyddLCBbMSwgMiwgM10pOyAvLz0+IHthOiAxLCBiOiAyLCBjOiAzfVxuICAgICAqL1xuICAgIHZhciB6aXBPYmogPSBfY3VycnkyKGZ1bmN0aW9uIHppcE9iaihrZXlzLCB2YWx1ZXMpIHtcbiAgICAgICAgdmFyIGlkeCA9IDA7XG4gICAgICAgIHZhciBsZW4gPSBNYXRoLm1pbihrZXlzLmxlbmd0aCwgdmFsdWVzLmxlbmd0aCk7XG4gICAgICAgIHZhciBvdXQgPSB7fTtcbiAgICAgICAgd2hpbGUgKGlkeCA8IGxlbikge1xuICAgICAgICAgICAgb3V0W2tleXNbaWR4XV0gPSB2YWx1ZXNbaWR4XTtcbiAgICAgICAgICAgIGlkeCArPSAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IGxpc3Qgb3V0IG9mIHRoZSB0d28gc3VwcGxpZWQgYnkgYXBwbHlpbmcgdGhlIGZ1bmN0aW9uIHRvIGVhY2hcbiAgICAgKiBlcXVhbGx5LXBvc2l0aW9uZWQgcGFpciBpbiB0aGUgbGlzdHMuIFRoZSByZXR1cm5lZCBsaXN0IGlzIHRydW5jYXRlZCB0byB0aGVcbiAgICAgKiBsZW5ndGggb2YgdGhlIHNob3J0ZXIgb2YgdGhlIHR3byBpbnB1dCBsaXN0cy5cbiAgICAgKlxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyAoYSxiIC0+IGMpIC0+IFthXSAtPiBbYl0gLT4gW2NdXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGZ1bmN0aW9uIHVzZWQgdG8gY29tYmluZSB0aGUgdHdvIGVsZW1lbnRzIGludG8gb25lIHZhbHVlLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGxpc3QxIFRoZSBmaXJzdCBhcnJheSB0byBjb25zaWRlci5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBsaXN0MiBUaGUgc2Vjb25kIGFycmF5IHRvIGNvbnNpZGVyLlxuICAgICAqIEByZXR1cm4ge0FycmF5fSBUaGUgbGlzdCBtYWRlIGJ5IGNvbWJpbmluZyBzYW1lLWluZGV4ZWQgZWxlbWVudHMgb2YgYGxpc3QxYCBhbmQgYGxpc3QyYFxuICAgICAqICAgICAgICAgdXNpbmcgYGZuYC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgZiA9ICh4LCB5KSA9PiB7XG4gICAgICogICAgICAgIC8vIC4uLlxuICAgICAqICAgICAgfTtcbiAgICAgKiAgICAgIFIuemlwV2l0aChmLCBbMSwgMiwgM10sIFsnYScsICdiJywgJ2MnXSk7XG4gICAgICogICAgICAvLz0+IFtmKDEsICdhJyksIGYoMiwgJ2InKSwgZigzLCAnYycpXVxuICAgICAqL1xuICAgIHZhciB6aXBXaXRoID0gX2N1cnJ5MyhmdW5jdGlvbiB6aXBXaXRoKGZuLCBhLCBiKSB7XG4gICAgICAgIHZhciBydiA9IFtdO1xuICAgICAgICB2YXIgaWR4ID0gMDtcbiAgICAgICAgdmFyIGxlbiA9IE1hdGgubWluKGEubGVuZ3RoLCBiLmxlbmd0aCk7XG4gICAgICAgIHdoaWxlIChpZHggPCBsZW4pIHtcbiAgICAgICAgICAgIHJ2W2lkeF0gPSBmbihhW2lkeF0sIGJbaWR4XSk7XG4gICAgICAgICAgICBpZHggKz0gMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcnY7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBBIGZ1bmN0aW9uIHRoYXQgYWx3YXlzIHJldHVybnMgYGZhbHNlYC4gQW55IHBhc3NlZCBpbiBwYXJhbWV0ZXJzIGFyZSBpZ25vcmVkLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC45LjBcbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICAgKiBAc2lnICogLT4gQm9vbGVhblxuICAgICAqIEBwYXJhbSB7Kn1cbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgICAqIEBzZWUgUi5hbHdheXMsIFIuVFxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIuRigpOyAvLz0+IGZhbHNlXG4gICAgICovXG4gICAgdmFyIEYgPSBhbHdheXMoZmFsc2UpO1xuXG4gICAgLyoqXG4gICAgICogQSBmdW5jdGlvbiB0aGF0IGFsd2F5cyByZXR1cm5zIGB0cnVlYC4gQW55IHBhc3NlZCBpbiBwYXJhbWV0ZXJzIGFyZSBpZ25vcmVkLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC45LjBcbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICAgKiBAc2lnICogLT4gQm9vbGVhblxuICAgICAqIEBwYXJhbSB7Kn1cbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgICAqIEBzZWUgUi5hbHdheXMsIFIuRlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIuVCgpOyAvLz0+IHRydWVcbiAgICAgKi9cbiAgICB2YXIgVCA9IGFsd2F5cyh0cnVlKTtcblxuICAgIC8qKlxuICAgICAqIENvcGllcyBhbiBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGJlIGNvcGllZFxuICAgICAqIEBwYXJhbSB7QXJyYXl9IHJlZkZyb20gQXJyYXkgY29udGFpbmluZyB0aGUgc291cmNlIHJlZmVyZW5jZXNcbiAgICAgKiBAcGFyYW0ge0FycmF5fSByZWZUbyBBcnJheSBjb250YWluaW5nIHRoZSBjb3BpZWQgc291cmNlIHJlZmVyZW5jZXNcbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IGRlZXAgV2hldGhlciBvciBub3QgdG8gcGVyZm9ybSBkZWVwIGNsb25pbmcuXG4gICAgICogQHJldHVybiB7Kn0gVGhlIGNvcGllZCB2YWx1ZS5cbiAgICAgKi9cbiAgICB2YXIgX2Nsb25lID0gZnVuY3Rpb24gX2Nsb25lKHZhbHVlLCByZWZGcm9tLCByZWZUbywgZGVlcCkge1xuICAgICAgICB2YXIgY29weSA9IGZ1bmN0aW9uIGNvcHkoY29waWVkVmFsdWUpIHtcbiAgICAgICAgICAgIHZhciBsZW4gPSByZWZGcm9tLmxlbmd0aDtcbiAgICAgICAgICAgIHZhciBpZHggPSAwO1xuICAgICAgICAgICAgd2hpbGUgKGlkeCA8IGxlbikge1xuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gcmVmRnJvbVtpZHhdKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZWZUb1tpZHhdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZHggKz0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlZkZyb21baWR4ICsgMV0gPSB2YWx1ZTtcbiAgICAgICAgICAgIHJlZlRvW2lkeCArIDFdID0gY29waWVkVmFsdWU7XG4gICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gdmFsdWUpIHtcbiAgICAgICAgICAgICAgICBjb3BpZWRWYWx1ZVtrZXldID0gZGVlcCA/IF9jbG9uZSh2YWx1ZVtrZXldLCByZWZGcm9tLCByZWZUbywgdHJ1ZSkgOiB2YWx1ZVtrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNvcGllZFZhbHVlO1xuICAgICAgICB9O1xuICAgICAgICBzd2l0Y2ggKHR5cGUodmFsdWUpKSB7XG4gICAgICAgIGNhc2UgJ09iamVjdCc6XG4gICAgICAgICAgICByZXR1cm4gY29weSh7fSk7XG4gICAgICAgIGNhc2UgJ0FycmF5JzpcbiAgICAgICAgICAgIHJldHVybiBjb3B5KFtdKTtcbiAgICAgICAgY2FzZSAnRGF0ZSc6XG4gICAgICAgICAgICByZXR1cm4gbmV3IERhdGUodmFsdWUudmFsdWVPZigpKTtcbiAgICAgICAgY2FzZSAnUmVnRXhwJzpcbiAgICAgICAgICAgIHJldHVybiBfY2xvbmVSZWdFeHAodmFsdWUpO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHZhciBfY3JlYXRlUGFydGlhbEFwcGxpY2F0b3IgPSBmdW5jdGlvbiBfY3JlYXRlUGFydGlhbEFwcGxpY2F0b3IoY29uY2F0KSB7XG4gICAgICAgIHJldHVybiBfY3VycnkyKGZ1bmN0aW9uIChmbiwgYXJncykge1xuICAgICAgICAgICAgcmV0dXJuIF9hcml0eShNYXRoLm1heCgwLCBmbi5sZW5ndGggLSBhcmdzLmxlbmd0aCksIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZm4uYXBwbHkodGhpcywgY29uY2F0KGFyZ3MsIGFyZ3VtZW50cykpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICB2YXIgX2Ryb3BMYXN0ID0gZnVuY3Rpb24gZHJvcExhc3QobiwgeHMpIHtcbiAgICAgICAgcmV0dXJuIHRha2UobiA8IHhzLmxlbmd0aCA/IHhzLmxlbmd0aCAtIG4gOiAwLCB4cyk7XG4gICAgfTtcblxuICAgIC8vIFZhbHVlcyBvZiBvdGhlciB0eXBlcyBhcmUgb25seSBlcXVhbCBpZiBpZGVudGljYWwuXG4gICAgdmFyIF9lcXVhbHMgPSBmdW5jdGlvbiBfZXF1YWxzKGEsIGIsIHN0YWNrQSwgc3RhY2tCKSB7XG4gICAgICAgIGlmIChpZGVudGljYWwoYSwgYikpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlKGEpICE9PSB0eXBlKGIpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGEgPT0gbnVsbCB8fCBiID09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIGEuZXF1YWxzID09PSAnZnVuY3Rpb24nIHx8IHR5cGVvZiBiLmVxdWFscyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiBhLmVxdWFscyA9PT0gJ2Z1bmN0aW9uJyAmJiBhLmVxdWFscyhiKSAmJiB0eXBlb2YgYi5lcXVhbHMgPT09ICdmdW5jdGlvbicgJiYgYi5lcXVhbHMoYSk7XG4gICAgICAgIH1cbiAgICAgICAgc3dpdGNoICh0eXBlKGEpKSB7XG4gICAgICAgIGNhc2UgJ0FyZ3VtZW50cyc6XG4gICAgICAgIGNhc2UgJ0FycmF5JzpcbiAgICAgICAgY2FzZSAnT2JqZWN0JzpcbiAgICAgICAgICAgIGlmICh0eXBlb2YgYS5jb25zdHJ1Y3RvciA9PT0gJ2Z1bmN0aW9uJyAmJiBfZnVuY3Rpb25OYW1lKGEuY29uc3RydWN0b3IpID09PSAnUHJvbWlzZScpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYSA9PT0gYjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdCb29sZWFuJzpcbiAgICAgICAgY2FzZSAnTnVtYmVyJzpcbiAgICAgICAgY2FzZSAnU3RyaW5nJzpcbiAgICAgICAgICAgIGlmICghKHR5cGVvZiBhID09PSB0eXBlb2YgYiAmJiBpZGVudGljYWwoYS52YWx1ZU9mKCksIGIudmFsdWVPZigpKSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnRGF0ZSc6XG4gICAgICAgICAgICBpZiAoIWlkZW50aWNhbChhLnZhbHVlT2YoKSwgYi52YWx1ZU9mKCkpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ0Vycm9yJzpcbiAgICAgICAgICAgIHJldHVybiBhLm5hbWUgPT09IGIubmFtZSAmJiBhLm1lc3NhZ2UgPT09IGIubWVzc2FnZTtcbiAgICAgICAgY2FzZSAnUmVnRXhwJzpcbiAgICAgICAgICAgIGlmICghKGEuc291cmNlID09PSBiLnNvdXJjZSAmJiBhLmdsb2JhbCA9PT0gYi5nbG9iYWwgJiYgYS5pZ25vcmVDYXNlID09PSBiLmlnbm9yZUNhc2UgJiYgYS5tdWx0aWxpbmUgPT09IGIubXVsdGlsaW5lICYmIGEuc3RpY2t5ID09PSBiLnN0aWNreSAmJiBhLnVuaWNvZGUgPT09IGIudW5pY29kZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnTWFwJzpcbiAgICAgICAgY2FzZSAnU2V0JzpcbiAgICAgICAgICAgIGlmICghX2VxdWFscyhfYXJyYXlGcm9tSXRlcmF0b3IoYS5lbnRyaWVzKCkpLCBfYXJyYXlGcm9tSXRlcmF0b3IoYi5lbnRyaWVzKCkpLCBzdGFja0EsIHN0YWNrQikpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnSW50OEFycmF5JzpcbiAgICAgICAgY2FzZSAnVWludDhBcnJheSc6XG4gICAgICAgIGNhc2UgJ1VpbnQ4Q2xhbXBlZEFycmF5JzpcbiAgICAgICAgY2FzZSAnSW50MTZBcnJheSc6XG4gICAgICAgIGNhc2UgJ1VpbnQxNkFycmF5JzpcbiAgICAgICAgY2FzZSAnSW50MzJBcnJheSc6XG4gICAgICAgIGNhc2UgJ1VpbnQzMkFycmF5JzpcbiAgICAgICAgY2FzZSAnRmxvYXQzMkFycmF5JzpcbiAgICAgICAgY2FzZSAnRmxvYXQ2NEFycmF5JzpcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdBcnJheUJ1ZmZlcic6XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIC8vIFZhbHVlcyBvZiBvdGhlciB0eXBlcyBhcmUgb25seSBlcXVhbCBpZiBpZGVudGljYWwuXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGtleXNBID0ga2V5cyhhKTtcbiAgICAgICAgaWYgKGtleXNBLmxlbmd0aCAhPT0ga2V5cyhiKS5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgaWR4ID0gc3RhY2tBLmxlbmd0aCAtIDE7XG4gICAgICAgIHdoaWxlIChpZHggPj0gMCkge1xuICAgICAgICAgICAgaWYgKHN0YWNrQVtpZHhdID09PSBhKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0YWNrQltpZHhdID09PSBiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWR4IC09IDE7XG4gICAgICAgIH1cbiAgICAgICAgc3RhY2tBLnB1c2goYSk7XG4gICAgICAgIHN0YWNrQi5wdXNoKGIpO1xuICAgICAgICBpZHggPSBrZXlzQS5sZW5ndGggLSAxO1xuICAgICAgICB3aGlsZSAoaWR4ID49IDApIHtcbiAgICAgICAgICAgIHZhciBrZXkgPSBrZXlzQVtpZHhdO1xuICAgICAgICAgICAgaWYgKCEoX2hhcyhrZXksIGIpICYmIF9lcXVhbHMoYltrZXldLCBhW2tleV0sIHN0YWNrQSwgc3RhY2tCKSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZHggLT0gMTtcbiAgICAgICAgfVxuICAgICAgICBzdGFja0EucG9wKCk7XG4gICAgICAgIHN0YWNrQi5wb3AoKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIGBfbWFrZUZsYXRgIGlzIGEgaGVscGVyIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIG9uZS1sZXZlbCBvciBmdWxseSByZWN1cnNpdmVcbiAgICAgKiBmdW5jdGlvbiBiYXNlZCBvbiB0aGUgZmxhZyBwYXNzZWQgaW4uXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHZhciBfbWFrZUZsYXQgPSBmdW5jdGlvbiBfbWFrZUZsYXQocmVjdXJzaXZlKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBmbGF0dChsaXN0KSB7XG4gICAgICAgICAgICB2YXIgdmFsdWUsIGpsZW4sIGo7XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gW107XG4gICAgICAgICAgICB2YXIgaWR4ID0gMDtcbiAgICAgICAgICAgIHZhciBpbGVuID0gbGlzdC5sZW5ndGg7XG4gICAgICAgICAgICB3aGlsZSAoaWR4IDwgaWxlbikge1xuICAgICAgICAgICAgICAgIGlmIChpc0FycmF5TGlrZShsaXN0W2lkeF0pKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gcmVjdXJzaXZlID8gZmxhdHQobGlzdFtpZHhdKSA6IGxpc3RbaWR4XTtcbiAgICAgICAgICAgICAgICAgICAgaiA9IDA7XG4gICAgICAgICAgICAgICAgICAgIGpsZW4gPSB2YWx1ZS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChqIDwgamxlbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0W3Jlc3VsdC5sZW5ndGhdID0gdmFsdWVbal07XG4gICAgICAgICAgICAgICAgICAgICAgICBqICs9IDE7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHRbcmVzdWx0Lmxlbmd0aF0gPSBsaXN0W2lkeF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlkeCArPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfTtcbiAgICB9O1xuXG4gICAgdmFyIF9yZWR1Y2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIF9hcnJheVJlZHVjZSh4ZiwgYWNjLCBsaXN0KSB7XG4gICAgICAgICAgICB2YXIgaWR4ID0gMDtcbiAgICAgICAgICAgIHZhciBsZW4gPSBsaXN0Lmxlbmd0aDtcbiAgICAgICAgICAgIHdoaWxlIChpZHggPCBsZW4pIHtcbiAgICAgICAgICAgICAgICBhY2MgPSB4ZlsnQEB0cmFuc2R1Y2VyL3N0ZXAnXShhY2MsIGxpc3RbaWR4XSk7XG4gICAgICAgICAgICAgICAgaWYgKGFjYyAmJiBhY2NbJ0BAdHJhbnNkdWNlci9yZWR1Y2VkJ10pIHtcbiAgICAgICAgICAgICAgICAgICAgYWNjID0gYWNjWydAQHRyYW5zZHVjZXIvdmFsdWUnXTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlkeCArPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHhmWydAQHRyYW5zZHVjZXIvcmVzdWx0J10oYWNjKTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBfaXRlcmFibGVSZWR1Y2UoeGYsIGFjYywgaXRlcikge1xuICAgICAgICAgICAgdmFyIHN0ZXAgPSBpdGVyLm5leHQoKTtcbiAgICAgICAgICAgIHdoaWxlICghc3RlcC5kb25lKSB7XG4gICAgICAgICAgICAgICAgYWNjID0geGZbJ0BAdHJhbnNkdWNlci9zdGVwJ10oYWNjLCBzdGVwLnZhbHVlKTtcbiAgICAgICAgICAgICAgICBpZiAoYWNjICYmIGFjY1snQEB0cmFuc2R1Y2VyL3JlZHVjZWQnXSkge1xuICAgICAgICAgICAgICAgICAgICBhY2MgPSBhY2NbJ0BAdHJhbnNkdWNlci92YWx1ZSddO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc3RlcCA9IGl0ZXIubmV4dCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHhmWydAQHRyYW5zZHVjZXIvcmVzdWx0J10oYWNjKTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBfbWV0aG9kUmVkdWNlKHhmLCBhY2MsIG9iaikge1xuICAgICAgICAgICAgcmV0dXJuIHhmWydAQHRyYW5zZHVjZXIvcmVzdWx0J10ob2JqLnJlZHVjZShiaW5kKHhmWydAQHRyYW5zZHVjZXIvc3RlcCddLCB4ZiksIGFjYykpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBzeW1JdGVyYXRvciA9IHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnID8gU3ltYm9sLml0ZXJhdG9yIDogJ0BAaXRlcmF0b3InO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gX3JlZHVjZShmbiwgYWNjLCBsaXN0KSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGZuID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgZm4gPSBfeHdyYXAoZm4pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlzQXJyYXlMaWtlKGxpc3QpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9hcnJheVJlZHVjZShmbiwgYWNjLCBsaXN0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2YgbGlzdC5yZWR1Y2UgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gX21ldGhvZFJlZHVjZShmbiwgYWNjLCBsaXN0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChsaXN0W3N5bUl0ZXJhdG9yXSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9pdGVyYWJsZVJlZHVjZShmbiwgYWNjLCBsaXN0W3N5bUl0ZXJhdG9yXSgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2YgbGlzdC5uZXh0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9pdGVyYWJsZVJlZHVjZShmbiwgYWNjLCBsaXN0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ3JlZHVjZTogbGlzdCBtdXN0IGJlIGFycmF5IG9yIGl0ZXJhYmxlJyk7XG4gICAgICAgIH07XG4gICAgfSgpO1xuXG4gICAgdmFyIF9zdGVwQ2F0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3N0ZXBDYXRBcnJheSA9IHtcbiAgICAgICAgICAgICdAQHRyYW5zZHVjZXIvaW5pdCc6IEFycmF5LFxuICAgICAgICAgICAgJ0BAdHJhbnNkdWNlci9zdGVwJzogZnVuY3Rpb24gKHhzLCB4KSB7XG4gICAgICAgICAgICAgICAgeHMucHVzaCh4KTtcbiAgICAgICAgICAgICAgICByZXR1cm4geHM7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ0BAdHJhbnNkdWNlci9yZXN1bHQnOiBfaWRlbnRpdHlcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIF9zdGVwQ2F0U3RyaW5nID0ge1xuICAgICAgICAgICAgJ0BAdHJhbnNkdWNlci9pbml0JzogU3RyaW5nLFxuICAgICAgICAgICAgJ0BAdHJhbnNkdWNlci9zdGVwJzogZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYSArIGI7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ0BAdHJhbnNkdWNlci9yZXN1bHQnOiBfaWRlbnRpdHlcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIF9zdGVwQ2F0T2JqZWN0ID0ge1xuICAgICAgICAgICAgJ0BAdHJhbnNkdWNlci9pbml0JzogT2JqZWN0LFxuICAgICAgICAgICAgJ0BAdHJhbnNkdWNlci9zdGVwJzogZnVuY3Rpb24gKHJlc3VsdCwgaW5wdXQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gX2Fzc2lnbihyZXN1bHQsIGlzQXJyYXlMaWtlKGlucHV0KSA/IG9iak9mKGlucHV0WzBdLCBpbnB1dFsxXSkgOiBpbnB1dCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ0BAdHJhbnNkdWNlci9yZXN1bHQnOiBfaWRlbnRpdHlcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIF9zdGVwQ2F0KG9iaikge1xuICAgICAgICAgICAgaWYgKF9pc1RyYW5zZm9ybWVyKG9iaikpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JqO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGlzQXJyYXlMaWtlKG9iaikpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gX3N0ZXBDYXRBcnJheTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb2JqID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHJldHVybiBfc3RlcENhdFN0cmluZztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb2JqID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgIHJldHVybiBfc3RlcENhdE9iamVjdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ2Fubm90IGNyZWF0ZSB0cmFuc2Zvcm1lciBmb3IgJyArIG9iaik7XG4gICAgICAgIH07XG4gICAgfSgpO1xuXG4gICAgdmFyIF94ZHJvcExhc3RXaGlsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gWERyb3BMYXN0V2hpbGUoZm4sIHhmKSB7XG4gICAgICAgICAgICB0aGlzLmYgPSBmbjtcbiAgICAgICAgICAgIHRoaXMucmV0YWluZWQgPSBbXTtcbiAgICAgICAgICAgIHRoaXMueGYgPSB4ZjtcbiAgICAgICAgfVxuICAgICAgICBYRHJvcExhc3RXaGlsZS5wcm90b3R5cGVbJ0BAdHJhbnNkdWNlci9pbml0J10gPSBfeGZCYXNlLmluaXQ7XG4gICAgICAgIFhEcm9wTGFzdFdoaWxlLnByb3RvdHlwZVsnQEB0cmFuc2R1Y2VyL3Jlc3VsdCddID0gZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgdGhpcy5yZXRhaW5lZCA9IG51bGw7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy54ZlsnQEB0cmFuc2R1Y2VyL3Jlc3VsdCddKHJlc3VsdCk7XG4gICAgICAgIH07XG4gICAgICAgIFhEcm9wTGFzdFdoaWxlLnByb3RvdHlwZVsnQEB0cmFuc2R1Y2VyL3N0ZXAnXSA9IGZ1bmN0aW9uIChyZXN1bHQsIGlucHV0KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5mKGlucHV0KSA/IHRoaXMucmV0YWluKHJlc3VsdCwgaW5wdXQpIDogdGhpcy5mbHVzaChyZXN1bHQsIGlucHV0KTtcbiAgICAgICAgfTtcbiAgICAgICAgWERyb3BMYXN0V2hpbGUucHJvdG90eXBlLmZsdXNoID0gZnVuY3Rpb24gKHJlc3VsdCwgaW5wdXQpIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IF9yZWR1Y2UodGhpcy54ZlsnQEB0cmFuc2R1Y2VyL3N0ZXAnXSwgcmVzdWx0LCB0aGlzLnJldGFpbmVkKTtcbiAgICAgICAgICAgIHRoaXMucmV0YWluZWQgPSBbXTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnhmWydAQHRyYW5zZHVjZXIvc3RlcCddKHJlc3VsdCwgaW5wdXQpO1xuICAgICAgICB9O1xuICAgICAgICBYRHJvcExhc3RXaGlsZS5wcm90b3R5cGUucmV0YWluID0gZnVuY3Rpb24gKHJlc3VsdCwgaW5wdXQpIHtcbiAgICAgICAgICAgIHRoaXMucmV0YWluZWQucHVzaChpbnB1dCk7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gX2N1cnJ5MihmdW5jdGlvbiBfeGRyb3BMYXN0V2hpbGUoZm4sIHhmKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFhEcm9wTGFzdFdoaWxlKGZuLCB4Zik7XG4gICAgICAgIH0pO1xuICAgIH0oKTtcblxuICAgIHZhciBfeGdyb3VwQnkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZ1bmN0aW9uIFhHcm91cEJ5KGYsIHhmKSB7XG4gICAgICAgICAgICB0aGlzLnhmID0geGY7XG4gICAgICAgICAgICB0aGlzLmYgPSBmO1xuICAgICAgICAgICAgdGhpcy5pbnB1dHMgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBYR3JvdXBCeS5wcm90b3R5cGVbJ0BAdHJhbnNkdWNlci9pbml0J10gPSBfeGZCYXNlLmluaXQ7XG4gICAgICAgIFhHcm91cEJ5LnByb3RvdHlwZVsnQEB0cmFuc2R1Y2VyL3Jlc3VsdCddID0gZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgdmFyIGtleTtcbiAgICAgICAgICAgIGZvciAoa2V5IGluIHRoaXMuaW5wdXRzKSB7XG4gICAgICAgICAgICAgICAgaWYgKF9oYXMoa2V5LCB0aGlzLmlucHV0cykpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy54ZlsnQEB0cmFuc2R1Y2VyL3N0ZXAnXShyZXN1bHQsIHRoaXMuaW5wdXRzW2tleV0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0WydAQHRyYW5zZHVjZXIvcmVkdWNlZCddKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSByZXN1bHRbJ0BAdHJhbnNkdWNlci92YWx1ZSddO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmlucHV0cyA9IG51bGw7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy54ZlsnQEB0cmFuc2R1Y2VyL3Jlc3VsdCddKHJlc3VsdCk7XG4gICAgICAgIH07XG4gICAgICAgIFhHcm91cEJ5LnByb3RvdHlwZVsnQEB0cmFuc2R1Y2VyL3N0ZXAnXSA9IGZ1bmN0aW9uIChyZXN1bHQsIGlucHV0KSB7XG4gICAgICAgICAgICB2YXIga2V5ID0gdGhpcy5mKGlucHV0KTtcbiAgICAgICAgICAgIHRoaXMuaW5wdXRzW2tleV0gPSB0aGlzLmlucHV0c1trZXldIHx8IFtcbiAgICAgICAgICAgICAgICBrZXksXG4gICAgICAgICAgICAgICAgW11cbiAgICAgICAgICAgIF07XG4gICAgICAgICAgICB0aGlzLmlucHV0c1trZXldWzFdID0gYXBwZW5kKGlucHV0LCB0aGlzLmlucHV0c1trZXldWzFdKTtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBfY3VycnkyKGZ1bmN0aW9uIF94Z3JvdXBCeShmLCB4Zikge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBYR3JvdXBCeShmLCB4Zik7XG4gICAgICAgIH0pO1xuICAgIH0oKTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgbGlzdCBpdGVyYXRpb24gZnVuY3Rpb24gZnJvbSBhbiBleGlzdGluZyBvbmUgYnkgYWRkaW5nIHR3byBuZXdcbiAgICAgKiBwYXJhbWV0ZXJzIHRvIGl0cyBjYWxsYmFjayBmdW5jdGlvbjogdGhlIGN1cnJlbnQgaW5kZXgsIGFuZCB0aGUgZW50aXJlIGxpc3QuXG4gICAgICpcbiAgICAgKiBUaGlzIHdvdWxkIHR1cm4sIGZvciBpbnN0YW5jZSwgUmFtZGEncyBzaW1wbGUgYG1hcGAgZnVuY3Rpb24gaW50byBvbmUgdGhhdFxuICAgICAqIG1vcmUgY2xvc2VseSByZXNlbWJsZXMgYEFycmF5LnByb3RvdHlwZS5tYXBgLiBOb3RlIHRoYXQgdGhpcyB3aWxsIG9ubHkgd29ya1xuICAgICAqIGZvciBmdW5jdGlvbnMgaW4gd2hpY2ggdGhlIGl0ZXJhdGlvbiBjYWxsYmFjayBmdW5jdGlvbiBpcyB0aGUgZmlyc3RcbiAgICAgKiBwYXJhbWV0ZXIsIGFuZCB3aGVyZSB0aGUgbGlzdCBpcyB0aGUgbGFzdCBwYXJhbWV0ZXIuIChUaGlzIGxhdHRlciBtaWdodCBiZVxuICAgICAqIHVuaW1wb3J0YW50IGlmIHRoZSBsaXN0IHBhcmFtZXRlciBpcyBub3QgdXNlZC4pXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjE1LjBcbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgKChhIC4uLiAtPiBiKSAuLi4gLT4gW2FdIC0+ICopIC0+IChhIC4uLiwgSW50LCBbYV0gLT4gYikgLi4uIC0+IFthXSAtPiAqKVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIEEgbGlzdCBpdGVyYXRpb24gZnVuY3Rpb24gdGhhdCBkb2VzIG5vdCBwYXNzIGluZGV4IG9yIGxpc3QgdG8gaXRzIGNhbGxiYWNrXG4gICAgICogQHJldHVybiB7RnVuY3Rpb259IEFuIGFsdGVyZWQgbGlzdCBpdGVyYXRpb24gZnVuY3Rpb24gdGhhdCBwYXNzZXMgKGl0ZW0sIGluZGV4LCBsaXN0KSB0byBpdHMgY2FsbGJhY2tcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgbWFwSW5kZXhlZCA9IFIuYWRkSW5kZXgoUi5tYXApO1xuICAgICAqICAgICAgbWFwSW5kZXhlZCgodmFsLCBpZHgpID0+IGlkeCArICctJyArIHZhbCwgWydmJywgJ28nLCAnbycsICdiJywgJ2EnLCAnciddKTtcbiAgICAgKiAgICAgIC8vPT4gWycwLWYnLCAnMS1vJywgJzItbycsICczLWInLCAnNC1hJywgJzUtciddXG4gICAgICovXG4gICAgdmFyIGFkZEluZGV4ID0gX2N1cnJ5MShmdW5jdGlvbiBhZGRJbmRleChmbikge1xuICAgICAgICByZXR1cm4gY3VycnlOKGZuLmxlbmd0aCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGlkeCA9IDA7XG4gICAgICAgICAgICB2YXIgb3JpZ0ZuID0gYXJndW1lbnRzWzBdO1xuICAgICAgICAgICAgdmFyIGxpc3QgPSBhcmd1bWVudHNbYXJndW1lbnRzLmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSBfc2xpY2UoYXJndW1lbnRzKTtcbiAgICAgICAgICAgIGFyZ3NbMF0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IG9yaWdGbi5hcHBseSh0aGlzLCBfY29uY2F0KGFyZ3VtZW50cywgW1xuICAgICAgICAgICAgICAgICAgICBpZHgsXG4gICAgICAgICAgICAgICAgICAgIGxpc3RcbiAgICAgICAgICAgICAgICBdKSk7XG4gICAgICAgICAgICAgICAgaWR4ICs9IDE7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gZm4uYXBwbHkodGhpcywgYXJncyk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogV3JhcHMgYSBmdW5jdGlvbiBvZiBhbnkgYXJpdHkgKGluY2x1ZGluZyBudWxsYXJ5KSBpbiBhIGZ1bmN0aW9uIHRoYXQgYWNjZXB0c1xuICAgICAqIGV4YWN0bHkgMiBwYXJhbWV0ZXJzLiBBbnkgZXh0cmFuZW91cyBwYXJhbWV0ZXJzIHdpbGwgbm90IGJlIHBhc3NlZCB0byB0aGVcbiAgICAgKiBzdXBwbGllZCBmdW5jdGlvbi5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMi4wXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAgICogQHNpZyAoKiAtPiBjKSAtPiAoYSwgYiAtPiBjKVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBmdW5jdGlvbiB0byB3cmFwLlxuICAgICAqIEByZXR1cm4ge0Z1bmN0aW9ufSBBIG5ldyBmdW5jdGlvbiB3cmFwcGluZyBgZm5gLiBUaGUgbmV3IGZ1bmN0aW9uIGlzIGd1YXJhbnRlZWQgdG8gYmUgb2ZcbiAgICAgKiAgICAgICAgIGFyaXR5IDIuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIHRha2VzVGhyZWVBcmdzID0gZnVuY3Rpb24oYSwgYiwgYykge1xuICAgICAqICAgICAgICByZXR1cm4gW2EsIGIsIGNdO1xuICAgICAqICAgICAgfTtcbiAgICAgKiAgICAgIHRha2VzVGhyZWVBcmdzLmxlbmd0aDsgLy89PiAzXG4gICAgICogICAgICB0YWtlc1RocmVlQXJncygxLCAyLCAzKTsgLy89PiBbMSwgMiwgM11cbiAgICAgKlxuICAgICAqICAgICAgdmFyIHRha2VzVHdvQXJncyA9IFIuYmluYXJ5KHRha2VzVGhyZWVBcmdzKTtcbiAgICAgKiAgICAgIHRha2VzVHdvQXJncy5sZW5ndGg7IC8vPT4gMlxuICAgICAqICAgICAgLy8gT25seSAyIGFyZ3VtZW50cyBhcmUgcGFzc2VkIHRvIHRoZSB3cmFwcGVkIGZ1bmN0aW9uXG4gICAgICogICAgICB0YWtlc1R3b0FyZ3MoMSwgMiwgMyk7IC8vPT4gWzEsIDIsIHVuZGVmaW5lZF1cbiAgICAgKi9cbiAgICB2YXIgYmluYXJ5ID0gX2N1cnJ5MShmdW5jdGlvbiBiaW5hcnkoZm4pIHtcbiAgICAgICAgcmV0dXJuIG5BcnkoMiwgZm4pO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGRlZXAgY29weSBvZiB0aGUgdmFsdWUgd2hpY2ggbWF5IGNvbnRhaW4gKG5lc3RlZCkgYEFycmF5YHMgYW5kXG4gICAgICogYE9iamVjdGBzLCBgTnVtYmVyYHMsIGBTdHJpbmdgcywgYEJvb2xlYW5gcyBhbmQgYERhdGVgcy4gYEZ1bmN0aW9uYHMgYXJlIG5vdFxuICAgICAqIGNvcGllZCwgYnV0IGFzc2lnbmVkIGJ5IHRoZWlyIHJlZmVyZW5jZS5cbiAgICAgKlxuICAgICAqIERpc3BhdGNoZXMgdG8gYSBgY2xvbmVgIG1ldGhvZCBpZiBwcmVzZW50LlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0XG4gICAgICogQHNpZyB7Kn0gLT4geyp9XG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgb2JqZWN0IG9yIGFycmF5IHRvIGNsb25lXG4gICAgICogQHJldHVybiB7Kn0gQSBuZXcgb2JqZWN0IG9yIGFycmF5LlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBvYmplY3RzID0gW3t9LCB7fSwge31dO1xuICAgICAqICAgICAgdmFyIG9iamVjdHNDbG9uZSA9IFIuY2xvbmUob2JqZWN0cyk7XG4gICAgICogICAgICBvYmplY3RzWzBdID09PSBvYmplY3RzQ2xvbmVbMF07IC8vPT4gZmFsc2VcbiAgICAgKi9cbiAgICB2YXIgY2xvbmUgPSBfY3VycnkxKGZ1bmN0aW9uIGNsb25lKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZSAhPSBudWxsICYmIHR5cGVvZiB2YWx1ZS5jbG9uZSA9PT0gJ2Z1bmN0aW9uJyA/IHZhbHVlLmNsb25lKCkgOiBfY2xvbmUodmFsdWUsIFtdLCBbXSwgdHJ1ZSk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgY3VycmllZCBlcXVpdmFsZW50IG9mIHRoZSBwcm92aWRlZCBmdW5jdGlvbi4gVGhlIGN1cnJpZWQgZnVuY3Rpb25cbiAgICAgKiBoYXMgdHdvIHVudXN1YWwgY2FwYWJpbGl0aWVzLiBGaXJzdCwgaXRzIGFyZ3VtZW50cyBuZWVkbid0IGJlIHByb3ZpZGVkIG9uZVxuICAgICAqIGF0IGEgdGltZS4gSWYgYGZgIGlzIGEgdGVybmFyeSBmdW5jdGlvbiBhbmQgYGdgIGlzIGBSLmN1cnJ5KGYpYCwgdGhlXG4gICAgICogZm9sbG93aW5nIGFyZSBlcXVpdmFsZW50OlxuICAgICAqXG4gICAgICogICAtIGBnKDEpKDIpKDMpYFxuICAgICAqICAgLSBgZygxKSgyLCAzKWBcbiAgICAgKiAgIC0gYGcoMSwgMikoMylgXG4gICAgICogICAtIGBnKDEsIDIsIDMpYFxuICAgICAqXG4gICAgICogU2Vjb25kbHksIHRoZSBzcGVjaWFsIHBsYWNlaG9sZGVyIHZhbHVlIGBSLl9fYCBtYXkgYmUgdXNlZCB0byBzcGVjaWZ5XG4gICAgICogXCJnYXBzXCIsIGFsbG93aW5nIHBhcnRpYWwgYXBwbGljYXRpb24gb2YgYW55IGNvbWJpbmF0aW9uIG9mIGFyZ3VtZW50cyxcbiAgICAgKiByZWdhcmRsZXNzIG9mIHRoZWlyIHBvc2l0aW9ucy4gSWYgYGdgIGlzIGFzIGFib3ZlIGFuZCBgX2AgaXMgYFIuX19gLCB0aGVcbiAgICAgKiBmb2xsb3dpbmcgYXJlIGVxdWl2YWxlbnQ6XG4gICAgICpcbiAgICAgKiAgIC0gYGcoMSwgMiwgMylgXG4gICAgICogICAtIGBnKF8sIDIsIDMpKDEpYFxuICAgICAqICAgLSBgZyhfLCBfLCAzKSgxKSgyKWBcbiAgICAgKiAgIC0gYGcoXywgXywgMykoMSwgMilgXG4gICAgICogICAtIGBnKF8sIDIpKDEpKDMpYFxuICAgICAqICAgLSBgZyhfLCAyKSgxLCAzKWBcbiAgICAgKiAgIC0gYGcoXywgMikoXywgMykoMSlgXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICAgICAqIEBzaWcgKCogLT4gYSkgLT4gKCogLT4gYSlcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgZnVuY3Rpb24gdG8gY3VycnkuXG4gICAgICogQHJldHVybiB7RnVuY3Rpb259IEEgbmV3LCBjdXJyaWVkIGZ1bmN0aW9uLlxuICAgICAqIEBzZWUgUi5jdXJyeU5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgYWRkRm91ck51bWJlcnMgPSAoYSwgYiwgYywgZCkgPT4gYSArIGIgKyBjICsgZDtcbiAgICAgKlxuICAgICAqICAgICAgdmFyIGN1cnJpZWRBZGRGb3VyTnVtYmVycyA9IFIuY3VycnkoYWRkRm91ck51bWJlcnMpO1xuICAgICAqICAgICAgdmFyIGYgPSBjdXJyaWVkQWRkRm91ck51bWJlcnMoMSwgMik7XG4gICAgICogICAgICB2YXIgZyA9IGYoMyk7XG4gICAgICogICAgICBnKDQpOyAvLz0+IDEwXG4gICAgICovXG4gICAgdmFyIGN1cnJ5ID0gX2N1cnJ5MShmdW5jdGlvbiBjdXJyeShmbikge1xuICAgICAgICByZXR1cm4gY3VycnlOKGZuLmxlbmd0aCwgZm4pO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhbGwgYnV0IHRoZSBmaXJzdCBgbmAgZWxlbWVudHMgb2YgdGhlIGdpdmVuIGxpc3QsIHN0cmluZywgb3JcbiAgICAgKiB0cmFuc2R1Y2VyL3RyYW5zZm9ybWVyIChvciBvYmplY3Qgd2l0aCBhIGBkcm9wYCBtZXRob2QpLlxuICAgICAqXG4gICAgICogRGlzcGF0Y2hlcyB0byB0aGUgYGRyb3BgIG1ldGhvZCBvZiB0aGUgc2Vjb25kIGFyZ3VtZW50LCBpZiBwcmVzZW50LlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgTnVtYmVyIC0+IFthXSAtPiBbYV1cbiAgICAgKiBAc2lnIE51bWJlciAtPiBTdHJpbmcgLT4gU3RyaW5nXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IG5cbiAgICAgKiBAcGFyYW0geyp9IGxpc3RcbiAgICAgKiBAcmV0dXJuIHsqfVxuICAgICAqIEBzZWUgUi50YWtlLCBSLnRyYW5zZHVjZVxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIuZHJvcCgxLCBbJ2ZvbycsICdiYXInLCAnYmF6J10pOyAvLz0+IFsnYmFyJywgJ2JheiddXG4gICAgICogICAgICBSLmRyb3AoMiwgWydmb28nLCAnYmFyJywgJ2JheiddKTsgLy89PiBbJ2JheiddXG4gICAgICogICAgICBSLmRyb3AoMywgWydmb28nLCAnYmFyJywgJ2JheiddKTsgLy89PiBbXVxuICAgICAqICAgICAgUi5kcm9wKDQsIFsnZm9vJywgJ2JhcicsICdiYXonXSk7IC8vPT4gW11cbiAgICAgKiAgICAgIFIuZHJvcCgzLCAncmFtZGEnKTsgICAgICAgICAgICAgICAvLz0+ICdkYSdcbiAgICAgKi9cbiAgICB2YXIgZHJvcCA9IF9jdXJyeTIoX2Rpc3BhdGNoYWJsZSgnZHJvcCcsIF94ZHJvcCwgZnVuY3Rpb24gZHJvcChuLCB4cykge1xuICAgICAgICByZXR1cm4gc2xpY2UoTWF0aC5tYXgoMCwgbiksIEluZmluaXR5LCB4cyk7XG4gICAgfSkpO1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIGxpc3QgY29udGFpbmluZyBhbGwgYnV0IHRoZSBsYXN0IGBuYCBlbGVtZW50cyBvZiB0aGUgZ2l2ZW4gYGxpc3RgLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xNi4wXG4gICAgICogQGNhdGVnb3J5IExpc3RcbiAgICAgKiBAc2lnIE51bWJlciAtPiBbYV0gLT4gW2FdXG4gICAgICogQHNpZyBOdW1iZXIgLT4gU3RyaW5nIC0+IFN0cmluZ1xuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBuIFRoZSBudW1iZXIgb2YgZWxlbWVudHMgb2YgYHhzYCB0byBza2lwLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IHhzIFRoZSBjb2xsZWN0aW9uIHRvIGNvbnNpZGVyLlxuICAgICAqIEByZXR1cm4ge0FycmF5fVxuICAgICAqIEBzZWUgUi50YWtlTGFzdFxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIuZHJvcExhc3QoMSwgWydmb28nLCAnYmFyJywgJ2JheiddKTsgLy89PiBbJ2ZvbycsICdiYXInXVxuICAgICAqICAgICAgUi5kcm9wTGFzdCgyLCBbJ2ZvbycsICdiYXInLCAnYmF6J10pOyAvLz0+IFsnZm9vJ11cbiAgICAgKiAgICAgIFIuZHJvcExhc3QoMywgWydmb28nLCAnYmFyJywgJ2JheiddKTsgLy89PiBbXVxuICAgICAqICAgICAgUi5kcm9wTGFzdCg0LCBbJ2ZvbycsICdiYXInLCAnYmF6J10pOyAvLz0+IFtdXG4gICAgICogICAgICBSLmRyb3BMYXN0KDMsICdyYW1kYScpOyAgICAgICAgICAgICAgIC8vPT4gJ3JhJ1xuICAgICAqL1xuICAgIHZhciBkcm9wTGFzdCA9IF9jdXJyeTIoX2Rpc3BhdGNoYWJsZSgnZHJvcExhc3QnLCBfeGRyb3BMYXN0LCBfZHJvcExhc3QpKTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBuZXcgbGlzdCBjb250YWluaW5nIGFsbCBidXQgbGFzdCB0aGVgbmAgZWxlbWVudHMgb2YgYSBnaXZlbiBsaXN0LFxuICAgICAqIHBhc3NpbmcgZWFjaCB2YWx1ZSBmcm9tIHRoZSByaWdodCB0byB0aGUgc3VwcGxpZWQgcHJlZGljYXRlIGZ1bmN0aW9uLFxuICAgICAqIHNraXBwaW5nIGVsZW1lbnRzIHdoaWxlIHRoZSBwcmVkaWNhdGUgZnVuY3Rpb24gcmV0dXJucyBgdHJ1ZWAuIFRoZSBwcmVkaWNhdGVcbiAgICAgKiBmdW5jdGlvbiBpcyBwYXNzZWQgb25lIGFyZ3VtZW50OiAodmFsdWUpKi5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMTYuMFxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyAoYSAtPiBCb29sZWFuKSAtPiBbYV0gLT4gW2FdXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGZ1bmN0aW9uIGNhbGxlZCBwZXIgaXRlcmF0aW9uLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGxpc3QgVGhlIGNvbGxlY3Rpb24gdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEByZXR1cm4ge0FycmF5fSBBIG5ldyBhcnJheS5cbiAgICAgKiBAc2VlIFIudGFrZUxhc3RXaGlsZSwgUi5hZGRJbmRleFxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBsdGVUaHJlZSA9IHggPT4geCA8PSAzO1xuICAgICAqXG4gICAgICogICAgICBSLmRyb3BMYXN0V2hpbGUobHRlVGhyZWUsIFsxLCAyLCAzLCA0LCAzLCAyLCAxXSk7IC8vPT4gWzEsIDIsIDMsIDRdXG4gICAgICovXG4gICAgdmFyIGRyb3BMYXN0V2hpbGUgPSBfY3VycnkyKF9kaXNwYXRjaGFibGUoJ2Ryb3BMYXN0V2hpbGUnLCBfeGRyb3BMYXN0V2hpbGUsIF9kcm9wTGFzdFdoaWxlKSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGB0cnVlYCBpZiBpdHMgYXJndW1lbnRzIGFyZSBlcXVpdmFsZW50LCBgZmFsc2VgIG90aGVyd2lzZS4gSGFuZGxlc1xuICAgICAqIGN5Y2xpY2FsIGRhdGEgc3RydWN0dXJlcy5cbiAgICAgKlxuICAgICAqIERpc3BhdGNoZXMgc3ltbWV0cmljYWxseSB0byB0aGUgYGVxdWFsc2AgbWV0aG9kcyBvZiBib3RoIGFyZ3VtZW50cywgaWZcbiAgICAgKiBwcmVzZW50LlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xNS4wXG4gICAgICogQGNhdGVnb3J5IFJlbGF0aW9uXG4gICAgICogQHNpZyBhIC0+IGIgLT4gQm9vbGVhblxuICAgICAqIEBwYXJhbSB7Kn0gYVxuICAgICAqIEBwYXJhbSB7Kn0gYlxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5lcXVhbHMoMSwgMSk7IC8vPT4gdHJ1ZVxuICAgICAqICAgICAgUi5lcXVhbHMoMSwgJzEnKTsgLy89PiBmYWxzZVxuICAgICAqICAgICAgUi5lcXVhbHMoWzEsIDIsIDNdLCBbMSwgMiwgM10pOyAvLz0+IHRydWVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIGEgPSB7fTsgYS52ID0gYTtcbiAgICAgKiAgICAgIHZhciBiID0ge307IGIudiA9IGI7XG4gICAgICogICAgICBSLmVxdWFscyhhLCBiKTsgLy89PiB0cnVlXG4gICAgICovXG4gICAgdmFyIGVxdWFscyA9IF9jdXJyeTIoZnVuY3Rpb24gZXF1YWxzKGEsIGIpIHtcbiAgICAgICAgcmV0dXJuIF9lcXVhbHMoYSwgYiwgW10sIFtdKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFRha2VzIGEgcHJlZGljYXRlIGFuZCBhIFwiZmlsdGVyYWJsZVwiLCBhbmQgcmV0dXJucyBhIG5ldyBmaWx0ZXJhYmxlIG9mIHRoZVxuICAgICAqIHNhbWUgdHlwZSBjb250YWluaW5nIHRoZSBtZW1iZXJzIG9mIHRoZSBnaXZlbiBmaWx0ZXJhYmxlIHdoaWNoIHNhdGlzZnkgdGhlXG4gICAgICogZ2l2ZW4gcHJlZGljYXRlLlxuICAgICAqXG4gICAgICogRGlzcGF0Y2hlcyB0byB0aGUgYGZpbHRlcmAgbWV0aG9kIG9mIHRoZSBzZWNvbmQgYXJndW1lbnQsIGlmIHByZXNlbnQuXG4gICAgICpcbiAgICAgKiBBY3RzIGFzIGEgdHJhbnNkdWNlciBpZiBhIHRyYW5zZm9ybWVyIGlzIGdpdmVuIGluIGxpc3QgcG9zaXRpb24uXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyBGaWx0ZXJhYmxlIGYgPT4gKGEgLT4gQm9vbGVhbikgLT4gZiBhIC0+IGYgYVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHByZWRcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBmaWx0ZXJhYmxlXG4gICAgICogQHJldHVybiB7QXJyYXl9XG4gICAgICogQHNlZSBSLnJlamVjdCwgUi50cmFuc2R1Y2UsIFIuYWRkSW5kZXhcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgaXNFdmVuID0gbiA9PiBuICUgMiA9PT0gMDtcbiAgICAgKlxuICAgICAqICAgICAgUi5maWx0ZXIoaXNFdmVuLCBbMSwgMiwgMywgNF0pOyAvLz0+IFsyLCA0XVxuICAgICAqXG4gICAgICogICAgICBSLmZpbHRlcihpc0V2ZW4sIHthOiAxLCBiOiAyLCBjOiAzLCBkOiA0fSk7IC8vPT4ge2I6IDIsIGQ6IDR9XG4gICAgICovXG4gICAgLy8gZWxzZVxuICAgIHZhciBmaWx0ZXIgPSBfY3VycnkyKF9kaXNwYXRjaGFibGUoJ2ZpbHRlcicsIF94ZmlsdGVyLCBmdW5jdGlvbiAocHJlZCwgZmlsdGVyYWJsZSkge1xuICAgICAgICByZXR1cm4gX2lzT2JqZWN0KGZpbHRlcmFibGUpID8gX3JlZHVjZShmdW5jdGlvbiAoYWNjLCBrZXkpIHtcbiAgICAgICAgICAgIGlmIChwcmVkKGZpbHRlcmFibGVba2V5XSkpIHtcbiAgICAgICAgICAgICAgICBhY2Nba2V5XSA9IGZpbHRlcmFibGVba2V5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgIH0sIHt9LCBrZXlzKGZpbHRlcmFibGUpKSA6IC8vIGVsc2VcbiAgICAgICAgX2ZpbHRlcihwcmVkLCBmaWx0ZXJhYmxlKTtcbiAgICB9KSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgbmV3IGxpc3QgYnkgcHVsbGluZyBldmVyeSBpdGVtIG91dCBvZiBpdCAoYW5kIGFsbCBpdHMgc3ViLWFycmF5cylcbiAgICAgKiBhbmQgcHV0dGluZyB0aGVtIGluIGEgbmV3IGFycmF5LCBkZXB0aC1maXJzdC5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4wXG4gICAgICogQGNhdGVnb3J5IExpc3RcbiAgICAgKiBAc2lnIFthXSAtPiBbYl1cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBsaXN0IFRoZSBhcnJheSB0byBjb25zaWRlci5cbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gVGhlIGZsYXR0ZW5lZCBsaXN0LlxuICAgICAqIEBzZWUgUi51bm5lc3RcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLmZsYXR0ZW4oWzEsIDIsIFszLCA0XSwgNSwgWzYsIFs3LCA4LCBbOSwgWzEwLCAxMV0sIDEyXV1dXSk7XG4gICAgICogICAgICAvLz0+IFsxLCAyLCAzLCA0LCA1LCA2LCA3LCA4LCA5LCAxMCwgMTEsIDEyXVxuICAgICAqL1xuICAgIHZhciBmbGF0dGVuID0gX2N1cnJ5MShfbWFrZUZsYXQodHJ1ZSkpO1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIG5ldyBmdW5jdGlvbiBtdWNoIGxpa2UgdGhlIHN1cHBsaWVkIG9uZSwgZXhjZXB0IHRoYXQgdGhlIGZpcnN0IHR3b1xuICAgICAqIGFyZ3VtZW50cycgb3JkZXIgaXMgcmV2ZXJzZWQuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICAgICAqIEBzaWcgKGEgLT4gYiAtPiBjIC0+IC4uLiAtPiB6KSAtPiAoYiAtPiBhIC0+IGMgLT4gLi4uIC0+IHopXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGZ1bmN0aW9uIHRvIGludm9rZSB3aXRoIGl0cyBmaXJzdCB0d28gcGFyYW1ldGVycyByZXZlcnNlZC5cbiAgICAgKiBAcmV0dXJuIHsqfSBUaGUgcmVzdWx0IG9mIGludm9raW5nIGBmbmAgd2l0aCBpdHMgZmlyc3QgdHdvIHBhcmFtZXRlcnMnIG9yZGVyIHJldmVyc2VkLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBtZXJnZVRocmVlID0gKGEsIGIsIGMpID0+IFtdLmNvbmNhdChhLCBiLCBjKTtcbiAgICAgKlxuICAgICAqICAgICAgbWVyZ2VUaHJlZSgxLCAyLCAzKTsgLy89PiBbMSwgMiwgM11cbiAgICAgKlxuICAgICAqICAgICAgUi5mbGlwKG1lcmdlVGhyZWUpKDEsIDIsIDMpOyAvLz0+IFsyLCAxLCAzXVxuICAgICAqL1xuICAgIHZhciBmbGlwID0gX2N1cnJ5MShmdW5jdGlvbiBmbGlwKGZuKSB7XG4gICAgICAgIHJldHVybiBjdXJyeShmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICAgICAgdmFyIGFyZ3MgPSBfc2xpY2UoYXJndW1lbnRzKTtcbiAgICAgICAgICAgIGFyZ3NbMF0gPSBiO1xuICAgICAgICAgICAgYXJnc1sxXSA9IGE7XG4gICAgICAgICAgICByZXR1cm4gZm4uYXBwbHkodGhpcywgYXJncyk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgZmlyc3QgZWxlbWVudCBvZiB0aGUgZ2l2ZW4gbGlzdCBvciBzdHJpbmcuIEluIHNvbWUgbGlicmFyaWVzXG4gICAgICogdGhpcyBmdW5jdGlvbiBpcyBuYW1lZCBgZmlyc3RgLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgW2FdIC0+IGEgfCBVbmRlZmluZWRcbiAgICAgKiBAc2lnIFN0cmluZyAtPiBTdHJpbmdcbiAgICAgKiBAcGFyYW0ge0FycmF5fFN0cmluZ30gbGlzdFxuICAgICAqIEByZXR1cm4geyp9XG4gICAgICogQHNlZSBSLnRhaWwsIFIuaW5pdCwgUi5sYXN0XG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5oZWFkKFsnZmknLCAnZm8nLCAnZnVtJ10pOyAvLz0+ICdmaSdcbiAgICAgKiAgICAgIFIuaGVhZChbXSk7IC8vPT4gdW5kZWZpbmVkXG4gICAgICpcbiAgICAgKiAgICAgIFIuaGVhZCgnYWJjJyk7IC8vPT4gJ2EnXG4gICAgICogICAgICBSLmhlYWQoJycpOyAvLz0+ICcnXG4gICAgICovXG4gICAgdmFyIGhlYWQgPSBudGgoMCk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGFsbCBidXQgdGhlIGxhc3QgZWxlbWVudCBvZiB0aGUgZ2l2ZW4gbGlzdCBvciBzdHJpbmcuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjkuMFxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyBbYV0gLT4gW2FdXG4gICAgICogQHNpZyBTdHJpbmcgLT4gU3RyaW5nXG4gICAgICogQHBhcmFtIHsqfSBsaXN0XG4gICAgICogQHJldHVybiB7Kn1cbiAgICAgKiBAc2VlIFIubGFzdCwgUi5oZWFkLCBSLnRhaWxcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLmluaXQoWzEsIDIsIDNdKTsgIC8vPT4gWzEsIDJdXG4gICAgICogICAgICBSLmluaXQoWzEsIDJdKTsgICAgIC8vPT4gWzFdXG4gICAgICogICAgICBSLmluaXQoWzFdKTsgICAgICAgIC8vPT4gW11cbiAgICAgKiAgICAgIFIuaW5pdChbXSk7ICAgICAgICAgLy89PiBbXVxuICAgICAqXG4gICAgICogICAgICBSLmluaXQoJ2FiYycpOyAgLy89PiAnYWInXG4gICAgICogICAgICBSLmluaXQoJ2FiJyk7ICAgLy89PiAnYSdcbiAgICAgKiAgICAgIFIuaW5pdCgnYScpOyAgICAvLz0+ICcnXG4gICAgICogICAgICBSLmluaXQoJycpOyAgICAgLy89PiAnJ1xuICAgICAqL1xuICAgIHZhciBpbml0ID0gc2xpY2UoMCwgLTEpO1xuXG4gICAgLyoqXG4gICAgICogQ29tYmluZXMgdHdvIGxpc3RzIGludG8gYSBzZXQgKGkuZS4gbm8gZHVwbGljYXRlcykgY29tcG9zZWQgb2YgdGhvc2VcbiAgICAgKiBlbGVtZW50cyBjb21tb24gdG8gYm90aCBsaXN0cy4gRHVwbGljYXRpb24gaXMgZGV0ZXJtaW5lZCBhY2NvcmRpbmcgdG8gdGhlXG4gICAgICogdmFsdWUgcmV0dXJuZWQgYnkgYXBwbHlpbmcgdGhlIHN1cHBsaWVkIHByZWRpY2F0ZSB0byB0d28gbGlzdCBlbGVtZW50cy5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4wXG4gICAgICogQGNhdGVnb3J5IFJlbGF0aW9uXG4gICAgICogQHNpZyAoYSAtPiBhIC0+IEJvb2xlYW4pIC0+IFsqXSAtPiBbKl0gLT4gWypdXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gcHJlZCBBIHByZWRpY2F0ZSBmdW5jdGlvbiB0aGF0IGRldGVybWluZXMgd2hldGhlclxuICAgICAqICAgICAgICB0aGUgdHdvIHN1cHBsaWVkIGVsZW1lbnRzIGFyZSBlcXVhbC5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBsaXN0MSBPbmUgbGlzdCBvZiBpdGVtcyB0byBjb21wYXJlXG4gICAgICogQHBhcmFtIHtBcnJheX0gbGlzdDIgQSBzZWNvbmQgbGlzdCBvZiBpdGVtcyB0byBjb21wYXJlXG4gICAgICogQHJldHVybiB7QXJyYXl9IEEgbmV3IGxpc3QgY29udGFpbmluZyB0aG9zZSBlbGVtZW50cyBjb21tb24gdG8gYm90aCBsaXN0cy5cbiAgICAgKiBAc2VlIFIuaW50ZXJzZWN0aW9uXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIGJ1ZmZhbG9TcHJpbmdmaWVsZCA9IFtcbiAgICAgKiAgICAgICAge2lkOiA4MjQsIG5hbWU6ICdSaWNoaWUgRnVyYXknfSxcbiAgICAgKiAgICAgICAge2lkOiA5NTYsIG5hbWU6ICdEZXdleSBNYXJ0aW4nfSxcbiAgICAgKiAgICAgICAge2lkOiAzMTMsIG5hbWU6ICdCcnVjZSBQYWxtZXInfSxcbiAgICAgKiAgICAgICAge2lkOiA0NTYsIG5hbWU6ICdTdGVwaGVuIFN0aWxscyd9LFxuICAgICAqICAgICAgICB7aWQ6IDE3NywgbmFtZTogJ05laWwgWW91bmcnfVxuICAgICAqICAgICAgXTtcbiAgICAgKiAgICAgIHZhciBjc255ID0gW1xuICAgICAqICAgICAgICB7aWQ6IDIwNCwgbmFtZTogJ0RhdmlkIENyb3NieSd9LFxuICAgICAqICAgICAgICB7aWQ6IDQ1NiwgbmFtZTogJ1N0ZXBoZW4gU3RpbGxzJ30sXG4gICAgICogICAgICAgIHtpZDogNTM5LCBuYW1lOiAnR3JhaGFtIE5hc2gnfSxcbiAgICAgKiAgICAgICAge2lkOiAxNzcsIG5hbWU6ICdOZWlsIFlvdW5nJ31cbiAgICAgKiAgICAgIF07XG4gICAgICpcbiAgICAgKiAgICAgIFIuaW50ZXJzZWN0aW9uV2l0aChSLmVxQnkoUi5wcm9wKCdpZCcpKSwgYnVmZmFsb1NwcmluZ2ZpZWxkLCBjc255KTtcbiAgICAgKiAgICAgIC8vPT4gW3tpZDogNDU2LCBuYW1lOiAnU3RlcGhlbiBTdGlsbHMnfSwge2lkOiAxNzcsIG5hbWU6ICdOZWlsIFlvdW5nJ31dXG4gICAgICovXG4gICAgdmFyIGludGVyc2VjdGlvbldpdGggPSBfY3VycnkzKGZ1bmN0aW9uIGludGVyc2VjdGlvbldpdGgocHJlZCwgbGlzdDEsIGxpc3QyKSB7XG4gICAgICAgIHZhciBsb29rdXBMaXN0LCBmaWx0ZXJlZExpc3Q7XG4gICAgICAgIGlmIChsaXN0MS5sZW5ndGggPiBsaXN0Mi5sZW5ndGgpIHtcbiAgICAgICAgICAgIGxvb2t1cExpc3QgPSBsaXN0MTtcbiAgICAgICAgICAgIGZpbHRlcmVkTGlzdCA9IGxpc3QyO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbG9va3VwTGlzdCA9IGxpc3QyO1xuICAgICAgICAgICAgZmlsdGVyZWRMaXN0ID0gbGlzdDE7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHJlc3VsdHMgPSBbXTtcbiAgICAgICAgdmFyIGlkeCA9IDA7XG4gICAgICAgIHdoaWxlIChpZHggPCBmaWx0ZXJlZExpc3QubGVuZ3RoKSB7XG4gICAgICAgICAgICBpZiAoX2NvbnRhaW5zV2l0aChwcmVkLCBmaWx0ZXJlZExpc3RbaWR4XSwgbG9va3VwTGlzdCkpIHtcbiAgICAgICAgICAgICAgICByZXN1bHRzW3Jlc3VsdHMubGVuZ3RoXSA9IGZpbHRlcmVkTGlzdFtpZHhdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWR4ICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVuaXFXaXRoKHByZWQsIHJlc3VsdHMpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogVHJhbnNmb3JtcyB0aGUgaXRlbXMgb2YgdGhlIGxpc3Qgd2l0aCB0aGUgdHJhbnNkdWNlciBhbmQgYXBwZW5kcyB0aGVcbiAgICAgKiB0cmFuc2Zvcm1lZCBpdGVtcyB0byB0aGUgYWNjdW11bGF0b3IgdXNpbmcgYW4gYXBwcm9wcmlhdGUgaXRlcmF0b3IgZnVuY3Rpb25cbiAgICAgKiBiYXNlZCBvbiB0aGUgYWNjdW11bGF0b3IgdHlwZS5cbiAgICAgKlxuICAgICAqIFRoZSBhY2N1bXVsYXRvciBjYW4gYmUgYW4gYXJyYXksIHN0cmluZywgb2JqZWN0IG9yIGEgdHJhbnNmb3JtZXIuIEl0ZXJhdGVkXG4gICAgICogaXRlbXMgd2lsbCBiZSBhcHBlbmRlZCB0byBhcnJheXMgYW5kIGNvbmNhdGVuYXRlZCB0byBzdHJpbmdzLiBPYmplY3RzIHdpbGxcbiAgICAgKiBiZSBtZXJnZWQgZGlyZWN0bHkgb3IgMi1pdGVtIGFycmF5cyB3aWxsIGJlIG1lcmdlZCBhcyBrZXksIHZhbHVlIHBhaXJzLlxuICAgICAqXG4gICAgICogVGhlIGFjY3VtdWxhdG9yIGNhbiBhbHNvIGJlIGEgdHJhbnNmb3JtZXIgb2JqZWN0IHRoYXQgcHJvdmlkZXMgYSAyLWFyaXR5XG4gICAgICogcmVkdWNpbmcgaXRlcmF0b3IgZnVuY3Rpb24sIHN0ZXAsIDAtYXJpdHkgaW5pdGlhbCB2YWx1ZSBmdW5jdGlvbiwgaW5pdCwgYW5kXG4gICAgICogMS1hcml0eSByZXN1bHQgZXh0cmFjdGlvbiBmdW5jdGlvbiByZXN1bHQuIFRoZSBzdGVwIGZ1bmN0aW9uIGlzIHVzZWQgYXMgdGhlXG4gICAgICogaXRlcmF0b3IgZnVuY3Rpb24gaW4gcmVkdWNlLiBUaGUgcmVzdWx0IGZ1bmN0aW9uIGlzIHVzZWQgdG8gY29udmVydCB0aGVcbiAgICAgKiBmaW5hbCBhY2N1bXVsYXRvciBpbnRvIHRoZSByZXR1cm4gdHlwZSBhbmQgaW4gbW9zdCBjYXNlcyBpcyBSLmlkZW50aXR5LiBUaGVcbiAgICAgKiBpbml0IGZ1bmN0aW9uIGlzIHVzZWQgdG8gcHJvdmlkZSB0aGUgaW5pdGlhbCBhY2N1bXVsYXRvci5cbiAgICAgKlxuICAgICAqIFRoZSBpdGVyYXRpb24gaXMgcGVyZm9ybWVkIHdpdGggUi5yZWR1Y2UgYWZ0ZXIgaW5pdGlhbGl6aW5nIHRoZSB0cmFuc2R1Y2VyLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xMi4wXG4gICAgICogQGNhdGVnb3J5IExpc3RcbiAgICAgKiBAc2lnIGEgLT4gKGIgLT4gYikgLT4gW2NdIC0+IGFcbiAgICAgKiBAcGFyYW0geyp9IGFjYyBUaGUgaW5pdGlhbCBhY2N1bXVsYXRvciB2YWx1ZS5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSB4ZiBUaGUgdHJhbnNkdWNlciBmdW5jdGlvbi4gUmVjZWl2ZXMgYSB0cmFuc2Zvcm1lciBhbmQgcmV0dXJucyBhIHRyYW5zZm9ybWVyLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGxpc3QgVGhlIGxpc3QgdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEByZXR1cm4geyp9IFRoZSBmaW5hbCwgYWNjdW11bGF0ZWQgdmFsdWUuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIG51bWJlcnMgPSBbMSwgMiwgMywgNF07XG4gICAgICogICAgICB2YXIgdHJhbnNkdWNlciA9IFIuY29tcG9zZShSLm1hcChSLmFkZCgxKSksIFIudGFrZSgyKSk7XG4gICAgICpcbiAgICAgKiAgICAgIFIuaW50byhbXSwgdHJhbnNkdWNlciwgbnVtYmVycyk7IC8vPT4gWzIsIDNdXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBpbnRvQXJyYXkgPSBSLmludG8oW10pO1xuICAgICAqICAgICAgaW50b0FycmF5KHRyYW5zZHVjZXIsIG51bWJlcnMpOyAvLz0+IFsyLCAzXVxuICAgICAqL1xuICAgIHZhciBpbnRvID0gX2N1cnJ5MyhmdW5jdGlvbiBpbnRvKGFjYywgeGYsIGxpc3QpIHtcbiAgICAgICAgcmV0dXJuIF9pc1RyYW5zZm9ybWVyKGFjYykgPyBfcmVkdWNlKHhmKGFjYyksIGFjY1snQEB0cmFuc2R1Y2VyL2luaXQnXSgpLCBsaXN0KSA6IF9yZWR1Y2UoeGYoX3N0ZXBDYXQoYWNjKSksIF9jbG9uZShhY2MsIFtdLCBbXSwgZmFsc2UpLCBsaXN0KTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFNhbWUgYXMgUi5pbnZlcnRPYmosIGhvd2V2ZXIgdGhpcyBhY2NvdW50cyBmb3Igb2JqZWN0cyB3aXRoIGR1cGxpY2F0ZSB2YWx1ZXNcbiAgICAgKiBieSBwdXR0aW5nIHRoZSB2YWx1ZXMgaW50byBhbiBhcnJheS5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuOS4wXG4gICAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgICAqIEBzaWcge3M6IHh9IC0+IHt4OiBbIHMsIC4uLiBdfVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmogVGhlIG9iamVjdCBvciBhcnJheSB0byBpbnZlcnRcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IG91dCBBIG5ldyBvYmplY3Qgd2l0aCBrZXlzXG4gICAgICogaW4gYW4gYXJyYXkuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIHJhY2VSZXN1bHRzQnlGaXJzdE5hbWUgPSB7XG4gICAgICogICAgICAgIGZpcnN0OiAnYWxpY2UnLFxuICAgICAqICAgICAgICBzZWNvbmQ6ICdqYWtlJyxcbiAgICAgKiAgICAgICAgdGhpcmQ6ICdhbGljZScsXG4gICAgICogICAgICB9O1xuICAgICAqICAgICAgUi5pbnZlcnQocmFjZVJlc3VsdHNCeUZpcnN0TmFtZSk7XG4gICAgICogICAgICAvLz0+IHsgJ2FsaWNlJzogWydmaXJzdCcsICd0aGlyZCddLCAnamFrZSc6WydzZWNvbmQnXSB9XG4gICAgICovXG4gICAgdmFyIGludmVydCA9IF9jdXJyeTEoZnVuY3Rpb24gaW52ZXJ0KG9iaikge1xuICAgICAgICB2YXIgcHJvcHMgPSBrZXlzKG9iaik7XG4gICAgICAgIHZhciBsZW4gPSBwcm9wcy5sZW5ndGg7XG4gICAgICAgIHZhciBpZHggPSAwO1xuICAgICAgICB2YXIgb3V0ID0ge307XG4gICAgICAgIHdoaWxlIChpZHggPCBsZW4pIHtcbiAgICAgICAgICAgIHZhciBrZXkgPSBwcm9wc1tpZHhdO1xuICAgICAgICAgICAgdmFyIHZhbCA9IG9ialtrZXldO1xuICAgICAgICAgICAgdmFyIGxpc3QgPSBfaGFzKHZhbCwgb3V0KSA/IG91dFt2YWxdIDogb3V0W3ZhbF0gPSBbXTtcbiAgICAgICAgICAgIGxpc3RbbGlzdC5sZW5ndGhdID0ga2V5O1xuICAgICAgICAgICAgaWR4ICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggdGhlIGtleXMgb2YgdGhlIGdpdmVuIG9iamVjdCBhcyB2YWx1ZXMsIGFuZCB0aGVcbiAgICAgKiB2YWx1ZXMgb2YgdGhlIGdpdmVuIG9iamVjdCwgd2hpY2ggYXJlIGNvZXJjZWQgdG8gc3RyaW5ncywgYXMga2V5cy4gTm90ZVxuICAgICAqIHRoYXQgdGhlIGxhc3Qga2V5IGZvdW5kIGlzIHByZWZlcnJlZCB3aGVuIGhhbmRsaW5nIHRoZSBzYW1lIHZhbHVlLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC45LjBcbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0XG4gICAgICogQHNpZyB7czogeH0gLT4ge3g6IHN9XG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iaiBUaGUgb2JqZWN0IG9yIGFycmF5IHRvIGludmVydFxuICAgICAqIEByZXR1cm4ge09iamVjdH0gb3V0IEEgbmV3IG9iamVjdFxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciByYWNlUmVzdWx0cyA9IHtcbiAgICAgKiAgICAgICAgZmlyc3Q6ICdhbGljZScsXG4gICAgICogICAgICAgIHNlY29uZDogJ2pha2UnXG4gICAgICogICAgICB9O1xuICAgICAqICAgICAgUi5pbnZlcnRPYmoocmFjZVJlc3VsdHMpO1xuICAgICAqICAgICAgLy89PiB7ICdhbGljZSc6ICdmaXJzdCcsICdqYWtlJzonc2Vjb25kJyB9XG4gICAgICpcbiAgICAgKiAgICAgIC8vIEFsdGVybmF0aXZlbHk6XG4gICAgICogICAgICB2YXIgcmFjZVJlc3VsdHMgPSBbJ2FsaWNlJywgJ2pha2UnXTtcbiAgICAgKiAgICAgIFIuaW52ZXJ0T2JqKHJhY2VSZXN1bHRzKTtcbiAgICAgKiAgICAgIC8vPT4geyAnYWxpY2UnOiAnMCcsICdqYWtlJzonMScgfVxuICAgICAqL1xuICAgIHZhciBpbnZlcnRPYmogPSBfY3VycnkxKGZ1bmN0aW9uIGludmVydE9iaihvYmopIHtcbiAgICAgICAgdmFyIHByb3BzID0ga2V5cyhvYmopO1xuICAgICAgICB2YXIgbGVuID0gcHJvcHMubGVuZ3RoO1xuICAgICAgICB2YXIgaWR4ID0gMDtcbiAgICAgICAgdmFyIG91dCA9IHt9O1xuICAgICAgICB3aGlsZSAoaWR4IDwgbGVuKSB7XG4gICAgICAgICAgICB2YXIga2V5ID0gcHJvcHNbaWR4XTtcbiAgICAgICAgICAgIG91dFtvYmpba2V5XV0gPSBrZXk7XG4gICAgICAgICAgICBpZHggKz0gMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGdpdmVuIHZhbHVlIGlzIGl0cyB0eXBlJ3MgZW1wdHkgdmFsdWU7IGBmYWxzZWBcbiAgICAgKiBvdGhlcndpc2UuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBMb2dpY1xuICAgICAqIEBzaWcgYSAtPiBCb29sZWFuXG4gICAgICogQHBhcmFtIHsqfSB4XG4gICAgICogQHJldHVybiB7Qm9vbGVhbn1cbiAgICAgKiBAc2VlIFIuZW1wdHlcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLmlzRW1wdHkoWzEsIDIsIDNdKTsgICAvLz0+IGZhbHNlXG4gICAgICogICAgICBSLmlzRW1wdHkoW10pOyAgICAgICAgICAvLz0+IHRydWVcbiAgICAgKiAgICAgIFIuaXNFbXB0eSgnJyk7ICAgICAgICAgIC8vPT4gdHJ1ZVxuICAgICAqICAgICAgUi5pc0VtcHR5KG51bGwpOyAgICAgICAgLy89PiBmYWxzZVxuICAgICAqICAgICAgUi5pc0VtcHR5KHt9KTsgICAgICAgICAgLy89PiB0cnVlXG4gICAgICogICAgICBSLmlzRW1wdHkoe2xlbmd0aDogMH0pOyAvLz0+IGZhbHNlXG4gICAgICovXG4gICAgdmFyIGlzRW1wdHkgPSBfY3VycnkxKGZ1bmN0aW9uIGlzRW1wdHkoeCkge1xuICAgICAgICByZXR1cm4geCAhPSBudWxsICYmIGVxdWFscyh4LCBlbXB0eSh4KSk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBsYXN0IGVsZW1lbnQgb2YgdGhlIGdpdmVuIGxpc3Qgb3Igc3RyaW5nLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjRcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgW2FdIC0+IGEgfCBVbmRlZmluZWRcbiAgICAgKiBAc2lnIFN0cmluZyAtPiBTdHJpbmdcbiAgICAgKiBAcGFyYW0geyp9IGxpc3RcbiAgICAgKiBAcmV0dXJuIHsqfVxuICAgICAqIEBzZWUgUi5pbml0LCBSLmhlYWQsIFIudGFpbFxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIubGFzdChbJ2ZpJywgJ2ZvJywgJ2Z1bSddKTsgLy89PiAnZnVtJ1xuICAgICAqICAgICAgUi5sYXN0KFtdKTsgLy89PiB1bmRlZmluZWRcbiAgICAgKlxuICAgICAqICAgICAgUi5sYXN0KCdhYmMnKTsgLy89PiAnYydcbiAgICAgKiAgICAgIFIubGFzdCgnJyk7IC8vPT4gJydcbiAgICAgKi9cbiAgICB2YXIgbGFzdCA9IG50aCgtMSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBwb3NpdGlvbiBvZiB0aGUgbGFzdCBvY2N1cnJlbmNlIG9mIGFuIGl0ZW0gaW4gYW4gYXJyYXksIG9yIC0xIGlmXG4gICAgICogdGhlIGl0ZW0gaXMgbm90IGluY2x1ZGVkIGluIHRoZSBhcnJheS4gYFIuZXF1YWxzYCBpcyB1c2VkIHRvIGRldGVybWluZVxuICAgICAqIGVxdWFsaXR5LlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgYSAtPiBbYV0gLT4gTnVtYmVyXG4gICAgICogQHBhcmFtIHsqfSB0YXJnZXQgVGhlIGl0ZW0gdG8gZmluZC5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSB4cyBUaGUgYXJyYXkgdG8gc2VhcmNoIGluLlxuICAgICAqIEByZXR1cm4ge051bWJlcn0gdGhlIGluZGV4IG9mIHRoZSB0YXJnZXQsIG9yIC0xIGlmIHRoZSB0YXJnZXQgaXMgbm90IGZvdW5kLlxuICAgICAqIEBzZWUgUi5pbmRleE9mXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5sYXN0SW5kZXhPZigzLCBbLTEsMywzLDAsMSwyLDMsNF0pOyAvLz0+IDZcbiAgICAgKiAgICAgIFIubGFzdEluZGV4T2YoMTAsIFsxLDIsMyw0XSk7IC8vPT4gLTFcbiAgICAgKi9cbiAgICB2YXIgbGFzdEluZGV4T2YgPSBfY3VycnkyKGZ1bmN0aW9uIGxhc3RJbmRleE9mKHRhcmdldCwgeHMpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB4cy5sYXN0SW5kZXhPZiA9PT0gJ2Z1bmN0aW9uJyAmJiAhX2lzQXJyYXkoeHMpKSB7XG4gICAgICAgICAgICByZXR1cm4geHMubGFzdEluZGV4T2YodGFyZ2V0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciBpZHggPSB4cy5sZW5ndGggLSAxO1xuICAgICAgICAgICAgd2hpbGUgKGlkeCA+PSAwKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVxdWFscyh4c1tpZHhdLCB0YXJnZXQpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpZHg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlkeCAtPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBUYWtlcyBhIGZ1bmN0aW9uIGFuZFxuICAgICAqIGEgW2Z1bmN0b3JdKGh0dHBzOi8vZ2l0aHViLmNvbS9mYW50YXN5bGFuZC9mYW50YXN5LWxhbmQjZnVuY3RvciksXG4gICAgICogYXBwbGllcyB0aGUgZnVuY3Rpb24gdG8gZWFjaCBvZiB0aGUgZnVuY3RvcidzIHZhbHVlcywgYW5kIHJldHVybnNcbiAgICAgKiBhIGZ1bmN0b3Igb2YgdGhlIHNhbWUgc2hhcGUuXG4gICAgICpcbiAgICAgKiBSYW1kYSBwcm92aWRlcyBzdWl0YWJsZSBgbWFwYCBpbXBsZW1lbnRhdGlvbnMgZm9yIGBBcnJheWAgYW5kIGBPYmplY3RgLFxuICAgICAqIHNvIHRoaXMgZnVuY3Rpb24gbWF5IGJlIGFwcGxpZWQgdG8gYFsxLCAyLCAzXWAgb3IgYHt4OiAxLCB5OiAyLCB6OiAzfWAuXG4gICAgICpcbiAgICAgKiBEaXNwYXRjaGVzIHRvIHRoZSBgbWFwYCBtZXRob2Qgb2YgdGhlIHNlY29uZCBhcmd1bWVudCwgaWYgcHJlc2VudC5cbiAgICAgKlxuICAgICAqIEFjdHMgYXMgYSB0cmFuc2R1Y2VyIGlmIGEgdHJhbnNmb3JtZXIgaXMgZ2l2ZW4gaW4gbGlzdCBwb3NpdGlvbi5cbiAgICAgKlxuICAgICAqIEFsc28gdHJlYXRzIGZ1bmN0aW9ucyBhcyBmdW5jdG9ycyBhbmQgd2lsbCBjb21wb3NlIHRoZW0gdG9nZXRoZXIuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyBGdW5jdG9yIGYgPT4gKGEgLT4gYikgLT4gZiBhIC0+IGYgYlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBmdW5jdGlvbiB0byBiZSBjYWxsZWQgb24gZXZlcnkgZWxlbWVudCBvZiB0aGUgaW5wdXQgYGxpc3RgLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGxpc3QgVGhlIGxpc3QgdG8gYmUgaXRlcmF0ZWQgb3Zlci5cbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gVGhlIG5ldyBsaXN0LlxuICAgICAqIEBzZWUgUi50cmFuc2R1Y2UsIFIuYWRkSW5kZXhcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgZG91YmxlID0geCA9PiB4ICogMjtcbiAgICAgKlxuICAgICAqICAgICAgUi5tYXAoZG91YmxlLCBbMSwgMiwgM10pOyAvLz0+IFsyLCA0LCA2XVxuICAgICAqXG4gICAgICogICAgICBSLm1hcChkb3VibGUsIHt4OiAxLCB5OiAyLCB6OiAzfSk7IC8vPT4ge3g6IDIsIHk6IDQsIHo6IDZ9XG4gICAgICovXG4gICAgdmFyIG1hcCA9IF9jdXJyeTIoX2Rpc3BhdGNoYWJsZSgnbWFwJywgX3htYXAsIGZ1bmN0aW9uIG1hcChmbiwgZnVuY3Rvcikge1xuICAgICAgICBzd2l0Y2ggKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChmdW5jdG9yKSkge1xuICAgICAgICBjYXNlICdbb2JqZWN0IEZ1bmN0aW9uXSc6XG4gICAgICAgICAgICByZXR1cm4gY3VycnlOKGZ1bmN0b3IubGVuZ3RoLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZuLmNhbGwodGhpcywgZnVuY3Rvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICBjYXNlICdbb2JqZWN0IE9iamVjdF0nOlxuICAgICAgICAgICAgcmV0dXJuIF9yZWR1Y2UoZnVuY3Rpb24gKGFjYywga2V5KSB7XG4gICAgICAgICAgICAgICAgYWNjW2tleV0gPSBmbihmdW5jdG9yW2tleV0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgICAgICB9LCB7fSwga2V5cyhmdW5jdG9yKSk7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gX21hcChmbiwgZnVuY3Rvcik7XG4gICAgICAgIH1cbiAgICB9KSk7XG5cbiAgICAvKipcbiAgICAgKiBBbiBPYmplY3Qtc3BlY2lmaWMgdmVyc2lvbiBvZiBgbWFwYC4gVGhlIGZ1bmN0aW9uIGlzIGFwcGxpZWQgdG8gdGhyZWVcbiAgICAgKiBhcmd1bWVudHM6ICoodmFsdWUsIGtleSwgb2JqKSouIElmIG9ubHkgdGhlIHZhbHVlIGlzIHNpZ25pZmljYW50LCB1c2VcbiAgICAgKiBgbWFwYCBpbnN0ZWFkLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC45LjBcbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0XG4gICAgICogQHNpZyAoKCosIFN0cmluZywgT2JqZWN0KSAtPiAqKSAtPiBPYmplY3QgLT4gT2JqZWN0XG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gICAgICogQHJldHVybiB7T2JqZWN0fVxuICAgICAqIEBzZWUgUi5tYXBcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgdmFsdWVzID0geyB4OiAxLCB5OiAyLCB6OiAzIH07XG4gICAgICogICAgICB2YXIgcHJlcGVuZEtleUFuZERvdWJsZSA9IChudW0sIGtleSwgb2JqKSA9PiBrZXkgKyAobnVtICogMik7XG4gICAgICpcbiAgICAgKiAgICAgIFIubWFwT2JqSW5kZXhlZChwcmVwZW5kS2V5QW5kRG91YmxlLCB2YWx1ZXMpOyAvLz0+IHsgeDogJ3gyJywgeTogJ3k0JywgejogJ3o2JyB9XG4gICAgICovXG4gICAgdmFyIG1hcE9iakluZGV4ZWQgPSBfY3VycnkyKGZ1bmN0aW9uIG1hcE9iakluZGV4ZWQoZm4sIG9iaikge1xuICAgICAgICByZXR1cm4gX3JlZHVjZShmdW5jdGlvbiAoYWNjLCBrZXkpIHtcbiAgICAgICAgICAgIGFjY1trZXldID0gZm4ob2JqW2tleV0sIGtleSwgb2JqKTtcbiAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgIH0sIHt9LCBrZXlzKG9iaikpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBvYmplY3Qgd2l0aCB0aGUgb3duIHByb3BlcnRpZXMgb2YgdGhlIHR3byBwcm92aWRlZCBvYmplY3RzLiBJZlxuICAgICAqIGEga2V5IGV4aXN0cyBpbiBib3RoIG9iamVjdHMsIHRoZSBwcm92aWRlZCBmdW5jdGlvbiBpcyBhcHBsaWVkIHRvIHRoZSB2YWx1ZXNcbiAgICAgKiBhc3NvY2lhdGVkIHdpdGggdGhlIGtleSBpbiBlYWNoIG9iamVjdCwgd2l0aCB0aGUgcmVzdWx0IGJlaW5nIHVzZWQgYXMgdGhlXG4gICAgICogdmFsdWUgYXNzb2NpYXRlZCB3aXRoIHRoZSBrZXkgaW4gdGhlIHJldHVybmVkIG9iamVjdC4gVGhlIGtleSB3aWxsIGJlXG4gICAgICogZXhjbHVkZWQgZnJvbSB0aGUgcmV0dXJuZWQgb2JqZWN0IGlmIHRoZSByZXN1bHRpbmcgdmFsdWUgaXMgYHVuZGVmaW5lZGAuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjE5LjBcbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0XG4gICAgICogQHNpZyAoYSAtPiBhIC0+IGEpIC0+IHthfSAtPiB7YX0gLT4ge2F9XG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gbFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSByXG4gICAgICogQHJldHVybiB7T2JqZWN0fVxuICAgICAqIEBzZWUgUi5tZXJnZSwgUi5tZXJnZVdpdGhLZXlcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLm1lcmdlV2l0aChSLmNvbmNhdCxcbiAgICAgKiAgICAgICAgICAgICAgICAgIHsgYTogdHJ1ZSwgdmFsdWVzOiBbMTAsIDIwXSB9LFxuICAgICAqICAgICAgICAgICAgICAgICAgeyBiOiB0cnVlLCB2YWx1ZXM6IFsxNSwgMzVdIH0pO1xuICAgICAqICAgICAgLy89PiB7IGE6IHRydWUsIGI6IHRydWUsIHZhbHVlczogWzEwLCAyMCwgMTUsIDM1XSB9XG4gICAgICovXG4gICAgdmFyIG1lcmdlV2l0aCA9IF9jdXJyeTMoZnVuY3Rpb24gbWVyZ2VXaXRoKGZuLCBsLCByKSB7XG4gICAgICAgIHJldHVybiBtZXJnZVdpdGhLZXkoZnVuY3Rpb24gKF8sIF9sLCBfcikge1xuICAgICAgICAgICAgcmV0dXJuIGZuKF9sLCBfcik7XG4gICAgICAgIH0sIGwsIHIpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogVGFrZXMgYSBmdW5jdGlvbiBgZmAgYW5kIGEgbGlzdCBvZiBhcmd1bWVudHMsIGFuZCByZXR1cm5zIGEgZnVuY3Rpb24gYGdgLlxuICAgICAqIFdoZW4gYXBwbGllZCwgYGdgIHJldHVybnMgdGhlIHJlc3VsdCBvZiBhcHBseWluZyBgZmAgdG8gdGhlIGFyZ3VtZW50c1xuICAgICAqIHByb3ZpZGVkIGluaXRpYWxseSBmb2xsb3dlZCBieSB0aGUgYXJndW1lbnRzIHByb3ZpZGVkIHRvIGBnYC5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMTAuMFxuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICAgICAqIEBzaWcgKChhLCBiLCBjLCAuLi4sIG4pIC0+IHgpIC0+IFthLCBiLCBjLCAuLi5dIC0+ICgoZCwgZSwgZiwgLi4uLCBuKSAtPiB4KVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBhcmdzXG4gICAgICogQHJldHVybiB7RnVuY3Rpb259XG4gICAgICogQHNlZSBSLnBhcnRpYWxSaWdodFxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBtdWx0aXBseSA9IChhLCBiKSA9PiBhICogYjtcbiAgICAgKiAgICAgIHZhciBkb3VibGUgPSBSLnBhcnRpYWwobXVsdGlwbHksIFsyXSk7XG4gICAgICogICAgICBkb3VibGUoMik7IC8vPT4gNFxuICAgICAqXG4gICAgICogICAgICB2YXIgZ3JlZXQgPSAoc2FsdXRhdGlvbiwgdGl0bGUsIGZpcnN0TmFtZSwgbGFzdE5hbWUpID0+XG4gICAgICogICAgICAgIHNhbHV0YXRpb24gKyAnLCAnICsgdGl0bGUgKyAnICcgKyBmaXJzdE5hbWUgKyAnICcgKyBsYXN0TmFtZSArICchJztcbiAgICAgKlxuICAgICAqICAgICAgdmFyIHNheUhlbGxvID0gUi5wYXJ0aWFsKGdyZWV0LCBbJ0hlbGxvJ10pO1xuICAgICAqICAgICAgdmFyIHNheUhlbGxvVG9NcyA9IFIucGFydGlhbChzYXlIZWxsbywgWydNcy4nXSk7XG4gICAgICogICAgICBzYXlIZWxsb1RvTXMoJ0phbmUnLCAnSm9uZXMnKTsgLy89PiAnSGVsbG8sIE1zLiBKYW5lIEpvbmVzISdcbiAgICAgKi9cbiAgICB2YXIgcGFydGlhbCA9IF9jcmVhdGVQYXJ0aWFsQXBwbGljYXRvcihfY29uY2F0KTtcblxuICAgIC8qKlxuICAgICAqIFRha2VzIGEgZnVuY3Rpb24gYGZgIGFuZCBhIGxpc3Qgb2YgYXJndW1lbnRzLCBhbmQgcmV0dXJucyBhIGZ1bmN0aW9uIGBnYC5cbiAgICAgKiBXaGVuIGFwcGxpZWQsIGBnYCByZXR1cm5zIHRoZSByZXN1bHQgb2YgYXBwbHlpbmcgYGZgIHRvIHRoZSBhcmd1bWVudHNcbiAgICAgKiBwcm92aWRlZCB0byBgZ2AgZm9sbG93ZWQgYnkgdGhlIGFyZ3VtZW50cyBwcm92aWRlZCBpbml0aWFsbHkuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEwLjBcbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICAgKiBAc2lnICgoYSwgYiwgYywgLi4uLCBuKSAtPiB4KSAtPiBbZCwgZSwgZiwgLi4uLCBuXSAtPiAoKGEsIGIsIGMsIC4uLikgLT4geClcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmXG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJnc1xuICAgICAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICAgICAqIEBzZWUgUi5wYXJ0aWFsXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIGdyZWV0ID0gKHNhbHV0YXRpb24sIHRpdGxlLCBmaXJzdE5hbWUsIGxhc3ROYW1lKSA9PlxuICAgICAqICAgICAgICBzYWx1dGF0aW9uICsgJywgJyArIHRpdGxlICsgJyAnICsgZmlyc3ROYW1lICsgJyAnICsgbGFzdE5hbWUgKyAnISc7XG4gICAgICpcbiAgICAgKiAgICAgIHZhciBncmVldE1zSmFuZUpvbmVzID0gUi5wYXJ0aWFsUmlnaHQoZ3JlZXQsIFsnTXMuJywgJ0phbmUnLCAnSm9uZXMnXSk7XG4gICAgICpcbiAgICAgKiAgICAgIGdyZWV0TXNKYW5lSm9uZXMoJ0hlbGxvJyk7IC8vPT4gJ0hlbGxvLCBNcy4gSmFuZSBKb25lcyEnXG4gICAgICovXG4gICAgdmFyIHBhcnRpYWxSaWdodCA9IF9jcmVhdGVQYXJ0aWFsQXBwbGljYXRvcihmbGlwKF9jb25jYXQpKTtcblxuICAgIC8qKlxuICAgICAqIERldGVybWluZXMgd2hldGhlciBhIG5lc3RlZCBwYXRoIG9uIGFuIG9iamVjdCBoYXMgYSBzcGVjaWZpYyB2YWx1ZSwgaW5cbiAgICAgKiBgUi5lcXVhbHNgIHRlcm1zLiBNb3N0IGxpa2VseSB1c2VkIHRvIGZpbHRlciBhIGxpc3QuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjcuMFxuICAgICAqIEBjYXRlZ29yeSBSZWxhdGlvblxuICAgICAqIEBzaWcgW1N0cmluZ10gLT4gKiAtPiB7U3RyaW5nOiAqfSAtPiBCb29sZWFuXG4gICAgICogQHBhcmFtIHtBcnJheX0gcGF0aCBUaGUgcGF0aCBvZiB0aGUgbmVzdGVkIHByb3BlcnR5IHRvIHVzZVxuICAgICAqIEBwYXJhbSB7Kn0gdmFsIFRoZSB2YWx1ZSB0byBjb21wYXJlIHRoZSBuZXN0ZWQgcHJvcGVydHkgd2l0aFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmogVGhlIG9iamVjdCB0byBjaGVjayB0aGUgbmVzdGVkIHByb3BlcnR5IGluXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn0gYHRydWVgIGlmIHRoZSB2YWx1ZSBlcXVhbHMgdGhlIG5lc3RlZCBvYmplY3QgcHJvcGVydHksXG4gICAgICogICAgICAgICBgZmFsc2VgIG90aGVyd2lzZS5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgdXNlcjEgPSB7IGFkZHJlc3M6IHsgemlwQ29kZTogOTAyMTAgfSB9O1xuICAgICAqICAgICAgdmFyIHVzZXIyID0geyBhZGRyZXNzOiB7IHppcENvZGU6IDU1NTU1IH0gfTtcbiAgICAgKiAgICAgIHZhciB1c2VyMyA9IHsgbmFtZTogJ0JvYicgfTtcbiAgICAgKiAgICAgIHZhciB1c2VycyA9IFsgdXNlcjEsIHVzZXIyLCB1c2VyMyBdO1xuICAgICAqICAgICAgdmFyIGlzRmFtb3VzID0gUi5wYXRoRXEoWydhZGRyZXNzJywgJ3ppcENvZGUnXSwgOTAyMTApO1xuICAgICAqICAgICAgUi5maWx0ZXIoaXNGYW1vdXMsIHVzZXJzKTsgLy89PiBbIHVzZXIxIF1cbiAgICAgKi9cbiAgICB2YXIgcGF0aEVxID0gX2N1cnJ5MyhmdW5jdGlvbiBwYXRoRXEoX3BhdGgsIHZhbCwgb2JqKSB7XG4gICAgICAgIHJldHVybiBlcXVhbHMocGF0aChfcGF0aCwgb2JqKSwgdmFsKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBuZXcgbGlzdCBieSBwbHVja2luZyB0aGUgc2FtZSBuYW1lZCBwcm9wZXJ0eSBvZmYgYWxsIG9iamVjdHMgaW5cbiAgICAgKiB0aGUgbGlzdCBzdXBwbGllZC5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4wXG4gICAgICogQGNhdGVnb3J5IExpc3RcbiAgICAgKiBAc2lnIGsgLT4gW3trOiB2fV0gLT4gW3ZdXG4gICAgICogQHBhcmFtIHtOdW1iZXJ8U3RyaW5nfSBrZXkgVGhlIGtleSBuYW1lIHRvIHBsdWNrIG9mZiBvZiBlYWNoIG9iamVjdC5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBsaXN0IFRoZSBhcnJheSB0byBjb25zaWRlci5cbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gVGhlIGxpc3Qgb2YgdmFsdWVzIGZvciB0aGUgZ2l2ZW4ga2V5LlxuICAgICAqIEBzZWUgUi5wcm9wc1xuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIucGx1Y2soJ2EnKShbe2E6IDF9LCB7YTogMn1dKTsgLy89PiBbMSwgMl1cbiAgICAgKiAgICAgIFIucGx1Y2soMCkoW1sxLCAyXSwgWzMsIDRdXSk7ICAgLy89PiBbMSwgM11cbiAgICAgKi9cbiAgICB2YXIgcGx1Y2sgPSBfY3VycnkyKGZ1bmN0aW9uIHBsdWNrKHAsIGxpc3QpIHtcbiAgICAgICAgcmV0dXJuIG1hcChwcm9wKHApLCBsaXN0KTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFJlYXNvbmFibGUgYW5hbG9nIHRvIFNRTCBgc2VsZWN0YCBzdGF0ZW1lbnQuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAY2F0ZWdvcnkgUmVsYXRpb25cbiAgICAgKiBAc2lnIFtrXSAtPiBbe2s6IHZ9XSAtPiBbe2s6IHZ9XVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IHByb3BzIFRoZSBwcm9wZXJ0eSBuYW1lcyB0byBwcm9qZWN0XG4gICAgICogQHBhcmFtIHtBcnJheX0gb2JqcyBUaGUgb2JqZWN0cyB0byBxdWVyeVxuICAgICAqIEByZXR1cm4ge0FycmF5fSBBbiBhcnJheSBvZiBvYmplY3RzIHdpdGgganVzdCB0aGUgYHByb3BzYCBwcm9wZXJ0aWVzLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBhYmJ5ID0ge25hbWU6ICdBYmJ5JywgYWdlOiA3LCBoYWlyOiAnYmxvbmQnLCBncmFkZTogMn07XG4gICAgICogICAgICB2YXIgZnJlZCA9IHtuYW1lOiAnRnJlZCcsIGFnZTogMTIsIGhhaXI6ICdicm93bicsIGdyYWRlOiA3fTtcbiAgICAgKiAgICAgIHZhciBraWRzID0gW2FiYnksIGZyZWRdO1xuICAgICAqICAgICAgUi5wcm9qZWN0KFsnbmFtZScsICdncmFkZSddLCBraWRzKTsgLy89PiBbe25hbWU6ICdBYmJ5JywgZ3JhZGU6IDJ9LCB7bmFtZTogJ0ZyZWQnLCBncmFkZTogN31dXG4gICAgICovXG4gICAgLy8gcGFzc2luZyBgaWRlbnRpdHlgIGdpdmVzIGNvcnJlY3QgYXJpdHlcbiAgICB2YXIgcHJvamVjdCA9IHVzZVdpdGgoX21hcCwgW1xuICAgICAgICBwaWNrQWxsLFxuICAgICAgICBpZGVudGl0eVxuICAgIF0pO1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIHNwZWNpZmllZCBvYmplY3QgcHJvcGVydHkgaXMgZXF1YWwsIGluIGBSLmVxdWFsc2BcbiAgICAgKiB0ZXJtcywgdG8gdGhlIGdpdmVuIHZhbHVlOyBgZmFsc2VgIG90aGVyd2lzZS5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4wXG4gICAgICogQGNhdGVnb3J5IFJlbGF0aW9uXG4gICAgICogQHNpZyBTdHJpbmcgLT4gYSAtPiBPYmplY3QgLT4gQm9vbGVhblxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG4gICAgICogQHBhcmFtIHsqfSB2YWxcbiAgICAgKiBAcGFyYW0geyp9IG9ialxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAgICogQHNlZSBSLmVxdWFscywgUi5wcm9wU2F0aXNmaWVzXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIGFiYnkgPSB7bmFtZTogJ0FiYnknLCBhZ2U6IDcsIGhhaXI6ICdibG9uZCd9O1xuICAgICAqICAgICAgdmFyIGZyZWQgPSB7bmFtZTogJ0ZyZWQnLCBhZ2U6IDEyLCBoYWlyOiAnYnJvd24nfTtcbiAgICAgKiAgICAgIHZhciBydXN0eSA9IHtuYW1lOiAnUnVzdHknLCBhZ2U6IDEwLCBoYWlyOiAnYnJvd24nfTtcbiAgICAgKiAgICAgIHZhciBhbG9pcyA9IHtuYW1lOiAnQWxvaXMnLCBhZ2U6IDE1LCBkaXNwb3NpdGlvbjogJ3N1cmx5J307XG4gICAgICogICAgICB2YXIga2lkcyA9IFthYmJ5LCBmcmVkLCBydXN0eSwgYWxvaXNdO1xuICAgICAqICAgICAgdmFyIGhhc0Jyb3duSGFpciA9IFIucHJvcEVxKCdoYWlyJywgJ2Jyb3duJyk7XG4gICAgICogICAgICBSLmZpbHRlcihoYXNCcm93bkhhaXIsIGtpZHMpOyAvLz0+IFtmcmVkLCBydXN0eV1cbiAgICAgKi9cbiAgICB2YXIgcHJvcEVxID0gX2N1cnJ5MyhmdW5jdGlvbiBwcm9wRXEobmFtZSwgdmFsLCBvYmopIHtcbiAgICAgICAgcmV0dXJuIHByb3BTYXRpc2ZpZXMoZXF1YWxzKHZhbCksIG5hbWUsIG9iaik7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgc3BlY2lmaWVkIG9iamVjdCBwcm9wZXJ0eSBpcyBvZiB0aGUgZ2l2ZW4gdHlwZTtcbiAgICAgKiBgZmFsc2VgIG90aGVyd2lzZS5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMTYuMFxuICAgICAqIEBjYXRlZ29yeSBUeXBlXG4gICAgICogQHNpZyBUeXBlIC0+IFN0cmluZyAtPiBPYmplY3QgLT4gQm9vbGVhblxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHR5cGVcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuICAgICAqIEBwYXJhbSB7Kn0gb2JqXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn1cbiAgICAgKiBAc2VlIFIuaXMsIFIucHJvcFNhdGlzZmllc1xuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIucHJvcElzKE51bWJlciwgJ3gnLCB7eDogMSwgeTogMn0pOyAgLy89PiB0cnVlXG4gICAgICogICAgICBSLnByb3BJcyhOdW1iZXIsICd4Jywge3g6ICdmb28nfSk7ICAgIC8vPT4gZmFsc2VcbiAgICAgKiAgICAgIFIucHJvcElzKE51bWJlciwgJ3gnLCB7fSk7ICAgICAgICAgICAgLy89PiBmYWxzZVxuICAgICAqL1xuICAgIHZhciBwcm9wSXMgPSBfY3VycnkzKGZ1bmN0aW9uIHByb3BJcyh0eXBlLCBuYW1lLCBvYmopIHtcbiAgICAgICAgcmV0dXJuIHByb3BTYXRpc2ZpZXMoaXModHlwZSksIG5hbWUsIG9iaik7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgc2luZ2xlIGl0ZW0gYnkgaXRlcmF0aW5nIHRocm91Z2ggdGhlIGxpc3QsIHN1Y2Nlc3NpdmVseSBjYWxsaW5nXG4gICAgICogdGhlIGl0ZXJhdG9yIGZ1bmN0aW9uIGFuZCBwYXNzaW5nIGl0IGFuIGFjY3VtdWxhdG9yIHZhbHVlIGFuZCB0aGUgY3VycmVudFxuICAgICAqIHZhbHVlIGZyb20gdGhlIGFycmF5LCBhbmQgdGhlbiBwYXNzaW5nIHRoZSByZXN1bHQgdG8gdGhlIG5leHQgY2FsbC5cbiAgICAgKlxuICAgICAqIFRoZSBpdGVyYXRvciBmdW5jdGlvbiByZWNlaXZlcyB0d28gdmFsdWVzOiAqKGFjYywgdmFsdWUpKi4gSXQgbWF5IHVzZVxuICAgICAqIGBSLnJlZHVjZWRgIHRvIHNob3J0Y3V0IHRoZSBpdGVyYXRpb24uXG4gICAgICpcbiAgICAgKiBOb3RlOiBgUi5yZWR1Y2VgIGRvZXMgbm90IHNraXAgZGVsZXRlZCBvciB1bmFzc2lnbmVkIGluZGljZXMgKHNwYXJzZVxuICAgICAqIGFycmF5cyksIHVubGlrZSB0aGUgbmF0aXZlIGBBcnJheS5wcm90b3R5cGUucmVkdWNlYCBtZXRob2QuIEZvciBtb3JlIGRldGFpbHNcbiAgICAgKiBvbiB0aGlzIGJlaGF2aW9yLCBzZWU6XG4gICAgICogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvQXJyYXkvcmVkdWNlI0Rlc2NyaXB0aW9uXG4gICAgICpcbiAgICAgKiBEaXNwYXRjaGVzIHRvIHRoZSBgcmVkdWNlYCBtZXRob2Qgb2YgdGhlIHRoaXJkIGFyZ3VtZW50LCBpZiBwcmVzZW50LlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgKChhLCBiKSAtPiBhKSAtPiBhIC0+IFtiXSAtPiBhXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGl0ZXJhdG9yIGZ1bmN0aW9uLiBSZWNlaXZlcyB0d28gdmFsdWVzLCB0aGUgYWNjdW11bGF0b3IgYW5kIHRoZVxuICAgICAqICAgICAgICBjdXJyZW50IGVsZW1lbnQgZnJvbSB0aGUgYXJyYXkuXG4gICAgICogQHBhcmFtIHsqfSBhY2MgVGhlIGFjY3VtdWxhdG9yIHZhbHVlLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGxpc3QgVGhlIGxpc3QgdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEByZXR1cm4geyp9IFRoZSBmaW5hbCwgYWNjdW11bGF0ZWQgdmFsdWUuXG4gICAgICogQHNlZSBSLnJlZHVjZWQsIFIuYWRkSW5kZXhcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgbnVtYmVycyA9IFsxLCAyLCAzXTtcbiAgICAgKiAgICAgIHZhciBhZGQgPSAoYSwgYikgPT4gYSArIGI7XG4gICAgICpcbiAgICAgKiAgICAgIFIucmVkdWNlKGFkZCwgMTAsIG51bWJlcnMpOyAvLz0+IDE2XG4gICAgICovXG4gICAgdmFyIHJlZHVjZSA9IF9jdXJyeTMoX3JlZHVjZSk7XG5cbiAgICAvKipcbiAgICAgKiBHcm91cHMgdGhlIGVsZW1lbnRzIG9mIHRoZSBsaXN0IGFjY29yZGluZyB0byB0aGUgcmVzdWx0IG9mIGNhbGxpbmdcbiAgICAgKiB0aGUgU3RyaW5nLXJldHVybmluZyBmdW5jdGlvbiBga2V5Rm5gIG9uIGVhY2ggZWxlbWVudCBhbmQgcmVkdWNlcyB0aGUgZWxlbWVudHNcbiAgICAgKiBvZiBlYWNoIGdyb3VwIHRvIGEgc2luZ2xlIHZhbHVlIHZpYSB0aGUgcmVkdWNlciBmdW5jdGlvbiBgdmFsdWVGbmAuXG4gICAgICpcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIGlzIGJhc2ljYWxseSBhIG1vcmUgZ2VuZXJhbCBgZ3JvdXBCeWAgZnVuY3Rpb24uXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjIwLjBcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgKChhLCBiKSAtPiBhKSAtPiBhIC0+IChiIC0+IFN0cmluZykgLT4gW2JdIC0+IHtTdHJpbmc6IGF9XG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gdmFsdWVGbiBUaGUgZnVuY3Rpb24gdGhhdCByZWR1Y2VzIHRoZSBlbGVtZW50cyBvZiBlYWNoIGdyb3VwIHRvIGEgc2luZ2xlXG4gICAgICogICAgICAgIHZhbHVlLiBSZWNlaXZlcyB0d28gdmFsdWVzLCBhY2N1bXVsYXRvciBmb3IgYSBwYXJ0aWN1bGFyIGdyb3VwIGFuZCB0aGUgY3VycmVudCBlbGVtZW50LlxuICAgICAqIEBwYXJhbSB7Kn0gYWNjIFRoZSAoaW5pdGlhbCkgYWNjdW11bGF0b3IgdmFsdWUgZm9yIGVhY2ggZ3JvdXAuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0ga2V5Rm4gVGhlIGZ1bmN0aW9uIHRoYXQgbWFwcyB0aGUgbGlzdCdzIGVsZW1lbnQgaW50byBhIGtleS5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBsaXN0IFRoZSBhcnJheSB0byBncm91cC5cbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IEFuIG9iamVjdCB3aXRoIHRoZSBvdXRwdXQgb2YgYGtleUZuYCBmb3Iga2V5cywgbWFwcGVkIHRvIHRoZSBvdXRwdXQgb2ZcbiAgICAgKiAgICAgICAgIGB2YWx1ZUZuYCBmb3IgZWxlbWVudHMgd2hpY2ggcHJvZHVjZWQgdGhhdCBrZXkgd2hlbiBwYXNzZWQgdG8gYGtleUZuYC5cbiAgICAgKiBAc2VlIFIuZ3JvdXBCeSwgUi5yZWR1Y2VcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgcmVkdWNlVG9OYW1lc0J5ID0gUi5yZWR1Y2VCeSgoYWNjLCBzdHVkZW50KSA9PiBhY2MuY29uY2F0KHN0dWRlbnQubmFtZSksIFtdKTtcbiAgICAgKiAgICAgIHZhciBuYW1lc0J5R3JhZGUgPSByZWR1Y2VUb05hbWVzQnkoZnVuY3Rpb24oc3R1ZGVudCkge1xuICAgICAqICAgICAgICB2YXIgc2NvcmUgPSBzdHVkZW50LnNjb3JlO1xuICAgICAqICAgICAgICByZXR1cm4gc2NvcmUgPCA2NSA/ICdGJyA6XG4gICAgICogICAgICAgICAgICAgICBzY29yZSA8IDcwID8gJ0QnIDpcbiAgICAgKiAgICAgICAgICAgICAgIHNjb3JlIDwgODAgPyAnQycgOlxuICAgICAqICAgICAgICAgICAgICAgc2NvcmUgPCA5MCA/ICdCJyA6ICdBJztcbiAgICAgKiAgICAgIH0pO1xuICAgICAqICAgICAgdmFyIHN0dWRlbnRzID0gW3tuYW1lOiAnTHVjeScsIHNjb3JlOiA5Mn0sXG4gICAgICogICAgICAgICAgICAgICAgICAgICAge25hbWU6ICdEcmV3Jywgc2NvcmU6IDg1fSxcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAvLyAuLi5cbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICB7bmFtZTogJ0JhcnQnLCBzY29yZTogNjJ9XTtcbiAgICAgKiAgICAgIG5hbWVzQnlHcmFkZShzdHVkZW50cyk7XG4gICAgICogICAgICAvLyB7XG4gICAgICogICAgICAvLyAgICdBJzogWydMdWN5J10sXG4gICAgICogICAgICAvLyAgICdCJzogWydEcmV3J11cbiAgICAgKiAgICAgIC8vICAgLy8gLi4uLFxuICAgICAqICAgICAgLy8gICAnRic6IFsnQmFydCddXG4gICAgICogICAgICAvLyB9XG4gICAgICovXG4gICAgdmFyIHJlZHVjZUJ5ID0gX2N1cnJ5Tig0LCBbXSwgZnVuY3Rpb24gcmVkdWNlQnkodmFsdWVGbiwgdmFsdWVBY2MsIGtleUZuLCBsaXN0KSB7XG4gICAgICAgIHJldHVybiBfcmVkdWNlKGZ1bmN0aW9uIChhY2MsIGVsdCkge1xuICAgICAgICAgICAgdmFyIGtleSA9IGtleUZuKGVsdCk7XG4gICAgICAgICAgICBhY2Nba2V5XSA9IHZhbHVlRm4oX2hhcyhrZXksIGFjYykgPyBhY2Nba2V5XSA6IHZhbHVlQWNjLCBlbHQpO1xuICAgICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgfSwge30sIGxpc3QpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGNvbXBsZW1lbnQgb2YgYGZpbHRlcmAuXG4gICAgICpcbiAgICAgKiBBY3RzIGFzIGEgdHJhbnNkdWNlciBpZiBhIHRyYW5zZm9ybWVyIGlzIGdpdmVuIGluIGxpc3QgcG9zaXRpb24uXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyBGaWx0ZXJhYmxlIGYgPT4gKGEgLT4gQm9vbGVhbikgLT4gZiBhIC0+IGYgYVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHByZWRcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBmaWx0ZXJhYmxlXG4gICAgICogQHJldHVybiB7QXJyYXl9XG4gICAgICogQHNlZSBSLmZpbHRlciwgUi50cmFuc2R1Y2UsIFIuYWRkSW5kZXhcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgaXNPZGQgPSAobikgPT4gbiAlIDIgPT09IDE7XG4gICAgICpcbiAgICAgKiAgICAgIFIucmVqZWN0KGlzT2RkLCBbMSwgMiwgMywgNF0pOyAvLz0+IFsyLCA0XVxuICAgICAqXG4gICAgICogICAgICBSLnJlamVjdChpc09kZCwge2E6IDEsIGI6IDIsIGM6IDMsIGQ6IDR9KTsgLy89PiB7YjogMiwgZDogNH1cbiAgICAgKi9cbiAgICB2YXIgcmVqZWN0ID0gX2N1cnJ5MihmdW5jdGlvbiByZWplY3QocHJlZCwgZmlsdGVyYWJsZSkge1xuICAgICAgICByZXR1cm4gZmlsdGVyKF9jb21wbGVtZW50KHByZWQpLCBmaWx0ZXJhYmxlKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBmaXhlZCBsaXN0IG9mIHNpemUgYG5gIGNvbnRhaW5pbmcgYSBzcGVjaWZpZWQgaWRlbnRpY2FsIHZhbHVlLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjFcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgYSAtPiBuIC0+IFthXVxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHJlcGVhdC5cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gbiBUaGUgZGVzaXJlZCBzaXplIG9mIHRoZSBvdXRwdXQgbGlzdC5cbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gQSBuZXcgYXJyYXkgY29udGFpbmluZyBgbmAgYHZhbHVlYHMuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5yZXBlYXQoJ2hpJywgNSk7IC8vPT4gWydoaScsICdoaScsICdoaScsICdoaScsICdoaSddXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBvYmogPSB7fTtcbiAgICAgKiAgICAgIHZhciByZXBlYXRlZE9ianMgPSBSLnJlcGVhdChvYmosIDUpOyAvLz0+IFt7fSwge30sIHt9LCB7fSwge31dXG4gICAgICogICAgICByZXBlYXRlZE9ianNbMF0gPT09IHJlcGVhdGVkT2Jqc1sxXTsgLy89PiB0cnVlXG4gICAgICovXG4gICAgdmFyIHJlcGVhdCA9IF9jdXJyeTIoZnVuY3Rpb24gcmVwZWF0KHZhbHVlLCBuKSB7XG4gICAgICAgIHJldHVybiB0aW1lcyhhbHdheXModmFsdWUpLCBuKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIEFkZHMgdG9nZXRoZXIgYWxsIHRoZSBlbGVtZW50cyBvZiBhIGxpc3QuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBNYXRoXG4gICAgICogQHNpZyBbTnVtYmVyXSAtPiBOdW1iZXJcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBsaXN0IEFuIGFycmF5IG9mIG51bWJlcnNcbiAgICAgKiBAcmV0dXJuIHtOdW1iZXJ9IFRoZSBzdW0gb2YgYWxsIHRoZSBudW1iZXJzIGluIHRoZSBsaXN0LlxuICAgICAqIEBzZWUgUi5yZWR1Y2VcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLnN1bShbMiw0LDYsOCwxMDAsMV0pOyAvLz0+IDEyMVxuICAgICAqL1xuICAgIHZhciBzdW0gPSByZWR1Y2UoYWRkLCAwKTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBuZXcgbGlzdCBjb250YWluaW5nIHRoZSBsYXN0IGBuYCBlbGVtZW50cyBvZiB0aGUgZ2l2ZW4gbGlzdC5cbiAgICAgKiBJZiBgbiA+IGxpc3QubGVuZ3RoYCwgcmV0dXJucyBhIGxpc3Qgb2YgYGxpc3QubGVuZ3RoYCBlbGVtZW50cy5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMTYuMFxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyBOdW1iZXIgLT4gW2FdIC0+IFthXVxuICAgICAqIEBzaWcgTnVtYmVyIC0+IFN0cmluZyAtPiBTdHJpbmdcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gbiBUaGUgbnVtYmVyIG9mIGVsZW1lbnRzIHRvIHJldHVybi5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSB4cyBUaGUgY29sbGVjdGlvbiB0byBjb25zaWRlci5cbiAgICAgKiBAcmV0dXJuIHtBcnJheX1cbiAgICAgKiBAc2VlIFIuZHJvcExhc3RcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLnRha2VMYXN0KDEsIFsnZm9vJywgJ2JhcicsICdiYXonXSk7IC8vPT4gWydiYXonXVxuICAgICAqICAgICAgUi50YWtlTGFzdCgyLCBbJ2ZvbycsICdiYXInLCAnYmF6J10pOyAvLz0+IFsnYmFyJywgJ2JheiddXG4gICAgICogICAgICBSLnRha2VMYXN0KDMsIFsnZm9vJywgJ2JhcicsICdiYXonXSk7IC8vPT4gWydmb28nLCAnYmFyJywgJ2JheiddXG4gICAgICogICAgICBSLnRha2VMYXN0KDQsIFsnZm9vJywgJ2JhcicsICdiYXonXSk7IC8vPT4gWydmb28nLCAnYmFyJywgJ2JheiddXG4gICAgICogICAgICBSLnRha2VMYXN0KDMsICdyYW1kYScpOyAgICAgICAgICAgICAgIC8vPT4gJ21kYSdcbiAgICAgKi9cbiAgICB2YXIgdGFrZUxhc3QgPSBfY3VycnkyKGZ1bmN0aW9uIHRha2VMYXN0KG4sIHhzKSB7XG4gICAgICAgIHJldHVybiBkcm9wKG4gPj0gMCA/IHhzLmxlbmd0aCAtIG4gOiAwLCB4cyk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplcyBhIHRyYW5zZHVjZXIgdXNpbmcgc3VwcGxpZWQgaXRlcmF0b3IgZnVuY3Rpb24uIFJldHVybnMgYSBzaW5nbGVcbiAgICAgKiBpdGVtIGJ5IGl0ZXJhdGluZyB0aHJvdWdoIHRoZSBsaXN0LCBzdWNjZXNzaXZlbHkgY2FsbGluZyB0aGUgdHJhbnNmb3JtZWRcbiAgICAgKiBpdGVyYXRvciBmdW5jdGlvbiBhbmQgcGFzc2luZyBpdCBhbiBhY2N1bXVsYXRvciB2YWx1ZSBhbmQgdGhlIGN1cnJlbnQgdmFsdWVcbiAgICAgKiBmcm9tIHRoZSBhcnJheSwgYW5kIHRoZW4gcGFzc2luZyB0aGUgcmVzdWx0IHRvIHRoZSBuZXh0IGNhbGwuXG4gICAgICpcbiAgICAgKiBUaGUgaXRlcmF0b3IgZnVuY3Rpb24gcmVjZWl2ZXMgdHdvIHZhbHVlczogKihhY2MsIHZhbHVlKSouIEl0IHdpbGwgYmVcbiAgICAgKiB3cmFwcGVkIGFzIGEgdHJhbnNmb3JtZXIgdG8gaW5pdGlhbGl6ZSB0aGUgdHJhbnNkdWNlci4gQSB0cmFuc2Zvcm1lciBjYW4gYmVcbiAgICAgKiBwYXNzZWQgZGlyZWN0bHkgaW4gcGxhY2Ugb2YgYW4gaXRlcmF0b3IgZnVuY3Rpb24uIEluIGJvdGggY2FzZXMsIGl0ZXJhdGlvblxuICAgICAqIG1heSBiZSBzdG9wcGVkIGVhcmx5IHdpdGggdGhlIGBSLnJlZHVjZWRgIGZ1bmN0aW9uLlxuICAgICAqXG4gICAgICogQSB0cmFuc2R1Y2VyIGlzIGEgZnVuY3Rpb24gdGhhdCBhY2NlcHRzIGEgdHJhbnNmb3JtZXIgYW5kIHJldHVybnMgYVxuICAgICAqIHRyYW5zZm9ybWVyIGFuZCBjYW4gYmUgY29tcG9zZWQgZGlyZWN0bHkuXG4gICAgICpcbiAgICAgKiBBIHRyYW5zZm9ybWVyIGlzIGFuIGFuIG9iamVjdCB0aGF0IHByb3ZpZGVzIGEgMi1hcml0eSByZWR1Y2luZyBpdGVyYXRvclxuICAgICAqIGZ1bmN0aW9uLCBzdGVwLCAwLWFyaXR5IGluaXRpYWwgdmFsdWUgZnVuY3Rpb24sIGluaXQsIGFuZCAxLWFyaXR5IHJlc3VsdFxuICAgICAqIGV4dHJhY3Rpb24gZnVuY3Rpb24sIHJlc3VsdC4gVGhlIHN0ZXAgZnVuY3Rpb24gaXMgdXNlZCBhcyB0aGUgaXRlcmF0b3JcbiAgICAgKiBmdW5jdGlvbiBpbiByZWR1Y2UuIFRoZSByZXN1bHQgZnVuY3Rpb24gaXMgdXNlZCB0byBjb252ZXJ0IHRoZSBmaW5hbFxuICAgICAqIGFjY3VtdWxhdG9yIGludG8gdGhlIHJldHVybiB0eXBlIGFuZCBpbiBtb3N0IGNhc2VzIGlzIFIuaWRlbnRpdHkuIFRoZSBpbml0XG4gICAgICogZnVuY3Rpb24gY2FuIGJlIHVzZWQgdG8gcHJvdmlkZSBhbiBpbml0aWFsIGFjY3VtdWxhdG9yLCBidXQgaXMgaWdub3JlZCBieVxuICAgICAqIHRyYW5zZHVjZS5cbiAgICAgKlxuICAgICAqIFRoZSBpdGVyYXRpb24gaXMgcGVyZm9ybWVkIHdpdGggUi5yZWR1Y2UgYWZ0ZXIgaW5pdGlhbGl6aW5nIHRoZSB0cmFuc2R1Y2VyLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xMi4wXG4gICAgICogQGNhdGVnb3J5IExpc3RcbiAgICAgKiBAc2lnIChjIC0+IGMpIC0+IChhLGIgLT4gYSkgLT4gYSAtPiBbYl0gLT4gYVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHhmIFRoZSB0cmFuc2R1Y2VyIGZ1bmN0aW9uLiBSZWNlaXZlcyBhIHRyYW5zZm9ybWVyIGFuZCByZXR1cm5zIGEgdHJhbnNmb3JtZXIuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGl0ZXJhdG9yIGZ1bmN0aW9uLiBSZWNlaXZlcyB0d28gdmFsdWVzLCB0aGUgYWNjdW11bGF0b3IgYW5kIHRoZVxuICAgICAqICAgICAgICBjdXJyZW50IGVsZW1lbnQgZnJvbSB0aGUgYXJyYXkuIFdyYXBwZWQgYXMgdHJhbnNmb3JtZXIsIGlmIG5lY2Vzc2FyeSwgYW5kIHVzZWQgdG9cbiAgICAgKiAgICAgICAgaW5pdGlhbGl6ZSB0aGUgdHJhbnNkdWNlclxuICAgICAqIEBwYXJhbSB7Kn0gYWNjIFRoZSBpbml0aWFsIGFjY3VtdWxhdG9yIHZhbHVlLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGxpc3QgVGhlIGxpc3QgdG8gaXRlcmF0ZSBvdmVyLlxuICAgICAqIEByZXR1cm4geyp9IFRoZSBmaW5hbCwgYWNjdW11bGF0ZWQgdmFsdWUuXG4gICAgICogQHNlZSBSLnJlZHVjZSwgUi5yZWR1Y2VkLCBSLmludG9cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgbnVtYmVycyA9IFsxLCAyLCAzLCA0XTtcbiAgICAgKiAgICAgIHZhciB0cmFuc2R1Y2VyID0gUi5jb21wb3NlKFIubWFwKFIuYWRkKDEpKSwgUi50YWtlKDIpKTtcbiAgICAgKlxuICAgICAqICAgICAgUi50cmFuc2R1Y2UodHJhbnNkdWNlciwgUi5mbGlwKFIuYXBwZW5kKSwgW10sIG51bWJlcnMpOyAvLz0+IFsyLCAzXVxuICAgICAqL1xuICAgIHZhciB0cmFuc2R1Y2UgPSBjdXJyeU4oNCwgZnVuY3Rpb24gdHJhbnNkdWNlKHhmLCBmbiwgYWNjLCBsaXN0KSB7XG4gICAgICAgIHJldHVybiBfcmVkdWNlKHhmKHR5cGVvZiBmbiA9PT0gJ2Z1bmN0aW9uJyA/IF94d3JhcChmbikgOiBmbiksIGFjYywgbGlzdCk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBDb21iaW5lcyB0d28gbGlzdHMgaW50byBhIHNldCAoaS5lLiBubyBkdXBsaWNhdGVzKSBjb21wb3NlZCBvZiB0aGUgZWxlbWVudHNcbiAgICAgKiBvZiBlYWNoIGxpc3QuIER1cGxpY2F0aW9uIGlzIGRldGVybWluZWQgYWNjb3JkaW5nIHRvIHRoZSB2YWx1ZSByZXR1cm5lZCBieVxuICAgICAqIGFwcGx5aW5nIHRoZSBzdXBwbGllZCBwcmVkaWNhdGUgdG8gdHdvIGxpc3QgZWxlbWVudHMuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBSZWxhdGlvblxuICAgICAqIEBzaWcgKGEgLT4gYSAtPiBCb29sZWFuKSAtPiBbKl0gLT4gWypdIC0+IFsqXVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHByZWQgQSBwcmVkaWNhdGUgdXNlZCB0byB0ZXN0IHdoZXRoZXIgdHdvIGl0ZW1zIGFyZSBlcXVhbC5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBsaXN0MSBUaGUgZmlyc3QgbGlzdC5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBsaXN0MiBUaGUgc2Vjb25kIGxpc3QuXG4gICAgICogQHJldHVybiB7QXJyYXl9IFRoZSBmaXJzdCBhbmQgc2Vjb25kIGxpc3RzIGNvbmNhdGVuYXRlZCwgd2l0aFxuICAgICAqICAgICAgICAgZHVwbGljYXRlcyByZW1vdmVkLlxuICAgICAqIEBzZWUgUi51bmlvblxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBsMSA9IFt7YTogMX0sIHthOiAyfV07XG4gICAgICogICAgICB2YXIgbDIgPSBbe2E6IDF9LCB7YTogNH1dO1xuICAgICAqICAgICAgUi51bmlvbldpdGgoUi5lcUJ5KFIucHJvcCgnYScpKSwgbDEsIGwyKTsgLy89PiBbe2E6IDF9LCB7YTogMn0sIHthOiA0fV1cbiAgICAgKi9cbiAgICB2YXIgdW5pb25XaXRoID0gX2N1cnJ5MyhmdW5jdGlvbiB1bmlvbldpdGgocHJlZCwgbGlzdDEsIGxpc3QyKSB7XG4gICAgICAgIHJldHVybiB1bmlxV2l0aChwcmVkLCBfY29uY2F0KGxpc3QxLCBsaXN0MikpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogVGFrZXMgYSBzcGVjIG9iamVjdCBhbmQgYSB0ZXN0IG9iamVjdDsgcmV0dXJucyB0cnVlIGlmIHRoZSB0ZXN0IHNhdGlzZmllc1xuICAgICAqIHRoZSBzcGVjLCBmYWxzZSBvdGhlcndpc2UuIEFuIG9iamVjdCBzYXRpc2ZpZXMgdGhlIHNwZWMgaWYsIGZvciBlYWNoIG9mIHRoZVxuICAgICAqIHNwZWMncyBvd24gcHJvcGVydGllcywgYWNjZXNzaW5nIHRoYXQgcHJvcGVydHkgb2YgdGhlIG9iamVjdCBnaXZlcyB0aGUgc2FtZVxuICAgICAqIHZhbHVlIChpbiBgUi5lcXVhbHNgIHRlcm1zKSBhcyBhY2Nlc3NpbmcgdGhhdCBwcm9wZXJ0eSBvZiB0aGUgc3BlYy5cbiAgICAgKlxuICAgICAqIGB3aGVyZUVxYCBpcyBhIHNwZWNpYWxpemF0aW9uIG9mIFtgd2hlcmVgXSgjd2hlcmUpLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xNC4wXG4gICAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgICAqIEBzaWcge1N0cmluZzogKn0gLT4ge1N0cmluZzogKn0gLT4gQm9vbGVhblxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBzcGVjXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHRlc3RPYmpcbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgICAqIEBzZWUgUi53aGVyZVxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIC8vIHByZWQgOjogT2JqZWN0IC0+IEJvb2xlYW5cbiAgICAgKiAgICAgIHZhciBwcmVkID0gUi53aGVyZUVxKHthOiAxLCBiOiAyfSk7XG4gICAgICpcbiAgICAgKiAgICAgIHByZWQoe2E6IDF9KTsgICAgICAgICAgICAgIC8vPT4gZmFsc2VcbiAgICAgKiAgICAgIHByZWQoe2E6IDEsIGI6IDJ9KTsgICAgICAgIC8vPT4gdHJ1ZVxuICAgICAqICAgICAgcHJlZCh7YTogMSwgYjogMiwgYzogM30pOyAgLy89PiB0cnVlXG4gICAgICogICAgICBwcmVkKHthOiAxLCBiOiAxfSk7ICAgICAgICAvLz0+IGZhbHNlXG4gICAgICovXG4gICAgdmFyIHdoZXJlRXEgPSBfY3VycnkyKGZ1bmN0aW9uIHdoZXJlRXEoc3BlYywgdGVzdE9iaikge1xuICAgICAgICByZXR1cm4gd2hlcmUobWFwKGVxdWFscywgc3BlYyksIHRlc3RPYmopO1xuICAgIH0pO1xuXG4gICAgdmFyIF9mbGF0Q2F0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcHJlc2VydmluZ1JlZHVjZWQgPSBmdW5jdGlvbiAoeGYpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgJ0BAdHJhbnNkdWNlci9pbml0JzogX3hmQmFzZS5pbml0LFxuICAgICAgICAgICAgICAgICdAQHRyYW5zZHVjZXIvcmVzdWx0JzogZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4geGZbJ0BAdHJhbnNkdWNlci9yZXN1bHQnXShyZXN1bHQpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgJ0BAdHJhbnNkdWNlci9zdGVwJzogZnVuY3Rpb24gKHJlc3VsdCwgaW5wdXQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJldCA9IHhmWydAQHRyYW5zZHVjZXIvc3RlcCddKHJlc3VsdCwgaW5wdXQpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmV0WydAQHRyYW5zZHVjZXIvcmVkdWNlZCddID8gX2ZvcmNlUmVkdWNlZChyZXQpIDogcmV0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBfeGNhdCh4Zikge1xuICAgICAgICAgICAgdmFyIHJ4ZiA9IHByZXNlcnZpbmdSZWR1Y2VkKHhmKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgJ0BAdHJhbnNkdWNlci9pbml0JzogX3hmQmFzZS5pbml0LFxuICAgICAgICAgICAgICAgICdAQHRyYW5zZHVjZXIvcmVzdWx0JzogZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcnhmWydAQHRyYW5zZHVjZXIvcmVzdWx0J10ocmVzdWx0KTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICdAQHRyYW5zZHVjZXIvc3RlcCc6IGZ1bmN0aW9uIChyZXN1bHQsIGlucHV0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAhaXNBcnJheUxpa2UoaW5wdXQpID8gX3JlZHVjZShyeGYsIHJlc3VsdCwgW2lucHV0XSkgOiBfcmVkdWNlKHJ4ZiwgcmVzdWx0LCBpbnB1dCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICB9KCk7XG5cbiAgICAvLyBBcnJheS5wcm90b3R5cGUuaW5kZXhPZiBkb2Vzbid0IGV4aXN0IGJlbG93IElFOVxuICAgIC8vIG1hbnVhbGx5IGNyYXdsIHRoZSBsaXN0IHRvIGRpc3Rpbmd1aXNoIGJldHdlZW4gKzAgYW5kIC0wXG4gICAgLy8gTmFOXG4gICAgLy8gbm9uLXplcm8gbnVtYmVycyBjYW4gdXRpbGlzZSBTZXRcbiAgICAvLyBhbGwgdGhlc2UgdHlwZXMgY2FuIHV0aWxpc2UgU2V0XG4gICAgLy8gbnVsbCBjYW4gdXRpbGlzZSBTZXRcbiAgICAvLyBhbnl0aGluZyBlbHNlIG5vdCBjb3ZlcmVkIGFib3ZlLCBkZWZlciB0byBSLmVxdWFsc1xuICAgIHZhciBfaW5kZXhPZiA9IGZ1bmN0aW9uIF9pbmRleE9mKGxpc3QsIGEsIGlkeCkge1xuICAgICAgICB2YXIgaW5mLCBpdGVtO1xuICAgICAgICAvLyBBcnJheS5wcm90b3R5cGUuaW5kZXhPZiBkb2Vzbid0IGV4aXN0IGJlbG93IElFOVxuICAgICAgICBpZiAodHlwZW9mIGxpc3QuaW5kZXhPZiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgc3dpdGNoICh0eXBlb2YgYSkge1xuICAgICAgICAgICAgY2FzZSAnbnVtYmVyJzpcbiAgICAgICAgICAgICAgICBpZiAoYSA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBtYW51YWxseSBjcmF3bCB0aGUgbGlzdCB0byBkaXN0aW5ndWlzaCBiZXR3ZWVuICswIGFuZCAtMFxuICAgICAgICAgICAgICAgICAgICBpbmYgPSAxIC8gYTtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKGlkeCA8IGxpc3QubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtID0gbGlzdFtpZHhdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW0gPT09IDAgJiYgMSAvIGl0ZW0gPT09IGluZikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpZHg7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZHggKz0gMTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhICE9PSBhKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIE5hTlxuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoaWR4IDwgbGlzdC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0gPSBsaXN0W2lkeF07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGl0ZW0gPT09ICdudW1iZXInICYmIGl0ZW0gIT09IGl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaWR4O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWR4ICs9IDE7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBub24temVybyBudW1iZXJzIGNhbiB1dGlsaXNlIFNldFxuICAgICAgICAgICAgICAgIHJldHVybiBsaXN0LmluZGV4T2YoYSwgaWR4KTtcbiAgICAgICAgICAgIC8vIGFsbCB0aGVzZSB0eXBlcyBjYW4gdXRpbGlzZSBTZXRcbiAgICAgICAgICAgIGNhc2UgJ3N0cmluZyc6XG4gICAgICAgICAgICBjYXNlICdib29sZWFuJzpcbiAgICAgICAgICAgIGNhc2UgJ2Z1bmN0aW9uJzpcbiAgICAgICAgICAgIGNhc2UgJ3VuZGVmaW5lZCc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGxpc3QuaW5kZXhPZihhLCBpZHgpO1xuICAgICAgICAgICAgY2FzZSAnb2JqZWN0JzpcbiAgICAgICAgICAgICAgICBpZiAoYSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBudWxsIGNhbiB1dGlsaXNlIFNldFxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbGlzdC5pbmRleE9mKGEsIGlkeCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIGFueXRoaW5nIGVsc2Ugbm90IGNvdmVyZWQgYWJvdmUsIGRlZmVyIHRvIFIuZXF1YWxzXG4gICAgICAgIHdoaWxlIChpZHggPCBsaXN0Lmxlbmd0aCkge1xuICAgICAgICAgICAgaWYgKGVxdWFscyhsaXN0W2lkeF0sIGEpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGlkeDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlkeCArPSAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAtMTtcbiAgICB9O1xuXG4gICAgdmFyIF94Y2hhaW4gPSBfY3VycnkyKGZ1bmN0aW9uIF94Y2hhaW4oZiwgeGYpIHtcbiAgICAgICAgcmV0dXJuIG1hcChmLCBfZmxhdENhdCh4ZikpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogVGFrZXMgYSBsaXN0IG9mIHByZWRpY2F0ZXMgYW5kIHJldHVybnMgYSBwcmVkaWNhdGUgdGhhdCByZXR1cm5zIHRydWUgZm9yIGFcbiAgICAgKiBnaXZlbiBsaXN0IG9mIGFyZ3VtZW50cyBpZiBldmVyeSBvbmUgb2YgdGhlIHByb3ZpZGVkIHByZWRpY2F0ZXMgaXMgc2F0aXNmaWVkXG4gICAgICogYnkgdGhvc2UgYXJndW1lbnRzLlxuICAgICAqXG4gICAgICogVGhlIGZ1bmN0aW9uIHJldHVybmVkIGlzIGEgY3VycmllZCBmdW5jdGlvbiB3aG9zZSBhcml0eSBtYXRjaGVzIHRoYXQgb2YgdGhlXG4gICAgICogaGlnaGVzdC1hcml0eSBwcmVkaWNhdGUuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjkuMFxuICAgICAqIEBjYXRlZ29yeSBMb2dpY1xuICAgICAqIEBzaWcgWygqLi4uIC0+IEJvb2xlYW4pXSAtPiAoKi4uLiAtPiBCb29sZWFuKVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IHByZWRzXG4gICAgICogQHJldHVybiB7RnVuY3Rpb259XG4gICAgICogQHNlZSBSLmFueVBhc3NcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgaXNRdWVlbiA9IFIucHJvcEVxKCdyYW5rJywgJ1EnKTtcbiAgICAgKiAgICAgIHZhciBpc1NwYWRlID0gUi5wcm9wRXEoJ3N1aXQnLCAn4pmg77iOJyk7XG4gICAgICogICAgICB2YXIgaXNRdWVlbk9mU3BhZGVzID0gUi5hbGxQYXNzKFtpc1F1ZWVuLCBpc1NwYWRlXSk7XG4gICAgICpcbiAgICAgKiAgICAgIGlzUXVlZW5PZlNwYWRlcyh7cmFuazogJ1EnLCBzdWl0OiAn4pmj77iOJ30pOyAvLz0+IGZhbHNlXG4gICAgICogICAgICBpc1F1ZWVuT2ZTcGFkZXMoe3Jhbms6ICdRJywgc3VpdDogJ+KZoO+4jid9KTsgLy89PiB0cnVlXG4gICAgICovXG4gICAgdmFyIGFsbFBhc3MgPSBfY3VycnkxKGZ1bmN0aW9uIGFsbFBhc3MocHJlZHMpIHtcbiAgICAgICAgcmV0dXJuIGN1cnJ5TihyZWR1Y2UobWF4LCAwLCBwbHVjaygnbGVuZ3RoJywgcHJlZHMpKSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGlkeCA9IDA7XG4gICAgICAgICAgICB2YXIgbGVuID0gcHJlZHMubGVuZ3RoO1xuICAgICAgICAgICAgd2hpbGUgKGlkeCA8IGxlbikge1xuICAgICAgICAgICAgICAgIGlmICghcHJlZHNbaWR4XS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWR4ICs9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGB0cnVlYCBpZiBhbGwgZWxlbWVudHMgYXJlIHVuaXF1ZSwgaW4gYFIuZXF1YWxzYCB0ZXJtcywgb3RoZXJ3aXNlXG4gICAgICogYGZhbHNlYC5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMTguMFxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyBbYV0gLT4gQm9vbGVhblxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGxpc3QgVGhlIGFycmF5IHRvIGNvbnNpZGVyLlxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IGB0cnVlYCBpZiBhbGwgZWxlbWVudHMgYXJlIHVuaXF1ZSwgZWxzZSBgZmFsc2VgLlxuICAgICAqIEBkZXByZWNhdGVkIHNpbmNlIHYwLjIwLjBcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLmFsbFVuaXEoWycxJywgMV0pOyAvLz0+IHRydWVcbiAgICAgKiAgICAgIFIuYWxsVW5pcShbMSwgMV0pOyAgIC8vPT4gZmFsc2VcbiAgICAgKiAgICAgIFIuYWxsVW5pcShbWzQyXSwgWzQyXV0pOyAvLz0+IGZhbHNlXG4gICAgICovXG4gICAgdmFyIGFsbFVuaXEgPSBfY3VycnkxKGZ1bmN0aW9uIGFsbFVuaXEobGlzdCkge1xuICAgICAgICB2YXIgbGVuID0gbGlzdC5sZW5ndGg7XG4gICAgICAgIHZhciBpZHggPSAwO1xuICAgICAgICB3aGlsZSAoaWR4IDwgbGVuKSB7XG4gICAgICAgICAgICBpZiAoX2luZGV4T2YobGlzdCwgbGlzdFtpZHhdLCBpZHggKyAxKSA+PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWR4ICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBUYWtlcyBhIGxpc3Qgb2YgcHJlZGljYXRlcyBhbmQgcmV0dXJucyBhIHByZWRpY2F0ZSB0aGF0IHJldHVybnMgdHJ1ZSBmb3IgYVxuICAgICAqIGdpdmVuIGxpc3Qgb2YgYXJndW1lbnRzIGlmIGF0IGxlYXN0IG9uZSBvZiB0aGUgcHJvdmlkZWQgcHJlZGljYXRlcyBpc1xuICAgICAqIHNhdGlzZmllZCBieSB0aG9zZSBhcmd1bWVudHMuXG4gICAgICpcbiAgICAgKiBUaGUgZnVuY3Rpb24gcmV0dXJuZWQgaXMgYSBjdXJyaWVkIGZ1bmN0aW9uIHdob3NlIGFyaXR5IG1hdGNoZXMgdGhhdCBvZiB0aGVcbiAgICAgKiBoaWdoZXN0LWFyaXR5IHByZWRpY2F0ZS5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuOS4wXG4gICAgICogQGNhdGVnb3J5IExvZ2ljXG4gICAgICogQHNpZyBbKCouLi4gLT4gQm9vbGVhbildIC0+ICgqLi4uIC0+IEJvb2xlYW4pXG4gICAgICogQHBhcmFtIHtBcnJheX0gcHJlZHNcbiAgICAgKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAgICAgKiBAc2VlIFIuYWxsUGFzc1xuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBndGUgPSBSLmFueVBhc3MoW1IuZ3QsIFIuZXF1YWxzXSk7XG4gICAgICpcbiAgICAgKiAgICAgIGd0ZSgzLCAyKTsgLy89PiB0cnVlXG4gICAgICogICAgICBndGUoMiwgMik7IC8vPT4gdHJ1ZVxuICAgICAqICAgICAgZ3RlKDIsIDMpOyAvLz0+IGZhbHNlXG4gICAgICovXG4gICAgdmFyIGFueVBhc3MgPSBfY3VycnkxKGZ1bmN0aW9uIGFueVBhc3MocHJlZHMpIHtcbiAgICAgICAgcmV0dXJuIGN1cnJ5TihyZWR1Y2UobWF4LCAwLCBwbHVjaygnbGVuZ3RoJywgcHJlZHMpKSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGlkeCA9IDA7XG4gICAgICAgICAgICB2YXIgbGVuID0gcHJlZHMubGVuZ3RoO1xuICAgICAgICAgICAgd2hpbGUgKGlkeCA8IGxlbikge1xuICAgICAgICAgICAgICAgIGlmIChwcmVkc1tpZHhdLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlkeCArPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIGFwIGFwcGxpZXMgYSBsaXN0IG9mIGZ1bmN0aW9ucyB0byBhIGxpc3Qgb2YgdmFsdWVzLlxuICAgICAqXG4gICAgICogRGlzcGF0Y2hlcyB0byB0aGUgYGFwYCBtZXRob2Qgb2YgdGhlIHNlY29uZCBhcmd1bWVudCwgaWYgcHJlc2VudC4gQWxzb1xuICAgICAqIHRyZWF0cyBmdW5jdGlvbnMgYXMgYXBwbGljYXRpdmVzLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4zLjBcbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICAgKiBAc2lnIFtmXSAtPiBbYV0gLT4gW2YgYV1cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBmbnMgQW4gYXJyYXkgb2YgZnVuY3Rpb25zXG4gICAgICogQHBhcmFtIHtBcnJheX0gdnMgQW4gYXJyYXkgb2YgdmFsdWVzXG4gICAgICogQHJldHVybiB7QXJyYXl9IEFuIGFycmF5IG9mIHJlc3VsdHMgb2YgYXBwbHlpbmcgZWFjaCBvZiBgZm5zYCB0byBhbGwgb2YgYHZzYCBpbiB0dXJuLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIuYXAoW1IubXVsdGlwbHkoMiksIFIuYWRkKDMpXSwgWzEsMiwzXSk7IC8vPT4gWzIsIDQsIDYsIDQsIDUsIDZdXG4gICAgICovXG4gICAgLy8gZWxzZVxuICAgIHZhciBhcCA9IF9jdXJyeTIoZnVuY3Rpb24gYXAoYXBwbGljYXRpdmUsIGZuKSB7XG4gICAgICAgIHJldHVybiB0eXBlb2YgYXBwbGljYXRpdmUuYXAgPT09ICdmdW5jdGlvbicgPyBhcHBsaWNhdGl2ZS5hcChmbikgOiB0eXBlb2YgYXBwbGljYXRpdmUgPT09ICdmdW5jdGlvbicgPyBjdXJyeU4oTWF0aC5tYXgoYXBwbGljYXRpdmUubGVuZ3RoLCBmbi5sZW5ndGgpLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gYXBwbGljYXRpdmUuYXBwbHkodGhpcywgYXJndW1lbnRzKShmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcbiAgICAgICAgfSkgOiAvLyBlbHNlXG4gICAgICAgIF9yZWR1Y2UoZnVuY3Rpb24gKGFjYywgZikge1xuICAgICAgICAgICAgcmV0dXJuIF9jb25jYXQoYWNjLCBtYXAoZiwgZm4pKTtcbiAgICAgICAgfSwgW10sIGFwcGxpY2F0aXZlKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIEdpdmVuIGEgc3BlYyBvYmplY3QgcmVjdXJzaXZlbHkgbWFwcGluZyBwcm9wZXJ0aWVzIHRvIGZ1bmN0aW9ucywgY3JlYXRlcyBhXG4gICAgICogZnVuY3Rpb24gcHJvZHVjaW5nIGFuIG9iamVjdCBvZiB0aGUgc2FtZSBzdHJ1Y3R1cmUsIGJ5IG1hcHBpbmcgZWFjaCBwcm9wZXJ0eVxuICAgICAqIHRvIHRoZSByZXN1bHQgb2YgY2FsbGluZyBpdHMgYXNzb2NpYXRlZCBmdW5jdGlvbiB3aXRoIHRoZSBzdXBwbGllZCBhcmd1bWVudHMuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjIwLjBcbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICAgKiBAc2lnIHtrOiAoKGEsIGIsIC4uLiwgbSkgLT4gdil9IC0+ICgoYSwgYiwgLi4uLCBtKSAtPiB7azogdn0pXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHNwZWMgYW4gb2JqZWN0IHJlY3Vyc2l2ZWx5IG1hcHBpbmcgcHJvcGVydGllcyB0byBmdW5jdGlvbnMgZm9yXG4gICAgICogICAgICAgIHByb2R1Y2luZyB0aGUgdmFsdWVzIGZvciB0aGVzZSBwcm9wZXJ0aWVzLlxuICAgICAqIEByZXR1cm4ge0Z1bmN0aW9ufSBBIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhbiBvYmplY3Qgb2YgdGhlIHNhbWUgc3RydWN0dXJlXG4gICAgICogYXMgYHNwZWMnLCB3aXRoIGVhY2ggcHJvcGVydHkgc2V0IHRvIHRoZSB2YWx1ZSByZXR1cm5lZCBieSBjYWxsaW5nIGl0c1xuICAgICAqIGFzc29jaWF0ZWQgZnVuY3Rpb24gd2l0aCB0aGUgc3VwcGxpZWQgYXJndW1lbnRzLlxuICAgICAqIEBzZWUgUi5qdXh0XG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIGdldE1ldHJpY3MgPSBSLmFwcGx5U3BlYyh7XG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1bTogUi5hZGQsXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5lc3RlZDogeyBtdWw6IFIubXVsdGlwbHkgfVxuICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgKiAgICAgIGdldE1ldHJpY3MoMiwgNCk7IC8vID0+IHsgc3VtOiA2LCBuZXN0ZWQ6IHsgbXVsOiA4IH0gfVxuICAgICAqL1xuICAgIHZhciBhcHBseVNwZWMgPSBfY3VycnkxKGZ1bmN0aW9uIGFwcGx5U3BlYyhzcGVjKSB7XG4gICAgICAgIHNwZWMgPSBtYXAoZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgICAgIHJldHVybiB0eXBlb2YgdiA9PSAnZnVuY3Rpb24nID8gdiA6IGFwcGx5U3BlYyh2KTtcbiAgICAgICAgfSwgc3BlYyk7XG4gICAgICAgIHJldHVybiBjdXJyeU4ocmVkdWNlKG1heCwgMCwgcGx1Y2soJ2xlbmd0aCcsIHZhbHVlcyhzcGVjKSkpLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cztcbiAgICAgICAgICAgIHJldHVybiBtYXAoZnVuY3Rpb24gKGYpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYXBwbHkoZiwgYXJncyk7XG4gICAgICAgICAgICB9LCBzcGVjKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSByZXN1bHQgb2YgY2FsbGluZyBpdHMgZmlyc3QgYXJndW1lbnQgd2l0aCB0aGUgcmVtYWluaW5nXG4gICAgICogYXJndW1lbnRzLiBUaGlzIGlzIG9jY2FzaW9uYWxseSB1c2VmdWwgYXMgYSBjb252ZXJnaW5nIGZ1bmN0aW9uIGZvclxuICAgICAqIGBSLmNvbnZlcmdlYDogdGhlIGxlZnQgYnJhbmNoIGNhbiBwcm9kdWNlIGEgZnVuY3Rpb24gd2hpbGUgdGhlIHJpZ2h0IGJyYW5jaFxuICAgICAqIHByb2R1Y2VzIGEgdmFsdWUgdG8gYmUgcGFzc2VkIHRvIHRoYXQgZnVuY3Rpb24gYXMgYW4gYXJndW1lbnQuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjkuMFxuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICAgICAqIEBzaWcgKCouLi4gLT4gYSksKi4uLiAtPiBhXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGZ1bmN0aW9uIHRvIGFwcGx5IHRvIHRoZSByZW1haW5pbmcgYXJndW1lbnRzLlxuICAgICAqIEBwYXJhbSB7Li4uKn0gYXJncyBBbnkgbnVtYmVyIG9mIHBvc2l0aW9uYWwgYXJndW1lbnRzLlxuICAgICAqIEByZXR1cm4geyp9XG4gICAgICogQHNlZSBSLmFwcGx5XG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIGluZGVudE4gPSBSLnBpcGUoUi50aW1lcyhSLmFsd2F5cygnICcpKSxcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgIFIuam9pbignJyksXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICBSLnJlcGxhY2UoL14oPyEkKS9nbSkpO1xuICAgICAqXG4gICAgICogICAgICB2YXIgZm9ybWF0ID0gUi5jb252ZXJnZShSLmNhbGwsIFtcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSLnBpcGUoUi5wcm9wKCdpbmRlbnQnKSwgaW5kZW50TiksXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUi5wcm9wKCd2YWx1ZScpXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKTtcbiAgICAgKlxuICAgICAqICAgICAgZm9ybWF0KHtpbmRlbnQ6IDIsIHZhbHVlOiAnZm9vXFxuYmFyXFxuYmF6XFxuJ30pOyAvLz0+ICcgIGZvb1xcbiAgYmFyXFxuICBiYXpcXG4nXG4gICAgICovXG4gICAgdmFyIGNhbGwgPSBjdXJyeShmdW5jdGlvbiBjYWxsKGZuKSB7XG4gICAgICAgIHJldHVybiBmbi5hcHBseSh0aGlzLCBfc2xpY2UoYXJndW1lbnRzLCAxKSk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBgY2hhaW5gIG1hcHMgYSBmdW5jdGlvbiBvdmVyIGEgbGlzdCBhbmQgY29uY2F0ZW5hdGVzIHRoZSByZXN1bHRzLiBgY2hhaW5gXG4gICAgICogaXMgYWxzbyBrbm93biBhcyBgZmxhdE1hcGAgaW4gc29tZSBsaWJyYXJpZXNcbiAgICAgKlxuICAgICAqIERpc3BhdGNoZXMgdG8gdGhlIGBjaGFpbmAgbWV0aG9kIG9mIHRoZSBzZWNvbmQgYXJndW1lbnQsIGlmIHByZXNlbnQuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjMuMFxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyAoYSAtPiBbYl0pIC0+IFthXSAtPiBbYl1cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGxpc3RcbiAgICAgKiBAcmV0dXJuIHtBcnJheX1cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgZHVwbGljYXRlID0gbiA9PiBbbiwgbl07XG4gICAgICogICAgICBSLmNoYWluKGR1cGxpY2F0ZSwgWzEsIDIsIDNdKTsgLy89PiBbMSwgMSwgMiwgMiwgMywgM11cbiAgICAgKi9cbiAgICB2YXIgY2hhaW4gPSBfY3VycnkyKF9kaXNwYXRjaGFibGUoJ2NoYWluJywgX3hjaGFpbiwgZnVuY3Rpb24gY2hhaW4oZm4sIG1vbmFkKSB7XG4gICAgICAgIGlmICh0eXBlb2YgbW9uYWQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1vbmFkLmNhbGwodGhpcywgZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKSkuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF9tYWtlRmxhdChmYWxzZSkobWFwKGZuLCBtb25hZCkpO1xuICAgIH0pKTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBmdW5jdGlvbiwgYGZuYCwgd2hpY2ggZW5jYXBzdWxhdGVzIGlmL2Vsc2UtaWYvZWxzZSBsb2dpYy5cbiAgICAgKiBgUi5jb25kYCB0YWtlcyBhIGxpc3Qgb2YgW3ByZWRpY2F0ZSwgdHJhbnNmb3JtXSBwYWlycy4gQWxsIG9mIHRoZSBhcmd1bWVudHNcbiAgICAgKiB0byBgZm5gIGFyZSBhcHBsaWVkIHRvIGVhY2ggb2YgdGhlIHByZWRpY2F0ZXMgaW4gdHVybiB1bnRpbCBvbmUgcmV0dXJucyBhXG4gICAgICogXCJ0cnV0aHlcIiB2YWx1ZSwgYXQgd2hpY2ggcG9pbnQgYGZuYCByZXR1cm5zIHRoZSByZXN1bHQgb2YgYXBwbHlpbmcgaXRzXG4gICAgICogYXJndW1lbnRzIHRvIHRoZSBjb3JyZXNwb25kaW5nIHRyYW5zZm9ybWVyLiBJZiBub25lIG9mIHRoZSBwcmVkaWNhdGVzXG4gICAgICogbWF0Y2hlcywgYGZuYCByZXR1cm5zIHVuZGVmaW5lZC5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuNi4wXG4gICAgICogQGNhdGVnb3J5IExvZ2ljXG4gICAgICogQHNpZyBbWygqLi4uIC0+IEJvb2xlYW4pLCgqLi4uIC0+ICopXV0gLT4gKCouLi4gLT4gKilcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBwYWlyc1xuICAgICAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBmbiA9IFIuY29uZChbXG4gICAgICogICAgICAgIFtSLmVxdWFscygwKSwgICBSLmFsd2F5cygnd2F0ZXIgZnJlZXplcyBhdCAwwrBDJyldLFxuICAgICAqICAgICAgICBbUi5lcXVhbHMoMTAwKSwgUi5hbHdheXMoJ3dhdGVyIGJvaWxzIGF0IDEwMMKwQycpXSxcbiAgICAgKiAgICAgICAgW1IuVCwgICAgICAgICAgIHRlbXAgPT4gJ25vdGhpbmcgc3BlY2lhbCBoYXBwZW5zIGF0ICcgKyB0ZW1wICsgJ8KwQyddXG4gICAgICogICAgICBdKTtcbiAgICAgKiAgICAgIGZuKDApOyAvLz0+ICd3YXRlciBmcmVlemVzIGF0IDDCsEMnXG4gICAgICogICAgICBmbig1MCk7IC8vPT4gJ25vdGhpbmcgc3BlY2lhbCBoYXBwZW5zIGF0IDUwwrBDJ1xuICAgICAqICAgICAgZm4oMTAwKTsgLy89PiAnd2F0ZXIgYm9pbHMgYXQgMTAwwrBDJ1xuICAgICAqL1xuICAgIHZhciBjb25kID0gX2N1cnJ5MShmdW5jdGlvbiBjb25kKHBhaXJzKSB7XG4gICAgICAgIHZhciBhcml0eSA9IHJlZHVjZShtYXgsIDAsIG1hcChmdW5jdGlvbiAocGFpcikge1xuICAgICAgICAgICAgcmV0dXJuIHBhaXJbMF0ubGVuZ3RoO1xuICAgICAgICB9LCBwYWlycykpO1xuICAgICAgICByZXR1cm4gX2FyaXR5KGFyaXR5LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgaWR4ID0gMDtcbiAgICAgICAgICAgIHdoaWxlIChpZHggPCBwYWlycy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBpZiAocGFpcnNbaWR4XVswXS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwYWlyc1tpZHhdWzFdLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlkeCArPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFdyYXBzIGEgY29uc3RydWN0b3IgZnVuY3Rpb24gaW5zaWRlIGEgY3VycmllZCBmdW5jdGlvbiB0aGF0IGNhbiBiZSBjYWxsZWRcbiAgICAgKiB3aXRoIHRoZSBzYW1lIGFyZ3VtZW50cyBhbmQgcmV0dXJucyB0aGUgc2FtZSB0eXBlLiBUaGUgYXJpdHkgb2YgdGhlIGZ1bmN0aW9uXG4gICAgICogcmV0dXJuZWQgaXMgc3BlY2lmaWVkIHRvIGFsbG93IHVzaW5nIHZhcmlhZGljIGNvbnN0cnVjdG9yIGZ1bmN0aW9ucy5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuNC4wXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAgICogQHNpZyBOdW1iZXIgLT4gKCogLT4geyp9KSAtPiAoKiAtPiB7Kn0pXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IG4gVGhlIGFyaXR5IG9mIHRoZSBjb25zdHJ1Y3RvciBmdW5jdGlvbi5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBGbiBUaGUgY29uc3RydWN0b3IgZnVuY3Rpb24gdG8gd3JhcC5cbiAgICAgKiBAcmV0dXJuIHtGdW5jdGlvbn0gQSB3cmFwcGVkLCBjdXJyaWVkIGNvbnN0cnVjdG9yIGZ1bmN0aW9uLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIC8vIFZhcmlhZGljIGNvbnN0cnVjdG9yIGZ1bmN0aW9uXG4gICAgICogICAgICB2YXIgV2lkZ2V0ID0gKCkgPT4ge1xuICAgICAqICAgICAgICB0aGlzLmNoaWxkcmVuID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKTtcbiAgICAgKiAgICAgICAgLy8gLi4uXG4gICAgICogICAgICB9O1xuICAgICAqICAgICAgV2lkZ2V0LnByb3RvdHlwZSA9IHtcbiAgICAgKiAgICAgICAgLy8gLi4uXG4gICAgICogICAgICB9O1xuICAgICAqICAgICAgdmFyIGFsbENvbmZpZ3MgPSBbXG4gICAgICogICAgICAgIC8vIC4uLlxuICAgICAqICAgICAgXTtcbiAgICAgKiAgICAgIFIubWFwKFIuY29uc3RydWN0TigxLCBXaWRnZXQpLCBhbGxDb25maWdzKTsgLy8gYSBsaXN0IG9mIFdpZGdldHNcbiAgICAgKi9cbiAgICB2YXIgY29uc3RydWN0TiA9IF9jdXJyeTIoZnVuY3Rpb24gY29uc3RydWN0TihuLCBGbikge1xuICAgICAgICBpZiAobiA+IDEwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NvbnN0cnVjdG9yIHdpdGggZ3JlYXRlciB0aGFuIHRlbiBhcmd1bWVudHMnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobiA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEZuKCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjdXJyeShuQXJ5KG4sIGZ1bmN0aW9uICgkMCwgJDEsICQyLCAkMywgJDQsICQ1LCAkNiwgJDcsICQ4LCAkOSkge1xuICAgICAgICAgICAgc3dpdGNoIChhcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBGbigkMCk7XG4gICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBGbigkMCwgJDEpO1xuICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRm4oJDAsICQxLCAkMik7XG4gICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBGbigkMCwgJDEsICQyLCAkMyk7XG4gICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBGbigkMCwgJDEsICQyLCAkMywgJDQpO1xuICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRm4oJDAsICQxLCAkMiwgJDMsICQ0LCAkNSk7XG4gICAgICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBGbigkMCwgJDEsICQyLCAkMywgJDQsICQ1LCAkNik7XG4gICAgICAgICAgICBjYXNlIDg6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBGbigkMCwgJDEsICQyLCAkMywgJDQsICQ1LCAkNiwgJDcpO1xuICAgICAgICAgICAgY2FzZSA5OlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRm4oJDAsICQxLCAkMiwgJDMsICQ0LCAkNSwgJDYsICQ3LCAkOCk7XG4gICAgICAgICAgICBjYXNlIDEwOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRm4oJDAsICQxLCAkMiwgJDMsICQ0LCAkNSwgJDYsICQ3LCAkOCwgJDkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBBY2NlcHRzIGEgY29udmVyZ2luZyBmdW5jdGlvbiBhbmQgYSBsaXN0IG9mIGJyYW5jaGluZyBmdW5jdGlvbnMgYW5kIHJldHVybnNcbiAgICAgKiBhIG5ldyBmdW5jdGlvbi4gV2hlbiBpbnZva2VkLCB0aGlzIG5ldyBmdW5jdGlvbiBpcyBhcHBsaWVkIHRvIHNvbWVcbiAgICAgKiBhcmd1bWVudHMsIGVhY2ggYnJhbmNoaW5nIGZ1bmN0aW9uIGlzIGFwcGxpZWQgdG8gdGhvc2Ugc2FtZSBhcmd1bWVudHMuIFRoZVxuICAgICAqIHJlc3VsdHMgb2YgZWFjaCBicmFuY2hpbmcgZnVuY3Rpb24gYXJlIHBhc3NlZCBhcyBhcmd1bWVudHMgdG8gdGhlIGNvbnZlcmdpbmdcbiAgICAgKiBmdW5jdGlvbiB0byBwcm9kdWNlIHRoZSByZXR1cm4gdmFsdWUuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjQuMlxuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICAgICAqIEBzaWcgKHgxIC0+IHgyIC0+IC4uLiAtPiB6KSAtPiBbKGEgLT4gYiAtPiAuLi4gLT4geDEpLCAoYSAtPiBiIC0+IC4uLiAtPiB4MiksIC4uLl0gLT4gKGEgLT4gYiAtPiAuLi4gLT4geilcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBhZnRlciBBIGZ1bmN0aW9uLiBgYWZ0ZXJgIHdpbGwgYmUgaW52b2tlZCB3aXRoIHRoZSByZXR1cm4gdmFsdWVzIG9mXG4gICAgICogICAgICAgIGBmbjFgIGFuZCBgZm4yYCBhcyBpdHMgYXJndW1lbnRzLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGZ1bmN0aW9ucyBBIGxpc3Qgb2YgZnVuY3Rpb25zLlxuICAgICAqIEByZXR1cm4ge0Z1bmN0aW9ufSBBIG5ldyBmdW5jdGlvbi5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgYWRkID0gKGEsIGIpID0+IGEgKyBiO1xuICAgICAqICAgICAgdmFyIG11bHRpcGx5ID0gKGEsIGIpID0+IGEgKiBiO1xuICAgICAqICAgICAgdmFyIHN1YnRyYWN0ID0gKGEsIGIpID0+IGEgLSBiO1xuICAgICAqXG4gICAgICogICAgICAvL+KJhSBtdWx0aXBseSggYWRkKDEsIDIpLCBzdWJ0cmFjdCgxLCAyKSApO1xuICAgICAqICAgICAgUi5jb252ZXJnZShtdWx0aXBseSwgW2FkZCwgc3VidHJhY3RdKSgxLCAyKTsgLy89PiAtM1xuICAgICAqXG4gICAgICogICAgICB2YXIgYWRkMyA9IChhLCBiLCBjKSA9PiBhICsgYiArIGM7XG4gICAgICogICAgICBSLmNvbnZlcmdlKGFkZDMsIFttdWx0aXBseSwgYWRkLCBzdWJ0cmFjdF0pKDEsIDIpOyAvLz0+IDRcbiAgICAgKi9cbiAgICB2YXIgY29udmVyZ2UgPSBfY3VycnkyKGZ1bmN0aW9uIGNvbnZlcmdlKGFmdGVyLCBmbnMpIHtcbiAgICAgICAgcmV0dXJuIGN1cnJ5TihyZWR1Y2UobWF4LCAwLCBwbHVjaygnbGVuZ3RoJywgZm5zKSksIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgICAgICAgdmFyIGNvbnRleHQgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIGFmdGVyLmFwcGx5KGNvbnRleHQsIF9tYXAoZnVuY3Rpb24gKGZuKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZuLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICAgICAgICAgICAgfSwgZm5zKSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogQ291bnRzIHRoZSBlbGVtZW50cyBvZiBhIGxpc3QgYWNjb3JkaW5nIHRvIGhvdyBtYW55IG1hdGNoIGVhY2ggdmFsdWUgb2YgYVxuICAgICAqIGtleSBnZW5lcmF0ZWQgYnkgdGhlIHN1cHBsaWVkIGZ1bmN0aW9uLiBSZXR1cm5zIGFuIG9iamVjdCBtYXBwaW5nIHRoZSBrZXlzXG4gICAgICogcHJvZHVjZWQgYnkgYGZuYCB0byB0aGUgbnVtYmVyIG9mIG9jY3VycmVuY2VzIGluIHRoZSBsaXN0LiBOb3RlIHRoYXQgYWxsXG4gICAgICoga2V5cyBhcmUgY29lcmNlZCB0byBzdHJpbmdzIGJlY2F1c2Ugb2YgaG93IEphdmFTY3JpcHQgb2JqZWN0cyB3b3JrLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgUmVsYXRpb25cbiAgICAgKiBAc2lnIChhIC0+IFN0cmluZykgLT4gW2FdIC0+IHsqfVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBmdW5jdGlvbiB1c2VkIHRvIG1hcCB2YWx1ZXMgdG8ga2V5cy5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBsaXN0IFRoZSBsaXN0IHRvIGNvdW50IGVsZW1lbnRzIGZyb20uXG4gICAgICogQHJldHVybiB7T2JqZWN0fSBBbiBvYmplY3QgbWFwcGluZyBrZXlzIHRvIG51bWJlciBvZiBvY2N1cnJlbmNlcyBpbiB0aGUgbGlzdC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgbnVtYmVycyA9IFsxLjAsIDEuMSwgMS4yLCAyLjAsIDMuMCwgMi4yXTtcbiAgICAgKiAgICAgIHZhciBsZXR0ZXJzID0gUi5zcGxpdCgnJywgJ2FiY0FCQ2FhYUJCYycpO1xuICAgICAqICAgICAgUi5jb3VudEJ5KE1hdGguZmxvb3IpKG51bWJlcnMpOyAgICAvLz0+IHsnMSc6IDMsICcyJzogMiwgJzMnOiAxfVxuICAgICAqICAgICAgUi5jb3VudEJ5KFIudG9Mb3dlcikobGV0dGVycyk7ICAgLy89PiB7J2EnOiA1LCAnYic6IDQsICdjJzogM31cbiAgICAgKi9cbiAgICB2YXIgY291bnRCeSA9IHJlZHVjZUJ5KGZ1bmN0aW9uIChhY2MsIGVsZW0pIHtcbiAgICAgICAgcmV0dXJuIGFjYyArIDE7XG4gICAgfSwgMCk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgbmV3IGxpc3Qgd2l0aG91dCBhbnkgY29uc2VjdXRpdmVseSByZXBlYXRpbmcgZWxlbWVudHMuIEVxdWFsaXR5IGlzXG4gICAgICogZGV0ZXJtaW5lZCBieSBhcHBseWluZyB0aGUgc3VwcGxpZWQgcHJlZGljYXRlIHR3byBjb25zZWN1dGl2ZSBlbGVtZW50cy4gVGhlXG4gICAgICogZmlyc3QgZWxlbWVudCBpbiBhIHNlcmllcyBvZiBlcXVhbCBlbGVtZW50IGlzIHRoZSBvbmUgYmVpbmcgcHJlc2VydmVkLlxuICAgICAqXG4gICAgICogRGlzcGF0Y2hlcyB0byB0aGUgYGRyb3BSZXBlYXRzV2l0aGAgbWV0aG9kIG9mIHRoZSBzZWNvbmQgYXJndW1lbnQsIGlmIHByZXNlbnQuXG4gICAgICpcbiAgICAgKiBBY3RzIGFzIGEgdHJhbnNkdWNlciBpZiBhIHRyYW5zZm9ybWVyIGlzIGdpdmVuIGluIGxpc3QgcG9zaXRpb24uXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjE0LjBcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgKGEsIGEgLT4gQm9vbGVhbikgLT4gW2FdIC0+IFthXVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHByZWQgQSBwcmVkaWNhdGUgdXNlZCB0byB0ZXN0IHdoZXRoZXIgdHdvIGl0ZW1zIGFyZSBlcXVhbC5cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBsaXN0IFRoZSBhcnJheSB0byBjb25zaWRlci5cbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gYGxpc3RgIHdpdGhvdXQgcmVwZWF0aW5nIGVsZW1lbnRzLlxuICAgICAqIEBzZWUgUi50cmFuc2R1Y2VcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgbCA9IFsxLCAtMSwgMSwgMywgNCwgLTQsIC00LCAtNSwgNSwgMywgM107XG4gICAgICogICAgICBSLmRyb3BSZXBlYXRzV2l0aChSLmVxQnkoTWF0aC5hYnMpLCBsKTsgLy89PiBbMSwgMywgNCwgLTUsIDNdXG4gICAgICovXG4gICAgdmFyIGRyb3BSZXBlYXRzV2l0aCA9IF9jdXJyeTIoX2Rpc3BhdGNoYWJsZSgnZHJvcFJlcGVhdHNXaXRoJywgX3hkcm9wUmVwZWF0c1dpdGgsIGZ1bmN0aW9uIGRyb3BSZXBlYXRzV2l0aChwcmVkLCBsaXN0KSB7XG4gICAgICAgIHZhciByZXN1bHQgPSBbXTtcbiAgICAgICAgdmFyIGlkeCA9IDE7XG4gICAgICAgIHZhciBsZW4gPSBsaXN0Lmxlbmd0aDtcbiAgICAgICAgaWYgKGxlbiAhPT0gMCkge1xuICAgICAgICAgICAgcmVzdWx0WzBdID0gbGlzdFswXTtcbiAgICAgICAgICAgIHdoaWxlIChpZHggPCBsZW4pIHtcbiAgICAgICAgICAgICAgICBpZiAoIXByZWQobGFzdChyZXN1bHQpLCBsaXN0W2lkeF0pKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdFtyZXN1bHQubGVuZ3RoXSA9IGxpc3RbaWR4XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWR4ICs9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9KSk7XG5cbiAgICAvKipcbiAgICAgKiBUYWtlcyBhIGZ1bmN0aW9uIGFuZCB0d28gdmFsdWVzIGluIGl0cyBkb21haW4gYW5kIHJldHVybnMgYHRydWVgIGlmIHRoZVxuICAgICAqIHZhbHVlcyBtYXAgdG8gdGhlIHNhbWUgdmFsdWUgaW4gdGhlIGNvZG9tYWluOyBgZmFsc2VgIG90aGVyd2lzZS5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMTguMFxuICAgICAqIEBjYXRlZ29yeSBSZWxhdGlvblxuICAgICAqIEBzaWcgKGEgLT4gYikgLT4gYSAtPiBhIC0+IEJvb2xlYW5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmXG4gICAgICogQHBhcmFtIHsqfSB4XG4gICAgICogQHBhcmFtIHsqfSB5XG4gICAgICogQHJldHVybiB7Qm9vbGVhbn1cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLmVxQnkoTWF0aC5hYnMsIDUsIC01KTsgLy89PiB0cnVlXG4gICAgICovXG4gICAgdmFyIGVxQnkgPSBfY3VycnkzKGZ1bmN0aW9uIGVxQnkoZiwgeCwgeSkge1xuICAgICAgICByZXR1cm4gZXF1YWxzKGYoeCksIGYoeSkpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogUmVwb3J0cyB3aGV0aGVyIHR3byBvYmplY3RzIGhhdmUgdGhlIHNhbWUgdmFsdWUsIGluIGBSLmVxdWFsc2AgdGVybXMsIGZvclxuICAgICAqIHRoZSBzcGVjaWZpZWQgcHJvcGVydHkuIFVzZWZ1bCBhcyBhIGN1cnJpZWQgcHJlZGljYXRlLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0XG4gICAgICogQHNpZyBrIC0+IHtrOiB2fSAtPiB7azogdn0gLT4gQm9vbGVhblxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wIFRoZSBuYW1lIG9mIHRoZSBwcm9wZXJ0eSB0byBjb21wYXJlXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iajFcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqMlxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgbzEgPSB7IGE6IDEsIGI6IDIsIGM6IDMsIGQ6IDQgfTtcbiAgICAgKiAgICAgIHZhciBvMiA9IHsgYTogMTAsIGI6IDIwLCBjOiAzLCBkOiA0MCB9O1xuICAgICAqICAgICAgUi5lcVByb3BzKCdhJywgbzEsIG8yKTsgLy89PiBmYWxzZVxuICAgICAqICAgICAgUi5lcVByb3BzKCdjJywgbzEsIG8yKTsgLy89PiB0cnVlXG4gICAgICovXG4gICAgdmFyIGVxUHJvcHMgPSBfY3VycnkzKGZ1bmN0aW9uIGVxUHJvcHMocHJvcCwgb2JqMSwgb2JqMikge1xuICAgICAgICByZXR1cm4gZXF1YWxzKG9iajFbcHJvcF0sIG9iajJbcHJvcF0pO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogU3BsaXRzIGEgbGlzdCBpbnRvIHN1Yi1saXN0cyBzdG9yZWQgaW4gYW4gb2JqZWN0LCBiYXNlZCBvbiB0aGUgcmVzdWx0IG9mXG4gICAgICogY2FsbGluZyBhIFN0cmluZy1yZXR1cm5pbmcgZnVuY3Rpb24gb24gZWFjaCBlbGVtZW50LCBhbmQgZ3JvdXBpbmcgdGhlXG4gICAgICogcmVzdWx0cyBhY2NvcmRpbmcgdG8gdmFsdWVzIHJldHVybmVkLlxuICAgICAqXG4gICAgICogRGlzcGF0Y2hlcyB0byB0aGUgYGdyb3VwQnlgIG1ldGhvZCBvZiB0aGUgc2Vjb25kIGFyZ3VtZW50LCBpZiBwcmVzZW50LlxuICAgICAqXG4gICAgICogQWN0cyBhcyBhIHRyYW5zZHVjZXIgaWYgYSB0cmFuc2Zvcm1lciBpcyBnaXZlbiBpbiBsaXN0IHBvc2l0aW9uLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgKGEgLT4gU3RyaW5nKSAtPiBbYV0gLT4ge1N0cmluZzogW2FdfVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIEZ1bmN0aW9uIDo6IGEgLT4gU3RyaW5nXG4gICAgICogQHBhcmFtIHtBcnJheX0gbGlzdCBUaGUgYXJyYXkgdG8gZ3JvdXBcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IEFuIG9iamVjdCB3aXRoIHRoZSBvdXRwdXQgb2YgYGZuYCBmb3Iga2V5cywgbWFwcGVkIHRvIGFycmF5cyBvZiBlbGVtZW50c1xuICAgICAqICAgICAgICAgdGhhdCBwcm9kdWNlZCB0aGF0IGtleSB3aGVuIHBhc3NlZCB0byBgZm5gLlxuICAgICAqIEBzZWUgUi50cmFuc2R1Y2VcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgYnlHcmFkZSA9IFIuZ3JvdXBCeShmdW5jdGlvbihzdHVkZW50KSB7XG4gICAgICogICAgICAgIHZhciBzY29yZSA9IHN0dWRlbnQuc2NvcmU7XG4gICAgICogICAgICAgIHJldHVybiBzY29yZSA8IDY1ID8gJ0YnIDpcbiAgICAgKiAgICAgICAgICAgICAgIHNjb3JlIDwgNzAgPyAnRCcgOlxuICAgICAqICAgICAgICAgICAgICAgc2NvcmUgPCA4MCA/ICdDJyA6XG4gICAgICogICAgICAgICAgICAgICBzY29yZSA8IDkwID8gJ0InIDogJ0EnO1xuICAgICAqICAgICAgfSk7XG4gICAgICogICAgICB2YXIgc3R1ZGVudHMgPSBbe25hbWU6ICdBYmJ5Jywgc2NvcmU6IDg0fSxcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICB7bmFtZTogJ0VkZHknLCBzY29yZTogNTh9LFxuICAgICAqICAgICAgICAgICAgICAgICAgICAgIC8vIC4uLlxuICAgICAqICAgICAgICAgICAgICAgICAgICAgIHtuYW1lOiAnSmFjaycsIHNjb3JlOiA2OX1dO1xuICAgICAqICAgICAgYnlHcmFkZShzdHVkZW50cyk7XG4gICAgICogICAgICAvLyB7XG4gICAgICogICAgICAvLyAgICdBJzogW3tuYW1lOiAnRGlhbm5lJywgc2NvcmU6IDk5fV0sXG4gICAgICogICAgICAvLyAgICdCJzogW3tuYW1lOiAnQWJieScsIHNjb3JlOiA4NH1dXG4gICAgICogICAgICAvLyAgIC8vIC4uLixcbiAgICAgKiAgICAgIC8vICAgJ0YnOiBbe25hbWU6ICdFZGR5Jywgc2NvcmU6IDU4fV1cbiAgICAgKiAgICAgIC8vIH1cbiAgICAgKi9cbiAgICB2YXIgZ3JvdXBCeSA9IF9jdXJyeTIoX2Rpc3BhdGNoYWJsZSgnZ3JvdXBCeScsIF94Z3JvdXBCeSwgcmVkdWNlQnkoZnVuY3Rpb24gKGFjYywgaXRlbSkge1xuICAgICAgICBpZiAoYWNjID09IG51bGwpIHtcbiAgICAgICAgICAgIGFjYyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIGFjYy5wdXNoKGl0ZW0pO1xuICAgICAgICByZXR1cm4gYWNjO1xuICAgIH0sIG51bGwpKSk7XG5cbiAgICAvKipcbiAgICAgKiBHaXZlbiBhIGZ1bmN0aW9uIHRoYXQgZ2VuZXJhdGVzIGEga2V5LCB0dXJucyBhIGxpc3Qgb2Ygb2JqZWN0cyBpbnRvIGFuXG4gICAgICogb2JqZWN0IGluZGV4aW5nIHRoZSBvYmplY3RzIGJ5IHRoZSBnaXZlbiBrZXkuIE5vdGUgdGhhdCBpZiBtdWx0aXBsZVxuICAgICAqIG9iamVjdHMgZ2VuZXJhdGUgdGhlIHNhbWUgdmFsdWUgZm9yIHRoZSBpbmRleGluZyBrZXkgb25seSB0aGUgbGFzdCB2YWx1ZVxuICAgICAqIHdpbGwgYmUgaW5jbHVkZWQgaW4gdGhlIGdlbmVyYXRlZCBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjE5LjBcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgKGEgLT4gU3RyaW5nKSAtPiBbe2s6IHZ9XSAtPiB7azoge2s6IHZ9fVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIEZ1bmN0aW9uIDo6IGEgLT4gU3RyaW5nXG4gICAgICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IG9mIG9iamVjdHMgdG8gaW5kZXhcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IEFuIG9iamVjdCBpbmRleGluZyBlYWNoIGFycmF5IGVsZW1lbnQgYnkgdGhlIGdpdmVuIHByb3BlcnR5LlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBsaXN0ID0gW3tpZDogJ3h5eicsIHRpdGxlOiAnQSd9LCB7aWQ6ICdhYmMnLCB0aXRsZTogJ0InfV07XG4gICAgICogICAgICBSLmluZGV4QnkoUi5wcm9wKCdpZCcpLCBsaXN0KTtcbiAgICAgKiAgICAgIC8vPT4ge2FiYzoge2lkOiAnYWJjJywgdGl0bGU6ICdCJ30sIHh5ejoge2lkOiAneHl6JywgdGl0bGU6ICdBJ319XG4gICAgICovXG4gICAgdmFyIGluZGV4QnkgPSByZWR1Y2VCeShmdW5jdGlvbiAoYWNjLCBlbGVtKSB7XG4gICAgICAgIHJldHVybiBlbGVtO1xuICAgIH0sIG51bGwpO1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgcG9zaXRpb24gb2YgdGhlIGZpcnN0IG9jY3VycmVuY2Ugb2YgYW4gaXRlbSBpbiBhbiBhcnJheSwgb3IgLTFcbiAgICAgKiBpZiB0aGUgaXRlbSBpcyBub3QgaW5jbHVkZWQgaW4gdGhlIGFycmF5LiBgUi5lcXVhbHNgIGlzIHVzZWQgdG8gZGV0ZXJtaW5lXG4gICAgICogZXF1YWxpdHkuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyBhIC0+IFthXSAtPiBOdW1iZXJcbiAgICAgKiBAcGFyYW0geyp9IHRhcmdldCBUaGUgaXRlbSB0byBmaW5kLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IHhzIFRoZSBhcnJheSB0byBzZWFyY2ggaW4uXG4gICAgICogQHJldHVybiB7TnVtYmVyfSB0aGUgaW5kZXggb2YgdGhlIHRhcmdldCwgb3IgLTEgaWYgdGhlIHRhcmdldCBpcyBub3QgZm91bmQuXG4gICAgICogQHNlZSBSLmxhc3RJbmRleE9mXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5pbmRleE9mKDMsIFsxLDIsMyw0XSk7IC8vPT4gMlxuICAgICAqICAgICAgUi5pbmRleE9mKDEwLCBbMSwyLDMsNF0pOyAvLz0+IC0xXG4gICAgICovXG4gICAgdmFyIGluZGV4T2YgPSBfY3VycnkyKGZ1bmN0aW9uIGluZGV4T2YodGFyZ2V0LCB4cykge1xuICAgICAgICByZXR1cm4gdHlwZW9mIHhzLmluZGV4T2YgPT09ICdmdW5jdGlvbicgJiYgIV9pc0FycmF5KHhzKSA/IHhzLmluZGV4T2YodGFyZ2V0KSA6IF9pbmRleE9mKHhzLCB0YXJnZXQsIDApO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICoganV4dCBhcHBsaWVzIGEgbGlzdCBvZiBmdW5jdGlvbnMgdG8gYSBsaXN0IG9mIHZhbHVlcy5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMTkuMFxuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICAgICAqIEBzaWcgWyhhLCBiLCAuLi4sIG0pIC0+IG5dIC0+ICgoYSwgYiwgLi4uLCBtKSAtPiBbbl0pXG4gICAgICogQHBhcmFtIHtBcnJheX0gZm5zIEFuIGFycmF5IG9mIGZ1bmN0aW9uc1xuICAgICAqIEByZXR1cm4ge0Z1bmN0aW9ufSBBIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIGxpc3Qgb2YgdmFsdWVzIGFmdGVyIGFwcGx5aW5nIGVhY2ggb2YgdGhlIG9yaWdpbmFsIGBmbnNgIHRvIGl0cyBwYXJhbWV0ZXJzLlxuICAgICAqIEBzZWUgUi5hcHBseVNwZWNcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgcmFuZ2UgPSBSLmp1eHQoW01hdGgubWluLCBNYXRoLm1heF0pO1xuICAgICAqICAgICAgcmFuZ2UoMywgNCwgOSwgLTMpOyAvLz0+IFstMywgOV1cbiAgICAgKi9cbiAgICB2YXIganV4dCA9IF9jdXJyeTEoZnVuY3Rpb24ganV4dChmbnMpIHtcbiAgICAgICAgcmV0dXJuIGNvbnZlcmdlKF9hcnJheU9mLCBmbnMpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIGxlbnMgZm9yIHRoZSBnaXZlbiBnZXR0ZXIgYW5kIHNldHRlciBmdW5jdGlvbnMuIFRoZSBnZXR0ZXIgXCJnZXRzXCJcbiAgICAgKiB0aGUgdmFsdWUgb2YgdGhlIGZvY3VzOyB0aGUgc2V0dGVyIFwic2V0c1wiIHRoZSB2YWx1ZSBvZiB0aGUgZm9jdXMuIFRoZSBzZXR0ZXJcbiAgICAgKiBzaG91bGQgbm90IG11dGF0ZSB0aGUgZGF0YSBzdHJ1Y3R1cmUuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjguMFxuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAdHlwZWRlZm4gTGVucyBzIGEgPSBGdW5jdG9yIGYgPT4gKGEgLT4gZiBhKSAtPiBzIC0+IGYgc1xuICAgICAqIEBzaWcgKHMgLT4gYSkgLT4gKChhLCBzKSAtPiBzKSAtPiBMZW5zIHMgYVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGdldHRlclxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHNldHRlclxuICAgICAqIEByZXR1cm4ge0xlbnN9XG4gICAgICogQHNlZSBSLnZpZXcsIFIuc2V0LCBSLm92ZXIsIFIubGVuc0luZGV4LCBSLmxlbnNQcm9wXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIHhMZW5zID0gUi5sZW5zKFIucHJvcCgneCcpLCBSLmFzc29jKCd4JykpO1xuICAgICAqXG4gICAgICogICAgICBSLnZpZXcoeExlbnMsIHt4OiAxLCB5OiAyfSk7ICAgICAgICAgICAgLy89PiAxXG4gICAgICogICAgICBSLnNldCh4TGVucywgNCwge3g6IDEsIHk6IDJ9KTsgICAgICAgICAgLy89PiB7eDogNCwgeTogMn1cbiAgICAgKiAgICAgIFIub3Zlcih4TGVucywgUi5uZWdhdGUsIHt4OiAxLCB5OiAyfSk7ICAvLz0+IHt4OiAtMSwgeTogMn1cbiAgICAgKi9cbiAgICB2YXIgbGVucyA9IF9jdXJyeTIoZnVuY3Rpb24gbGVucyhnZXR0ZXIsIHNldHRlcikge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHRvRnVuY3RvckZuKSB7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBtYXAoZnVuY3Rpb24gKGZvY3VzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzZXR0ZXIoZm9jdXMsIHRhcmdldCk7XG4gICAgICAgICAgICAgICAgfSwgdG9GdW5jdG9yRm4oZ2V0dGVyKHRhcmdldCkpKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgbGVucyB3aG9zZSBmb2N1cyBpcyB0aGUgc3BlY2lmaWVkIGluZGV4LlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xNC4wXG4gICAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgICAqIEB0eXBlZGVmbiBMZW5zIHMgYSA9IEZ1bmN0b3IgZiA9PiAoYSAtPiBmIGEpIC0+IHMgLT4gZiBzXG4gICAgICogQHNpZyBOdW1iZXIgLT4gTGVucyBzIGFcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gblxuICAgICAqIEByZXR1cm4ge0xlbnN9XG4gICAgICogQHNlZSBSLnZpZXcsIFIuc2V0LCBSLm92ZXJcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgaGVhZExlbnMgPSBSLmxlbnNJbmRleCgwKTtcbiAgICAgKlxuICAgICAqICAgICAgUi52aWV3KGhlYWRMZW5zLCBbJ2EnLCAnYicsICdjJ10pOyAgICAgICAgICAgIC8vPT4gJ2EnXG4gICAgICogICAgICBSLnNldChoZWFkTGVucywgJ3gnLCBbJ2EnLCAnYicsICdjJ10pOyAgICAgICAgLy89PiBbJ3gnLCAnYicsICdjJ11cbiAgICAgKiAgICAgIFIub3ZlcihoZWFkTGVucywgUi50b1VwcGVyLCBbJ2EnLCAnYicsICdjJ10pOyAvLz0+IFsnQScsICdiJywgJ2MnXVxuICAgICAqL1xuICAgIHZhciBsZW5zSW5kZXggPSBfY3VycnkxKGZ1bmN0aW9uIGxlbnNJbmRleChuKSB7XG4gICAgICAgIHJldHVybiBsZW5zKG50aChuKSwgdXBkYXRlKG4pKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBsZW5zIHdob3NlIGZvY3VzIGlzIHRoZSBzcGVjaWZpZWQgcGF0aC5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMTkuMFxuICAgICAqIEBjYXRlZ29yeSBPYmplY3RcbiAgICAgKiBAdHlwZWRlZm4gTGVucyBzIGEgPSBGdW5jdG9yIGYgPT4gKGEgLT4gZiBhKSAtPiBzIC0+IGYgc1xuICAgICAqIEBzaWcgW1N0cmluZ10gLT4gTGVucyBzIGFcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBwYXRoIFRoZSBwYXRoIHRvIHVzZS5cbiAgICAgKiBAcmV0dXJuIHtMZW5zfVxuICAgICAqIEBzZWUgUi52aWV3LCBSLnNldCwgUi5vdmVyXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIHh5TGVucyA9IFIubGVuc1BhdGgoWyd4JywgJ3knXSk7XG4gICAgICpcbiAgICAgKiAgICAgIFIudmlldyh4eUxlbnMsIHt4OiB7eTogMiwgejogM319KTsgICAgICAgICAgICAvLz0+IDJcbiAgICAgKiAgICAgIFIuc2V0KHh5TGVucywgNCwge3g6IHt5OiAyLCB6OiAzfX0pOyAgICAgICAgICAvLz0+IHt4OiB7eTogNCwgejogM319XG4gICAgICogICAgICBSLm92ZXIoeHlMZW5zLCBSLm5lZ2F0ZSwge3g6IHt5OiAyLCB6OiAzfX0pOyAgLy89PiB7eDoge3k6IC0yLCB6OiAzfX1cbiAgICAgKi9cbiAgICB2YXIgbGVuc1BhdGggPSBfY3VycnkxKGZ1bmN0aW9uIGxlbnNQYXRoKHApIHtcbiAgICAgICAgcmV0dXJuIGxlbnMocGF0aChwKSwgYXNzb2NQYXRoKHApKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBsZW5zIHdob3NlIGZvY3VzIGlzIHRoZSBzcGVjaWZpZWQgcHJvcGVydHkuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjE0LjBcbiAgICAgKiBAY2F0ZWdvcnkgT2JqZWN0XG4gICAgICogQHR5cGVkZWZuIExlbnMgcyBhID0gRnVuY3RvciBmID0+IChhIC0+IGYgYSkgLT4gcyAtPiBmIHNcbiAgICAgKiBAc2lnIFN0cmluZyAtPiBMZW5zIHMgYVxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBrXG4gICAgICogQHJldHVybiB7TGVuc31cbiAgICAgKiBAc2VlIFIudmlldywgUi5zZXQsIFIub3ZlclxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciB4TGVucyA9IFIubGVuc1Byb3AoJ3gnKTtcbiAgICAgKlxuICAgICAqICAgICAgUi52aWV3KHhMZW5zLCB7eDogMSwgeTogMn0pOyAgICAgICAgICAgIC8vPT4gMVxuICAgICAqICAgICAgUi5zZXQoeExlbnMsIDQsIHt4OiAxLCB5OiAyfSk7ICAgICAgICAgIC8vPT4ge3g6IDQsIHk6IDJ9XG4gICAgICogICAgICBSLm92ZXIoeExlbnMsIFIubmVnYXRlLCB7eDogMSwgeTogMn0pOyAgLy89PiB7eDogLTEsIHk6IDJ9XG4gICAgICovXG4gICAgdmFyIGxlbnNQcm9wID0gX2N1cnJ5MShmdW5jdGlvbiBsZW5zUHJvcChrKSB7XG4gICAgICAgIHJldHVybiBsZW5zKHByb3AoayksIGFzc29jKGspKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFwibGlmdHNcIiBhIGZ1bmN0aW9uIHRvIGJlIHRoZSBzcGVjaWZpZWQgYXJpdHksIHNvIHRoYXQgaXQgbWF5IFwibWFwIG92ZXJcIiB0aGF0XG4gICAgICogbWFueSBsaXN0cywgRnVuY3Rpb25zIG9yIG90aGVyIG9iamVjdHMgdGhhdCBzYXRpc2Z5IHRoZSBbRmFudGFzeUxhbmQgQXBwbHkgc3BlY10oaHR0cHM6Ly9naXRodWIuY29tL2ZhbnRhc3lsYW5kL2ZhbnRhc3ktbGFuZCNhcHBseSkuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjcuMFxuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICAgICAqIEBzaWcgTnVtYmVyIC0+ICgqLi4uIC0+ICopIC0+IChbKl0uLi4gLT4gWypdKVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBmdW5jdGlvbiB0byBsaWZ0IGludG8gaGlnaGVyIGNvbnRleHRcbiAgICAgKiBAcmV0dXJuIHtGdW5jdGlvbn0gVGhlIGxpZnRlZCBmdW5jdGlvbi5cbiAgICAgKiBAc2VlIFIubGlmdCwgUi5hcFxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBtYWRkMyA9IFIubGlmdE4oMywgUi5jdXJyeU4oMywgKC4uLmFyZ3MpID0+IFIuc3VtKGFyZ3MpKSk7XG4gICAgICogICAgICBtYWRkMyhbMSwyLDNdLCBbMSwyLDNdLCBbMV0pOyAvLz0+IFszLCA0LCA1LCA0LCA1LCA2LCA1LCA2LCA3XVxuICAgICAqL1xuICAgIHZhciBsaWZ0TiA9IF9jdXJyeTIoZnVuY3Rpb24gbGlmdE4oYXJpdHksIGZuKSB7XG4gICAgICAgIHZhciBsaWZ0ZWQgPSBjdXJyeU4oYXJpdHksIGZuKTtcbiAgICAgICAgcmV0dXJuIGN1cnJ5Tihhcml0eSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9yZWR1Y2UoYXAsIG1hcChsaWZ0ZWQsIGFyZ3VtZW50c1swXSksIF9zbGljZShhcmd1bWVudHMsIDEpKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBtZWFuIG9mIHRoZSBnaXZlbiBsaXN0IG9mIG51bWJlcnMuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjE0LjBcbiAgICAgKiBAY2F0ZWdvcnkgTWF0aFxuICAgICAqIEBzaWcgW051bWJlcl0gLT4gTnVtYmVyXG4gICAgICogQHBhcmFtIHtBcnJheX0gbGlzdFxuICAgICAqIEByZXR1cm4ge051bWJlcn1cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLm1lYW4oWzIsIDcsIDldKTsgLy89PiA2XG4gICAgICogICAgICBSLm1lYW4oW10pOyAvLz0+IE5hTlxuICAgICAqL1xuICAgIHZhciBtZWFuID0gX2N1cnJ5MShmdW5jdGlvbiBtZWFuKGxpc3QpIHtcbiAgICAgICAgcmV0dXJuIHN1bShsaXN0KSAvIGxpc3QubGVuZ3RoO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgbWVkaWFuIG9mIHRoZSBnaXZlbiBsaXN0IG9mIG51bWJlcnMuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjE0LjBcbiAgICAgKiBAY2F0ZWdvcnkgTWF0aFxuICAgICAqIEBzaWcgW051bWJlcl0gLT4gTnVtYmVyXG4gICAgICogQHBhcmFtIHtBcnJheX0gbGlzdFxuICAgICAqIEByZXR1cm4ge051bWJlcn1cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLm1lZGlhbihbMiwgOSwgN10pOyAvLz0+IDdcbiAgICAgKiAgICAgIFIubWVkaWFuKFs3LCAyLCAxMCwgOV0pOyAvLz0+IDhcbiAgICAgKiAgICAgIFIubWVkaWFuKFtdKTsgLy89PiBOYU5cbiAgICAgKi9cbiAgICB2YXIgbWVkaWFuID0gX2N1cnJ5MShmdW5jdGlvbiBtZWRpYW4obGlzdCkge1xuICAgICAgICB2YXIgbGVuID0gbGlzdC5sZW5ndGg7XG4gICAgICAgIGlmIChsZW4gPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBOYU47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHdpZHRoID0gMiAtIGxlbiAlIDI7XG4gICAgICAgIHZhciBpZHggPSAobGVuIC0gd2lkdGgpIC8gMjtcbiAgICAgICAgcmV0dXJuIG1lYW4oX3NsaWNlKGxpc3QpLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgICAgIHJldHVybiBhIDwgYiA/IC0xIDogYSA+IGIgPyAxIDogMDtcbiAgICAgICAgfSkuc2xpY2UoaWR4LCBpZHggKyB3aWR0aCkpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogVGFrZXMgYSBwcmVkaWNhdGUgYW5kIGEgbGlzdCBvciBvdGhlciBcImZpbHRlcmFibGVcIiBvYmplY3QgYW5kIHJldHVybnMgdGhlXG4gICAgICogcGFpciBvZiBmaWx0ZXJhYmxlIG9iamVjdHMgb2YgdGhlIHNhbWUgdHlwZSBvZiBlbGVtZW50cyB3aGljaCBkbyBhbmQgZG8gbm90XG4gICAgICogc2F0aXNmeSwgdGhlIHByZWRpY2F0ZSwgcmVzcGVjdGl2ZWx5LlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjRcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgRmlsdGVyYWJsZSBmID0+IChhIC0+IEJvb2xlYW4pIC0+IGYgYSAtPiBbZiBhLCBmIGFdXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gcHJlZCBBIHByZWRpY2F0ZSB0byBkZXRlcm1pbmUgd2hpY2ggc2lkZSB0aGUgZWxlbWVudCBiZWxvbmdzIHRvLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGZpbHRlcmFibGUgdGhlIGxpc3QgKG9yIG90aGVyIGZpbHRlcmFibGUpIHRvIHBhcnRpdGlvbi5cbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gQW4gYXJyYXksIGNvbnRhaW5pbmcgZmlyc3QgdGhlIHN1YnNldCBvZiBlbGVtZW50cyB0aGF0IHNhdGlzZnkgdGhlXG4gICAgICogICAgICAgICBwcmVkaWNhdGUsIGFuZCBzZWNvbmQgdGhlIHN1YnNldCBvZiBlbGVtZW50cyB0aGF0IGRvIG5vdCBzYXRpc2Z5LlxuICAgICAqIEBzZWUgUi5maWx0ZXIsIFIucmVqZWN0XG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5wYXJ0aXRpb24oUi5jb250YWlucygncycpLCBbJ3NzcycsICd0dHQnLCAnZm9vJywgJ2JhcnMnXSk7XG4gICAgICogICAgICAvLyA9PiBbIFsgJ3NzcycsICdiYXJzJyBdLCAgWyAndHR0JywgJ2ZvbycgXSBdXG4gICAgICpcbiAgICAgKiAgICAgIFIucGFydGl0aW9uKFIuY29udGFpbnMoJ3MnKSwgeyBhOiAnc3NzJywgYjogJ3R0dCcsIGZvbzogJ2JhcnMnIH0pO1xuICAgICAqICAgICAgLy8gPT4gWyB7IGE6ICdzc3MnLCBmb286ICdiYXJzJyB9LCB7IGI6ICd0dHQnIH0gIF1cbiAgICAgKi9cbiAgICB2YXIgcGFydGl0aW9uID0ganV4dChbXG4gICAgICAgIGZpbHRlcixcbiAgICAgICAgcmVqZWN0XG4gICAgXSk7XG5cbiAgICAvKipcbiAgICAgKiBQZXJmb3JtcyBsZWZ0LXRvLXJpZ2h0IGZ1bmN0aW9uIGNvbXBvc2l0aW9uLiBUaGUgbGVmdG1vc3QgZnVuY3Rpb24gbWF5IGhhdmVcbiAgICAgKiBhbnkgYXJpdHk7IHRoZSByZW1haW5pbmcgZnVuY3Rpb25zIG11c3QgYmUgdW5hcnkuXG4gICAgICpcbiAgICAgKiBJbiBzb21lIGxpYnJhcmllcyB0aGlzIGZ1bmN0aW9uIGlzIG5hbWVkIGBzZXF1ZW5jZWAuXG4gICAgICpcbiAgICAgKiAqKk5vdGU6KiogVGhlIHJlc3VsdCBvZiBwaXBlIGlzIG5vdCBhdXRvbWF0aWNhbGx5IGN1cnJpZWQuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICAgICAqIEBzaWcgKCgoYSwgYiwgLi4uLCBuKSAtPiBvKSwgKG8gLT4gcCksIC4uLiwgKHggLT4geSksICh5IC0+IHopKSAtPiAoKGEsIGIsIC4uLiwgbikgLT4geilcbiAgICAgKiBAcGFyYW0gey4uLkZ1bmN0aW9ufSBmdW5jdGlvbnNcbiAgICAgKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAgICAgKiBAc2VlIFIuY29tcG9zZVxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBmID0gUi5waXBlKE1hdGgucG93LCBSLm5lZ2F0ZSwgUi5pbmMpO1xuICAgICAqXG4gICAgICogICAgICBmKDMsIDQpOyAvLyAtKDNeNCkgKyAxXG4gICAgICovXG4gICAgdmFyIHBpcGUgPSBmdW5jdGlvbiBwaXBlKCkge1xuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdwaXBlIHJlcXVpcmVzIGF0IGxlYXN0IG9uZSBhcmd1bWVudCcpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfYXJpdHkoYXJndW1lbnRzWzBdLmxlbmd0aCwgcmVkdWNlKF9waXBlLCBhcmd1bWVudHNbMF0sIHRhaWwoYXJndW1lbnRzKSkpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBQZXJmb3JtcyBsZWZ0LXRvLXJpZ2h0IGNvbXBvc2l0aW9uIG9mIG9uZSBvciBtb3JlIFByb21pc2UtcmV0dXJuaW5nXG4gICAgICogZnVuY3Rpb25zLiBUaGUgbGVmdG1vc3QgZnVuY3Rpb24gbWF5IGhhdmUgYW55IGFyaXR5OyB0aGUgcmVtYWluaW5nIGZ1bmN0aW9uc1xuICAgICAqIG11c3QgYmUgdW5hcnkuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEwLjBcbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICAgKiBAc2lnICgoYSAtPiBQcm9taXNlIGIpLCAoYiAtPiBQcm9taXNlIGMpLCAuLi4sICh5IC0+IFByb21pc2UgeikpIC0+IChhIC0+IFByb21pc2UgeilcbiAgICAgKiBAcGFyYW0gey4uLkZ1bmN0aW9ufSBmdW5jdGlvbnNcbiAgICAgKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAgICAgKiBAc2VlIFIuY29tcG9zZVBcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICAvLyAgZm9sbG93ZXJzRm9yVXNlciA6OiBTdHJpbmcgLT4gUHJvbWlzZSBbVXNlcl1cbiAgICAgKiAgICAgIHZhciBmb2xsb3dlcnNGb3JVc2VyID0gUi5waXBlUChkYi5nZXRVc2VyQnlJZCwgZGIuZ2V0Rm9sbG93ZXJzKTtcbiAgICAgKi9cbiAgICB2YXIgcGlwZVAgPSBmdW5jdGlvbiBwaXBlUCgpIHtcbiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigncGlwZVAgcmVxdWlyZXMgYXQgbGVhc3Qgb25lIGFyZ3VtZW50Jyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF9hcml0eShhcmd1bWVudHNbMF0ubGVuZ3RoLCByZWR1Y2UoX3BpcGVQLCBhcmd1bWVudHNbMF0sIHRhaWwoYXJndW1lbnRzKSkpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBNdWx0aXBsaWVzIHRvZ2V0aGVyIGFsbCB0aGUgZWxlbWVudHMgb2YgYSBsaXN0LlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgTWF0aFxuICAgICAqIEBzaWcgW051bWJlcl0gLT4gTnVtYmVyXG4gICAgICogQHBhcmFtIHtBcnJheX0gbGlzdCBBbiBhcnJheSBvZiBudW1iZXJzXG4gICAgICogQHJldHVybiB7TnVtYmVyfSBUaGUgcHJvZHVjdCBvZiBhbGwgdGhlIG51bWJlcnMgaW4gdGhlIGxpc3QuXG4gICAgICogQHNlZSBSLnJlZHVjZVxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIucHJvZHVjdChbMiw0LDYsOCwxMDAsMV0pOyAvLz0+IDM4NDAwXG4gICAgICovXG4gICAgdmFyIHByb2R1Y3QgPSByZWR1Y2UobXVsdGlwbHksIDEpO1xuXG4gICAgLyoqXG4gICAgICogVHJhbnNmb3JtcyBhIFtUcmF2ZXJzYWJsZV0oaHR0cHM6Ly9naXRodWIuY29tL2ZhbnRhc3lsYW5kL2ZhbnRhc3ktbGFuZCN0cmF2ZXJzYWJsZSlcbiAgICAgKiBvZiBbQXBwbGljYXRpdmVdKGh0dHBzOi8vZ2l0aHViLmNvbS9mYW50YXN5bGFuZC9mYW50YXN5LWxhbmQjYXBwbGljYXRpdmUpIGludG8gYW5cbiAgICAgKiBBcHBsaWNhdGl2ZSBvZiBUcmF2ZXJzYWJsZS5cbiAgICAgKlxuICAgICAqIERpc3BhdGNoZXMgdG8gdGhlIGBzZXF1ZW5jZWAgbWV0aG9kIG9mIHRoZSBzZWNvbmQgYXJndW1lbnQsIGlmIHByZXNlbnQuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjE5LjBcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgKEFwcGxpY2F0aXZlIGYsIFRyYXZlcnNhYmxlIHQpID0+IChhIC0+IGYgYSkgLT4gdCAoZiBhKSAtPiBmICh0IGEpXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gb2ZcbiAgICAgKiBAcGFyYW0geyp9IHRyYXZlcnNhYmxlXG4gICAgICogQHJldHVybiB7Kn1cbiAgICAgKiBAc2VlIFIudHJhdmVyc2VcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLnNlcXVlbmNlKE1heWJlLm9mLCBbSnVzdCgxKSwgSnVzdCgyKSwgSnVzdCgzKV0pOyAgIC8vPT4gSnVzdChbMSwgMiwgM10pXG4gICAgICogICAgICBSLnNlcXVlbmNlKE1heWJlLm9mLCBbSnVzdCgxKSwgSnVzdCgyKSwgTm90aGluZygpXSk7IC8vPT4gTm90aGluZygpXG4gICAgICpcbiAgICAgKiAgICAgIFIuc2VxdWVuY2UoUi5vZiwgSnVzdChbMSwgMiwgM10pKTsgLy89PiBbSnVzdCgxKSwgSnVzdCgyKSwgSnVzdCgzKV1cbiAgICAgKiAgICAgIFIuc2VxdWVuY2UoUi5vZiwgTm90aGluZygpKTsgICAgICAgLy89PiBbTm90aGluZygpXVxuICAgICAqL1xuICAgIHZhciBzZXF1ZW5jZSA9IF9jdXJyeTIoZnVuY3Rpb24gc2VxdWVuY2Uob2YsIHRyYXZlcnNhYmxlKSB7XG4gICAgICAgIHJldHVybiB0eXBlb2YgdHJhdmVyc2FibGUuc2VxdWVuY2UgPT09ICdmdW5jdGlvbicgPyB0cmF2ZXJzYWJsZS5zZXF1ZW5jZShvZikgOiByZWR1Y2VSaWdodChmdW5jdGlvbiAoYWNjLCB4KSB7XG4gICAgICAgICAgICByZXR1cm4gYXAobWFwKHByZXBlbmQsIHgpLCBhY2MpO1xuICAgICAgICB9LCBvZihbXSksIHRyYXZlcnNhYmxlKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIE1hcHMgYW4gW0FwcGxpY2F0aXZlXShodHRwczovL2dpdGh1Yi5jb20vZmFudGFzeWxhbmQvZmFudGFzeS1sYW5kI2FwcGxpY2F0aXZlKS1yZXR1cm5pbmdcbiAgICAgKiBmdW5jdGlvbiBvdmVyIGEgW1RyYXZlcnNhYmxlXShodHRwczovL2dpdGh1Yi5jb20vZmFudGFzeWxhbmQvZmFudGFzeS1sYW5kI3RyYXZlcnNhYmxlKSxcbiAgICAgKiB0aGVuIHVzZXMgW2BzZXF1ZW5jZWBdKCNzZXF1ZW5jZSkgdG8gdHJhbnNmb3JtIHRoZSByZXN1bHRpbmcgVHJhdmVyc2FibGUgb2YgQXBwbGljYXRpdmVcbiAgICAgKiBpbnRvIGFuIEFwcGxpY2F0aXZlIG9mIFRyYXZlcnNhYmxlLlxuICAgICAqXG4gICAgICogRGlzcGF0Y2hlcyB0byB0aGUgYHNlcXVlbmNlYCBtZXRob2Qgb2YgdGhlIHRoaXJkIGFyZ3VtZW50LCBpZiBwcmVzZW50LlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xOS4wXG4gICAgICogQGNhdGVnb3J5IExpc3RcbiAgICAgKiBAc2lnIChBcHBsaWNhdGl2ZSBmLCBUcmF2ZXJzYWJsZSB0KSA9PiAoYSAtPiBmIGEpIC0+IChhIC0+IGYgYikgLT4gdCBhIC0+IGYgKHQgYilcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvZlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZcbiAgICAgKiBAcGFyYW0geyp9IHRyYXZlcnNhYmxlXG4gICAgICogQHJldHVybiB7Kn1cbiAgICAgKiBAc2VlIFIuc2VxdWVuY2VcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICAvLyBSZXR1cm5zIGBOb3RoaW5nYCBpZiB0aGUgZ2l2ZW4gZGl2aXNvciBpcyBgMGBcbiAgICAgKiAgICAgIHNhZmVEaXYgPSBuID0+IGQgPT4gZCA9PT0gMCA/IE5vdGhpbmcoKSA6IEp1c3QobiAvIGQpXG4gICAgICpcbiAgICAgKiAgICAgIFIudHJhdmVyc2UoTWF5YmUub2YsIHNhZmVEaXYoMTApLCBbMiwgNCwgNV0pOyAvLz0+IEp1c3QoWzUsIDIuNSwgMl0pXG4gICAgICogICAgICBSLnRyYXZlcnNlKE1heWJlLm9mLCBzYWZlRGl2KDEwKSwgWzIsIDAsIDVdKTsgLy89PiBOb3RoaW5nXG4gICAgICovXG4gICAgdmFyIHRyYXZlcnNlID0gX2N1cnJ5MyhmdW5jdGlvbiB0cmF2ZXJzZShvZiwgZiwgdHJhdmVyc2FibGUpIHtcbiAgICAgICAgcmV0dXJuIHNlcXVlbmNlKG9mLCBtYXAoZiwgdHJhdmVyc2FibGUpKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFNob3J0aGFuZCBmb3IgYFIuY2hhaW4oUi5pZGVudGl0eSlgLCB3aGljaCByZW1vdmVzIG9uZSBsZXZlbCBvZiBuZXN0aW5nIGZyb21cbiAgICAgKiBhbnkgW0NoYWluXShodHRwczovL2dpdGh1Yi5jb20vZmFudGFzeWxhbmQvZmFudGFzeS1sYW5kI2NoYWluKS5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMy4wXG4gICAgICogQGNhdGVnb3J5IExpc3RcbiAgICAgKiBAc2lnIENoYWluIGMgPT4gYyAoYyBhKSAtPiBjIGFcbiAgICAgKiBAcGFyYW0geyp9IGxpc3RcbiAgICAgKiBAcmV0dXJuIHsqfVxuICAgICAqIEBzZWUgUi5mbGF0dGVuLCBSLmNoYWluXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi51bm5lc3QoWzEsIFsyXSwgW1szXV1dKTsgLy89PiBbMSwgMiwgWzNdXVxuICAgICAqICAgICAgUi51bm5lc3QoW1sxLCAyXSwgWzMsIDRdLCBbNSwgNl1dKTsgLy89PiBbMSwgMiwgMywgNCwgNSwgNl1cbiAgICAgKi9cbiAgICB2YXIgdW5uZXN0ID0gY2hhaW4oX2lkZW50aXR5KTtcblxuICAgIHZhciBfY29udGFpbnMgPSBmdW5jdGlvbiBfY29udGFpbnMoYSwgbGlzdCkge1xuICAgICAgICByZXR1cm4gX2luZGV4T2YobGlzdCwgYSwgMCkgPj0gMDtcbiAgICB9O1xuXG4gICAgLy8gIG1hcFBhaXJzIDo6IChPYmplY3QsIFtTdHJpbmddKSAtPiBbU3RyaW5nXVxuICAgIHZhciBfdG9TdHJpbmcgPSBmdW5jdGlvbiBfdG9TdHJpbmcoeCwgc2Vlbikge1xuICAgICAgICB2YXIgcmVjdXIgPSBmdW5jdGlvbiByZWN1cih5KSB7XG4gICAgICAgICAgICB2YXIgeHMgPSBzZWVuLmNvbmNhdChbeF0pO1xuICAgICAgICAgICAgcmV0dXJuIF9jb250YWlucyh5LCB4cykgPyAnPENpcmN1bGFyPicgOiBfdG9TdHJpbmcoeSwgeHMpO1xuICAgICAgICB9O1xuICAgICAgICAvLyAgbWFwUGFpcnMgOjogKE9iamVjdCwgW1N0cmluZ10pIC0+IFtTdHJpbmddXG4gICAgICAgIHZhciBtYXBQYWlycyA9IGZ1bmN0aW9uIChvYmosIGtleXMpIHtcbiAgICAgICAgICAgIHJldHVybiBfbWFwKGZ1bmN0aW9uIChrKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9xdW90ZShrKSArICc6ICcgKyByZWN1cihvYmpba10pO1xuICAgICAgICAgICAgfSwga2V5cy5zbGljZSgpLnNvcnQoKSk7XG4gICAgICAgIH07XG4gICAgICAgIHN3aXRjaCAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHgpKSB7XG4gICAgICAgIGNhc2UgJ1tvYmplY3QgQXJndW1lbnRzXSc6XG4gICAgICAgICAgICByZXR1cm4gJyhmdW5jdGlvbigpIHsgcmV0dXJuIGFyZ3VtZW50czsgfSgnICsgX21hcChyZWN1ciwgeCkuam9pbignLCAnKSArICcpKSc7XG4gICAgICAgIGNhc2UgJ1tvYmplY3QgQXJyYXldJzpcbiAgICAgICAgICAgIHJldHVybiAnWycgKyBfbWFwKHJlY3VyLCB4KS5jb25jYXQobWFwUGFpcnMoeCwgcmVqZWN0KGZ1bmN0aW9uIChrKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIC9eXFxkKyQvLnRlc3Qoayk7XG4gICAgICAgICAgICB9LCBrZXlzKHgpKSkpLmpvaW4oJywgJykgKyAnXSc7XG4gICAgICAgIGNhc2UgJ1tvYmplY3QgQm9vbGVhbl0nOlxuICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiB4ID09PSAnb2JqZWN0JyA/ICduZXcgQm9vbGVhbignICsgcmVjdXIoeC52YWx1ZU9mKCkpICsgJyknIDogeC50b1N0cmluZygpO1xuICAgICAgICBjYXNlICdbb2JqZWN0IERhdGVdJzpcbiAgICAgICAgICAgIHJldHVybiAnbmV3IERhdGUoJyArIChpc05hTih4LnZhbHVlT2YoKSkgPyByZWN1cihOYU4pIDogX3F1b3RlKF90b0lTT1N0cmluZyh4KSkpICsgJyknO1xuICAgICAgICBjYXNlICdbb2JqZWN0IE51bGxdJzpcbiAgICAgICAgICAgIHJldHVybiAnbnVsbCc7XG4gICAgICAgIGNhc2UgJ1tvYmplY3QgTnVtYmVyXSc6XG4gICAgICAgICAgICByZXR1cm4gdHlwZW9mIHggPT09ICdvYmplY3QnID8gJ25ldyBOdW1iZXIoJyArIHJlY3VyKHgudmFsdWVPZigpKSArICcpJyA6IDEgLyB4ID09PSAtSW5maW5pdHkgPyAnLTAnIDogeC50b1N0cmluZygxMCk7XG4gICAgICAgIGNhc2UgJ1tvYmplY3QgU3RyaW5nXSc6XG4gICAgICAgICAgICByZXR1cm4gdHlwZW9mIHggPT09ICdvYmplY3QnID8gJ25ldyBTdHJpbmcoJyArIHJlY3VyKHgudmFsdWVPZigpKSArICcpJyA6IF9xdW90ZSh4KTtcbiAgICAgICAgY2FzZSAnW29iamVjdCBVbmRlZmluZWRdJzpcbiAgICAgICAgICAgIHJldHVybiAndW5kZWZpbmVkJztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGlmICh0eXBlb2YgeC50b1N0cmluZyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIHZhciByZXByID0geC50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgIGlmIChyZXByICE9PSAnW29iamVjdCBPYmplY3RdJykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVwcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gJ3snICsgbWFwUGFpcnMoeCwga2V5cyh4KSkuam9pbignLCAnKSArICd9JztcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBQZXJmb3JtcyByaWdodC10by1sZWZ0IGZ1bmN0aW9uIGNvbXBvc2l0aW9uLiBUaGUgcmlnaHRtb3N0IGZ1bmN0aW9uIG1heSBoYXZlXG4gICAgICogYW55IGFyaXR5OyB0aGUgcmVtYWluaW5nIGZ1bmN0aW9ucyBtdXN0IGJlIHVuYXJ5LlxuICAgICAqXG4gICAgICogKipOb3RlOioqIFRoZSByZXN1bHQgb2YgY29tcG9zZSBpcyBub3QgYXV0b21hdGljYWxseSBjdXJyaWVkLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICAgKiBAc2lnICgoeSAtPiB6KSwgKHggLT4geSksIC4uLiwgKG8gLT4gcCksICgoYSwgYiwgLi4uLCBuKSAtPiBvKSkgLT4gKChhLCBiLCAuLi4sIG4pIC0+IHopXG4gICAgICogQHBhcmFtIHsuLi5GdW5jdGlvbn0gZnVuY3Rpb25zXG4gICAgICogQHJldHVybiB7RnVuY3Rpb259XG4gICAgICogQHNlZSBSLnBpcGVcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgZiA9IFIuY29tcG9zZShSLmluYywgUi5uZWdhdGUsIE1hdGgucG93KTtcbiAgICAgKlxuICAgICAqICAgICAgZigzLCA0KTsgLy8gLSgzXjQpICsgMVxuICAgICAqL1xuICAgIHZhciBjb21wb3NlID0gZnVuY3Rpb24gY29tcG9zZSgpIHtcbiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignY29tcG9zZSByZXF1aXJlcyBhdCBsZWFzdCBvbmUgYXJndW1lbnQnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGlwZS5hcHBseSh0aGlzLCByZXZlcnNlKGFyZ3VtZW50cykpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSByaWdodC10by1sZWZ0IEtsZWlzbGkgY29tcG9zaXRpb24gb2YgdGhlIHByb3ZpZGVkIGZ1bmN0aW9ucyxcbiAgICAgKiBlYWNoIG9mIHdoaWNoIG11c3QgcmV0dXJuIGEgdmFsdWUgb2YgYSB0eXBlIHN1cHBvcnRlZCBieSBbYGNoYWluYF0oI2NoYWluKS5cbiAgICAgKlxuICAgICAqIGBSLmNvbXBvc2VLKGgsIGcsIGYpYCBpcyBlcXVpdmFsZW50IHRvIGBSLmNvbXBvc2UoUi5jaGFpbihoKSwgUi5jaGFpbihnKSwgUi5jaGFpbihmKSlgLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xNi4wXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAgICogQHNpZyBDaGFpbiBtID0+ICgoeSAtPiBtIHopLCAoeCAtPiBtIHkpLCAuLi4sIChhIC0+IG0gYikpIC0+IChtIGEgLT4gbSB6KVxuICAgICAqIEBwYXJhbSB7Li4uRnVuY3Rpb259XG4gICAgICogQHJldHVybiB7RnVuY3Rpb259XG4gICAgICogQHNlZSBSLnBpcGVLXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgLy8gIHBhcnNlSnNvbiA6OiBTdHJpbmcgLT4gTWF5YmUgKlxuICAgICAqICAgICAgLy8gIGdldCA6OiBTdHJpbmcgLT4gT2JqZWN0IC0+IE1heWJlICpcbiAgICAgKlxuICAgICAqICAgICAgLy8gIGdldFN0YXRlQ29kZSA6OiBNYXliZSBTdHJpbmcgLT4gTWF5YmUgU3RyaW5nXG4gICAgICogICAgICB2YXIgZ2V0U3RhdGVDb2RlID0gUi5jb21wb3NlSyhcbiAgICAgKiAgICAgICAgUi5jb21wb3NlKE1heWJlLm9mLCBSLnRvVXBwZXIpLFxuICAgICAqICAgICAgICBnZXQoJ3N0YXRlJyksXG4gICAgICogICAgICAgIGdldCgnYWRkcmVzcycpLFxuICAgICAqICAgICAgICBnZXQoJ3VzZXInKSxcbiAgICAgKiAgICAgICAgcGFyc2VKc29uXG4gICAgICogICAgICApO1xuICAgICAqXG4gICAgICogICAgICBnZXRTdGF0ZUNvZGUoTWF5YmUub2YoJ3tcInVzZXJcIjp7XCJhZGRyZXNzXCI6e1wic3RhdGVcIjpcIm55XCJ9fX0nKSk7XG4gICAgICogICAgICAvLz0+IEp1c3QoJ05ZJylcbiAgICAgKiAgICAgIGdldFN0YXRlQ29kZShNYXliZS5vZignW0ludmFsaWQgSlNPTl0nKSk7XG4gICAgICogICAgICAvLz0+IE5vdGhpbmcoKVxuICAgICAqL1xuICAgIHZhciBjb21wb3NlSyA9IGZ1bmN0aW9uIGNvbXBvc2VLKCkge1xuICAgICAgICByZXR1cm4gY29tcG9zZS5hcHBseSh0aGlzLCBwcmVwZW5kKGlkZW50aXR5LCBtYXAoY2hhaW4sIGFyZ3VtZW50cykpKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogUGVyZm9ybXMgcmlnaHQtdG8tbGVmdCBjb21wb3NpdGlvbiBvZiBvbmUgb3IgbW9yZSBQcm9taXNlLXJldHVybmluZ1xuICAgICAqIGZ1bmN0aW9ucy4gVGhlIHJpZ2h0bW9zdCBmdW5jdGlvbiBtYXkgaGF2ZSBhbnkgYXJpdHk7IHRoZSByZW1haW5pbmdcbiAgICAgKiBmdW5jdGlvbnMgbXVzdCBiZSB1bmFyeS5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMTAuMFxuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICAgICAqIEBzaWcgKCh5IC0+IFByb21pc2UgeiksICh4IC0+IFByb21pc2UgeSksIC4uLiwgKGEgLT4gUHJvbWlzZSBiKSkgLT4gKGEgLT4gUHJvbWlzZSB6KVxuICAgICAqIEBwYXJhbSB7Li4uRnVuY3Rpb259IGZ1bmN0aW9uc1xuICAgICAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICAgICAqIEBzZWUgUi5waXBlUFxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIC8vICBmb2xsb3dlcnNGb3JVc2VyIDo6IFN0cmluZyAtPiBQcm9taXNlIFtVc2VyXVxuICAgICAqICAgICAgdmFyIGZvbGxvd2Vyc0ZvclVzZXIgPSBSLmNvbXBvc2VQKGRiLmdldEZvbGxvd2VycywgZGIuZ2V0VXNlckJ5SWQpO1xuICAgICAqL1xuICAgIHZhciBjb21wb3NlUCA9IGZ1bmN0aW9uIGNvbXBvc2VQKCkge1xuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdjb21wb3NlUCByZXF1aXJlcyBhdCBsZWFzdCBvbmUgYXJndW1lbnQnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGlwZVAuYXBwbHkodGhpcywgcmV2ZXJzZShhcmd1bWVudHMpKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogV3JhcHMgYSBjb25zdHJ1Y3RvciBmdW5jdGlvbiBpbnNpZGUgYSBjdXJyaWVkIGZ1bmN0aW9uIHRoYXQgY2FuIGJlIGNhbGxlZFxuICAgICAqIHdpdGggdGhlIHNhbWUgYXJndW1lbnRzIGFuZCByZXR1cm5zIHRoZSBzYW1lIHR5cGUuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICAgICAqIEBzaWcgKCogLT4geyp9KSAtPiAoKiAtPiB7Kn0pXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gRm4gVGhlIGNvbnN0cnVjdG9yIGZ1bmN0aW9uIHRvIHdyYXAuXG4gICAgICogQHJldHVybiB7RnVuY3Rpb259IEEgd3JhcHBlZCwgY3VycmllZCBjb25zdHJ1Y3RvciBmdW5jdGlvbi5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICAvLyBDb25zdHJ1Y3RvciBmdW5jdGlvblxuICAgICAqICAgICAgdmFyIFdpZGdldCA9IGNvbmZpZyA9PiB7XG4gICAgICogICAgICAgIC8vIC4uLlxuICAgICAqICAgICAgfTtcbiAgICAgKiAgICAgIFdpZGdldC5wcm90b3R5cGUgPSB7XG4gICAgICogICAgICAgIC8vIC4uLlxuICAgICAqICAgICAgfTtcbiAgICAgKiAgICAgIHZhciBhbGxDb25maWdzID0gW1xuICAgICAqICAgICAgICAvLyAuLi5cbiAgICAgKiAgICAgIF07XG4gICAgICogICAgICBSLm1hcChSLmNvbnN0cnVjdChXaWRnZXQpLCBhbGxDb25maWdzKTsgLy8gYSBsaXN0IG9mIFdpZGdldHNcbiAgICAgKi9cbiAgICB2YXIgY29uc3RydWN0ID0gX2N1cnJ5MShmdW5jdGlvbiBjb25zdHJ1Y3QoRm4pIHtcbiAgICAgICAgcmV0dXJuIGNvbnN0cnVjdE4oRm4ubGVuZ3RoLCBGbik7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgc3BlY2lmaWVkIHZhbHVlIGlzIGVxdWFsLCBpbiBgUi5lcXVhbHNgIHRlcm1zLCB0byBhdFxuICAgICAqIGxlYXN0IG9uZSBlbGVtZW50IG9mIHRoZSBnaXZlbiBsaXN0OyBgZmFsc2VgIG90aGVyd2lzZS5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4wXG4gICAgICogQGNhdGVnb3J5IExpc3RcbiAgICAgKiBAc2lnIGEgLT4gW2FdIC0+IEJvb2xlYW5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gYSBUaGUgaXRlbSB0byBjb21wYXJlIGFnYWluc3QuXG4gICAgICogQHBhcmFtIHtBcnJheX0gbGlzdCBUaGUgYXJyYXkgdG8gY29uc2lkZXIuXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn0gYHRydWVgIGlmIHRoZSBpdGVtIGlzIGluIHRoZSBsaXN0LCBgZmFsc2VgIG90aGVyd2lzZS5cbiAgICAgKiBAc2VlIFIuYW55XG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5jb250YWlucygzLCBbMSwgMiwgM10pOyAvLz0+IHRydWVcbiAgICAgKiAgICAgIFIuY29udGFpbnMoNCwgWzEsIDIsIDNdKTsgLy89PiBmYWxzZVxuICAgICAqICAgICAgUi5jb250YWlucyhbNDJdLCBbWzQyXV0pOyAvLz0+IHRydWVcbiAgICAgKi9cbiAgICB2YXIgY29udGFpbnMgPSBfY3VycnkyKF9jb250YWlucyk7XG5cbiAgICAvKipcbiAgICAgKiBGaW5kcyB0aGUgc2V0IChpLmUuIG5vIGR1cGxpY2F0ZXMpIG9mIGFsbCBlbGVtZW50cyBpbiB0aGUgZmlyc3QgbGlzdCBub3RcbiAgICAgKiBjb250YWluZWQgaW4gdGhlIHNlY29uZCBsaXN0LlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgUmVsYXRpb25cbiAgICAgKiBAc2lnIFsqXSAtPiBbKl0gLT4gWypdXG4gICAgICogQHBhcmFtIHtBcnJheX0gbGlzdDEgVGhlIGZpcnN0IGxpc3QuXG4gICAgICogQHBhcmFtIHtBcnJheX0gbGlzdDIgVGhlIHNlY29uZCBsaXN0LlxuICAgICAqIEByZXR1cm4ge0FycmF5fSBUaGUgZWxlbWVudHMgaW4gYGxpc3QxYCB0aGF0IGFyZSBub3QgaW4gYGxpc3QyYC5cbiAgICAgKiBAc2VlIFIuZGlmZmVyZW5jZVdpdGhcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLmRpZmZlcmVuY2UoWzEsMiwzLDRdLCBbNyw2LDUsNCwzXSk7IC8vPT4gWzEsMl1cbiAgICAgKiAgICAgIFIuZGlmZmVyZW5jZShbNyw2LDUsNCwzXSwgWzEsMiwzLDRdKTsgLy89PiBbNyw2LDVdXG4gICAgICovXG4gICAgdmFyIGRpZmZlcmVuY2UgPSBfY3VycnkyKGZ1bmN0aW9uIGRpZmZlcmVuY2UoZmlyc3QsIHNlY29uZCkge1xuICAgICAgICB2YXIgb3V0ID0gW107XG4gICAgICAgIHZhciBpZHggPSAwO1xuICAgICAgICB2YXIgZmlyc3RMZW4gPSBmaXJzdC5sZW5ndGg7XG4gICAgICAgIHdoaWxlIChpZHggPCBmaXJzdExlbikge1xuICAgICAgICAgICAgaWYgKCFfY29udGFpbnMoZmlyc3RbaWR4XSwgc2Vjb25kKSAmJiAhX2NvbnRhaW5zKGZpcnN0W2lkeF0sIG91dCkpIHtcbiAgICAgICAgICAgICAgICBvdXRbb3V0Lmxlbmd0aF0gPSBmaXJzdFtpZHhdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWR4ICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBuZXcgbGlzdCB3aXRob3V0IGFueSBjb25zZWN1dGl2ZWx5IHJlcGVhdGluZyBlbGVtZW50cy4gYFIuZXF1YWxzYFxuICAgICAqIGlzIHVzZWQgdG8gZGV0ZXJtaW5lIGVxdWFsaXR5LlxuICAgICAqXG4gICAgICogRGlzcGF0Y2hlcyB0byB0aGUgYGRyb3BSZXBlYXRzYCBtZXRob2Qgb2YgdGhlIGZpcnN0IGFyZ3VtZW50LCBpZiBwcmVzZW50LlxuICAgICAqXG4gICAgICogQWN0cyBhcyBhIHRyYW5zZHVjZXIgaWYgYSB0cmFuc2Zvcm1lciBpcyBnaXZlbiBpbiBsaXN0IHBvc2l0aW9uLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xNC4wXG4gICAgICogQGNhdGVnb3J5IExpc3RcbiAgICAgKiBAc2lnIFthXSAtPiBbYV1cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBsaXN0IFRoZSBhcnJheSB0byBjb25zaWRlci5cbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gYGxpc3RgIHdpdGhvdXQgcmVwZWF0aW5nIGVsZW1lbnRzLlxuICAgICAqIEBzZWUgUi50cmFuc2R1Y2VcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgIFIuZHJvcFJlcGVhdHMoWzEsIDEsIDEsIDIsIDMsIDQsIDQsIDIsIDJdKTsgLy89PiBbMSwgMiwgMywgNCwgMl1cbiAgICAgKi9cbiAgICB2YXIgZHJvcFJlcGVhdHMgPSBfY3VycnkxKF9kaXNwYXRjaGFibGUoJ2Ryb3BSZXBlYXRzJywgX3hkcm9wUmVwZWF0c1dpdGgoZXF1YWxzKSwgZHJvcFJlcGVhdHNXaXRoKGVxdWFscykpKTtcblxuICAgIC8qKlxuICAgICAqIFwibGlmdHNcIiBhIGZ1bmN0aW9uIG9mIGFyaXR5ID4gMSBzbyB0aGF0IGl0IG1heSBcIm1hcCBvdmVyXCIgYSBsaXN0LCBGdW5jdGlvbiBvciBvdGhlclxuICAgICAqIG9iamVjdCB0aGF0IHNhdGlzZmllcyB0aGUgW0ZhbnRhc3lMYW5kIEFwcGx5IHNwZWNdKGh0dHBzOi8vZ2l0aHViLmNvbS9mYW50YXN5bGFuZC9mYW50YXN5LWxhbmQjYXBwbHkpLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC43LjBcbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICAgKiBAc2lnICgqLi4uIC0+ICopIC0+IChbKl0uLi4gLT4gWypdKVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBmdW5jdGlvbiB0byBsaWZ0IGludG8gaGlnaGVyIGNvbnRleHRcbiAgICAgKiBAcmV0dXJuIHtGdW5jdGlvbn0gVGhlIGxpZnRlZCBmdW5jdGlvbi5cbiAgICAgKiBAc2VlIFIubGlmdE5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgbWFkZDMgPSBSLmxpZnQoUi5jdXJyeSgoYSwgYiwgYykgPT4gYSArIGIgKyBjKSk7XG4gICAgICpcbiAgICAgKiAgICAgIG1hZGQzKFsxLDIsM10sIFsxLDIsM10sIFsxXSk7IC8vPT4gWzMsIDQsIDUsIDQsIDUsIDYsIDUsIDYsIDddXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBtYWRkNSA9IFIubGlmdChSLmN1cnJ5KChhLCBiLCBjLCBkLCBlKSA9PiBhICsgYiArIGMgKyBkICsgZSkpO1xuICAgICAqXG4gICAgICogICAgICBtYWRkNShbMSwyXSwgWzNdLCBbNCwgNV0sIFs2XSwgWzcsIDhdKTsgLy89PiBbMjEsIDIyLCAyMiwgMjMsIDIyLCAyMywgMjMsIDI0XVxuICAgICAqL1xuICAgIHZhciBsaWZ0ID0gX2N1cnJ5MShmdW5jdGlvbiBsaWZ0KGZuKSB7XG4gICAgICAgIHJldHVybiBsaWZ0Tihmbi5sZW5ndGgsIGZuKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBwYXJ0aWFsIGNvcHkgb2YgYW4gb2JqZWN0IG9taXR0aW5nIHRoZSBrZXlzIHNwZWNpZmllZC5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4wXG4gICAgICogQGNhdGVnb3J5IE9iamVjdFxuICAgICAqIEBzaWcgW1N0cmluZ10gLT4ge1N0cmluZzogKn0gLT4ge1N0cmluZzogKn1cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBuYW1lcyBhbiBhcnJheSBvZiBTdHJpbmcgcHJvcGVydHkgbmFtZXMgdG8gb21pdCBmcm9tIHRoZSBuZXcgb2JqZWN0XG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9iaiBUaGUgb2JqZWN0IHRvIGNvcHkgZnJvbVxuICAgICAqIEByZXR1cm4ge09iamVjdH0gQSBuZXcgb2JqZWN0IHdpdGggcHJvcGVydGllcyBmcm9tIGBuYW1lc2Agbm90IG9uIGl0LlxuICAgICAqIEBzZWUgUi5waWNrXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5vbWl0KFsnYScsICdkJ10sIHthOiAxLCBiOiAyLCBjOiAzLCBkOiA0fSk7IC8vPT4ge2I6IDIsIGM6IDN9XG4gICAgICovXG4gICAgdmFyIG9taXQgPSBfY3VycnkyKGZ1bmN0aW9uIG9taXQobmFtZXMsIG9iaikge1xuICAgICAgICB2YXIgcmVzdWx0ID0ge307XG4gICAgICAgIGZvciAodmFyIHByb3AgaW4gb2JqKSB7XG4gICAgICAgICAgICBpZiAoIV9jb250YWlucyhwcm9wLCBuYW1lcykpIHtcbiAgICAgICAgICAgICAgICByZXN1bHRbcHJvcF0gPSBvYmpbcHJvcF07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGxlZnQtdG8tcmlnaHQgS2xlaXNsaSBjb21wb3NpdGlvbiBvZiB0aGUgcHJvdmlkZWQgZnVuY3Rpb25zLFxuICAgICAqIGVhY2ggb2Ygd2hpY2ggbXVzdCByZXR1cm4gYSB2YWx1ZSBvZiBhIHR5cGUgc3VwcG9ydGVkIGJ5IFtgY2hhaW5gXSgjY2hhaW4pLlxuICAgICAqXG4gICAgICogYFIucGlwZUsoZiwgZywgaClgIGlzIGVxdWl2YWxlbnQgdG8gYFIucGlwZShSLmNoYWluKGYpLCBSLmNoYWluKGcpLCBSLmNoYWluKGgpKWAuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjE2LjBcbiAgICAgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAgICAgKiBAc2lnIENoYWluIG0gPT4gKChhIC0+IG0gYiksIChiIC0+IG0gYyksIC4uLiwgKHkgLT4gbSB6KSkgLT4gKG0gYSAtPiBtIHopXG4gICAgICogQHBhcmFtIHsuLi5GdW5jdGlvbn1cbiAgICAgKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAgICAgKiBAc2VlIFIuY29tcG9zZUtcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICAvLyAgcGFyc2VKc29uIDo6IFN0cmluZyAtPiBNYXliZSAqXG4gICAgICogICAgICAvLyAgZ2V0IDo6IFN0cmluZyAtPiBPYmplY3QgLT4gTWF5YmUgKlxuICAgICAqXG4gICAgICogICAgICAvLyAgZ2V0U3RhdGVDb2RlIDo6IE1heWJlIFN0cmluZyAtPiBNYXliZSBTdHJpbmdcbiAgICAgKiAgICAgIHZhciBnZXRTdGF0ZUNvZGUgPSBSLnBpcGVLKFxuICAgICAqICAgICAgICBwYXJzZUpzb24sXG4gICAgICogICAgICAgIGdldCgndXNlcicpLFxuICAgICAqICAgICAgICBnZXQoJ2FkZHJlc3MnKSxcbiAgICAgKiAgICAgICAgZ2V0KCdzdGF0ZScpLFxuICAgICAqICAgICAgICBSLmNvbXBvc2UoTWF5YmUub2YsIFIudG9VcHBlcilcbiAgICAgKiAgICAgICk7XG4gICAgICpcbiAgICAgKiAgICAgIGdldFN0YXRlQ29kZShNYXliZS5vZigne1widXNlclwiOntcImFkZHJlc3NcIjp7XCJzdGF0ZVwiOlwibnlcIn19fScpKTtcbiAgICAgKiAgICAgIC8vPT4gSnVzdCgnTlknKVxuICAgICAqICAgICAgZ2V0U3RhdGVDb2RlKE1heWJlLm9mKCdbSW52YWxpZCBKU09OXScpKTtcbiAgICAgKiAgICAgIC8vPT4gTm90aGluZygpXG4gICAgICovXG4gICAgdmFyIHBpcGVLID0gZnVuY3Rpb24gcGlwZUsoKSB7XG4gICAgICAgIHJldHVybiBjb21wb3NlSy5hcHBseSh0aGlzLCByZXZlcnNlKGFyZ3VtZW50cykpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIGdpdmVuIHZhbHVlLiBgZXZhbGAnaW5nIHRoZSBvdXRwdXRcbiAgICAgKiBzaG91bGQgcmVzdWx0IGluIGEgdmFsdWUgZXF1aXZhbGVudCB0byB0aGUgaW5wdXQgdmFsdWUuIE1hbnkgb2YgdGhlIGJ1aWx0LWluXG4gICAgICogYHRvU3RyaW5nYCBtZXRob2RzIGRvIG5vdCBzYXRpc2Z5IHRoaXMgcmVxdWlyZW1lbnQuXG4gICAgICpcbiAgICAgKiBJZiB0aGUgZ2l2ZW4gdmFsdWUgaXMgYW4gYFtvYmplY3QgT2JqZWN0XWAgd2l0aCBhIGB0b1N0cmluZ2AgbWV0aG9kIG90aGVyXG4gICAgICogdGhhbiBgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZ2AsIHRoaXMgbWV0aG9kIGlzIGludm9rZWQgd2l0aCBubyBhcmd1bWVudHNcbiAgICAgKiB0byBwcm9kdWNlIHRoZSByZXR1cm4gdmFsdWUuIFRoaXMgbWVhbnMgdXNlci1kZWZpbmVkIGNvbnN0cnVjdG9yIGZ1bmN0aW9uc1xuICAgICAqIGNhbiBwcm92aWRlIGEgc3VpdGFibGUgYHRvU3RyaW5nYCBtZXRob2QuIEZvciBleGFtcGxlOlxuICAgICAqXG4gICAgICogICAgIGZ1bmN0aW9uIFBvaW50KHgsIHkpIHtcbiAgICAgKiAgICAgICB0aGlzLnggPSB4O1xuICAgICAqICAgICAgIHRoaXMueSA9IHk7XG4gICAgICogICAgIH1cbiAgICAgKlxuICAgICAqICAgICBQb2ludC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcbiAgICAgKiAgICAgICByZXR1cm4gJ25ldyBQb2ludCgnICsgdGhpcy54ICsgJywgJyArIHRoaXMueSArICcpJztcbiAgICAgKiAgICAgfTtcbiAgICAgKlxuICAgICAqICAgICBSLnRvU3RyaW5nKG5ldyBQb2ludCgxLCAyKSk7IC8vPT4gJ25ldyBQb2ludCgxLCAyKSdcbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMTQuMFxuICAgICAqIEBjYXRlZ29yeSBTdHJpbmdcbiAgICAgKiBAc2lnICogLT4gU3RyaW5nXG4gICAgICogQHBhcmFtIHsqfSB2YWxcbiAgICAgKiBAcmV0dXJuIHtTdHJpbmd9XG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi50b1N0cmluZyg0Mik7IC8vPT4gJzQyJ1xuICAgICAqICAgICAgUi50b1N0cmluZygnYWJjJyk7IC8vPT4gJ1wiYWJjXCInXG4gICAgICogICAgICBSLnRvU3RyaW5nKFsxLCAyLCAzXSk7IC8vPT4gJ1sxLCAyLCAzXSdcbiAgICAgKiAgICAgIFIudG9TdHJpbmcoe2ZvbzogMSwgYmFyOiAyLCBiYXo6IDN9KTsgLy89PiAne1wiYmFyXCI6IDIsIFwiYmF6XCI6IDMsIFwiZm9vXCI6IDF9J1xuICAgICAqICAgICAgUi50b1N0cmluZyhuZXcgRGF0ZSgnMjAwMS0wMi0wM1QwNDowNTowNlonKSk7IC8vPT4gJ25ldyBEYXRlKFwiMjAwMS0wMi0wM1QwNDowNTowNi4wMDBaXCIpJ1xuICAgICAqL1xuICAgIHZhciB0b1N0cmluZyA9IF9jdXJyeTEoZnVuY3Rpb24gdG9TdHJpbmcodmFsKSB7XG4gICAgICAgIHJldHVybiBfdG9TdHJpbmcodmFsLCBbXSk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgbmV3IGxpc3Qgd2l0aG91dCB2YWx1ZXMgaW4gdGhlIGZpcnN0IGFyZ3VtZW50LlxuICAgICAqIGBSLmVxdWFsc2AgaXMgdXNlZCB0byBkZXRlcm1pbmUgZXF1YWxpdHkuXG4gICAgICpcbiAgICAgKiBBY3RzIGFzIGEgdHJhbnNkdWNlciBpZiBhIHRyYW5zZm9ybWVyIGlzIGdpdmVuIGluIGxpc3QgcG9zaXRpb24uXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjE5LjBcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgW2FdIC0+IFthXSAtPiBbYV1cbiAgICAgKiBAcGFyYW0ge0FycmF5fSBsaXN0MSBUaGUgdmFsdWVzIHRvIGJlIHJlbW92ZWQgZnJvbSBgbGlzdDJgLlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGxpc3QyIFRoZSBhcnJheSB0byByZW1vdmUgdmFsdWVzIGZyb20uXG4gICAgICogQHJldHVybiB7QXJyYXl9IFRoZSBuZXcgYXJyYXkgd2l0aG91dCB2YWx1ZXMgaW4gYGxpc3QxYC5cbiAgICAgKiBAc2VlIFIudHJhbnNkdWNlXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi53aXRob3V0KFsxLCAyXSwgWzEsIDIsIDEsIDMsIDRdKTsgLy89PiBbMywgNF1cbiAgICAgKi9cbiAgICB2YXIgd2l0aG91dCA9IF9jdXJyeTIoZnVuY3Rpb24gKHhzLCBsaXN0KSB7XG4gICAgICAgIHJldHVybiByZWplY3QoZmxpcChfY29udGFpbnMpKHhzKSwgbGlzdCk7XG4gICAgfSk7XG5cbiAgICAvLyBBIHNpbXBsZSBTZXQgdHlwZSB0aGF0IGhvbm91cnMgUi5lcXVhbHMgc2VtYW50aWNzXG4gICAgLyogZ2xvYmFscyBTZXQgKi9cbiAgICAvKipcbiAgICAgICAqIENvbWJpbmVzIHRoZSBsb2dpYyBmb3IgY2hlY2tpbmcgd2hldGhlciBhbiBpdGVtIGlzIGEgbWVtYmVyIG9mIHRoZSBzZXQgYW5kXG4gICAgICAgKiBmb3IgYWRkaW5nIGEgbmV3IGl0ZW0gdG8gdGhlIHNldC5cbiAgICAgICAqXG4gICAgICAgKiBAcGFyYW0gaXRlbSAgICAgICBUaGUgaXRlbSB0byBjaGVjayBvciBhZGQgdG8gdGhlIFNldCBpbnN0YW5jZS5cbiAgICAgICAqIEBwYXJhbSBzaG91bGRBZGQgIElmIHRydWUsIHRoZSBpdGVtIHdpbGwgYmUgYWRkZWQgdG8gdGhlIHNldCBpZiBpdCBkb2Vzbid0XG4gICAgICAgKiAgICAgICAgICAgICAgICAgICBhbHJlYWR5IGV4aXN0LlxuICAgICAgICogQHBhcmFtIHNldCAgICAgICAgVGhlIHNldCBpbnN0YW5jZSB0byBjaGVjayBvciBhZGQgdG8uXG4gICAgICAgKiBAcmV0dXJuIHtib29sZWFufSBXaGVuIHNob3VsZEFkZCBpcyB0cnVlLCB0aGlzIHdpbGwgcmV0dXJuIHRydWUgd2hlbiBhIG5ld1xuICAgICAgICogICAgICAgICAgICAgICAgICAgaXRlbSB3YXMgYWRkZWQgb3RoZXJ3aXNlIGZhbHNlLiBXaGVuIHNob3VsZEFkZCBpcyBmYWxzZSxcbiAgICAgICAqICAgICAgICAgICAgICAgICAgIHRoaXMgd2lsbCByZXR1cm4gdHJ1ZSBpZiB0aGUgaXRlbSBhbHJlYWR5IGV4aXN0cywgb3RoZXJ3aXNlXG4gICAgICAgKiAgICAgICAgICAgICAgICAgICBmYWxzZS5cbiAgICAgICAqL1xuICAgIC8vIGRpc3Rpbmd1aXNoIGJldHdlZW4gKzAgYW5kIC0wXG4gICAgLy8gdGhlc2UgdHlwZXMgY2FuIGFsbCB1dGlsaXNlIFNldFxuICAgIC8vIHNldC5faXRlbXNbJ2Jvb2xlYW4nXSBob2xkcyBhIHR3byBlbGVtZW50IGFycmF5XG4gICAgLy8gcmVwcmVzZW50aW5nIFsgZmFsc2VFeGlzdHMsIHRydWVFeGlzdHMgXVxuICAgIC8vIGNvbXBhcmUgZnVuY3Rpb25zIGZvciByZWZlcmVuY2UgZXF1YWxpdHlcbiAgICAvKiBmYWxscyB0aHJvdWdoICovXG4gICAgLy8gcmVkdWNlIHRoZSBzZWFyY2ggc2l6ZSBvZiBoZXRlcm9nZW5lb3VzIHNldHMgYnkgY3JlYXRpbmcgYnVja2V0c1xuICAgIC8vIGZvciBlYWNoIHR5cGUuXG4gICAgLy8gc2NhbiB0aHJvdWdoIGFsbCBwcmV2aW91c2x5IGFwcGxpZWQgaXRlbXNcbiAgICB2YXIgX1NldCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gX1NldCgpIHtcbiAgICAgICAgICAgIC8qIGdsb2JhbHMgU2V0ICovXG4gICAgICAgICAgICB0aGlzLl9uYXRpdmVTZXQgPSB0eXBlb2YgU2V0ID09PSAnZnVuY3Rpb24nID8gbmV3IFNldCgpIDogbnVsbDtcbiAgICAgICAgICAgIHRoaXMuX2l0ZW1zID0ge307XG4gICAgICAgIH1cbiAgICAgICAgX1NldC5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgIHJldHVybiBoYXNPckFkZChpdGVtLCB0cnVlLCB0aGlzKTtcbiAgICAgICAgfTtcbiAgICAgICAgX1NldC5wcm90b3R5cGUuaGFzID0gZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgIHJldHVybiBoYXNPckFkZChpdGVtLCBmYWxzZSwgdGhpcyk7XG4gICAgICAgIH07XG4gICAgICAgIC8qKlxuICAgICAgICogQ29tYmluZXMgdGhlIGxvZ2ljIGZvciBjaGVja2luZyB3aGV0aGVyIGFuIGl0ZW0gaXMgYSBtZW1iZXIgb2YgdGhlIHNldCBhbmRcbiAgICAgICAqIGZvciBhZGRpbmcgYSBuZXcgaXRlbSB0byB0aGUgc2V0LlxuICAgICAgICpcbiAgICAgICAqIEBwYXJhbSBpdGVtICAgICAgIFRoZSBpdGVtIHRvIGNoZWNrIG9yIGFkZCB0byB0aGUgU2V0IGluc3RhbmNlLlxuICAgICAgICogQHBhcmFtIHNob3VsZEFkZCAgSWYgdHJ1ZSwgdGhlIGl0ZW0gd2lsbCBiZSBhZGRlZCB0byB0aGUgc2V0IGlmIGl0IGRvZXNuJ3RcbiAgICAgICAqICAgICAgICAgICAgICAgICAgIGFscmVhZHkgZXhpc3QuXG4gICAgICAgKiBAcGFyYW0gc2V0ICAgICAgICBUaGUgc2V0IGluc3RhbmNlIHRvIGNoZWNrIG9yIGFkZCB0by5cbiAgICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IFdoZW4gc2hvdWxkQWRkIGlzIHRydWUsIHRoaXMgd2lsbCByZXR1cm4gdHJ1ZSB3aGVuIGEgbmV3XG4gICAgICAgKiAgICAgICAgICAgICAgICAgICBpdGVtIHdhcyBhZGRlZCBvdGhlcndpc2UgZmFsc2UuIFdoZW4gc2hvdWxkQWRkIGlzIGZhbHNlLFxuICAgICAgICogICAgICAgICAgICAgICAgICAgdGhpcyB3aWxsIHJldHVybiB0cnVlIGlmIHRoZSBpdGVtIGFscmVhZHkgZXhpc3RzLCBvdGhlcndpc2VcbiAgICAgICAqICAgICAgICAgICAgICAgICAgIGZhbHNlLlxuICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIGhhc09yQWRkKGl0ZW0sIHNob3VsZEFkZCwgc2V0KSB7XG4gICAgICAgICAgICB2YXIgdHlwZSA9IHR5cGVvZiBpdGVtO1xuICAgICAgICAgICAgdmFyIHByZXZTaXplLCBuZXdTaXplO1xuICAgICAgICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgICAgICBjYXNlICdzdHJpbmcnOlxuICAgICAgICAgICAgY2FzZSAnbnVtYmVyJzpcbiAgICAgICAgICAgICAgICAvLyBkaXN0aW5ndWlzaCBiZXR3ZWVuICswIGFuZCAtMFxuICAgICAgICAgICAgICAgIGlmIChpdGVtID09PSAwICYmICFzZXQuX2l0ZW1zWyctMCddICYmIDEgLyBpdGVtID09PSAtSW5maW5pdHkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNob3VsZEFkZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0Ll9pdGVtc1snLTAnXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNob3VsZEFkZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gdGhlc2UgdHlwZXMgY2FuIGFsbCB1dGlsaXNlIFNldFxuICAgICAgICAgICAgICAgIGlmIChzZXQuX25hdGl2ZVNldCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2hvdWxkQWRkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2U2l6ZSA9IHNldC5fbmF0aXZlU2V0LnNpemU7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXQuX25hdGl2ZVNldC5hZGQoaXRlbSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdTaXplID0gc2V0Ll9uYXRpdmVTZXQuc2l6ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXdTaXplID4gcHJldlNpemU7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2V0Ll9uYXRpdmVTZXQuaGFzKGl0ZW0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEodHlwZSBpbiBzZXQuX2l0ZW1zKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNob3VsZEFkZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldC5faXRlbXNbdHlwZV0gPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXQuX2l0ZW1zW3R5cGVdW2l0ZW1dID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzaG91bGRBZGQ7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaXRlbSBpbiBzZXQuX2l0ZW1zW3R5cGVdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIXNob3VsZEFkZDtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzaG91bGRBZGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXQuX2l0ZW1zW3R5cGVdW2l0ZW1dID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzaG91bGRBZGQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlICdib29sZWFuJzpcbiAgICAgICAgICAgICAgICAvLyBzZXQuX2l0ZW1zWydib29sZWFuJ10gaG9sZHMgYSB0d28gZWxlbWVudCBhcnJheVxuICAgICAgICAgICAgICAgIC8vIHJlcHJlc2VudGluZyBbIGZhbHNlRXhpc3RzLCB0cnVlRXhpc3RzIF1cbiAgICAgICAgICAgICAgICBpZiAodHlwZSBpbiBzZXQuX2l0ZW1zKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBiSWR4ID0gaXRlbSA/IDEgOiAwO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2V0Ll9pdGVtc1t0eXBlXVtiSWR4XSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICFzaG91bGRBZGQ7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2hvdWxkQWRkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0Ll9pdGVtc1t0eXBlXVtiSWR4XSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2hvdWxkQWRkO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNob3VsZEFkZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0Ll9pdGVtc1t0eXBlXSA9IGl0ZW0gPyBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgXSA6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzaG91bGRBZGQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSAnZnVuY3Rpb24nOlxuICAgICAgICAgICAgICAgIC8vIGNvbXBhcmUgZnVuY3Rpb25zIGZvciByZWZlcmVuY2UgZXF1YWxpdHlcbiAgICAgICAgICAgICAgICBpZiAoc2V0Ll9uYXRpdmVTZXQgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNob3VsZEFkZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJldlNpemUgPSBzZXQuX25hdGl2ZVNldC5zaXplO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0Ll9uYXRpdmVTZXQuYWRkKGl0ZW0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3U2l6ZSA9IHNldC5fbmF0aXZlU2V0LnNpemU7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3U2l6ZSA+IHByZXZTaXplO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNldC5fbmF0aXZlU2V0LmhhcyhpdGVtKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghKHR5cGUgaW4gc2V0Ll9pdGVtcykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzaG91bGRBZGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXQuX2l0ZW1zW3R5cGVdID0gW2l0ZW1dO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNob3VsZEFkZDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoIV9jb250YWlucyhpdGVtLCBzZXQuX2l0ZW1zW3R5cGVdKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNob3VsZEFkZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldC5faXRlbXNbdHlwZV0ucHVzaChpdGVtKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzaG91bGRBZGQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuICFzaG91bGRBZGQ7XG4gICAgICAgICAgICBjYXNlICd1bmRlZmluZWQnOlxuICAgICAgICAgICAgICAgIGlmIChzZXQuX2l0ZW1zW3R5cGVdKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAhc2hvdWxkQWRkO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzaG91bGRBZGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldC5faXRlbXNbdHlwZV0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzaG91bGRBZGQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSAnb2JqZWN0JzpcbiAgICAgICAgICAgICAgICBpZiAoaXRlbSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXNldC5faXRlbXNbJ251bGwnXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNob3VsZEFkZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldC5faXRlbXNbJ251bGwnXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2hvdWxkQWRkO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAhc2hvdWxkQWRkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgLy8gcmVkdWNlIHRoZSBzZWFyY2ggc2l6ZSBvZiBoZXRlcm9nZW5lb3VzIHNldHMgYnkgY3JlYXRpbmcgYnVja2V0c1xuICAgICAgICAgICAgICAgIC8vIGZvciBlYWNoIHR5cGUuXG4gICAgICAgICAgICAgICAgdHlwZSA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChpdGVtKTtcbiAgICAgICAgICAgICAgICBpZiAoISh0eXBlIGluIHNldC5faXRlbXMpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzaG91bGRBZGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldC5faXRlbXNbdHlwZV0gPSBbaXRlbV07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNob3VsZEFkZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gc2NhbiB0aHJvdWdoIGFsbCBwcmV2aW91c2x5IGFwcGxpZWQgaXRlbXNcbiAgICAgICAgICAgICAgICBpZiAoIV9jb250YWlucyhpdGVtLCBzZXQuX2l0ZW1zW3R5cGVdKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2hvdWxkQWRkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXQuX2l0ZW1zW3R5cGVdLnB1c2goaXRlbSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNob3VsZEFkZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuICFzaG91bGRBZGQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF9TZXQ7XG4gICAgfSgpO1xuXG4gICAgLyoqXG4gICAgICogQSBmdW5jdGlvbiB3cmFwcGluZyBjYWxscyB0byB0aGUgdHdvIGZ1bmN0aW9ucyBpbiBhbiBgJiZgIG9wZXJhdGlvbixcbiAgICAgKiByZXR1cm5pbmcgdGhlIHJlc3VsdCBvZiB0aGUgZmlyc3QgZnVuY3Rpb24gaWYgaXQgaXMgZmFsc2UteSBhbmQgdGhlIHJlc3VsdFxuICAgICAqIG9mIHRoZSBzZWNvbmQgZnVuY3Rpb24gb3RoZXJ3aXNlLiBOb3RlIHRoYXQgdGhpcyBpcyBzaG9ydC1jaXJjdWl0ZWQsXG4gICAgICogbWVhbmluZyB0aGF0IHRoZSBzZWNvbmQgZnVuY3Rpb24gd2lsbCBub3QgYmUgaW52b2tlZCBpZiB0aGUgZmlyc3QgcmV0dXJucyBhXG4gICAgICogZmFsc2UteSB2YWx1ZS5cbiAgICAgKlxuICAgICAqIEluIGFkZGl0aW9uIHRvIGZ1bmN0aW9ucywgYFIuYm90aGAgYWxzbyBhY2NlcHRzIGFueSBmYW50YXN5LWxhbmQgY29tcGF0aWJsZVxuICAgICAqIGFwcGxpY2F0aXZlIGZ1bmN0b3IuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEyLjBcbiAgICAgKiBAY2F0ZWdvcnkgTG9naWNcbiAgICAgKiBAc2lnICgqLi4uIC0+IEJvb2xlYW4pIC0+ICgqLi4uIC0+IEJvb2xlYW4pIC0+ICgqLi4uIC0+IEJvb2xlYW4pXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZiBhIHByZWRpY2F0ZVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGcgYW5vdGhlciBwcmVkaWNhdGVcbiAgICAgKiBAcmV0dXJuIHtGdW5jdGlvbn0gYSBmdW5jdGlvbiB0aGF0IGFwcGxpZXMgaXRzIGFyZ3VtZW50cyB0byBgZmAgYW5kIGBnYCBhbmQgYCYmYHMgdGhlaXIgb3V0cHV0cyB0b2dldGhlci5cbiAgICAgKiBAc2VlIFIuYW5kXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIGd0MTAgPSB4ID0+IHggPiAxMDtcbiAgICAgKiAgICAgIHZhciBldmVuID0geCA9PiB4ICUgMiA9PT0gMDtcbiAgICAgKiAgICAgIHZhciBmID0gUi5ib3RoKGd0MTAsIGV2ZW4pO1xuICAgICAqICAgICAgZigxMDApOyAvLz0+IHRydWVcbiAgICAgKiAgICAgIGYoMTAxKTsgLy89PiBmYWxzZVxuICAgICAqL1xuICAgIHZhciBib3RoID0gX2N1cnJ5MihmdW5jdGlvbiBib3RoKGYsIGcpIHtcbiAgICAgICAgcmV0dXJuIF9pc0Z1bmN0aW9uKGYpID8gZnVuY3Rpb24gX2JvdGgoKSB7XG4gICAgICAgICAgICByZXR1cm4gZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpICYmIGcuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgfSA6IGxpZnQoYW5kKShmLCBnKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFRha2VzIGEgZnVuY3Rpb24gYGZgIGFuZCByZXR1cm5zIGEgZnVuY3Rpb24gYGdgIHN1Y2ggdGhhdDpcbiAgICAgKlxuICAgICAqICAgLSBhcHBseWluZyBgZ2AgdG8gemVybyBvciBtb3JlIGFyZ3VtZW50cyB3aWxsIGdpdmUgX190cnVlX18gaWYgYXBwbHlpbmdcbiAgICAgKiAgICAgdGhlIHNhbWUgYXJndW1lbnRzIHRvIGBmYCBnaXZlcyBhIGxvZ2ljYWwgX19mYWxzZV9fIHZhbHVlOyBhbmRcbiAgICAgKlxuICAgICAqICAgLSBhcHBseWluZyBgZ2AgdG8gemVybyBvciBtb3JlIGFyZ3VtZW50cyB3aWxsIGdpdmUgX19mYWxzZV9fIGlmIGFwcGx5aW5nXG4gICAgICogICAgIHRoZSBzYW1lIGFyZ3VtZW50cyB0byBgZmAgZ2l2ZXMgYSBsb2dpY2FsIF9fdHJ1ZV9fIHZhbHVlLlxuICAgICAqXG4gICAgICogYFIuY29tcGxlbWVudGAgd2lsbCB3b3JrIG9uIGFsbCBvdGhlciBmdW5jdG9ycyBhcyB3ZWxsLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xMi4wXG4gICAgICogQGNhdGVnb3J5IExvZ2ljXG4gICAgICogQHNpZyAoKi4uLiAtPiAqKSAtPiAoKi4uLiAtPiBCb29sZWFuKVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZcbiAgICAgKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAgICAgKiBAc2VlIFIubm90XG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIGlzRXZlbiA9IG4gPT4gbiAlIDIgPT09IDA7XG4gICAgICogICAgICB2YXIgaXNPZGQgPSBSLmNvbXBsZW1lbnQoaXNFdmVuKTtcbiAgICAgKiAgICAgIGlzT2RkKDIxKTsgLy89PiB0cnVlXG4gICAgICogICAgICBpc09kZCg0Mik7IC8vPT4gZmFsc2VcbiAgICAgKi9cbiAgICB2YXIgY29tcGxlbWVudCA9IGxpZnQobm90KTtcblxuICAgIC8qKlxuICAgICAqIEEgZnVuY3Rpb24gd3JhcHBpbmcgY2FsbHMgdG8gdGhlIHR3byBmdW5jdGlvbnMgaW4gYW4gYHx8YCBvcGVyYXRpb24sXG4gICAgICogcmV0dXJuaW5nIHRoZSByZXN1bHQgb2YgdGhlIGZpcnN0IGZ1bmN0aW9uIGlmIGl0IGlzIHRydXRoLXkgYW5kIHRoZSByZXN1bHRcbiAgICAgKiBvZiB0aGUgc2Vjb25kIGZ1bmN0aW9uIG90aGVyd2lzZS4gTm90ZSB0aGF0IHRoaXMgaXMgc2hvcnQtY2lyY3VpdGVkLFxuICAgICAqIG1lYW5pbmcgdGhhdCB0aGUgc2Vjb25kIGZ1bmN0aW9uIHdpbGwgbm90IGJlIGludm9rZWQgaWYgdGhlIGZpcnN0IHJldHVybnMgYVxuICAgICAqIHRydXRoLXkgdmFsdWUuXG4gICAgICpcbiAgICAgKiBJbiBhZGRpdGlvbiB0byBmdW5jdGlvbnMsIGBSLmVpdGhlcmAgYWxzbyBhY2NlcHRzIGFueSBmYW50YXN5LWxhbmQgY29tcGF0aWJsZVxuICAgICAqIGFwcGxpY2F0aXZlIGZ1bmN0b3IuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEyLjBcbiAgICAgKiBAY2F0ZWdvcnkgTG9naWNcbiAgICAgKiBAc2lnICgqLi4uIC0+IEJvb2xlYW4pIC0+ICgqLi4uIC0+IEJvb2xlYW4pIC0+ICgqLi4uIC0+IEJvb2xlYW4pXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZiBhIHByZWRpY2F0ZVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGcgYW5vdGhlciBwcmVkaWNhdGVcbiAgICAgKiBAcmV0dXJuIHtGdW5jdGlvbn0gYSBmdW5jdGlvbiB0aGF0IGFwcGxpZXMgaXRzIGFyZ3VtZW50cyB0byBgZmAgYW5kIGBnYCBhbmQgYHx8YHMgdGhlaXIgb3V0cHV0cyB0b2dldGhlci5cbiAgICAgKiBAc2VlIFIub3JcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgZ3QxMCA9IHggPT4geCA+IDEwO1xuICAgICAqICAgICAgdmFyIGV2ZW4gPSB4ID0+IHggJSAyID09PSAwO1xuICAgICAqICAgICAgdmFyIGYgPSBSLmVpdGhlcihndDEwLCBldmVuKTtcbiAgICAgKiAgICAgIGYoMTAxKTsgLy89PiB0cnVlXG4gICAgICogICAgICBmKDgpOyAvLz0+IHRydWVcbiAgICAgKi9cbiAgICB2YXIgZWl0aGVyID0gX2N1cnJ5MihmdW5jdGlvbiBlaXRoZXIoZiwgZykge1xuICAgICAgICByZXR1cm4gX2lzRnVuY3Rpb24oZikgPyBmdW5jdGlvbiBfZWl0aGVyKCkge1xuICAgICAgICAgICAgcmV0dXJuIGYuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCBnLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIH0gOiBsaWZ0KG9yKShmLCBnKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFR1cm5zIGEgbmFtZWQgbWV0aG9kIHdpdGggYSBzcGVjaWZpZWQgYXJpdHkgaW50byBhIGZ1bmN0aW9uIHRoYXQgY2FuIGJlXG4gICAgICogY2FsbGVkIGRpcmVjdGx5IHN1cHBsaWVkIHdpdGggYXJndW1lbnRzIGFuZCBhIHRhcmdldCBvYmplY3QuXG4gICAgICpcbiAgICAgKiBUaGUgcmV0dXJuZWQgZnVuY3Rpb24gaXMgY3VycmllZCBhbmQgYWNjZXB0cyBgYXJpdHkgKyAxYCBwYXJhbWV0ZXJzIHdoZXJlXG4gICAgICogdGhlIGZpbmFsIHBhcmFtZXRlciBpcyB0aGUgdGFyZ2V0IG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4wXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAgICogQHNpZyBOdW1iZXIgLT4gU3RyaW5nIC0+IChhIC0+IGIgLT4gLi4uIC0+IG4gLT4gT2JqZWN0IC0+ICopXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGFyaXR5IE51bWJlciBvZiBhcmd1bWVudHMgdGhlIHJldHVybmVkIGZ1bmN0aW9uIHNob3VsZCB0YWtlXG4gICAgICogICAgICAgIGJlZm9yZSB0aGUgdGFyZ2V0IG9iamVjdC5cbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gbWV0aG9kIE5hbWUgb2YgdGhlIG1ldGhvZCB0byBjYWxsLlxuICAgICAqIEByZXR1cm4ge0Z1bmN0aW9ufSBBIG5ldyBjdXJyaWVkIGZ1bmN0aW9uLlxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBzbGljZUZyb20gPSBSLmludm9rZXIoMSwgJ3NsaWNlJyk7XG4gICAgICogICAgICBzbGljZUZyb20oNiwgJ2FiY2RlZmdoaWprbG0nKTsgLy89PiAnZ2hpamtsbSdcbiAgICAgKiAgICAgIHZhciBzbGljZUZyb202ID0gUi5pbnZva2VyKDIsICdzbGljZScpKDYpO1xuICAgICAqICAgICAgc2xpY2VGcm9tNig4LCAnYWJjZGVmZ2hpamtsbScpOyAvLz0+ICdnaCdcbiAgICAgKi9cbiAgICB2YXIgaW52b2tlciA9IF9jdXJyeTIoZnVuY3Rpb24gaW52b2tlcihhcml0eSwgbWV0aG9kKSB7XG4gICAgICAgIHJldHVybiBjdXJyeU4oYXJpdHkgKyAxLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gYXJndW1lbnRzW2FyaXR5XTtcbiAgICAgICAgICAgIGlmICh0YXJnZXQgIT0gbnVsbCAmJiBpcyhGdW5jdGlvbiwgdGFyZ2V0W21ldGhvZF0pKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRhcmdldFttZXRob2RdLmFwcGx5KHRhcmdldCwgX3NsaWNlKGFyZ3VtZW50cywgMCwgYXJpdHkpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IodG9TdHJpbmcodGFyZ2V0KSArICcgZG9lcyBub3QgaGF2ZSBhIG1ldGhvZCBuYW1lZCBcIicgKyBtZXRob2QgKyAnXCInKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgc3RyaW5nIG1hZGUgYnkgaW5zZXJ0aW5nIHRoZSBgc2VwYXJhdG9yYCBiZXR3ZWVuIGVhY2ggZWxlbWVudCBhbmRcbiAgICAgKiBjb25jYXRlbmF0aW5nIGFsbCB0aGUgZWxlbWVudHMgaW50byBhIHNpbmdsZSBzdHJpbmcuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBMaXN0XG4gICAgICogQHNpZyBTdHJpbmcgLT4gW2FdIC0+IFN0cmluZ1xuICAgICAqIEBwYXJhbSB7TnVtYmVyfFN0cmluZ30gc2VwYXJhdG9yIFRoZSBzdHJpbmcgdXNlZCB0byBzZXBhcmF0ZSB0aGUgZWxlbWVudHMuXG4gICAgICogQHBhcmFtIHtBcnJheX0geHMgVGhlIGVsZW1lbnRzIHRvIGpvaW4gaW50byBhIHN0cmluZy5cbiAgICAgKiBAcmV0dXJuIHtTdHJpbmd9IHN0ciBUaGUgc3RyaW5nIG1hZGUgYnkgY29uY2F0ZW5hdGluZyBgeHNgIHdpdGggYHNlcGFyYXRvcmAuXG4gICAgICogQHNlZSBSLnNwbGl0XG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIHNwYWNlciA9IFIuam9pbignICcpO1xuICAgICAqICAgICAgc3BhY2VyKFsnYScsIDIsIDMuNF0pOyAgIC8vPT4gJ2EgMiAzLjQnXG4gICAgICogICAgICBSLmpvaW4oJ3wnLCBbMSwgMiwgM10pOyAgICAvLz0+ICcxfDJ8MydcbiAgICAgKi9cbiAgICB2YXIgam9pbiA9IGludm9rZXIoMSwgJ2pvaW4nKTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgZnVuY3Rpb24gdGhhdCwgd2hlbiBpbnZva2VkLCBjYWNoZXMgdGhlIHJlc3VsdCBvZiBjYWxsaW5nIGBmbmBcbiAgICAgKiBmb3IgYSBnaXZlbiBhcmd1bWVudCBzZXQgYW5kIHJldHVybnMgdGhlIHJlc3VsdC4gU3Vic2VxdWVudCBjYWxscyB0byB0aGVcbiAgICAgKiBtZW1vaXplZCBgZm5gIHdpdGggdGhlIHNhbWUgYXJndW1lbnQgc2V0IHdpbGwgbm90IHJlc3VsdCBpbiBhbiBhZGRpdGlvbmFsXG4gICAgICogY2FsbCB0byBgZm5gOyBpbnN0ZWFkLCB0aGUgY2FjaGVkIHJlc3VsdCBmb3IgdGhhdCBzZXQgb2YgYXJndW1lbnRzIHdpbGwgYmVcbiAgICAgKiByZXR1cm5lZC5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4wXG4gICAgICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gICAgICogQHNpZyAoKi4uLiAtPiBhKSAtPiAoKi4uLiAtPiBhKVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBmdW5jdGlvbiB0byBtZW1vaXplLlxuICAgICAqIEByZXR1cm4ge0Z1bmN0aW9ufSBNZW1vaXplZCB2ZXJzaW9uIG9mIGBmbmAuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgdmFyIGNvdW50ID0gMDtcbiAgICAgKiAgICAgIHZhciBmYWN0b3JpYWwgPSBSLm1lbW9pemUobiA9PiB7XG4gICAgICogICAgICAgIGNvdW50ICs9IDE7XG4gICAgICogICAgICAgIHJldHVybiBSLnByb2R1Y3QoUi5yYW5nZSgxLCBuICsgMSkpO1xuICAgICAqICAgICAgfSk7XG4gICAgICogICAgICBmYWN0b3JpYWwoNSk7IC8vPT4gMTIwXG4gICAgICogICAgICBmYWN0b3JpYWwoNSk7IC8vPT4gMTIwXG4gICAgICogICAgICBmYWN0b3JpYWwoNSk7IC8vPT4gMTIwXG4gICAgICogICAgICBjb3VudDsgLy89PiAxXG4gICAgICovXG4gICAgdmFyIG1lbW9pemUgPSBfY3VycnkxKGZ1bmN0aW9uIG1lbW9pemUoZm4pIHtcbiAgICAgICAgdmFyIGNhY2hlID0ge307XG4gICAgICAgIHJldHVybiBfYXJpdHkoZm4ubGVuZ3RoLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIga2V5ID0gdG9TdHJpbmcoYXJndW1lbnRzKTtcbiAgICAgICAgICAgIGlmICghX2hhcyhrZXksIGNhY2hlKSkge1xuICAgICAgICAgICAgICAgIGNhY2hlW2tleV0gPSBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlW2tleV07XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogU3BsaXRzIGEgc3RyaW5nIGludG8gYW4gYXJyYXkgb2Ygc3RyaW5ncyBiYXNlZCBvbiB0aGUgZ2l2ZW5cbiAgICAgKiBzZXBhcmF0b3IuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEuMFxuICAgICAqIEBjYXRlZ29yeSBTdHJpbmdcbiAgICAgKiBAc2lnIChTdHJpbmcgfCBSZWdFeHApIC0+IFN0cmluZyAtPiBbU3RyaW5nXVxuICAgICAqIEBwYXJhbSB7U3RyaW5nfFJlZ0V4cH0gc2VwIFRoZSBwYXR0ZXJuLlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBzdHIgVGhlIHN0cmluZyB0byBzZXBhcmF0ZSBpbnRvIGFuIGFycmF5LlxuICAgICAqIEByZXR1cm4ge0FycmF5fSBUaGUgYXJyYXkgb2Ygc3RyaW5ncyBmcm9tIGBzdHJgIHNlcGFyYXRlZCBieSBgc3RyYC5cbiAgICAgKiBAc2VlIFIuam9pblxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIHZhciBwYXRoQ29tcG9uZW50cyA9IFIuc3BsaXQoJy8nKTtcbiAgICAgKiAgICAgIFIudGFpbChwYXRoQ29tcG9uZW50cygnL3Vzci9sb2NhbC9iaW4vbm9kZScpKTsgLy89PiBbJ3VzcicsICdsb2NhbCcsICdiaW4nLCAnbm9kZSddXG4gICAgICpcbiAgICAgKiAgICAgIFIuc3BsaXQoJy4nLCAnYS5iLmMueHl6LmQnKTsgLy89PiBbJ2EnLCAnYicsICdjJywgJ3h5eicsICdkJ11cbiAgICAgKi9cbiAgICB2YXIgc3BsaXQgPSBpbnZva2VyKDEsICdzcGxpdCcpO1xuXG4gICAgLyoqXG4gICAgICogRGV0ZXJtaW5lcyB3aGV0aGVyIGEgZ2l2ZW4gc3RyaW5nIG1hdGNoZXMgYSBnaXZlbiByZWd1bGFyIGV4cHJlc3Npb24uXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjEyLjBcbiAgICAgKiBAY2F0ZWdvcnkgU3RyaW5nXG4gICAgICogQHNpZyBSZWdFeHAgLT4gU3RyaW5nIC0+IEJvb2xlYW5cbiAgICAgKiBAcGFyYW0ge1JlZ0V4cH0gcGF0dGVyblxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgICAqIEBzZWUgUi5tYXRjaFxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIudGVzdCgvXngvLCAneHl6Jyk7IC8vPT4gdHJ1ZVxuICAgICAqICAgICAgUi50ZXN0KC9eeS8sICd4eXonKTsgLy89PiBmYWxzZVxuICAgICAqL1xuICAgIHZhciB0ZXN0ID0gX2N1cnJ5MihmdW5jdGlvbiB0ZXN0KHBhdHRlcm4sIHN0cikge1xuICAgICAgICBpZiAoIV9pc1JlZ0V4cChwYXR0ZXJuKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXFx1MjAxOHRlc3RcXHUyMDE5IHJlcXVpcmVzIGEgdmFsdWUgb2YgdHlwZSBSZWdFeHAgYXMgaXRzIGZpcnN0IGFyZ3VtZW50OyByZWNlaXZlZCAnICsgdG9TdHJpbmcocGF0dGVybikpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfY2xvbmVSZWdFeHAocGF0dGVybikudGVzdChzdHIpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGxvd2VyIGNhc2UgdmVyc2lvbiBvZiBhIHN0cmluZy5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuOS4wXG4gICAgICogQGNhdGVnb3J5IFN0cmluZ1xuICAgICAqIEBzaWcgU3RyaW5nIC0+IFN0cmluZ1xuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBzdHIgVGhlIHN0cmluZyB0byBsb3dlciBjYXNlLlxuICAgICAqIEByZXR1cm4ge1N0cmluZ30gVGhlIGxvd2VyIGNhc2UgdmVyc2lvbiBvZiBgc3RyYC5cbiAgICAgKiBAc2VlIFIudG9VcHBlclxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIudG9Mb3dlcignWFlaJyk7IC8vPT4gJ3h5eidcbiAgICAgKi9cbiAgICB2YXIgdG9Mb3dlciA9IGludm9rZXIoMCwgJ3RvTG93ZXJDYXNlJyk7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgdXBwZXIgY2FzZSB2ZXJzaW9uIG9mIGEgc3RyaW5nLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC45LjBcbiAgICAgKiBAY2F0ZWdvcnkgU3RyaW5nXG4gICAgICogQHNpZyBTdHJpbmcgLT4gU3RyaW5nXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHN0ciBUaGUgc3RyaW5nIHRvIHVwcGVyIGNhc2UuXG4gICAgICogQHJldHVybiB7U3RyaW5nfSBUaGUgdXBwZXIgY2FzZSB2ZXJzaW9uIG9mIGBzdHJgLlxuICAgICAqIEBzZWUgUi50b0xvd2VyXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi50b1VwcGVyKCdhYmMnKTsgLy89PiAnQUJDJ1xuICAgICAqL1xuICAgIHZhciB0b1VwcGVyID0gaW52b2tlcigwLCAndG9VcHBlckNhc2UnKTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBuZXcgbGlzdCBjb250YWluaW5nIG9ubHkgb25lIGNvcHkgb2YgZWFjaCBlbGVtZW50IGluIHRoZSBvcmlnaW5hbFxuICAgICAqIGxpc3QsIGJhc2VkIHVwb24gdGhlIHZhbHVlIHJldHVybmVkIGJ5IGFwcGx5aW5nIHRoZSBzdXBwbGllZCBmdW5jdGlvbiB0b1xuICAgICAqIGVhY2ggbGlzdCBlbGVtZW50LiBQcmVmZXJzIHRoZSBmaXJzdCBpdGVtIGlmIHRoZSBzdXBwbGllZCBmdW5jdGlvbiBwcm9kdWNlc1xuICAgICAqIHRoZSBzYW1lIHZhbHVlIG9uIHR3byBpdGVtcy4gYFIuZXF1YWxzYCBpcyB1c2VkIGZvciBjb21wYXJpc29uLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xNi4wXG4gICAgICogQGNhdGVnb3J5IExpc3RcbiAgICAgKiBAc2lnIChhIC0+IGIpIC0+IFthXSAtPiBbYV1cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBBIGZ1bmN0aW9uIHVzZWQgdG8gcHJvZHVjZSBhIHZhbHVlIHRvIHVzZSBkdXJpbmcgY29tcGFyaXNvbnMuXG4gICAgICogQHBhcmFtIHtBcnJheX0gbGlzdCBUaGUgYXJyYXkgdG8gY29uc2lkZXIuXG4gICAgICogQHJldHVybiB7QXJyYXl9IFRoZSBsaXN0IG9mIHVuaXF1ZSBpdGVtcy5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLnVuaXFCeShNYXRoLmFicywgWy0xLCAtNSwgMiwgMTAsIDEsIDJdKTsgLy89PiBbLTEsIC01LCAyLCAxMF1cbiAgICAgKi9cbiAgICB2YXIgdW5pcUJ5ID0gX2N1cnJ5MihmdW5jdGlvbiB1bmlxQnkoZm4sIGxpc3QpIHtcbiAgICAgICAgdmFyIHNldCA9IG5ldyBfU2V0KCk7XG4gICAgICAgIHZhciByZXN1bHQgPSBbXTtcbiAgICAgICAgdmFyIGlkeCA9IDA7XG4gICAgICAgIHZhciBhcHBsaWVkSXRlbSwgaXRlbTtcbiAgICAgICAgd2hpbGUgKGlkeCA8IGxpc3QubGVuZ3RoKSB7XG4gICAgICAgICAgICBpdGVtID0gbGlzdFtpZHhdO1xuICAgICAgICAgICAgYXBwbGllZEl0ZW0gPSBmbihpdGVtKTtcbiAgICAgICAgICAgIGlmIChzZXQuYWRkKGFwcGxpZWRJdGVtKSkge1xuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKGl0ZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWR4ICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHJlc3VsdCBvZiBjb25jYXRlbmF0aW5nIHRoZSBnaXZlbiBsaXN0cyBvciBzdHJpbmdzLlxuICAgICAqXG4gICAgICogRGlzcGF0Y2hlcyB0byB0aGUgYGNvbmNhdGAgbWV0aG9kIG9mIHRoZSBmaXJzdCBhcmd1bWVudCwgaWYgcHJlc2VudC5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4wXG4gICAgICogQGNhdGVnb3J5IExpc3RcbiAgICAgKiBAc2lnIFthXSAtPiBbYV0gLT4gW2FdXG4gICAgICogQHNpZyBTdHJpbmcgLT4gU3RyaW5nIC0+IFN0cmluZ1xuICAgICAqIEBwYXJhbSB7QXJyYXl8U3RyaW5nfSBhXG4gICAgICogQHBhcmFtIHtBcnJheXxTdHJpbmd9IGJcbiAgICAgKiBAcmV0dXJuIHtBcnJheXxTdHJpbmd9XG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICBSLmNvbmNhdChbXSwgW10pOyAvLz0+IFtdXG4gICAgICogICAgICBSLmNvbmNhdChbNCwgNSwgNl0sIFsxLCAyLCAzXSk7IC8vPT4gWzQsIDUsIDYsIDEsIDIsIDNdXG4gICAgICogICAgICBSLmNvbmNhdCgnQUJDJywgJ0RFRicpOyAvLyAnQUJDREVGJ1xuICAgICAqL1xuICAgIHZhciBjb25jYXQgPSBmbGlwKGludm9rZXIoMSwgJ2NvbmNhdCcpKTtcblxuICAgIC8qKlxuICAgICAqIEZpbmRzIHRoZSBzZXQgKGkuZS4gbm8gZHVwbGljYXRlcykgb2YgYWxsIGVsZW1lbnRzIGNvbnRhaW5lZCBpbiB0aGUgZmlyc3Qgb3JcbiAgICAgKiBzZWNvbmQgbGlzdCwgYnV0IG5vdCBib3RoLlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xOS4wXG4gICAgICogQGNhdGVnb3J5IFJlbGF0aW9uXG4gICAgICogQHNpZyBbKl0gLT4gWypdIC0+IFsqXVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGxpc3QxIFRoZSBmaXJzdCBsaXN0LlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGxpc3QyIFRoZSBzZWNvbmQgbGlzdC5cbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gVGhlIGVsZW1lbnRzIGluIGBsaXN0MWAgb3IgYGxpc3QyYCwgYnV0IG5vdCBib3RoLlxuICAgICAqIEBzZWUgUi5zeW1tZXRyaWNEaWZmZXJlbmNlV2l0aFxuICAgICAqIEBleGFtcGxlXG4gICAgICpcbiAgICAgKiAgICAgIFIuc3ltbWV0cmljRGlmZmVyZW5jZShbMSwyLDMsNF0sIFs3LDYsNSw0LDNdKTsgLy89PiBbMSwyLDcsNiw1XVxuICAgICAqICAgICAgUi5zeW1tZXRyaWNEaWZmZXJlbmNlKFs3LDYsNSw0LDNdLCBbMSwyLDMsNF0pOyAvLz0+IFs3LDYsNSwxLDJdXG4gICAgICovXG4gICAgdmFyIHN5bW1ldHJpY0RpZmZlcmVuY2UgPSBfY3VycnkyKGZ1bmN0aW9uIHN5bW1ldHJpY0RpZmZlcmVuY2UobGlzdDEsIGxpc3QyKSB7XG4gICAgICAgIHJldHVybiBjb25jYXQoZGlmZmVyZW5jZShsaXN0MSwgbGlzdDIpLCBkaWZmZXJlbmNlKGxpc3QyLCBsaXN0MSkpO1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogRmluZHMgdGhlIHNldCAoaS5lLiBubyBkdXBsaWNhdGVzKSBvZiBhbGwgZWxlbWVudHMgY29udGFpbmVkIGluIHRoZSBmaXJzdCBvclxuICAgICAqIHNlY29uZCBsaXN0LCBidXQgbm90IGJvdGguIER1cGxpY2F0aW9uIGlzIGRldGVybWluZWQgYWNjb3JkaW5nIHRvIHRoZSB2YWx1ZVxuICAgICAqIHJldHVybmVkIGJ5IGFwcGx5aW5nIHRoZSBzdXBwbGllZCBwcmVkaWNhdGUgdG8gdHdvIGxpc3QgZWxlbWVudHMuXG4gICAgICpcbiAgICAgKiBAZnVuY1xuICAgICAqIEBtZW1iZXJPZiBSXG4gICAgICogQHNpbmNlIHYwLjE5LjBcbiAgICAgKiBAY2F0ZWdvcnkgUmVsYXRpb25cbiAgICAgKiBAc2lnIChhIC0+IGEgLT4gQm9vbGVhbikgLT4gW2FdIC0+IFthXSAtPiBbYV1cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcmVkIEEgcHJlZGljYXRlIHVzZWQgdG8gdGVzdCB3aGV0aGVyIHR3byBpdGVtcyBhcmUgZXF1YWwuXG4gICAgICogQHBhcmFtIHtBcnJheX0gbGlzdDEgVGhlIGZpcnN0IGxpc3QuXG4gICAgICogQHBhcmFtIHtBcnJheX0gbGlzdDIgVGhlIHNlY29uZCBsaXN0LlxuICAgICAqIEByZXR1cm4ge0FycmF5fSBUaGUgZWxlbWVudHMgaW4gYGxpc3QxYCBvciBgbGlzdDJgLCBidXQgbm90IGJvdGguXG4gICAgICogQHNlZSBSLnN5bW1ldHJpY0RpZmZlcmVuY2VcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqXG4gICAgICogICAgICB2YXIgZXFBID0gUi5lcUJ5KFIucHJvcCgnYScpKTtcbiAgICAgKiAgICAgIHZhciBsMSA9IFt7YTogMX0sIHthOiAyfSwge2E6IDN9LCB7YTogNH1dO1xuICAgICAqICAgICAgdmFyIGwyID0gW3thOiAzfSwge2E6IDR9LCB7YTogNX0sIHthOiA2fV07XG4gICAgICogICAgICBSLnN5bW1ldHJpY0RpZmZlcmVuY2VXaXRoKGVxQSwgbDEsIGwyKTsgLy89PiBbe2E6IDF9LCB7YTogMn0sIHthOiA1fSwge2E6IDZ9XVxuICAgICAqL1xuICAgIHZhciBzeW1tZXRyaWNEaWZmZXJlbmNlV2l0aCA9IF9jdXJyeTMoZnVuY3Rpb24gc3ltbWV0cmljRGlmZmVyZW5jZVdpdGgocHJlZCwgbGlzdDEsIGxpc3QyKSB7XG4gICAgICAgIHJldHVybiBjb25jYXQoZGlmZmVyZW5jZVdpdGgocHJlZCwgbGlzdDEsIGxpc3QyKSwgZGlmZmVyZW5jZVdpdGgocHJlZCwgbGlzdDIsIGxpc3QxKSk7XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgbmV3IGxpc3QgY29udGFpbmluZyBvbmx5IG9uZSBjb3B5IG9mIGVhY2ggZWxlbWVudCBpbiB0aGUgb3JpZ2luYWxcbiAgICAgKiBsaXN0LiBgUi5lcXVhbHNgIGlzIHVzZWQgdG8gZGV0ZXJtaW5lIGVxdWFsaXR5LlxuICAgICAqXG4gICAgICogQGZ1bmNcbiAgICAgKiBAbWVtYmVyT2YgUlxuICAgICAqIEBzaW5jZSB2MC4xLjBcbiAgICAgKiBAY2F0ZWdvcnkgTGlzdFxuICAgICAqIEBzaWcgW2FdIC0+IFthXVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGxpc3QgVGhlIGFycmF5IHRvIGNvbnNpZGVyLlxuICAgICAqIEByZXR1cm4ge0FycmF5fSBUaGUgbGlzdCBvZiB1bmlxdWUgaXRlbXMuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi51bmlxKFsxLCAxLCAyLCAxXSk7IC8vPT4gWzEsIDJdXG4gICAgICogICAgICBSLnVuaXEoWzEsICcxJ10pOyAgICAgLy89PiBbMSwgJzEnXVxuICAgICAqICAgICAgUi51bmlxKFtbNDJdLCBbNDJdXSk7IC8vPT4gW1s0Ml1dXG4gICAgICovXG4gICAgdmFyIHVuaXEgPSB1bmlxQnkoaWRlbnRpdHkpO1xuXG4gICAgLyoqXG4gICAgICogQ29tYmluZXMgdHdvIGxpc3RzIGludG8gYSBzZXQgKGkuZS4gbm8gZHVwbGljYXRlcykgY29tcG9zZWQgb2YgdGhvc2VcbiAgICAgKiBlbGVtZW50cyBjb21tb24gdG8gYm90aCBsaXN0cy5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4wXG4gICAgICogQGNhdGVnb3J5IFJlbGF0aW9uXG4gICAgICogQHNpZyBbKl0gLT4gWypdIC0+IFsqXVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGxpc3QxIFRoZSBmaXJzdCBsaXN0LlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGxpc3QyIFRoZSBzZWNvbmQgbGlzdC5cbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gVGhlIGxpc3Qgb2YgZWxlbWVudHMgZm91bmQgaW4gYm90aCBgbGlzdDFgIGFuZCBgbGlzdDJgLlxuICAgICAqIEBzZWUgUi5pbnRlcnNlY3Rpb25XaXRoXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi5pbnRlcnNlY3Rpb24oWzEsMiwzLDRdLCBbNyw2LDUsNCwzXSk7IC8vPT4gWzQsIDNdXG4gICAgICovXG4gICAgdmFyIGludGVyc2VjdGlvbiA9IF9jdXJyeTIoZnVuY3Rpb24gaW50ZXJzZWN0aW9uKGxpc3QxLCBsaXN0Mikge1xuICAgICAgICB2YXIgbG9va3VwTGlzdCwgZmlsdGVyZWRMaXN0O1xuICAgICAgICBpZiAobGlzdDEubGVuZ3RoID4gbGlzdDIubGVuZ3RoKSB7XG4gICAgICAgICAgICBsb29rdXBMaXN0ID0gbGlzdDE7XG4gICAgICAgICAgICBmaWx0ZXJlZExpc3QgPSBsaXN0MjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxvb2t1cExpc3QgPSBsaXN0MjtcbiAgICAgICAgICAgIGZpbHRlcmVkTGlzdCA9IGxpc3QxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1bmlxKF9maWx0ZXIoZmxpcChfY29udGFpbnMpKGxvb2t1cExpc3QpLCBmaWx0ZXJlZExpc3QpKTtcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIENvbWJpbmVzIHR3byBsaXN0cyBpbnRvIGEgc2V0IChpLmUuIG5vIGR1cGxpY2F0ZXMpIGNvbXBvc2VkIG9mIHRoZSBlbGVtZW50c1xuICAgICAqIG9mIGVhY2ggbGlzdC5cbiAgICAgKlxuICAgICAqIEBmdW5jXG4gICAgICogQG1lbWJlck9mIFJcbiAgICAgKiBAc2luY2UgdjAuMS4wXG4gICAgICogQGNhdGVnb3J5IFJlbGF0aW9uXG4gICAgICogQHNpZyBbKl0gLT4gWypdIC0+IFsqXVxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFzIFRoZSBmaXJzdCBsaXN0LlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGJzIFRoZSBzZWNvbmQgbGlzdC5cbiAgICAgKiBAcmV0dXJuIHtBcnJheX0gVGhlIGZpcnN0IGFuZCBzZWNvbmQgbGlzdHMgY29uY2F0ZW5hdGVkLCB3aXRoXG4gICAgICogICAgICAgICBkdXBsaWNhdGVzIHJlbW92ZWQuXG4gICAgICogQGV4YW1wbGVcbiAgICAgKlxuICAgICAqICAgICAgUi51bmlvbihbMSwgMiwgM10sIFsyLCAzLCA0XSk7IC8vPT4gWzEsIDIsIDMsIDRdXG4gICAgICovXG4gICAgdmFyIHVuaW9uID0gX2N1cnJ5Mihjb21wb3NlKHVuaXEsIF9jb25jYXQpKTtcblxuICAgIHZhciBSID0ge1xuICAgICAgICBGOiBGLFxuICAgICAgICBUOiBULFxuICAgICAgICBfXzogX18sXG4gICAgICAgIGFkZDogYWRkLFxuICAgICAgICBhZGRJbmRleDogYWRkSW5kZXgsXG4gICAgICAgIGFkanVzdDogYWRqdXN0LFxuICAgICAgICBhbGw6IGFsbCxcbiAgICAgICAgYWxsUGFzczogYWxsUGFzcyxcbiAgICAgICAgYWxsVW5pcTogYWxsVW5pcSxcbiAgICAgICAgYWx3YXlzOiBhbHdheXMsXG4gICAgICAgIGFuZDogYW5kLFxuICAgICAgICBhbnk6IGFueSxcbiAgICAgICAgYW55UGFzczogYW55UGFzcyxcbiAgICAgICAgYXA6IGFwLFxuICAgICAgICBhcGVydHVyZTogYXBlcnR1cmUsXG4gICAgICAgIGFwcGVuZDogYXBwZW5kLFxuICAgICAgICBhcHBseTogYXBwbHksXG4gICAgICAgIGFwcGx5U3BlYzogYXBwbHlTcGVjLFxuICAgICAgICBhc3NvYzogYXNzb2MsXG4gICAgICAgIGFzc29jUGF0aDogYXNzb2NQYXRoLFxuICAgICAgICBiaW5hcnk6IGJpbmFyeSxcbiAgICAgICAgYmluZDogYmluZCxcbiAgICAgICAgYm90aDogYm90aCxcbiAgICAgICAgY2FsbDogY2FsbCxcbiAgICAgICAgY2hhaW46IGNoYWluLFxuICAgICAgICBjbGFtcDogY2xhbXAsXG4gICAgICAgIGNsb25lOiBjbG9uZSxcbiAgICAgICAgY29tcGFyYXRvcjogY29tcGFyYXRvcixcbiAgICAgICAgY29tcGxlbWVudDogY29tcGxlbWVudCxcbiAgICAgICAgY29tcG9zZTogY29tcG9zZSxcbiAgICAgICAgY29tcG9zZUs6IGNvbXBvc2VLLFxuICAgICAgICBjb21wb3NlUDogY29tcG9zZVAsXG4gICAgICAgIGNvbmNhdDogY29uY2F0LFxuICAgICAgICBjb25kOiBjb25kLFxuICAgICAgICBjb25zdHJ1Y3Q6IGNvbnN0cnVjdCxcbiAgICAgICAgY29uc3RydWN0TjogY29uc3RydWN0TixcbiAgICAgICAgY29udGFpbnM6IGNvbnRhaW5zLFxuICAgICAgICBjb252ZXJnZTogY29udmVyZ2UsXG4gICAgICAgIGNvdW50Qnk6IGNvdW50QnksXG4gICAgICAgIGN1cnJ5OiBjdXJyeSxcbiAgICAgICAgY3VycnlOOiBjdXJyeU4sXG4gICAgICAgIGRlYzogZGVjLFxuICAgICAgICBkZWZhdWx0VG86IGRlZmF1bHRUbyxcbiAgICAgICAgZGlmZmVyZW5jZTogZGlmZmVyZW5jZSxcbiAgICAgICAgZGlmZmVyZW5jZVdpdGg6IGRpZmZlcmVuY2VXaXRoLFxuICAgICAgICBkaXNzb2M6IGRpc3NvYyxcbiAgICAgICAgZGlzc29jUGF0aDogZGlzc29jUGF0aCxcbiAgICAgICAgZGl2aWRlOiBkaXZpZGUsXG4gICAgICAgIGRyb3A6IGRyb3AsXG4gICAgICAgIGRyb3BMYXN0OiBkcm9wTGFzdCxcbiAgICAgICAgZHJvcExhc3RXaGlsZTogZHJvcExhc3RXaGlsZSxcbiAgICAgICAgZHJvcFJlcGVhdHM6IGRyb3BSZXBlYXRzLFxuICAgICAgICBkcm9wUmVwZWF0c1dpdGg6IGRyb3BSZXBlYXRzV2l0aCxcbiAgICAgICAgZHJvcFdoaWxlOiBkcm9wV2hpbGUsXG4gICAgICAgIGVpdGhlcjogZWl0aGVyLFxuICAgICAgICBlbXB0eTogZW1wdHksXG4gICAgICAgIGVxQnk6IGVxQnksXG4gICAgICAgIGVxUHJvcHM6IGVxUHJvcHMsXG4gICAgICAgIGVxdWFsczogZXF1YWxzLFxuICAgICAgICBldm9sdmU6IGV2b2x2ZSxcbiAgICAgICAgZmlsdGVyOiBmaWx0ZXIsXG4gICAgICAgIGZpbmQ6IGZpbmQsXG4gICAgICAgIGZpbmRJbmRleDogZmluZEluZGV4LFxuICAgICAgICBmaW5kTGFzdDogZmluZExhc3QsXG4gICAgICAgIGZpbmRMYXN0SW5kZXg6IGZpbmRMYXN0SW5kZXgsXG4gICAgICAgIGZsYXR0ZW46IGZsYXR0ZW4sXG4gICAgICAgIGZsaXA6IGZsaXAsXG4gICAgICAgIGZvckVhY2g6IGZvckVhY2gsXG4gICAgICAgIGZyb21QYWlyczogZnJvbVBhaXJzLFxuICAgICAgICBncm91cEJ5OiBncm91cEJ5LFxuICAgICAgICBncm91cFdpdGg6IGdyb3VwV2l0aCxcbiAgICAgICAgZ3Q6IGd0LFxuICAgICAgICBndGU6IGd0ZSxcbiAgICAgICAgaGFzOiBoYXMsXG4gICAgICAgIGhhc0luOiBoYXNJbixcbiAgICAgICAgaGVhZDogaGVhZCxcbiAgICAgICAgaWRlbnRpY2FsOiBpZGVudGljYWwsXG4gICAgICAgIGlkZW50aXR5OiBpZGVudGl0eSxcbiAgICAgICAgaWZFbHNlOiBpZkVsc2UsXG4gICAgICAgIGluYzogaW5jLFxuICAgICAgICBpbmRleEJ5OiBpbmRleEJ5LFxuICAgICAgICBpbmRleE9mOiBpbmRleE9mLFxuICAgICAgICBpbml0OiBpbml0LFxuICAgICAgICBpbnNlcnQ6IGluc2VydCxcbiAgICAgICAgaW5zZXJ0QWxsOiBpbnNlcnRBbGwsXG4gICAgICAgIGludGVyc2VjdGlvbjogaW50ZXJzZWN0aW9uLFxuICAgICAgICBpbnRlcnNlY3Rpb25XaXRoOiBpbnRlcnNlY3Rpb25XaXRoLFxuICAgICAgICBpbnRlcnNwZXJzZTogaW50ZXJzcGVyc2UsXG4gICAgICAgIGludG86IGludG8sXG4gICAgICAgIGludmVydDogaW52ZXJ0LFxuICAgICAgICBpbnZlcnRPYmo6IGludmVydE9iaixcbiAgICAgICAgaW52b2tlcjogaW52b2tlcixcbiAgICAgICAgaXM6IGlzLFxuICAgICAgICBpc0FycmF5TGlrZTogaXNBcnJheUxpa2UsXG4gICAgICAgIGlzRW1wdHk6IGlzRW1wdHksXG4gICAgICAgIGlzTmlsOiBpc05pbCxcbiAgICAgICAgam9pbjogam9pbixcbiAgICAgICAganV4dDoganV4dCxcbiAgICAgICAga2V5czoga2V5cyxcbiAgICAgICAga2V5c0luOiBrZXlzSW4sXG4gICAgICAgIGxhc3Q6IGxhc3QsXG4gICAgICAgIGxhc3RJbmRleE9mOiBsYXN0SW5kZXhPZixcbiAgICAgICAgbGVuZ3RoOiBsZW5ndGgsXG4gICAgICAgIGxlbnM6IGxlbnMsXG4gICAgICAgIGxlbnNJbmRleDogbGVuc0luZGV4LFxuICAgICAgICBsZW5zUGF0aDogbGVuc1BhdGgsXG4gICAgICAgIGxlbnNQcm9wOiBsZW5zUHJvcCxcbiAgICAgICAgbGlmdDogbGlmdCxcbiAgICAgICAgbGlmdE46IGxpZnROLFxuICAgICAgICBsdDogbHQsXG4gICAgICAgIGx0ZTogbHRlLFxuICAgICAgICBtYXA6IG1hcCxcbiAgICAgICAgbWFwQWNjdW06IG1hcEFjY3VtLFxuICAgICAgICBtYXBBY2N1bVJpZ2h0OiBtYXBBY2N1bVJpZ2h0LFxuICAgICAgICBtYXBPYmpJbmRleGVkOiBtYXBPYmpJbmRleGVkLFxuICAgICAgICBtYXRjaDogbWF0Y2gsXG4gICAgICAgIG1hdGhNb2Q6IG1hdGhNb2QsXG4gICAgICAgIG1heDogbWF4LFxuICAgICAgICBtYXhCeTogbWF4QnksXG4gICAgICAgIG1lYW46IG1lYW4sXG4gICAgICAgIG1lZGlhbjogbWVkaWFuLFxuICAgICAgICBtZW1vaXplOiBtZW1vaXplLFxuICAgICAgICBtZXJnZTogbWVyZ2UsXG4gICAgICAgIG1lcmdlQWxsOiBtZXJnZUFsbCxcbiAgICAgICAgbWVyZ2VXaXRoOiBtZXJnZVdpdGgsXG4gICAgICAgIG1lcmdlV2l0aEtleTogbWVyZ2VXaXRoS2V5LFxuICAgICAgICBtaW46IG1pbixcbiAgICAgICAgbWluQnk6IG1pbkJ5LFxuICAgICAgICBtb2R1bG86IG1vZHVsbyxcbiAgICAgICAgbXVsdGlwbHk6IG11bHRpcGx5LFxuICAgICAgICBuQXJ5OiBuQXJ5LFxuICAgICAgICBuZWdhdGU6IG5lZ2F0ZSxcbiAgICAgICAgbm9uZTogbm9uZSxcbiAgICAgICAgbm90OiBub3QsXG4gICAgICAgIG50aDogbnRoLFxuICAgICAgICBudGhBcmc6IG50aEFyZyxcbiAgICAgICAgb2JqT2Y6IG9iak9mLFxuICAgICAgICBvZjogb2YsXG4gICAgICAgIG9taXQ6IG9taXQsXG4gICAgICAgIG9uY2U6IG9uY2UsXG4gICAgICAgIG9yOiBvcixcbiAgICAgICAgb3Zlcjogb3ZlcixcbiAgICAgICAgcGFpcjogcGFpcixcbiAgICAgICAgcGFydGlhbDogcGFydGlhbCxcbiAgICAgICAgcGFydGlhbFJpZ2h0OiBwYXJ0aWFsUmlnaHQsXG4gICAgICAgIHBhcnRpdGlvbjogcGFydGl0aW9uLFxuICAgICAgICBwYXRoOiBwYXRoLFxuICAgICAgICBwYXRoRXE6IHBhdGhFcSxcbiAgICAgICAgcGF0aE9yOiBwYXRoT3IsXG4gICAgICAgIHBhdGhTYXRpc2ZpZXM6IHBhdGhTYXRpc2ZpZXMsXG4gICAgICAgIHBpY2s6IHBpY2ssXG4gICAgICAgIHBpY2tBbGw6IHBpY2tBbGwsXG4gICAgICAgIHBpY2tCeTogcGlja0J5LFxuICAgICAgICBwaXBlOiBwaXBlLFxuICAgICAgICBwaXBlSzogcGlwZUssXG4gICAgICAgIHBpcGVQOiBwaXBlUCxcbiAgICAgICAgcGx1Y2s6IHBsdWNrLFxuICAgICAgICBwcmVwZW5kOiBwcmVwZW5kLFxuICAgICAgICBwcm9kdWN0OiBwcm9kdWN0LFxuICAgICAgICBwcm9qZWN0OiBwcm9qZWN0LFxuICAgICAgICBwcm9wOiBwcm9wLFxuICAgICAgICBwcm9wRXE6IHByb3BFcSxcbiAgICAgICAgcHJvcElzOiBwcm9wSXMsXG4gICAgICAgIHByb3BPcjogcHJvcE9yLFxuICAgICAgICBwcm9wU2F0aXNmaWVzOiBwcm9wU2F0aXNmaWVzLFxuICAgICAgICBwcm9wczogcHJvcHMsXG4gICAgICAgIHJhbmdlOiByYW5nZSxcbiAgICAgICAgcmVkdWNlOiByZWR1Y2UsXG4gICAgICAgIHJlZHVjZUJ5OiByZWR1Y2VCeSxcbiAgICAgICAgcmVkdWNlUmlnaHQ6IHJlZHVjZVJpZ2h0LFxuICAgICAgICByZWR1Y2VkOiByZWR1Y2VkLFxuICAgICAgICByZWplY3Q6IHJlamVjdCxcbiAgICAgICAgcmVtb3ZlOiByZW1vdmUsXG4gICAgICAgIHJlcGVhdDogcmVwZWF0LFxuICAgICAgICByZXBsYWNlOiByZXBsYWNlLFxuICAgICAgICByZXZlcnNlOiByZXZlcnNlLFxuICAgICAgICBzY2FuOiBzY2FuLFxuICAgICAgICBzZXF1ZW5jZTogc2VxdWVuY2UsXG4gICAgICAgIHNldDogc2V0LFxuICAgICAgICBzbGljZTogc2xpY2UsXG4gICAgICAgIHNvcnQ6IHNvcnQsXG4gICAgICAgIHNvcnRCeTogc29ydEJ5LFxuICAgICAgICBzcGxpdDogc3BsaXQsXG4gICAgICAgIHNwbGl0QXQ6IHNwbGl0QXQsXG4gICAgICAgIHNwbGl0RXZlcnk6IHNwbGl0RXZlcnksXG4gICAgICAgIHNwbGl0V2hlbjogc3BsaXRXaGVuLFxuICAgICAgICBzdWJ0cmFjdDogc3VidHJhY3QsXG4gICAgICAgIHN1bTogc3VtLFxuICAgICAgICBzeW1tZXRyaWNEaWZmZXJlbmNlOiBzeW1tZXRyaWNEaWZmZXJlbmNlLFxuICAgICAgICBzeW1tZXRyaWNEaWZmZXJlbmNlV2l0aDogc3ltbWV0cmljRGlmZmVyZW5jZVdpdGgsXG4gICAgICAgIHRhaWw6IHRhaWwsXG4gICAgICAgIHRha2U6IHRha2UsXG4gICAgICAgIHRha2VMYXN0OiB0YWtlTGFzdCxcbiAgICAgICAgdGFrZUxhc3RXaGlsZTogdGFrZUxhc3RXaGlsZSxcbiAgICAgICAgdGFrZVdoaWxlOiB0YWtlV2hpbGUsXG4gICAgICAgIHRhcDogdGFwLFxuICAgICAgICB0ZXN0OiB0ZXN0LFxuICAgICAgICB0aW1lczogdGltZXMsXG4gICAgICAgIHRvTG93ZXI6IHRvTG93ZXIsXG4gICAgICAgIHRvUGFpcnM6IHRvUGFpcnMsXG4gICAgICAgIHRvUGFpcnNJbjogdG9QYWlyc0luLFxuICAgICAgICB0b1N0cmluZzogdG9TdHJpbmcsXG4gICAgICAgIHRvVXBwZXI6IHRvVXBwZXIsXG4gICAgICAgIHRyYW5zZHVjZTogdHJhbnNkdWNlLFxuICAgICAgICB0cmFuc3Bvc2U6IHRyYW5zcG9zZSxcbiAgICAgICAgdHJhdmVyc2U6IHRyYXZlcnNlLFxuICAgICAgICB0cmltOiB0cmltLFxuICAgICAgICB0cnlDYXRjaDogdHJ5Q2F0Y2gsXG4gICAgICAgIHR5cGU6IHR5cGUsXG4gICAgICAgIHVuYXBwbHk6IHVuYXBwbHksXG4gICAgICAgIHVuYXJ5OiB1bmFyeSxcbiAgICAgICAgdW5jdXJyeU46IHVuY3VycnlOLFxuICAgICAgICB1bmZvbGQ6IHVuZm9sZCxcbiAgICAgICAgdW5pb246IHVuaW9uLFxuICAgICAgICB1bmlvbldpdGg6IHVuaW9uV2l0aCxcbiAgICAgICAgdW5pcTogdW5pcSxcbiAgICAgICAgdW5pcUJ5OiB1bmlxQnksXG4gICAgICAgIHVuaXFXaXRoOiB1bmlxV2l0aCxcbiAgICAgICAgdW5sZXNzOiB1bmxlc3MsXG4gICAgICAgIHVubmVzdDogdW5uZXN0LFxuICAgICAgICB1bnRpbDogdW50aWwsXG4gICAgICAgIHVwZGF0ZTogdXBkYXRlLFxuICAgICAgICB1c2VXaXRoOiB1c2VXaXRoLFxuICAgICAgICB2YWx1ZXM6IHZhbHVlcyxcbiAgICAgICAgdmFsdWVzSW46IHZhbHVlc0luLFxuICAgICAgICB2aWV3OiB2aWV3LFxuICAgICAgICB3aGVuOiB3aGVuLFxuICAgICAgICB3aGVyZTogd2hlcmUsXG4gICAgICAgIHdoZXJlRXE6IHdoZXJlRXEsXG4gICAgICAgIHdpdGhvdXQ6IHdpdGhvdXQsXG4gICAgICAgIHdyYXA6IHdyYXAsXG4gICAgICAgIHhwcm9kOiB4cHJvZCxcbiAgICAgICAgemlwOiB6aXAsXG4gICAgICAgIHppcE9iajogemlwT2JqLFxuICAgICAgICB6aXBXaXRoOiB6aXBXaXRoXG4gICAgfTtcbiAgLyogZXNsaW50LWVudiBhbWQgKi9cblxuICAvKiBURVNUX0VOVFJZX1BPSU5UICovXG5cbiAgaWYgKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jykge1xuICAgIG1vZHVsZS5leHBvcnRzID0gUjtcbiAgfSBlbHNlIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcbiAgICBkZWZpbmUoZnVuY3Rpb24oKSB7IHJldHVybiBSOyB9KTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLlIgPSBSO1xuICB9XG5cbn0uY2FsbCh0aGlzKSk7XG4iXX0=
